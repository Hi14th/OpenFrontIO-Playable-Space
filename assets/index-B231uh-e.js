import{o as q,s as Y,b as pt,r as Ws,c as lo,_ as Be,p as W5,d as K5,f as xa,l as my,n as Q,u as Bo,g as te,h as Y5,j as X5,i as up,t as id,k as Z5,m as dp,q as No,v as gc,w as Q5,x as J5,y as e_,G as t_,z as r_,B as i_,C as li,S as lg,H as cg,I as ug,T as dg,J as n_,W as a_,K as s_}from"./vendor-Bxo2sbh2.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function r(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(n){if(n.ep)return;n.ep=!0;const a=r(n);fetch(n.href,a)}})();const mc=`x.xx.xx
`;class o_{constructor(){this.listeners=new Map}emit(e){const r=e.constructor,i=this.listeners.get(r);if(i)for(const n of i)n(e)}on(e,r){this.listeners.has(e)||this.listeners.set(e,[]),this.listeners.get(e).push(r)}off(e,r){const i=this.listeners.get(e);if(i){const n=i.indexOf(r);n>-1&&i.splice(n,1)}}}const hp=JSON.parse(`[{"code":"xx","name":"None"},{"code":"Abbasid Caliphate","continent":"Asia","name":"Abbasid Caliphate"},{"code":"Achaemenid Empire","continent":"Asia","name":"Achaemenid Empire"},{"code":"ae","continent":"Asia","name":"United Arab Emirates"},{"code":"af","continent":"Asia","name":"Afghanistan"},{"code":"African union","continent":"Africa","name":"African Union"},{"code":"ag","continent":"North America","name":"Antigua and Barbuda"},{"code":"ai","continent":"North America","name":"Anguilla"},{"code":"1_Airgialla","continent":"Europe","name":"Airgialla"},{"code":"al","continent":"Europe","name":"Albania"},{"code":"Alabama","continent":"North America","name":"Alabama"},{"code":"ax","continent":"Europe","name":"Aland Islands"},{"code":"Alaska","continent":"North America","name":"Alaska"},{"code":"dz","continent":"Africa","name":"Algeria"},{"code":"Amazigh flag","continent":"Africa","name":"Amazigh Flag"},{"code":"amazonas","continent":"South America","name":"Amazonas"},{"code":"as","continent":"Oceania","name":"American Samoa"},{"code":"am","continent":"Asia","name":"Armenia"},{"code":"Anarchist flag","name":"Anarchist Flag"},{"code":"ad","continent":"Europe","name":"Andorra"},{"code":"ao","continent":"Africa","name":"Angola"},{"code":"aq","name":"Antarctica"},{"code":"antipope","continent":"Europe","name":"Anti-Pope"},{"code":"aquitaine","continent":"Europe","name":"Aquitaine"},{"code":"ar","continent":"South America","name":"Argentina"},{"code":"Aram Damascus","continent":"Asia","name":"Aram Damascus"},{"code":"Arabia","continent":"Asia","name":"Arabia"},{"code":"Arizona","continent":"North America","name":"Arizona"},{"code":"Arkansas","continent":"North America","name":"Arkansas"},{"code":"armagnac","continent":"Europe","name":"Armagnac"},{"code":"aw","continent":"South America","name":"Aruba"},{"code":"sh-ac","continent":"Africa","name":"Ascension Island"},{"code":"Assyria","continent":"Asia","name":"Assyria"},{"code":"asturias","continent":"Europe","name":"Asturias"},{"code":"Athens","continent":"Europe","name":"Athens"},{"code":"at","continent":"Europe","name":"Austria"},{"code":"austria-hungary","continent":"Europe","name":"Austria-Hungary"},{"code":"au","continent":"Oceania","name":"Australia"},{"code":"az","continent":"Asia","name":"Azerbaijan"},{"code":"Aztec Empire","continent":"North America","name":"Aztec Empire"},{"code":"bs","continent":"North America","name":"Bahamas"},{"code":"bahia","continent":"South America","name":"Bahia"},{"code":"bh","continent":"Asia","name":"Bahrain"},{"code":"baguette","name":"Baguette"},{"code":"bd","continent":"Asia","name":"Bangladesh"},{"code":"bb","continent":"North America","name":"Barbados"},{"code":"Babylonia","continent":"Asia","name":"Babylonia"},{"code":"es-pv","continent":"Europe","name":"Basque Country"},{"code":"by","continent":"Europe","name":"Belarus"},{"code":"be","continent":"Europe","name":"Belgium"},{"code":"bz","continent":"North America","name":"Belize"},{"code":"bj","continent":"Africa","name":"Benin"},{"code":"bm","continent":"North America","name":"Bermuda"},{"code":"bt","continent":"Asia","name":"Bhutan"},{"code":"bo","continent":"South America","name":"Bolivia"},{"code":"bq","continent":"South America","name":"Bonaire, Sint Eustatius and Saba"},{"code":"ba","continent":"Europe","name":"Bosnia and Herzegovina"},{"code":"bw","continent":"Africa","name":"Botswana"},{"code":"bv","name":"Bouvet Island"},{"code":"br","continent":"South America","name":"Brazil"},{"code":"io","continent":"Asia","name":"British Indian Ocean Territory"},{"code":"brittany","continent":"Europe","name":"Brittany"},{"code":"bn","continent":"Asia","name":"Brunei Darussalam"},{"code":"buenos_aires","continent":"South America","name":"Buenos Aires"},{"code":"bg","continent":"Europe","name":"Bulgaria"},{"code":"bf","continent":"Africa","name":"Burkina Faso"},{"code":"burgundy","continent":"Europe","name":"Burgundy"},{"code":"Burma","continent":"Asia","name":"Burma"},{"code":"bi","continent":"Africa","name":"Burundi"},{"code":"Byzantine Empire","continent":"Europe","name":"Byzantine Empire"},{"code":"cv","continent":"Africa","name":"Cabo Verde"},{"code":"California","continent":"North America","name":"California"},{"code":"kh","continent":"Asia","name":"Cambodia"},{"code":"cm","continent":"Africa","name":"Cameroon"},{"code":"ca","continent":"North America","name":"Canada"},{"code":"ic","continent":"Africa","name":"Canary Islands"},{"code":"Capybara","name":"Capybara"},{"code":"Carthage","continent":"Africa","name":"Carthage"},{"code":"castille","continent":"Europe","name":"Castille"},{"code":"catamarca","continent":"South America","name":"Catamarca"},{"code":"es-ct","continent":"Europe","name":"Catalonia"},{"code":"ky","continent":"North America","name":"Cayman Islands"},{"code":"Ceara","continent":"South America","name":"Ceará"},{"code":"cf","continent":"Africa","name":"Central African Republic"},{"code":"td","continent":"Africa","name":"Chad"},{"code":"cl","continent":"South America","name":"Chile"},{"code":"cn","continent":"Asia","name":"China"},{"code":"Chinook","continent":"North America","name":"Chinook"},{"code":"cx","continent":"Asia","name":"Christmas Island"},{"code":"Chuvashia","continent":"Europe","name":"Chuvashia"},{"code":"Circassia","continent":"Asia","name":"Circassia"},{"code":"cp","name":"Clipperton Island"},{"code":"cc","continent":"Asia","name":"Cocos (Keeling) Islands"},{"code":"Colchis","continent":"Asia","name":"Colchis"},{"code":"co","continent":"South America","name":"Colombia"},{"code":"Colorado","continent":"North America","name":"Colorado"},{"code":"km","continent":"Africa","name":"Comoros"},{"code":"Communist flag","name":"Communist Flag"},{"code":"Confederate States","continent":"North America","name":"Confederate States","restricted":true},{"code":"1_Connacht","continent":"Europe","name":"Connacht"},{"code":"ck","continent":"Oceania","name":"Cook Islands"},{"code":"cordoba","continent":"Europe","name":"Cordoba"},{"code":"Corsica","continent":"Europe","name":"Corsica"},{"code":"cr","continent":"North America","name":"Costa Rica"},{"code":"ci","continent":"Africa","name":"Côte d'Ivoire"},{"code":"hr","continent":"Europe","name":"Croatia"},{"code":"Cthulhu Republic","name":"Cthulhu Republic"},{"code":"cu","continent":"North America","name":"Cuba"},{"code":"cw","continent":"South America","name":"Curaçao"},{"code":"cy","continent":"Europe","name":"Cyprus"},{"code":"cz","continent":"Europe","name":"Czech Republic"},{"code":"Danzig","continent":"Europe","name":"Danzig"},{"code":"1_Dalriata","continent":"Europe","name":"Dál Riata"},{"code":"dk","continent":"Europe","name":"Denmark"},{"code":"cd","continent":"Africa","name":"Democratic Republic of the Congo"},{"code":"dg","continent":"Asia","name":"Diego Garcia"},{"code":"Dilmun","continent":"Asia","name":"Dilmun"},{"code":"dj","continent":"Africa","name":"Djibouti"},{"code":"dm","continent":"North America","name":"Dominica"},{"code":"do","continent":"North America","name":"Dominican Republic"},{"code":"1_Dumnonia","continent":"Europe","name":"Dumnonia"},{"code":"Dutch East India Company","name":"Dutch East India Company"},{"code":"1_Dyfed","continent":"Europe","name":"Dyfed"},{"code":"1_East Anglia","continent":"Europe","name":"East Anglia"},{"code":"east_germany","continent":"Europe","name":"East Germany"},{"code":"ec","continent":"South America","name":"Ecuador"},{"code":"eg","continent":"Africa","name":"Egypt"},{"code":"Elam","continent":"Asia","name":"Elam"},{"code":"sv","continent":"North America","name":"El Salvador"},{"code":"granada","continent":"Europe","name":"Emirate of Granada"},{"code":"Empire of Japan","continent":"Asia","name":"Empire of Japan"},{"code":"Empire of Japan1","continent":"Asia","name":"Empire of Japan"},{"code":"gb-eng","continent":"Europe","name":"England"},{"code":"gq","continent":"Africa","name":"Equatorial Guinea"},{"code":"er","continent":"Africa","name":"Eritrea"},{"code":"1_Essex","continent":"Europe","name":"Essex"},{"code":"ee","continent":"Europe","name":"Estonia"},{"code":"sz","continent":"Africa","name":"Eswatini"},{"code":"et","continent":"Africa","name":"Ethiopia"},{"code":"eu","continent":"Europe","name":"Europe"},{"code":"fk","continent":"South America","name":"Falkland Islands"},{"code":"fo","continent":"Europe","name":"Faroe Islands"},{"code":"Fascist Spain","continent":"Europe","name":"Fascist Spain","restricted":true},{"code":"fm","continent":"Oceania","name":"Federated States of Micronesia"},{"code":"fj","continent":"Oceania","name":"Fiji"},{"code":"fi","continent":"Europe","name":"Finland"},{"code":"Flanders","continent":"Europe","name":"Flanders"},{"code":"Florida","continent":"North America","name":"Florida"},{"code":"1_Fortriu","continent":"Europe","name":"Fortriu"},{"code":"fr","continent":"Europe","name":"France"},{"code":"1_Franks","continent":"Europe","name":"Franks"},{"code":"French foreign legion","name":"French Foreign Legion"},{"code":"gf","continent":"South America","name":"French Guiana"},{"code":"pf","continent":"Oceania","name":"French Polynesia"},{"code":"frost_giant","name":"Frost Giant"},{"code":"tf","continent":"Africa","name":"French Southern Territories"},{"code":"ga","continent":"Africa","name":"Gabon"},{"code":"galapagos","continent":"South America","name":"Galápagos"},{"code":"es-ga","continent":"Europe","name":"Galicia"},{"code":"gm","continent":"Africa","name":"Gambia"},{"code":"Garamant","continent":"Africa","name":"Garamantes"},{"code":"ge","continent":"Asia","name":"Georgia"},{"code":"Georgia_US","continent":"North America","name":"Georgia (US State)"},{"code":"German Empire","continent":"Europe","name":"German Empire","restricted":true},{"code":"de","continent":"Europe","name":"Germany"},{"code":"gh","continent":"Africa","name":"Ghana"},{"code":"gi","continent":"Europe","name":"Gibraltar"},{"code":"gr","continent":"Europe","name":"Greece"},{"code":"gl","continent":"North America","name":"Greenland"},{"code":"gd","continent":"North America","name":"Grenada"},{"code":"gp","continent":"North America","name":"Guadeloupe"},{"code":"gu","continent":"Oceania","name":"Guam"},{"code":"gt","continent":"North America","name":"Guatemala"},{"code":"gg","continent":"Europe","name":"Guernsey"},{"code":"gn","continent":"Africa","name":"Guinea"},{"code":"gw","continent":"Africa","name":"Guinea-Bissau"},{"code":"1_Gwent","continent":"Europe","name":"Gwent"},{"code":"1_Gwynedd","continent":"Europe","name":"Gwynedd"},{"code":"gy","continent":"South America","name":"Guyana"},{"code":"Habsburg Austria","continent":"Europe","name":"Habsburg Austria"},{"code":"ht","continent":"North America","name":"Haiti"},{"code":"Hawaii","continent":"Oceania","name":"Hawaii"},{"code":"hm","name":"Heard Island and McDonald Islands"},{"code":"va","continent":"Europe","name":"Holy See"},{"code":"Holy Roman Empire","continent":"Europe","name":"Holy Roman Empire"},{"code":"hn","continent":"North America","name":"Honduras"},{"code":"hk","continent":"Asia","name":"Hong Kong"},{"code":"hu","continent":"Europe","name":"Hungary"},{"code":"Hyrcania","continent":"Asia","name":"Hyrcania"},{"code":"is","continent":"Europe","name":"Iceland"},{"code":"Idaho","continent":"North America","name":"Idaho"},{"code":"Illinois","continent":"North America","name":"Illinois"},{"code":"in","continent":"Asia","name":"India"},{"code":"Indiana","continent":"North America","name":"Indiana"},{"code":"id","continent":"Asia","name":"Indonesia"},{"code":"Iowa","continent":"North America","name":"Iowa"},{"code":"iq","continent":"Asia","name":"Iraq"},{"code":"ir","continent":"Asia","name":"Iran"},{"code":"Pahlavi Iran","continent":"Asia","name":"Pahlavi Iran"},{"code":"ie","continent":"Europe","name":"Ireland"},{"code":"im","continent":"Europe","name":"Isle of Man"},{"code":"il","continent":"Asia","name":"Israel"},{"code":"it","continent":"Europe","name":"Italy"},{"code":"italy","continent":"Europe","name":"Kingdom of Italy"},{"code":"jm","continent":"North America","name":"Jamaica"},{"code":"jp","continent":"Asia","name":"Japan"},{"code":"je","continent":"Europe","name":"Jersey"},{"code":"jo","continent":"Asia","name":"Jordan"},{"code":"Kansas","continent":"North America","name":"Kansas"},{"code":"kz","continent":"Asia","name":"Kazakhstan"},{"code":"Kemet","continent":"Africa","name":"Kemet"},{"code":"ke","continent":"Africa","name":"Kenya"},{"code":"1_Kent","continent":"Europe","name":"Kent"},{"code":"Kentucky","continent":"North America","name":"Kentucky"},{"code":"Khemet","continent":"Africa","name":"Khemet"},{"code":"Kingdom of Egypt","continent":"Africa","name":"Kingdom of Egypt"},{"code":"Kingdom of Iraq","continent":"Asia","name":"Kingdom of Iraq"},{"code":"Kingdom of Jerusalem","continent":"Asia","name":"Kingdom of Jerusalem"},{"code":"Kingdom of Judah","continent":"Asia","name":"Kingdom of Judah"},{"code":"ki","continent":"Oceania","name":"Kiribati"},{"code":"Kiwi","name":"Kiwi"},{"code":"xk","continent":"Europe","name":"Kosovo"},{"code":"kurdistan","continent":"Asia","name":"Kurdistan"},{"code":"Kush","continent":"Africa","name":"Kush"},{"code":"kw","continent":"Asia","name":"Kuwait"},{"code":"kg","continent":"Asia","name":"Kyrgyzstan"},{"code":"1_Laigin","continent":"Europe","name":"Laigin"},{"code":"la","continent":"Asia","name":"Laos"},{"code":"lv","continent":"Europe","name":"Latvia"},{"code":"League of Nations","name":"League of Nations"},{"code":"lb","continent":"Asia","name":"Lebanon"},{"code":"Leinster","continent":"Europe","name":"Leinster"},{"code":"leon","continent":"Europe","name":"León"},{"code":"ls","continent":"Africa","name":"Lesotho"},{"code":"lr","continent":"Africa","name":"Liberia"},{"code":"Liberalism_flag","name":"Liberalism Flag"},{"code":"Libyan Jamahiriya","continent":"Africa","name":"Libyan Jamahiriya"},{"code":"ly","continent":"Africa","name":"Libya"},{"code":"li","continent":"Europe","name":"Liechtenstein"},{"code":"Listenbourg","name":"Listenbourg"},{"code":"lt","continent":"Europe","name":"Lithuania"},{"code":"Louisiana","continent":"North America","name":"Louisiana"},{"code":"Lower Silesia","continent":"Europe","name":"Lower Silesia"},{"code":"lu","continent":"Europe","name":"Luxembourg"},{"code":"Lydia","continent":"Asia","name":"Lydia"},{"code":"Macedonia","continent":"Europe","name":"Macedonia"},{"code":"mo","continent":"Asia","name":"Macau"},{"code":"mg","continent":"Africa","name":"Madagascar"},{"code":"Maine","continent":"North America","name":"Maine"},{"code":"mw","continent":"Africa","name":"Malawi"},{"code":"my","continent":"Asia","name":"Malaysia"},{"code":"mv","continent":"Asia","name":"Maldives"},{"code":"ml","continent":"Africa","name":"Mali"},{"code":"mt","continent":"Europe","name":"Malta"},{"code":"Maori flag","continent":"Oceania","name":"Māori Flag"},{"code":"mh","continent":"Oceania","name":"Marshall Islands"},{"code":"mq","continent":"North America","name":"Martinique"},{"code":"Maryland","continent":"North America","name":"Maryland"},{"code":"mr","continent":"Africa","name":"Mauritania"},{"code":"mu","continent":"Africa","name":"Mauritius"},{"code":"yt","continent":"Africa","name":"Mayotte"},{"code":"Median Empire","continent":"Asia","name":"Median Empire"},{"code":"1_Mercia","continent":"Europe","name":"Mercia"},{"code":"mx","continent":"North America","name":"Mexico"},{"code":"Michigan","continent":"North America","name":"Michigan"},{"code":"minas_gerais","continent":"South America","name":"Minas Gerais"},{"code":"Minnesota","continent":"North America","name":"Minnesota"},{"code":"Mississippi","continent":"North America","name":"Mississippi"},{"code":"Missouri","continent":"North America","name":"Missouri"},{"code":"md","continent":"Europe","name":"Moldova"},{"code":"mc","continent":"Europe","name":"Monaco"},{"code":"Mongol Empire","continent":"Asia","name":"Mongol Empire"},{"code":"mn","continent":"Asia","name":"Mongolia"},{"code":"Montana","continent":"North America","name":"Montana"},{"code":"me","continent":"Europe","name":"Montenegro"},{"code":"ms","continent":"North America","name":"Montserrat"},{"code":"ma","continent":"Africa","name":"Morocco"},{"code":"mz","continent":"Africa","name":"Mozambique"},{"code":"1_Munster","continent":"Europe","name":"Munster"},{"code":"mm","continent":"Asia","name":"Myanmar"},{"code":"na","continent":"Africa","name":"Namibia"},{"code":"NATO","name":"NATO"},{"code":"nr","continent":"Oceania","name":"Nauru"},{"code":"Nebraska","continent":"North America","name":"Nebraska"},{"code":"np","continent":"Asia","name":"Nepal"},{"code":"nl","continent":"Europe","name":"Netherlands"},{"code":"neuragic_empire","name":"Neuragic Empire"},{"code":"Nevada","continent":"North America","name":"Nevada"},{"code":"nc","continent":"Oceania","name":"New Caledonia"},{"code":"New_Hampshire","continent":"North America","name":"New Hampshire"},{"code":"New_Jersey","continent":"North America","name":"New Jersey"},{"code":"New_Mexico","continent":"North America","name":"New Mexico"},{"code":"New_York","continent":"North America","name":"New York"},{"code":"nz","continent":"Oceania","name":"New Zealand"},{"code":"ni","continent":"North America","name":"Nicaragua"},{"code":"ne","continent":"Africa","name":"Niger"},{"code":"ng","continent":"Africa","name":"Nigeria"},{"code":"nu","continent":"Oceania","name":"Niue"},{"code":"nf","continent":"Oceania","name":"Norfolk Island"},{"code":"normandy","continent":"Europe","name":"Normandy"},{"code":"North karelia","continent":"Europe","name":"North Karelia"},{"code":"North_Carolina","continent":"North America","name":"North Carolina"},{"code":"North_Dakota","continent":"North America","name":"North Dakota"},{"code":"kp","continent":"Asia","name":"North Korea"},{"code":"mk","continent":"Europe","name":"North Macedonia"},{"code":"northern_ireland","continent":"Europe","name":"Northern Ireland"},{"code":"mp","continent":"Oceania","name":"Northern Mariana Islands"},{"code":"1_Northern Ui Neill","continent":"Europe","name":"Northern Uí Néill"},{"code":"1_Northumbria","continent":"Europe","name":"Northumbria"},{"code":"no","continent":"Europe","name":"Norway"},{"code":"Ohio","continent":"North America","name":"Ohio"},{"code":"Oklahoma","continent":"North America","name":"Oklahoma"},{"code":"om","continent":"Asia","name":"Oman"},{"code":"Oregon","continent":"North America","name":"Oregon"},{"code":"Ottoman Empire","continent":"Asia","name":"Ottoman Empire"},{"code":"pk","continent":"Asia","name":"Pakistan"},{"code":"pw","continent":"Oceania","name":"Palau"},{"code":"Palekh","continent":"Europe","name":"Palekh"},{"code":"pa","continent":"North America","name":"Panama"},{"code":"pg","continent":"Oceania","name":"Papua New Guinea"},{"code":"Para","continent":"South America","name":"Pará"},{"code":"py","continent":"South America","name":"Paraguay"},{"code":"paris","continent":"Europe","name":"Paris"},{"code":"Pennsylvania","continent":"North America","name":"Pennsylvania"},{"code":"pe","continent":"South America","name":"Peru"},{"code":"Persia","continent":"Asia","name":"Persia"},{"code":"ph","continent":"Asia","name":"Philippines"},{"code":"Phrygia","continent":"Asia","name":"Phrygia"},{"code":"pn","continent":"Oceania","name":"Pitcairn"},{"code":"pl","continent":"Europe","name":"Poland"},{"code":"polar_bears","name":"Polar Bears"},{"code":"Polish–Lithuanian Commonwealth","continent":"Europe","name":"Polish–Lithuanian Commonwealth"},{"code":"pt","continent":"Europe","name":"Portugal"},{"code":"1_Powys","continent":"Europe","name":"Powys"},{"code":"provence","continent":"Europe","name":"Provence"},{"code":"prussia","continent":"Europe","name":"Prussia"},{"code":"pr","continent":"North America","name":"Puerto Rico"},{"code":"qa","continent":"Asia","name":"Qatar"},{"code":"Qing Dynasty","continent":"Asia","name":"Qing Dynasty"},{"code":"Quebec","continent":"North America","name":"Quebec"},{"code":"Republic of China","continent":"Asia","name":"Republic of China"},{"code":"cg","continent":"Africa","name":"Republic of the Congo"},{"code":"Republic of Egypt","continent":"Africa","name":"Republic of Egypt"},{"code":"Republic of Formosa","continent":"Asia","name":"Republic of Formosa"},{"code":"Republic of Korea","continent":"Asia","name":"Republic of Korea"},{"code":"Republic of Pirates","continent":"North America","name":"Republic of Pirates"},{"code":"re","continent":"Africa","name":"Réunion"},{"code":"Rhode_Island","continent":"North America","name":"Rhode Island"},{"code":"rio_de_janeiro","continent":"South America","name":"Rio de Janeiro"},{"code":"Romanov Russia","continent":"Europe","name":"Romanov Russia"},{"code":"ro","continent":"Europe","name":"Romania"},{"code":"Ror Empire","name":"Ror Empire"},{"code":"ru","continent":"Europe","name":"Russia"},{"code":"rw","continent":"Africa","name":"Rwanda"},{"code":"Saba kingdom","continent":"Asia","name":"Saba Kingdom"},{"code":"bl","continent":"North America","name":"Saint Barthélemy"},{"code":"sh-hl","continent":"Africa","name":"Saint Helena"},{"code":"kn","continent":"North America","name":"Saint Kitts and Nevis"},{"code":"lc","continent":"North America","name":"Saint Lucia"},{"code":"mf","continent":"North America","name":"Saint Martin"},{"code":"pm","continent":"North America","name":"Saint Pierre and Miquelon"},{"code":"vc","continent":"North America","name":"Saint Vincent and the Grenadines"},{"code":"Sami flag","continent":"Europe","name":"Sami Flag"},{"code":"ws","continent":"Oceania","name":"Samoa"},{"code":"sm","continent":"Europe","name":"San Marino"},{"code":"Santa Cruz","continent":"South America","name":"Santa Cruz"},{"code":"santa_claus","name":"Santa Claus"},{"code":"st","continent":"Africa","name":"Sao Tome and Principe"},{"code":"Sao Paulo","continent":"South America","name":"São Paulo"},{"code":"sardines","name":"Sardines"},{"code":"Sassanid Empire","continent":"Asia","name":"Sassanid Empire"},{"code":"sa","continent":"Asia","name":"Saudi Arabia"},{"code":"gb-sct","continent":"Europe","name":"Scotland"},{"code":"Second Republic of Iraq","continent":"Asia","name":"Second Republic of Iraq"},{"code":"Second Spanish Republic","continent":"Europe","name":"Second Spanish Republic"},{"code":"sn","continent":"Africa","name":"Senegal"},{"code":"rs","continent":"Europe","name":"Serbia"},{"code":"seville","continent":"Europe","name":"Seville"},{"code":"sc","continent":"Africa","name":"Seychelles"},{"code":"Siam","continent":"Asia","name":"Siam"},{"code":"Siberia","continent":"Asia","name":"Siberia"},{"code":"Sicily","continent":"Europe","name":"Sicily"},{"code":"sl","continent":"Africa","name":"Sierra Leone"},{"code":"sg","continent":"Asia","name":"Singapore"},{"code":"sx","continent":"North America","name":"Sint Maarten"},{"code":"sk","continent":"Europe","name":"Slovakia"},{"code":"si","continent":"Europe","name":"Slovenia"},{"code":"Socialist_flag","name":"Socialist Flag"},{"code":"sb","continent":"Oceania","name":"Solomon Islands"},{"code":"so","continent":"Africa","name":"Somalia"},{"code":"za","continent":"Africa","name":"South Africa"},{"code":"South_Carolina","continent":"North America","name":"South Carolina"},{"code":"South_Dakota","continent":"North America","name":"South Dakota"},{"code":"gs","continent":"Antarctica","name":"South Georgia and the South Sandwich Islands"},{"code":"kr","continent":"Asia","name":"South Korea"},{"code":"ss","continent":"Africa","name":"South Sudan"},{"code":"1_Southern Ui Neill","continent":"Europe","name":"Southern Uí Néill"},{"code":"es","continent":"Europe","name":"Spain"},{"code":"spanish_empire","continent":"Europe","name":"Spanish Empire"},{"code":"Sparta","continent":"Europe","name":"Sparta"},{"code":"SPQR","continent":"Europe","name":"SPQR"},{"code":"lk","continent":"Asia","name":"Sri Lanka"},{"code":"ps","continent":"Asia","name":"State of Palestine"},{"code":"1_Strathclyde","continent":"Europe","name":"Strathclyde"},{"code":"sd","continent":"Africa","name":"Sudan"},{"code":"Sultanate of Nejd","continent":"Asia","name":"Sultanate of Nejd"},{"code":"sr","continent":"South America","name":"Suriname"},{"code":"1_Sussex","continent":"Europe","name":"Sussex"},{"code":"sj","continent":"Europe","name":"Svalbard and Jan Mayen"},{"code":"se","continent":"Europe","name":"Sweden"},{"code":"Sweden Norway Union","continent":"Europe","name":"Sweden Norway Union"},{"code":"ch","continent":"Europe","name":"Switzerland"},{"code":"sy","continent":"Asia","name":"Syria"},{"code":"tw","continent":"Asia","name":"Taiwan"},{"code":"tj","continent":"Asia","name":"Tajikistan"},{"code":"tz","continent":"Africa","name":"Tanzania"},{"code":"Tennessee","continent":"North America","name":"Tennessee"},{"code":"Texas","continent":"North America","name":"Texas"},{"code":"th","continent":"Asia","name":"Thailand"},{"code":"tibet","continent":"Asia","name":"Tibet"},{"code":"tl","continent":"Asia","name":"Timor-Leste"},{"code":"tg","continent":"Africa","name":"Togo"},{"code":"tk","continent":"Oceania","name":"Tokelau"},{"code":"to","continent":"Oceania","name":"Tonga"},{"code":"tt","continent":"South America","name":"Trinidad and Tobago"},{"code":"sh-ta","continent":"Africa","name":"Tristan da Cunha"},{"code":"Trucial States","continent":"Asia","name":"Trucial States"},{"code":"tn","continent":"Africa","name":"Tunisia"},{"code":"tr","continent":"Asia","name":"Türkiye"},{"code":"tm","continent":"Asia","name":"Turkmenistan"},{"code":"tc","continent":"North America","name":"Turks and Caicos Islands"},{"code":"tv","continent":"Oceania","name":"Tuvalu"},{"code":"USA 1776","continent":"North America","name":"USA 1776"},{"code":"ussr","continent":"Europe","name":"USSR"},{"code":"ug","continent":"Africa","name":"Uganda"},{"code":"ua","continent":"Europe","name":"Ukraine"},{"code":"1_Ulaid","continent":"Europe","name":"Ulaid"},{"code":"Umayyad Caliphate","continent":"Asia","name":"Umayyad Caliphate"},{"code":"United Arab Republic","continent":"Asia","name":"United Arab Republic"},{"code":"gb","continent":"Europe","name":"United Kingdom"},{"code":"un","name":"United Nations"},{"code":"us","continent":"North America","name":"United States of America"},{"code":"Upper Silesia","continent":"Europe","name":"Upper Silesia"},{"code":"Urartu","continent":"Asia","name":"Urartu"},{"code":"uy","continent":"South America","name":"Uruguay"},{"code":"Utah","continent":"North America","name":"Utah"},{"code":"uz","continent":"Asia","name":"Uzbekistan"},{"code":"valencia","continent":"Europe","name":"Valencia"},{"code":"vu","continent":"Oceania","name":"Vanuatu"},{"code":"ve","continent":"South America","name":"Venezuela"},{"code":"venice","continent":"Europe","name":"Venice"},{"code":"Vermont","continent":"North America","name":"Vermont"},{"code":"vn","continent":"Asia","name":"Vietnam"},{"code":"vg","continent":"North America","name":"Virgin Islands (British)"},{"code":"vi","continent":"North America","name":"Virgin Islands (U.S.)"},{"code":"Virginia","continent":"North America","name":"Virginia"},{"code":"gb-wls","continent":"Europe","name":"Wales"},{"code":"Wallonia","continent":"Europe","name":"Wallonia"},{"code":"wf","continent":"Oceania","name":"Wallis and Futuna"},{"code":"Washington","continent":"North America","name":"Washington"},{"code":"1_Wessex","continent":"Europe","name":"Wessex"},{"code":"west_germany","continent":"Europe","name":"West Germany"},{"code":"West Roman Empire","continent":"Europe","name":"West Roman Empire"},{"code":"West_Virginia","continent":"North America","name":"West Virginia"},{"code":"eh","continent":"Africa","name":"Western Sahara"},{"code":"Wisconsin","continent":"North America","name":"Wisconsin"},{"code":"Wyoming","continent":"North America","name":"Wyoming"},{"code":"Yellow_Flag","name":"Yellow Flag"},{"code":"ye","continent":"Asia","name":"Yemen"},{"code":"yugoslavia","continent":"Europe","name":"Yugoslavia"},{"code":"Zaire","continent":"Africa","name":"Zaire"},{"code":"zm","continent":"Africa","name":"Zambia"},{"code":"Zheleznogorsk","continent":"Asia","name":"Zheleznogorsk"},{"code":"zw","continent":"Africa","name":"Zimbabwe"}]`),l_=[{key:"troops",requiresPlayer:!1},{key:"troops_frontlines",requiresPlayer:!1},{key:"gold",requiresPlayer:!1},{key:"no_attack",requiresPlayer:!1},{key:"sorry_attack",requiresPlayer:!1},{key:"alliance",requiresPlayer:!1},{key:"help_defend",requiresPlayer:!0},{key:"trade_partners",requiresPlayer:!1}],c_=[{key:"attack",requiresPlayer:!0},{key:"mirv",requiresPlayer:!0},{key:"focus",requiresPlayer:!0},{key:"finish",requiresPlayer:!0},{key:"build_warships",requiresPlayer:!1}],u_=[{key:"defend",requiresPlayer:!0},{key:"defend_from",requiresPlayer:!0},{key:"dont_attack",requiresPlayer:!0},{key:"ally",requiresPlayer:!0},{key:"build_posts",requiresPlayer:!1}],d_=[{key:"hello",requiresPlayer:!1},{key:"good_job",requiresPlayer:!1},{key:"good_luck",requiresPlayer:!1},{key:"have_fun",requiresPlayer:!1},{key:"gg",requiresPlayer:!1},{key:"nice_to_meet",requiresPlayer:!1},{key:"well_played",requiresPlayer:!1},{key:"hi_again",requiresPlayer:!1},{key:"bye",requiresPlayer:!1},{key:"thanks",requiresPlayer:!1},{key:"oops",requiresPlayer:!1},{key:"trust_me",requiresPlayer:!1},{key:"trust_broken",requiresPlayer:!1},{key:"ruining_games",requiresPlayer:!1},{key:"dont_do_that",requiresPlayer:!1},{key:"same_team",requiresPlayer:!1}],h_=[{key:"go",requiresPlayer:!1},{key:"strategy",requiresPlayer:!1},{key:"fun",requiresPlayer:!1},{key:"team_up",requiresPlayer:!0},{key:"pr",requiresPlayer:!1},{key:"build_closer",requiresPlayer:!1},{key:"coastline",requiresPlayer:!1}],p_=[{key:"strong",requiresPlayer:!0},{key:"weak",requiresPlayer:!0},{key:"mirv_soon",requiresPlayer:!0},{key:"number1_warning",requiresPlayer:!1},{key:"stalemate",requiresPlayer:!1},{key:"has_allies",requiresPlayer:!0},{key:"no_allies",requiresPlayer:!0},{key:"betrayed",requiresPlayer:!0},{key:"betrayed_me",requiresPlayer:!0},{key:"getting_big",requiresPlayer:!0},{key:"danger_base",requiresPlayer:!0},{key:"saving_for_mirv",requiresPlayer:!0},{key:"mirv_ready",requiresPlayer:!0},{key:"snowballing",requiresPlayer:!0},{key:"cheating",requiresPlayer:!0},{key:"stop_trading",requiresPlayer:!0}],by={help:l_,attack:c_,defend:u_,greet:d_,misc:h_,warnings:p_};new TextEncoder;const Yh=new TextDecoder;function f_(t){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(t);const e=atob(t),r=new Uint8Array(e.length);for(let i=0;i<e.length;i++)r[i]=e.charCodeAt(i);return r}function Uo(t){if(Uint8Array.fromBase64)return Uint8Array.fromBase64(typeof t=="string"?t:Yh.decode(t),{alphabet:"base64url"});let e=t;e instanceof Uint8Array&&(e=Yh.decode(e)),e=e.replace(/-/g,"+").replace(/_/g,"/").replace(/\s/g,"");try{return f_(e)}catch{throw new TypeError("The input to be decoded is not correctly encoded.")}}class g_ extends Error{static code="ERR_JOSE_GENERIC";code="ERR_JOSE_GENERIC";constructor(e,r){super(e,r),this.name=this.constructor.name,Error.captureStackTrace?.(this,this.constructor)}}class Qi extends g_{static code="ERR_JWT_INVALID";code="ERR_JWT_INVALID"}function m_(t){return typeof t=="object"&&t!==null}const b_=t=>{if(!m_(t)||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e};function vy(t){if(typeof t!="string")throw new Qi("JWTs must use Compact JWS serialization, JWT must be a string");const{1:e,length:r}=t.split(".");if(r===5)throw new Qi("Only JWTs using Compact JWS serialization can be decoded");if(r!==3)throw new Qi("Invalid JWT");if(!e)throw new Qi("JWTs must contain a payload");let i;try{i=Uo(e)}catch{throw new Qi("Failed to base64url decode the payload")}let n;try{n=JSON.parse(Yh.decode(i))}catch{throw new Qi("Failed to parse the decoded payload as JSON")}if(!b_(n))throw new Qi("Invalid JWT Claims Set");return n}class yy{constructor(e,r){({height:this.height,width:this.width,scale:this.scale,bytes:this.bytes}=wy(e.patternData,r))}isPrimary(e,r){const i=(e>>this.scale)%this.width,a=(r>>this.scale)%this.height*this.width+i,s=a>>3,o=a&7,l=this.bytes[3+s];if(l===void 0)throw new Error("Invalid pattern");return(l&1<<o)===0}scaledHeight(){return this.height<<this.scale}scaledWidth(){return this.width<<this.scale}}function wy(t,e){const r=e(t);if(r.length<3)throw new Error("Pattern data is too short to contain required metadata.");const i=r[0];if(i!==0)throw new Error(`Unrecognized pattern version ${i}.`);const n=r[1],a=r[2],s=n&7,o=((a&3)<<5|n>>3&31)+2,l=(a>>2&63)+2,u=o*l+7>>3;if(r.length-3<u)throw new Error("Pattern data is too short for the specified dimensions.");return{height:l,width:o,scale:s,bytes:r}}const v_=q({productId:Y(),priceId:Y(),price:Y()}),pp=Y().regex(/^[a-z0-9_]+$/).max(32),xy=Y().max(1403).base64url().refine(t=>{try{return wy(t,Uo),!0}catch(e){return e instanceof Error?console.error(JSON.stringify(e.message,null,2)):console.error(String(e)),!1}},{message:"Invalid pattern"}),_y=q({name:Y(),primaryColor:Y(),secondaryColor:Y()}),y_=q({name:pp,pattern:xy,colorPalettes:q({name:Y(),isArchived:pt()}).array().optional(),affiliateCode:Y().nullable(),product:v_.nullable()}),w_=q({colorPalettes:Ws(Y(),_y).optional(),patterns:Ws(Y(),y_),flag:q({layers:Ws(Y(),q({name:Y(),flares:lo(Y()).optional()})),color:Ws(Y(),q({color:Y(),name:Y(),flares:lo(Y()).optional()}))}).optional()}),ky={name:"default",patternData:"AAAAAA",colorPalette:void 0};const{entries:Sy,setPrototypeOf:hg,isFrozen:x_,getPrototypeOf:__,getOwnPropertyDescriptor:k_}=Object;let{freeze:Et,seal:cr,create:Ay}=Object,{apply:Xh,construct:Zh}=typeof Reflect<"u"&&Reflect;Et||(Et=function(e){return e});cr||(cr=function(e){return e});Xh||(Xh=function(e,r,i){return e.apply(r,i)});Zh||(Zh=function(e,r){return new e(...r)});const hl=Mt(Array.prototype.forEach),S_=Mt(Array.prototype.lastIndexOf),pg=Mt(Array.prototype.pop),fs=Mt(Array.prototype.push),A_=Mt(Array.prototype.splice),Yl=Mt(String.prototype.toLowerCase),nd=Mt(String.prototype.toString),fg=Mt(String.prototype.match),gs=Mt(String.prototype.replace),C_=Mt(String.prototype.indexOf),T_=Mt(String.prototype.trim),yr=Mt(Object.prototype.hasOwnProperty),_t=Mt(RegExp.prototype.test),ms=E_(TypeError);function Mt(t){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var r=arguments.length,i=new Array(r>1?r-1:0),n=1;n<r;n++)i[n-1]=arguments[n];return Xh(t,e,i)}}function E_(t){return function(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];return Zh(t,r)}}function be(t,e){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Yl;hg&&hg(t,null);let i=e.length;for(;i--;){let n=e[i];if(typeof n=="string"){const a=r(n);a!==n&&(x_(e)||(e[i]=a),n=a)}t[n]=!0}return t}function M_(t){for(let e=0;e<t.length;e++)yr(t,e)||(t[e]=null);return t}function si(t){const e=Ay(null);for(const[r,i]of Sy(t))yr(t,r)&&(Array.isArray(i)?e[r]=M_(i):i&&typeof i=="object"&&i.constructor===Object?e[r]=si(i):e[r]=i);return e}function bs(t,e){for(;t!==null;){const i=k_(t,e);if(i){if(i.get)return Mt(i.get);if(typeof i.value=="function")return Mt(i.value)}t=__(t)}function r(){return null}return r}const gg=Et(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),ad=Et(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),sd=Et(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),I_=Et(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),od=Et(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),P_=Et(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),mg=Et(["#text"]),bg=Et(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),ld=Et(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),vg=Et(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),pl=Et(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),$_=cr(/\{\{[\w\W]*|[\w\W]*\}\}/gm),R_=cr(/<%[\w\W]*|[\w\W]*%>/gm),D_=cr(/\$\{[\w\W]*/gm),L_=cr(/^data-[\-\w.\u00B7-\uFFFF]+$/),O_=cr(/^aria-[\-\w]+$/),Cy=cr(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),B_=cr(/^(?:\w+script|data):/i),N_=cr(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ty=cr(/^html$/i),U_=cr(/^[a-z][.\w]*(-[.\w]+)+$/i);var yg=Object.freeze({__proto__:null,ARIA_ATTR:O_,ATTR_WHITESPACE:N_,CUSTOM_ELEMENT:U_,DATA_ATTR:L_,DOCTYPE_NAME:Ty,ERB_EXPR:R_,IS_ALLOWED_URI:Cy,IS_SCRIPT_OR_DATA:B_,MUSTACHE_EXPR:$_,TMPLIT_EXPR:D_});const vs={element:1,text:3,progressingInstruction:7,comment:8,document:9},z_=function(){return typeof window>"u"?null:window},H_=function(e,r){if(typeof e!="object"||typeof e.createPolicy!="function")return null;let i=null;const n="data-tt-policy-suffix";r&&r.hasAttribute(n)&&(i=r.getAttribute(n));const a="dompurify"+(i?"#"+i:"");try{return e.createPolicy(a,{createHTML(s){return s},createScriptURL(s){return s}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}},wg=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Ey(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:z_();const e=re=>Ey(re);if(e.version="3.2.6",e.removed=[],!t||!t.document||t.document.nodeType!==vs.document||!t.Element)return e.isSupported=!1,e;let{document:r}=t;const i=r,n=i.currentScript,{DocumentFragment:a,HTMLTemplateElement:s,Node:o,Element:l,NodeFilter:c,NamedNodeMap:u=t.NamedNodeMap||t.MozNamedAttrMap,HTMLFormElement:p,DOMParser:d,trustedTypes:h}=t,g=l.prototype,y=bs(g,"cloneNode"),x=bs(g,"remove"),m=bs(g,"nextSibling"),k=bs(g,"childNodes"),S=bs(g,"parentNode");if(typeof s=="function"){const re=r.createElement("template");re.content&&re.content.ownerDocument&&(r=re.content.ownerDocument)}let _,w="";const{implementation:A,createNodeIterator:T,createDocumentFragment:I,getElementsByTagName:O}=r,{importNode:B}=i;let E=wg();e.isSupported=typeof Sy=="function"&&typeof S=="function"&&A&&A.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:$,ERB_EXPR:R,TMPLIT_EXPR:N,DATA_ATTR:D,ARIA_ATTR:j,IS_SCRIPT_OR_DATA:ee,ATTR_WHITESPACE:oe,CUSTOM_ELEMENT:we}=yg;let{IS_ALLOWED_URI:me}=yg,fe=null;const ut=be({},[...gg,...ad,...sd,...od,...mg]);let W=null;const Ye=be({},[...bg,...ld,...vg,...pl]);let le=Object.seal(Ay(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Rt=null,Kt=null,Pr=!0,pr=!0,$r=!1,U=!0,G=!1,z=!0,ae=!1,Ke=!1,et=!1,Zi=!1,us=!1,ke=!1,Se=!0,ea=!1;const Me="user-content-";let Ae=!0,Yt=!1,mt={},nt=null;const sl=be({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ds=null;const ol=be({},["audio","video","img","source","image","track"]);let Zu=null;const Yf=be({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ll="http://www.w3.org/1998/Math/MathML",cl="http://www.w3.org/2000/svg",Xr="http://www.w3.org/1999/xhtml";let ta=Xr,Qu=!1,Ju=null;const z5=be({},[ll,cl,Xr],nd);let ul=be({},["mi","mo","mn","ms","mtext"]),dl=be({},["annotation-xml"]);const H5=be({},["title","style","font","a","script"]);let hs=null;const F5=["application/xhtml+xml","text/html"],q5="text/html";let at=null,ra=null;const j5=r.createElement("form"),Xf=function(P){return P instanceof RegExp||P instanceof Function},ed=function(){let P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(ra&&ra===P)){if((!P||typeof P!="object")&&(P={}),P=si(P),hs=F5.indexOf(P.PARSER_MEDIA_TYPE)===-1?q5:P.PARSER_MEDIA_TYPE,at=hs==="application/xhtml+xml"?nd:Yl,fe=yr(P,"ALLOWED_TAGS")?be({},P.ALLOWED_TAGS,at):ut,W=yr(P,"ALLOWED_ATTR")?be({},P.ALLOWED_ATTR,at):Ye,Ju=yr(P,"ALLOWED_NAMESPACES")?be({},P.ALLOWED_NAMESPACES,nd):z5,Zu=yr(P,"ADD_URI_SAFE_ATTR")?be(si(Yf),P.ADD_URI_SAFE_ATTR,at):Yf,ds=yr(P,"ADD_DATA_URI_TAGS")?be(si(ol),P.ADD_DATA_URI_TAGS,at):ol,nt=yr(P,"FORBID_CONTENTS")?be({},P.FORBID_CONTENTS,at):sl,Rt=yr(P,"FORBID_TAGS")?be({},P.FORBID_TAGS,at):si({}),Kt=yr(P,"FORBID_ATTR")?be({},P.FORBID_ATTR,at):si({}),mt=yr(P,"USE_PROFILES")?P.USE_PROFILES:!1,Pr=P.ALLOW_ARIA_ATTR!==!1,pr=P.ALLOW_DATA_ATTR!==!1,$r=P.ALLOW_UNKNOWN_PROTOCOLS||!1,U=P.ALLOW_SELF_CLOSE_IN_ATTR!==!1,G=P.SAFE_FOR_TEMPLATES||!1,z=P.SAFE_FOR_XML!==!1,ae=P.WHOLE_DOCUMENT||!1,Zi=P.RETURN_DOM||!1,us=P.RETURN_DOM_FRAGMENT||!1,ke=P.RETURN_TRUSTED_TYPE||!1,et=P.FORCE_BODY||!1,Se=P.SANITIZE_DOM!==!1,ea=P.SANITIZE_NAMED_PROPS||!1,Ae=P.KEEP_CONTENT!==!1,Yt=P.IN_PLACE||!1,me=P.ALLOWED_URI_REGEXP||Cy,ta=P.NAMESPACE||Xr,ul=P.MATHML_TEXT_INTEGRATION_POINTS||ul,dl=P.HTML_INTEGRATION_POINTS||dl,le=P.CUSTOM_ELEMENT_HANDLING||{},P.CUSTOM_ELEMENT_HANDLING&&Xf(P.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(le.tagNameCheck=P.CUSTOM_ELEMENT_HANDLING.tagNameCheck),P.CUSTOM_ELEMENT_HANDLING&&Xf(P.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(le.attributeNameCheck=P.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),P.CUSTOM_ELEMENT_HANDLING&&typeof P.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(le.allowCustomizedBuiltInElements=P.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),G&&(pr=!1),us&&(Zi=!0),mt&&(fe=be({},mg),W=[],mt.html===!0&&(be(fe,gg),be(W,bg)),mt.svg===!0&&(be(fe,ad),be(W,ld),be(W,pl)),mt.svgFilters===!0&&(be(fe,sd),be(W,ld),be(W,pl)),mt.mathMl===!0&&(be(fe,od),be(W,vg),be(W,pl))),P.ADD_TAGS&&(fe===ut&&(fe=si(fe)),be(fe,P.ADD_TAGS,at)),P.ADD_ATTR&&(W===Ye&&(W=si(W)),be(W,P.ADD_ATTR,at)),P.ADD_URI_SAFE_ATTR&&be(Zu,P.ADD_URI_SAFE_ATTR,at),P.FORBID_CONTENTS&&(nt===sl&&(nt=si(nt)),be(nt,P.FORBID_CONTENTS,at)),Ae&&(fe["#text"]=!0),ae&&be(fe,["html","head","body"]),fe.table&&(be(fe,["tbody"]),delete Rt.tbody),P.TRUSTED_TYPES_POLICY){if(typeof P.TRUSTED_TYPES_POLICY.createHTML!="function")throw ms('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof P.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw ms('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');_=P.TRUSTED_TYPES_POLICY,w=_.createHTML("")}else _===void 0&&(_=H_(h,n)),_!==null&&typeof w=="string"&&(w=_.createHTML(""));Et&&Et(P),ra=P}},Zf=be({},[...ad,...sd,...I_]),Qf=be({},[...od,...P_]),G5=function(P){let H=S(P);(!H||!H.tagName)&&(H={namespaceURI:ta,tagName:"template"});const J=Yl(P.tagName),ze=Yl(H.tagName);return Ju[P.namespaceURI]?P.namespaceURI===cl?H.namespaceURI===Xr?J==="svg":H.namespaceURI===ll?J==="svg"&&(ze==="annotation-xml"||ul[ze]):!!Zf[J]:P.namespaceURI===ll?H.namespaceURI===Xr?J==="math":H.namespaceURI===cl?J==="math"&&dl[ze]:!!Qf[J]:P.namespaceURI===Xr?H.namespaceURI===cl&&!dl[ze]||H.namespaceURI===ll&&!ul[ze]?!1:!Qf[J]&&(H5[J]||!Zf[J]):!!(hs==="application/xhtml+xml"&&Ju[P.namespaceURI]):!1},Rr=function(P){fs(e.removed,{element:P});try{S(P).removeChild(P)}catch{x(P)}},ia=function(P,H){try{fs(e.removed,{attribute:H.getAttributeNode(P),from:H})}catch{fs(e.removed,{attribute:null,from:H})}if(H.removeAttribute(P),P==="is")if(Zi||us)try{Rr(H)}catch{}else try{H.setAttribute(P,"")}catch{}},Jf=function(P){let H=null,J=null;if(et)P="<remove></remove>"+P;else{const tt=fg(P,/^[\r\n\t ]+/);J=tt&&tt[0]}hs==="application/xhtml+xml"&&ta===Xr&&(P='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+P+"</body></html>");const ze=_?_.createHTML(P):P;if(ta===Xr)try{H=new d().parseFromString(ze,hs)}catch{}if(!H||!H.documentElement){H=A.createDocument(ta,"template",null);try{H.documentElement.innerHTML=Qu?w:ze}catch{}}const bt=H.body||H.documentElement;return P&&J&&bt.insertBefore(r.createTextNode(J),bt.childNodes[0]||null),ta===Xr?O.call(H,ae?"html":"body")[0]:ae?H.documentElement:bt},eg=function(P){return T.call(P.ownerDocument||P,P,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},td=function(P){return P instanceof p&&(typeof P.nodeName!="string"||typeof P.textContent!="string"||typeof P.removeChild!="function"||!(P.attributes instanceof u)||typeof P.removeAttribute!="function"||typeof P.setAttribute!="function"||typeof P.namespaceURI!="string"||typeof P.insertBefore!="function"||typeof P.hasChildNodes!="function")},tg=function(P){return typeof o=="function"&&P instanceof o};function Zr(re,P,H){hl(re,J=>{J.call(e,P,H,ra)})}const rg=function(P){let H=null;if(Zr(E.beforeSanitizeElements,P,null),td(P))return Rr(P),!0;const J=at(P.nodeName);if(Zr(E.uponSanitizeElement,P,{tagName:J,allowedTags:fe}),z&&P.hasChildNodes()&&!tg(P.firstElementChild)&&_t(/<[/\w!]/g,P.innerHTML)&&_t(/<[/\w!]/g,P.textContent)||P.nodeType===vs.progressingInstruction||z&&P.nodeType===vs.comment&&_t(/<[/\w]/g,P.data))return Rr(P),!0;if(!fe[J]||Rt[J]){if(!Rt[J]&&ng(J)&&(le.tagNameCheck instanceof RegExp&&_t(le.tagNameCheck,J)||le.tagNameCheck instanceof Function&&le.tagNameCheck(J)))return!1;if(Ae&&!nt[J]){const ze=S(P)||P.parentNode,bt=k(P)||P.childNodes;if(bt&&ze){const tt=bt.length;for(let Dt=tt-1;Dt>=0;--Dt){const Qr=y(bt[Dt],!0);Qr.__removalCount=(P.__removalCount||0)+1,ze.insertBefore(Qr,m(P))}}}return Rr(P),!0}return P instanceof l&&!G5(P)||(J==="noscript"||J==="noembed"||J==="noframes")&&_t(/<\/no(script|embed|frames)/i,P.innerHTML)?(Rr(P),!0):(G&&P.nodeType===vs.text&&(H=P.textContent,hl([$,R,N],ze=>{H=gs(H,ze," ")}),P.textContent!==H&&(fs(e.removed,{element:P.cloneNode()}),P.textContent=H)),Zr(E.afterSanitizeElements,P,null),!1)},ig=function(P,H,J){if(Se&&(H==="id"||H==="name")&&(J in r||J in j5))return!1;if(!(pr&&!Kt[H]&&_t(D,H))){if(!(Pr&&_t(j,H))){if(!W[H]||Kt[H]){if(!(ng(P)&&(le.tagNameCheck instanceof RegExp&&_t(le.tagNameCheck,P)||le.tagNameCheck instanceof Function&&le.tagNameCheck(P))&&(le.attributeNameCheck instanceof RegExp&&_t(le.attributeNameCheck,H)||le.attributeNameCheck instanceof Function&&le.attributeNameCheck(H))||H==="is"&&le.allowCustomizedBuiltInElements&&(le.tagNameCheck instanceof RegExp&&_t(le.tagNameCheck,J)||le.tagNameCheck instanceof Function&&le.tagNameCheck(J))))return!1}else if(!Zu[H]){if(!_t(me,gs(J,oe,""))){if(!((H==="src"||H==="xlink:href"||H==="href")&&P!=="script"&&C_(J,"data:")===0&&ds[P])){if(!($r&&!_t(ee,gs(J,oe,"")))){if(J)return!1}}}}}}return!0},ng=function(P){return P!=="annotation-xml"&&fg(P,we)},ag=function(P){Zr(E.beforeSanitizeAttributes,P,null);const{attributes:H}=P;if(!H||td(P))return;const J={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:W,forceKeepAttr:void 0};let ze=H.length;for(;ze--;){const bt=H[ze],{name:tt,namespaceURI:Dt,value:Qr}=bt,ps=at(tt),rd=Qr;let vt=tt==="value"?rd:T_(rd);if(J.attrName=ps,J.attrValue=vt,J.keepAttr=!0,J.forceKeepAttr=void 0,Zr(E.uponSanitizeAttribute,P,J),vt=J.attrValue,ea&&(ps==="id"||ps==="name")&&(ia(tt,P),vt=Me+vt),z&&_t(/((--!?|])>)|<\/(style|title)/i,vt)){ia(tt,P);continue}if(J.forceKeepAttr)continue;if(!J.keepAttr){ia(tt,P);continue}if(!U&&_t(/\/>/i,vt)){ia(tt,P);continue}G&&hl([$,R,N],og=>{vt=gs(vt,og," ")});const sg=at(P.nodeName);if(!ig(sg,ps,vt)){ia(tt,P);continue}if(_&&typeof h=="object"&&typeof h.getAttributeType=="function"&&!Dt)switch(h.getAttributeType(sg,ps)){case"TrustedHTML":{vt=_.createHTML(vt);break}case"TrustedScriptURL":{vt=_.createScriptURL(vt);break}}if(vt!==rd)try{Dt?P.setAttributeNS(Dt,tt,vt):P.setAttribute(tt,vt),td(P)?Rr(P):pg(e.removed)}catch{ia(tt,P)}}Zr(E.afterSanitizeAttributes,P,null)},V5=function re(P){let H=null;const J=eg(P);for(Zr(E.beforeSanitizeShadowDOM,P,null);H=J.nextNode();)Zr(E.uponSanitizeShadowNode,H,null),rg(H),ag(H),H.content instanceof a&&re(H.content);Zr(E.afterSanitizeShadowDOM,P,null)};return e.sanitize=function(re){let P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},H=null,J=null,ze=null,bt=null;if(Qu=!re,Qu&&(re="<!-->"),typeof re!="string"&&!tg(re))if(typeof re.toString=="function"){if(re=re.toString(),typeof re!="string")throw ms("dirty is not a string, aborting")}else throw ms("toString is not a function");if(!e.isSupported)return re;if(Ke||ed(P),e.removed=[],typeof re=="string"&&(Yt=!1),Yt){if(re.nodeName){const Qr=at(re.nodeName);if(!fe[Qr]||Rt[Qr])throw ms("root node is forbidden and cannot be sanitized in-place")}}else if(re instanceof o)H=Jf("<!---->"),J=H.ownerDocument.importNode(re,!0),J.nodeType===vs.element&&J.nodeName==="BODY"||J.nodeName==="HTML"?H=J:H.appendChild(J);else{if(!Zi&&!G&&!ae&&re.indexOf("<")===-1)return _&&ke?_.createHTML(re):re;if(H=Jf(re),!H)return Zi?null:ke?w:""}H&&et&&Rr(H.firstChild);const tt=eg(Yt?re:H);for(;ze=tt.nextNode();)rg(ze),ag(ze),ze.content instanceof a&&V5(ze.content);if(Yt)return re;if(Zi){if(us)for(bt=I.call(H.ownerDocument);H.firstChild;)bt.appendChild(H.firstChild);else bt=H;return(W.shadowroot||W.shadowrootmode)&&(bt=B.call(i,bt,!0)),bt}let Dt=ae?H.outerHTML:H.innerHTML;return ae&&fe["!doctype"]&&H.ownerDocument&&H.ownerDocument.doctype&&H.ownerDocument.doctype.name&&_t(Ty,H.ownerDocument.doctype.name)&&(Dt="<!DOCTYPE "+H.ownerDocument.doctype.name+`>
`+Dt),G&&hl([$,R,N],Qr=>{Dt=gs(Dt,Qr," ")}),_&&ke?_.createHTML(Dt):Dt},e.setConfig=function(){let re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ed(re),Ke=!0},e.clearConfig=function(){ra=null,Ke=!1},e.isValidAttribute=function(re,P,H){ra||ed({});const J=at(re),ze=at(P);return ig(J,ze,H)},e.addHook=function(re,P){typeof P=="function"&&fs(E[re],P)},e.removeHook=function(re,P){if(P!==void 0){const H=S_(E[re],P);return H===-1?void 0:A_(E[re],H,1)[0]}return pg(E[re])},e.removeHooks=function(re){E[re]=[]},e.removeAllHooks=function(){E=wg()},e}var F_=Ey();let q_=t=>crypto.getRandomValues(new Uint8Array(t)),j_=(t,e,r)=>{let i=(2<<Math.log(t.length-1)/Math.LN2)-1,n=-~(1.6*i*e/t.length);return(a=e)=>{let s="";for(;;){let o=r(n),l=n|0;for(;l--;)if(s+=t[o[l]&i]||"",s.length===a)return s}}},G_=(t,e=21)=>j_(t,e,q_);const cd=["Akkadian","Babylonian","Sumerian","Hittite","Phoenician","Canaanite","Minoan","Mycenaean","Etruscan","Scythian","Thracian","Dacian","Illyrian","Median","Chaldean","Roman","Greek","Byzantine","Persian","Parthian","Seleucid","Ptolemaic","Palmyrene","Macedonian","Carthaginian","Ming","Tang","Song","Yuan","Mauryan","Kushan","Rajput","Mughal","Satavahana","Vijayanagara","Egyptian","Nubian","Kushite","Aksumite","Ethiopian","Songhai","Malian","Ghanaian","Benin","Ashanti","Zulu","Tuareg","Berber","Kanem-Bornu","Buganda","Mossi","Swahili","Somali","Wolof","Umayyad","Abbasid","Ayyubid","Fatimid","Mamluk","Seljuk","Safavid","Ottoman","Almoravid","Almohad","Rashidun","Ziyarid","Frankish","Visigothic","Ostrogothic","Viking","Norman","Saxon","Anglo-Saxon","Celtic","Gaulish","Carolingian","Merovingian","Capetian","Plantagenet","Tudor","Stuart","Habsburg","Romanov","Lancaster","York","Bourbon","Napoleonic","British","French","Spanish","Portuguese","Dutch","Russian","German","Italian","Swedish","Norwegian","Danish","Polish","Hungarian","Austrian","Swiss","Czech","Slovak","Serbian","Croatian","Bosnian","Montenegrin","Bulgarian","Romanian","Apache","Sioux","Cherokee","Navajo","Iroquois","Inuit","Arawak","Carib","Taino","Aztec","Mayan","Incan","Mapuche","Guarani","Tupi","Yanomami","Zuni","Hopi","Kiowa","Comanche","Shoshone","Japanese","Ryukyu","Ainu","Cham","Khmer","Thai","Vietnamese","Burmese","Balinese","Malay","Filipino","Mongolian","Korean","Tibetan","Manchu","Uyghur","Hmong","Karen","Pyu","Hawaiian","Fijian","Tongan","Samoan","Maori","Micronesian","Hebrew","Armenian","Circassian","Georgian","Phoenician","Chaldean","Kurdish","Turkic","Kazakh","Uzbek","Kyrgyz","Tajik","Uighur","Pashtun","Baloch","Afghan","Persian","Kenyan","Ugandan","Bhutanese","Latin","Moldovan","Militant","Spartan"],xg=["Empire","Dynasty","Kingdom","Queendom","Sultanate","Confederation","Union","Republic","Caliphate","Dominion","Realm","State","Federation","Territory","Commonwealth","League","Duchy","Province","Protectorate","Colony","Mandate","Free State","Canton","Region","Nation","Assembly","Hierarchy","Archduchy","Grand Duchy","Metropolis","Cluster","Alliance","Tribunal","Council","Confederacy","Order","Regime","Dominion","Syndicate","Guild","Corporation","Patriarchy","Matriarchy","Legion","Horde","Clan","Brotherhood","Sisterhood","Ascendancy","Supremacy","Province","Tribe","Dominion","Assembly","Republics","Army","Dictatorship","Country","Oligarchy","Monkdom","Throng","Host","Area","District","Fief","Wilderness","Settlement","Parliament","Anarchy","Democracy","Autocracy"];function Nr(t,e,r){return Math.min(Math.max(t,e),r)}function co(t){let e=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);e=(e<<5)-e+i,e=e&e}return Math.abs(e)}function My(t){return F_.sanitize(t,{ALLOWED_TAGS:["span","img"],ALLOWED_ATTR:["src","alt","class","style"],ALLOWED_URI_REGEXP:/^https:\/\/cdn\.jsdelivr\.net\/gh\/twitter\/twemoji/,ADD_ATTR:["style"]})}function Iy(t,e,r,i,n,a,s,o){const l=Math.floor((a-n)/1e3),c=i.length,u=i.filter(g=>g.intents.length!==0||g.hash!==void 0),p=o??n,d=Math.max(0,n-Math.min(p,n));return{info:{gameID:t,lobbyCreatedAt:p,lobbyFillTime:d,config:e,players:r,start:n,end:a,duration:l,num_turns:c,winner:s},version:"v0.0.2",turns:u}}function V_(t){const e=[];let r=-1;for(const n of t.turns){for(;r<n.turnNumber-1;)r++,e.push({turnNumber:r,intents:[]});e.push(n),r=n.turnNumber}const i=e.length;for(let n=i;n<t.info.num_turns;n++)e.push({turnNumber:n,intents:[]});return t.turns=e,t}function fl(t){throw new Error("Unexpected value: "+t)}function oi(){return G_("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ",8)()}function Py(t,e){let r=null;if(e==="HUMAN"){const i=co(t),n=i%cd.length,a=Math.floor(i/cd.length)%xg.length;r=`👤 ${cd[n]} ${xg[a]}`}return r}const W_=[["😀","😊","🥰","😇","😎"],["😞","🥺","😭","😱","😡"],["😈","🤡","🥱","🫡","🖕"],["👋","👏","✋","🙏","💪"],["👍","👎","🫴","🤌","🤦‍♂️"],["🤝","🆘","🕊️","🏳️","⏳"],["🔥","💥","💀","☢️","⚠️"],["↖️","⬆️","↗️","👑","🥇"],["⬅️","🎯","➡️","🥈","🥉"],["↙️","⬇️","↘️","❤️","💔"],["💰","⚓","⛵","🏡","🛡️"],["🏭","🚂","❓","🐔","🐀"]],uo=W_.flat();function ho(t,e){return typeof e=="bigint"?e.toString():e}function _g(t,e,r){return 1/(1+Math.exp(-e*(t-r)))}function $y(t){const e=Dy(t);return e?e[1].toUpperCase():null}function K_(t){const e=Dy(t);return e?e[1]:null}const Ry="a-zA-Z0-9",Y_=new RegExp(`[^${Ry}]`,"g"),X_=new RegExp(`\\[([${Ry}]{2,5})\\]`);function Z_(t){return t.replace(Y_,"").substring(0,5).toUpperCase()}function Dy(t){return!t.includes("[")||!t.includes("]")?null:t.match(X_)}function fp(t,e){return Object.values(t).includes(e)}const ui="AllPlayers";var Ce=(t=>(t.Easy="Easy",t.Medium="Medium",t.Hard="Hard",t.Impossible="Impossible",t))(Ce||{});const kg=t=>fp(Ce,t),En="Duos",Mn="Trios",In="Quads",Ct="Humans Vs Nations",$e={Red:"Red",Blue:"Blue",Teal:"Teal",Purple:"Purple",Yellow:"Yellow",Orange:"Orange",Green:"Green",Bot:"Bot",Humans:"Humans",Nations:"Nations"};var Ne=(t=>(t.World="World",t.GiantWorldMap="Giant World Map",t.Europe="Europe",t.EuropeClassic="Europe Classic",t.Mena="Mena",t.NorthAmerica="North America",t.SouthAmerica="South America",t.Oceania="Oceania",t.BlackSea="Black Sea",t.Africa="Africa",t.Pangaea="Pangaea",t.Asia="Asia",t.Mars="Mars",t.BritanniaClassic="Britannia Classic",t.Britannia="Britannia",t.GatewayToTheAtlantic="Gateway to the Atlantic",t.Australia="Australia",t.Iceland="Iceland",t.EastAsia="East Asia",t.BetweenTwoSeas="Between Two Seas",t.FaroeIslands="Faroe Islands",t.DeglaciatedAntarctica="Deglaciated Antarctica",t.FalklandIslands="Falkland Islands",t.Baikal="Baikal",t.Halkidiki="Halkidiki",t.StraitOfGibraltar="Strait of Gibraltar",t.Italia="Italia",t.Japan="Japan",t.Pluto="Pluto",t.Montreal="Montreal",t.NewYorkCity="New York City",t.Achiran="Achiran",t.BaikalNukeWars="Baikal Nuke Wars",t.FourIslands="Four Islands",t.Svalmel="Svalmel",t.GulfOfStLawrence="Gulf of St. Lawrence",t.Lisbon="Lisbon",t.Manicouagan="Manicouagan",t.Lemnos="Lemnos",t.Sierpinski="Sierpinski",t.TheBox="The Box",t.TwoLakes="Two Lakes",t.StraitOfHormuz="Strait of Hormuz",t.Surrounded="Surrounded",t.Didier="Didier",t.DidierFrance="Didier France",t.AmazonRiver="Amazon River",t.Yenisei="Yenisei",t))(Ne||{});function Q_(t){return t==="Amazon River"}const J_={continental:["World","Giant World Map","North America","South America","Europe","Europe Classic","Asia","Africa","Oceania"],regional:["Britannia Classic","Britannia","Black Sea","Gateway to the Atlantic","Between Two Seas","Iceland","East Asia","Mena","Australia","Faroe Islands","Falkland Islands","Baikal","Halkidiki","Strait of Gibraltar","Italia","Japan","Montreal","Gulf of St. Lawrence","Lisbon","New York City","Manicouagan","Lemnos","Two Lakes","Strait of Hormuz","Amazon River","Yenisei"],fantasy:["Pangaea","Pluto","Mars","Deglaciated Antarctica","Achiran","Baikal Nuke Wars","Four Islands","Svalmel","Surrounded"],arcade:["The Box","Didier","Didier France","Sierpinski"]};var lt=(t=>(t.Singleplayer="Singleplayer",t.Public="Public",t.Private="Private",t))(lt||{});const e3=t=>fp(lt,t);var pe=(t=>(t.FFA="Free For All",t.Team="Team",t))(pe||{}),gp=(t=>(t.OneVOne="1v1",t))(gp||{});const t3=t=>fp(pe,t);var sr=(t=>(t.Compact="Compact",t.Normal="Normal",t))(sr||{}),C=(t=>(t.TransportShip="Transport",t.Warship="Warship",t.Shell="Shell",t.SAMMissile="SAMMissile",t.Port="Port",t.AtomBomb="Atom Bomb",t.HydrogenBomb="Hydrogen Bomb",t.TradeShip="Trade Ship",t.MissileSilo="Missile Silo",t.DefensePost="Defense Post",t.SAMLauncher="SAM Launcher",t.City="City",t.MIRV="MIRV",t.MIRVWarhead="MIRV Warhead",t.Train="Train",t.Factory="Factory",t))(C||{}),Xl=(t=>(t.Engine="Engine",t.TailEngine="TailEngine",t.Carriage="Carriage",t))(Xl||{});const r3=new Set(["City","Defense Post","SAM Launcher","Missile Silo","Port","Factory"]),Ly=[...r3],i3=["Atom Bomb","Hydrogen Bomb","MIRV Warhead","MIRV"];var st=(t=>(t[t.Hostile=0]="Hostile",t[t.Distrustful=1]="Distrustful",t[t.Neutral=2]="Neutral",t[t.Friendly=3]="Friendly",t))(st||{});class We{constructor(e,r){this.x=e,this.y=r,this.strRepr=`Cell[${this.x},${this.y}]`}pos(){return{x:this.x,y:this.y}}toString(){return this.strRepr}}var rt=(t=>(t[t.Plains=0]="Plains",t[t.Highland=1]="Highland",t[t.Mountain=2]="Mountain",t[t.Lake=3]="Lake",t[t.Ocean=4]="Ocean",t))(rt||{}),ge=(t=>(t.Bot="BOT",t.Human="HUMAN",t.Nation="NATION",t))(ge||{});class n3{constructor(e,r,i,n,a=!1){this.name=e,this.playerType=r,this.clientID=i,this.id=n,this.isLobbyCreator=a,this.clan=$y(e)}}var de=(t=>(t[t.ATTACK_FAILED=0]="ATTACK_FAILED",t[t.ATTACK_CANCELLED=1]="ATTACK_CANCELLED",t[t.ATTACK_REQUEST=2]="ATTACK_REQUEST",t[t.CONQUERED_PLAYER=3]="CONQUERED_PLAYER",t[t.MIRV_INBOUND=4]="MIRV_INBOUND",t[t.NUKE_INBOUND=5]="NUKE_INBOUND",t[t.HYDROGEN_BOMB_INBOUND=6]="HYDROGEN_BOMB_INBOUND",t[t.NAVAL_INVASION_INBOUND=7]="NAVAL_INVASION_INBOUND",t[t.SAM_MISS=8]="SAM_MISS",t[t.SAM_HIT=9]="SAM_HIT",t[t.CAPTURED_ENEMY_UNIT=10]="CAPTURED_ENEMY_UNIT",t[t.UNIT_CAPTURED_BY_ENEMY=11]="UNIT_CAPTURED_BY_ENEMY",t[t.UNIT_DESTROYED=12]="UNIT_DESTROYED",t[t.ALLIANCE_ACCEPTED=13]="ALLIANCE_ACCEPTED",t[t.ALLIANCE_REJECTED=14]="ALLIANCE_REJECTED",t[t.ALLIANCE_REQUEST=15]="ALLIANCE_REQUEST",t[t.ALLIANCE_BROKEN=16]="ALLIANCE_BROKEN",t[t.ALLIANCE_EXPIRED=17]="ALLIANCE_EXPIRED",t[t.SENT_GOLD_TO_PLAYER=18]="SENT_GOLD_TO_PLAYER",t[t.RECEIVED_GOLD_FROM_PLAYER=19]="RECEIVED_GOLD_FROM_PLAYER",t[t.RECEIVED_GOLD_FROM_TRADE=20]="RECEIVED_GOLD_FROM_TRADE",t[t.SENT_TROOPS_TO_PLAYER=21]="SENT_TROOPS_TO_PLAYER",t[t.RECEIVED_TROOPS_FROM_PLAYER=22]="RECEIVED_TROOPS_FROM_PLAYER",t[t.CHAT=23]="CHAT",t[t.RENEW_ALLIANCE=24]="RENEW_ALLIANCE",t))(de||{}),vr=(t=>(t.ATTACK="ATTACK",t.NUKE="NUKE",t.ALLIANCE="ALLIANCE",t.TRADE="TRADE",t.CHAT="CHAT",t))(vr||{});const a3={0:"ATTACK",1:"ATTACK",2:"ATTACK",3:"ATTACK",4:"NUKE",5:"NUKE",6:"NUKE",7:"ATTACK",8:"ATTACK",9:"ATTACK",10:"ATTACK",11:"ATTACK",12:"ATTACK",13:"ALLIANCE",14:"ALLIANCE",15:"ALLIANCE",16:"ALLIANCE",17:"ALLIANCE",24:"ALLIANCE",18:"TRADE",19:"TRADE",20:"TRADE",21:"TRADE",22:"TRADE",23:"CHAT"};function s3(t){return a3[t]}const Oy=["abomb","hbomb","mirv","mirvw"],o3=Be(Oy);C.AtomBomb+"",C.HydrogenBomb+"",C.MIRV+"",C.MIRVWarhead+"";const By=["trade","trans"],l3=Be(By),Ny=["city","defp","port","wshp","silo","saml","fact"],c3=Be(Ny);C.City+"",C.DefensePost+"",C.MissileSilo+"",C.Port+"",C.SAMLauncher+"",C.Warship+"",C.Factory+"";const u3=0,d3=1,h3=2,p3=1,Uy=2,f3=3,zy=4,Hy=5,_a=W5(t=>typeof t=="string"&&/^-?\d+$/.test(t)?BigInt(t):t,K5()),na=_a.array().min(1),mp=q({attacks:na.optional(),betrayals:_a.optional(),killedAt:_a.optional(),conquests:na.optional(),boats:xa(l3,na).optional(),bombs:xa(o3,na).optional(),gold:na.optional(),units:xa(c3,na).optional()}).optional(),g3=q({clientID:Y(),username:Y()}),m3=q({gameID:Y(),clients:lo(g3).optional(),lobbyCreatorClientID:Y().optional(),startsAt:Q().optional(),serverTime:Q(),gameConfig:my(()=>ou).optional()}),b3=q({gameID:Y(),numClients:Q(),startsAt:Q(),gameConfig:my(()=>ou).optional()}),v3=q({serverTime:Q(),games:b3.array()});class po{constructor(e,r){this.lobby=e,this.myClientID=r}}var Fy=(t=>(t.Debug="DEBUG",t.Info="INFO",t.Warn="WARN",t.Error="ERROR",t.Fatal="FATAL",t))(Fy||{});const y3=Bo([Q(),te(En),te(Mn),te(In),te(Ct)]),ou=q({gameMap:Be(Ne),difficulty:Be(Ce),donateGold:pt(),donateTroops:pt(),gameType:Be(lt),gameMode:Be(pe),rankedType:Be(gp).optional(),gameMapSize:Be(sr),publicGameModifiers:q({isCompact:pt(),isRandomSpawn:pt(),isCrowded:pt(),startingGold:Q().int().min(0).optional()}).optional(),disableNations:pt(),bots:Q().int().min(0).max(400),infiniteGold:pt(),infiniteTroops:pt(),instantBuild:pt(),disableNavMesh:pt().optional(),randomSpawn:pt(),maxPlayers:Q().optional(),maxTimerValue:Q().int().min(1).max(120).optional(),spawnImmunityDuration:Q().int().min(0).optional(),disabledUnits:Be(C).array().optional(),playerTeams:y3.optional(),goldMultiplier:Q().min(.1).max(1e3).optional(),startingGold:Q().int().min(0).max(1e9).optional()});Y();const Sg=Y().regex(/^([a-zA-Z0-9\s.,!?@#$%&*()\-_+=[\]{}|;:"'/\u00a9|\u00ae|[\u2000-\u3300]|\ud83c[\ud000-\udfff]|\ud83d[\ud000-\udfff]|\ud83e[\ud000-\udfff]|[üÜ])*$/u).max(1e3),qy=Y5(),w3=X5(),jy=Y().refine(t=>qy.safeParse(t).success||w3.safeParse(t).success,{message:"Token must be a valid UUID or JWT"}),x3=Q().nonnegative().max(uo.length-1),Ea=/^[A-Za-z0-9]{8}$/,_3=t=>Ea.test(t),De=Y().regex(Ea),k3=Ws(De,mp),bp=Y().regex(/^[a-zA-Z0-9_ [\]üÜ.]+$/u).min(3).max(27),S3=hp.filter(t=>!t.restricted).map(t=>t.code),A3=Be(Object.entries(by).flatMap(([t,e])=>e.map(r=>`${t}.${r.key}`))),C3=q({type:te("allianceExtension"),recipient:De}),T3=q({type:te("attack"),targetID:De.nullable(),troops:Q().nonnegative().nullable()}),E3=q({type:te("spawn"),tile:Q()}),M3=q({type:te("boat"),troops:Q().nonnegative(),dst:Q()}),I3=q({type:te("allianceRequest"),recipient:De}),P3=q({type:te("allianceRequestReply"),requestor:De,accept:pt()}),$3=q({type:te("breakAlliance"),recipient:De}),R3=q({type:te("targetPlayer"),target:De}),D3=q({type:te("emoji"),recipient:Bo([De,te(ui)]),emoji:x3}),L3=q({type:te("embargo"),targetID:De,action:Bo([te("start"),te("stop")])}),O3=q({type:te("embargo_all"),action:Bo([te("start"),te("stop")])}),B3=q({type:te("donate_gold"),recipient:De,gold:Q().nonnegative().nullable()}),N3=q({type:te("donate_troops"),recipient:De,troops:Q().nonnegative().nullable()}),U3=q({type:te("build_unit"),unit:Be(C),tile:Q(),rocketDirectionUp:pt().optional()}),z3=q({type:te("upgrade_structure"),unit:Be(C),unitId:Q()}),H3=q({type:te("cancel_attack"),attackID:Y()}),F3=q({type:te("cancel_boat"),unitID:Q()}),q3=q({type:te("move_warship"),unitId:Q(),tile:Q()}),j3=q({type:te("delete_unit"),unitId:Q()}),G3=q({type:te("quick_chat"),recipient:De,quickChatKey:A3,target:De.optional()}),V3=q({type:te("mark_disconnected"),clientID:De,isDisconnected:pt()}),W3=q({type:te("kick_player"),target:De}),K3=q({type:te("toggle_pause"),paused:pt().default(!1)}),Y3=q({type:te("update_game_config"),config:ou.partial()}),Gy=up("type",[T3,H3,E3,V3,M3,F3,I3,P3,$3,R3,D3,B3,N3,U3,z3,L3,O3,q3,G3,C3,j3,W3,K3,Y3]),X3=Gy.and(q({clientID:De})),lu=q({turnNumber:Q(),intents:X3.array(),hash:Q().nullable().optional()}),vp=Y().max(128).optional().refine(t=>t===void 0||t===""||t.startsWith("!")?!0:S3.includes(t),{message:"Invalid flag: must be a valid country code or start with !"}),Z3=q({flag:vp.optional(),color:Y().optional(),patternName:pp.optional(),patternColorPaletteName:Y().optional()}),Q3=q({name:pp,patternData:xy,colorPalette:_y.optional()}),J3=q({color:Y()}),ek=q({flag:vp.optional(),pattern:Q3.optional(),color:J3.optional()}),Vy=q({clientID:De,username:bp,cosmetics:ek.optional(),isLobbyCreator:pt().optional()}),Wy=q({gameID:De,lobbyCreatedAt:Q(),config:ou,players:Vy.array()}),Ky=Bo([id([te("player"),De]).rest(De),id([te("team"),Sg]).rest(De),id([te("nation"),Sg]).rest(De)]).optional(),tk=q({type:te("turn"),turn:lu}),rk=q({type:te("ping")}),ik=q({type:te("prestart"),gameMap:Be(Ne),gameMapSize:Be(sr)}),nk=q({type:te("start"),turns:lu.array(),gameStartInfo:Wy,lobbyCreatedAt:Q(),myClientID:De}),ak=q({type:te("desync"),turn:Q(),correctHash:Q().nullable(),clientsWithCorrectHash:Q(),totalActiveClients:Q(),yourHash:Q().optional()}),sk=q({type:te("error"),error:Y(),message:Y().optional()}),ok=q({type:te("lobby_info"),lobby:m3,myClientID:De}),lk=up("type",[tk,ik,nk,rk,ak,sk,ok]),ck=q({type:te("winner"),winner:Ky,allPlayersStats:k3}),uk=q({type:te("hash"),hash:Q(),turnNumber:Q()}),dk=q({type:te("log"),severity:Be(Fy),log:De}),hk=q({type:te("ping")}),pk=q({type:te("intent"),intent:Gy}),fk=q({type:te("join"),token:jy,gameID:De,username:bp,cosmetics:Z3.optional(),turnstileToken:Y().nullable()}),gk=q({type:te("rejoin"),gameID:De,lastTurn:Q(),token:jy});up("type",[ck,hk,pk,fk,gk,dk,uk]);const mk=Vy.extend({persistentID:qy.nullable(),clanTag:Y().optional(),stats:mp}),bk=Wy.extend({players:mk.array(),start:Q(),end:Q(),duration:Q().nonnegative(),num_turns:Q(),winner:Ky,lobbyFillTime:Q().nonnegative()}),vk=Y().regex(/^[0-9a-fA-F]{40}$/).or(te("DEV")),Yy=q({info:bk,version:te("v0.0.2")}),Xy=Yy.extend({gitCommit:vk,subdomain:Y(),domain:Y()}),yk=Xy.extend({turns:lu.array()}),wk=Yy.extend({turns:lu.array()});var zr=(t=>(t[t.Dev=0]="Dev",t[t.Preprod=1]="Preprod",t[t.Prod=2]="Prod",t))(zr||{});const Zl={BASE_URL:"./",DEV:!1,MODE:"production",PROD:!0,SSR:!1};var Ag={};function Dr(t,e){const r=t;try{if(typeof import.meta<"u"&&Zl){const i=Zl[r]??Zl[t];if(i!==void 0)return String(i)}}catch{}try{if(typeof process<"u"&&Ag){const i=Ag[t];if(i!==void 0)return i}}catch{}}const wr={get GAME_ENV(){try{if(typeof import.meta<"u"&&Zl)return"production"}catch{}return Dr("GAME_ENV")??"dev"},get TURNSTILE_SECRET_KEY(){return Dr("TURNSTILE_SECRET_KEY")},get STRIPE_PUBLISHABLE_KEY(){return Dr("STRIPE_PUBLISHABLE_KEY")},get DOMAIN(){return Dr("DOMAIN")},get SUBDOMAIN(){return Dr("SUBDOMAIN")},get OTEL_EXPORTER_OTLP_ENDPOINT(){return Dr("OTEL_EXPORTER_OTLP_ENDPOINT")},get OTEL_AUTH_HEADER(){return Dr("OTEL_AUTH_HEADER")},get GIT_COMMIT(){return Dr("GIT_COMMIT")},get API_KEY(){return Dr("API_KEY")},get ADMIN_TOKEN(){return Dr("ADMIN_TOKEN")}};var xk={grad:.9,turn:360,rad:360/(2*Math.PI)},Jr=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},ot=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=Math.pow(10,e)),Math.round(r*t)/r+0},or=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=1),t>r?r:t>e?t:e},Zy=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},Cg=function(t){return{r:or(t.r,0,255),g:or(t.g,0,255),b:or(t.b,0,255),a:or(t.a)}},ud=function(t){return{r:ot(t.r),g:ot(t.g),b:ot(t.b),a:ot(t.a,3)}},_k=/^#([0-9a-f]{3,8})$/i,gl=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},Qy=function(t){var e=t.r,r=t.g,i=t.b,n=t.a,a=Math.max(e,r,i),s=a-Math.min(e,r,i),o=s?a===e?(r-i)/s:a===r?2+(i-e)/s:4+(e-r)/s:0;return{h:60*(o<0?o+6:o),s:a?s/a*100:0,v:a/255*100,a:n}},Jy=function(t){var e=t.h,r=t.s,i=t.v,n=t.a;e=e/360*6,r/=100,i/=100;var a=Math.floor(e),s=i*(1-r),o=i*(1-(e-a)*r),l=i*(1-(1-e+a)*r),c=a%6;return{r:255*[i,o,s,s,l,i][c],g:255*[l,i,i,o,s,s][c],b:255*[s,s,l,i,i,o][c],a:n}},Tg=function(t){return{h:Zy(t.h),s:or(t.s,0,100),l:or(t.l,0,100),a:or(t.a)}},Eg=function(t){return{h:ot(t.h),s:ot(t.s),l:ot(t.l),a:ot(t.a,3)}},Mg=function(t){return Jy((r=(e=t).s,{h:e.h,s:(r*=((i=e.l)<50?i:100-i)/100)>0?2*r/(i+r)*100:0,v:i+r,a:e.a}));var e,r,i},eo=function(t){return{h:(e=Qy(t)).h,s:(n=(200-(r=e.s))*(i=e.v)/100)>0&&n<200?r*i/100/(n<=100?n:200-n)*100:0,l:n/2,a:e.a};var e,r,i,n},kk=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Sk=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ak=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ck=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Qh={string:[[function(t){var e=_k.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?ot(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?ot(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=Ak.exec(t)||Ck.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:Cg({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=kk.exec(t)||Sk.exec(t);if(!e)return null;var r,i,n=Tg({h:(r=e[1],i=e[2],i===void 0&&(i="deg"),Number(r)*(xk[i]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Mg(n)},"hsl"]],object:[[function(t){var e=t.r,r=t.g,i=t.b,n=t.a,a=n===void 0?1:n;return Jr(e)&&Jr(r)&&Jr(i)?Cg({r:Number(e),g:Number(r),b:Number(i),a:Number(a)}):null},"rgb"],[function(t){var e=t.h,r=t.s,i=t.l,n=t.a,a=n===void 0?1:n;if(!Jr(e)||!Jr(r)||!Jr(i))return null;var s=Tg({h:Number(e),s:Number(r),l:Number(i),a:Number(a)});return Mg(s)},"hsl"],[function(t){var e=t.h,r=t.s,i=t.v,n=t.a,a=n===void 0?1:n;if(!Jr(e)||!Jr(r)||!Jr(i))return null;var s=(function(o){return{h:Zy(o.h),s:or(o.s,0,100),v:or(o.v,0,100),a:or(o.a)}})({h:Number(e),s:Number(r),v:Number(i),a:Number(a)});return Jy(s)},"hsv"]]},Ig=function(t,e){for(var r=0;r<e.length;r++){var i=e[r][0](t);if(i)return[i,e[r][1]]}return[null,void 0]},Tk=function(t){return typeof t=="string"?Ig(t.trim(),Qh.string):typeof t=="object"&&t!==null?Ig(t,Qh.object):[null,void 0]},dd=function(t,e){var r=eo(t);return{h:r.h,s:or(r.s+100*e,0,100),l:r.l,a:r.a}},hd=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},Pg=function(t,e){var r=eo(t);return{h:r.h,s:r.s,l:or(r.l+100*e,0,100),a:r.a}},di=(function(){function t(e){this.parsed=Tk(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return ot(hd(this.rgba),2)},t.prototype.isDark=function(){return hd(this.rgba)<.5},t.prototype.isLight=function(){return hd(this.rgba)>=.5},t.prototype.toHex=function(){return e=ud(this.rgba),r=e.r,i=e.g,n=e.b,s=(a=e.a)<1?gl(ot(255*a)):"","#"+gl(r)+gl(i)+gl(n)+s;var e,r,i,n,a,s},t.prototype.toRgb=function(){return ud(this.rgba)},t.prototype.toRgbString=function(){return e=ud(this.rgba),r=e.r,i=e.g,n=e.b,(a=e.a)<1?"rgba("+r+", "+i+", "+n+", "+a+")":"rgb("+r+", "+i+", "+n+")";var e,r,i,n,a},t.prototype.toHsl=function(){return Eg(eo(this.rgba))},t.prototype.toHslString=function(){return e=Eg(eo(this.rgba)),r=e.h,i=e.s,n=e.l,(a=e.a)<1?"hsla("+r+", "+i+"%, "+n+"%, "+a+")":"hsl("+r+", "+i+"%, "+n+"%)";var e,r,i,n,a},t.prototype.toHsv=function(){return e=Qy(this.rgba),{h:ot(e.h),s:ot(e.s),v:ot(e.v),a:ot(e.a,3)};var e},t.prototype.invert=function(){return b({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),b(dd(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),b(dd(this.rgba,-e))},t.prototype.grayscale=function(){return b(dd(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),b(Pg(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),b(Pg(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?b({r:(r=this.rgba).r,g:r.g,b:r.b,a:e}):ot(this.rgba.a,3);var r},t.prototype.hue=function(e){var r=eo(this.rgba);return typeof e=="number"?b({h:e,s:r.s,l:r.l,a:r.a}):ot(r.h)},t.prototype.isEqual=function(e){return this.toHex()===b(e).toHex()},t})(),b=function(t){return t instanceof di?t:new di(t)},$g=[],zo=function(t){t.forEach(function(e){$g.indexOf(e)<0&&(e(di,Qh),$g.push(e))})},Ql={exports:{}},Ek=Ql.exports,Rg;function Mk(){return Rg||(Rg=1,(function(t){(function(e,r,i){function n(l){var c=this,u=o();c.next=function(){var p=2091639*c.s0+c.c*23283064365386963e-26;return c.s0=c.s1,c.s1=c.s2,c.s2=p-(c.c=p|0)},c.c=1,c.s0=u(" "),c.s1=u(" "),c.s2=u(" "),c.s0-=u(l),c.s0<0&&(c.s0+=1),c.s1-=u(l),c.s1<0&&(c.s1+=1),c.s2-=u(l),c.s2<0&&(c.s2+=1),u=null}function a(l,c){return c.c=l.c,c.s0=l.s0,c.s1=l.s1,c.s2=l.s2,c}function s(l,c){var u=new n(l),p=c&&c.state,d=u.next;return d.int32=function(){return u.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,p&&(typeof p=="object"&&a(p,u),d.state=function(){return a(u,{})}),d}function o(){var l=4022871197,c=function(u){u=String(u);for(var p=0;p<u.length;p++){l+=u.charCodeAt(p);var d=.02519603282416938*l;l=d>>>0,d-=l,d*=l,l=d>>>0,d-=l,l+=d*4294967296}return(l>>>0)*23283064365386963e-26};return c}r&&r.exports?r.exports=s:this.alea=s})(Ek,t)})(Ql)),Ql.exports}var Jl={exports:{}},Ik=Jl.exports,Dg;function Pk(){return Dg||(Dg=1,(function(t){(function(e,r,i){function n(o){var l=this,c="";l.x=0,l.y=0,l.z=0,l.w=0,l.next=function(){var p=l.x^l.x<<11;return l.x=l.y,l.y=l.z,l.z=l.w,l.w^=l.w>>>19^p^p>>>8},o===(o|0)?l.x=o:c+=o;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,l.next()}function a(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l}function s(o,l){var c=new n(o),u=l&&l.state,p=function(){return(c.next()>>>0)/4294967296};return p.double=function(){do var d=c.next()>>>11,h=(c.next()>>>0)/4294967296,g=(d+h)/(1<<21);while(g===0);return g},p.int32=c.next,p.quick=p,u&&(typeof u=="object"&&a(u,c),p.state=function(){return a(c,{})}),p}r&&r.exports?r.exports=s:this.xor128=s})(Ik,t)})(Jl)),Jl.exports}var ec={exports:{}},$k=ec.exports,Lg;function Rk(){return Lg||(Lg=1,(function(t){(function(e,r,i){function n(o){var l=this,c="";l.next=function(){var p=l.x^l.x>>>2;return l.x=l.y,l.y=l.z,l.z=l.w,l.w=l.v,(l.d=l.d+362437|0)+(l.v=l.v^l.v<<4^(p^p<<1))|0},l.x=0,l.y=0,l.z=0,l.w=0,l.v=0,o===(o|0)?l.x=o:c+=o;for(var u=0;u<c.length+64;u++)l.x^=c.charCodeAt(u)|0,u==c.length&&(l.d=l.x<<10^l.x>>>4),l.next()}function a(o,l){return l.x=o.x,l.y=o.y,l.z=o.z,l.w=o.w,l.v=o.v,l.d=o.d,l}function s(o,l){var c=new n(o),u=l&&l.state,p=function(){return(c.next()>>>0)/4294967296};return p.double=function(){do var d=c.next()>>>11,h=(c.next()>>>0)/4294967296,g=(d+h)/(1<<21);while(g===0);return g},p.int32=c.next,p.quick=p,u&&(typeof u=="object"&&a(u,c),p.state=function(){return a(c,{})}),p}r&&r.exports?r.exports=s:this.xorwow=s})($k,t)})(ec)),ec.exports}var tc={exports:{}},Dk=tc.exports,Og;function Lk(){return Og||(Og=1,(function(t){(function(e,r,i){function n(o){var l=this;l.next=function(){var u=l.x,p=l.i,d,h;return d=u[p],d^=d>>>7,h=d^d<<24,d=u[p+1&7],h^=d^d>>>10,d=u[p+3&7],h^=d^d>>>3,d=u[p+4&7],h^=d^d<<7,d=u[p+7&7],d=d^d<<13,h^=d^d<<9,u[p]=h,l.i=p+1&7,h};function c(u,p){var d,h=[];if(p===(p|0))h[0]=p;else for(p=""+p,d=0;d<p.length;++d)h[d&7]=h[d&7]<<15^p.charCodeAt(d)+h[d+1&7]<<13;for(;h.length<8;)h.push(0);for(d=0;d<8&&h[d]===0;++d);for(d==8?h[7]=-1:h[d],u.x=h,u.i=0,d=256;d>0;--d)u.next()}c(l,o)}function a(o,l){return l.x=o.x.slice(),l.i=o.i,l}function s(o,l){o==null&&(o=+new Date);var c=new n(o),u=l&&l.state,p=function(){return(c.next()>>>0)/4294967296};return p.double=function(){do var d=c.next()>>>11,h=(c.next()>>>0)/4294967296,g=(d+h)/(1<<21);while(g===0);return g},p.int32=c.next,p.quick=p,u&&(u.x&&a(u,c),p.state=function(){return a(c,{})}),p}r&&r.exports?r.exports=s:this.xorshift7=s})(Dk,t)})(tc)),tc.exports}var rc={exports:{}},Ok=rc.exports,Bg;function Bk(){return Bg||(Bg=1,(function(t){(function(e,r,i){function n(o){var l=this;l.next=function(){var u=l.w,p=l.X,d=l.i,h,g;return l.w=u=u+1640531527|0,g=p[d+34&127],h=p[d=d+1&127],g^=g<<13,h^=h<<17,g^=g>>>15,h^=h>>>12,g=p[d]=g^h,l.i=d,g+(u^u>>>16)|0};function c(u,p){var d,h,g,y,x,m=[],k=128;for(p===(p|0)?(h=p,p=null):(p=p+"\0",h=0,k=Math.max(k,p.length)),g=0,y=-32;y<k;++y)p&&(h^=p.charCodeAt((y+32)%p.length)),y===0&&(x=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,y>=0&&(x=x+1640531527|0,d=m[y&127]^=h+x,g=d==0?g+1:0);for(g>=128&&(m[(p&&p.length||0)&127]=-1),g=127,y=512;y>0;--y)h=m[g+34&127],d=m[g=g+1&127],h^=h<<13,d^=d<<17,h^=h>>>15,d^=d>>>12,m[g]=h^d;u.w=x,u.X=m,u.i=g}c(l,o)}function a(o,l){return l.i=o.i,l.w=o.w,l.X=o.X.slice(),l}function s(o,l){o==null&&(o=+new Date);var c=new n(o),u=l&&l.state,p=function(){return(c.next()>>>0)/4294967296};return p.double=function(){do var d=c.next()>>>11,h=(c.next()>>>0)/4294967296,g=(d+h)/(1<<21);while(g===0);return g},p.int32=c.next,p.quick=p,u&&(u.X&&a(u,c),p.state=function(){return a(c,{})}),p}r&&r.exports?r.exports=s:this.xor4096=s})(Ok,t)})(rc)),rc.exports}var ic={exports:{}},Nk=ic.exports,Ng;function Uk(){return Ng||(Ng=1,(function(t){(function(e,r,i){function n(o){var l=this,c="";l.next=function(){var p=l.b,d=l.c,h=l.d,g=l.a;return p=p<<25^p>>>7^d,d=d-h|0,h=h<<24^h>>>8^g,g=g-p|0,l.b=p=p<<20^p>>>12^d,l.c=d=d-h|0,l.d=h<<16^d>>>16^g,l.a=g-p|0},l.a=0,l.b=0,l.c=-1640531527,l.d=1367130551,o===Math.floor(o)?(l.a=o/4294967296|0,l.b=o|0):c+=o;for(var u=0;u<c.length+20;u++)l.b^=c.charCodeAt(u)|0,l.next()}function a(o,l){return l.a=o.a,l.b=o.b,l.c=o.c,l.d=o.d,l}function s(o,l){var c=new n(o),u=l&&l.state,p=function(){return(c.next()>>>0)/4294967296};return p.double=function(){do var d=c.next()>>>11,h=(c.next()>>>0)/4294967296,g=(d+h)/(1<<21);while(g===0);return g},p.int32=c.next,p.quick=p,u&&(typeof u=="object"&&a(u,c),p.state=function(){return a(c,{})}),p}r&&r.exports?r.exports=s:this.tychei=s})(Nk,t)})(ic)),ic.exports}var nc={exports:{}};const zk={},Hk=Object.freeze(Object.defineProperty({__proto__:null,default:zk},Symbol.toStringTag,{value:"Module"})),lr=Z5(Hk);var Fk=nc.exports,Ug;function qk(){return Ug||(Ug=1,(function(t){(function(e,r,i){var n=256,a=6,s=52,o="random",l=i.pow(n,a),c=i.pow(2,s),u=c*2,p=n-1,d;function h(_,w,A){var T=[];w=w==!0?{entropy:!0}:w||{};var I=m(x(w.entropy?[_,S(r)]:_??k(),3),T),O=new g(T),B=function(){for(var E=O.g(a),$=l,R=0;E<c;)E=(E+R)*n,$*=n,R=O.g(1);for(;E>=u;)E/=2,$/=2,R>>>=1;return(E+R)/$};return B.int32=function(){return O.g(4)|0},B.quick=function(){return O.g(4)/4294967296},B.double=B,m(S(O.S),r),(w.pass||A||function(E,$,R,N){return N&&(N.S&&y(N,O),E.state=function(){return y(O,{})}),R?(i[o]=E,$):E})(B,I,"global"in w?w.global:this==i,w.state)}function g(_){var w,A=_.length,T=this,I=0,O=T.i=T.j=0,B=T.S=[];for(A||(_=[A++]);I<n;)B[I]=I++;for(I=0;I<n;I++)B[I]=B[O=p&O+_[I%A]+(w=B[I])],B[O]=w;(T.g=function(E){for(var $,R=0,N=T.i,D=T.j,j=T.S;E--;)$=j[N=p&N+1],R=R*n+j[p&(j[N]=j[D=p&D+$])+(j[D]=$)];return T.i=N,T.j=D,R})(n)}function y(_,w){return w.i=_.i,w.j=_.j,w.S=_.S.slice(),w}function x(_,w){var A=[],T=typeof _,I;if(w&&T=="object")for(I in _)try{A.push(x(_[I],w-1))}catch{}return A.length?A:T=="string"?_:_+"\0"}function m(_,w){for(var A=_+"",T,I=0;I<A.length;)w[p&I]=p&(T^=w[p&I]*19)+A.charCodeAt(I++);return S(w)}function k(){try{var _;return d&&(_=d.randomBytes)?_=_(n):(_=new Uint8Array(n),(e.crypto||e.msCrypto).getRandomValues(_)),S(_)}catch{var w=e.navigator,A=w&&w.plugins;return[+new Date,e,A,e.screen,S(r)]}}function S(_){return String.fromCharCode.apply(0,_)}if(m(i.random(),r),t.exports){t.exports=h;try{d=lr}catch{}}else i["seed"+o]=h})(typeof self<"u"?self:Fk,[],Math)})(nc)),nc.exports}var pd,zg;function jk(){if(zg)return pd;zg=1;var t=Mk(),e=Pk(),r=Rk(),i=Lk(),n=Bk(),a=Uk(),s=qk();return s.alea=t,s.xor128=e,s.xorwow=r,s.xorshift7=i,s.xor4096=n,s.tychei=a,pd=s,pd}var Gk=jk();const Vk=dp(Gk),au=class au{constructor(e){this.rng=Vk(String(e))}next(){return this.rng()}nextInt(e,r){return Math.floor(this.rng()*(r-e))+e}nextFloat(e,r){return this.rng()*(r-e)+e}nextID(){return Math.floor(this.rng()*au.POW36_8).toString(36).padStart(8,"0")}randElement(e){if(e.length===0)throw new Error("array must not be empty");return e[this.nextInt(0,e.length)]}randFromSet(e){const r=e.size;if(r===0)throw new Error("set must not be empty");const i=this.nextInt(0,r);let n=0;for(const a of e){if(n===i)return a;n++}throw new Error("Unexpected error selecting element from set")}chance(e){return this.nextInt(0,e)===0}shuffleArray(e){const r=[...e];for(let i=r.length-1;i>0;i--){const n=this.nextInt(0,i+1);[r[i],r[n]]=[r[n],r[i]]}return r}};au.POW36_8=Math.pow(36,8);let Pn=au;var fd=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},ys=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=Math.pow(10,e)),Math.round(r*t)/r+0},_r=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=1),t>r?r:t>e?t:e},gd=function(t){var e=t/255;return e<.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},md=function(t){return 255*(t>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t)},yp=96.422,wp=100,xp=82.521,Wk=function(t){var e,r,i={x:.9555766*(e=t).x+-.0230393*e.y+.0631636*e.z,y:-.0282895*e.x+1.0099416*e.y+.0210077*e.z,z:.0122982*e.x+-.020483*e.y+1.3299098*e.z};return r={r:md(.032404542*i.x-.015371385*i.y-.004985314*i.z),g:md(-.00969266*i.x+.018760108*i.y+41556e-8*i.z),b:md(556434e-9*i.x-.002040259*i.y+.010572252*i.z),a:t.a},{r:_r(r.r,0,255),g:_r(r.g,0,255),b:_r(r.b,0,255),a:_r(r.a)}},Kk=function(t){var e=gd(t.r),r=gd(t.g),i=gd(t.b);return(function(n){return{x:_r(n.x,0,yp),y:_r(n.y,0,wp),z:_r(n.z,0,xp),a:_r(n.a)}})((function(n){return{x:1.0478112*n.x+.0228866*n.y+-.050127*n.z,y:.0295424*n.x+.9904844*n.y+-.0170491*n.z,z:-.0092345*n.x+.0150436*n.y+.7521316*n.z,a:n.a}})({x:100*(.4124564*e+.3575761*r+.1804375*i),y:100*(.2126729*e+.7151522*r+.072175*i),z:100*(.0193339*e+.119192*r+.9503041*i),a:t.a}))},to=216/24389,ka=24389/27,Yk=function(t){var e=t.l,r=t.a,i=t.b,n=t.alpha,a=n===void 0?1:n;if(!fd(e)||!fd(r)||!fd(i))return null;var s=(function(o){return{l:_r(o.l,0,400),a:o.a,b:o.b,alpha:_r(o.alpha)}})({l:Number(e),a:Number(r),b:Number(i),alpha:Number(a)});return Xk(s)},Xk=function(t){var e=(t.l+16)/116,r=t.a/500+e,i=e-t.b/200;return Wk({x:(Math.pow(r,3)>to?Math.pow(r,3):(116*r-16)/ka)*yp,y:(t.l>8?Math.pow((t.l+16)/116,3):t.l/ka)*wp,z:(Math.pow(i,3)>to?Math.pow(i,3):(116*i-16)/ka)*xp,a:t.alpha})};function ew(t,e){t.prototype.toLab=function(){return i=Kk(this.rgba),a=i.y/wp,s=i.z/xp,n=(n=i.x/yp)>to?Math.cbrt(n):(ka*n+16)/116,r={l:116*(a=a>to?Math.cbrt(a):(ka*a+16)/116)-16,a:500*(n-a),b:200*(a-(s=s>to?Math.cbrt(s):(ka*s+16)/116)),alpha:i.a},{l:ys(r.l,2),a:ys(r.a,2),b:ys(r.b,2),alpha:ys(r.alpha,3)};var r,i,n,a,s},t.prototype.delta=function(r){r===void 0&&(r="#FFF");var i=r instanceof t?r:new t(r),n=(function(a,s){var o=a.l,l=a.a,c=a.b,u=s.l,p=s.a,d=s.b,h=180/Math.PI,g=Math.PI/180,y=Math.pow(Math.pow(l,2)+Math.pow(c,2),.5),x=Math.pow(Math.pow(p,2)+Math.pow(d,2),.5),m=(o+u)/2,k=Math.pow((y+x)/2,7),S=.5*(1-Math.pow(k/(k+Math.pow(25,7)),.5)),_=l*(1+S),w=p*(1+S),A=Math.pow(Math.pow(_,2)+Math.pow(c,2),.5),T=Math.pow(Math.pow(w,2)+Math.pow(d,2),.5),I=(A+T)/2,O=_===0&&c===0?0:Math.atan2(c,_)*h,B=w===0&&d===0?0:Math.atan2(d,w)*h;O<0&&(O+=360),B<0&&(B+=360);var E=B-O,$=Math.abs(B-O);$>180&&B<=O?E+=360:$>180&&B>O&&(E-=360);var R=O+B;$<=180?R/=2:R=(O+B<360?R+360:R-360)/2;var N=1-.17*Math.cos(g*(R-30))+.24*Math.cos(2*g*R)+.32*Math.cos(g*(3*R+6))-.2*Math.cos(g*(4*R-63)),D=u-o,j=T-A,ee=2*Math.sin(g*E/2)*Math.pow(A*T,.5),oe=1+.015*Math.pow(m-50,2)/Math.pow(20+Math.pow(m-50,2),.5),we=1+.045*I,me=1+.015*I*N,fe=30*Math.exp(-1*Math.pow((R-275)/25,2)),ut=-2*Math.pow(k/(k+Math.pow(25,7)),.5)*Math.sin(2*g*fe);return Math.pow(Math.pow(D/1/oe,2)+Math.pow(j/1/we,2)+Math.pow(ee/1/me,2)+ut*j*ee/(1*we*1*me),.5)})(this.toLab(),i.toLab())/100;return _r(ys(n,3))},e.object.push([Yk,"lab"])}var Zk={grad:.9,turn:360,rad:360/(2*Math.PI)},bd=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},ma=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=Math.pow(10,e)),Math.round(r*t)/r+0},ci=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=1),t>r?r:t>e?t:e},vd=function(t){var e=t/255;return e<.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},yd=function(t){return 255*(t>.0031308?1.055*Math.pow(t,1/2.4)-.055:12.92*t)},_p=96.422,kp=100,Sp=82.521,Qk=function(t){var e,r,i={x:.9555766*(e=t).x+-.0230393*e.y+.0631636*e.z,y:-.0282895*e.x+1.0099416*e.y+.0210077*e.z,z:.0122982*e.x+-.020483*e.y+1.3299098*e.z};return r={r:yd(.032404542*i.x-.015371385*i.y-.004985314*i.z),g:yd(-.00969266*i.x+.018760108*i.y+41556e-8*i.z),b:yd(556434e-9*i.x-.002040259*i.y+.010572252*i.z),a:t.a},{r:ci(r.r,0,255),g:ci(r.g,0,255),b:ci(r.b,0,255),a:ci(r.a)}},Jk=function(t){var e=vd(t.r),r=vd(t.g),i=vd(t.b);return(function(n){return{x:ci(n.x,0,_p),y:ci(n.y,0,kp),z:ci(n.z,0,Sp),a:ci(n.a)}})((function(n){return{x:1.0478112*n.x+.0228866*n.y+-.050127*n.z,y:.0295424*n.x+.9904844*n.y+-.0170491*n.z,z:-.0092345*n.x+.0150436*n.y+.7521316*n.z,a:n.a}})({x:100*(.4124564*e+.3575761*r+.1804375*i),y:100*(.2126729*e+.7151522*r+.072175*i),z:100*(.0193339*e+.119192*r+.9503041*i),a:t.a}))},ro=216/24389,Sa=24389/27,tw=function(t){return{l:ci(t.l,0,100),c:t.c,h:(e=t.h,(e=isFinite(e)?e%360:0)>0?e:e+360),a:t.a};var e},Hg=function(t){return{l:ma(t.l,2),c:ma(t.c,2),h:ma(t.h,2),a:ma(t.a,3)}},eS=function(t){var e=t.l,r=t.c,i=t.h,n=t.a,a=n===void 0?1:n;if(!bd(e)||!bd(r)||!bd(i))return null;var s=tw({l:Number(e),c:Number(r),h:Number(i),a:Number(a)});return rw(s)},Fg=function(t){var e=(function(a){var s=Jk(a),o=s.x/_p,l=s.y/kp,c=s.z/Sp;return o=o>ro?Math.cbrt(o):(Sa*o+16)/116,{l:116*(l=l>ro?Math.cbrt(l):(Sa*l+16)/116)-16,a:500*(o-l),b:200*(l-(c=c>ro?Math.cbrt(c):(Sa*c+16)/116)),alpha:s.a}})(t),r=ma(e.a,3),i=ma(e.b,3),n=Math.atan2(i,r)/Math.PI*180;return{l:e.l,c:Math.sqrt(r*r+i*i),h:n<0?n+360:n,a:e.alpha}},rw=function(t){return e={l:t.l,a:t.c*Math.cos(t.h*Math.PI/180),b:t.c*Math.sin(t.h*Math.PI/180),alpha:t.a},i=e.a/500+(r=(e.l+16)/116),n=r-e.b/200,Qk({x:(Math.pow(i,3)>ro?Math.pow(i,3):(116*i-16)/Sa)*_p,y:(e.l>8?Math.pow((e.l+16)/116,3):e.l/Sa)*kp,z:(Math.pow(n,3)>ro?Math.pow(n,3):(116*n-16)/Sa)*Sp,a:e.alpha});var e,r,i,n},tS=/^lch\(\s*([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)\s+([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,rS=function(t){var e=tS.exec(t);if(!e)return null;var r,i,n=tw({l:Number(e[1]),c:Number(e[2]),h:(r=e[3],i=e[4],i===void 0&&(i="deg"),Number(r)*(Zk[i]||1)),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return rw(n)};function iw(t,e){t.prototype.toLch=function(){return Hg(Fg(this.rgba))},t.prototype.toLchString=function(){return r=Hg(Fg(this.rgba)),i=r.l,n=r.c,a=r.h,(s=r.a)<1?"lch("+i+"% "+n+" "+a+" / "+s+")":"lch("+i+"% "+n+" "+a+")";var r,i,n,a,s},e.string.push([rS,"lch"]),e.object.push([eS,"lch"])}function qe(t,e){let r=t.length;Array.isArray(t[0])||(t=[t]),Array.isArray(e[0])||(e=e.map(s=>[s]));let i=e[0].length,n=e[0].map((s,o)=>e.map(l=>l[o])),a=t.map(s=>n.map(o=>{let l=0;if(!Array.isArray(s)){for(let c of o)l+=s*c;return l}for(let c=0;c<s.length;c++)l+=s[c]*(o[c]||0);return l}));return r===1&&(a=a[0]),i===1?a.map(s=>s[0]):a}function Ho(t){return Ti(t)==="string"}function Ti(t){return(Object.prototype.toString.call(t).match(/^\[object\s+(.*?)\]$/)[1]||"").toLowerCase()}function bc(t,{precision:e,unit:r}){return Mi(t)?"none":nw(t,e)+(r??"")}function Mi(t){return Number.isNaN(t)||t instanceof Number&&t?.none}function Ze(t){return Mi(t)?0:t}function nw(t,e){if(t===0)return 0;let r=~~t,i=0;r&&e&&(i=~~Math.log10(Math.abs(r))+1);const n=10**(e-i);return Math.floor(t*n+.5)/n}const iS={deg:1,grad:.9,rad:180/Math.PI,turn:360};function aw(t){if(!t)return;t=t.trim();const e=/^([a-z]+)\((.+?)\)$/i,r=/^-?[\d.]+$/,i=/%|deg|g?rad|turn$/,n=/\/?\s*(none|[-\w.]+(?:%|deg|g?rad|turn)?)/g;let a=t.match(e);if(a){let s=[];return a[2].replace(n,(o,l)=>{let c=l.match(i),u=l;if(c){let p=c[0],d=u.slice(0,-p.length);p==="%"?(u=new Number(d/100),u.type="<percentage>"):(u=new Number(d*iS[p]),u.type="<angle>",u.unit=p)}else r.test(u)?(u=new Number(u),u.type="<number>"):u==="none"&&(u=new Number(NaN),u.none=!0);o.startsWith("/")&&(u=u instanceof Number?u:new Number(u),u.alpha=!0),typeof u=="object"&&u instanceof Number&&(u.raw=l),s.push(u)}),{name:a[1].toLowerCase(),rawName:a[1],rawArgs:a[2],args:s}}}function sw(t){return t[t.length-1]}function fo(t,e,r){return isNaN(t)?e:isNaN(e)?t:t+(e-t)*r}function ow(t,e,r){return(r-t)/(e-t)}function Ap(t,e,r){return fo(e[0],e[1],ow(t[0],t[1],r))}function lw(t){return t.map(e=>e.split("|").map(r=>{r=r.trim();let i=r.match(/^(<[a-z]+>)\[(-?[.\d]+),\s*(-?[.\d]+)\]?$/);if(i){let n=new String(i[1]);return n.range=[+i[2],+i[3]],n}return r}))}function cw(t,e,r){return Math.max(Math.min(r,e),t)}function cu(t,e){return Math.sign(t)===Math.sign(e)?t:-t}function Ur(t,e){return cu(Math.abs(t)**e,t)}function Cp(t,e){return e===0?0:t/e}function uw(t,e,r=0,i=t.length){for(;r<i;){const n=r+i>>1;t[n]<e?r=n+1:i=n}return r}var nS=Object.freeze({__proto__:null,bisectLeft:uw,clamp:cw,copySign:cu,interpolate:fo,interpolateInv:ow,isNone:Mi,isString:Ho,last:sw,mapRange:Ap,multiplyMatrices:qe,parseCoordGrammar:lw,parseFunction:aw,serializeNumber:bc,skipNone:Ze,spow:Ur,toPrecision:nw,type:Ti,zdiv:Cp});let aS=class{add(e,r,i){if(typeof arguments[0]!="string"){for(var e in arguments[0])this.add(e,arguments[0][e],arguments[1]);return}(Array.isArray(e)?e:[e]).forEach(function(n){this[n]=this[n]||[],r&&this[n][i?"unshift":"push"](r)},this)}run(e,r){this[e]=this[e]||[],this[e].forEach(function(i){i.call(r&&r.context?r.context:r,r)})}};const Ii=new aS;var Jt={gamut_mapping:"css",precision:5,deltaE:"76",verbose:"production".toLowerCase()!=="test",warn:function(e){this.verbose&&globalThis?.console?.warn?.(e)}};const Tt={D50:[.3457/.3585,1,(1-.3457-.3585)/.3585],D65:[.3127/.329,1,(1-.3127-.329)/.329]};function Jh(t){return Array.isArray(t)?t:Tt[t]}function vc(t,e,r,i={}){if(t=Jh(t),e=Jh(e),!t||!e)throw new TypeError(`Missing white point to convert ${t?"":"from"}${!t&&!e?"/":""}${e?"":"to"}`);if(t===e)return r;let n={W1:t,W2:e,XYZ:r,options:i};if(Ii.run("chromatic-adaptation-start",n),n.M||(n.W1===Tt.D65&&n.W2===Tt.D50?n.M=[[1.0479297925449969,.022946870601609652,-.05019226628920524],[.02962780877005599,.9904344267538799,-.017073799063418826],[-.009243040646204504,.015055191490298152,.7518742814281371]]:n.W1===Tt.D50&&n.W2===Tt.D65&&(n.M=[[.955473421488075,-.02309845494876471,.06325924320057072],[-.0283697093338637,1.0099953980813041,.021041441191917323],[.012314014864481998,-.020507649298898964,1.330365926242124]])),Ii.run("chromatic-adaptation-end",n),n.M)return qe(n.M,n.XYZ);throw new TypeError("Only Bradford CAT with white points D50 and D65 supported for now.")}const sS=new Set(["<number>","<percentage>","<angle>"]);function qg(t,e,r,i){return Object.entries(t.coords).map(([a,s],o)=>{let l=e.coordGrammar[o],c=i[o],u=c?.type,p;if(c.none?p=l.find(g=>sS.has(g)):p=l.find(g=>g==u),!p){let g=s.name||a;throw new TypeError(`${u??c.raw} not allowed for ${g} in ${r}()`)}let d=p.range;u==="<percentage>"&&(d||=[0,1]);let h=s.range||s.refRange;return d&&h&&(i[o]=Ap(d,h,i[o])),p})}function dw(t,{meta:e}={}){let r={str:String(t)?.trim()};if(Ii.run("parse-start",r),r.color)return r.color;if(r.parsed=aw(r.str),r.parsed){let i=r.parsed.name;if(i==="color"){let n=r.parsed.args.shift(),a=n.startsWith("--")?n.substring(2):`--${n}`,s=[n,a],o=r.parsed.rawArgs.indexOf("/")>0?r.parsed.args.pop():1;for(let u of K.all){let p=u.getFormat("color");if(p&&(s.includes(p.id)||p.ids?.filter(d=>s.includes(d)).length)){const d=Object.keys(u.coords).map((g,y)=>r.parsed.args[y]||0);let h;return p.coordGrammar&&(h=qg(u,p,"color",d)),e&&Object.assign(e,{formatId:"color",types:h}),p.id.startsWith("--")&&!n.startsWith("--")&&Jt.warn(`${u.name} is a non-standard space and not currently supported in the CSS spec. Use prefixed color(${p.id}) instead of color(${n}).`),n.startsWith("--")&&!p.id.startsWith("--")&&Jt.warn(`${u.name} is a standard space and supported in the CSS spec. Use color(${p.id}) instead of prefixed color(${n}).`),{spaceId:u.id,coords:d,alpha:o}}}let l="",c=n in K.registry?n:a;if(c in K.registry){let u=K.registry[c].formats?.color?.id;u&&(l=`Did you mean color(${u})?`)}throw new TypeError(`Cannot parse color(${n}). `+(l||"Missing a plugin?"))}else for(let n of K.all){let a=n.getFormat(i);if(a&&a.type==="function"){let s=1;(a.lastAlpha||sw(r.parsed.args).alpha)&&(s=r.parsed.args.pop());let o=r.parsed.args,l;return a.coordGrammar&&(l=qg(n,a,i,o)),e&&Object.assign(e,{formatId:a.name,types:l}),{spaceId:n.id,coords:o,alpha:s}}}}else for(let i of K.all)for(let n in i.formats){let a=i.formats[n];if(a.type!=="custom"||a.test&&!a.test(r.str))continue;let s=a.parse(r.str);if(s)return s.alpha??=1,e&&(e.formatId=n),s}throw new TypeError(`Could not parse ${t} as a color. Missing a plugin?`)}function he(t){if(Array.isArray(t))return t.map(he);if(!t)throw new TypeError("Empty color reference");Ho(t)&&(t=dw(t));let e=t.space||t.spaceId;return e instanceof K||(t.space=K.get(e)),t.alpha===void 0&&(t.alpha=1),t}const oS=75e-6;class K{constructor(e){this.id=e.id,this.name=e.name,this.base=e.base?K.get(e.base):null,this.aliases=e.aliases,this.base&&(this.fromBase=e.fromBase,this.toBase=e.toBase);let r=e.coords??this.base.coords;for(let n in r)"name"in r[n]||(r[n].name=n);this.coords=r;let i=e.white??this.base.white??"D65";this.white=Jh(i),this.formats=e.formats??{};for(let n in this.formats){let a=this.formats[n];a.type||="function",a.name||=n}this.formats.color?.id||(this.formats.color={...this.formats.color??{},id:e.cssId||this.id}),e.gamutSpace?this.gamutSpace=e.gamutSpace==="self"?this:K.get(e.gamutSpace):this.isPolar?this.gamutSpace=this.base:this.gamutSpace=this,this.gamutSpace.isUnbounded&&(this.inGamut=(n,a)=>!0),this.referred=e.referred,Object.defineProperty(this,"path",{value:lS(this).reverse(),writable:!1,enumerable:!0,configurable:!0}),Ii.run("colorspace-init-end",this)}inGamut(e,{epsilon:r=oS}={}){if(!this.equals(this.gamutSpace))return e=this.to(this.gamutSpace,e),this.gamutSpace.inGamut(e,{epsilon:r});let i=Object.values(this.coords);return e.every((n,a)=>{let s=i[a];if(s.type!=="angle"&&s.range){if(Number.isNaN(n))return!0;let[o,l]=s.range;return(o===void 0||n>=o-r)&&(l===void 0||n<=l+r)}return!0})}get isUnbounded(){return Object.values(this.coords).every(e=>!("range"in e))}get cssId(){return this.formats?.color?.id||this.id}get isPolar(){for(let e in this.coords)if(this.coords[e].type==="angle")return!0;return!1}getFormat(e){if(typeof e=="object")return e=jg(e,this),e;let r;return e==="default"?r=Object.values(this.formats)[0]:r=this.formats[e],r?(r=jg(r,this),r):null}equals(e){return e?this===e||this.id===e||this.id===e.id:!1}to(e,r){if(arguments.length===1){const o=he(e);[e,r]=[o.space,o.coords]}if(e=K.get(e),this.equals(e))return r;r=r.map(o=>Number.isNaN(o)?0:o);let i=this.path,n=e.path,a,s;for(let o=0;o<i.length&&i[o].equals(n[o]);o++)a=i[o],s=o;if(!a)throw new Error(`Cannot convert between color spaces ${this} and ${e}: no connection space was found`);for(let o=i.length-1;o>s;o--)r=i[o].toBase(r);for(let o=s+1;o<n.length;o++)r=n[o].fromBase(r);return r}from(e,r){if(arguments.length===1){const i=he(e);[e,r]=[i.space,i.coords]}return e=K.get(e),e.to(this,r)}toString(){return`${this.name} (${this.id})`}getMinCoords(){let e=[];for(let r in this.coords){let i=this.coords[r],n=i.range||i.refRange;e.push(n?.min??0)}return e}static registry={};static get all(){return[...new Set(Object.values(K.registry))]}static register(e,r){if(arguments.length===1&&(r=arguments[0],e=r.id),r=this.get(r),this.registry[e]&&this.registry[e]!==r)throw new Error(`Duplicate color space registration: '${e}'`);if(this.registry[e]=r,arguments.length===1&&r.aliases)for(let i of r.aliases)this.register(i,r);return r}static get(e,...r){if(!e||e instanceof K)return e;if(Ti(e)==="string"){let n=K.registry[e.toLowerCase()];if(!n)throw new TypeError(`No color space found with id = "${e}"`);return n}if(r.length)return K.get(...r);throw new TypeError(`${e} is not a valid color space`)}static resolveCoord(e,r){let i=Ti(e),n,a;if(i==="string"?e.includes(".")?[n,a]=e.split("."):[n,a]=[,e]:Array.isArray(e)?[n,a]=e:(n=e.space,a=e.coordId),n=K.get(n),n||(n=r),!n)throw new TypeError(`Cannot resolve coordinate reference ${e}: No color space specified and relative references are not allowed here`);if(i=Ti(a),i==="number"||i==="string"&&a>=0){let l=Object.entries(n.coords)[a];if(l)return{space:n,id:l[0],index:a,...l[1]}}n=K.get(n);let s=a.toLowerCase(),o=0;for(let l in n.coords){let c=n.coords[l];if(l.toLowerCase()===s||c.name?.toLowerCase()===s)return{space:n,id:l,index:o,...c};o++}throw new TypeError(`No "${a}" coordinate found in ${n.name}. Its coordinates are: ${Object.keys(n.coords).join(", ")}`)}static DEFAULT_FORMAT={type:"functions",name:"color"}}function lS(t){let e=[t];for(let r=t;r=r.base;)e.push(r);return e}function jg(t,{coords:e}={}){if(t.coords&&!t.coordGrammar){t.type||="function",t.name||="color",t.coordGrammar=lw(t.coords);let r=Object.entries(e).map(([i,n],a)=>{let s=t.coordGrammar[a][0],o=n.range||n.refRange,l=s.range,c="";return s=="<percentage>"?(l=[0,100],c="%"):s=="<angle>"&&(c="deg"),{fromRange:o,toRange:l,suffix:c}});t.serializeCoords=(i,n)=>i.map((a,s)=>{let{fromRange:o,toRange:l,suffix:c}=r[s];return o&&l&&(a=Ap(o,l,a)),a=bc(a,{precision:n,unit:c}),a})}return t}var ft=new K({id:"xyz-d65",name:"XYZ D65",coords:{x:{name:"X"},y:{name:"Y"},z:{name:"Z"}},white:"D65",formats:{color:{ids:["xyz-d65","xyz"]}},aliases:["xyz"]});class jt extends K{constructor(e){e.coords||(e.coords={r:{range:[0,1],name:"Red"},g:{range:[0,1],name:"Green"},b:{range:[0,1],name:"Blue"}}),e.base||(e.base=ft),e.toXYZ_M&&e.fromXYZ_M&&(e.toBase??=r=>{let i=qe(e.toXYZ_M,r);return this.white!==this.base.white&&(i=vc(this.white,this.base.white,i)),i},e.fromBase??=r=>(r=vc(this.base.white,this.white,r),qe(e.fromXYZ_M,r))),e.referred??="display",super(e)}}function Fo(t,e){return t=he(t),!e||t.space.equals(e)?t.coords.slice():(e=K.get(e),e.from(t))}function Zt(t,e){t=he(t);let{space:r,index:i}=K.resolveCoord(e,t.space);return Fo(t,r)[i]}function Tp(t,e,r){return t=he(t),e=K.get(e),t.coords=e.to(t.space,r),t}Tp.returns="color";function hi(t,e,r){if(t=he(t),arguments.length===2&&Ti(arguments[1])==="object"){let i=arguments[1];for(let n in i)hi(t,n,i[n])}else{typeof r=="function"&&(r=r(Zt(t,e)));let{space:i,index:n}=K.resolveCoord(e,t.space),a=Fo(t,i);a[n]=r,Tp(t,i,a)}return t}hi.returns="color";var Ep=new K({id:"xyz-d50",name:"XYZ D50",white:"D50",base:ft,fromBase:t=>vc(ft.white,"D50",t),toBase:t=>vc("D50",ft.white,t)});const cS=216/24389,Gg=24/116,ml=24389/27;let wd=Tt.D50;var Qt=new K({id:"lab",name:"Lab",coords:{l:{refRange:[0,100],name:"Lightness"},a:{refRange:[-125,125]},b:{refRange:[-125,125]}},white:wd,base:Ep,fromBase(t){let r=t.map((i,n)=>i/wd[n]).map(i=>i>cS?Math.cbrt(i):(ml*i+16)/116);return[116*r[1]-16,500*(r[0]-r[1]),200*(r[1]-r[2])]},toBase(t){let e=[];return e[1]=(t[0]+16)/116,e[0]=t[1]/500+e[1],e[2]=e[1]-t[2]/200,[e[0]>Gg?Math.pow(e[0],3):(116*e[0]-16)/ml,t[0]>8?Math.pow((t[0]+16)/116,3):t[0]/ml,e[2]>Gg?Math.pow(e[2],3):(116*e[2]-16)/ml].map((i,n)=>i*wd[n])},formats:{lab:{coords:["<number> | <percentage>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}});function Vr(t){return(t%360+360)%360}function uS(t,e){if(t==="raw")return e;let[r,i]=e.map(Vr),n=i-r;return t==="increasing"?n<0&&(i+=360):t==="decreasing"?n>0&&(r+=360):t==="longer"?-180<n&&n<180&&(n>0?r+=360:i+=360):t==="shorter"&&(n>180?r+=360:n<-180&&(i+=360)),[r,i]}var go=new K({id:"lch",name:"LCH",coords:{l:{refRange:[0,100],name:"Lightness"},c:{refRange:[0,150],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:Qt,fromBase(t){let[e,r,i]=t,n;const a=.02;return Math.abs(r)<a&&Math.abs(i)<a?n=NaN:n=Math.atan2(i,r)*180/Math.PI,[e,Math.sqrt(r**2+i**2),Vr(n)]},toBase(t){let[e,r,i]=t;return r<0&&(r=0),isNaN(i)&&(i=0),[e,r*Math.cos(i*Math.PI/180),r*Math.sin(i*Math.PI/180)]},formats:{lch:{coords:["<number> | <percentage>","<number> | <percentage>","<number> | <angle>"]}}});const Vg=25**7,yc=Math.PI,Wg=180/yc,aa=yc/180;function Kg(t){const e=t*t;return e*e*e*t}function hw(t,e,{kL:r=1,kC:i=1,kH:n=1}={}){[t,e]=he([t,e]);let[a,s,o]=Qt.from(t),l=go.from(Qt,[a,s,o])[1],[c,u,p]=Qt.from(e),d=go.from(Qt,[c,u,p])[1];l<0&&(l=0),d<0&&(d=0);let h=(l+d)/2,g=Kg(h),y=.5*(1-Math.sqrt(g/(g+Vg))),x=(1+y)*s,m=(1+y)*u,k=Math.sqrt(x**2+o**2),S=Math.sqrt(m**2+p**2),_=x===0&&o===0?0:Math.atan2(o,x),w=m===0&&p===0?0:Math.atan2(p,m);_<0&&(_+=2*yc),w<0&&(w+=2*yc),_*=Wg,w*=Wg;let A=c-a,T=S-k,I=w-_,O=_+w,B=Math.abs(I),E;k*S===0?E=0:B<=180?E=I:I>180?E=I-360:I<-180?E=I+360:Jt.warn("the unthinkable has happened");let $=2*Math.sqrt(S*k)*Math.sin(E*aa/2),R=(a+c)/2,N=(k+S)/2,D=Kg(N),j;k*S===0?j=O:B<=180?j=O/2:O<360?j=(O+360)/2:j=(O-360)/2;let ee=(R-50)**2,oe=1+.015*ee/Math.sqrt(20+ee),we=1+.045*N,me=1;me-=.17*Math.cos((j-30)*aa),me+=.24*Math.cos(2*j*aa),me+=.32*Math.cos((3*j+6)*aa),me-=.2*Math.cos((4*j-63)*aa);let fe=1+.015*N*me,ut=30*Math.exp(-1*((j-275)/25)**2),W=2*Math.sqrt(D/(D+Vg)),Ye=-1*Math.sin(2*ut*aa)*W,le=(A/(r*oe))**2;return le+=(T/(i*we))**2,le+=($/(n*fe))**2,le+=Ye*(T/(i*we))*($/(n*fe)),Math.sqrt(le)}const dS=[[.819022437996703,.3619062600528904,-.1288737815209879],[.0329836539323885,.9292868615863434,.0361446663506424],[.0481771893596242,.2642395317527308,.6335478284694309]],hS=[[1.2268798758459243,-.5578149944602171,.2813910456659647],[-.0405757452148008,1.112286803280317,-.0717110580655164],[-.0763729366746601,-.4214933324022432,1.5869240198367816]],pS=[[.210454268309314,.7936177747023054,-.0040720430116193],[1.9779985324311684,-2.42859224204858,.450593709617411],[.0259040424655478,.7827717124575296,-.8086757549230774]],fS=[[1,.3963377773761749,.2158037573099136],[1,-.1055613458156586,-.0638541728258133],[1,-.0894841775298119,-1.2914855480194092]];var Ma=new K({id:"oklab",name:"Oklab",coords:{l:{refRange:[0,1],name:"Lightness"},a:{refRange:[-.4,.4]},b:{refRange:[-.4,.4]}},white:"D65",base:ft,fromBase(t){let r=qe(dS,t).map(i=>Math.cbrt(i));return qe(pS,r)},toBase(t){let r=qe(fS,t).map(i=>i**3);return qe(hS,r)},formats:{oklab:{coords:["<percentage> | <number>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}});function e0(t,e){[t,e]=he([t,e]);let[r,i,n]=Ma.from(t),[a,s,o]=Ma.from(e),l=r-a,c=i-s,u=n-o;return Math.sqrt(l**2+c**2+u**2)}const gS=75e-6;function An(t,e,{epsilon:r=gS}={}){t=he(t),e||(e=t.space),e=K.get(e);let i=t.coords;return e!==t.space&&(i=e.from(t)),e.inGamut(i,{epsilon:r})}function Ia(t){return{space:t.space,coords:t.coords.slice(),alpha:t.alpha}}function pw(t,e,r="lab"){r=K.get(r);let i=r.from(t),n=r.from(e);return Math.sqrt(i.reduce((a,s,o)=>{let l=n[o];return isNaN(s)||isNaN(l)?a:a+(l-s)**2},0))}function mS(t,e){return pw(t,e,"lab")}const bS=Math.PI,Yg=bS/180;function vS(t,e,{l:r=2,c:i=1}={}){[t,e]=he([t,e]);let[n,a,s]=Qt.from(t),[,o,l]=go.from(Qt,[n,a,s]),[c,u,p]=Qt.from(e),d=go.from(Qt,[c,u,p])[1];o<0&&(o=0),d<0&&(d=0);let h=n-c,g=o-d,y=a-u,x=s-p,m=y**2+x**2-g**2,k=.511;n>=16&&(k=.040975*n/(1+.01765*n));let S=.0638*o/(1+.0131*o)+.638,_;Number.isNaN(l)&&(l=0),l>=164&&l<=345?_=.56+Math.abs(.2*Math.cos((l+168)*Yg)):_=.36+Math.abs(.4*Math.cos((l+35)*Yg));let w=Math.pow(o,4),A=Math.sqrt(w/(w+1900)),T=S*(A*_+1-A),I=(h/(r*k))**2;return I+=(g/(i*S))**2,I+=m/T**2,Math.sqrt(I)}const Xg=203;var Mp=new K({id:"xyz-abs-d65",cssId:"--xyz-abs-d65",name:"Absolute XYZ D65",coords:{x:{refRange:[0,9504.7],name:"Xa"},y:{refRange:[0,1e4],name:"Ya"},z:{refRange:[0,10888.3],name:"Za"}},base:ft,fromBase(t){return t.map(e=>Math.max(e*Xg,0))},toBase(t){return t.map(e=>Math.max(e/Xg,0))}});const bl=1.15,vl=.66,Zg=2610/2**14,yS=2**14/2610,Qg=3424/2**12,Jg=2413/2**7,em=2392/2**7,wS=1.7*2523/2**5,tm=2**5/(1.7*2523),yl=-.56,xd=16295499532821565e-27,xS=[[.41478972,.579999,.014648],[-.20151,1.120649,.0531008],[-.0166008,.2648,.6684799]],_S=[[1.9242264357876067,-1.0047923125953657,.037651404030618],[.35031676209499907,.7264811939316552,-.06538442294808501],[-.09098281098284752,-.3127282905230739,1.5227665613052603]],kS=[[.5,.5,0],[3.524,-4.066708,.542708],[.199076,1.096799,-1.295875]],SS=[[1,.1386050432715393,.05804731615611886],[.9999999999999999,-.1386050432715393,-.05804731615611886],[.9999999999999998,-.09601924202631895,-.8118918960560388]];var fw=new K({id:"jzazbz",name:"Jzazbz",coords:{jz:{refRange:[0,1],name:"Jz"},az:{refRange:[-.5,.5]},bz:{refRange:[-.5,.5]}},base:Mp,fromBase(t){let[e,r,i]=t,n=bl*e-(bl-1)*i,a=vl*r-(vl-1)*e,o=qe(xS,[n,a,i]).map(function(d){let h=Qg+Jg*(d/1e4)**Zg,g=1+em*(d/1e4)**Zg;return(h/g)**wS}),[l,c,u]=qe(kS,o);return[(1+yl)*l/(1+yl*l)-xd,c,u]},toBase(t){let[e,r,i]=t,n=(e+xd)/(1+yl-yl*(e+xd)),s=qe(SS,[n,r,i]).map(function(d){let h=Qg-d**tm,g=em*d**tm-Jg;return 1e4*(h/g)**yS}),[o,l,c]=qe(_S,s),u=(o+(bl-1)*c)/bl,p=(l+(vl-1)*u)/vl;return[u,p,c]},formats:{color:{coords:["<number> | <percentage>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}}),t0=new K({id:"jzczhz",name:"JzCzHz",coords:{jz:{refRange:[0,1],name:"Jz"},cz:{refRange:[0,1],name:"Chroma"},hz:{refRange:[0,360],type:"angle",name:"Hue"}},base:fw,fromBase(t){let[e,r,i]=t,n;const a=2e-4;return Math.abs(r)<a&&Math.abs(i)<a?n=NaN:n=Math.atan2(i,r)*180/Math.PI,[e,Math.sqrt(r**2+i**2),Vr(n)]},toBase(t){return[t[0],t[1]*Math.cos(t[2]*Math.PI/180),t[1]*Math.sin(t[2]*Math.PI/180)]}});function AS(t,e){[t,e]=he([t,e]);let[r,i,n]=t0.from(t),[a,s,o]=t0.from(e),l=r-a,c=i-s;Number.isNaN(n)&&Number.isNaN(o)?(n=0,o=0):Number.isNaN(n)?n=o:Number.isNaN(o)&&(o=n);let u=n-o,p=2*Math.sqrt(i*s)*Math.sin(u/2*(Math.PI/180));return Math.sqrt(l**2+c**2+p**2)}const gw=3424/4096,mw=2413/128,bw=2392/128,rm=2610/16384,CS=2523/32,TS=16384/2610,im=32/2523,ES=[[.3592832590121217,.6976051147779502,-.035891593232029],[-.1920808463704993,1.100476797037432,.0753748658519118],[.0070797844607479,.0748396662186362,.8433265453898765]],MS=[[2048/4096,2048/4096,0],[6610/4096,-13613/4096,7003/4096],[17933/4096,-17390/4096,-543/4096]],IS=[[.9999999999999998,.0086090370379328,.111029625003026],[.9999999999999998,-.0086090370379328,-.1110296250030259],[.9999999999999998,.5600313357106791,-.3206271749873188]],PS=[[2.0701522183894223,-1.3263473389671563,.2066510476294053],[.3647385209748072,.6805660249472273,-.0453045459220347],[-.0497472075358123,-.0492609666966131,1.1880659249923042]];var r0=new K({id:"ictcp",name:"ICTCP",coords:{i:{refRange:[0,1],name:"I"},ct:{refRange:[-.5,.5],name:"CT"},cp:{refRange:[-.5,.5],name:"CP"}},base:Mp,fromBase(t){let e=qe(ES,t);return $S(e)},toBase(t){let e=RS(t);return qe(PS,e)}});function $S(t){let e=t.map(function(r){let i=gw+mw*(r/1e4)**rm,n=1+bw*(r/1e4)**rm;return(i/n)**CS});return qe(MS,e)}function RS(t){return qe(IS,t).map(function(i){let n=Math.max(i**im-gw,0),a=mw-bw*i**im;return 1e4*(n/a)**TS})}function DS(t,e){[t,e]=he([t,e]);let[r,i,n]=r0.from(t),[a,s,o]=r0.from(e);return 720*Math.sqrt((r-a)**2+.25*(i-s)**2+(n-o)**2)}const LS=Tt.D65,vw=.42,nm=1/vw,_d=2*Math.PI,yw=[[.401288,.650173,-.051461],[-.250268,1.204414,.045854],[-.002079,.048952,.953127]],OS=[[1.8620678550872327,-1.0112546305316843,.14918677544445175],[.38752654323613717,.6214474419314753,-.008973985167612518],[-.015841498849333856,-.03412293802851557,1.0499644368778496]],BS=[[460,451,288],[460,-891,-261],[460,-220,-6300]],NS={dark:[.8,.525,.8],dim:[.9,.59,.9],average:[1,.69,1]},pn={h:[20.14,90,164.25,237.53,380.14],e:[.8,.7,1,1.2,.8],H:[0,100,200,300,400]},US=180/Math.PI,am=Math.PI/180;function ww(t,e){return t.map(i=>{const n=Ur(e*Math.abs(i)*.01,vw);return 400*cu(n,i)/(n+27.13)})}function zS(t,e){const r=100/e*27.13**nm;return t.map(i=>{const n=Math.abs(i);return cu(r*Ur(n/(400-n),nm),i)})}function HS(t){let e=Vr(t);e<=pn.h[0]&&(e+=360);const r=uw(pn.h,e)-1,[i,n]=pn.h.slice(r,r+2),[a,s]=pn.e.slice(r,r+2),o=pn.H[r],l=(e-i)/a;return o+100*l/(l+(n-e)/s)}function FS(t){let e=(t%400+400)%400;const r=Math.floor(.01*e);e=e%100;const[i,n]=pn.h.slice(r,r+2),[a,s]=pn.e.slice(r,r+2);return Vr((e*(s*i-a*n)-100*i*s)/(e*(s-a)-100*s))}function xw(t,e,r,i,n){const a={};a.discounting=n,a.refWhite=t,a.surround=i;const s=t.map(y=>y*100);a.la=e,a.yb=r;const o=s[1],l=qe(yw,s);i=NS[a.surround];const c=i[0];a.c=i[1],a.nc=i[2];const p=(1/(5*a.la+1))**4;a.fl=p*a.la+.1*(1-p)*(1-p)*Math.cbrt(5*a.la),a.flRoot=a.fl**.25,a.n=a.yb/o,a.z=1.48+Math.sqrt(a.n),a.nbb=.725*a.n**-.2,a.ncb=a.nbb;const d=Math.max(Math.min(c*(1-1/3.6*Math.exp((-a.la-42)/92)),1),0);a.dRgb=l.map(y=>fo(1,o/y,d)),a.dRgbInv=a.dRgb.map(y=>1/y);const h=l.map((y,x)=>y*a.dRgb[x]),g=ww(h,a.fl);return a.aW=a.nbb*(2*g[0]+g[1]+.05*g[2]),a}const sm=xw(LS,64/Math.PI*.2,20,"average",!1);function i0(t,e){if(!(t.J!==void 0^t.Q!==void 0))throw new Error("Conversion requires one and only one: 'J' or 'Q'");if(!(t.C!==void 0^t.M!==void 0^t.s!==void 0))throw new Error("Conversion requires one and only one: 'C', 'M' or 's'");if(!(t.h!==void 0^t.H!==void 0))throw new Error("Conversion requires one and only one: 'h' or 'H'");if(t.J===0||t.Q===0)return[0,0,0];let r=0;t.h!==void 0?r=Vr(t.h)*am:r=FS(t.H)*am;const i=Math.cos(r),n=Math.sin(r);let a=0;t.J!==void 0?a=Ur(t.J,1/2)*.1:t.Q!==void 0&&(a=.25*e.c*t.Q/((e.aW+4)*e.flRoot));let s=0;t.C!==void 0?s=t.C/a:t.M!==void 0?s=t.M/e.flRoot/a:t.s!==void 0&&(s=4e-4*t.s**2*(e.aW+4)/e.c);const o=Ur(s*Math.pow(1.64-Math.pow(.29,e.n),-.73),10/9),l=.25*(Math.cos(r+2)+3.8),c=e.aW*Ur(a,2/e.c/e.z),u=5e4/13*e.nc*e.ncb*l,p=c/e.nbb,d=23*(p+.305)*Cp(o,23*u+o*(11*i+108*n)),h=d*i,g=d*n,y=zS(qe(BS,[p,h,g]).map(x=>x*1/1403),e.fl);return qe(OS,y.map((x,m)=>x*e.dRgbInv[m])).map(x=>x/100)}function _w(t,e){const r=t.map(S=>S*100),i=ww(qe(yw,r).map((S,_)=>S*e.dRgb[_]),e.fl),n=i[0]+(-12*i[1]+i[2])/11,a=(i[0]+i[1]-2*i[2])/9,s=(Math.atan2(a,n)%_d+_d)%_d,o=.25*(Math.cos(s+2)+3.8),l=5e4/13*e.nc*e.ncb*Cp(o*Math.sqrt(n**2+a**2),i[0]+i[1]+1.05*i[2]+.305),c=Ur(l,.9)*Math.pow(1.64-Math.pow(.29,e.n),.73),u=e.nbb*(2*i[0]+i[1]+.05*i[2]),p=Ur(u/e.aW,.5*e.c*e.z),d=100*Ur(p,2),h=4/e.c*p*(e.aW+4)*e.flRoot,g=c*p,y=g*e.flRoot,x=Vr(s*US),m=HS(x),k=50*Ur(e.c*c/(e.aW+4),1/2);return{J:d,C:g,h:x,s:k,Q:h,M:y,H:m}}var qS=new K({id:"cam16-jmh",cssId:"--cam16-jmh",name:"CAM16-JMh",coords:{j:{refRange:[0,100],name:"J"},m:{refRange:[0,105],name:"Colorfulness"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:ft,fromBase(t){const e=_w(t,sm);return[e.J,e.M,e.h]},toBase(t){return i0({J:t[0],M:t[1],h:t[2]},sm)}});const jS=Tt.D65,GS=216/24389,kw=24389/27;function VS(t){return 116*(t>GS?Math.cbrt(t):(kw*t+16)/116)-16}function n0(t){return t>8?Math.pow((t+16)/116,3):t/kw}function WS(t,e){let[r,i,n]=t,a=[],s=0;if(n===0)return[0,0,0];let o=n0(n);n>0?s=.00379058511492914*n**2+.608983189401032*n+.9155088574762233:s=9514440756550361e-21*n**2+.08693057439788597*n-21.928975842194614;const l=2e-12,c=15;let u=0,p=1/0;for(;u<=c;){a=i0({J:s,C:i,h:r},e);const d=Math.abs(a[1]-o);if(d<p){if(d<=l)return a;p=d}s=s-(a[1]-o)*s/(2*a[1]),u+=1}return i0({J:s,C:i,h:r},e)}function KS(t,e){const r=VS(t[1]);if(r===0)return[0,0,0];const i=_w(t,Ip);return[Vr(i.h),i.C,r]}const Ip=xw(jS,200/Math.PI*n0(50),n0(50)*100,"average",!1);var mo=new K({id:"hct",name:"HCT",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},c:{refRange:[0,145],name:"Colorfulness"},t:{refRange:[0,100],name:"Tone"}},base:ft,fromBase(t){return KS(t)},toBase(t){return WS(t,Ip)},formats:{color:{id:"--hct",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}});const YS=Math.PI/180,om=[1,.007,.0228];function lm(t){t[1]<0&&(t=mo.fromBase(mo.toBase(t)));const e=Math.log(Math.max(1+om[2]*t[1]*Ip.flRoot,1))/om[2],r=t[0]*YS,i=e*Math.cos(r),n=e*Math.sin(r);return[t[2],i,n]}function XS(t,e){[t,e]=he([t,e]);let[r,i,n]=lm(mo.from(t)),[a,s,o]=lm(mo.from(e));return Math.sqrt((r-a)**2+(i-s)**2+(n-o)**2)}var Pa={deltaE76:mS,deltaECMC:vS,deltaE2000:hw,deltaEJz:AS,deltaEITP:DS,deltaEOK:e0,deltaEHCT:XS};function ZS(t){const e=t?Math.floor(Math.log10(Math.abs(t))):0;return Math.max(parseFloat(`1e${e-2}`),1e-6)}const cm={hct:{method:"hct.c",jnd:2,deltaEMethod:"hct",blackWhiteClamp:{}},"hct-tonal":{method:"hct.c",jnd:0,deltaEMethod:"hct",blackWhiteClamp:{channel:"hct.t",min:0,max:100}}};function Pi(t,{method:e=Jt.gamut_mapping,space:r=void 0,deltaEMethod:i="",jnd:n=2,blackWhiteClamp:a={}}={}){if(t=he(t),Ho(arguments[1])?r=arguments[1]:r||(r=t.space),r=K.get(r),An(t,r,{epsilon:0}))return t;let s;if(e==="css")s=QS(t,{space:r});else{if(e!=="clip"&&!An(t,r)){Object.prototype.hasOwnProperty.call(cm,e)&&({method:e,jnd:n,deltaEMethod:i,blackWhiteClamp:a}=cm[e]);let o=hw;if(i!==""){for(let c in Pa)if("deltae"+i.toLowerCase()===c.toLowerCase()){o=Pa[c];break}}let l=Pi(Fe(t,r),{method:"clip",space:r});if(o(t,l)>n){if(Object.keys(a).length===3){let k=K.resolveCoord(a.channel),S=Zt(Fe(t,k.space),k.id);if(Mi(S)&&(S=0),S>=a.max)return Fe({space:"xyz-d65",coords:Tt.D65},t.space);if(S<=a.min)return Fe({space:"xyz-d65",coords:[0,0,0]},t.space)}let c=K.resolveCoord(e),u=c.space,p=c.id,d=Fe(t,u);d.coords.forEach((k,S)=>{Mi(k)&&(d.coords[S]=0)});let g=(c.range||c.refRange)[0],y=ZS(n),x=g,m=Zt(d,p);for(;m-x>y;){let k=Ia(d);k=Pi(k,{space:r,method:"clip"}),o(d,k)-n<y?x=Zt(d,p):m=Zt(d,p),hi(d,p,(x+m)/2)}s=Fe(d,r)}else s=l}else s=Fe(t,r);if(e==="clip"||!An(s,r,{epsilon:0})){let o=Object.values(r.coords).map(l=>l.range||[]);s.coords=s.coords.map((l,c)=>{let[u,p]=o[c];return u!==void 0&&(l=Math.max(u,l)),p!==void 0&&(l=Math.min(l,p)),l})}}return r!==t.space&&(s=Fe(s,t.space)),t.coords=s.coords,t}Pi.returns="color";const um={WHITE:{space:Ma,coords:[1,0,0]},BLACK:{space:Ma,coords:[0,0,0]}};function QS(t,{space:e}={}){t=he(t),e||(e=t.space),e=K.get(e);const n=K.get("oklch");if(e.isUnbounded)return Fe(t,e);const a=Fe(t,n);let s=a.coords[0];if(s>=1){const g=Fe(um.WHITE,e);return g.alpha=t.alpha,Fe(g,e)}if(s<=0){const g=Fe(um.BLACK,e);return g.alpha=t.alpha,Fe(g,e)}if(An(a,e,{epsilon:0}))return Fe(a,e);function o(g){const y=Fe(g,e),x=Object.values(e.coords);return y.coords=y.coords.map((m,k)=>{if("range"in x[k]){const[S,_]=x[k].range;return cw(S,m,_)}return m}),y}let l=0,c=a.coords[1],u=!0,p=Ia(a),d=o(p),h=e0(d,p);if(h<.02)return d;for(;c-l>1e-4;){const g=(l+c)/2;if(p.coords[1]=g,u&&An(p,e,{epsilon:0}))l=g;else if(d=o(p),h=e0(d,p),h<.02){if(.02-h<1e-4)break;u=!1,l=g}else c=g}return d}function Fe(t,e,{inGamut:r}={}){t=he(t),e=K.get(e);let i=e.from(t),n={space:e,coords:i,alpha:t.alpha};return r&&(n=Pi(n,r===!0?void 0:r)),n}Fe.returns="color";function io(t,{precision:e=Jt.precision,format:r="default",inGamut:i=!0,...n}={}){let a;t=he(t);let s=r;r=t.space.getFormat(r)??t.space.getFormat("default")??K.DEFAULT_FORMAT;let o=t.coords.slice();if(i||=r.toGamut,i&&!An(t)&&(o=Pi(Ia(t),i===!0?void 0:i).coords),r.type==="custom")if(n.precision=e,r.serialize)a=r.serialize(o,t.alpha,n);else throw new TypeError(`format ${s} can only be used to parse colors, not for serialization`);else{let l=r.name||"color";r.serializeCoords?o=r.serializeCoords(o,e):e!==null&&(o=o.map(d=>bc(d,{precision:e})));let c=[...o];if(l==="color"){let d=r.id||r.ids?.[0]||t.space.id;c.unshift(d)}let u=t.alpha;e!==null&&(u=bc(u,{precision:e}));let p=t.alpha>=1||r.noAlpha?"":`${r.commas?",":" /"} ${u}`;a=`${l}(${c.join(r.commas?", ":" ")}${p})`}return a}const JS=[[.6369580483012914,.14461690358620832,.1688809751641721],[.2627002120112671,.6779980715188708,.05930171646986196],[0,.028072693049087428,1.060985057710791]],e4=[[1.716651187971268,-.355670783776392,-.25336628137366],[-.666684351832489,1.616481236634939,.0157685458139111],[.017639857445311,-.042770613257809,.942103121235474]];var uu=new jt({id:"rec2020-linear",cssId:"--rec2020-linear",name:"Linear REC.2020",white:"D65",toXYZ_M:JS,fromXYZ_M:e4});const wl=1.09929682680944,dm=.018053968510807;var Sw=new jt({id:"rec2020",name:"REC.2020",base:uu,toBase(t){return t.map(function(e){return e<dm*4.5?e/4.5:Math.pow((e+wl-1)/wl,1/.45)})},fromBase(t){return t.map(function(e){return e>=dm?wl*Math.pow(e,.45)-(wl-1):4.5*e})}});const t4=[[.4865709486482162,.26566769316909306,.1982172852343625],[.2289745640697488,.6917385218365064,.079286914093745],[0,.04511338185890264,1.043944368900976]],r4=[[2.493496911941425,-.9313836179191239,-.40271078445071684],[-.8294889695615747,1.7626640603183463,.023624685841943577],[.03584583024378447,-.07617238926804182,.9568845240076872]];var Aw=new jt({id:"p3-linear",cssId:"--display-p3-linear",name:"Linear P3",white:"D65",toXYZ_M:t4,fromXYZ_M:r4});const i4=[[.41239079926595934,.357584339383878,.1804807884018343],[.21263900587151027,.715168678767756,.07219231536073371],[.01933081871559182,.11919477979462598,.9505321522496607]],it=[[3.2409699419045226,-1.537383177570094,-.4986107602930034],[-.9692436362808796,1.8759675015077202,.04155505740717559],[.05563007969699366,-.20397695888897652,1.0569715142428786]];var Cw=new jt({id:"srgb-linear",name:"Linear sRGB",white:"D65",toXYZ_M:i4,fromXYZ_M:it}),hm={aliceblue:[240/255,248/255,1],antiquewhite:[250/255,235/255,215/255],aqua:[0,1,1],aquamarine:[127/255,1,212/255],azure:[240/255,1,1],beige:[245/255,245/255,220/255],bisque:[1,228/255,196/255],black:[0,0,0],blanchedalmond:[1,235/255,205/255],blue:[0,0,1],blueviolet:[138/255,43/255,226/255],brown:[165/255,42/255,42/255],burlywood:[222/255,184/255,135/255],cadetblue:[95/255,158/255,160/255],chartreuse:[127/255,1,0],chocolate:[210/255,105/255,30/255],coral:[1,127/255,80/255],cornflowerblue:[100/255,149/255,237/255],cornsilk:[1,248/255,220/255],crimson:[220/255,20/255,60/255],cyan:[0,1,1],darkblue:[0,0,139/255],darkcyan:[0,139/255,139/255],darkgoldenrod:[184/255,134/255,11/255],darkgray:[169/255,169/255,169/255],darkgreen:[0,100/255,0],darkgrey:[169/255,169/255,169/255],darkkhaki:[189/255,183/255,107/255],darkmagenta:[139/255,0,139/255],darkolivegreen:[85/255,107/255,47/255],darkorange:[1,140/255,0],darkorchid:[153/255,50/255,204/255],darkred:[139/255,0,0],darksalmon:[233/255,150/255,122/255],darkseagreen:[143/255,188/255,143/255],darkslateblue:[72/255,61/255,139/255],darkslategray:[47/255,79/255,79/255],darkslategrey:[47/255,79/255,79/255],darkturquoise:[0,206/255,209/255],darkviolet:[148/255,0,211/255],deeppink:[1,20/255,147/255],deepskyblue:[0,191/255,1],dimgray:[105/255,105/255,105/255],dimgrey:[105/255,105/255,105/255],dodgerblue:[30/255,144/255,1],firebrick:[178/255,34/255,34/255],floralwhite:[1,250/255,240/255],forestgreen:[34/255,139/255,34/255],fuchsia:[1,0,1],gainsboro:[220/255,220/255,220/255],ghostwhite:[248/255,248/255,1],gold:[1,215/255,0],goldenrod:[218/255,165/255,32/255],gray:[128/255,128/255,128/255],green:[0,128/255,0],greenyellow:[173/255,1,47/255],grey:[128/255,128/255,128/255],honeydew:[240/255,1,240/255],hotpink:[1,105/255,180/255],indianred:[205/255,92/255,92/255],indigo:[75/255,0,130/255],ivory:[1,1,240/255],khaki:[240/255,230/255,140/255],lavender:[230/255,230/255,250/255],lavenderblush:[1,240/255,245/255],lawngreen:[124/255,252/255,0],lemonchiffon:[1,250/255,205/255],lightblue:[173/255,216/255,230/255],lightcoral:[240/255,128/255,128/255],lightcyan:[224/255,1,1],lightgoldenrodyellow:[250/255,250/255,210/255],lightgray:[211/255,211/255,211/255],lightgreen:[144/255,238/255,144/255],lightgrey:[211/255,211/255,211/255],lightpink:[1,182/255,193/255],lightsalmon:[1,160/255,122/255],lightseagreen:[32/255,178/255,170/255],lightskyblue:[135/255,206/255,250/255],lightslategray:[119/255,136/255,153/255],lightslategrey:[119/255,136/255,153/255],lightsteelblue:[176/255,196/255,222/255],lightyellow:[1,1,224/255],lime:[0,1,0],limegreen:[50/255,205/255,50/255],linen:[250/255,240/255,230/255],magenta:[1,0,1],maroon:[128/255,0,0],mediumaquamarine:[102/255,205/255,170/255],mediumblue:[0,0,205/255],mediumorchid:[186/255,85/255,211/255],mediumpurple:[147/255,112/255,219/255],mediumseagreen:[60/255,179/255,113/255],mediumslateblue:[123/255,104/255,238/255],mediumspringgreen:[0,250/255,154/255],mediumturquoise:[72/255,209/255,204/255],mediumvioletred:[199/255,21/255,133/255],midnightblue:[25/255,25/255,112/255],mintcream:[245/255,1,250/255],mistyrose:[1,228/255,225/255],moccasin:[1,228/255,181/255],navajowhite:[1,222/255,173/255],navy:[0,0,128/255],oldlace:[253/255,245/255,230/255],olive:[128/255,128/255,0],olivedrab:[107/255,142/255,35/255],orange:[1,165/255,0],orangered:[1,69/255,0],orchid:[218/255,112/255,214/255],palegoldenrod:[238/255,232/255,170/255],palegreen:[152/255,251/255,152/255],paleturquoise:[175/255,238/255,238/255],palevioletred:[219/255,112/255,147/255],papayawhip:[1,239/255,213/255],peachpuff:[1,218/255,185/255],peru:[205/255,133/255,63/255],pink:[1,192/255,203/255],plum:[221/255,160/255,221/255],powderblue:[176/255,224/255,230/255],purple:[128/255,0,128/255],rebeccapurple:[102/255,51/255,153/255],red:[1,0,0],rosybrown:[188/255,143/255,143/255],royalblue:[65/255,105/255,225/255],saddlebrown:[139/255,69/255,19/255],salmon:[250/255,128/255,114/255],sandybrown:[244/255,164/255,96/255],seagreen:[46/255,139/255,87/255],seashell:[1,245/255,238/255],sienna:[160/255,82/255,45/255],silver:[192/255,192/255,192/255],skyblue:[135/255,206/255,235/255],slateblue:[106/255,90/255,205/255],slategray:[112/255,128/255,144/255],slategrey:[112/255,128/255,144/255],snow:[1,250/255,250/255],springgreen:[0,1,127/255],steelblue:[70/255,130/255,180/255],tan:[210/255,180/255,140/255],teal:[0,128/255,128/255],thistle:[216/255,191/255,216/255],tomato:[1,99/255,71/255],turquoise:[64/255,224/255,208/255],violet:[238/255,130/255,238/255],wheat:[245/255,222/255,179/255],white:[1,1,1],whitesmoke:[245/255,245/255,245/255],yellow:[1,1,0],yellowgreen:[154/255,205/255,50/255]};let pm=Array(3).fill("<percentage> | <number>[0, 255]"),fm=Array(3).fill("<number>[0, 255]");var $a=new jt({id:"srgb",name:"sRGB",base:Cw,fromBase:t=>t.map(e=>{let r=e<0?-1:1,i=e*r;return i>.0031308?r*(1.055*i**(1/2.4)-.055):12.92*e}),toBase:t=>t.map(e=>{let r=e<0?-1:1,i=e*r;return i<=.04045?e/12.92:r*((i+.055)/1.055)**2.4}),formats:{rgb:{coords:pm},rgb_number:{name:"rgb",commas:!0,coords:fm,noAlpha:!0},color:{},rgba:{coords:pm,commas:!0,lastAlpha:!0},rgba_number:{name:"rgba",commas:!0,coords:fm},hex:{type:"custom",toGamut:!0,test:t=>/^#([a-f0-9]{3,4}){1,2}$/i.test(t),parse(t){t.length<=5&&(t=t.replace(/[a-f0-9]/gi,"$&$&"));let e=[];return t.replace(/[a-f0-9]{2}/gi,r=>{e.push(parseInt(r,16)/255)}),{spaceId:"srgb",coords:e.slice(0,3),alpha:e.slice(3)[0]}},serialize:(t,e,{collapse:r=!0}={})=>{e<1&&t.push(e),t=t.map(a=>Math.round(a*255));let i=r&&t.every(a=>a%17===0);return"#"+t.map(a=>i?(a/17).toString(16):a.toString(16).padStart(2,"0")).join("")}},keyword:{type:"custom",test:t=>/^[a-z]+$/i.test(t),parse(t){t=t.toLowerCase();let e={spaceId:"srgb",coords:null,alpha:1};if(t==="transparent"?(e.coords=hm.black,e.alpha=0):e.coords=hm[t],e.coords)return e}}}}),Tw=new jt({id:"p3",cssId:"display-p3",name:"P3",base:Aw,fromBase:$a.fromBase,toBase:$a.toBase});Jt.display_space=$a;let n4;if(typeof CSS<"u"&&CSS.supports)for(let t of[Qt,Sw,Tw]){let e=t.getMinCoords(),i=io({space:t,coords:e,alpha:1});if(CSS.supports("color",i)){Jt.display_space=t;break}}function a4(t,{space:e=Jt.display_space,...r}={}){let i=io(t,r);if(typeof CSS>"u"||CSS.supports("color",i)||!Jt.display_space)i=new String(i),i.color=t;else{let n=t;if((t.coords.some(Mi)||Mi(t.alpha))&&!(n4??=CSS.supports("color","hsl(none 50% 50%)"))&&(n=Ia(t),n.coords=n.coords.map(Ze),n.alpha=Ze(n.alpha),i=io(n,r),CSS.supports("color",i)))return i=new String(i),i.color=n,i;n=Fe(n,e),i=new String(io(n,r)),i.color=n}return i}function s4(t,e){return t=he(t),e=he(e),t.space===e.space&&t.alpha===e.alpha&&t.coords.every((r,i)=>r===e.coords[i])}function $i(t){return Zt(t,[ft,"y"])}function Ew(t,e){hi(t,[ft,"y"],e)}function o4(t){Object.defineProperty(t.prototype,"luminance",{get(){return $i(this)},set(e){Ew(this,e)}})}var l4=Object.freeze({__proto__:null,getLuminance:$i,register:o4,setLuminance:Ew});function c4(t,e){t=he(t),e=he(e);let r=Math.max($i(t),0),i=Math.max($i(e),0);return i>r&&([r,i]=[i,r]),(r+.05)/(i+.05)}const u4=.56,d4=.57,h4=.62,p4=.65,gm=.022,f4=1.414,g4=.1,m4=5e-4,b4=1.14,mm=.027,v4=1.14;function bm(t){return t>=gm?t:t+(gm-t)**f4}function sa(t){let e=t<0?-1:1,r=Math.abs(t);return e*Math.pow(r,2.4)}function y4(t,e){e=he(e),t=he(t);let r,i,n,a,s,o;e=Fe(e,"srgb"),[a,s,o]=e.coords;let l=sa(a)*.2126729+sa(s)*.7151522+sa(o)*.072175;t=Fe(t,"srgb"),[a,s,o]=t.coords;let c=sa(a)*.2126729+sa(s)*.7151522+sa(o)*.072175,u=bm(l),p=bm(c),d=p>u;return Math.abs(p-u)<m4?i=0:d?(r=p**u4-u**d4,i=r*b4):(r=p**p4-u**h4,i=r*v4),Math.abs(i)<g4?n=0:i>0?n=i-mm:n=i+mm,n*100}function w4(t,e){t=he(t),e=he(e);let r=Math.max($i(t),0),i=Math.max($i(e),0);i>r&&([r,i]=[i,r]);let n=r+i;return n===0?0:(r-i)/n}const x4=5e4;function _4(t,e){t=he(t),e=he(e);let r=Math.max($i(t),0),i=Math.max($i(e),0);return i>r&&([r,i]=[i,r]),i===0?x4:(r-i)/i}function k4(t,e){t=he(t),e=he(e);let r=Zt(t,[Qt,"l"]),i=Zt(e,[Qt,"l"]);return Math.abs(r-i)}const S4=216/24389,vm=24/116,xl=24389/27;let kd=Tt.D65;var a0=new K({id:"lab-d65",name:"Lab D65",coords:{l:{refRange:[0,100],name:"Lightness"},a:{refRange:[-125,125]},b:{refRange:[-125,125]}},white:kd,base:ft,fromBase(t){let r=t.map((i,n)=>i/kd[n]).map(i=>i>S4?Math.cbrt(i):(xl*i+16)/116);return[116*r[1]-16,500*(r[0]-r[1]),200*(r[1]-r[2])]},toBase(t){let e=[];return e[1]=(t[0]+16)/116,e[0]=t[1]/500+e[1],e[2]=e[1]-t[2]/200,[e[0]>vm?Math.pow(e[0],3):(116*e[0]-16)/xl,t[0]>8?Math.pow((t[0]+16)/116,3):t[0]/xl,e[2]>vm?Math.pow(e[2],3):(116*e[2]-16)/xl].map((i,n)=>i*kd[n])},formats:{"lab-d65":{coords:["<number> | <percentage>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}});const Sd=Math.pow(5,.5)*.5+.5;function A4(t,e){t=he(t),e=he(e);let r=Zt(t,[a0,"l"]),i=Zt(e,[a0,"l"]),n=Math.abs(Math.pow(r,Sd)-Math.pow(i,Sd)),a=Math.pow(n,1/Sd)*Math.SQRT2-40;return a<7.5?0:a}var ac=Object.freeze({__proto__:null,contrastAPCA:y4,contrastDeltaPhi:A4,contrastLstar:k4,contrastMichelson:w4,contrastWCAG21:c4,contrastWeber:_4});function C4(t,e,r={}){Ho(r)&&(r={algorithm:r});let{algorithm:i,...n}=r;if(!i){let a=Object.keys(ac).map(s=>s.replace(/^contrast/,"")).join(", ");throw new TypeError(`contrast() function needs a contrast algorithm. Please specify one of: ${a}`)}t=he(t),e=he(e);for(let a in ac)if("contrast"+i.toLowerCase()===a.toLowerCase())return ac[a](t,e,n);throw new TypeError(`Unknown contrast algorithm: ${i}`)}function du(t){let[e,r,i]=Fo(t,ft),n=e+15*r+3*i;return[4*e/n,9*r/n]}function Mw(t){let[e,r,i]=Fo(t,ft),n=e+r+i;return[e/n,r/n]}function T4(t){Object.defineProperty(t.prototype,"uv",{get(){return du(this)}}),Object.defineProperty(t.prototype,"xy",{get(){return Mw(this)}})}var E4=Object.freeze({__proto__:null,register:T4,uv:du,xy:Mw});function Ks(t,e,r={}){Ho(r)&&(r={method:r});let{method:i=Jt.deltaE,...n}=r;for(let a in Pa)if("deltae"+i.toLowerCase()===a.toLowerCase())return Pa[a](t,e,n);throw new TypeError(`Unknown deltaE method: ${i}`)}function M4(t,e=.25){let i=[K.get("oklch","lch"),"l"];return hi(t,i,n=>n*(1+e))}function I4(t,e=.25){let i=[K.get("oklch","lch"),"l"];return hi(t,i,n=>n*(1-e))}var P4=Object.freeze({__proto__:null,darken:I4,lighten:M4});function Iw(t,e,r=.5,i={}){return[t,e]=[he(t),he(e)],Ti(r)==="object"&&([r,i]=[.5,r]),qo(t,e,i)(r)}function Pw(t,e,r={}){let i;Pp(t)&&([i,r]=[t,e],[t,e]=i.rangeArgs.colors);let{maxDeltaE:n,deltaEMethod:a,steps:s=2,maxSteps:o=1e3,...l}=r;i||([t,e]=[he(t),he(e)],i=qo(t,e,l));let c=Ks(t,e),u=n>0?Math.max(s,Math.ceil(c/n)+1):s,p=[];if(o!==void 0&&(u=Math.min(u,o)),u===1)p=[{p:.5,color:i(.5)}];else{let d=1/(u-1);p=Array.from({length:u},(h,g)=>{let y=g*d;return{p:y,color:i(y)}})}if(n>0){let d=p.reduce((h,g,y)=>{if(y===0)return 0;let x=Ks(g.color,p[y-1].color,a);return Math.max(h,x)},0);for(;d>n;){d=0;for(let h=1;h<p.length&&p.length<o;h++){let g=p[h-1],y=p[h],x=(y.p+g.p)/2,m=i(x);d=Math.max(d,Ks(m,g.color),Ks(m,y.color)),p.splice(h,0,{p:x,color:i(x)}),h++}}}return p=p.map(d=>d.color),p}function qo(t,e,r={}){if(Pp(t)){let[l,c]=[t,e];return qo(...l.rangeArgs.colors,{...l.rangeArgs.options,...c})}let{space:i,outputSpace:n,progression:a,premultiplied:s}=r;t=he(t),e=he(e),t=Ia(t),e=Ia(e);let o={colors:[t,e],options:r};if(i?i=K.get(i):i=K.registry[Jt.interpolationSpace]||t.space,n=n?K.get(n):i,t=Fe(t,i),e=Fe(e,i),t=Pi(t),e=Pi(e),i.coords.h&&i.coords.h.type==="angle"){let l=r.hue=r.hue||"shorter",c=[i,"h"],[u,p]=[Zt(t,c),Zt(e,c)];isNaN(u)&&!isNaN(p)?u=p:isNaN(p)&&!isNaN(u)&&(p=u),[u,p]=uS(l,[u,p]),hi(t,c,u),hi(e,c,p)}return s&&(t.coords=t.coords.map(l=>l*t.alpha),e.coords=e.coords.map(l=>l*e.alpha)),Object.assign(l=>{l=a?a(l):l;let c=t.coords.map((d,h)=>{let g=e.coords[h];return fo(d,g,l)}),u=fo(t.alpha,e.alpha,l),p={space:i,coords:c,alpha:u};return s&&(p.coords=p.coords.map(d=>d/u)),n!==i&&(p=Fe(p,n)),p},{rangeArgs:o})}function Pp(t){return Ti(t)==="function"&&!!t.rangeArgs}Jt.interpolationSpace="lab";function $4(t){t.defineFunction("mix",Iw,{returns:"color"}),t.defineFunction("range",qo,{returns:"function<color>"}),t.defineFunction("steps",Pw,{returns:"array<color>"})}var R4=Object.freeze({__proto__:null,isRange:Pp,mix:Iw,range:qo,register:$4,steps:Pw}),$w=new K({id:"hsl",name:"HSL",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},l:{range:[0,100],name:"Lightness"}},base:$a,fromBase:t=>{let e=Math.max(...t),r=Math.min(...t),[i,n,a]=t,[s,o,l]=[NaN,0,(r+e)/2],c=e-r;if(c!==0){switch(o=l===0||l===1?0:(e-l)/Math.min(l,1-l),e){case i:s=(n-a)/c+(n<a?6:0);break;case n:s=(a-i)/c+2;break;case a:s=(i-n)/c+4}s=s*60}return o<0&&(s+=180,o=Math.abs(o)),s>=360&&(s-=360),[s,o*100,l*100]},toBase:t=>{let[e,r,i]=t;e=e%360,e<0&&(e+=360),r/=100,i/=100;function n(a){let s=(a+e/30)%12,o=r*Math.min(i,1-i);return i-o*Math.max(-1,Math.min(s-3,9-s,1))}return[n(0),n(8),n(4)]},formats:{hsl:{coords:["<number> | <angle>","<percentage>","<percentage>"]},hsla:{coords:["<number> | <angle>","<percentage>","<percentage>"],commas:!0,lastAlpha:!0}}}),Rw=new K({id:"hsv",name:"HSV",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},v:{range:[0,100],name:"Value"}},base:$w,fromBase(t){let[e,r,i]=t;r/=100,i/=100;let n=i+r*Math.min(i,1-i);return[e,n===0?0:200*(1-i/n),100*n]},toBase(t){let[e,r,i]=t;r/=100,i/=100;let n=i*(1-r/2);return[e,n===0||n===1?0:(i-n)/Math.min(n,1-n)*100,n*100]},formats:{color:{id:"--hsv",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}}),D4=new K({id:"hwb",name:"HWB",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},w:{range:[0,100],name:"Whiteness"},b:{range:[0,100],name:"Blackness"}},base:Rw,fromBase(t){let[e,r,i]=t;return[e,i*(100-r)/100,100-i]},toBase(t){let[e,r,i]=t;r/=100,i/=100;let n=r+i;if(n>=1){let o=r/n;return[e,0,o*100]}let a=1-i,s=a===0?0:1-r/a;return[e,s*100,a*100]},formats:{hwb:{coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}});const L4=[[.5766690429101305,.1855582379065463,.1882286462349947],[.29734497525053605,.6273635662554661,.07529145849399788],[.02703136138641234,.07068885253582723,.9913375368376388]],O4=[[2.0415879038107465,-.5650069742788596,-.34473135077832956],[-.9692436362808795,1.8759675015077202,.04155505740717557],[.013444280632031142,-.11836239223101838,1.0151749943912054]];var Dw=new jt({id:"a98rgb-linear",cssId:"--a98-rgb-linear",name:"Linear Adobe® 98 RGB compatible",white:"D65",toXYZ_M:L4,fromXYZ_M:O4}),B4=new jt({id:"a98rgb",cssId:"a98-rgb",name:"Adobe® 98 RGB compatible",base:Dw,toBase:t=>t.map(e=>Math.pow(Math.abs(e),563/256)*Math.sign(e)),fromBase:t=>t.map(e=>Math.pow(Math.abs(e),256/563)*Math.sign(e))});const N4=[[.7977666449006423,.13518129740053308,.0313477341283922],[.2880748288194013,.711835234241873,8993693872564e-17],[0,0,.8251046025104602]],U4=[[1.3457868816471583,-.25557208737979464,-.05110186497554526],[-.5446307051249019,1.5082477428451468,.02052744743642139],[0,0,1.2119675456389452]];var Lw=new jt({id:"prophoto-linear",cssId:"--prophoto-rgb-linear",name:"Linear ProPhoto",white:"D50",base:Ep,toXYZ_M:N4,fromXYZ_M:U4});const z4=1/512,H4=16/512;var F4=new jt({id:"prophoto",cssId:"prophoto-rgb",name:"ProPhoto",base:Lw,toBase(t){return t.map(e=>e<H4?e/16:e**1.8)},fromBase(t){return t.map(e=>e>=z4?e**(1/1.8):16*e)}}),q4=new K({id:"oklch",name:"Oklch",coords:{l:{refRange:[0,1],name:"Lightness"},c:{refRange:[0,.4],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},white:"D65",base:Ma,fromBase(t){let[e,r,i]=t,n;const a=2e-4;return Math.abs(r)<a&&Math.abs(i)<a?n=NaN:n=Math.atan2(i,r)*180/Math.PI,[e,Math.sqrt(r**2+i**2),Vr(n)]},toBase(t){let[e,r,i]=t,n,a;return isNaN(i)?(n=0,a=0):(n=r*Math.cos(i*Math.PI/180),a=r*Math.sin(i*Math.PI/180)),[e,n,a]},formats:{oklch:{coords:["<percentage> | <number>","<number> | <percentage>[0,1]","<number> | <angle>"]}}});let Ow=Tt.D65;const j4=216/24389,ym=24389/27,[wm,xm]=du({space:ft,coords:Ow});var Bw=new K({id:"luv",name:"Luv",coords:{l:{refRange:[0,100],name:"Lightness"},u:{refRange:[-215,215]},v:{refRange:[-215,215]}},white:Ow,base:ft,fromBase(t){let e=[Ze(t[0]),Ze(t[1]),Ze(t[2])],r=e[1],[i,n]=du({space:ft,coords:e});if(!Number.isFinite(i)||!Number.isFinite(n))return[0,0,0];let a=r<=j4?ym*r:116*Math.cbrt(r)-16;return[a,13*a*(i-wm),13*a*(n-xm)]},toBase(t){let[e,r,i]=t;if(e===0||Mi(e))return[0,0,0];r=Ze(r),i=Ze(i);let n=r/(13*e)+wm,a=i/(13*e)+xm,s=e<=8?e/ym:Math.pow((e+16)/116,3);return[s*(9*n/(4*a)),s,s*((12-3*n-20*a)/(4*a))]},formats:{color:{id:"--luv",coords:["<number> | <percentage>","<number> | <percentage>[-1,1]","<number> | <percentage>[-1,1]"]}}}),$p=new K({id:"lchuv",name:"LChuv",coords:{l:{refRange:[0,100],name:"Lightness"},c:{refRange:[0,220],name:"Chroma"},h:{refRange:[0,360],type:"angle",name:"Hue"}},base:Bw,fromBase(t){let[e,r,i]=t,n;const a=.02;return Math.abs(r)<a&&Math.abs(i)<a?n=NaN:n=Math.atan2(i,r)*180/Math.PI,[e,Math.sqrt(r**2+i**2),Vr(n)]},toBase(t){let[e,r,i]=t;return r<0&&(r=0),isNaN(i)&&(i=0),[e,r*Math.cos(i*Math.PI/180),r*Math.sin(i*Math.PI/180)]},formats:{color:{id:"--lchuv",coords:["<number> | <percentage>","<number> | <percentage>","<number> | <angle>"]}}});const G4=216/24389,V4=24389/27,_m=it[0][0],km=it[0][1],Ad=it[0][2],Sm=it[1][0],Am=it[1][1],Cd=it[1][2],Cm=it[2][0],Tm=it[2][1],Td=it[2][2];function oa(t,e,r){const i=e/(Math.sin(r)-t*Math.cos(r));return i<0?1/0:i}function wc(t){const e=Math.pow(t+16,3)/1560896,r=e>G4?e:t/V4,i=r*(284517*_m-94839*Ad),n=r*(838422*Ad+769860*km+731718*_m),a=r*(632260*Ad-126452*km),s=r*(284517*Sm-94839*Cd),o=r*(838422*Cd+769860*Am+731718*Sm),l=r*(632260*Cd-126452*Am),c=r*(284517*Cm-94839*Td),u=r*(838422*Td+769860*Tm+731718*Cm),p=r*(632260*Td-126452*Tm);return{r0s:i/a,r0i:n*t/a,r1s:i/(a+126452),r1i:(n-769860)*t/(a+126452),g0s:s/l,g0i:o*t/l,g1s:s/(l+126452),g1i:(o-769860)*t/(l+126452),b0s:c/p,b0i:u*t/p,b1s:c/(p+126452),b1i:(u-769860)*t/(p+126452)}}function Em(t,e){const r=e/360*Math.PI*2,i=oa(t.r0s,t.r0i,r),n=oa(t.r1s,t.r1i,r),a=oa(t.g0s,t.g0i,r),s=oa(t.g1s,t.g1i,r),o=oa(t.b0s,t.b0i,r),l=oa(t.b1s,t.b1i,r);return Math.min(i,n,a,s,o,l)}var W4=new K({id:"hsluv",name:"HSLuv",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},l:{range:[0,100],name:"Lightness"}},base:$p,gamutSpace:$a,fromBase(t){let[e,r,i]=[Ze(t[0]),Ze(t[1]),Ze(t[2])],n;if(e>99.9999999)n=0,e=100;else if(e<1e-8)n=0,e=0;else{let a=wc(e),s=Em(a,i);n=r/s*100}return[i,n,e]},toBase(t){let[e,r,i]=[Ze(t[0]),Ze(t[1]),Ze(t[2])],n;if(i>99.9999999)i=100,n=0;else if(i<1e-8)i=0,n=0;else{let a=wc(i);n=Em(a,e)/100*r}return[i,n,e]},formats:{color:{id:"--hsluv",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}});it[0][0];it[0][1];it[0][2];it[1][0];it[1][1];it[1][2];it[2][0];it[2][1];it[2][2];function la(t,e){return Math.abs(e)/Math.sqrt(Math.pow(t,2)+1)}function Mm(t){let e=la(t.r0s,t.r0i),r=la(t.r1s,t.r1i),i=la(t.g0s,t.g0i),n=la(t.g1s,t.g1i),a=la(t.b0s,t.b0i),s=la(t.b1s,t.b1i);return Math.min(e,r,i,n,a,s)}var K4=new K({id:"hpluv",name:"HPLuv",coords:{h:{refRange:[0,360],type:"angle",name:"Hue"},s:{range:[0,100],name:"Saturation"},l:{range:[0,100],name:"Lightness"}},base:$p,gamutSpace:"self",fromBase(t){let[e,r,i]=[Ze(t[0]),Ze(t[1]),Ze(t[2])],n;if(e>99.9999999)n=0,e=100;else if(e<1e-8)n=0,e=0;else{let a=wc(e),s=Mm(a);n=r/s*100}return[i,n,e]},toBase(t){let[e,r,i]=[Ze(t[0]),Ze(t[1]),Ze(t[2])],n;if(i>99.9999999)i=100,n=0;else if(i<1e-8)i=0,n=0;else{let a=wc(i);n=Mm(a)/100*r}return[i,n,e]},formats:{color:{id:"--hpluv",coords:["<number> | <angle>","<percentage> | <number>","<percentage> | <number>"]}}});const Im=203,Pm=2610/2**14,Y4=2**14/2610,X4=2523/2**5,$m=2**5/2523,Rm=3424/2**12,Dm=2413/2**7,Lm=2392/2**7;var Z4=new jt({id:"rec2100pq",cssId:"rec2100-pq",name:"REC.2100-PQ",base:uu,toBase(t){return t.map(function(e){return(Math.max(e**$m-Rm,0)/(Dm-Lm*e**$m))**Y4*1e4/Im})},fromBase(t){return t.map(function(e){let r=Math.max(e*Im/1e4,0),i=Rm+Dm*r**Pm,n=1+Lm*r**Pm;return(i/n)**X4})}});const Om=.17883277,Bm=.28466892,Nm=.55991073,Ed=3.7743;var Q4=new jt({id:"rec2100hlg",cssId:"rec2100-hlg",name:"REC.2100-HLG",referred:"scene",base:uu,toBase(t){return t.map(function(e){return e<=.5?e**2/3*Ed:(Math.exp((e-Nm)/Om)+Bm)/12*Ed})},fromBase(t){return t.map(function(e){return e/=Ed,e<=1/12?Math.sqrt(3*e):Om*Math.log(12*e-Bm)+Nm})}});const Nw={};Ii.add("chromatic-adaptation-start",t=>{t.options.method&&(t.M=Uw(t.W1,t.W2,t.options.method))});Ii.add("chromatic-adaptation-end",t=>{t.M||(t.M=Uw(t.W1,t.W2,t.options.method))});function hu({id:t,toCone_M:e,fromCone_M:r}){Nw[t]=arguments[0]}function Uw(t,e,r="Bradford"){let i=Nw[r],[n,a,s]=qe(i.toCone_M,t),[o,l,c]=qe(i.toCone_M,e),u=[[o/n,0,0],[0,l/a,0],[0,0,c/s]],p=qe(u,i.toCone_M);return qe(i.fromCone_M,p)}hu({id:"von Kries",toCone_M:[[.40024,.7076,-.08081],[-.2263,1.16532,.0457],[0,0,.91822]],fromCone_M:[[1.8599363874558397,-1.1293816185800916,.21989740959619328],[.3611914362417676,.6388124632850422,-6370596838649899e-21],[0,0,1.0890636230968613]]});hu({id:"Bradford",toCone_M:[[.8951,.2664,-.1614],[-.7502,1.7135,.0367],[.0389,-.0685,1.0296]],fromCone_M:[[.9869929054667121,-.14705425642099013,.15996265166373122],[.4323052697233945,.5183602715367774,.049291228212855594],[-.00852866457517732,.04004282165408486,.96848669578755]]});hu({id:"CAT02",toCone_M:[[.7328,.4296,-.1624],[-.7036,1.6975,.0061],[.003,.0136,.9834]],fromCone_M:[[1.0961238208355142,-.27886900021828726,.18274517938277307],[.4543690419753592,.4735331543074117,.07209780371722911],[-.009627608738429355,-.00569803121611342,1.0153256399545427]]});hu({id:"CAT16",toCone_M:[[.401288,.650173,-.051461],[-.250268,1.204414,.045854],[-.002079,.048952,.953127]],fromCone_M:[[1.862067855087233,-1.0112546305316845,.14918677544445172],[.3875265432361372,.6214474419314753,-.008973985167612521],[-.01584149884933386,-.03412293802851557,1.0499644368778496]]});Object.assign(Tt,{A:[1.0985,1,.35585],C:[.98074,1,1.18232],D55:[.95682,1,.92149],D75:[.94972,1,1.22638],E:[1,1,1],F2:[.99186,1,.67393],F7:[.95041,1,1.08747],F11:[1.00962,1,.6435]});Tt.ACES=[.32168/.33767,1,(1-.32168-.33767)/.33767];const J4=[[.6624541811085053,.13400420645643313,.1561876870049078],[.27222871678091454,.6740817658111484,.05368951740793705],[-.005574649490394108,.004060733528982826,1.0103391003129971]],e6=[[1.6410233796943257,-.32480329418479,-.23642469523761225],[-.6636628587229829,1.6153315916573379,.016756347685530137],[.011721894328375376,-.008284441996237409,.9883948585390215]];var zw=new jt({id:"acescg",cssId:"--acescg",name:"ACEScg",coords:{r:{range:[0,65504],name:"Red"},g:{range:[0,65504],name:"Green"},b:{range:[0,65504],name:"Blue"}},referred:"scene",white:Tt.ACES,toXYZ_M:J4,fromXYZ_M:e6});const _l=2**-16,Md=-.35828683,kl=(Math.log2(65504)+9.72)/17.52;var t6=new jt({id:"acescc",cssId:"--acescc",name:"ACEScc",coords:{r:{range:[Md,kl],name:"Red"},g:{range:[Md,kl],name:"Green"},b:{range:[Md,kl],name:"Blue"}},referred:"scene",base:zw,toBase(t){const e=-.3013698630136986;return t.map(function(r){return r<=e?(2**(r*17.52-9.72)-_l)*2:r<kl?2**(r*17.52-9.72):65504})},fromBase(t){return t.map(function(e){return e<=0?(Math.log2(_l)+9.72)/17.52:e<_l?(Math.log2(_l+e*.5)+9.72)/17.52:(Math.log2(e)+9.72)/17.52})}}),Um=Object.freeze({__proto__:null,A98RGB:B4,A98RGB_Linear:Dw,ACEScc:t6,ACEScg:zw,CAM16_JMh:qS,HCT:mo,HPLuv:K4,HSL:$w,HSLuv:W4,HSV:Rw,HWB:D4,ICTCP:r0,JzCzHz:t0,Jzazbz:fw,LCH:go,LCHuv:$p,Lab:Qt,Lab_D65:a0,Luv:Bw,OKLCH:q4,OKLab:Ma,P3:Tw,P3_Linear:Aw,ProPhoto:F4,ProPhoto_Linear:Lw,REC_2020:Sw,REC_2020_Linear:uu,REC_2100_HLG:Q4,REC_2100_PQ:Z4,XYZ_ABS_D65:Mp,XYZ_D50:Ep,XYZ_D65:ft,sRGB:$a,sRGB_Linear:Cw});let tr=class Ot{constructor(...e){let r;e.length===1&&(r=he(e[0]));let i,n,a;r?(i=r.space||r.spaceId,n=r.coords,a=r.alpha):[i,n,a]=e,Object.defineProperty(this,"space",{value:K.get(i),writable:!1,enumerable:!0,configurable:!0}),this.coords=n?n.slice():[0,0,0],this.alpha=a>1||a===void 0?1:a<0?0:a;for(let s=0;s<this.coords.length;s++)this.coords[s]==="NaN"&&(this.coords[s]=NaN);for(let s in this.space.coords)Object.defineProperty(this,s,{get:()=>this.get(s),set:o=>this.set(s,o)})}get spaceId(){return this.space.id}clone(){return new Ot(this.space,this.coords,this.alpha)}toJSON(){return{spaceId:this.spaceId,coords:this.coords,alpha:this.alpha}}display(...e){let r=a4(this,...e);return r.color=new Ot(r.color),r}static get(e,...r){return e instanceof Ot?e:new Ot(e,...r)}static defineFunction(e,r,i=r){let{instance:n=!0,returns:a}=i,s=function(...o){let l=r(...o);if(a==="color")l=Ot.get(l);else if(a==="function<color>"){let c=l;l=function(...u){let p=c(...u);return Ot.get(p)},Object.assign(l,c)}else a==="array<color>"&&(l=l.map(c=>Ot.get(c)));return l};e in Ot||(Ot[e]=s),n&&(Ot.prototype[e]=function(...o){return s(this,...o)})}static defineFunctions(e){for(let r in e)Ot.defineFunction(r,e[r],e[r])}static extend(e){if(e.register)e.register(Ot);else for(let r in e)Ot.defineFunction(r,e[r])}};tr.defineFunctions({get:Zt,getAll:Fo,set:hi,setAll:Tp,to:Fe,equals:s4,inGamut:An,toGamut:Pi,distance:pw,toString:io});Object.assign(tr,{util:nS,hooks:Ii,WHITES:Tt,Space:K,spaces:K.registry,parse:dw,defaults:Jt});for(let t of Object.keys(Um))K.register(Um[t]);for(let t in K.registry)s0(t,K.registry[t]);Ii.add("colorspace-init-end",t=>{s0(t.id,t),t.aliases?.forEach(e=>{s0(e,t)})});function s0(t,e){let r=t.replace(/-/g,"_");Object.defineProperty(tr.prototype,r,{get(){let i=this.getAll(t);return typeof Proxy>"u"?i:new Proxy(i,{has:(n,a)=>{try{return K.resolveCoord([e,a]),!0}catch{}return Reflect.has(n,a)},get:(n,a,s)=>{if(a&&typeof a!="symbol"&&!(a in n)){let{index:o}=K.resolveCoord([e,a]);if(o>=0)return n[o]}return Reflect.get(n,a,s)},set:(n,a,s,o)=>{if(a&&typeof a!="symbol"&&!(a in n)||a>=0){let{index:l}=K.resolveCoord([e,a]);if(l>=0)return n[l]=s,this.setAll(t,n),!0}return Reflect.set(n,a,s,o)}})},set(i){this.setAll(t,i)},configurable:!0,enumerable:!0})}tr.extend(Pa);tr.extend({deltaE:Ks});Object.assign(tr,{deltaEMethods:Pa});tr.extend(P4);tr.extend({contrast:C4});tr.extend(E4);tr.extend(l4);tr.extend(R4);tr.extend(ac);zo([iw]);zo([ew]);const r6=b("rgb(235,51,51)"),i6=b("rgb(41,98,255)"),n6=b("rgb(43,212,189)"),a6=b("rgb(146,52,234)"),s6=b("rgb(231,176,8)"),o6=b("rgb(249,116,21)"),l6=b("rgb(65,190,82)"),c6=b("rgb(209,205,199)"),zm=jn(r6),Hm=jn(i6),u6=jn(n6),d6=jn(a6),h6=jn(s6),p6=jn(o6),f6=jn(l6),g6=[c6];function jn(t){const e=t.toLch(),r=64,i=137.508;return Array.from({length:r},(n,a)=>{if(a===0)return t;const s=a*i%24-12,o=(e.h+s+360)%360,l=1+.1*Math.sin(a*.7),c=Math.max(10,Math.min(130,e.c*l)),u=18*Math.sin(a*i*(Math.PI/180)),p=Math.max(25,Math.min(80,e.l+u));return b({l:p,c,h:o})})}const Fm=[b("rgb(210,210,100)"),b("rgb(180,210,120)"),b("rgb(170,190,100)"),b("rgb(80,200,120)"),b("rgb(130,200,130)"),b("rgb(140,180,140)"),b("rgb(160,190,160)"),b("rgb(160,180,140)"),b("rgb(100,160,80)"),b("rgb(100,140,110)"),b("rgb(100,180,160)"),b("rgb(130,180,170)"),b("rgb(170,190,180)"),b("rgb(100,130,150)"),b("rgb(120,160,200)"),b("rgb(140,150,180)"),b("rgb(100,210,210)"),b("rgb(140,180,220)"),b("rgb(130,170,190)"),b("rgb(100,180,230)"),b("rgb(80,130,190)"),b("rgb(120,120,190)"),b("rgb(150,110,190)"),b("rgb(160,120,160)"),b("rgb(170,140,190)"),b("rgb(180,130,180)"),b("rgb(190,140,150)"),b("rgb(180,100,230)"),b("rgb(180,160,180)"),b("rgb(170,150,170)"),b("rgb(150,130,150)"),b("rgb(230,180,180)"),b("rgb(210,160,200)"),b("rgb(230,130,180)"),b("rgb(210,100,160)"),b("rgb(190,100,130)"),b("rgb(220,120,120)"),b("rgb(200,130,110)"),b("rgb(230,140,140)"),b("rgb(230,100,100)"),b("rgb(230,150,100)"),b("rgb(210,140,80)"),b("rgb(230,180,80)"),b("rgb(200,160,110)"),b("rgb(190,150,130)"),b("rgb(190,180,160)"),b("rgb(180,170,140)"),b("rgb(200,200,140)"),b("rgb(190,170,100)")],qm=[b("rgb(163,230,53)"),b("rgb(132,204,22)"),b("rgb(16,185,129)"),b("rgb(52,211,153)"),b("rgb(45,212,191)"),b("rgb(74,222,128)"),b("rgb(110,231,183)"),b("rgb(134,239,172)"),b("rgb(151,255,187)"),b("rgb(186,255,201)"),b("rgb(230,250,210)"),b("rgb(34,197,94)"),b("rgb(67,190,84)"),b("rgb(82,183,136)"),b("rgb(48,178,180)"),b("rgb(230,255,250)"),b("rgb(220,240,250)"),b("rgb(233,213,255)"),b("rgb(204,204,255)"),b("rgb(220,220,255)"),b("rgb(202,225,255)"),b("rgb(147,197,253)"),b("rgb(125,211,252)"),b("rgb(99,202,253)"),b("rgb(56,189,248)"),b("rgb(96,165,250)"),b("rgb(59,130,246)"),b("rgb(79,70,229)"),b("rgb(124,58,237)"),b("rgb(147,51,234)"),b("rgb(179,136,255)"),b("rgb(167,139,250)"),b("rgb(217,70,239)"),b("rgb(168,85,247)"),b("rgb(190,92,251)"),b("rgb(192,132,252)"),b("rgb(240,171,252)"),b("rgb(244,114,182)"),b("rgb(236,72,153)"),b("rgb(220,38,38)"),b("rgb(239,68,68)"),b("rgb(235,75,75)"),b("rgb(245,101,101)"),b("rgb(248,113,113)"),b("rgb(251,113,133)"),b("rgb(253,164,175)"),b("rgb(252,165,165)"),b("rgb(255,204,229)"),b("rgb(250,215,225)"),b("rgb(251,235,245)"),b("rgb(240,240,200)"),b("rgb(250,250,210)"),b("rgb(255,240,200)"),b("rgb(255,223,186)"),b("rgb(252,211,77)"),b("rgb(251,191,36)"),b("rgb(234,179,8)"),b("rgb(202,138,4)"),b("rgb(245,158,11)"),b("rgb(251,146,60)"),b("rgb(249,115,22)"),b("rgb(234,88,12)"),b("rgb(133,77,14)")],jm=[b("rgb(150,160,140)"),b("rgb(160,160,150)"),b("rgb(170,170,140)"),b("rgb(170,170,120)"),b("rgb(150,160,120)"),b("rgb(150,170,130)"),b("rgb(150,170,150)"),b("rgb(130,170,130)"),b("rgb(140,160,140)"),b("rgb(120,150,100)"),b("rgb(120,140,120)"),b("rgb(100,170,130)"),b("rgb(120,160,150)"),b("rgb(130,160,150)"),b("rgb(120,170,170)"),b("rgb(120,160,190)"),b("rgb(130,150,170)"),b("rgb(130,150,160)"),b("rgb(140,150,160)"),b("rgb(140,160,170)"),b("rgb(150,160,160)"),b("rgb(100,120,160)"),b("rgb(120,130,140)"),b("rgb(130,130,160)"),b("rgb(140,130,140)"),b("rgb(140,120,160)"),b("rgb(150,130,150)"),b("rgb(150,140,160)"),b("rgb(160,130,160)"),b("rgb(170,150,170)"),b("rgb(160,120,190)"),b("rgb(160,120,130)"),b("rgb(170,120,140)"),b("rgb(170,130,120)"),b("rgb(170,130,130)"),b("rgb(180,140,140)"),b("rgb(190,130,160)"),b("rgb(190,120,120)"),b("rgb(190,140,120)"),b("rgb(190,160,100)"),b("rgb(170,140,100)"),b("rgb(160,140,130)"),b("rgb(170,150,130)"),b("rgb(160,150,120)"),b("rgb(160,150,140)"),b("rgb(160,140,150)"),b("rgb(160,150,160)"),b("rgb(150,140,150)"),b("rgb(180,160,160)")],Gm=[b("rgb(35,0,0)"),b("rgb(45,0,0)"),b("rgb(55,0,0)"),b("rgb(65,0,0)"),b("rgb(75,0,0)"),b("rgb(85,0,0)"),b("rgb(95,0,0)"),b("rgb(105,0,0)"),b("rgb(115,0,0)"),b("rgb(125,0,0)"),b("rgb(135,0,0)"),b("rgb(145,0,0)"),b("rgb(155,0,0)"),b("rgb(165,0,0)"),b("rgb(175,0,0)"),b("rgb(185,0,0)"),b("rgb(195,0,5)"),b("rgb(205,0,10)"),b("rgb(215,0,15)"),b("rgb(225,0,20)"),b("rgb(235,0,25)"),b("rgb(245,0,30)"),b("rgb(255,0,35)"),b("rgb(255,10,45)"),b("rgb(255,20,55)"),b("rgb(255,30,65)"),b("rgb(255,40,75)"),b("rgb(255,50,85)"),b("rgb(255,60,95)"),b("rgb(255,70,105)"),b("rgb(255,80,115)"),b("rgb(255,90,125)"),b("rgb(255,100,135)"),b("rgb(255,110,145)"),b("rgb(255,120,155)"),b("rgb(255,130,165)"),b("rgb(255,140,175)"),b("rgb(255,150,185)"),b("rgb(255,160,195)"),b("rgb(255,170,205)"),b("rgb(255,180,215)"),b("rgb(255,190,225)"),b("rgb(255,200,235)"),b("rgb(0,45,0)"),b("rgb(0,55,0)"),b("rgb(0,65,0)"),b("rgb(0,75,0)"),b("rgb(0,85,0)"),b("rgb(0,95,0)"),b("rgb(0,105,0)"),b("rgb(0,115,0)"),b("rgb(0,125,0)"),b("rgb(0,135,0)"),b("rgb(0,145,0)"),b("rgb(0,155,0)"),b("rgb(0,165,0)"),b("rgb(0,175,0)"),b("rgb(0,185,0)"),b("rgb(0,195,5)"),b("rgb(0,205,10)"),b("rgb(0,215,15)"),b("rgb(0,225,20)"),b("rgb(0,235,25)"),b("rgb(0,245,30)"),b("rgb(0,255,35)"),b("rgb(10,255,45)"),b("rgb(20,255,55)"),b("rgb(30,255,65)"),b("rgb(40,255,75)"),b("rgb(50,255,85)"),b("rgb(60,255,95)"),b("rgb(70,255,105)"),b("rgb(80,255,115)"),b("rgb(90,255,125)"),b("rgb(100,255,135)"),b("rgb(110,255,145)"),b("rgb(120,255,155)"),b("rgb(130,255,165)"),b("rgb(140,255,175)"),b("rgb(150,255,185)"),b("rgb(160,255,195)"),b("rgb(170,255,205)"),b("rgb(180,255,215)"),b("rgb(190,255,225)"),b("rgb(200,255,235)"),b("rgb(0,0,35)"),b("rgb(0,0,45)"),b("rgb(0,0,55)"),b("rgb(0,0,65)"),b("rgb(0,0,75)"),b("rgb(0,0,85)"),b("rgb(0,0,95)"),b("rgb(0,0,105)"),b("rgb(0,0,115)"),b("rgb(0,0,125)"),b("rgb(0,0,135)"),b("rgb(0,0,145)"),b("rgb(0,0,155)"),b("rgb(0,0,165)"),b("rgb(0,0,175)"),b("rgb(0,0,185)"),b("rgb(5,0,195)"),b("rgb(10,0,205)"),b("rgb(15,0,215)"),b("rgb(20,0,225)"),b("rgb(25,0,235)"),b("rgb(30,0,245)"),b("rgb(35,0,255)"),b("rgb(45,10,255)"),b("rgb(55,20,255)"),b("rgb(65,30,255)"),b("rgb(75,40,255)"),b("rgb(85,50,255)"),b("rgb(95,60,255)"),b("rgb(105,70,255)"),b("rgb(115,80,255)"),b("rgb(125,90,255)"),b("rgb(135,100,255)"),b("rgb(145,110,255)"),b("rgb(155,120,255)"),b("rgb(165,130,255)"),b("rgb(175,140,255)"),b("rgb(185,150,255)"),b("rgb(195,160,255)"),b("rgb(205,170,255)"),b("rgb(215,180,255)"),b("rgb(225,190,255)"),b("rgb(235,200,255)"),b("rgb(35,0,35)"),b("rgb(45,0,45)"),b("rgb(55,0,55)"),b("rgb(65,0,65)"),b("rgb(75,0,75)"),b("rgb(85,0,85)"),b("rgb(95,0,95)"),b("rgb(105,0,105)"),b("rgb(115,0,115)"),b("rgb(125,0,125)"),b("rgb(135,0,135)"),b("rgb(145,0,145)"),b("rgb(155,0,155)"),b("rgb(165,0,165)"),b("rgb(175,0,175)"),b("rgb(185,0,185)"),b("rgb(195,5,195)"),b("rgb(205,10,205)"),b("rgb(215,15,215)"),b("rgb(225,20,225)"),b("rgb(235,25,235)"),b("rgb(245,30,245)"),b("rgb(255,35,255)"),b("rgb(255,45,255)"),b("rgb(255,55,255)"),b("rgb(255,65,255)"),b("rgb(255,75,255)"),b("rgb(255,85,255)"),b("rgb(255,95,255)"),b("rgb(255,105,255)"),b("rgb(255,115,255)"),b("rgb(255,125,255)"),b("rgb(255,135,255)"),b("rgb(255,145,255)"),b("rgb(255,155,255)"),b("rgb(255,165,255)"),b("rgb(255,175,255)"),b("rgb(255,185,255)"),b("rgb(255,195,255)"),b("rgb(255,205,255)"),b("rgb(255,215,255)"),b("rgb(0,35,35)"),b("rgb(0,45,45)"),b("rgb(0,55,55)"),b("rgb(0,65,65)"),b("rgb(0,75,75)"),b("rgb(0,85,85)"),b("rgb(0,95,95)"),b("rgb(0,105,105)"),b("rgb(0,115,115)"),b("rgb(0,125,125)"),b("rgb(0,135,135)"),b("rgb(0,145,145)"),b("rgb(0,155,155)"),b("rgb(0,165,165)"),b("rgb(0,175,175)"),b("rgb(0,185,185)"),b("rgb(5,195,195)"),b("rgb(10,205,205)"),b("rgb(15,215,215)"),b("rgb(20,225,225)"),b("rgb(25,235,235)"),b("rgb(30,245,245)"),b("rgb(35,255,255)"),b("rgb(45,255,255)"),b("rgb(55,255,255)"),b("rgb(65,255,255)"),b("rgb(75,255,255)"),b("rgb(85,255,255)"),b("rgb(95,255,255)"),b("rgb(105,255,255)"),b("rgb(115,255,255)"),b("rgb(125,255,255)"),b("rgb(135,255,255)"),b("rgb(145,255,255)"),b("rgb(155,255,255)"),b("rgb(165,255,255)"),b("rgb(175,255,255)"),b("rgb(185,255,255)"),b("rgb(195,255,255)"),b("rgb(205,255,255)"),b("rgb(215,255,255)"),b("rgb(35,35,0)"),b("rgb(45,45,0)"),b("rgb(55,55,0)"),b("rgb(65,65,0)"),b("rgb(75,75,0)"),b("rgb(85,85,0)"),b("rgb(95,95,0)"),b("rgb(105,105,0)"),b("rgb(115,115,0)"),b("rgb(125,125,0)"),b("rgb(135,135,0)"),b("rgb(145,145,0)"),b("rgb(155,155,0)"),b("rgb(165,165,0)"),b("rgb(175,175,0)"),b("rgb(185,185,0)"),b("rgb(195,195,5)"),b("rgb(205,205,10)"),b("rgb(215,215,15)"),b("rgb(225,225,20)"),b("rgb(235,235,25)"),b("rgb(245,245,30)"),b("rgb(255,255,35)"),b("rgb(255,255,45)"),b("rgb(255,255,55)"),b("rgb(255,255,65)"),b("rgb(255,255,75)"),b("rgb(255,255,85)"),b("rgb(255,255,95)"),b("rgb(255,255,105)"),b("rgb(255,255,115)"),b("rgb(255,255,125)"),b("rgb(255,255,135)"),b("rgb(255,255,145)"),b("rgb(255,255,155)"),b("rgb(255,255,165)"),b("rgb(255,255,175)"),b("rgb(255,255,185)"),b("rgb(255,255,195)"),b("rgb(255,255,205)"),b("rgb(255,255,215)"),b("rgb(215,255,200)"),b("rgb(225,255,175)"),b("rgb(240,250,160)"),b("rgb(245,245,175)"),b("rgb(150,200,255)"),b("rgb(160,215,255)"),b("rgb(170,225,255)"),b("rgb(180,235,250)"),b("rgb(190,245,240)"),b("rgb(210,255,245)"),b("rgb(220,255,255)"),b("rgb(230,250,255)"),b("rgb(240,240,255)"),b("rgb(250,230,255)"),b("rgb(170,190,255)"),b("rgb(180,180,255)"),b("rgb(200,170,255)"),b("rgb(190,140,195)"),b("rgb(195,145,200)"),b("rgb(200,150,205)"),b("rgb(205,155,210)"),b("rgb(210,160,215)"),b("rgb(215,165,220)"),b("rgb(220,170,225)"),b("rgb(225,175,230)"),b("rgb(230,180,235)"),b("rgb(235,185,240)"),b("rgb(240,190,245)"),b("rgb(245,195,250)"),b("rgb(250,200,255)"),b("rgb(255,205,255)"),b("rgb(255,210,255)"),b("rgb(255,210,250)"),b("rgb(255,205,245)"),b("rgb(255,215,245)"),b("rgb(220,160,255)"),b("rgb(235,150,255)"),b("rgb(245,160,240)"),b("rgb(255,170,225)"),b("rgb(255,185,215)"),b("rgb(255,195,235)"),b("rgb(255,200,220)"),b("rgb(255,210,230)"),b("rgb(255,220,235)"),b("rgb(255,220,250)"),b("rgb(255,225,255)"),b("rgb(255,230,245)"),b("rgb(255,235,235)"),b("rgb(255,215,195)"),b("rgb(255,225,180)"),b("rgb(255,230,190)"),b("rgb(255,235,200)"),b("rgb(255,245,210)"),b("rgb(255,240,220)")];zo([iw]);zo([ew]);class Sl{constructor(e,r){this.assigned=new Map,this.teamPlayerColors=new Map,this.availableColors=[...e],this.fallbackColors=[...e,...r]}getTeamColorVariations(e){switch(e){case $e.Blue:return Hm;case $e.Red:return zm;case $e.Teal:return u6;case $e.Purple:return d6;case $e.Yellow:return h6;case $e.Orange:return p6;case $e.Green:return f6;case $e.Bot:return g6;case $e.Humans:return Hm;case $e.Nations:return zm;default:return[this.assignColor(e)]}}assignColor(e){if(this.assigned.has(e))return this.assigned.get(e);this.availableColors.length===0&&(this.availableColors=[...this.fallbackColors]);let r=0;if(this.assigned.size===0||this.assigned.size>50)r=new Pn(co(e)).nextInt(0,this.availableColors.length);else{const n=Array.from(this.assigned.values());r=m6(this.availableColors,n)??0}const i=this.availableColors.splice(r,1)[0];return this.assigned.set(e,i),i}assignTeamColor(e){const i=this.getTeamColorVariations(e)[0].toRgb();return i.r=Math.round(i.r),i.g=Math.round(i.g),i.b=Math.round(i.b),b(i)}assignTeamPlayerColor(e,r){if(this.teamPlayerColors.has(r))return this.teamPlayerColors.get(r);const i=this.getTeamColorVariations(e),a=co(r)%i.length,s=i[a];return this.teamPlayerColors.set(r,s),s}}function m6(t,e){if(e.length===0)throw new Error("No assigned colors");const r=e.map(Vm);let i=0,n=0;for(let a=0;a<t.length;a++){const s=t[a],o=b6(Vm(s),r);o>i&&(i=o,n=a)}return n}function b6(t,e){return e.reduce((r,i)=>Math.min(r,v6(t,i)),1/0)}function v6(t,e){return t.deltaE(e,"2000")}function Vm(t){const e=t.toLab();return new tr("lab",[e.l,e.a,e.b])}class Rp{constructor(){this.rand=new Pn(123),this.humanColorAllocator=new Sl(qm,Gm),this.botColorAllocator=new Sl(jm,jm),this.teamColorAllocator=new Sl(qm,Gm),this.nationColorAllocator=new Sl(Fm,Fm),this.background=b("rgb(60,60,60)"),this.shore=b("rgb(204,203,158)"),this.falloutColors=[b("rgb(120,255,71)"),b("rgb(130,255,85)"),b("rgb(110,245,65)"),b("rgb(125,255,75)"),b("rgb(115,250,68)")],this.water=b("rgb(70,132,180)"),this.shorelineWater=b("rgb(100,143,255)"),this._selfColor=b("rgb(0,255,0)"),this._allyColor=b("rgb(255,255,0)"),this._neutralColor=b("rgb(128,128,128)"),this._enemyColor=b("rgb(255,0,0)"),this._spawnHighlightColor=b("rgb(255,213,79)"),this._spawnHighlightSelfColor=b("rgb(255,255,255)"),this._spawnHighlightTeamColor=b("rgb(0,255,0)"),this._spawnHighlightEnemyColor=b("rgb(255,0,0)")}teamColor(e){return this.teamColorAllocator.assignTeamColor(e)}territoryColor(e){const r=e.team();return r!==null?this.teamColorAllocator.assignTeamPlayerColor(r,e.id()):e.type()===ge.Human?this.humanColorAllocator.assignColor(e.id()):e.type()===ge.Bot?this.botColorAllocator.assignColor(e.id()):this.nationColorAllocator.assignColor(e.id())}structureColors(e){const r=e.alpha(.5882352941176471).toLab(),i=this.borderColor(e).toLab();let n=this.contrast(r,i);const a=10,s=50,o=.5;let l=0;const c=5;for(;n<o;){if(l>s){console.warn(`Infinite loop detected during structure color calculation. 
          Light color: ${b(r).toRgbString()}, 
          Dark color: ${b(i).toRgbString()}, 
          Contrast: ${n}`);break}else l>a?r.l=this.clamp(r.l+c):i.l=this.clamp(i.l-c);n=this.contrast(r,i),l++}return{light:b(r),dark:b(i)}}contrast(e,r){return b(e).delta(b(r))}clamp(e,r=0,i=100){return Math.min(Math.max(r,e),i)}borderColor(e){return e.darken(.125)}defendedBorderColors(e){return{light:e.darken(.2),dark:e.darken(.4)}}focusedBorderColor(){return b("rgb(230,230,230)")}textColor(e){return e.type()===ge.Human?"#000000":"#4D4D4D"}terrainColor(e,r){const i=e.magnitude(r);if(e.isShore(r))return this.shore;switch(e.terrainType(r)){case rt.Ocean:case rt.Lake:{const n=this.water.rgba;return e.isShoreline(r)&&e.isWater(r)?this.shorelineWater:b({r:Math.max(n.r-10+(11-Math.min(i,10)),0),g:Math.max(n.g-10+(11-Math.min(i,10)),0),b:Math.max(n.b-10+(11-Math.min(i,10)),0)})}case rt.Plains:return b({r:190,g:220-2*i,b:138});case rt.Highland:return b({r:200+2*i,g:183+2*i,b:138+2*i});case rt.Mountain:return b({r:230+i/2,g:230+i/2,b:230+i/2})}}backgroundColor(){return this.background}falloutColor(){return this.rand.randElement(this.falloutColors)}font(){return"Overpass, sans-serif"}selfColor(){return this._selfColor}allyColor(){return this._allyColor}neutralColor(){return this._neutralColor}enemyColor(){return this._enemyColor}spawnHighlightColor(){return this._spawnHighlightColor}spawnHighlightSelfColor(){return this._spawnHighlightSelfColor}spawnHighlightTeamColor(){return this._spawnHighlightTeamColor}spawnHighlightEnemyColor(){return this._spawnHighlightEnemyColor}}class y6 extends Rp{constructor(){super(...arguments),this.darkShore=b("rgb(134,133,88)"),this.darkWater=b("rgb(14,11,30)"),this.darkShorelineWater=b("rgb(50,50,50)")}terrainColor(e,r){const i=e.magnitude(r);if(e.isShore(r))return this.darkShore;switch(e.terrainType(r)){case rt.Ocean:case rt.Lake:{const n=this.darkWater.rgba;return e.isShoreline(r)&&e.isWater(r)?this.darkShorelineWater:e.magnitude(r)<10?b({r:Math.max(n.r+9-i,0),g:Math.max(n.g+9-i,0),b:Math.max(n.b+9-i,0)}):this.darkWater}case rt.Plains:return b({r:140,g:170-2*i,b:88});case rt.Highland:return b({r:150+2*i,g:133+2*i,b:88+2*i});case rt.Mountain:return b({r:180+i/2,g:180+i/2,b:180+i/2})}}}const w6=15e4,x6=Math.LN2/5e4,_6=q({keys:q({alg:te("EdDSA"),crv:te("Ed25519"),kty:te("OKP"),x:Y()}).array().min(1)});class Dp{turnstileSecretKey(){return wr.TURNSTILE_SECRET_KEY??""}allowedFlares(){}stripePublishableKey(){return wr.STRIPE_PUBLISHABLE_KEY??""}domain(){return wr.DOMAIN??""}subdomain(){return wr.SUBDOMAIN??""}jwtIssuer(){const e=this.jwtAudience();return e==="localhost"?"http://localhost:8787":`https://api.${e}`}async jwkPublicKey(){if(this.publicKey)return this.publicKey;const e=this.jwtIssuer()+"/.well-known/jwks.json";console.log(`Fetching JWKS from ${e}`);const r=await fetch(e),i=_6.safeParse(await r.json());if(!i.success){const n=No(i.error);throw console.error("Error parsing JWKS",n),new Error("Invalid JWKS")}return this.publicKey=i.data.keys[0],this.publicKey}otelEnabled(){return this.env()!==zr.Dev&&!!this.otelEndpoint()&&!!this.otelAuthHeader()}otelEndpoint(){return wr.OTEL_EXPORTER_OTLP_ENDPOINT??""}otelAuthHeader(){return wr.OTEL_AUTH_HEADER??""}gitCommit(){return wr.GIT_COMMIT??""}apiKey(){return wr.API_KEY??""}adminHeader(){return"x-admin-key"}adminToken(){const e=wr.ADMIN_TOKEN;if(!e)throw new Error("ADMIN_TOKEN not set");return e}turnIntervalMs(){return 100}gameCreationRate(){return 60*1e3}workerIndex(e){return co(e)%this.numWorkers()}workerPath(e){return`w${this.workerIndex(e)}`}workerPort(e){return this.workerPortByIndex(this.workerIndex(e))}workerPortByIndex(e){return 3001+e}}class Hw{constructor(e,r,i,n){this._serverConfig=e,this._gameConfig=r,this._userSettings=i,this._isReplay=n,this.pastelTheme=new Rp,this.pastelThemeDark=new y6}stripePublishableKey(){return wr.STRIPE_PUBLISHABLE_KEY??""}isReplay(){return this._isReplay}traitorDefenseDebuff(){return .5}traitorSpeedDebuff(){return .8}traitorDuration(){return 300}spawnImmunityDuration(){return this._gameConfig.spawnImmunityDuration??50}gameConfig(){return this._gameConfig}serverConfig(){return this._serverConfig}userSettings(){if(this._userSettings===null)throw new Error("userSettings is null");return this._userSettings}cityTroopIncrease(){return 25e4}falloutDefenseModifier(e){return 5-e*2}SAMCooldown(){return 75}SiloCooldown(){return 75}defensePostRange(){return 30}defensePostDefenseBonus(){return 5}defensePostSpeedBonus(){return 3}playerTeams(){return this._gameConfig.playerTeams??0}spawnNations(){return!this._gameConfig.disableNations}isUnitDisabled(e){return this._gameConfig.disabledUnits?.includes(e)??!1}bots(){return this._gameConfig.bots}instantBuild(){return this._gameConfig.instantBuild}disableNavMesh(){return this._gameConfig.disableNavMesh??!1}isRandomSpawn(){return this._gameConfig.randomSpawn}infiniteGold(){return this._gameConfig.infiniteGold}donateGold(){return this._gameConfig.donateGold}infiniteTroops(){return this._gameConfig.infiniteTroops}donateTroops(){return this._gameConfig.donateTroops}goldMultiplier(){return this._gameConfig.goldMultiplier??1}startingGold(e){return e.playerType===ge.Bot?0n:BigInt(this._gameConfig.startingGold??0)}trainSpawnRate(e){return(e+10)*18}trainGold(e){const r=this.goldMultiplier();let i;switch(e){case"ally":i=35000n;break;case"team":case"other":i=25000n;break;case"self":i=10000n;break}return BigInt(Math.floor(Number(i)*r))}trainStationMinRange(){return 15}trainStationMaxRange(){return 100}railroadMaxSize(){return 120}tradeShipGold(e,r){const i=this.tradeShipShortRangeDebuff(),n=1e5/(1+Math.exp(-.03*(e-i)))+100*e,a=r-1,s=1+2*(a/(a+5)),o=this.goldMultiplier();return BigInt(Math.floor(n*s*o))}tradeShipSpawnRate(e,r,i){const n=Math.sqrt(this.tradeShipBaseSpawn(e,i)*this.tradeShipPortMultiplier(r));return Math.floor(25/n)}tradeShipBaseSpawn(e,r){if(r<3)return 1;const i=Math.LN2/10;return 1-_g(e,i,55)}tradeShipPortMultiplier(e){return 1/(1+.1*e)}unitInfo(e){switch(e){case C.TransportShip:return{cost:()=>0n,territoryBound:!1};case C.Warship:return{cost:this.costWrapper(r=>Math.min(1e6,(r+1)*25e4),C.Warship),territoryBound:!1,maxHealth:1e3};case C.Shell:return{cost:()=>0n,territoryBound:!1,damage:250};case C.SAMMissile:return{cost:()=>0n,territoryBound:!1};case C.Port:return{cost:this.costWrapper(r=>Math.min(1e6,Math.pow(2,r)*125e3),C.Port,C.Factory),territoryBound:!0,constructionDuration:this.instantBuild()?0:20,upgradable:!0,canBuildTrainStation:!0};case C.AtomBomb:return{cost:this.costWrapper(()=>75e4,C.AtomBomb),territoryBound:!1};case C.HydrogenBomb:return{cost:this.costWrapper(()=>5e6,C.HydrogenBomb),territoryBound:!1};case C.MIRV:return{cost:(r,i)=>i.type()===ge.Human&&this.infiniteGold()?0n:25000000n+r.stats().numMirvsLaunched()*15000000n,territoryBound:!1};case C.MIRVWarhead:return{cost:()=>0n,territoryBound:!1};case C.TradeShip:return{cost:()=>0n,territoryBound:!1};case C.MissileSilo:return{cost:this.costWrapper(()=>1e6,C.MissileSilo),territoryBound:!0,constructionDuration:this.instantBuild()?0:100,upgradable:!0};case C.DefensePost:return{cost:this.costWrapper(r=>Math.min(25e4,(r+1)*5e4),C.DefensePost),territoryBound:!0,constructionDuration:this.instantBuild()?0:50};case C.SAMLauncher:return{cost:this.costWrapper(r=>Math.min(3e6,(r+1)*15e5),C.SAMLauncher),territoryBound:!0,constructionDuration:this.instantBuild()?0:300,upgradable:!0};case C.City:return{cost:this.costWrapper(r=>Math.min(1e6,Math.pow(2,r)*125e3),C.City),territoryBound:!0,constructionDuration:this.instantBuild()?0:20,upgradable:!0,canBuildTrainStation:!0};case C.Factory:return{cost:this.costWrapper(r=>Math.min(1e6,Math.pow(2,r)*125e3),C.Factory,C.Port),territoryBound:!0,constructionDuration:this.instantBuild()?0:20,canBuildTrainStation:!0,experimental:!0,upgradable:!0};case C.Train:return{cost:()=>0n,territoryBound:!1,experimental:!0};default:fl(e)}}costWrapper(e,...r){return(i,n)=>{if(n.type()===ge.Human&&this.infiniteGold())return 0n;const a=r.reduce((s,o)=>s+Math.min(n.unitsOwned(o),n.unitsConstructed(o)),0);return BigInt(e(a))}}defaultDonationAmount(e){return Math.floor(e.troops()/3)}donateCooldown(){return 100}embargoAllCooldown(){return 100}deletionMarkDuration(){return 300}deleteUnitCooldown(){return 300}emojiMessageDuration(){return 50}emojiMessageCooldown(){return 50}targetDuration(){return 100}targetCooldown(){return 150}allianceRequestDuration(){return 200}allianceRequestCooldown(){return 300}allianceDuration(){return 300*10}temporaryEmbargoDuration(){return 300*10}minDistanceBetweenPlayers(){return 30}percentageTilesOwnedToWin(){return this._gameConfig.gameMode===pe.Team?95:80}boatMaxNumber(){return 3}numSpawnPhaseTurns(){return this._gameConfig.gameType===lt.Singleplayer?100:300}numBots(){return this.bots()}theme(){return this.userSettings()?.darkMode()?this.pastelThemeDark:this.pastelTheme}attackLogic(e,r,i,n,a){let s=0,o=0;const l=e.terrainType(a);switch(l){case rt.Plains:s=80,o=16.5;break;case rt.Highland:s=100,o=20;break;case rt.Mountain:s=120,o=25;break;default:throw new Error(`terrain type ${l} not supported`)}if(n.isPlayer()){for(const c of e.nearbyUnits(a,e.config().defensePostRange(),C.DefensePost))if(c.unit.owner()===n){s*=this.defensePostDefenseBonus(),o*=this.defensePostSpeedBonus();break}}if(e.hasFallout(a)){const c=e.numTilesWithFallout()/e.numLandTiles();s*=this.falloutDefenseModifier(c),o*=this.falloutDefenseModifier(c)}if(i.isPlayer()&&n.isPlayer()&&(n.isDisconnected()&&i.isOnSameTeam(n)&&(s=0),i.type()===ge.Human&&n.type()===ge.Bot&&(s*=.8),i.type()===ge.Nation&&n.type()===ge.Bot&&(s*=.8)),n.isPlayer()){const c=1-_g(n.numTilesOwned(),x6,w6),u=.7+.3*c,p=.7+.3*c;let d=1;i.numTilesOwned()>1e5&&(d=Math.sqrt(1e5/i.numTilesOwned())**.7);let h=1;return i.numTilesOwned()>1e5&&(h=(1e5/i.numTilesOwned())**.6),{attackerTroopLoss:Nr(n.troops()/r,.6,2)*s*.8*p*d*(n.isTraitor()?this.traitorDefenseDebuff():1),defenderTroopLoss:n.troops()/n.numTilesOwned(),tilesPerTickUsed:Nr(n.troops()/(5*r),.2,1.5)*o*u*h*(n.isTraitor()?this.traitorSpeedDebuff():1)}}else return{attackerTroopLoss:i.type()===ge.Bot?s/10:s/5,defenderTroopLoss:0,tilesPerTickUsed:Nr(2e3*Math.max(10,o)/r,5,100)}}attackTilesPerTick(e,r,i,n){return i.isPlayer()?Nr(5*e/i.troops()*2,.01,.5)*n*3:n*2}boatAttackAmount(e,r){return Math.floor(e.troops()/5)}warshipShellLifetime(){return 20}radiusPortSpawn(){return 20}tradeShipShortRangeDebuff(){return 300}proximityBonusPortsNb(e){return Nr(e/3,4,e)}attackAmount(e,r){return e.type()===ge.Bot?e.troops()/20:e.troops()/5}startManpower(e){if(e.playerType===ge.Bot)return 1e4;if(e.playerType===ge.Nation)switch(this._gameConfig.difficulty){case Ce.Easy:return 12500;case Ce.Medium:return 25e3;case Ce.Hard:return 28125;case Ce.Impossible:return 31250;default:fl(this._gameConfig.difficulty)}return this.infiniteTroops()?1e6:25e3}maxTroops(e){const r=e.type()===ge.Human&&this.infiniteTroops()?1e9:2*(Math.pow(e.numTilesOwned(),.6)*1e3+5e4)+e.units(C.City).map(i=>i.level()).reduce((i,n)=>i+n,0)*this.cityTroopIncrease();if(e.type()===ge.Bot)return r/3;if(e.type()===ge.Human)return r;switch(this._gameConfig.difficulty){case Ce.Easy:return r*.5;case Ce.Medium:return r*1;case Ce.Hard:return r*1.125;case Ce.Impossible:return r*1.25;default:fl(this._gameConfig.difficulty)}}troopIncreaseRate(e){const r=this.maxTroops(e);let i=10+Math.pow(e.troops(),.73)/4;const n=1-e.troops()/r;if(i*=n,e.type()===ge.Bot&&(i*=.6),e.type()===ge.Nation)switch(this._gameConfig.difficulty){case Ce.Easy:i*=.9;break;case Ce.Medium:i*=1;break;case Ce.Hard:i*=1.025;break;case Ce.Impossible:i*=1.05;break;default:fl(this._gameConfig.difficulty)}return Math.min(e.troops()+i,r)-e.troops()}goldAdditionRate(e){const r=this.goldMultiplier();let i;return e.type()===ge.Bot?i=50n:i=100n,BigInt(Math.floor(Number(i)*r))}nukeMagnitudes(e){switch(e){case C.MIRVWarhead:return{inner:12,outer:18};case C.AtomBomb:return{inner:12,outer:30};case C.HydrogenBomb:return{inner:80,outer:100}}throw new Error(`Unknown nuke type: ${e}`)}nukeAllianceBreakThreshold(){return 100}defaultNukeSpeed(){return 6}defaultNukeTargetableRange(){return 150}defaultSamRange(){return 70}samRange(e){return this.maxSamRange()-480/(e+5)}maxSamRange(){return 150}defaultSamMissileSpeed(){return 12}nukeDeathFactor(e,r,i,n){if(e!==C.MIRVWarhead)return 5*r/Math.max(1,i);const a=.03*n,s=Math.max(0,r-a),o=500,l=s/n;return o*(1-Math.exp(-2*l))}structureMinDist(){return 15}shellLifetime(){return 50}warshipPatrolRange(){return 100}warshipTargettingRange(){return 130}warshipShellAttackRate(){return 20}defensePostShellAttackRate(){return 100}safeFromPiratesCooldownMax(){return 20}defensePostTargettingRange(){return 75}allianceExtensionPromptOffset(){return 300}}class k6 extends Dp{turnstileSiteKey(){return"1x00000000000000000000AA"}turnstileSecretKey(){return"1x0000000000000000000000000000000AA"}adminToken(){return"WARNING_DEV_ADMIN_KEY_DO_NOT_USE_IN_PRODUCTION"}apiKey(){return"WARNING_DEV_API_KEY_DO_NOT_USE_IN_PRODUCTION"}env(){return zr.Dev}gameCreationRate(){return 5*1e3}numWorkers(){return 2}jwtAudience(){return"localhost"}gitCommit(){return"DEV"}domain(){return"localhost"}subdomain(){return""}}class S6 extends Hw{constructor(e,r,i,n){super(e,r,i,n)}}const A6=new class extends Dp{env(){return zr.Preprod}numWorkers(){return 2}turnstileSiteKey(){return"0x4AAAAAAB7QetxHwRCKw-aP"}jwtAudience(){return"openfront.dev"}allowedFlares(){}},C6=new class extends Dp{numWorkers(){return 20}env(){return zr.Prod}jwtAudience(){return"openfront.io"}turnstileSiteKey(){return"0x4AAAAAACFLkaecN39lS8sk"}};let Al=null;async function T6(t,e,r=!1){const i=await Ut();switch(i.env()){case zr.Dev:return new S6(i,t,e,r);case zr.Preprod:case zr.Prod:return console.log("using prod config"),new Hw(i,t,e,r);default:throw Error(`unsupported server configuration: ${wr.GAME_ENV}`)}}async function Ut(){if(Al)return Al;const t=await fetch("/api/env");if(!t.ok)throw new Error(`Failed to fetch server config: ${t.status} ${t.statusText}`);const e=await t.json();return console.log("Server config loaded:",e),Al=E6(e.game_env),Al}function E6(t){switch(t){case"dev":return console.log("using dev server config"),new k6;case"staging":return console.log("using preprod server config"),A6;case"prod":return console.log("using prod server config"),C6;default:throw Error(`unsupported server configuration: ${t}`)}}const Id="territoryPattern";class Gt{get(e,r){const i=localStorage.getItem(e);return i?i==="true"?!0:i==="false"?!1:r:r}set(e,r){localStorage.setItem(e,r?"true":"false")}getFloat(e,r){const i=localStorage.getItem(e);if(!i)return r;const n=parseFloat(i);return isNaN(n)?r:n}setFloat(e,r){localStorage.setItem(e,r.toString())}emojis(){return this.get("settings.emojis",!0)}performanceOverlay(){return this.get("settings.performanceOverlay",!1)}alertFrame(){return this.get("settings.alertFrame",!0)}anonymousNames(){return this.get("settings.anonymousNames",!1)}lobbyIdVisibility(){return this.get("settings.lobbyIdVisibility",!0)}fxLayer(){return this.get("settings.specialEffects",!0)}structureSprites(){return this.get("settings.structureSprites",!0)}darkMode(){return this.get("settings.darkMode",!1)}leftClickOpensMenu(){return this.get("settings.leftClickOpensMenu",!1)}territoryPatterns(){return this.get("settings.territoryPatterns",!0)}cursorCostLabel(){const e=this.get("settings.ghostPricePill",!0);return this.get("settings.cursorCostLabel",e)}focusLocked(){return!1}toggleLeftClickOpenMenu(){this.set("settings.leftClickOpensMenu",!this.leftClickOpensMenu())}toggleFocusLocked(){this.set("settings.focusLocked",!this.focusLocked())}toggleEmojis(){this.set("settings.emojis",!this.emojis())}togglePerformanceOverlay(){this.set("settings.performanceOverlay",!this.performanceOverlay())}toggleAlertFrame(){this.set("settings.alertFrame",!this.alertFrame())}toggleRandomName(){this.set("settings.anonymousNames",!this.anonymousNames())}toggleLobbyIdVisibility(){this.set("settings.lobbyIdVisibility",!this.lobbyIdVisibility())}toggleFxLayer(){this.set("settings.specialEffects",!this.fxLayer())}toggleStructureSprites(){this.set("settings.structureSprites",!this.structureSprites())}toggleCursorCostLabel(){this.set("settings.cursorCostLabel",!this.cursorCostLabel())}toggleTerritoryPatterns(){this.set("settings.territoryPatterns",!this.territoryPatterns())}toggleDarkMode(){this.set("settings.darkMode",!this.darkMode()),this.darkMode()?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")}getDevOnlyPattern(){const e=localStorage.getItem("dev-pattern")??void 0;if(e!==void 0)return{name:"dev-pattern",patternData:e,colorPalette:{name:"dev-color-palette",primaryColor:localStorage.getItem("dev-primary")??"#ffffff",secondaryColor:localStorage.getItem("dev-secondary")??"#000000"}}}getSelectedPatternName(e){if(e===null)return null;let r=localStorage.getItem(Id)??null;if(r===null)return null;const i="pattern:";r.startsWith(i)&&(r=r.slice(i.length));const[n,a]=r.split(":"),s=e.patterns[n];return s===void 0?null:{name:n,patternData:s.pattern,colorPalette:e.colorPalettes?.[a]}}setSelectedPatternName(e){e===void 0?localStorage.removeItem(Id):localStorage.setItem(Id,e)}getSelectedColor(){const e=localStorage.getItem("settings.territoryColor")??void 0;if(e!==void 0)return e}setSelectedColor(e){e===void 0?localStorage.removeItem("settings.territoryColor"):localStorage.setItem("settings.territoryColor",e)}backgroundMusicVolume(){return this.getFloat("settings.backgroundMusicVolume",0)}setBackgroundMusicVolume(e){this.setFloat("settings.backgroundMusicVolume",e)}soundEffectsVolume(){return this.getFloat("settings.soundEffectsVolume",1)}setSoundEffectsVolume(e){this.setFloat("settings.soundEffectsVolume",e)}}const sc=globalThis,Lp=sc.ShadowRoot&&(sc.ShadyCSS===void 0||sc.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,Op=Symbol(),Wm=new WeakMap;let Fw=class{constructor(e,r,i){if(this._$cssResult$=!0,i!==Op)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=r}get styleSheet(){let e=this.o;const r=this.t;if(Lp&&e===void 0){const i=r!==void 0&&r.length===1;i&&(e=Wm.get(r)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),i&&Wm.set(r,e))}return e}toString(){return this.cssText}};const qw=t=>new Fw(typeof t=="string"?t:t+"",void 0,Op),pu=(t,...e)=>{const r=t.length===1?t[0]:e.reduce(((i,n,a)=>i+(s=>{if(s._$cssResult$===!0)return s.cssText;if(typeof s=="number")return s;throw Error("Value passed to 'css' function must be a 'css' function result: "+s+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(n)+t[a+1]),t[0]);return new Fw(r,t,Op)},M6=(t,e)=>{if(Lp)t.adoptedStyleSheets=e.map((r=>r instanceof CSSStyleSheet?r:r.styleSheet));else for(const r of e){const i=document.createElement("style"),n=sc.litNonce;n!==void 0&&i.setAttribute("nonce",n),i.textContent=r.cssText,t.appendChild(i)}},Km=Lp?t=>t:t=>t instanceof CSSStyleSheet?(e=>{let r="";for(const i of e.cssRules)r+=i.cssText;return qw(r)})(t):t;const{is:I6,defineProperty:P6,getOwnPropertyDescriptor:$6,getOwnPropertyNames:R6,getOwnPropertySymbols:D6,getPrototypeOf:L6}=Object,fu=globalThis,Ym=fu.trustedTypes,O6=Ym?Ym.emptyScript:"",B6=fu.reactiveElementPolyfillSupport,no=(t,e)=>t,xc={toAttribute(t,e){switch(e){case Boolean:t=t?O6:null;break;case Object:case Array:t=t==null?t:JSON.stringify(t)}return t},fromAttribute(t,e){let r=t;switch(e){case Boolean:r=t!==null;break;case Number:r=t===null?null:Number(t);break;case Object:case Array:try{r=JSON.parse(t)}catch{r=null}}return r}},Bp=(t,e)=>!I6(t,e),Xm={attribute:!0,type:String,converter:xc,reflect:!1,useDefault:!1,hasChanged:Bp};Symbol.metadata??=Symbol("metadata"),fu.litPropertyMetadata??=new WeakMap;let fa=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,r=Xm){if(r.state&&(r.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((r=Object.create(r)).wrapped=!0),this.elementProperties.set(e,r),!r.noAccessor){const i=Symbol(),n=this.getPropertyDescriptor(e,i,r);n!==void 0&&P6(this.prototype,e,n)}}static getPropertyDescriptor(e,r,i){const{get:n,set:a}=$6(this.prototype,e)??{get(){return this[r]},set(s){this[r]=s}};return{get:n,set(s){const o=n?.call(this);a?.call(this,s),this.requestUpdate(e,o,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??Xm}static _$Ei(){if(this.hasOwnProperty(no("elementProperties")))return;const e=L6(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(no("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(no("properties"))){const r=this.properties,i=[...R6(r),...D6(r)];for(const n of i)this.createProperty(n,r[n])}const e=this[Symbol.metadata];if(e!==null){const r=litPropertyMetadata.get(e);if(r!==void 0)for(const[i,n]of r)this.elementProperties.set(i,n)}this._$Eh=new Map;for(const[r,i]of this.elementProperties){const n=this._$Eu(r,i);n!==void 0&&this._$Eh.set(n,r)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){const r=[];if(Array.isArray(e)){const i=new Set(e.flat(1/0).reverse());for(const n of i)r.unshift(Km(n))}else e!==void 0&&r.push(Km(e));return r}static _$Eu(e,r){const i=r.attribute;return i===!1?void 0:typeof i=="string"?i:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((e=>this.enableUpdating=e)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((e=>e(this)))}addController(e){(this._$EO??=new Set).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){const e=new Map,r=this.constructor.elementProperties;for(const i of r.keys())this.hasOwnProperty(i)&&(e.set(i,this[i]),delete this[i]);e.size>0&&(this._$Ep=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return M6(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((e=>e.hostConnected?.()))}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach((e=>e.hostDisconnected?.()))}attributeChangedCallback(e,r,i){this._$AK(e,i)}_$ET(e,r){const i=this.constructor.elementProperties.get(e),n=this.constructor._$Eu(e,i);if(n!==void 0&&i.reflect===!0){const a=(i.converter?.toAttribute!==void 0?i.converter:xc).toAttribute(r,i.type);this._$Em=e,a==null?this.removeAttribute(n):this.setAttribute(n,a),this._$Em=null}}_$AK(e,r){const i=this.constructor,n=i._$Eh.get(e);if(n!==void 0&&this._$Em!==n){const a=i.getPropertyOptions(n),s=typeof a.converter=="function"?{fromAttribute:a.converter}:a.converter?.fromAttribute!==void 0?a.converter:xc;this._$Em=n,this[n]=s.fromAttribute(r,a.type)??this._$Ej?.get(n)??null,this._$Em=null}}requestUpdate(e,r,i){if(e!==void 0){const n=this.constructor,a=this[e];if(i??=n.getPropertyOptions(e),!((i.hasChanged??Bp)(a,r)||i.useDefault&&i.reflect&&a===this._$Ej?.get(e)&&!this.hasAttribute(n._$Eu(e,i))))return;this.C(e,r,i)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,r,{useDefault:i,reflect:n,wrapped:a},s){i&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,s??r??this[e]),a!==!0||s!==void 0)||(this._$AL.has(e)||(this.hasUpdated||i||(r=void 0),this._$AL.set(e,r)),n===!0&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(r){Promise.reject(r)}const e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[n,a]of this._$Ep)this[n]=a;this._$Ep=void 0}const i=this.constructor.elementProperties;if(i.size>0)for(const[n,a]of i){const{wrapped:s}=a,o=this[n];s!==!0||this._$AL.has(n)||o===void 0||this.C(n,void 0,a,o)}}let e=!1;const r=this._$AL;try{e=this.shouldUpdate(r),e?(this.willUpdate(r),this._$EO?.forEach((i=>i.hostUpdate?.())),this.update(r)):this._$EM()}catch(i){throw e=!1,this._$EM(),i}e&&this._$AE(r)}willUpdate(e){}_$AE(e){this._$EO?.forEach((r=>r.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach((r=>this._$ET(r,this[r]))),this._$EM()}updated(e){}firstUpdated(e){}};fa.elementStyles=[],fa.shadowRootOptions={mode:"open"},fa[no("elementProperties")]=new Map,fa[no("finalized")]=new Map,B6?.({ReactiveElement:fa}),(fu.reactiveElementVersions??=[]).push("2.1.0");const Np=globalThis,_c=Np.trustedTypes,Zm=_c?_c.createPolicy("lit-html",{createHTML:t=>t}):void 0,jw="$lit$",Ai=`lit$${Math.random().toFixed(9).slice(2)}$`,Gw="?"+Ai,N6=`<${Gw}>`,$n=document,bo=()=>$n.createComment(""),vo=t=>t===null||typeof t!="object"&&typeof t!="function",Up=Array.isArray,U6=t=>Up(t)||typeof t?.[Symbol.iterator]=="function",Pd=`[ 	
\f\r]`,ws=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Qm=/-->/g,Jm=/>/g,Ji=RegExp(`>|${Pd}(?:([^\\s"'>=/]+)(${Pd}*=${Pd}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),eb=/'/g,tb=/"/g,Vw=/^(?:script|style|textarea|title)$/i,z6=t=>(e,...r)=>({_$litType$:t,strings:e,values:r}),v=z6(1),Fr=Symbol.for("lit-noChange"),Ie=Symbol.for("lit-nothing"),rb=new WeakMap,bn=$n.createTreeWalker($n,129);function Ww(t,e){if(!Up(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return Zm!==void 0?Zm.createHTML(e):e}const H6=(t,e)=>{const r=t.length-1,i=[];let n,a=e===2?"<svg>":e===3?"<math>":"",s=ws;for(let o=0;o<r;o++){const l=t[o];let c,u,p=-1,d=0;for(;d<l.length&&(s.lastIndex=d,u=s.exec(l),u!==null);)d=s.lastIndex,s===ws?u[1]==="!--"?s=Qm:u[1]!==void 0?s=Jm:u[2]!==void 0?(Vw.test(u[2])&&(n=RegExp("</"+u[2],"g")),s=Ji):u[3]!==void 0&&(s=Ji):s===Ji?u[0]===">"?(s=n??ws,p=-1):u[1]===void 0?p=-2:(p=s.lastIndex-u[2].length,c=u[1],s=u[3]===void 0?Ji:u[3]==='"'?tb:eb):s===tb||s===eb?s=Ji:s===Qm||s===Jm?s=ws:(s=Ji,n=void 0);const h=s===Ji&&t[o+1].startsWith("/>")?" ":"";a+=s===ws?l+N6:p>=0?(i.push(c),l.slice(0,p)+jw+l.slice(p)+Ai+h):l+Ai+(p===-2?o:h)}return[Ww(t,a+(t[r]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),i]};let o0=class Kw{constructor({strings:e,_$litType$:r},i){let n;this.parts=[];let a=0,s=0;const o=e.length-1,l=this.parts,[c,u]=H6(e,r);if(this.el=Kw.createElement(c,i),bn.currentNode=this.el.content,r===2||r===3){const p=this.el.content.firstChild;p.replaceWith(...p.childNodes)}for(;(n=bn.nextNode())!==null&&l.length<o;){if(n.nodeType===1){if(n.hasAttributes())for(const p of n.getAttributeNames())if(p.endsWith(jw)){const d=u[s++],h=n.getAttribute(p).split(Ai),g=/([.?@])?(.*)/.exec(d);l.push({type:1,index:a,name:g[2],strings:h,ctor:g[1]==="."?q6:g[1]==="?"?j6:g[1]==="@"?G6:mu}),n.removeAttribute(p)}else p.startsWith(Ai)&&(l.push({type:6,index:a}),n.removeAttribute(p));if(Vw.test(n.tagName)){const p=n.textContent.split(Ai),d=p.length-1;if(d>0){n.textContent=_c?_c.emptyScript:"";for(let h=0;h<d;h++)n.append(p[h],bo()),bn.nextNode(),l.push({type:2,index:++a});n.append(p[d],bo())}}}else if(n.nodeType===8)if(n.data===Gw)l.push({type:2,index:a});else{let p=-1;for(;(p=n.data.indexOf(Ai,p+1))!==-1;)l.push({type:7,index:a}),p+=Ai.length-1}a++}}static createElement(e,r){const i=$n.createElement("template");return i.innerHTML=e,i}};function Ra(t,e,r=t,i){if(e===Fr)return e;let n=i!==void 0?r._$Co?.[i]:r._$Cl;const a=vo(e)?void 0:e._$litDirective$;return n?.constructor!==a&&(n?._$AO?.(!1),a===void 0?n=void 0:(n=new a(t),n._$AT(t,r,i)),i!==void 0?(r._$Co??=[])[i]=n:r._$Cl=n),n!==void 0&&(e=Ra(t,n._$AS(t,e.values),n,i)),e}let F6=class{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){const{el:{content:r},parts:i}=this._$AD,n=(e?.creationScope??$n).importNode(r,!0);bn.currentNode=n;let a=bn.nextNode(),s=0,o=0,l=i[0];for(;l!==void 0;){if(s===l.index){let c;l.type===2?c=new gu(a,a.nextSibling,this,e):l.type===1?c=new l.ctor(a,l.name,l.strings,this,e):l.type===6&&(c=new V6(a,this,e)),this._$AV.push(c),l=i[++o]}s!==l?.index&&(a=bn.nextNode(),s++)}return bn.currentNode=$n,n}p(e){let r=0;for(const i of this._$AV)i!==void 0&&(i.strings!==void 0?(i._$AI(e,i,r),r+=i.strings.length-2):i._$AI(e[r])),r++}},gu=class Yw{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,r,i,n){this.type=2,this._$AH=Ie,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=i,this.options=n,this._$Cv=n?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&e?.nodeType===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=Ra(this,e,r),vo(e)?e===Ie||e==null||e===""?(this._$AH!==Ie&&this._$AR(),this._$AH=Ie):e!==this._$AH&&e!==Fr&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):U6(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==Ie&&vo(this._$AH)?this._$AA.nextSibling.data=e:this.T($n.createTextNode(e)),this._$AH=e}$(e){const{values:r,_$litType$:i}=e,n=typeof i=="number"?this._$AC(e):(i.el===void 0&&(i.el=o0.createElement(Ww(i.h,i.h[0]),this.options)),i);if(this._$AH?._$AD===n)this._$AH.p(r);else{const a=new F6(n,this),s=a.u(this.options);a.p(r),this.T(s),this._$AH=a}}_$AC(e){let r=rb.get(e.strings);return r===void 0&&rb.set(e.strings,r=new o0(e)),r}k(e){Up(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let i,n=0;for(const a of e)n===r.length?r.push(i=new Yw(this.O(bo()),this.O(bo()),this,this.options)):i=r[n],i._$AI(a),n++;n<r.length&&(this._$AR(i&&i._$AB.nextSibling,n),r.length=n)}_$AR(e=this._$AA.nextSibling,r){for(this._$AP?.(!1,!0,r);e&&e!==this._$AB;){const i=e.nextSibling;e.remove(),e=i}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}},mu=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,r,i,n,a){this.type=1,this._$AH=Ie,this._$AN=void 0,this.element=e,this.name=r,this._$AM=n,this.options=a,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=Ie}_$AI(e,r=this,i,n){const a=this.strings;let s=!1;if(a===void 0)e=Ra(this,e,r,0),s=!vo(e)||e!==this._$AH&&e!==Fr,s&&(this._$AH=e);else{const o=e;let l,c;for(e=a[0],l=0;l<a.length-1;l++)c=Ra(this,o[i+l],r,l),c===Fr&&(c=this._$AH[l]),s||=!vo(c)||c!==this._$AH[l],c===Ie?e=Ie:e!==Ie&&(e+=(c??"")+a[l+1]),this._$AH[l]=c}s&&!n&&this.j(e)}j(e){e===Ie?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}},q6=class extends mu{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Ie?void 0:e}},j6=class extends mu{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==Ie)}},G6=class extends mu{constructor(e,r,i,n,a){super(e,r,i,n,a),this.type=5}_$AI(e,r=this){if((e=Ra(this,e,r,0)??Ie)===Fr)return;const i=this._$AH,n=e===Ie&&i!==Ie||e.capture!==i.capture||e.once!==i.once||e.passive!==i.passive,a=e!==Ie&&(i===Ie||n);n&&this.element.removeEventListener(this.name,this,i),a&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}},V6=class{constructor(e,r,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){Ra(this,e)}};const W6={I:gu},K6=Np.litHtmlPolyfillSupport;K6?.(o0,gu),(Np.litHtmlVersions??=[]).push("3.3.0");const Y6=(t,e,r)=>{const i=r?.renderBefore??e;let n=i._$litPart$;if(n===void 0){const a=r?.renderBefore??null;i._$litPart$=n=new gu(e.insertBefore(bo(),a),a,void 0,r??{})}return n._$AI(t),n};const zp=globalThis;let V=class extends fa{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const r=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Y6(r,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return Fr}};V._$litElement$=!0,V.finalized=!0,zp.litElementHydrateSupport?.({LitElement:V});const X6=zp.litElementPolyfillSupport;X6?.({LitElement:V});(zp.litElementVersions??=[]).push("4.2.0");const F=t=>(e,r)=>{r!==void 0?r.addInitializer((()=>{customElements.define(t,e)})):customElements.define(t,e)};const Z6={attribute:!0,type:String,converter:xc,reflect:!1,hasChanged:Bp},Q6=(t=Z6,e,r)=>{const{kind:i,metadata:n}=r;let a=globalThis.litPropertyMetadata.get(n);if(a===void 0&&globalThis.litPropertyMetadata.set(n,a=new Map),i==="setter"&&((t=Object.create(t)).wrapped=!0),a.set(r.name,t),i==="accessor"){const{name:s}=r;return{set(o){const l=e.get.call(this);e.set.call(this,o),this.requestUpdate(s,l,t)},init(o){return o!==void 0&&this.C(s,void 0,t,o),o}}}if(i==="setter"){const{name:s}=r;return function(o){const l=this[s];e.call(this,o),this.requestUpdate(s,l,t)}}throw Error("Unsupported decorator location: "+i)};function L(t){return(e,r)=>typeof r=="object"?Q6(t,e,r):((i,n,a)=>{const s=n.hasOwnProperty(a);return n.constructor.createProperty(a,i),s?Object.getOwnPropertyDescriptor(n,a):void 0})(t,e,r)}function M(t){return L({...t,state:!0,attribute:!1})}const J6=(t,e,r)=>(r.configurable=!0,r.enumerable=!0,Reflect.decorate&&typeof e!="object"&&Object.defineProperty(t,e,r),r);function Vt(t,e){return(r,i,n)=>{const a=s=>s.renderRoot?.querySelector(t)??null;return J6(r,i,{get(){return a(this)}})}}function l0(t){const e=Uo(t),r=Array.from(e).map(i=>i.toString(16).padStart(2,"0")).join("");return[r.slice(0,8),r.slice(8,12),r.slice(12,16),r.slice(16,20),r.slice(20)].join("-")}q({token:Y()});const eA=q({jti:Y(),sub:Y().refine(t=>!!l0(t),{message:"Invalid base64-encoded UUID"}).transform(t=>{const e=l0(t);if(!e)throw new Error("Invalid base64 UUID");return e}),iat:Q(),iss:Y(),aud:Y(),exp:Q()}),Hp=q({id:Y(),avatar:Y().nullable(),username:Y(),global_name:Y().nullable(),discriminator:Y()}),tA=q({mapName:Be(Ne),difficulty:Be(Ce)}),rA=q({user:q({discord:Hp.optional(),email:Y().optional()}),player:q({publicId:Y(),roles:Y().array().optional(),flares:Y().array().optional(),achievements:lo(q({type:te("singleplayer-map"),data:lo(tA)})).optional(),leaderboard:q({oneVone:q({elo:Q().optional()}).optional()}).optional()})}),iA=q({wins:_a,losses:_a,total:_a,stats:mp}),nA=xa(Be(lt),xa(Be(pe),xa(Be(Ce),iA))),aA=q({gameId:Y(),start:gc(),mode:Be(pe),type:Be(lt),map:Be(Ne),difficulty:Be(Ce),clientId:Y().optional()}),sA=q({createdAt:gc(),user:Hp.optional(),games:aA.array(),stats:nA}),oA=q({clanTag:Y(),games:Q(),wins:Q(),losses:Q(),playerSessions:Q(),weightedWins:Q(),weightedLosses:Q(),weightedWLRatio:Q()}),lA=q({start:gc(),end:gc(),clans:oA.array()}),cA=q({rank:Q(),playerId:Y(),username:Y(),clanTag:Y().optional(),flag:Y().optional(),elo:Q(),games:Q(),wins:Q(),losses:Q(),winRate:Q()});q({players:cA.array()});const uA=q({rank:Q(),elo:Q(),peakElo:Q().nullable(),wins:Q(),losses:Q(),total:Q(),public_id:Y(),user:Hp.nullable().optional(),username:Y(),clanTag:Y().nullable().optional()}),dA=q({"1v1":uA.array()});var c0=function(t,e){return c0=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])},c0(t,e)};function bu(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");c0(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var Te=function(){return Te=Object.assign||function(e){for(var r,i=1,n=arguments.length;i<n;i++){r=arguments[i];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Te.apply(this,arguments)};function hA(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]]);return r}function $d(t,e,r){if(r||arguments.length===2)for(var i=0,n=e.length,a;i<n;i++)(a||!(i in e))&&(a||(a=Array.prototype.slice.call(e,0,i)),a[i]=e[i]);return t.concat(a||Array.prototype.slice.call(e))}function Rd(t,e){var r=e&&e.cache?e.cache:yA,i=e&&e.serializer?e.serializer:bA,n=e&&e.strategy?e.strategy:gA;return n(t,{cache:r,serializer:i})}function pA(t){return t==null||typeof t=="number"||typeof t=="boolean"}function fA(t,e,r,i){var n=pA(i)?i:r(i),a=e.get(n);return typeof a>"u"&&(a=t.call(this,i),e.set(n,a)),a}function Xw(t,e,r){var i=Array.prototype.slice.call(arguments,3),n=r(i),a=e.get(n);return typeof a>"u"&&(a=t.apply(this,i),e.set(n,a)),a}function Zw(t,e,r,i,n){return r.bind(e,t,i,n)}function gA(t,e){var r=t.length===1?fA:Xw;return Zw(t,this,r,e.cache.create(),e.serializer)}function mA(t,e){return Zw(t,this,Xw,e.cache.create(),e.serializer)}var bA=function(){return JSON.stringify(arguments)},vA=(function(){function t(){this.cache=Object.create(null)}return t.prototype.get=function(e){return this.cache[e]},t.prototype.set=function(e,r){this.cache[e]=r},t})(),yA={create:function(){return new vA}},Dd={variadic:mA},xe;(function(t){t[t.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",t[t.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",t[t.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",t[t.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",t[t.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",t[t.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",t[t.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",t[t.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",t[t.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",t[t.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",t[t.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",t[t.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",t[t.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",t[t.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",t[t.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",t[t.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",t[t.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",t[t.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",t[t.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",t[t.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",t[t.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",t[t.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",t[t.INVALID_TAG=23]="INVALID_TAG",t[t.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",t[t.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",t[t.UNCLOSED_TAG=27]="UNCLOSED_TAG"})(xe||(xe={}));var He;(function(t){t[t.literal=0]="literal",t[t.argument=1]="argument",t[t.number=2]="number",t[t.date=3]="date",t[t.time=4]="time",t[t.select=5]="select",t[t.plural=6]="plural",t[t.pound=7]="pound",t[t.tag=8]="tag"})(He||(He={}));var Da;(function(t){t[t.number=0]="number",t[t.dateTime=1]="dateTime"})(Da||(Da={}));function ib(t){return t.type===He.literal}function wA(t){return t.type===He.argument}function Qw(t){return t.type===He.number}function Jw(t){return t.type===He.date}function e2(t){return t.type===He.time}function t2(t){return t.type===He.select}function r2(t){return t.type===He.plural}function xA(t){return t.type===He.pound}function i2(t){return t.type===He.tag}function n2(t){return!!(t&&typeof t=="object"&&t.type===Da.number)}function u0(t){return!!(t&&typeof t=="object"&&t.type===Da.dateTime)}var a2=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,_A=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function kA(t){var e={};return t.replace(_A,function(r){var i=r.length;switch(r[0]){case"G":e.era=i===4?"long":i===5?"narrow":"short";break;case"y":e.year=i===2?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":e.month=["numeric","2-digit","short","long","narrow"][i-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":e.day=["numeric","2-digit"][i-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":e.weekday=i===4?"long":i===5?"narrow":"short";break;case"e":if(i<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][i-4];break;case"c":if(i<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][i-4];break;case"a":e.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":e.hourCycle="h12",e.hour=["numeric","2-digit"][i-1];break;case"H":e.hourCycle="h23",e.hour=["numeric","2-digit"][i-1];break;case"K":e.hourCycle="h11",e.hour=["numeric","2-digit"][i-1];break;case"k":e.hourCycle="h24",e.hour=["numeric","2-digit"][i-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":e.minute=["numeric","2-digit"][i-1];break;case"s":e.second=["numeric","2-digit"][i-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":e.timeZoneName=i<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""}),e}var SA=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function AA(t){if(t.length===0)throw new Error("Number skeleton cannot be empty");for(var e=t.split(SA).filter(function(d){return d.length>0}),r=[],i=0,n=e;i<n.length;i++){var a=n[i],s=a.split("/");if(s.length===0)throw new Error("Invalid number skeleton");for(var o=s[0],l=s.slice(1),c=0,u=l;c<u.length;c++){var p=u[c];if(p.length===0)throw new Error("Invalid number skeleton")}r.push({stem:o,options:l})}return r}function CA(t){return t.replace(/^(.*?)-/,"")}var nb=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,s2=/^(@+)?(\+|#+)?[rs]?$/g,TA=/(\*)(0+)|(#+)(0+)|(0+)/g,o2=/^(0+)$/;function ab(t){var e={};return t[t.length-1]==="r"?e.roundingPriority="morePrecision":t[t.length-1]==="s"&&(e.roundingPriority="lessPrecision"),t.replace(s2,function(r,i,n){return typeof n!="string"?(e.minimumSignificantDigits=i.length,e.maximumSignificantDigits=i.length):n==="+"?e.minimumSignificantDigits=i.length:i[0]==="#"?e.maximumSignificantDigits=i.length:(e.minimumSignificantDigits=i.length,e.maximumSignificantDigits=i.length+(typeof n=="string"?n.length:0)),""}),e}function l2(t){switch(t){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function EA(t){var e;if(t[0]==="E"&&t[1]==="E"?(e={notation:"engineering"},t=t.slice(2)):t[0]==="E"&&(e={notation:"scientific"},t=t.slice(1)),e){var r=t.slice(0,2);if(r==="+!"?(e.signDisplay="always",t=t.slice(2)):r==="+?"&&(e.signDisplay="exceptZero",t=t.slice(2)),!o2.test(t))throw new Error("Malformed concise eng/scientific notation");e.minimumIntegerDigits=t.length}return e}function sb(t){var e={},r=l2(t);return r||e}function MA(t){for(var e={},r=0,i=t;r<i.length;r++){var n=i[r];switch(n.stem){case"percent":case"%":e.style="percent";continue;case"%x100":e.style="percent",e.scale=100;continue;case"currency":e.style="currency",e.currency=n.options[0];continue;case"group-off":case",_":e.useGrouping=!1;continue;case"precision-integer":case".":e.maximumFractionDigits=0;continue;case"measure-unit":case"unit":e.style="unit",e.unit=CA(n.options[0]);continue;case"compact-short":case"K":e.notation="compact",e.compactDisplay="short";continue;case"compact-long":case"KK":e.notation="compact",e.compactDisplay="long";continue;case"scientific":e=Te(Te(Te({},e),{notation:"scientific"}),n.options.reduce(function(l,c){return Te(Te({},l),sb(c))},{}));continue;case"engineering":e=Te(Te(Te({},e),{notation:"engineering"}),n.options.reduce(function(l,c){return Te(Te({},l),sb(c))},{}));continue;case"notation-simple":e.notation="standard";continue;case"unit-width-narrow":e.currencyDisplay="narrowSymbol",e.unitDisplay="narrow";continue;case"unit-width-short":e.currencyDisplay="code",e.unitDisplay="short";continue;case"unit-width-full-name":e.currencyDisplay="name",e.unitDisplay="long";continue;case"unit-width-iso-code":e.currencyDisplay="symbol";continue;case"scale":e.scale=parseFloat(n.options[0]);continue;case"rounding-mode-floor":e.roundingMode="floor";continue;case"rounding-mode-ceiling":e.roundingMode="ceil";continue;case"rounding-mode-down":e.roundingMode="trunc";continue;case"rounding-mode-up":e.roundingMode="expand";continue;case"rounding-mode-half-even":e.roundingMode="halfEven";continue;case"rounding-mode-half-down":e.roundingMode="halfTrunc";continue;case"rounding-mode-half-up":e.roundingMode="halfExpand";continue;case"integer-width":if(n.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");n.options[0].replace(TA,function(l,c,u,p,d,h){if(c)e.minimumIntegerDigits=u.length;else{if(p&&d)throw new Error("We currently do not support maximum integer digits");if(h)throw new Error("We currently do not support exact integer digits")}return""});continue}if(o2.test(n.stem)){e.minimumIntegerDigits=n.stem.length;continue}if(nb.test(n.stem)){if(n.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");n.stem.replace(nb,function(l,c,u,p,d,h){return u==="*"?e.minimumFractionDigits=c.length:p&&p[0]==="#"?e.maximumFractionDigits=p.length:d&&h?(e.minimumFractionDigits=d.length,e.maximumFractionDigits=d.length+h.length):(e.minimumFractionDigits=c.length,e.maximumFractionDigits=c.length),""});var a=n.options[0];a==="w"?e=Te(Te({},e),{trailingZeroDisplay:"stripIfInteger"}):a&&(e=Te(Te({},e),ab(a)));continue}if(s2.test(n.stem)){e=Te(Te({},e),ab(n.stem));continue}var s=l2(n.stem);s&&(e=Te(Te({},e),s));var o=EA(n.stem);o&&(e=Te(Te({},e),o))}return e}var Cl={"001":["H","h"],419:["h","H","hB","hb"],AC:["H","h","hb","hB"],AD:["H","hB"],AE:["h","hB","hb","H"],AF:["H","hb","hB","h"],AG:["h","hb","H","hB"],AI:["H","h","hb","hB"],AL:["h","H","hB"],AM:["H","hB"],AO:["H","hB"],AR:["h","H","hB","hb"],AS:["h","H"],AT:["H","hB"],AU:["h","hb","H","hB"],AW:["H","hB"],AX:["H"],AZ:["H","hB","h"],BA:["H","hB","h"],BB:["h","hb","H","hB"],BD:["h","hB","H"],BE:["H","hB"],BF:["H","hB"],BG:["H","hB","h"],BH:["h","hB","hb","H"],BI:["H","h"],BJ:["H","hB"],BL:["H","hB"],BM:["h","hb","H","hB"],BN:["hb","hB","h","H"],BO:["h","H","hB","hb"],BQ:["H"],BR:["H","hB"],BS:["h","hb","H","hB"],BT:["h","H"],BW:["H","h","hb","hB"],BY:["H","h"],BZ:["H","h","hb","hB"],CA:["h","hb","H","hB"],CC:["H","h","hb","hB"],CD:["hB","H"],CF:["H","h","hB"],CG:["H","hB"],CH:["H","hB","h"],CI:["H","hB"],CK:["H","h","hb","hB"],CL:["h","H","hB","hb"],CM:["H","h","hB"],CN:["H","hB","hb","h"],CO:["h","H","hB","hb"],CP:["H"],CR:["h","H","hB","hb"],CU:["h","H","hB","hb"],CV:["H","hB"],CW:["H","hB"],CX:["H","h","hb","hB"],CY:["h","H","hb","hB"],CZ:["H"],DE:["H","hB"],DG:["H","h","hb","hB"],DJ:["h","H"],DK:["H"],DM:["h","hb","H","hB"],DO:["h","H","hB","hb"],DZ:["h","hB","hb","H"],EA:["H","h","hB","hb"],EC:["h","H","hB","hb"],EE:["H","hB"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],ER:["h","H"],ES:["H","hB","h","hb"],ET:["hB","hb","h","H"],FI:["H"],FJ:["h","hb","H","hB"],FK:["H","h","hb","hB"],FM:["h","hb","H","hB"],FO:["H","h"],FR:["H","hB"],GA:["H","hB"],GB:["H","h","hb","hB"],GD:["h","hb","H","hB"],GE:["H","hB","h"],GF:["H","hB"],GG:["H","h","hb","hB"],GH:["h","H"],GI:["H","h","hb","hB"],GL:["H","h"],GM:["h","hb","H","hB"],GN:["H","hB"],GP:["H","hB"],GQ:["H","hB","h","hb"],GR:["h","H","hb","hB"],GT:["h","H","hB","hb"],GU:["h","hb","H","hB"],GW:["H","hB"],GY:["h","hb","H","hB"],HK:["h","hB","hb","H"],HN:["h","H","hB","hb"],HR:["H","hB"],HU:["H","h"],IC:["H","h","hB","hb"],ID:["H"],IE:["H","h","hb","hB"],IL:["H","hB"],IM:["H","h","hb","hB"],IN:["h","H"],IO:["H","h","hb","hB"],IQ:["h","hB","hb","H"],IR:["hB","H"],IS:["H"],IT:["H","hB"],JE:["H","h","hb","hB"],JM:["h","hb","H","hB"],JO:["h","hB","hb","H"],JP:["H","K","h"],KE:["hB","hb","H","h"],KG:["H","h","hB","hb"],KH:["hB","h","H","hb"],KI:["h","hb","H","hB"],KM:["H","h","hB","hb"],KN:["h","hb","H","hB"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],KW:["h","hB","hb","H"],KY:["h","hb","H","hB"],KZ:["H","hB"],LA:["H","hb","hB","h"],LB:["h","hB","hb","H"],LC:["h","hb","H","hB"],LI:["H","hB","h"],LK:["H","h","hB","hb"],LR:["h","hb","H","hB"],LS:["h","H"],LT:["H","h","hb","hB"],LU:["H","h","hB"],LV:["H","hB","hb","h"],LY:["h","hB","hb","H"],MA:["H","h","hB","hb"],MC:["H","hB"],MD:["H","hB"],ME:["H","hB","h"],MF:["H","hB"],MG:["H","h"],MH:["h","hb","H","hB"],MK:["H","h","hb","hB"],ML:["H"],MM:["hB","hb","H","h"],MN:["H","h","hb","hB"],MO:["h","hB","hb","H"],MP:["h","hb","H","hB"],MQ:["H","hB"],MR:["h","hB","hb","H"],MS:["H","h","hb","hB"],MT:["H","h"],MU:["H","h"],MV:["H","h"],MW:["h","hb","H","hB"],MX:["h","H","hB","hb"],MY:["hb","hB","h","H"],MZ:["H","hB"],NA:["h","H","hB","hb"],NC:["H","hB"],NE:["H"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NI:["h","H","hB","hb"],NL:["H","hB"],NO:["H","h"],NP:["H","h","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],NZ:["h","hb","H","hB"],OM:["h","hB","hb","H"],PA:["h","H","hB","hb"],PE:["h","H","hB","hb"],PF:["H","h","hB"],PG:["h","H"],PH:["h","hB","hb","H"],PK:["h","hB","H"],PL:["H","h"],PM:["H","hB"],PN:["H","h","hb","hB"],PR:["h","H","hB","hb"],PS:["h","hB","hb","H"],PT:["H","hB"],PW:["h","H"],PY:["h","H","hB","hb"],QA:["h","hB","hb","H"],RE:["H","hB"],RO:["H","hB"],RS:["H","hB","h"],RU:["H"],RW:["H","h"],SA:["h","hB","hb","H"],SB:["h","hb","H","hB"],SC:["H","h","hB"],SD:["h","hB","hb","H"],SE:["H"],SG:["h","hb","H","hB"],SH:["H","h","hb","hB"],SI:["H","hB"],SJ:["H"],SK:["H"],SL:["h","hb","H","hB"],SM:["H","h","hB"],SN:["H","h","hB"],SO:["h","H"],SR:["H","hB"],SS:["h","hb","H","hB"],ST:["H","hB"],SV:["h","H","hB","hb"],SX:["H","h","hb","hB"],SY:["h","hB","hb","H"],SZ:["h","hb","H","hB"],TA:["H","h","hb","hB"],TC:["h","hb","H","hB"],TD:["h","H","hB"],TF:["H","h","hB"],TG:["H","hB"],TH:["H","h"],TJ:["H","h"],TL:["H","hB","hb","h"],TM:["H","h"],TN:["h","hB","hb","H"],TO:["h","H"],TR:["H","hB"],TT:["h","hb","H","hB"],TW:["hB","hb","h","H"],TZ:["hB","hb","H","h"],UA:["H","hB","h"],UG:["hB","hb","H","h"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],UY:["h","H","hB","hb"],UZ:["H","hB","h"],VA:["H","h","hB"],VC:["h","hb","H","hB"],VE:["h","H","hB","hb"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],VN:["H","h"],VU:["h","H"],WF:["H","hB"],WS:["h","H"],XK:["H","hB","h"],YE:["h","hB","hb","H"],YT:["H","hB"],ZA:["H","h","hb","hB"],ZM:["h","hb","H","hB"],ZW:["H","h"],"af-ZA":["H","h","hB","hb"],"ar-001":["h","hB","hb","H"],"ca-ES":["H","h","hB"],"en-001":["h","hb","H","hB"],"en-HK":["h","hb","H","hB"],"en-IL":["H","h","hb","hB"],"en-MY":["h","hb","H","hB"],"es-BR":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"gu-IN":["hB","hb","h","H"],"hi-IN":["hB","h","H"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],"ta-IN":["hB","h","hb","H"],"te-IN":["hB","h","H"],"zu-ZA":["H","hB","hb","h"]};function IA(t,e){for(var r="",i=0;i<t.length;i++){var n=t.charAt(i);if(n==="j"){for(var a=0;i+1<t.length&&t.charAt(i+1)===n;)a++,i++;var s=1+(a&1),o=a<2?1:3+(a>>1),l="a",c=PA(e);for((c=="H"||c=="k")&&(o=0);o-- >0;)r+=l;for(;s-- >0;)r=c+r}else n==="J"?r+="H":r+=n}return r}function PA(t){var e=t.hourCycle;if(e===void 0&&t.hourCycles&&t.hourCycles.length&&(e=t.hourCycles[0]),e)switch(e){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var r=t.language,i;r!=="root"&&(i=t.maximize().region);var n=Cl[i||""]||Cl[r||""]||Cl["".concat(r,"-001")]||Cl["001"];return n[0]}var Ld,$A=new RegExp("^".concat(a2.source,"*")),RA=new RegExp("".concat(a2.source,"*$"));function _e(t,e){return{start:t,end:e}}var DA=!!String.prototype.startsWith&&"_a".startsWith("a",1),LA=!!String.fromCodePoint,OA=!!Object.fromEntries,BA=!!String.prototype.codePointAt,NA=!!String.prototype.trimStart,UA=!!String.prototype.trimEnd,zA=!!Number.isSafeInteger,HA=zA?Number.isSafeInteger:function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t&&Math.abs(t)<=9007199254740991},d0=!0;try{var FA=u2("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");d0=((Ld=FA.exec("a"))===null||Ld===void 0?void 0:Ld[0])==="a"}catch{d0=!1}var ob=DA?function(e,r,i){return e.startsWith(r,i)}:function(e,r,i){return e.slice(i,i+r.length)===r},h0=LA?String.fromCodePoint:function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];for(var i="",n=e.length,a=0,s;n>a;){if(s=e[a++],s>1114111)throw RangeError(s+" is not a valid code point");i+=s<65536?String.fromCharCode(s):String.fromCharCode(((s-=65536)>>10)+55296,s%1024+56320)}return i},lb=OA?Object.fromEntries:function(e){for(var r={},i=0,n=e;i<n.length;i++){var a=n[i],s=a[0],o=a[1];r[s]=o}return r},c2=BA?function(e,r){return e.codePointAt(r)}:function(e,r){var i=e.length;if(!(r<0||r>=i)){var n=e.charCodeAt(r),a;return n<55296||n>56319||r+1===i||(a=e.charCodeAt(r+1))<56320||a>57343?n:(n-55296<<10)+(a-56320)+65536}},qA=NA?function(e){return e.trimStart()}:function(e){return e.replace($A,"")},jA=UA?function(e){return e.trimEnd()}:function(e){return e.replace(RA,"")};function u2(t,e){return new RegExp(t,e)}var p0;if(d0){var cb=u2("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");p0=function(e,r){var i;cb.lastIndex=r;var n=cb.exec(e);return(i=n[1])!==null&&i!==void 0?i:""}}else p0=function(e,r){for(var i=[];;){var n=c2(e,r);if(n===void 0||d2(n)||KA(n))break;i.push(n),r+=n>=65536?2:1}return h0.apply(void 0,i)};var GA=(function(){function t(e,r){r===void 0&&(r={}),this.message=e,this.position={offset:0,line:1,column:1},this.ignoreTag=!!r.ignoreTag,this.locale=r.locale,this.requiresOtherClause=!!r.requiresOtherClause,this.shouldParseSkeletons=!!r.shouldParseSkeletons}return t.prototype.parse=function(){if(this.offset()!==0)throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},t.prototype.parseMessage=function(e,r,i){for(var n=[];!this.isEOF();){var a=this.char();if(a===123){var s=this.parseArgument(e,i);if(s.err)return s;n.push(s.val)}else{if(a===125&&e>0)break;if(a===35&&(r==="plural"||r==="selectordinal")){var o=this.clonePosition();this.bump(),n.push({type:He.pound,location:_e(o,this.clonePosition())})}else if(a===60&&!this.ignoreTag&&this.peek()===47){if(i)break;return this.error(xe.UNMATCHED_CLOSING_TAG,_e(this.clonePosition(),this.clonePosition()))}else if(a===60&&!this.ignoreTag&&f0(this.peek()||0)){var s=this.parseTag(e,r);if(s.err)return s;n.push(s.val)}else{var s=this.parseLiteral(e,r);if(s.err)return s;n.push(s.val)}}}return{val:n,err:null}},t.prototype.parseTag=function(e,r){var i=this.clonePosition();this.bump();var n=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:He.literal,value:"<".concat(n,"/>"),location:_e(i,this.clonePosition())},err:null};if(this.bumpIf(">")){var a=this.parseMessage(e+1,r,!0);if(a.err)return a;var s=a.val,o=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!f0(this.char()))return this.error(xe.INVALID_TAG,_e(o,this.clonePosition()));var l=this.clonePosition(),c=this.parseTagName();return n!==c?this.error(xe.UNMATCHED_CLOSING_TAG,_e(l,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:He.tag,value:n,children:s,location:_e(i,this.clonePosition())},err:null}:this.error(xe.INVALID_TAG,_e(o,this.clonePosition())))}else return this.error(xe.UNCLOSED_TAG,_e(i,this.clonePosition()))}else return this.error(xe.INVALID_TAG,_e(i,this.clonePosition()))},t.prototype.parseTagName=function(){var e=this.offset();for(this.bump();!this.isEOF()&&WA(this.char());)this.bump();return this.message.slice(e,this.offset())},t.prototype.parseLiteral=function(e,r){for(var i=this.clonePosition(),n="";;){var a=this.tryParseQuote(r);if(a){n+=a;continue}var s=this.tryParseUnquoted(e,r);if(s){n+=s;continue}var o=this.tryParseLeftAngleBracket();if(o){n+=o;continue}break}var l=_e(i,this.clonePosition());return{val:{type:He.literal,value:n,location:l},err:null}},t.prototype.tryParseLeftAngleBracket=function(){return!this.isEOF()&&this.char()===60&&(this.ignoreTag||!VA(this.peek()||0))?(this.bump(),"<"):null},t.prototype.tryParseQuote=function(e){if(this.isEOF()||this.char()!==39)return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if(e==="plural"||e==="selectordinal")break;return null;default:return null}this.bump();var r=[this.char()];for(this.bump();!this.isEOF();){var i=this.char();if(i===39)if(this.peek()===39)r.push(39),this.bump();else{this.bump();break}else r.push(i);this.bump()}return h0.apply(void 0,r)},t.prototype.tryParseUnquoted=function(e,r){if(this.isEOF())return null;var i=this.char();return i===60||i===123||i===35&&(r==="plural"||r==="selectordinal")||i===125&&e>0?null:(this.bump(),h0(i))},t.prototype.parseArgument=function(e,r){var i=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(xe.EXPECT_ARGUMENT_CLOSING_BRACE,_e(i,this.clonePosition()));if(this.char()===125)return this.bump(),this.error(xe.EMPTY_ARGUMENT,_e(i,this.clonePosition()));var n=this.parseIdentifierIfPossible().value;if(!n)return this.error(xe.MALFORMED_ARGUMENT,_e(i,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(xe.EXPECT_ARGUMENT_CLOSING_BRACE,_e(i,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:He.argument,value:n,location:_e(i,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(xe.EXPECT_ARGUMENT_CLOSING_BRACE,_e(i,this.clonePosition())):this.parseArgumentOptions(e,r,n,i);default:return this.error(xe.MALFORMED_ARGUMENT,_e(i,this.clonePosition()))}},t.prototype.parseIdentifierIfPossible=function(){var e=this.clonePosition(),r=this.offset(),i=p0(this.message,r),n=r+i.length;this.bumpTo(n);var a=this.clonePosition(),s=_e(e,a);return{value:i,location:s}},t.prototype.parseArgumentOptions=function(e,r,i,n){var a,s=this.clonePosition(),o=this.parseIdentifierIfPossible().value,l=this.clonePosition();switch(o){case"":return this.error(xe.EXPECT_ARGUMENT_TYPE,_e(s,l));case"number":case"date":case"time":{this.bumpSpace();var c=null;if(this.bumpIf(",")){this.bumpSpace();var u=this.clonePosition(),p=this.parseSimpleArgStyleIfPossible();if(p.err)return p;var d=jA(p.val);if(d.length===0)return this.error(xe.EXPECT_ARGUMENT_STYLE,_e(this.clonePosition(),this.clonePosition()));var h=_e(u,this.clonePosition());c={style:d,styleLocation:h}}var g=this.tryParseArgumentClose(n);if(g.err)return g;var y=_e(n,this.clonePosition());if(c&&ob(c?.style,"::",0)){var x=qA(c.style.slice(2));if(o==="number"){var p=this.parseNumberSkeletonFromString(x,c.styleLocation);return p.err?p:{val:{type:He.number,value:i,location:y,style:p.val},err:null}}else{if(x.length===0)return this.error(xe.EXPECT_DATE_TIME_SKELETON,y);var m=x;this.locale&&(m=IA(x,this.locale));var d={type:Da.dateTime,pattern:m,location:c.styleLocation,parsedOptions:this.shouldParseSkeletons?kA(m):{}},k=o==="date"?He.date:He.time;return{val:{type:k,value:i,location:y,style:d},err:null}}}return{val:{type:o==="number"?He.number:o==="date"?He.date:He.time,value:i,location:y,style:(a=c?.style)!==null&&a!==void 0?a:null},err:null}}case"plural":case"selectordinal":case"select":{var S=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(xe.EXPECT_SELECT_ARGUMENT_OPTIONS,_e(S,Te({},S)));this.bumpSpace();var _=this.parseIdentifierIfPossible(),w=0;if(o!=="select"&&_.value==="offset"){if(!this.bumpIf(":"))return this.error(xe.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,_e(this.clonePosition(),this.clonePosition()));this.bumpSpace();var p=this.tryParseDecimalInteger(xe.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,xe.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE);if(p.err)return p;this.bumpSpace(),_=this.parseIdentifierIfPossible(),w=p.val}var A=this.tryParsePluralOrSelectOptions(e,o,r,_);if(A.err)return A;var g=this.tryParseArgumentClose(n);if(g.err)return g;var T=_e(n,this.clonePosition());return o==="select"?{val:{type:He.select,value:i,options:lb(A.val),location:T},err:null}:{val:{type:He.plural,value:i,options:lb(A.val),offset:w,pluralType:o==="plural"?"cardinal":"ordinal",location:T},err:null}}default:return this.error(xe.INVALID_ARGUMENT_TYPE,_e(s,l))}},t.prototype.tryParseArgumentClose=function(e){return this.isEOF()||this.char()!==125?this.error(xe.EXPECT_ARGUMENT_CLOSING_BRACE,_e(e,this.clonePosition())):(this.bump(),{val:!0,err:null})},t.prototype.parseSimpleArgStyleIfPossible=function(){for(var e=0,r=this.clonePosition();!this.isEOF();){var i=this.char();switch(i){case 39:{this.bump();var n=this.clonePosition();if(!this.bumpUntil("'"))return this.error(xe.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,_e(n,this.clonePosition()));this.bump();break}case 123:{e+=1,this.bump();break}case 125:{if(e>0)e-=1;else return{val:this.message.slice(r.offset,this.offset()),err:null};break}default:this.bump();break}}return{val:this.message.slice(r.offset,this.offset()),err:null}},t.prototype.parseNumberSkeletonFromString=function(e,r){var i=[];try{i=AA(e)}catch{return this.error(xe.INVALID_NUMBER_SKELETON,r)}return{val:{type:Da.number,tokens:i,location:r,parsedOptions:this.shouldParseSkeletons?MA(i):{}},err:null}},t.prototype.tryParsePluralOrSelectOptions=function(e,r,i,n){for(var a,s=!1,o=[],l=new Set,c=n.value,u=n.location;;){if(c.length===0){var p=this.clonePosition();if(r!=="select"&&this.bumpIf("=")){var d=this.tryParseDecimalInteger(xe.EXPECT_PLURAL_ARGUMENT_SELECTOR,xe.INVALID_PLURAL_ARGUMENT_SELECTOR);if(d.err)return d;u=_e(p,this.clonePosition()),c=this.message.slice(p.offset,this.offset())}else break}if(l.has(c))return this.error(r==="select"?xe.DUPLICATE_SELECT_ARGUMENT_SELECTOR:xe.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,u);c==="other"&&(s=!0),this.bumpSpace();var h=this.clonePosition();if(!this.bumpIf("{"))return this.error(r==="select"?xe.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:xe.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,_e(this.clonePosition(),this.clonePosition()));var g=this.parseMessage(e+1,r,i);if(g.err)return g;var y=this.tryParseArgumentClose(h);if(y.err)return y;o.push([c,{value:g.val,location:_e(h,this.clonePosition())}]),l.add(c),this.bumpSpace(),a=this.parseIdentifierIfPossible(),c=a.value,u=a.location}return o.length===0?this.error(r==="select"?xe.EXPECT_SELECT_ARGUMENT_SELECTOR:xe.EXPECT_PLURAL_ARGUMENT_SELECTOR,_e(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!s?this.error(xe.MISSING_OTHER_CLAUSE,_e(this.clonePosition(),this.clonePosition())):{val:o,err:null}},t.prototype.tryParseDecimalInteger=function(e,r){var i=1,n=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(i=-1);for(var a=!1,s=0;!this.isEOF();){var o=this.char();if(o>=48&&o<=57)a=!0,s=s*10+(o-48),this.bump();else break}var l=_e(n,this.clonePosition());return a?(s*=i,HA(s)?{val:s,err:null}:this.error(r,l)):this.error(e,l)},t.prototype.offset=function(){return this.position.offset},t.prototype.isEOF=function(){return this.offset()===this.message.length},t.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},t.prototype.char=function(){var e=this.position.offset;if(e>=this.message.length)throw Error("out of bound");var r=c2(this.message,e);if(r===void 0)throw Error("Offset ".concat(e," is at invalid UTF-16 code unit boundary"));return r},t.prototype.error=function(e,r){return{val:null,err:{kind:e,message:this.message,location:r}}},t.prototype.bump=function(){if(!this.isEOF()){var e=this.char();e===10?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=e<65536?1:2)}},t.prototype.bumpIf=function(e){if(ob(this.message,e,this.offset())){for(var r=0;r<e.length;r++)this.bump();return!0}return!1},t.prototype.bumpUntil=function(e){var r=this.offset(),i=this.message.indexOf(e,r);return i>=0?(this.bumpTo(i),!0):(this.bumpTo(this.message.length),!1)},t.prototype.bumpTo=function(e){if(this.offset()>e)throw Error("targetOffset ".concat(e," must be greater than or equal to the current offset ").concat(this.offset()));for(e=Math.min(e,this.message.length);;){var r=this.offset();if(r===e)break;if(r>e)throw Error("targetOffset ".concat(e," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},t.prototype.bumpSpace=function(){for(;!this.isEOF()&&d2(this.char());)this.bump()},t.prototype.peek=function(){if(this.isEOF())return null;var e=this.char(),r=this.offset(),i=this.message.charCodeAt(r+(e>=65536?2:1));return i??null},t})();function f0(t){return t>=97&&t<=122||t>=65&&t<=90}function VA(t){return f0(t)||t===47}function WA(t){return t===45||t===46||t>=48&&t<=57||t===95||t>=97&&t<=122||t>=65&&t<=90||t==183||t>=192&&t<=214||t>=216&&t<=246||t>=248&&t<=893||t>=895&&t<=8191||t>=8204&&t<=8205||t>=8255&&t<=8256||t>=8304&&t<=8591||t>=11264&&t<=12271||t>=12289&&t<=55295||t>=63744&&t<=64975||t>=65008&&t<=65533||t>=65536&&t<=983039}function d2(t){return t>=9&&t<=13||t===32||t===133||t>=8206&&t<=8207||t===8232||t===8233}function KA(t){return t>=33&&t<=35||t===36||t>=37&&t<=39||t===40||t===41||t===42||t===43||t===44||t===45||t>=46&&t<=47||t>=58&&t<=59||t>=60&&t<=62||t>=63&&t<=64||t===91||t===92||t===93||t===94||t===96||t===123||t===124||t===125||t===126||t===161||t>=162&&t<=165||t===166||t===167||t===169||t===171||t===172||t===174||t===176||t===177||t===182||t===187||t===191||t===215||t===247||t>=8208&&t<=8213||t>=8214&&t<=8215||t===8216||t===8217||t===8218||t>=8219&&t<=8220||t===8221||t===8222||t===8223||t>=8224&&t<=8231||t>=8240&&t<=8248||t===8249||t===8250||t>=8251&&t<=8254||t>=8257&&t<=8259||t===8260||t===8261||t===8262||t>=8263&&t<=8273||t===8274||t===8275||t>=8277&&t<=8286||t>=8592&&t<=8596||t>=8597&&t<=8601||t>=8602&&t<=8603||t>=8604&&t<=8607||t===8608||t>=8609&&t<=8610||t===8611||t>=8612&&t<=8613||t===8614||t>=8615&&t<=8621||t===8622||t>=8623&&t<=8653||t>=8654&&t<=8655||t>=8656&&t<=8657||t===8658||t===8659||t===8660||t>=8661&&t<=8691||t>=8692&&t<=8959||t>=8960&&t<=8967||t===8968||t===8969||t===8970||t===8971||t>=8972&&t<=8991||t>=8992&&t<=8993||t>=8994&&t<=9e3||t===9001||t===9002||t>=9003&&t<=9083||t===9084||t>=9085&&t<=9114||t>=9115&&t<=9139||t>=9140&&t<=9179||t>=9180&&t<=9185||t>=9186&&t<=9254||t>=9255&&t<=9279||t>=9280&&t<=9290||t>=9291&&t<=9311||t>=9472&&t<=9654||t===9655||t>=9656&&t<=9664||t===9665||t>=9666&&t<=9719||t>=9720&&t<=9727||t>=9728&&t<=9838||t===9839||t>=9840&&t<=10087||t===10088||t===10089||t===10090||t===10091||t===10092||t===10093||t===10094||t===10095||t===10096||t===10097||t===10098||t===10099||t===10100||t===10101||t>=10132&&t<=10175||t>=10176&&t<=10180||t===10181||t===10182||t>=10183&&t<=10213||t===10214||t===10215||t===10216||t===10217||t===10218||t===10219||t===10220||t===10221||t===10222||t===10223||t>=10224&&t<=10239||t>=10240&&t<=10495||t>=10496&&t<=10626||t===10627||t===10628||t===10629||t===10630||t===10631||t===10632||t===10633||t===10634||t===10635||t===10636||t===10637||t===10638||t===10639||t===10640||t===10641||t===10642||t===10643||t===10644||t===10645||t===10646||t===10647||t===10648||t>=10649&&t<=10711||t===10712||t===10713||t===10714||t===10715||t>=10716&&t<=10747||t===10748||t===10749||t>=10750&&t<=11007||t>=11008&&t<=11055||t>=11056&&t<=11076||t>=11077&&t<=11078||t>=11079&&t<=11084||t>=11085&&t<=11123||t>=11124&&t<=11125||t>=11126&&t<=11157||t===11158||t>=11159&&t<=11263||t>=11776&&t<=11777||t===11778||t===11779||t===11780||t===11781||t>=11782&&t<=11784||t===11785||t===11786||t===11787||t===11788||t===11789||t>=11790&&t<=11798||t===11799||t>=11800&&t<=11801||t===11802||t===11803||t===11804||t===11805||t>=11806&&t<=11807||t===11808||t===11809||t===11810||t===11811||t===11812||t===11813||t===11814||t===11815||t===11816||t===11817||t>=11818&&t<=11822||t===11823||t>=11824&&t<=11833||t>=11834&&t<=11835||t>=11836&&t<=11839||t===11840||t===11841||t===11842||t>=11843&&t<=11855||t>=11856&&t<=11857||t===11858||t>=11859&&t<=11903||t>=12289&&t<=12291||t===12296||t===12297||t===12298||t===12299||t===12300||t===12301||t===12302||t===12303||t===12304||t===12305||t>=12306&&t<=12307||t===12308||t===12309||t===12310||t===12311||t===12312||t===12313||t===12314||t===12315||t===12316||t===12317||t>=12318&&t<=12319||t===12320||t===12336||t===64830||t===64831||t>=65093&&t<=65094}function g0(t){t.forEach(function(e){if(delete e.location,t2(e)||r2(e))for(var r in e.options)delete e.options[r].location,g0(e.options[r].value);else Qw(e)&&n2(e.style)||(Jw(e)||e2(e))&&u0(e.style)?delete e.style.location:i2(e)&&g0(e.children)})}function YA(t,e){e===void 0&&(e={}),e=Te({shouldParseSkeletons:!0,requiresOtherClause:!0},e);var r=new GA(t,e).parse();if(r.err){var i=SyntaxError(xe[r.err.kind]);throw i.location=r.err.location,i.originalMessage=r.err.message,i}return e?.captureLocation||g0(r.val),r.val}var La;(function(t){t.MISSING_VALUE="MISSING_VALUE",t.INVALID_VALUE="INVALID_VALUE",t.MISSING_INTL_API="MISSING_INTL_API"})(La||(La={}));var vu=(function(t){bu(e,t);function e(r,i,n){var a=t.call(this,r)||this;return a.code=i,a.originalMessage=n,a}return e.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},e})(Error),ub=(function(t){bu(e,t);function e(r,i,n,a){return t.call(this,'Invalid values for "'.concat(r,'": "').concat(i,'". Options are "').concat(Object.keys(n).join('", "'),'"'),La.INVALID_VALUE,a)||this}return e})(vu),XA=(function(t){bu(e,t);function e(r,i,n){return t.call(this,'Value for "'.concat(r,'" must be of type ').concat(i),La.INVALID_VALUE,n)||this}return e})(vu),ZA=(function(t){bu(e,t);function e(r,i){return t.call(this,'The intl string context variable "'.concat(r,'" was not provided to the string "').concat(i,'"'),La.MISSING_VALUE,i)||this}return e})(vu),kt;(function(t){t[t.literal=0]="literal",t[t.object=1]="object"})(kt||(kt={}));function QA(t){return t.length<2?t:t.reduce(function(e,r){var i=e[e.length-1];return!i||i.type!==kt.literal||r.type!==kt.literal?e.push(r):i.value+=r.value,e},[])}function JA(t){return typeof t=="function"}function oc(t,e,r,i,n,a,s){if(t.length===1&&ib(t[0]))return[{type:kt.literal,value:t[0].value}];for(var o=[],l=0,c=t;l<c.length;l++){var u=c[l];if(ib(u)){o.push({type:kt.literal,value:u.value});continue}if(xA(u)){typeof a=="number"&&o.push({type:kt.literal,value:r.getNumberFormat(e).format(a)});continue}var p=u.value;if(!(n&&p in n))throw new ZA(p,s);var d=n[p];if(wA(u)){(!d||typeof d=="string"||typeof d=="number")&&(d=typeof d=="string"||typeof d=="number"?String(d):""),o.push({type:typeof d=="string"?kt.literal:kt.object,value:d});continue}if(Jw(u)){var h=typeof u.style=="string"?i.date[u.style]:u0(u.style)?u.style.parsedOptions:void 0;o.push({type:kt.literal,value:r.getDateTimeFormat(e,h).format(d)});continue}if(e2(u)){var h=typeof u.style=="string"?i.time[u.style]:u0(u.style)?u.style.parsedOptions:i.time.medium;o.push({type:kt.literal,value:r.getDateTimeFormat(e,h).format(d)});continue}if(Qw(u)){var h=typeof u.style=="string"?i.number[u.style]:n2(u.style)?u.style.parsedOptions:void 0;h&&h.scale&&(d=d*(h.scale||1)),o.push({type:kt.literal,value:r.getNumberFormat(e,h).format(d)});continue}if(i2(u)){var g=u.children,y=u.value,x=n[y];if(!JA(x))throw new XA(y,"function",s);var m=oc(g,e,r,i,n,a),k=x(m.map(function(w){return w.value}));Array.isArray(k)||(k=[k]),o.push.apply(o,k.map(function(w){return{type:typeof w=="string"?kt.literal:kt.object,value:w}}))}if(t2(u)){var S=u.options[d]||u.options.other;if(!S)throw new ub(u.value,d,Object.keys(u.options),s);o.push.apply(o,oc(S.value,e,r,i,n));continue}if(r2(u)){var S=u.options["=".concat(d)];if(!S){if(!Intl.PluralRules)throw new vu(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,La.MISSING_INTL_API,s);var _=r.getPluralRules(e,{type:u.pluralType}).select(d-(u.offset||0));S=u.options[_]||u.options.other}if(!S)throw new ub(u.value,d,Object.keys(u.options),s);o.push.apply(o,oc(S.value,e,r,i,n,d-(u.offset||0)));continue}}return QA(o)}function eC(t,e){return e?Te(Te(Te({},t||{}),e||{}),Object.keys(t).reduce(function(r,i){return r[i]=Te(Te({},t[i]),e[i]||{}),r},{})):t}function tC(t,e){return e?Object.keys(t).reduce(function(r,i){return r[i]=eC(t[i],e[i]),r},Te({},t)):t}function Od(t){return{create:function(){return{get:function(e){return t[e]},set:function(e,r){t[e]=r}}}}}function rC(t){return t===void 0&&(t={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:Rd(function(){for(var e,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new((e=Intl.NumberFormat).bind.apply(e,$d([void 0],r,!1)))},{cache:Od(t.number),strategy:Dd.variadic}),getDateTimeFormat:Rd(function(){for(var e,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new((e=Intl.DateTimeFormat).bind.apply(e,$d([void 0],r,!1)))},{cache:Od(t.dateTime),strategy:Dd.variadic}),getPluralRules:Rd(function(){for(var e,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new((e=Intl.PluralRules).bind.apply(e,$d([void 0],r,!1)))},{cache:Od(t.pluralRules),strategy:Dd.variadic})}}var iC=(function(){function t(e,r,i,n){r===void 0&&(r=t.defaultLocale);var a=this;if(this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(l){var c=a.formatToParts(l);if(c.length===1)return c[0].value;var u=c.reduce(function(p,d){return!p.length||d.type!==kt.literal||typeof p[p.length-1]!="string"?p.push(d.value):p[p.length-1]+=d.value,p},[]);return u.length<=1?u[0]||"":u},this.formatToParts=function(l){return oc(a.ast,a.locales,a.formatters,a.formats,l,void 0,a.message)},this.resolvedOptions=function(){var l;return{locale:((l=a.resolvedLocale)===null||l===void 0?void 0:l.toString())||Intl.NumberFormat.supportedLocalesOf(a.locales)[0]}},this.getAst=function(){return a.ast},this.locales=r,this.resolvedLocale=t.resolveLocale(r),typeof e=="string"){if(this.message=e,!t.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");var s=n||{};s.formatters;var o=hA(s,["formatters"]);this.ast=t.__parse(e,Te(Te({},o),{locale:this.resolvedLocale}))}else this.ast=e;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=tC(t.formats,i),this.formatters=n&&n.formatters||rC(this.formatterCache)}return Object.defineProperty(t,"defaultLocale",{get:function(){return t.memoizedDefaultLocale||(t.memoizedDefaultLocale=new Intl.NumberFormat().resolvedOptions().locale),t.memoizedDefaultLocale},enumerable:!1,configurable:!0}),t.memoizedDefaultLocale=null,t.resolveLocale=function(e){if(!(typeof Intl.Locale>"u")){var r=Intl.NumberFormat.supportedLocalesOf(e);return r.length>0?new Intl.Locale(r[0]):new Intl.Locale(typeof e=="string"?e:e[0])}},t.__parse=YA,t.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},t})();const m0="https://www.youtube.com/embed/EN2oOog3pSs";function h2(t){return t.toLowerCase().replace(/[\s.]+/g,"")}function p2(t){const{gameMode:e,playerTeams:r,maxPlayers:i}=t;if(e!==pe.Team)return f("game_mode.ffa");if(r===Ct)return f("public_lobby.teams_hvn_detailed",{num:i??0});if(typeof r=="string"){const l=`public_lobby.teams_${r}`,c=db(r,i??0),u=f(l,{team_count:c});if(u!==l)return u}const n=typeof r=="number"?r:db(r,i??0),a=n>0?Math.floor((i??0)/n):0,s=a===2?En:a===3?Mn:a===4?In:null;if(s){const l=`public_lobby.teams_${s}`,c=f(l,{team_count:n});if(c!==l)return c}const o=f("public_lobby.teams",{num:n});return a>0?`${o} ${f("public_lobby.players_per_team",{num:a})}`:o}function db(t,e){if(typeof t=="number")return t;const r=nC(t,e);return r>0?Math.floor(e/r):0}function nC(t,e){return t===En?2:t===Mn?3:t===In?4:t===Ct?e:typeof t=="number"&&t>0?Math.floor(e/t):0}function f2(t){if(!t)return[];const e=[];return t.isRandomSpawn&&e.push({labelKey:"host_modal.random_spawn",badgeKey:"public_game_modifier.random_spawn"}),t.isCompact&&e.push({labelKey:"host_modal.compact_map",badgeKey:"public_game_modifier.compact_map"}),t.isCrowded&&e.push({labelKey:"host_modal.crowded",badgeKey:"public_game_modifier.crowded"}),t.startingGold&&e.push({labelKey:"host_modal.starting_gold",badgeKey:"public_game_modifier.starting_gold",value:t.startingGold}),e}function aC(t){return f2(t).map(e=>f(e.badgeKey))}function Oa(t){if(t<=0)return"0s";const e=Math.floor(t/60),r=t%60;let i="";return e>0&&(i+=`${e}min `),i+=`${r}s`,i.trim()}function Je(t){return ce(t/10)}async function sC(t,e,r,i=2e3){try{await navigator.clipboard.writeText(t),e&&e(),r&&setTimeout(()=>{r()},i)}catch(n){console.warn("Failed to copy to clipboard",n)}}function ce(t,e){return t=Number(t),t=Math.max(t,0),t>=1e7?(Math.floor(t/1e5)/10).toFixed(e??1)+"M":t>=1e6?(Math.floor(t/1e4)/100).toFixed(e??2)+"M":t>=1e5?Math.floor(t/1e3)+"K":t>=1e4?(Math.floor(t/100)/10).toFixed(e??1)+"K":t>=1e3?(Math.floor(t/10)/100).toFixed(e??2)+"K":Math.floor(t).toString()}function b0(t){const e=t*100;return Number.isNaN(e)?"0%":e.toFixed(1)+"%"}function g2(t){return t?t===" "||t==="Space"?"Space":/^Digit\d$/.test(t)?t.replace("Digit",""):/^Key[A-Z]$/.test(t)?t.replace("Key",""):t.charAt(0).toUpperCase()+t.slice(1):""}function m2(){const t=document.createElement("canvas");return t.style.position="fixed",t.style.left="0",t.style.top="0",t.style.width="100%",t.style.height="100%",t.style.touchAction="none",t}function oC(){return crypto!==void 0&&"randomUUID"in crypto?crypto.randomUUID():crypto!==void 0&&"getRandomValues"in crypto?("10000000-1000-4000-8000"+-1e11).replace(/[018]/g,t=>(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)):"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)})}function b2(t,e){const r=Object.entries(e);if(r.length===0)return t;const i=r.map(([n,a])=>`${n}=${String(a)}`).join(",");return`${t}::${i}`}const f=(t,e={})=>{const r=f;r.formatterCache??=new Map,r.lastLang??=null;const i=document.querySelector("lang-selector");if(!i)return console.warn("LangSelector not found in DOM"),t;if(i.currentLang==="debug")return b2(t,e);if(!i.translations||Object.keys(i.translations).length===0)return t;r.lastLang!==i.currentLang&&(r.formatterCache.clear(),r.lastLang=i.currentLang);let n=i.translations[t];if(!n&&i.defaultTranslations){const a=i.defaultTranslations;a&&a[t]&&(n=a[t])}if(!n)return t;try{const a=!i.translations[t]&&i.currentLang!=="en"?"en":i.currentLang,s=`${t}:${a}:${n}`;let o=r.formatterCache.get(s);return o||(o=new iC(n,a),r.formatterCache.set(s,o)),o.format(e)}catch(a){return console.warn("ICU format error",a),n}},ca={fail:"text-red-400",warn:"text-yellow-400",success:"text-green-400",info:"text-gray-200",blue:"text-blue-400",white:"text-white"};function lC(t){switch(t){case de.SAM_HIT:case de.CAPTURED_ENEMY_UNIT:case de.RECEIVED_GOLD_FROM_TRADE:case de.CONQUERED_PLAYER:return ca.success;case de.ATTACK_FAILED:case de.ALLIANCE_REJECTED:case de.ALLIANCE_BROKEN:case de.UNIT_CAPTURED_BY_ENEMY:case de.UNIT_DESTROYED:return ca.fail;case de.ATTACK_CANCELLED:case de.ATTACK_REQUEST:case de.ALLIANCE_ACCEPTED:case de.SENT_GOLD_TO_PLAYER:case de.SENT_TROOPS_TO_PLAYER:case de.RECEIVED_GOLD_FROM_PLAYER:case de.RECEIVED_TROOPS_FROM_PLAYER:return ca.blue;case de.MIRV_INBOUND:case de.NUKE_INBOUND:case de.HYDROGEN_BOMB_INBOUND:case de.SAM_MISS:case de.ALLIANCE_EXPIRED:case de.NAVAL_INVASION_INBOUND:case de.RENEW_ALLIANCE:return ca.warn;case de.CHAT:case de.ALLIANCE_REQUEST:return ca.info;default:return console.warn(`Message type ${t} has no explicit color`),ca.white}}function yu(){try{return parseInt(localStorage.getItem("gamesPlayed")??"0",10)||0}catch(t){return console.warn("Failed to read games played from localStorage:",t),0}}function cC(){try{localStorage.setItem("gamesPlayed",(yu()+1).toString())}catch(t){console.warn("Failed to increment games played in localStorage:",t)}}function v2(){try{return window.self!==window.top}catch{return!0}}async function y2(t){const e=y2;e.svgAspectRatioCache??=new Map;const r=e.svgAspectRatioCache.get(t);if(r!==void 0)return r;try{const n=new AbortController,a=setTimeout(()=>n.abort(),5e3),s=await fetch(t,{signal:n.signal});if(clearTimeout(a),!s.ok)throw new Error(`Fetch failed: ${s.status}`);const o=await s.text(),l=o.match(/viewBox="([^"]+)"/i);if(l){const p=l[1].trim().split(/[\s,]+/).map(Number);if(p.length===4&&p.every(d=>!Number.isNaN(d))){const[,,d,h]=p;if(d>0&&h>0){const g=d/h;return e.svgAspectRatioCache.set(t,g),g}}}const c=o.match(/<svg[^>]*\swidth="([^"]+)"/i),u=o.match(/<svg[^>]*\sheight="([^"]+)"/i);if(c&&u){const p=g=>Number(g.replace(/[^0-9.]/g,"")),d=p(c[1]),h=p(u[1]);if(d>0&&h>0){const g=d/h;return e.svgAspectRatioCache.set(t,g),g}}}catch{}const i=await new Promise(n=>{const a=new Image;a.onload=()=>{a.naturalWidth>0&&a.naturalHeight>0?n(a.naturalWidth/a.naturalHeight):n(null)},a.onerror=()=>n(null),a.src=t});return i!==null?(e.svgAspectRatioCache.set(t,i),i):null}function w2(t){if(t.avatar){const e=/^\d+$/.test(t.id),r=/^[a-f0-9]+$/.test(t.avatar)||/^a_[a-f0-9]+$/.test(t.avatar);if(e&&r){const i=t.avatar.startsWith("a_")?"gif":"png";return`https://cdn.discordapp.com/avatars/${encodeURIComponent(t.id)}/${encodeURIComponent(t.avatar)}.${i}?size=64`}}return t.discriminator!==void 0?`https://cdn.discordapp.com/embed/avatars/${Number(t.discriminator)%5}.png`:null}const v0="player_persistent_id";let yo=null;function uC(){const t=encodeURIComponent(window.location.href);window.location.href=`${Wt()}/auth/login/discord?redirect_uri=${t}`}async function dC(t){const e=await fetch(`${Wt()}/auth/login/token?login-token=${t}`,{credentials:"include"});if(e.status!==200)return console.error("Token login failed",e),null;const r=await e.json(),{email:i}=r;return i}async function hC(){const t=await Rn();if(!t)return"";const{jwt:e}=t;return`Bearer ${e}`}async function wo(t=!1){try{const e=await fetch(Wt()+(t?"/auth/revoke":"/auth/logout"),{method:"POST",credentials:"include"});return e.ok===!1?(console.error("Logout failed",e),!1):!0}catch(e){return console.error("Logout failed",e),!1}finally{yo=null,localStorage.removeItem(v0)}}async function Rn(t=!0){try{const e=yo;if(!e)return t?(console.log("No JWT found"),await hb(),Rn(!1)):(console.warn("No JWT found and shouldRefresh is false"),!1);const r=vy(e),{iss:i,aud:n,exp:a}=r;if(i!==Wt())return console.error('unexpected "iss" claim value'),wo(),!1;const s=_2();if(s!=="localhost"&&n!==s)return console.error('unexpected "aud" claim value'),wo(),!1;const o=Math.floor(Date.now()/1e3);if(a!==void 0&&o>=a-180)return console.log("jwt expired or about to expire"),t?(await hb(),Rn(!1)):(console.error("jwt expired and shouldRefresh is false"),!1);const l=eA.safeParse(r);if(!l.success){const u=No(l.error);return console.error("Invalid payload",u),!1}const c=l.data;return{jwt:e,claims:c}}catch(e){return console.error("isLoggedIn failed",e),!1}}async function hb(){try{console.log("Refreshing jwt");const t=await fetch(Wt()+"/auth/refresh",{method:"POST",credentials:"include"});if(t.status!==200){console.error("Refresh failed",t),wo();return}const e=await t.json(),{jwt:r}=e;console.log("Refresh succeeded"),yo=r}catch(t){console.error("Refresh failed",t),yo=null;return}}async function pC(t){try{const e=Wt(),r=await fetch(`${e}/auth/magic-link`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({redirectDomain:window.location.origin,email:t})});return r.ok?!0:(console.error("Failed to send recovery email:",r.status,r.statusText),!1)}catch(e){return console.error("Error sending recovery email:",e),!1}}async function kc(){const t=await Rn();return t!==!1?t.jwt:y0()}function x2(){const t=yo;if(!t)return y0();const r=vy(t).sub;return r?l0(r):y0()}function y0(){const t=localStorage.getItem(v0);if(t)return t;const e=oC();return localStorage.setItem(v0,e),e}async function fC(t){try{const e=await Rn();if(!e)return!1;const{jwt:r}=e,i=`${Wt()}/player/${encodeURIComponent(t)}`,n=await fetch(i,{headers:{Accept:"application/json",Authorization:`Bearer ${r}`}});if(n.status!==200)return console.warn("fetchPlayerById: unexpected status",n.status,n.statusText),!1;const a=await n.json(),s=sA.safeParse(a);return s.success?s.data:(console.warn("fetchPlayerById: Zod validation failed",s.error),!1)}catch(e){return console.warn("fetchPlayerById: request failed",e),!1}}let Tl=null;async function jo(){return Tl!==null||(Tl=(async()=>{try{const t=await Rn();if(!t)return!1;const{jwt:e}=t,r=await fetch(Wt()+"/users/@me",{headers:{authorization:`Bearer ${e}`}});if(r.status===401)return await wo(),!1;if(r.status!==200)return!1;const i=await r.json(),n=rA.safeParse(i);if(!n.success){const a=No(n.error);return console.error("Invalid response",a),!1}return n.data}catch{return!1}})()),Tl}async function gC(t,e){try{const r=await fetch(`${Wt()}/stripe/create-checkout-session`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:await hC()},body:JSON.stringify({priceId:t,hostname:window.location.origin,colorPaletteName:e})});return r.ok?(await r.json()).url:(console.error("createCheckoutSession: request failed",r.status,r.statusText),!1)}catch(r){return console.error("createCheckoutSession: request failed",r),!1}}function Wt(){const t=_2();return t==="localhost"?localStorage.getItem("apiHost")??"http://localhost:8787":t==="github.io"||!t.includes("openfront")?"https://api.openfront.io":`https://api.${t}`}function _2(){const{hostname:t}=new URL(window.location.href);return t.split(".").slice(-2).join(".")}function Aa(t){return t!==!1&&(t.user?.discord!==void 0||t.user?.email!==void 0)}async function mC(t){try{const e=`${Wt()}/game/${encodeURIComponent(t)}`,r=await fetch(e,{headers:{Accept:"application/json"}});if(r.status!==200)return console.warn("fetchGameById: unexpected status",r.status,r.statusText),!1;const i=await r.json(),n=Xy.safeParse(i);return n.success?n.data:(console.warn("fetchGameById: Zod validation failed",n.error),!1)}catch(e){return console.warn("fetchGameById: request failed",e),!1}}async function bC(){try{const t=await fetch(`${Wt()}/public/clans/leaderboard`,{headers:{Accept:"application/json"}});if(!t.ok)return console.warn("fetchClanLeaderboard: unexpected status",t.status,t.statusText),!1;const e=await t.json(),r=lA.safeParse(e);return r.success?r.data:(console.warn("fetchClanLeaderboard: Zod validation failed",r.error.toString()),!1)}catch(t){return console.warn("fetchClanLeaderboard: request failed",t),!1}}async function vC(t){try{const e=new URL(`${Wt()}/leaderboard/ranked`);e.searchParams.set("page",String(t));const r=await fetch(e.toString(),{headers:{Accept:"application/json"}});if(!r.ok)return console.warn("fetchPlayerLeaderboard: unexpected status",r.status,r.statusText),!1;const i=await r.json(),n=dA.safeParse(i);return n.success?n.data:i?.message?.includes?.("Page must be between")?"reached_limit":(console.warn("fetchPlayerLeaderboard: Zod validation failed",n.error.toString()),!1)}catch(e){return console.error("fetchPlayerLeaderboard: request failed",e),!1}}var yC=Object.defineProperty,wC=Object.getOwnPropertyDescriptor,Fp=(t,e,r,i)=>{for(var n=i>1?void 0:i?wC(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&yC(e,r,n),n};let Sc=class extends V{constructor(){super(...arguments),this._data=null}createRenderRoot(){return this}get data(){return this._data}set data(t){this._data=t,this.requestUpdate()}get avatarUrl(){const t=this._data;return t?w2(t):null}get discordDisplayName(){return this._data?.username??""}render(){return v`
      <div class="flex items-center gap-2">
        ${this.avatarUrl?v`
              <div class="p-[3px] rounded-full bg-gray-500">
                <img
                  class="w-12 h-12 rounded-full block"
                  src="${this.avatarUrl}"
                  alt="${f("discord_user_header.avatar_alt")}"
                />
              </div>
            `:null}
        <span class="font-semibold text-white">${this.discordDisplayName}</span>
      </div>
    `}};Fp([M()],Sc.prototype,"_data",2);Fp([L({attribute:!1})],Sc.prototype,"data",1);Sc=Fp([F("discord-user-header")],Sc);var xC=Object.defineProperty,_C=Object.getOwnPropertyDescriptor,wu=(t,e,r,i)=>{for(var n=i>1?void 0:i?_C(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&xC(e,r,n),n};let xo=class extends V{constructor(){super(...arguments),this.games=[],this.expandedGameId=null}createRenderRoot(){return this}toggle(t){this.expandedGameId=this.expandedGameId===t?null:t}showRanking(t){const e=document.querySelector("game-info-modal");e?(e.loadGame(t),e.open()):console.warn("Game info modal element not found")}render(){return v` <div class="w-full">
      <div class="flex flex-col gap-3">
        ${this.games.map(t=>v`
            <div
              class="bg-white/5 border border-white/5 rounded-xl overflow-hidden hover:bg-white/10 transition-all duration-200"
            >
              <div
                class="flex flex-col sm:flex-row sm:items-center justify-between px-4 py-3 gap-3"
              >
                <div class="flex items-center gap-4">
                  <button
                    class="p-2 bg-blue-500/20 rounded-lg text-blue-400"
                    @click=${()=>this.onViewGame?.(t.gameId)}
                  >
                    <svg
                      xmlns="http://www.w3.org/2000/svg"
                      class="w-5 h-5"
                      viewBox="0 0 24 24"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="2"
                      stroke-linecap="round"
                      stroke-linejoin="round"
                    >
                      <circle cx="12" cy="12" r="10"></circle>
                      <polygon points="10 8 16 12 10 16 10 8"></polygon>
                    </svg>
                  </button>
                  <div>
                    <div class="text-sm font-bold text-white tracking-wide">
                      ${new Date(t.start).toLocaleDateString()}
                    </div>
                    <div
                      class="text-xs text-blue-200/60 font-semibold uppercase tracking-wider"
                    >
                      ${f("game_list.mode")}:
                      ${t.mode===pe.FFA?f("game_list.mode_ffa"):v`${f("game_list.mode_team")}`}
                    </div>
                  </div>
                </div>

                <div class="flex gap-2 self-end sm:self-auto">
                  <button
                    class="text-xs font-bold text-white bg-blue-600 hover:bg-blue-500 px-3 py-1.5 rounded-lg transition-colors shadow-lg shadow-blue-900/20"
                    @click=${()=>this.onViewGame?.(t.gameId)}
                  >
                    ${f("game_list.replay")}
                  </button>
                  <button
                    class="text-xs font-bold text-gray-300 bg-white/10 hover:bg-white/20 px-3 py-1.5 rounded-lg transition-colors border border-white/5"
                    @click=${()=>this.toggle(t.gameId)}
                  >
                    ${f("game_list.details")}
                  </button>
                  <button
                    class="text-xs font-bold text-gray-300 bg-white/10 hover:bg-white/20 px-3 py-1.5 rounded-lg transition-colors border border-white/5"
                    @click=${()=>this.showRanking(t.gameId)}
                  >
                    ${f("game_list.ranking")}
                  </button>
                </div>
              </div>

              <div
                class="bg-black/20 border-t border-white/5 px-4 text-xs text-gray-400 transition-all duration-300 overflow-hidden"
                style="max-height:${this.expandedGameId===t.gameId?"200px":"0"}; opacity:${this.expandedGameId===t.gameId?"1":"0"}"
              >
                <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 py-3">
                  <div>
                    <div
                      class="font-bold text-white uppercase tracking-wider text-[10px] mb-1"
                    >
                      ${f("game_list.game_id")}
                    </div>
                    <div class="text-white font-mono">${t.gameId}</div>
                  </div>
                  <div>
                    <div
                      class="font-bold text-white uppercase tracking-wider text-[10px] mb-1"
                    >
                      ${f("game_list.map")}
                    </div>
                    <div class="text-white">${t.map}</div>
                  </div>
                  <div>
                    <div
                      class="font-bold text-white uppercase tracking-wider text-[10px] mb-1"
                    >
                      ${f("game_list.difficulty")}
                    </div>
                    <div class="text-white">${t.difficulty}</div>
                  </div>
                  <div>
                    <div
                      class="font-bold text-white uppercase tracking-wider text-[10px] mb-1"
                    >
                      ${f("game_list.type")}
                    </div>
                    <div class="text-white">${t.type}</div>
                  </div>
                </div>
              </div>
            </div>
          `)}
      </div>
    </div>`}};wu([L({type:Array})],xo.prototype,"games",2);wu([L({attribute:!1})],xo.prototype,"onViewGame",2);wu([M()],xo.prototype,"expandedGameId",2);xo=wu([F("game-list")],xo);var kC=Object.defineProperty,SC=Object.getOwnPropertyDescriptor,k2=(t,e,r,i)=>{for(var n=i>1?void 0:i?SC(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&kC(e,r,n),n};let w0=class extends V{createRenderRoot(){return this}render(){return v`
      <div class="grid grid-cols-1 gap-6 w-full">
        <div class="w-full">
          <div
            class="text-gray-400 text-sm font-bold uppercase tracking-wider mb-2"
          >
            ${f("player_stats_table.building_stats")}
          </div>
          <div
            class="overflow-x-auto rounded-lg border border-white/5 bg-black/20"
          >
            <table class="w-full text-sm text-gray-300">
              <thead>
                <tr class="bg-white/5">
                  <th class="px-4 py-2 font-semibold text-left text-gray-400">
                    ${f("player_stats_table.building")}
                  </th>
                  <th class="px-3 py-2 text-center font-semibold text-gray-400">
                    ${f("player_stats_table.built")}
                  </th>
                  <th class="px-3 py-2 text-center font-semibold text-gray-400">
                    ${f("player_stats_table.destroyed")}
                  </th>
                  <th class="px-3 py-2 text-center font-semibold text-gray-400">
                    ${f("player_stats_table.captured")}
                  </th>
                  <th class="px-3 py-2 text-center font-semibold text-gray-400">
                    ${f("player_stats_table.lost")}
                  </th>
                </tr>
              </thead>
              <tbody class="divide-y divide-white/5">
                ${Ny.map(t=>{const e=this.stats?.units?.[t]?.[0]??0n,r=this.stats?.units?.[t]?.[1]??0n,i=this.stats?.units?.[t]?.[2]??0n,n=this.stats?.units?.[t]?.[3]??0n;return v`
                    <tr class="hover:bg-white/5 transition-colors">
                      <td class="px-4 py-2 text-left font-medium text-white/80">
                        ${f(`player_stats_table.unit.${t}`)}
                      </td>
                      <td class="px-3 py-2 text-center text-white/60">
                        ${ce(e)}
                      </td>
                      <td class="px-3 py-2 text-center text-white/60">
                        ${ce(r)}
                      </td>
                      <td class="px-3 py-2 text-center text-white/60">
                        ${ce(i)}
                      </td>
                      <td class="px-3 py-2 text-center text-white/60">
                        ${ce(n)}
                      </td>
                    </tr>
                  `})}
              </tbody>
            </table>
          </div>
        </div>

        <div class="w-full">
          <div
            class="text-gray-400 text-sm font-bold uppercase tracking-wider mb-2"
          >
            ${f("player_stats_table.ship_arrivals")}
          </div>
          <div
            class="overflow-x-auto rounded-lg border border-white/5 bg-black/20"
          >
            <table class="w-full text-sm text-gray-300">
              <thead>
                <tr class="bg-white/5">
                  <th class="px-4 py-2 font-semibold text-left text-gray-400">
                    ${f("player_stats_table.ship_type")}
                  </th>
                  <th class="px-3 py-2 text-center font-semibold text-gray-400">
                    ${f("player_stats_table.sent")}
                  </th>
                  <th class="px-3 py-2 text-center font-semibold text-gray-400">
                    ${f("player_stats_table.destroyed")}
                  </th>
                  <th class="px-3 py-2 text-center font-semibold text-gray-400">
                    ${f("player_stats_table.arrived")}
                  </th>
                </tr>
              </thead>
              <tbody class="divide-y divide-white/5">
                ${By.map(t=>{const e=this.stats?.boats?.[t]?.[0]??0n,r=this.stats?.boats?.[t]?.[1]??0n,i=this.stats?.boats?.[t]?.[3]??0n;return v`
                    <tr class="hover:bg-white/5 transition-colors">
                      <td class="px-4 py-2 text-left font-medium text-white/80">
                        ${f(`player_stats_table.unit.${t}`)}
                      </td>
                      <td class="px-3 py-2 text-center text-white/60">
                        ${ce(e)}
                      </td>
                      <td class="px-3 py-2 text-center text-white/60">
                        ${ce(i)}
                      </td>
                      <td class="px-3 py-2 text-center text-white/60">
                        ${ce(r)}
                      </td>
                    </tr>
                  `})}
              </tbody>
            </table>
          </div>
        </div>

        <div class="w-full">
          <div
            class="text-gray-400 text-sm font-bold uppercase tracking-wider mb-2"
          >
            ${f("player_stats_table.nuke_stats")}
          </div>
          <div
            class="overflow-x-auto rounded-lg border border-white/5 bg-black/20"
          >
            <table class="w-full text-sm text-gray-300">
              <thead>
                <tr class="bg-white/5">
                  <th class="px-4 py-2 font-semibold text-left text-gray-400">
                    ${f("player_stats_table.weapon")}
                  </th>
                  <th class="px-3 py-2 text-center font-semibold text-gray-400">
                    ${f("player_stats_table.launched")}
                  </th>
                  <th class="px-3 py-2 text-center font-semibold text-gray-400">
                    ${f("player_stats_table.landed")}
                  </th>
                  <th class="px-3 py-2 text-center font-semibold text-gray-400">
                    ${f("player_stats_table.hits")}
                  </th>
                </tr>
              </thead>
              <tbody class="divide-y divide-white/5">
                ${Oy.map(t=>{const e=this.stats?.bombs?.[t]?.[0]??0n,r=this.stats?.bombs?.[t]?.[1]??0n,i=this.stats?.bombs?.[t]?.[2]??0n;return v`
                    <tr class="hover:bg-white/5 transition-colors">
                      <td class="px-4 py-2 text-left font-medium text-white/80">
                        ${f(`player_stats_table.unit.${t}`)}
                      </td>
                      <td class="px-3 py-2 text-center text-white/60">
                        ${ce(e)}
                      </td>
                      <td class="px-3 py-2 text-center text-white/60">
                        ${ce(r)}
                      </td>
                      <td class="px-3 py-2 text-center text-white/60">
                        ${ce(i)}
                      </td>
                    </tr>
                  `})}
              </tbody>
            </table>
          </div>
        </div>

        <div class="w-full">
          <div
            class="text-gray-400 text-sm font-bold uppercase tracking-wider mb-2"
          >
            ${f("player_stats_table.player_metrics")}
          </div>
          <div
            class="overflow-x-auto rounded-lg border border-white/5 bg-black/20 mb-4"
          >
            <table class="w-full text-sm text-gray-300">
              <thead>
                <tr class="bg-white/5">
                  <th class="px-4 py-2 text-center font-semibold text-gray-400">
                    ${f("player_stats_table.attack")}
                  </th>
                  <th class="px-3 py-2 text-center font-semibold text-gray-400">
                    ${f("player_stats_table.sent")}
                  </th>
                  <th class="px-3 py-2 text-center font-semibold text-gray-400">
                    ${f("player_stats_table.received")}
                  </th>
                  <th class="px-3 py-2 text-center font-semibold text-gray-400">
                    ${f("player_stats_table.cancelled")}
                  </th>
                </tr>
              </thead>
              <tbody class="divide-y divide-white/5">
                <tr class="hover:bg-white/5 transition-colors">
                  <td class="px-4 py-2 text-center text-white/60">
                    ${f("player_stats_table.count")}
                  </td>
                  <td class="px-3 py-2 text-center text-white/60">
                    ${ce(this.stats?.attacks?.[0]??0n)}
                  </td>
                  <td class="px-3 py-2 text-center text-white/60">
                    ${ce(this.stats?.attacks?.[1]??0n)}
                  </td>
                  <td class="px-3 py-2 text-center text-white/60">
                    ${ce(this.stats?.attacks?.[2]??0n)}
                  </td>
                </tr>
              </tbody>
            </table>
          </div>

          <div
            class="overflow-x-auto rounded-lg border border-white/5 bg-black/20"
          >
            <table class="w-full text-sm text-gray-300">
              <thead>
                <tr class="bg-white/5">
                  <th class="px-3 py-2 text-center font-semibold text-gray-400">
                    ${f("player_stats_table.gold")}
                  </th>
                  <th class="px-3 py-2 text-center font-semibold text-gray-400">
                    ${f("player_stats_table.workers")}
                  </th>
                  <th class="px-3 py-2 text-center font-semibold text-gray-400">
                    ${f("player_stats_table.war")}
                  </th>
                  <th class="px-3 py-2 text-center font-semibold text-gray-400">
                    ${f("player_stats_table.trade")}
                  </th>
                  <th class="px-3 py-2 text-center font-semibold text-gray-400">
                    ${f("player_stats_table.steal")}
                  </th>
                </tr>
              </thead>
              <tbody class="divide-y divide-white/5">
                <tr class="hover:bg-white/5 transition-colors">
                  <td class="px-3 py-2 text-center text-white/60">
                    ${ce(this.stats?.gold?.[0]??0n)}
                  </td>
                  <td class="px-3 py-2 text-center text-white/60">
                    ${ce(this.stats?.gold?.[1]??0n)}
                  </td>
                  <td class="px-3 py-2 text-center text-white/60">
                    ${ce(this.stats?.gold?.[2]??0n)}
                  </td>
                  <td class="px-3 py-2 text-center text-white/60">
                    ${ce(this.stats?.gold?.[3]??0n)}
                  </td>
                  <td class="px-3 py-2 text-center text-white/60">
                    ${ce(this.stats?.gold?.[4]??0n)}
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    `}};k2([L({type:Object})],w0.prototype,"stats",2);w0=k2([F("player-stats-table")],w0);var AC=Object.defineProperty,CC=Object.getOwnPropertyDescriptor,qp=(t,e,r,i)=>{for(var n=i>1?void 0:i?CC(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&AC(e,r,n),n};let Ac=class extends V{constructor(){super(...arguments),this.titles=[],this.values=[],this.VISIBLE_STATS_COUNT=4}createRenderRoot(){return this}render(){return v`
      <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-2">
        ${Array(this.VISIBLE_STATS_COUNT).fill(0).map((t,e)=>v`
              <div
                class="flex flex-col items-center justify-center p-4 rounded-xl bg-white/5 border border-white/5 hover:bg-white/10 transition-colors"
              >
                <div class="text-2xl font-bold text-white mb-1">
                  ${this.values[e]??""}
                </div>
                <div
                  class="text-blue-200/60 text-xs font-bold uppercase tracking-widest"
                >
                  ${this.titles[e]??""}
                </div>
              </div>
            `)}
      </div>
    `}};qp([L({type:Array})],Ac.prototype,"titles",2);qp([L({type:Array})],Ac.prototype,"values",2);Ac=qp([F("player-stats-grid")],Ac);var TC=Object.defineProperty,EC=Object.getOwnPropertyDescriptor,Go=(t,e,r,i)=>{for(var n=i>1?void 0:i?EC(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&TC(e,r,n),n};let Ba=class extends V{constructor(){super(...arguments),this.selectedType=lt.Public,this.selectedMode=pe.FFA,this.selectedDifficulty=Ce.Medium}get typeNode(){return this.statsTree?.[this.selectedType]}get modeNode(){return this.typeNode?.[this.selectedMode]}get shouldMergeDifficulties(){return this.selectedType===lt.Public}get availableTypes(){return this.statsTree?Object.keys(this.statsTree).filter(e3):[]}get availableModes(){return this.typeNode?Object.keys(this.typeNode).filter(t3):[]}get availableDifficulties(){return this.modeNode?Object.keys(this.modeNode).filter(kg):[]}labelForMode(t){return t===pe.FFA?f("player_stats_tree.mode_ffa"):f("player_stats_tree.mode_team")}createRenderRoot(){return this}getSelectedLeaf(){const t=this.modeNode;if(!t)return null;if(!this.shouldMergeDifficulties)return t[this.selectedDifficulty]??null;const e=Object.keys(t).filter(kg);return e.length?e.reduce((r,i)=>{const n=t[i];return n?r?{wins:r.wins+n.wins,losses:r.losses+n.losses,total:r.total+n.total,stats:this.mergeStats(r.stats,n.stats)}:{wins:n.wins,losses:n.losses,total:n.total,stats:this.cloneStats(n.stats)}:r},null):null}syncSelection(){const t=this.availableTypes;t.length&&!t.includes(this.selectedType)&&(this.selectedType=t[0]);const e=this.availableModes;e.length&&!e.includes(this.selectedMode)&&(this.selectedMode=e[0]);const r=this.availableDifficulties;!this.shouldMergeDifficulties&&r.length&&!r.includes(this.selectedDifficulty)&&(this.selectedDifficulty=r[0])}willUpdate(t){(t.has("statsTree")||t.has("selectedType")||t.has("selectedMode")||t.has("selectedDifficulty"))&&this.syncSelection()}setGameType(t){this.selectedType!==t&&(this.selectedType=t,this.requestUpdate())}setMode(t){this.selectedMode!==t&&(this.selectedMode=t,this.requestUpdate())}setDifficulty(t){this.selectedDifficulty!==t&&(this.selectedDifficulty=t,this.requestUpdate())}mergeStats(t,e){if(!(!t&&!e))return t?e?{attacks:this.mergeStatArrays(t.attacks,e.attacks),betrayals:this.mergeStatValue(t.betrayals,e.betrayals),killedAt:this.mergeStatValue(t.killedAt,e.killedAt),conquests:this.mergeStatArrays(t.conquests,e.conquests),boats:this.mergeStatRecord(t.boats,e.boats),bombs:this.mergeStatRecord(t.bombs,e.bombs),gold:this.mergeStatArrays(t.gold,e.gold),units:this.mergeStatRecord(t.units,e.units)}:this.cloneStats(t):this.cloneStats(e)}mergeStatValue(t,e){if(!(t===void 0&&e===void 0))return(t??0n)+(e??0n)}mergeStatArrays(t,e){if(!t&&!e)return;const r=Math.max(t?.length??0,e?.length??0),i=[];for(let n=0;n<r;n+=1)i[n]=(t?.[n]??0n)+(e?.[n]??0n);return i}mergeStatRecord(t,e){if(!t&&!e)return;const r={};return new Set([...Object.keys(t??{}),...Object.keys(e??{})]).forEach(n=>{const a=this.mergeStatArrays(t?.[n],e?.[n]);a&&(r[n]=a)}),Object.keys(r).length?r:void 0}cloneStats(t){if(t)return{attacks:t.attacks?[...t.attacks]:void 0,betrayals:t.betrayals,killedAt:t.killedAt,conquests:t.conquests?[...t.conquests]:void 0,boats:t.boats?{...t.boats}:void 0,bombs:t.bombs?{...t.bombs}:void 0,gold:t.gold?[...t.gold]:void 0,units:t.units?{...t.units}:void 0}}render(){const t=this.availableTypes,e=this.availableModes,r=this.availableDifficulties,i=this.getSelectedLeaf(),n=i?i.losses===0n?Number(i.wins):Number(i.wins)/Number(i.losses):0;return v`
      <div class="flex flex-col gap-4">
        <!-- Filters -->
        <div
          class="flex flex-wrap gap-2 items-center justify-between p-2 bg-black/20 rounded-lg border border-white/5"
        >
          <!-- Type selector -->
          <div class="flex gap-1">
            ${t.map(a=>v`
                <button
                  class="text-xs px-3 py-1.5 rounded-md border font-bold uppercase tracking-wider transition-all duration-200 ${this.selectedType===a?"bg-blue-600 border-blue-500 text-white shadow-lg shadow-blue-900/40":"bg-white/5 border-white/10 text-gray-400 hover:bg-white/10 hover:text-white"}"
                  @click=${()=>this.setGameType(a)}
                >
                  ${a===lt.Public?f("player_stats_tree.public"):a===lt.Private?f("player_stats_tree.private"):f("player_stats_tree.solo")}
                </button>
              `)}
          </div>

          <div class="flex gap-2">
            <!-- Mode selector -->
            ${e.length?v`<div
                  class="flex gap-1 bg-black/20 rounded-md p-1 border border-white/5"
                >
                  ${e.map(a=>v`
                      <button
                        class="text-xs px-3 py-1 rounded-sm transition-colors ${this.selectedMode===a?"bg-white/20 text-white font-bold":"text-gray-400 hover:text-white"}"
                        @click=${()=>this.setMode(a)}
                        title=${f("player_stats_tree.mode")}
                      >
                        ${this.labelForMode(a)}
                      </button>
                    `)}
                </div>`:v``}

            <!-- Difficulty selector -->
            ${!this.shouldMergeDifficulties&&r.length?v`<div
                  class="flex gap-1 bg-black/20 rounded-md p-1 border border-white/5"
                >
                  ${r.map(a=>v` <button
                        class="text-xs px-3 py-1 rounded-sm transition-colors ${this.selectedDifficulty===a?"bg-white/20 text-white font-bold":"text-gray-400 hover:text-white"}"
                        @click=${()=>this.setDifficulty(a)}
                        title=${f("difficulty.difficulty")}
                      >
                        ${f(`difficulty.${a.toLowerCase()}`)}
                      </button>`)}
                </div>`:v``}
          </div>
        </div>

        ${i?v`
              <div class="space-y-6 mt-2">
                <player-stats-grid
                  .titles=${[f("player_stats_tree.stats_wins"),f("player_stats_tree.stats_losses"),f("player_stats_tree.stats_wlr"),f("player_stats_tree.stats_games_played")]}
                  .values=${[ce(i.wins),ce(i.losses),n.toFixed(2),ce(i.total)]}
                ></player-stats-grid>

                <div class="border-t border-white/10 pt-6">
                  <player-stats-table
                    .stats=${i?.stats??null}
                  ></player-stats-table>
                </div>
              </div>
            `:v`
              <div
                class="py-12 text-center text-white/30 italic border border-white/5 rounded-xl bg-white/5"
              >
                ${f("player_stats_tree.no_stats")}
              </div>
            `}
      </div>
    `}};Go([L({type:Object})],Ba.prototype,"statsTree",2);Go([M()],Ba.prototype,"selectedType",2);Go([M()],Ba.prototype,"selectedMode",2);Go([M()],Ba.prototype,"selectedDifficulty",2);Ba=Go([F("player-stats-tree-view")],Ba);var MC=Object.defineProperty,jp=(t,e,r,i)=>{for(var n=void 0,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=s(e,r,n)||n);return n&&MC(e,r,n),n};class gt extends V{constructor(){super(...arguments),this.isModalOpen=!1,this.inline=!1,this.handleKeyDown=e=>{e.key==="Escape"&&this.isModalOpen&&(e.preventDefault(),this.close())}}createRenderRoot(){return this}firstUpdated(){this.modalEl&&(this.modalEl.onClose=()=>{this.isModalOpen&&this.close()})}disconnectedCallback(){this.unregisterEscapeHandler(),super.disconnectedCallback()}registerEscapeHandler(){this.isModalOpen=!0,window.addEventListener("keydown",this.handleKeyDown)}unregisterEscapeHandler(){this.isModalOpen=!1,window.removeEventListener("keydown",this.handleKeyDown)}onOpen(){}onClose(){}open(){if(this.registerEscapeHandler(),this.onOpen(),this.inline){if((this.classList.contains("hidden")||this.style.display==="none")&&window.showPage){const r=this.id||this.tagName.toLowerCase();window.showPage?.(r)}this.style.pointerEvents="auto"}else this.modalEl?.open()}close(){this.unregisterEscapeHandler(),this.onClose(),this.inline?(this.style.pointerEvents="none",window.showPage&&window.showPage?.("page-play")):this.modalEl?.close()}}jp([M()],gt.prototype,"isModalOpen");jp([L({type:Boolean})],gt.prototype,"inline");jp([Vt("o-modal")],gt.prototype,"modalEl");class IC{constructor(){this.initialized=!1,this.isGameplayActive=!1,this.readyPromise=new Promise(e=>{this.resolveReady=e})}async ready(){const e=new Promise(i=>{setTimeout(()=>i(!1),3e3)}),r=this.readyPromise.then(()=>!0);return Promise.race([r,e])}isOnCrazyGames(){try{return window.self!==window.top?window?.top?.location?.hostname.includes("crazygames")??!1:!1}catch(e){console.log("[CrazyGames]: ",e);const r=document.referrer.includes("crazygames");return console.log("[CrazyGames], contains referrer: ",r),r?!0:window.self!==window.top}}isReady(){return this.isOnCrazyGames()&&this.initialized}async maybeInit(){if(this.initialized){console.warn("CrazyGames SDK already initialized");return}if(!this.isOnCrazyGames()){console.log("Not running on CrazyGames platform, not initializing SDK");return}let e=0;for(;typeof window.CrazyGames>"u"&&e<100;)await new Promise(r=>setTimeout(r,100)),e++;if(typeof window.CrazyGames>"u"){console.warn("CrazyGames SDK not available");return}try{await window.CrazyGames.SDK.init(),this.initialized=!0,this.resolveReady(),console.log("CrazyGames SDK initialized")}catch(r){console.error("Failed to initialize CrazyGames SDK:",r)}}async getUsername(){if(!await this.ready())return null;try{return(await window.CrazyGames.SDK.user.getUser())?.username??null}catch(r){return console.log("error getting CrazyGames username: ",r),null}}async addAuthListener(e){if(await this.ready())try{console.log("registering CrazyGames auth listener"),window.CrazyGames.SDK.user.addAuthListener(e)}catch(r){console.error("Failed to add auth listener:",r)}}async isInstantMultiplayer(){if(!await this.ready()||await this.getInviteGameId()!==null)return!1;try{return window.CrazyGames.SDK.game.isInstantMultiplayer??!1}catch(i){return console.log("Error getting instant multiplayer: ",i),!1}}async gameplayStart(){if(this.isReady()){if(this.isGameplayActive){console.warn("Gameplay already started");return}try{await window.CrazyGames.SDK.game.gameplayStart(),this.isGameplayActive=!0,console.log("CrazyGames: gameplay started")}catch(e){console.error("Failed to report gameplay start:",e)}}}async gameplayStop(){if(this.isReady()&&this.isGameplayActive)try{await window.CrazyGames.SDK.game.gameplayStop(),this.isGameplayActive=!1,console.log("CrazyGames: gameplay stopped")}catch(e){console.error("Failed to report gameplay stop:",e)}}async happytime(){if(this.isReady())try{await window.CrazyGames.SDK.game.happytime(),console.log("CrazyGames: happy time triggered")}catch(e){console.error("Failed to trigger happy time:",e)}}loadingStart(){if(this.isReady())try{window.CrazyGames.SDK.game.loadingStart(),console.log("CrazyGames: loading started")}catch(e){console.error("Failed to report loading start:",e)}}loadingStop(){if(this.isReady())try{window.CrazyGames.SDK.game.loadingStop(),console.log("CrazyGames: loading stopped")}catch(e){console.error("Failed to report loading stop:",e)}}showInviteButton(e){if(!this.isReady())return null;try{const r={gameId:e},i=window.CrazyGames.SDK.game.showInviteButton(r);return localStorage.setItem(e,"true"),console.log("CrazyGames: invite button shown, link:",i),i}catch(r){return console.error("Failed to show invite button:",r),null}}hideInviteButton(){if(this.isReady())try{window.CrazyGames.SDK.game.hideInviteButton(),console.log("CrazyGames: invite button hidden")}catch(e){console.error("Failed to hide invite button:",e)}}createInviteLink(e){if(!this.isReady())return console.warn("CrazyGames SDK not ready, cannot create invite link"),null;try{const r=window.CrazyGames.SDK.game.inviteLink({gameId:e});return console.log("CrazyGames: created invite link:",r),r}catch(r){return console.error("Failed to create invite link:",r),null}}async getInviteGameId(){if(!await this.ready())return null;try{const e=window.CrazyGames.SDK.game.getInviteParam("gameId");return e?(console.log("[CrazyGames] found invite link",e),localStorage.getItem(e)==="true"?null:e):null}catch(e){return console.error("Failed to get invite gameId:",e),null}}requestMidgameAd(){return new Promise(e=>{if(!this.isReady()){e();return}try{const r={adFinished:()=>{console.log("End midgame ad"),e()},adError:i=>{console.log("Error midgame ad",i),e()},adStarted:()=>console.log("Start midgame ad")};window.CrazyGames.SDK.ad.requestAd("midgame",r)}catch(r){console.error("Failed to request midgame ad:",r),e()}})}}const ve=new IC;var PC=Object.defineProperty,$C=Object.getOwnPropertyDescriptor,Mr=(t,e,r,i)=>{for(var n=i>1?void 0:i?$C(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&PC(e,r,n),n};let ur=class extends V{constructor(){super(...arguments),this.lobbyId="",this.lobbySuffix="",this.includeLobbyQuery=!1,this.copyText="",this.displayText="",this.showVisibilityToggle=!0,this.showCopyIcon=!0,this.compact=!1,this.copySuccess=!1,this.lobbyIdVisible=!0,this.userSettings=new Gt,this.maskLabel=v`&bull;&bull;&bull;&bull;&bull;&bull;&bull;&bull;`}createRenderRoot(){return this}willUpdate(t){t.has("lobbyId")&&(this.lobbyIdVisible=this.userSettings.get("settings.lobbyIdVisibility",!0),this.copySuccess=!1),t.has("copyText")&&(this.copySuccess=!1),(t.has("showVisibilityToggle")||t.has("compact"))&&(!this.showVisibilityToggle||this.compact)&&(this.lobbyIdVisible=!0)}toggleVisibility(){!this.showVisibilityToggle||this.compact||(this.lobbyIdVisible=!this.lobbyIdVisible)}enableSelectAll(t){t.currentTarget.classList.add("select-all")}clearSelectAll(t){t.currentTarget.classList.remove("select-all")}async buildCopyUrl(){const t=await Ut();let e=`${window.location.origin}/${t.workerPath(this.lobbyId)}/game/${this.lobbyId}`;return this.includeLobbyQuery&&(e+=`?lobby&s=${encodeURIComponent(this.lobbySuffix)}`),e}async resolveCopyText(){return this.copyText?this.copyText:ve.isOnCrazyGames()?ve.createInviteLink(this.lobbyId):this.lobbyId?await this.buildCopyUrl():""}async handleCopy(){const t=await this.resolveCopyText();if(!t){alert("Error copying game id");return}await sC(t,()=>this.copySuccess=!0,()=>this.copySuccess=!1)}canCopy(){return!!(this.copyText||this.lobbyId)}render(){const t=this.canCopy(),e=this.showVisibilityToggle&&!this.compact,r=this.displayText||this.lobbyId||this.copyText,i=this.copySuccess?f("common.copied"):e&&!this.lobbyIdVisible?this.maskLabel:r,n=t?"":"opacity-60 cursor-not-allowed",a=!this.lobbyId,s=a?"opacity-60 cursor-not-allowed":"";return this.compact?v`
        <button
          @click=${this.handleCopy}
          class="text-xs text-white/60 font-mono bg-white/5 px-2 py-0.5 rounded border border-white/5 hover:bg-white/10 hover:text-white transition-colors ${n}"
          title="${f("common.click_to_copy")}"
          aria-label="${f("common.click_to_copy")}"
          ?disabled=${!t}
          type="button"
        >
          ${i}
        </button>
      `:v`
      <div
        class="flex items-center gap-0.5 bg-white/5 rounded-lg px-2 py-1 border border-white/10 max-w-[220px] flex-nowrap"
      >
        ${this.showVisibilityToggle?v`<button
              @click=${this.toggleVisibility}
              class="p-1.5 rounded-md hover:bg-white/10 text-white/60 hover:text-white transition-colors ${s}"
              title="${f("user_setting.toggle_visibility")}"
              ?disabled=${a}
              type="button"
            >
              ${this.lobbyIdVisible?v`<svg
                    viewBox="0 0 512 512"
                    height="16px"
                    width="16px"
                    fill="currentColor"
                  >
                    <path
                      d="M256 105c-101.8 0-188.4 62.7-224 151 35.6 88.3 122.2 151 224 151s188.4-62.7 224-151c-35.6-88.3-122.2-151-224-151zm0 251.7c-56 0-101.7-45.7-101.7-101.7S200 153.3 256 153.3 357.7 199 357.7 255 312 356.7 256 356.7zm0-161.1c-33 0-59.4 26.4-59.4 59.4s26.4 59.4 59.4 59.4 59.4-26.4 59.4-59.4-26.4-59.4-59.4-59.4z"
                    ></path>
                  </svg>`:v`<svg
                    viewBox="0 0 512 512"
                    height="16px"
                    width="16px"
                    fill="currentColor"
                  >
                    <path
                      d="M448 256s-64-128-192-128S64 256 64 256c32 64 96 128 192 128s160-64 192-128z"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="32"
                    ></path>
                    <path
                      d="M144 256l224 0"
                      fill="none"
                      stroke="currentColor"
                      stroke-width="32"
                      stroke-linecap="round"
                    ></path>
                  </svg>`}
            </button>`:""}
        <button
          @click=${this.handleCopy}
          @dblclick=${this.enableSelectAll}
          @mouseleave=${this.clearSelectAll}
          class="font-mono text-xs font-bold text-white px-2 cursor-pointer select-none min-w-[80px] text-center truncate tracking-wider bg-transparent border-0 ${n}"
          title="${f("common.click_to_copy")}"
          aria-label="${f("common.click_to_copy")}"
          ?disabled=${!t}
          type="button"
        >
          ${i}
        </button>
        ${this.showCopyIcon?v`<button
              @click=${this.handleCopy}
              class="p-1.5 rounded-md hover:bg-white/10 text-white/60 hover:text-white transition-colors ${n}"
              title="${f("common.click_to_copy")}"
              aria-label="${f("common.click_to_copy")}"
              ?disabled=${!t}
              type="button"
            >
              <svg
                viewBox="0 0 24 24"
                height="16px"
                width="16px"
                fill="currentColor"
                aria-hidden="true"
              >
                <path
                  d="M16 1H4c-1.1 0-2 .9-2 2v12h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"
                />
              </svg>
            </button>`:""}
      </div>
    `}};Mr([L({type:String,attribute:"lobby-id"})],ur.prototype,"lobbyId",2);Mr([L({type:String,attribute:"lobby-suffix"})],ur.prototype,"lobbySuffix",2);Mr([L({type:Boolean,attribute:"include-lobby-query"})],ur.prototype,"includeLobbyQuery",2);Mr([L({type:String,attribute:"copy-text"})],ur.prototype,"copyText",2);Mr([L({type:String,attribute:"display-text"})],ur.prototype,"displayText",2);Mr([L({type:Boolean,attribute:"show-visibility-toggle"})],ur.prototype,"showVisibilityToggle",2);Mr([L({type:Boolean,attribute:"show-copy-icon"})],ur.prototype,"showCopyIcon",2);Mr([L({type:Boolean})],ur.prototype,"compact",2);Mr([M()],ur.prototype,"copySuccess",2);Mr([M()],ur.prototype,"lobbyIdVisible",2);ur=Mr([F("copy-button")],ur);var RC=Object.defineProperty,DC=Object.getOwnPropertyDescriptor,S2=(t,e,r,i)=>{for(var n=i>1?void 0:i?DC(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&RC(e,r,n),n};let x0=class extends V{constructor(){super(...arguments),this.difficultyKey=""}createRenderRoot(){return this}getDifficultyIcon(t){const e=v`<svg
      stroke="currentColor"
      fill="none"
      stroke-width="2"
      viewBox="0 0 24 24"
      stroke-linecap="round"
      stroke-linejoin="round"
      height="100%"
      width="100%"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path d="m12.5 17-.5-1-.5 1h1z"></path>
      <path
        d="M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z"
      ></path>
      <circle cx="15" cy="12" r="1"></circle>
      <circle cx="9" cy="12" r="1"></circle>
    </svg>`,r=v`<svg
      stroke="currentColor"
      fill="currentColor"
      stroke-width="0"
      viewBox="0 0 512 512"
      xmlns="http://www.w3.org/2000/svg"
      height="100%"
      width="100%"
    >
      <path
        d="M268.725 389.28l3.74 28.7h-30.89l3.74-28.7a11.705 11.705 0 1 1 23.41 0zm33.84-71.83a29.5 29.5 0 1 0 29.5 29.5 29.5 29.5 0 0 0-29.51-29.5zm-94.4 0a29.5 29.5 0 1 0 29.5 29.5 29.5 29.5 0 0 0-29.51-29.5zm245.71-62c0 98.2-48.22 182.68-117.39 220.24-46 28.26-112.77 28.26-156.19 2.5-71.72-36.21-122.17-122.29-122.17-222.73 0-78.16 30.54-147.63 77.89-191.67 0 0-42.08 82.86 9.1 135-11.67-173.77 169.28-63 118-184 151.79 83.33 9.14 105 84.1 148.21 0 0 66.21 47 36.4-91.73 42.95 43.99 70.25 110.3 70.25 184.19zm-68.54 29.87c-2.45-65.49-54.88-119.59-120.26-124.07-3.06-.21-6.15-.31-9.16-.31a129.4 129.4 0 0 0-129.43 129.35 132.15 132.15 0 0 0 24.51 76v25a35 35 0 0 0 34.74 34.69h6.26v16.61a34.66 34.66 0 0 0 34.71 34.39h61.78a34.48 34.48 0 0 0 34.51-34.39v-16.61h5.38a34.89 34.89 0 0 0 34.62-34.75v-28a129.32 129.32 0 0 0 22.33-77.9z"
      ></path>
    </svg>`,i=v`<svg
      stroke="currentColor"
      fill="currentColor"
      stroke-width="0"
      viewBox="0 0 24 24"
      height="100%"
      width="100%"
      xmlns="http://www.w3.org/2000/svg"
    >
      <path fill="none" d="M0 0h24v24H0z"></path>
      <path
        d="M11.07 12.85c.77-1.39 2.25-2.21 3.11-3.44.91-1.29.4-3.7-2.18-3.7-1.69 0-2.52 1.28-2.87 2.34L6.54 6.96C7.25 4.83 9.18 3 11.99 3c2.35 0 3.96 1.07 4.78 2.41.7 1.15 1.11 3.3.03 4.9-1.2 1.77-2.35 2.31-2.97 3.45-.25.46-.35.76-.35 2.24h-2.89c-.01-.78-.13-2.05.48-3.15zM14 20c0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2 2 .9 2 2z"
      ></path>
    </svg>`,n="opacity-100 text-[#ff3838] drop-shadow-[0_0_4px_rgba(255,56,56,0.4)] transform group-hover:drop-shadow-[0_0_6px_rgba(255,56,56,0.6)] group-hover:-translate-y-[2px] -translate-y-[1px] transition-all duration-200",a="opacity-30 w-4 h-4 transition-all duration-200",s="w-10 h-10",o="w-4 h-4";switch(t){case"Easy":return v`
          <div class="${o} ${n}">${e}</div>
          <div class="${o} ${a}">${e}</div>
          <div class="${o} ${a}">${e}</div>
        `;case"Medium":return v`
          <div class="${o} ${n}">${e}</div>
          <div class="${o} ${n}">${e}</div>
          <div class="${o} ${a}">${e}</div>
        `;case"Hard":return v`
          <div class="${o} ${n}">${e}</div>
          <div class="${o} ${n}">${e}</div>
          <div class="${o} ${n}">${e}</div>
        `;case"Impossible":return v`
          <div class="${s} ${n}">${r}</div>
        `;default:return v`<div class="${s} ${n}">
          ${i}
        </div>`}}render(){return v`
      <div class="flex justify-center items-center h-10 gap-[6px] mt-1 group">
        ${this.getDifficultyIcon(this.difficultyKey)}
      </div>
    `}};S2([L({type:String})],x0.prototype,"difficultyKey",2);x0=S2([F("difficulty-display")],x0);var LC=Object.defineProperty,OC=Object.getOwnPropertyDescriptor,Gn=(t,e,r,i)=>{for(var n=i>1?void 0:i?OC(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&LC(e,r,n),n};const pb=150;let Ri=class extends V{constructor(){super(...arguments),this.selected=!1,this.pattern=null,this.colorPalette=null,this.requiresPurchase=!1}createRenderRoot(){return this}translateCosmetic(t,e){const r=f(`${t}.${e}`);return r.startsWith(t)?e.split("_").filter(i=>i.length>0).map(i=>i[0].toUpperCase()+i.substring(1)).join(" "):r}handleClick(){if(this.pattern===null){this.onSelect?.(null);return}this.onSelect?.({name:this.pattern.name,patternData:this.pattern.pattern,colorPalette:this.colorPalette??void 0})}handlePurchase(t){t.stopPropagation(),this.pattern?.product&&this.onPurchase?.(this.pattern,this.colorPalette??null)}render(){const t=this.pattern===null;return v`
      <div
        class="no-crazygames flex flex-col items-center justify-between gap-2 p-3 bg-white/5 backdrop-blur-sm border rounded-xl w-48 h-full transition-all duration-200 ${this.selected?"border-green-500 shadow-[0_0_15px_rgba(34,197,94,0.5)]":"hover:bg-white/10 hover:border-white/20 hover:shadow-xl border-white/10"}"
      >
        <button
          class="group relative flex flex-col items-center w-full gap-2 rounded-lg cursor-pointer transition-all duration-200
                 disabled:cursor-not-allowed flex-1"
          ?disabled=${this.requiresPurchase}
          @click=${this.handleClick}
        >
          <div class="flex flex-col items-center w-full">
            <div
              class="text-xs font-bold text-white uppercase tracking-wider mb-1 text-center truncate w-full ${this.requiresPurchase?"opacity-50":""}"
              title="${t?f("territory_patterns.pattern.default"):this.translateCosmetic("territory_patterns.pattern",this.pattern.name)}"
            >
              ${t?f("territory_patterns.pattern.default"):this.translateCosmetic("territory_patterns.pattern",this.pattern.name)}
            </div>
            ${this.colorPalette!==null?v`
                  <div
                    class="text-[10px] font-bold text-white/40 uppercase tracking-widest mb-2 text-center truncate w-full ${this.requiresPurchase?"opacity-50":""}"
                  >
                    ${this.translateCosmetic("territory_patterns.color_palette",this.colorPalette.name)}
                  </div>
                `:v`<div class="h-[22px] mb-2 w-full"></div>`}
          </div>

          <div
            class="w-full aspect-square flex items-center justify-center bg-white/5 rounded-lg p-2 border border-white/10 group-hover:border-white/20 transition-colors duration-200 overflow-hidden"
          >
            ${_0(this.pattern!==null?{name:this.pattern.name,patternData:this.pattern.pattern,colorPalette:this.colorPalette??void 0}:ky,pb,pb)}
          </div>
        </button>

        ${this.requiresPurchase&&this.pattern?.product?v`
              <div class="w-full mt-2">
                <button
                  class="w-full px-4 py-2 bg-green-500/20 text-green-400 border border-green-500/30 rounded-lg text-xs font-bold uppercase tracking-wider cursor-pointer transition-all duration-200
                   hover:bg-green-500/30 hover:shadow-[0_0_15px_rgba(74,222,128,0.2)]"
                  @click=${this.handlePurchase}
                >
                  ${f("territory_patterns.purchase")}
                  <span class="ml-1 text-white/60"
                    >(${this.pattern.product.price})</span
                  >
                </button>
              </div>
            `:null}
      </div>
    `}};Gn([L({type:Boolean})],Ri.prototype,"selected",2);Gn([L({type:Object})],Ri.prototype,"pattern",2);Gn([L({type:Object})],Ri.prototype,"colorPalette",2);Gn([L({type:Boolean})],Ri.prototype,"requiresPurchase",2);Gn([L({type:Function})],Ri.prototype,"onSelect",2);Gn([L({type:Function})],Ri.prototype,"onPurchase",2);Ri=Gn([F("pattern-button")],Ri);function _0(t,e,r){return t===null?BC():v`<img
    src="${zC(t,e,r)}"
    alt="Pattern preview"
    class="w-full h-full object-contain [image-rendering:pixelated]"
  />`}function BC(t,e){return v`
    <div
      class="md:hidden flex items-center justify-center h-full w-full bg-white rounded overflow-hidden relative border border-[#ccc] box-border"
    >
      <div
        class="grid grid-cols-2 grid-rows-2 gap-0 w-[calc(100%-1px)] h-[calc(100%-2px)] box-border"
      >
        <div class="bg-white border border-black/10 box-border"></div>
        <div class="bg-white border border-black/10 box-border"></div>
        <div class="bg-white border border-black/10 box-border"></div>
        <div class="bg-white border border-black/10 box-border"></div>
      </div>
    </div>
    <div
      class="hidden md:flex items-center justify-center h-full w-full rounded overflow-hidden relative text-center p-1"
    >
      <span
        class="text-[10px] font-black text-white/40 uppercase leading-none break-words w-full"
      >
        ${f("territory_patterns.select_skin")}
      </span>
    </div>
  `}const Bd=new Map,NC=new di("#ffffff").toRgb(),UC=new di("#000000").toRgb();function zC(t,e,r){t??=ky;const i=[t.name,t.colorPalette?.primaryColor??"undefined",t.colorPalette?.secondaryColor??"undefined",e,r].join("-");if(Bd.has(i))return Bd.get(i);let n;try{n=new yy({name:t.name,patternData:t.patternData,colorPalette:t.colorPalette},Uo)}catch(y){return console.error("Error decoding pattern",y),""}const a=n.scaledWidth(),s=n.scaledHeight();e=e===void 0?a:Math.max(1,Math.floor(e/a))*a,r=r===void 0?s:Math.max(1,Math.floor(r/s))*s;const o=document.createElement("canvas");o.width=e,o.height=r;const l=o.getContext("2d");if(!l)throw new Error("2D context not supported");const c=l.createImageData(e,r),u=c.data,p=t.colorPalette?.primaryColor?new di(t.colorPalette.primaryColor).toRgb():NC,d=t.colorPalette?.secondaryColor?new di(t.colorPalette.secondaryColor).toRgb():UC;let h=0;for(let y=0;y<r;y++)for(let x=0;x<e;x++){const m=n.isPrimary(x,y)?p:d;u[h++]=m.r,u[h++]=m.g,u[h++]=m.b,u[h++]=255}l.putImageData(c,0,0);const g=o.toDataURL("image/png");return Bd.set(i,g),g}const HC="flex flex-wrap items-center gap-2 shrink-0",FC="border-b border-white/10",qC="p-6",jC="flex items-center gap-4 flex-1",GC="group flex items-center justify-center w-10 h-10 rounded-full shrink-0 bg-white/5 hover:bg-white/10 transition-all border border-white/10",VC="text-white text-xl sm:text-2xl md:text-3xl font-bold uppercase tracking-widest break-words hyphens-auto",El=(...t)=>t.filter(Boolean).join(" "),It=({title:t,titleContent:e,onBack:r,ariaLabel:i="Back",rightContent:n,leftClassName:a,buttonClassName:s,titleClassName:o,padded:l=!0,showDivider:c=!0})=>{const u=El(HC,c?FC:void 0,l?qC:void 0),p=El(jC,a),d=El(GC,s),h=El(VC,o);return v`
    <div class="${u}">
      <div class="${p}">
        <button
          @click=${r}
          class="${d}"
          aria-label="${i}"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="w-5 h-5 text-gray-400 group-hover:text-white transition-colors"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M10 19l-7-7m0 0l7-7m-7 7h18"
            />
          </svg>
        </button>
        ${e??v`<span class="${h}">${t}</span>`}
      </div>
      ${n??""}
    </div>
  `};var WC=Object.defineProperty,KC=Object.getOwnPropertyDescriptor,Gp=(t,e,r,i)=>{for(var n=i>1?void 0:i?KC(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&WC(e,r,n),n};let Cc=class extends gt{constructor(){super(),this.email="",this.isLoadingUser=!1,this.userMeResponse=null,this.statsTree=null,this.recentGames=[],document.addEventListener("userMeResponse",t=>{const e=t;e.detail?(this.userMeResponse=e.detail,this.userMeResponse?.player?.publicId===void 0&&(this.statsTree=null,this.recentGames=[])):(this.statsTree=null,this.recentGames=[],this.requestUpdate())})}hasAnyStats(){return this.statsTree?Object.keys(this.statsTree).length>0&&Object.values(this.statsTree).some(t=>t&&Object.keys(t).length>0):!1}render(){const t=this.isLoadingUser?v`
          <div
            class="flex flex-col items-center justify-center p-12 text-white bg-black/60 backdrop-blur-md rounded-2xl border border-white/10 h-full min-h-[400px]"
          >
            <div
              class="w-12 h-12 border-4 border-blue-500/30 border-t-blue-500 rounded-full animate-spin mb-4"
            ></div>
            <p class="text-white/60 font-medium tracking-wide animate-pulse">
              ${f("account_modal.fetching_account")}
            </p>
          </div>
        `:this.renderInner();return this.inline?t:v`
      <o-modal
        id="account-modal"
        title=""
        ?hideCloseButton=${!0}
        ?inline=${this.inline}
        hideHeader
      >
        ${t}
      </o-modal>
    `}renderInner(){const t=!!this.userMeResponse?.user,e=f("account_modal.title"),r=this.userMeResponse?.player?.publicId??"",i=r||f("account_modal.not_found");return v`
      <div
        class="h-full flex flex-col bg-black/60 backdrop-blur-md rounded-2xl border border-white/10 overflow-hidden"
      >
        ${It({title:e,onBack:()=>this.close(),ariaLabel:f("common.back"),rightContent:t?v`
                <div class="flex items-center gap-2">
                  <span
                    class="text-xs text-blue-400 font-bold uppercase tracking-wider"
                    >${f("account_modal.personal_player_id")}</span
                  >
                  <copy-button
                    .lobbyId=${r}
                    .copyText=${r}
                    .displayText=${i}
                  ></copy-button>
                </div>
              `:void 0})}

        <div class="flex-1 overflow-y-auto custom-scrollbar mr-1">
          ${t?this.renderAccountInfo():this.renderLoginOptions()}
        </div>
      </div>
    `}renderAccountInfo(){const t=this.userMeResponse?.user;return t?.discord??t?.email?v`
      <div class="p-6">
        <div class="flex flex-col gap-6">
          <!-- Top Row: Connected As -->
          <div class="bg-white/5 rounded-xl border border-white/10 p-6">
            <div class="flex flex-col items-center gap-4">
              <div
                class="text-xs text-white/40 uppercase tracking-widest font-bold border-b border-white/5 pb-2 px-8"
              >
                ${f("account_modal.connected_as")}
              </div>
              <div class="flex items-center gap-8 justify-center flex-wrap">
                <discord-user-header
                  .data=${this.userMeResponse?.user?.discord??null}
                ></discord-user-header>
                ${this.renderLoggedInAs()}
              </div>
            </div>
          </div>

          <!-- Middle Row: Stats Section -->
          ${this.hasAnyStats()?v`<div
                class="bg-white/5 rounded-xl border border-white/10 p-6"
              >
                <h3
                  class="text-lg font-bold text-white mb-4 flex items-center gap-2"
                >
                  <span class="text-blue-400">📊</span>
                  ${f("account_modal.stats_overview")}
                </h3>
                <player-stats-tree-view
                  .statsTree=${this.statsTree}
                ></player-stats-tree-view>
              </div>`:""}

          <!-- Bottom Row: Recent Games Section -->
          <div class="bg-white/5 rounded-xl border border-white/10 p-6">
            <h3
              class="text-lg font-bold text-white mb-4 flex items-center gap-2"
            >
              <span class="text-blue-400">🎮</span>
              ${f("game_list.recent_games")}
            </h3>
            <game-list
              .games=${this.recentGames}
              .onViewGame=${r=>{this.viewGame(r)}}
            ></game-list>
          </div>
        </div>
      </div>
    `:this.renderLoginOptions()}renderLoggedInAs(){const t=this.userMeResponse?.user;return t?.discord?v`
        <div class="flex flex-col items-center gap-3 w-full">
          ${this.renderLogoutButton()}
        </div>
      `:t?.email?v`
        <div class="flex flex-col items-center gap-3 w-full">
          <div class="text-white text-lg font-medium">
            ${f("account_modal.linked_account",{account_name:t.email})}
          </div>
          ${this.renderLogoutButton()}
        </div>
      `:v``}async viewGame(t){this.close();const e=await Ut(),r=encodeURIComponent(t),i=`/${e.workerPath(t)}/game/${r}`;history.pushState({join:t},"",i),window.dispatchEvent(new CustomEvent("join-changed",{detail:{gameId:r}}))}renderLogoutButton(){return v`
      <button
        @click="${this.handleLogout}"
        class="px-6 py-2 text-sm font-bold text-white uppercase tracking-wider bg-red-600/80 hover:bg-red-600 border border-red-500/50 rounded-lg transition-all shadow-lg hover:shadow-red-900/40"
      >
        ${f("account_modal.log_out")}
      </button>
    `}renderLoginOptions(){return v`
      <div class="flex items-center justify-center p-6 min-h-full">
        <div
          class="w-full max-w-md bg-white/5 rounded-2xl border border-white/10 p-8"
        >
          <div class="text-center mb-8">
            <div
              class="w-16 h-16 bg-gradient-to-br from-blue-500/20 to-purple-500/20 rounded-2xl flex items-center justify-center mx-auto mb-6 border border-white/10 shadow-inner"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="w-8 h-8 text-blue-400"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path>
                <polyline points="10 17 15 12 10 7"></polyline>
                <line x1="15" y1="12" x2="3" y2="12"></line>
              </svg>
            </div>
            <p class="text-white/50 text-sm font-medium">
              ${f("account_modal.sign_in_desc")}
            </p>
          </div>

          <div class="space-y-6">
            <!-- Discord Login Button -->
            <button
              @click="${this.handleDiscordLogin}"
              class="w-full px-6 py-4 text-white bg-[#5865F2] hover:bg-[#4752C4] border border-transparent rounded-xl focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-[#5865F2] transition-colors duration-200 flex items-center justify-center gap-3 group relative overflow-hidden shadow-lg hover:shadow-[#5865F2]/20"
            >
              <img
                src="/images/DiscordLogo.svg"
                alt="Discord"
                class="w-6 h-6 relative z-10"
              />
              <span class="font-bold relative z-10 tracking-wide"
                >${f("main.login_discord")||f("account_modal.link_discord")}</span
              >
            </button>

            <!-- Divider -->
            <div class="flex items-center gap-4 py-2">
              <div class="h-px bg-white/10 flex-1"></div>
              <span
                class="text-[10px] uppercase tracking-widest text-white/30 font-bold"
              >
                ${f("account_modal.or")}
              </span>
              <div class="h-px bg-white/10 flex-1"></div>
            </div>

            <!-- Email Recovery -->
            <div class="space-y-3">
              <div class="relative group">
                <input
                  type="email"
                  id="email"
                  name="email"
                  .value="${this.email}"
                  @input="${this.handleEmailInput}"
                  class="w-full pl-4 pr-12 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-white/20 focus:outline-none focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500/50 transition-all font-medium hover:bg-white/10"
                  placeholder="${f("account_modal.email_placeholder")}"
                  required
                />
              </div>
              <button
                @click="${this.handleSubmit}"
                class="w-full px-6 py-3 text-sm font-bold text-white uppercase tracking-wider bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-500 hover:to-blue-600 rounded-xl transition-all shadow-lg hover:shadow-blue-900/40 border border-white/5"
              >
                ${f("account_modal.get_magic_link")}
              </button>
            </div>
          </div>

          <div class="mt-8 text-center border-t border-white/10 pt-6">
            <button
              @click="${this.handleLogout}"
              class="text-[10px] font-bold text-white/20 hover:text-red-400 transition-colors uppercase tracking-widest pb-0.5"
            >
              ${f("account_modal.clear_session")}
            </button>
          </div>
        </div>
      </div>
    `}handleEmailInput(t){const e=t.target;this.email=e.value}async handleSubmit(){if(!this.email){alert(f("account_modal.enter_email_address"));return}const t=await pC(this.email);alert(t?f("account_modal.recovery_email_sent",{email:this.email}):f("account_modal.failed_to_send_recovery_email"))}handleDiscordLogin(){uC()}onOpen(){this.isLoadingUser=!0,jo().then(t=>{t&&(this.userMeResponse=t,this.userMeResponse?.player?.publicId&&this.loadPlayerProfile(this.userMeResponse.player.publicId)),this.isLoadingUser=!1,this.requestUpdate()}).catch(t=>{console.warn("Failed to fetch user info in AccountModal.open():",t),this.isLoadingUser=!1,this.requestUpdate()}),this.requestUpdate()}onClose(){this.dispatchEvent(new CustomEvent("close",{bubbles:!0,composed:!0}))}async handleLogout(){await wo(),this.close(),window.location.reload()}async loadPlayerProfile(t){try{const e=await fC(t);if(!e){this.requestUpdate();return}this.recentGames=e.games,this.statsTree=e.stats,this.requestUpdate()}catch(e){console.warn("Failed to load player data:",e),this.requestUpdate()}}};Gp([M()],Cc.prototype,"email",2);Gp([M()],Cc.prototype,"isLoadingUser",2);Cc=Gp([F("account-modal")],Cc);var ye=(t=>(t[t.Tile=0]="Tile",t[t.Unit=1]="Unit",t[t.Player=2]="Player",t[t.DisplayEvent=3]="DisplayEvent",t[t.DisplayChatEvent=4]="DisplayChatEvent",t[t.AllianceRequest=5]="AllianceRequest",t[t.AllianceRequestReply=6]="AllianceRequestReply",t[t.BrokeAlliance=7]="BrokeAlliance",t[t.AllianceExpired=8]="AllianceExpired",t[t.AllianceExtension=9]="AllianceExtension",t[t.TargetPlayer=10]="TargetPlayer",t[t.Emoji=11]="Emoji",t[t.Win=12]="Win",t[t.Hash=13]="Hash",t[t.UnitIncoming=14]="UnitIncoming",t[t.BonusEvent=15]="BonusEvent",t[t.RailroadDestructionEvent=16]="RailroadDestructionEvent",t[t.RailroadConstructionEvent=17]="RailroadConstructionEvent",t[t.RailroadSnapEvent=18]="RailroadSnapEvent",t[t.ConquestEvent=19]="ConquestEvent",t[t.EmbargoEvent=20]="EmbargoEvent",t[t.GamePaused=21]="GamePaused",t))(ye||{});class A2{constructor(){}smallID(){return 0}clientID(){return"TERRA_NULLIUS_CLIENT_ID"}id(){return null}isPlayer(){return!1}}class YC{constructor(e){this.gm=e,this.cellSize=100,this.grid=Array(Math.ceil(e.height()/this.cellSize)).fill(null).map(()=>Array(Math.ceil(e.width()/this.cellSize)).fill(null).map(()=>new Map))}getGridCoords(e,r){return[Math.floor(e/this.cellSize),Math.floor(r/this.cellSize)]}addUnit(e){const r=e.tile(),[i,n]=this.getGridCoords(this.gm.x(r),this.gm.y(r));if(this.isValidCell(i,n)){const a=this.grid[n][i].get(e.type());a!==void 0?a.add(e):this.grid[n][i].set(e.type(),new Set([e]))}}removeUnit(e){const r=e.tile();this.removeUnitByTile(e,r)}removeUnitByTile(e,r){const[i,n]=this.getGridCoords(this.gm.x(r),this.gm.y(r));if(this.isValidCell(i,n)){const a=this.grid[n][i].get(e.type());a!==void 0&&a.delete(e)}}updateUnitCell(e){const r=e.tile(),i=e.lastTile(),[n,a]=this.getGridCoords(this.gm.x(i),this.gm.y(i)),[s,o]=this.getGridCoords(this.gm.x(r),this.gm.y(r));(n!==s||a!==o)&&(this.removeUnitByTile(e,i),this.addUnit(e))}isValidCell(e,r){return e>=0&&e<this.grid[0].length&&r>=0&&r<this.grid.length}getCellsInRange(e,r){const i=this.gm.x(e),n=this.gm.y(e),a=this.cellSize,[s,o]=this.getGridCoords(i,n),l=Math.max(0,s-Math.ceil((r-i%a)/a)),c=Math.min(this.grid[0].length-1,s+Math.ceil((r-(a-i%a))/a)),u=Math.max(0,o-Math.ceil((r-n%a)/a)),p=Math.min(this.grid.length-1,o+Math.ceil((r-(a-n%a))/a));return{startGridX:l,endGridX:c,startGridY:u,endGridY:p}}squaredDistanceFromTile(e,r){const i=this.gm.x(r),n=this.gm.y(r),a=this.gm.x(e.tile()),s=this.gm.y(e.tile()),o=a-i,l=s-n;return o*o+l*l}nearbyUnits(e,r,i,n,a=!1){const s=[],{startGridX:o,endGridX:l,startGridY:c,endGridY:u}=this.getCellsInRange(e,r),p=r*r,d=Array.isArray(i)?new Set(i):new Set([i]);for(let h=c;h<=u;h++)for(let g=o;g<=l;g++)for(const y of d){const x=this.grid[h][g].get(y);if(x!==void 0)for(const m of x){if(!m.isActive()||!a&&m.isUnderConstruction())continue;const k=this.squaredDistanceFromTile(m,e);if(k>p)continue;const S={unit:m,distSquared:k};n!==void 0&&!n(S)||s.push(S)}}return s}unitIsInRange(e,r,i,n,a=!1){return!e.isActive()||!a&&e.isUnderConstruction()||n!==void 0&&e.owner().id()!==n?!1:this.squaredDistanceFromTile(e,r)<=i}hasUnitNearby(e,r,i,n,a=!1){const{startGridX:s,endGridX:o,startGridY:l,endGridY:c}=this.getCellsInRange(e,r),u=r*r;for(let p=l;p<=c;p++)for(let d=s;d<=o;d++){const h=this.grid[p][d].get(i);if(h!==void 0){for(const g of h)if(this.unitIsInRange(g,e,u,n,a))return!0}}return!1}anyUnitNearby(e,r,i,n,a,s=!1){const{startGridX:o,endGridX:l,startGridY:c,endGridY:u}=this.getCellsInRange(e,r),p=r*r;for(let d=c;d<=u;d++)for(let h=o;h<=l;h++)for(const g of i){const y=this.grid[d][h].get(g);if(y!==void 0){for(const x of y)if(this.unitIsInRange(x,e,p,a,s)&&n(x))return!0}}return!1}}const Nd=new Gt,Ud={r:0,g:255,b:0},zd={r:255,g:0,b:0},nr=.35;class XC{constructor(e,r){this.gameView=e,this.data=r,this._wasUpdated=!0,this.lastPos=[],this.lastPos.push(r.pos),this._createdAt=this.gameView.ticks()}createdAt(){return this._createdAt}wasUpdated(){return this._wasUpdated}lastTiles(){return this.lastPos}lastTile(){return this.lastPos.length===0?this.data.pos:this.lastPos[0]}update(e){this.lastPos.push(e.pos),this._wasUpdated=!0,this.data=e}id(){return this.data.id}targetable(){return this.data.targetable}markedForDeletion(){return this.data.markedForDeletion}type(){return this.data.unitType}troops(){return this.data.troops}retreating(){if(this.type()!==C.TransportShip)throw Error("Must be a transport ship");return this.data.retreating}tile(){return this.data.pos}owner(){return this.gameView.playerBySmallID(this.data.ownerID)}isActive(){return this.data.isActive}reachedTarget(){return this.data.reachedTarget}hasHealth(){return this.data.health!==void 0}health(){return this.data.health??0}isUnderConstruction(){return this.data.underConstruction===!0}targetUnitId(){return this.data.targetUnitId}targetTile(){return this.data.targetTile}missileReadinesss(){const e=this.data.level,r=this.data.missileTimerQueue.length;if(r===0)return 1;const i=e-r;if(i===0&&e>1)return 0;let n=i/e;const a=this.data.unitType===C.SAMLauncher?this.gameView.config().SAMCooldown():this.gameView.config().SiloCooldown();for(const s of this.data.missileTimerQueue){const c=(this.gameView.ticks()-s)/a/e;n+=c}return n}level(){return this.data.level}hasTrainStation(){return this.data.hasTrainStation}trainType(){return this.data.trainType}isLoaded(){return this.data.loaded}}class ao{constructor(e,r,i,n){this.game=e,this.data=r,this.nameData=i,this.cosmetics=n,this.anonymousName=null,r.clientID===e.myClientID()?this.anonymousName=this.data.name:this.anonymousName=Py(this.data.name,this.data.playerType);const a=this.game.config().theme().territoryColor(this),s=this.game.config().theme().borderColor(a),o=Nd.territoryPatterns()?this.cosmetics.pattern:void 0;o&&(o.colorPalette??={name:"",primaryColor:a.toHex(),secondaryColor:s.toHex()}),this.team()===null?this._territoryColor=b(this.cosmetics.color?.color??o?.colorPalette?.primaryColor??a.toHex()):this._territoryColor=a,this._structureColors=this.game.config().theme().structureColors(this._territoryColor);const l=this.game.myClientID()===this.data.clientID?this.game.config().theme().focusedBorderColor():s;this._borderColor=new di(o?.colorPalette?.secondaryColor??this.cosmetics.color?.color??l.toHex());const c=this.game.config().theme(),u=this._borderColor.toRgb();this._borderColorNeutral=this._borderColor,this._borderColorFriendly=b({r:Math.round(u.r*(1-nr)+Ud.r*nr),g:Math.round(u.g*(1-nr)+Ud.g*nr),b:Math.round(u.b*(1-nr)+Ud.b*nr),a:u.a}),this._borderColorEmbargo=b({r:Math.round(u.r*(1-nr)+zd.r*nr),g:Math.round(u.g*(1-nr)+zd.g*nr),b:Math.round(u.b*(1-nr)+zd.b*nr),a:u.a}),this._borderColorDefendedNeutral=c.defendedBorderColors(this._borderColorNeutral),this._borderColorDefendedFriendly=c.defendedBorderColors(this._borderColorFriendly),this._borderColorDefendedEmbargo=c.defendedBorderColors(this._borderColorEmbargo),this.decoder=o===void 0?void 0:new yy(o,Uo)}territoryColor(e){return e===void 0||this.decoder===void 0?this._territoryColor:this.decoder.isPrimary(this.game.x(e),this.game.y(e))?this._territoryColor:this._borderColor}structureColors(){return this._structureColors}borderColor(e,r=!1){if(e===void 0)return this._borderColor;const{hasEmbargo:i,hasFriendly:n}=this.borderRelationFlags(e);let a,s;if(i?(a=this._borderColorEmbargo,s=this._borderColorDefendedEmbargo):n?(a=this._borderColorFriendly,s=this._borderColorDefendedFriendly):(a=this._borderColorNeutral,s=this._borderColorDefendedNeutral),!r)return a;const o=this.game.x(e),l=this.game.y(e);return o%2===0&&l%2===0||l%2===1&&o%2===1?s.light:s.dark}borderRelationFlags(e){const r=this.smallID();let i=!1,n=!1;for(const a of this.game.neighbors(e)){if(!this.game.hasOwner(a))continue;const s=this.game.owner(a);if(!(!s.isPlayer()||s.smallID()===r)){if(this.hasEmbargo(s)){i=!0;break}(this.isFriendly(s)||s.isFriendly(this))&&(n=!0)}}return{hasEmbargo:i,hasFriendly:n}}async actions(e){return this.game.worker.playerInteraction(this.id(),e&&this.game.x(e),e&&this.game.y(e))}async borderTiles(){return this.game.worker.playerBorderTiles(this.id())}outgoingAttacks(){return this.data.outgoingAttacks}incomingAttacks(){return this.data.incomingAttacks}async attackAveragePosition(e,r){return this.game.worker.attackAveragePosition(e,r)}units(...e){return this.game.units(...e).filter(r=>r.owner().smallID()===this.smallID())}nameLocation(){return this.nameData}smallID(){return this.data.smallID}name(){return this.anonymousName!==null&&Nd.anonymousNames()?this.anonymousName:this.data.name}displayName(){return this.anonymousName!==null&&Nd.anonymousNames()?this.anonymousName:this.data.name}clientID(){return this.data.clientID}id(){return this.data.id}team(){return this.data.team??null}type(){return this.data.playerType}isAlive(){return this.data.isAlive}isPlayer(){return!0}numTilesOwned(){return this.data.tilesOwned}allies(){return this.data.allies.map(e=>this.game.playerBySmallID(e))}targets(){return this.data.targets.map(e=>this.game.playerBySmallID(e))}gold(){return this.data.gold}troops(){return this.data.troops}totalUnitLevels(e){return this.units(e).filter(r=>!r.isUnderConstruction()).map(r=>r.level()).reduce((r,i)=>r+i,0)}isMe(){return this.smallID()===this.game.myPlayer()?.smallID()}isLobbyCreator(){return this.data.isLobbyCreator}isAlliedWith(e){return this.data.allies.some(r=>e.smallID()===r)}isOnSameTeam(e){return this.data.team!==void 0&&this.data.team===e.data.team}isFriendly(e){return this.isAlliedWith(e)||this.isOnSameTeam(e)}isRequestingAllianceWith(e){return this.data.outgoingAllianceRequests.some(r=>e.id()===r)}alliances(){return this.data.alliances}hasEmbargoAgainst(e){return this.data.embargoes.has(e.id())}hasEmbargo(e){return this.hasEmbargoAgainst(e)||e.hasEmbargoAgainst(this)}profile(){return this.game.worker.playerProfile(this.smallID())}bestTransportShipSpawn(e){return this.game.worker.transportShipSpawn(this.id(),e)}transitiveTargets(){return[...this.targets(),...this.allies().flatMap(e=>e.targets())]}isTraitor(){return this.data.isTraitor}getTraitorRemainingTicks(){return Math.max(0,this.data.traitorRemainingTicks??0)}outgoingEmojis(){return this.data.outgoingEmojis}hasSpawned(){return this.data.hasSpawned}isDisconnected(){return this.data.isDisconnected}lastDeleteUnitTick(){return this.data.lastDeleteUnitTick}deleteUnitCooldown(){return Math.max(0,this.game.config().deleteUnitCooldown()-(this.game.ticks()+1-this.lastDeleteUnitTick()))/10}}class ZC{constructor(e,r,i,n,a,s){this.worker=e,this._config=r,this._mapData=i,this._myClientID=n,this._gameID=a,this.humans=s,this.smallIDToID=new Map,this._players=new Map,this._units=new Map,this.updatedTiles=[],this._myPlayer=null,this.toDelete=new Set,this._cosmetics=new Map,this._map=this._mapData.gameMap,this.lastUpdate=null,this.unitGrid=new YC(this._map),this._cosmetics=new Map(this.humans.map(o=>[o.clientID,o.cosmetics??{}]));for(const o of this._mapData.nations)this._cosmetics.set(o.name,{flag:o.flag})}isOnEdgeOfMap(e){return this._map.isOnEdgeOfMap(e)}updatesSinceLastTick(){return this.lastUpdate?.updates??null}update(e){if(this.toDelete.forEach(r=>this._units.delete(r)),this.toDelete.clear(),this.lastUpdate=e,this.updatedTiles=[],this.lastUpdate.packedTileUpdates.forEach(r=>{this.updatedTiles.push(this.updateTile(r))}),e.updates===null)throw new Error("lastUpdate.updates not initialized");e.updates[ye.Player].forEach(r=>{this.smallIDToID.set(r.smallID,r.id);const i=this._players.get(r.id);i!==void 0?(i.data=r,i.nameData=e.playerNameViewData[r.id]):this._players.set(r.id,new ao(this,r,e.playerNameViewData[r.id],this._cosmetics.get(r.clientID??"")??this._cosmetics.get(r.name)??{}))}),this._myPlayer??=this.playerByClientID(this._myClientID);for(const r of this._units.values())r._wasUpdated=!1,r.lastPos=r.lastPos.slice(-1);e.updates[ye.Unit].forEach(r=>{let i=this._units.get(r.id);i!==void 0?i.update(r):(i=new XC(this,r),this._units.set(r.id,i),this.unitGrid.addUnit(i)),r.isActive?i.tile()!==i.lastTile()&&this.unitGrid.updateUnitCell(i):this.unitGrid.removeUnit(i),i.isActive()||this.toDelete.add(i.id())})}recentlyUpdatedTiles(){return this.updatedTiles}nearbyUnits(e,r,i,n){return this.unitGrid.nearbyUnits(e,r,i,n)}hasUnitNearby(e,r,i,n,a){return this.unitGrid.hasUnitNearby(e,r,i,n,a)}anyUnitNearby(e,r,i,n,a,s){return this.unitGrid.anyUnitNearby(e,r,i,n,a,s)}myClientID(){return this._myClientID}myPlayer(){return this._myPlayer}player(e){const r=this._players.get(e);if(r===void 0)throw Error(`player id ${e} not found`);return r}players(){return Array.from(this._players.values())}playerBySmallID(e){if(e===0)return new A2;const r=this.smallIDToID.get(e);if(r===void 0)throw new Error(`small id ${e} not found`);return this.player(r)}playerByClientID(e){const r=Array.from(this._players.values()).filter(i=>i.clientID()===e)[0]??null;return r===null?null:r}hasPlayer(e){return!1}playerViews(){return Array.from(this._players.values())}owner(e){return this.playerBySmallID(this.ownerID(e))}ticks(){return this.lastUpdate===null?0:this.lastUpdate.tick}inSpawnPhase(){return this.ticks()<=this._config.numSpawnPhaseTurns()}config(){return this._config}units(...e){return e.length===0?Array.from(this._units.values()).filter(r=>r.isActive()):Array.from(this._units.values()).filter(r=>r.isActive()&&e.includes(r.type()))}unit(e){return this._units.get(e)}unitInfo(e){return this._config.unitInfo(e)}ref(e,r){return this._map.ref(e,r)}isValidRef(e){return this._map.isValidRef(e)}x(e){return this._map.x(e)}y(e){return this._map.y(e)}cell(e){return this._map.cell(e)}width(){return this._map.width()}height(){return this._map.height()}numLandTiles(){return this._map.numLandTiles()}isValidCoord(e,r){return this._map.isValidCoord(e,r)}isLand(e){return this._map.isLand(e)}isOceanShore(e){return this._map.isOceanShore(e)}isOcean(e){return this._map.isOcean(e)}isShoreline(e){return this._map.isShoreline(e)}magnitude(e){return this._map.magnitude(e)}ownerID(e){return this._map.ownerID(e)}hasOwner(e){return this._map.hasOwner(e)}setOwnerID(e,r){return this._map.setOwnerID(e,r)}hasFallout(e){return this._map.hasFallout(e)}setFallout(e,r){return this._map.setFallout(e,r)}isBorder(e){return this._map.isBorder(e)}neighbors(e){return this._map.neighbors(e)}isWater(e){return this._map.isWater(e)}isLake(e){return this._map.isLake(e)}isShore(e){return this._map.isShore(e)}cost(e){return this._map.cost(e)}terrainType(e){return this._map.terrainType(e)}forEachTile(e){return this._map.forEachTile(e)}manhattanDist(e,r){return this._map.manhattanDist(e,r)}euclideanDistSquared(e,r){return this._map.euclideanDistSquared(e,r)}circleSearch(e,r,i){return this._map.circleSearch(e,r,i)}bfs(e,r){return this._map.bfs(e,r)}toTileUpdate(e){return this._map.toTileUpdate(e)}updateTile(e){return this._map.updateTile(e)}numTilesWithFallout(){return this._map.numTilesWithFallout()}gameID(){return this._gameID}focusedPlayer(){return this.myPlayer()}}const Ge=class Ge{constructor(e,r,i,n){if(this.numLandTiles_=n,this._numTilesWithFallout=0,i.length!==e*r)throw new Error(`Terrain data length ${i.length} doesn't match dimensions ${e}x${r}`);this.width_=e,this.height_=r,this.terrain=i,this.state=new Uint16Array(e*r);let a=0;this.refToX=new Array(e*r),this.refToY=new Array(e*r),this.yToRef=new Array(r);for(let s=0;s<r;s++){this.yToRef[s]=a;for(let o=0;o<e;o++)this.refToX[a]=o,this.refToY[a]=s,a++}}numTilesWithFallout(){return this._numTilesWithFallout}ref(e,r){if(!this.isValidCoord(e,r))throw new Error(`Invalid coordinates: ${e},${r}`);return this.yToRef[r]+e}isValidRef(e){return e>=0&&e<this.refToX.length}x(e){return this.refToX[e]}y(e){return this.refToY[e]}cell(e){return new We(this.x(e),this.y(e))}width(){return this.width_}height(){return this.height_}numLandTiles(){return this.numLandTiles_}isValidCoord(e,r){return e>=0&&e<this.width_&&r>=0&&r<this.height_}isLand(e){return!!(this.terrain[e]&1<<Ge.IS_LAND_BIT)}isOceanShore(e){return this.isLand(e)&&this.neighbors(e).some(r=>this.isOcean(r))}isOcean(e){return!!(this.terrain[e]&1<<Ge.OCEAN_BIT)}isShoreline(e){return!!(this.terrain[e]&1<<Ge.SHORELINE_BIT)}magnitude(e){return this.terrain[e]&Ge.MAGNITUDE_MASK}ownerID(e){return this.state[e]&Ge.PLAYER_ID_MASK}hasOwner(e){return this.ownerID(e)!==0}setOwnerID(e,r){if(r>Ge.PLAYER_ID_MASK)throw new Error(`Player ID ${r} exceeds maximum value ${Ge.PLAYER_ID_MASK}`);this.state[e]=this.state[e]&~Ge.PLAYER_ID_MASK|r}hasFallout(e){return!!(this.state[e]&1<<Ge.FALLOUT_BIT)}setFallout(e,r){const i=this.hasFallout(e);r?i||(this._numTilesWithFallout++,this.state[e]|=1<<Ge.FALLOUT_BIT):i&&(this._numTilesWithFallout--,this.state[e]&=~(1<<Ge.FALLOUT_BIT))}isOnEdgeOfMap(e){const r=this.x(e),i=this.y(e);return r===0||r===this.width()-1||i===0||i===this.height()-1}isBorder(e){return this.neighbors(e).some(r=>this.ownerID(r)!==this.ownerID(e))}hasDefenseBonus(e){return!!(this.state[e]&1<<Ge.DEFENSE_BONUS_BIT)}setDefenseBonus(e,r){r?this.state[e]|=1<<Ge.DEFENSE_BONUS_BIT:this.state[e]&=~(1<<Ge.DEFENSE_BONUS_BIT)}isWater(e){return!this.isLand(e)}isLake(e){return!this.isLand(e)&&!this.isOcean(e)}isShore(e){return this.isLand(e)&&this.isShoreline(e)}cost(e){return this.magnitude(e)<10?2:1}terrainType(e){if(this.isLand(e)){const r=this.magnitude(e);return r<10?rt.Plains:r<20?rt.Highland:rt.Mountain}return this.isOcean(e)?rt.Ocean:rt.Lake}neighbors(e){const r=[],i=this.width_,n=this.refToX[e];return e>=i&&r.push(e-i),e<(this.height_-1)*i&&r.push(e+i),n!==0&&r.push(e-1),n!==i-1&&r.push(e+1),r}forEachTile(e){for(let r=0;r<this.width_*this.height_;r++)e(r)}manhattanDist(e,r){return Math.abs(this.x(e)-this.x(r))+Math.abs(this.y(e)-this.y(r))}euclideanDistSquared(e,r){const i=this.x(e)-this.x(r),n=this.y(e)-this.y(r);return i*i+n*n}circleSearch(e,r,i){const n={x:this.x(e),y:this.y(e)},a=new Set,s=Math.max(0,n.x-r),o=Math.min(this.width_-1,n.x+r),l=Math.max(0,n.y-r),c=Math.min(this.height_-1,n.y+r);for(let u=s;u<=o;++u)for(let p=l;p<=c;p++){const d=this.yToRef[p]+u,h=this.euclideanDistSquared(e,d);h>r*r||(!i||i(d,h))&&a.add(d)}return a}bfs(e,r){const i=new Set,n=[];for(r(this,e)&&(i.add(e),n.push(e));n.length>0;){const a=n.pop();if(a!==void 0)for(const s of this.neighbors(a))!i.has(s)&&r(this,s)&&(i.add(s),n.push(s))}return i}toTileUpdate(e){return BigInt(e)<<16n|BigInt(this.state[e])}updateTile(e){const r=Number(e>>16n),i=Number(e&0xffffn),n=this.hasFallout(r);this.state[r]=i;const a=this.hasFallout(r);return n&&!a&&this._numTilesWithFallout--,!n&&a&&this._numTilesWithFallout++,r}};Ge.IS_LAND_BIT=7,Ge.SHORELINE_BIT=6,Ge.OCEAN_BIT=5,Ge.MAGNITUDE_MASK=31,Ge.PLAYER_ID_MASK=4095,Ge.FALLOUT_BIT=13,Ge.DEFENSE_BONUS_BIT=14;let k0=Ge;function S0(t,e,r=!1){const i=e*e;return r?(n,a)=>{const s=n.x(t)-.5,o=n.y(t)-.5,l=n.x(a)-s,c=n.y(a)-o;return l*l+c*c<=i}:(n,a)=>n.euclideanDistSquared(t,a)<=i}function QC(t,e,r,i){const n=Math.abs(e.x-t.x),a=Math.abs(e.y-(t.y+r));return n+a*2<=i+1}function fb(t,e,r=!1){return r?(i,n)=>{const a=i.x(t)-.5,s=i.y(t)-.5;return QC({x:a,y:s},{x:i.x(n),y:i.y(n)},0,e)}:(i,n)=>i.manhattanDist(t,n)<=e}const gb=new Map;async function C2(t,e,r){const i=gb.get(t);if(i!==void 0)return i;const n=r.getMapData(t),a=await n.manifest(),s=e===sr.Normal?await Ml(a.map,await n.mapBin()):await Ml(a.map4x,await n.map4xBin()),o=e===sr.Normal?await Ml(e===sr.Normal?a.map4x:a.map16x,await n.map4xBin()):await Ml(a.map16x,await n.map16xBin());e===sr.Compact&&a.nations.forEach(c=>{c.coordinates=[Math.floor(c.coordinates[0]/2),Math.floor(c.coordinates[1]/2)]});const l={nations:a.nations,gameMap:s,miniGameMap:o};return gb.set(t,l),l}async function Ml(t,e){if(e.length!==t.width*t.height)throw new Error(`Invalid data: buffer size ${e.length} incorrect for ${t.width}x${t.height} terrain plus 4 bytes for dimensions.`);return new k0(t.width,t.height,e,t.num_land_tiles)}class JC{constructor(e,r){this.gameStartInfo=e,this.clientID=r,this.isInitialized=!1,this.worker=new Worker(new URL(""+new URL("Worker.worker-Cw40PTO7.js",import.meta.url).href,import.meta.url),{type:"module"}),this.messageHandlers=new Map,this.worker.addEventListener("message",this.handleWorkerMessage.bind(this))}handleWorkerMessage(e){const r=e.data;r.type==="game_update"?this.gameUpdateCallback&&r.gameUpdate&&this.gameUpdateCallback(r.gameUpdate):r.id&&this.messageHandlers.has(r.id)&&(this.messageHandlers.get(r.id)(r),this.messageHandlers.delete(r.id))}initialize(){return new Promise((e,r)=>{const i=oi();this.messageHandlers.set(i,n=>{n.type==="initialized"&&(this.isInitialized=!0,e())}),this.worker.postMessage({type:"init",id:i,gameStartInfo:this.gameStartInfo,clientID:this.clientID}),setTimeout(()=>{this.isInitialized||(this.messageHandlers.delete(i),r(new Error("Worker initialization timeout")))},2e4)})}start(e){if(!this.isInitialized)throw new Error("Failed to initialize pathfinder");this.gameUpdateCallback=e}sendTurn(e){if(!this.isInitialized)throw new Error("Worker not initialized");this.worker.postMessage({type:"turn",turn:e})}sendHeartbeat(){this.worker.postMessage({type:"heartbeat"})}playerProfile(e){return new Promise((r,i)=>{if(!this.isInitialized){i(new Error("Worker not initialized"));return}const n=oi();this.messageHandlers.set(n,a=>{a.type==="player_profile_result"&&a.result!==void 0&&r(a.result)}),this.worker.postMessage({type:"player_profile",id:n,playerID:e})})}playerBorderTiles(e){return new Promise((r,i)=>{if(!this.isInitialized){i(new Error("Worker not initialized"));return}const n=oi();this.messageHandlers.set(n,a=>{a.type==="player_border_tiles_result"&&a.result!==void 0&&r(a.result)}),this.worker.postMessage({type:"player_border_tiles",id:n,playerID:e})})}playerInteraction(e,r,i){return new Promise((n,a)=>{if(!this.isInitialized){a(new Error("Worker not initialized"));return}const s=oi();this.messageHandlers.set(s,o=>{o.type==="player_actions_result"&&o.result!==void 0&&n(o.result)}),this.worker.postMessage({type:"player_actions",id:s,playerID:e,x:r,y:i})})}attackAveragePosition(e,r){return new Promise((i,n)=>{if(!this.isInitialized){n(new Error("Worker not initialized"));return}const a=oi();this.messageHandlers.set(a,s=>{s.type==="attack_average_position_result"&&s.x!==void 0&&s.y!==void 0&&(s.x===null||s.y===null?i(null):i(new We(s.x,s.y)))}),this.worker.postMessage({type:"attack_average_position",id:a,playerID:e,attackID:r})})}transportShipSpawn(e,r){return new Promise((i,n)=>{if(!this.isInitialized){n(new Error("Worker not initialized"));return}const a=oi();this.messageHandlers.set(a,s=>{s.type==="transport_ship_spawn_result"&&s.result!==void 0&&i(s.result)}),this.worker.postMessage({type:"transport_ship_spawn",id:a,playerID:e,targetTile:r})})}cleanup(){this.worker.terminate(),this.messageHandlers.clear(),this.gameUpdateCallback=void 0}}class Cn{constructor(e,r){this.x=e,this.y=r}}class T2{constructor(e,r){this.x=e,this.y=r}}class E2{constructor(e,r){this.x=e,this.y=r}}class Ys{constructor(e,r){this.unit=e,this.isSelected=r}}class M2{constructor(e,r){this.x=e,this.y=r}}class Vo{constructor(e,r){this.x=e,this.y=r}}class Na{constructor(e,r){this.x=e,this.y=r}}class Xs{constructor(e,r,i){this.x=e,this.y=r,this.delta=i}}class Tc{constructor(e,r){this.deltaX=e,this.deltaY=r}}class Dn{constructor(e){this.alternateView=e}}class es{}class Vp{}class I2{}class ba{constructor(e){this.structureTypes=e}}class _o{constructor(e){this.ghostStructure=e}}class Ec{constructor(e){this.rocketDirectionUp=e}}class P2{constructor(e,r){this.x=e,this.y=r}}class Wp{constructor(e,r){this.x=e,this.y=r}}class $2{}class R2{}class lc{constructor(e){this.attackRatio=e}}class D2{constructor(e){this.replaySpeedMultiplier=e}}class L2{constructor(){}}class O2{constructor(e,r){this.x=e,this.y=r}}class B2{constructor(e,r){this.tickExecutionDuration=e,this.tickDelay=r}}class eT{constructor(e,r,i){this.uiState=e,this.canvas=r,this.eventBus=i,this.lastPointerX=0,this.lastPointerY=0,this.lastPointerDownX=0,this.lastPointerDownY=0,this.pointers=new Map,this.lastPinchDistance=0,this.pointerDown=!1,this.alternateView=!1,this.moveInterval=null,this.activeKeys=new Set,this.keybinds={},this.PAN_SPEED=5,this.ZOOM_SPEED=10,this.userSettings=new Gt}initialize(){let e={};try{const i=JSON.parse(localStorage.getItem("settings.keybinds")??"{}");e=Object.fromEntries(Object.entries(i).map(([n,a])=>{let s;return a&&typeof a=="object"&&"value"in a?s=a.value:s=a,typeof s!="string"?[n,void 0]:[n,s]}).filter(([,n])=>typeof n=="string"))}catch(i){console.warn("Invalid keybinds JSON:",i)}const r=/Mac/.test(navigator.userAgent);this.keybinds={toggleView:"Space",centerCamera:"KeyC",moveUp:"KeyW",moveDown:"KeyS",moveLeft:"KeyA",moveRight:"KeyD",zoomOut:"KeyQ",zoomIn:"KeyE",attackRatioDown:"KeyT",attackRatioUp:"KeyY",boatAttack:"KeyB",groundAttack:"KeyG",swapDirection:"KeyU",modifierKey:r?"MetaLeft":"ControlLeft",altKey:"AltLeft",buildCity:"Digit1",buildFactory:"Digit2",buildPort:"Digit3",buildDefensePost:"Digit4",buildMissileSilo:"Digit5",buildSamLauncher:"Digit6",buildWarship:"Digit7",buildAtomBomb:"Digit8",buildHydrogenBomb:"Digit9",buildMIRV:"Digit0",...e},this.canvas.addEventListener("pointerdown",i=>this.onPointerDown(i)),window.addEventListener("pointerup",i=>this.onPointerUp(i)),this.canvas.addEventListener("wheel",i=>{this.onScroll(i),this.onShiftScroll(i),i.preventDefault()},{passive:!1}),window.addEventListener("pointermove",this.onPointerMove.bind(this)),this.canvas.addEventListener("contextmenu",i=>this.onContextMenu(i)),window.addEventListener("mousemove",i=>{(i.movementX||i.movementY)&&this.eventBus.emit(new Vo(i.clientX,i.clientY))}),this.pointers.clear(),this.moveInterval=setInterval(()=>{let i=0,n=0;if(this.activeKeys.has("ShiftLeft")||this.activeKeys.has("ShiftRight"))return;(this.activeKeys.has(this.keybinds.moveUp)||this.activeKeys.has("ArrowUp"))&&(n+=this.PAN_SPEED),(this.activeKeys.has(this.keybinds.moveDown)||this.activeKeys.has("ArrowDown"))&&(n-=this.PAN_SPEED),(this.activeKeys.has(this.keybinds.moveLeft)||this.activeKeys.has("ArrowLeft"))&&(i+=this.PAN_SPEED),(this.activeKeys.has(this.keybinds.moveRight)||this.activeKeys.has("ArrowRight"))&&(i-=this.PAN_SPEED),(i||n)&&this.eventBus.emit(new Tc(i,n));const a=window.innerWidth/2,s=window.innerHeight/2;(this.activeKeys.has(this.keybinds.zoomOut)||this.activeKeys.has("Minus"))&&this.eventBus.emit(new Xs(a,s,this.ZOOM_SPEED)),(this.activeKeys.has(this.keybinds.zoomIn)||this.activeKeys.has("Equal"))&&this.eventBus.emit(new Xs(a,s,-this.ZOOM_SPEED))},1),window.addEventListener("keydown",i=>{this.isTextInputTarget(i.target)&&i.code!=="Escape"||(i.code===this.keybinds.toggleView&&(i.preventDefault(),this.alternateView||(this.alternateView=!0,this.eventBus.emit(new Dn(!0)))),i.code==="Escape"&&(i.preventDefault(),this.eventBus.emit(new es),this.setGhostStructure(null)),[this.keybinds.moveUp,this.keybinds.moveDown,this.keybinds.moveLeft,this.keybinds.moveRight,this.keybinds.zoomOut,this.keybinds.zoomIn,"ArrowUp","ArrowLeft","ArrowDown","ArrowRight","Minus","Equal",this.keybinds.attackRatioDown,this.keybinds.attackRatioUp,this.keybinds.centerCamera,"ControlLeft","ControlRight","ShiftLeft","ShiftRight"].includes(i.code)&&this.activeKeys.add(i.code))}),window.addEventListener("keyup",i=>{if(this.isTextInputTarget(i.target)&&!this.activeKeys.has(i.code))return;i.code===this.keybinds.toggleView&&(i.preventDefault(),this.alternateView=!1,this.eventBus.emit(new Dn(!1)));const a=this.keybinds.resetGfx??"KeyR";if(i.code===a&&this.isAltKeyHeld(i)&&(i.preventDefault(),this.eventBus.emit(new Vp)),i.code===this.keybinds.boatAttack&&(i.preventDefault(),this.eventBus.emit(new $2)),i.code===this.keybinds.groundAttack&&(i.preventDefault(),this.eventBus.emit(new R2)),i.code===this.keybinds.attackRatioDown&&(i.preventDefault(),this.eventBus.emit(new lc(-10))),i.code===this.keybinds.attackRatioUp&&(i.preventDefault(),this.eventBus.emit(new lc(10))),i.code===this.keybinds.centerCamera&&(i.preventDefault(),this.eventBus.emit(new L2)),i.code===this.keybinds.buildCity&&(i.preventDefault(),this.setGhostStructure(C.City)),i.code===this.keybinds.buildFactory&&(i.preventDefault(),this.setGhostStructure(C.Factory)),i.code===this.keybinds.buildPort&&(i.preventDefault(),this.setGhostStructure(C.Port)),i.code===this.keybinds.buildDefensePost&&(i.preventDefault(),this.setGhostStructure(C.DefensePost)),i.code===this.keybinds.buildMissileSilo&&(i.preventDefault(),this.setGhostStructure(C.MissileSilo)),i.code===this.keybinds.buildSamLauncher&&(i.preventDefault(),this.setGhostStructure(C.SAMLauncher)),i.code===this.keybinds.buildAtomBomb&&(i.preventDefault(),this.setGhostStructure(C.AtomBomb)),i.code===this.keybinds.buildHydrogenBomb&&(i.preventDefault(),this.setGhostStructure(C.HydrogenBomb)),i.code===this.keybinds.buildWarship&&(i.preventDefault(),this.setGhostStructure(C.Warship)),i.code===this.keybinds.buildMIRV&&(i.preventDefault(),this.setGhostStructure(C.MIRV)),i.code===this.keybinds.swapDirection){i.preventDefault();const s=!this.uiState.rocketDirectionUp;this.eventBus.emit(new Ec(s))}console.log(i.code,i.shiftKey,i.ctrlKey,i.altKey,i.metaKey),i.code==="KeyD"&&i.shiftKey&&(i.preventDefault(),console.log("TogglePerformanceOverlayEvent"),this.eventBus.emit(new I2)),this.activeKeys.delete(i.code)})}onPointerDown(e){if(e.button===1){e.preventDefault(),this.eventBus.emit(new O2(e.clientX,e.clientY));return}e.button>0||(this.pointerDown=!0,this.pointers.set(e.pointerId,e),this.pointers.size===1?(this.lastPointerX=e.clientX,this.lastPointerY=e.clientY,this.lastPointerDownX=e.clientX,this.lastPointerDownY=e.clientY,this.eventBus.emit(new M2(e.clientX,e.clientY))):this.pointers.size===2&&(this.lastPinchDistance=this.getPinchDistance()))}onPointerUp(e){if(e.button===1){e.preventDefault();return}if(e.button>0)return;if(this.pointerDown=!1,this.pointers.clear(),this.isModifierKeyPressed(e)){this.eventBus.emit(new P2(e.clientX,e.clientY));return}if(this.isAltKeyPressed(e)){this.eventBus.emit(new Wp(e.clientX,e.clientY));return}if(Math.abs(e.x-this.lastPointerDownX)+Math.abs(e.y-this.lastPointerDownY)<10){if(e.pointerType==="touch"){this.eventBus.emit(new E2(e.x,e.y)),e.preventDefault();return}!this.userSettings.leftClickOpensMenu()||e.shiftKey?this.eventBus.emit(new Cn(e.x,e.y)):this.eventBus.emit(new Na(e.clientX,e.clientY))}}onScroll(e){if(!e.shiftKey){const r=this.activeKeys.has("ControlLeft")||this.activeKeys.has("ControlRight"),i=e.ctrlKey&&!r?10:1;this.eventBus.emit(new Xs(e.x,e.y,e.deltaY*i))}}onShiftScroll(e){if(e.shiftKey){const i=(e.deltaY===0?e.deltaX:e.deltaY)>0?-10:10;this.eventBus.emit(new lc(i))}}onPointerMove(e){if(e.button===1){e.preventDefault();return}if(!(e.button>0)){if(this.pointers.set(e.pointerId,e),!this.pointerDown){this.eventBus.emit(new T2(e.clientX,e.clientY));return}if(this.pointers.size===1){const r=e.clientX-this.lastPointerX,i=e.clientY-this.lastPointerY;this.eventBus.emit(new Tc(r,i)),this.lastPointerX=e.clientX,this.lastPointerY=e.clientY}else if(this.pointers.size===2){const r=this.getPinchDistance(),i=r-this.lastPinchDistance;if(Math.abs(i)>1){const n=this.getPinchCenter();this.eventBus.emit(new Xs(n.x,n.y,-i*2)),this.lastPinchDistance=r}}}}onContextMenu(e){if(e.preventDefault(),this.uiState.ghostStructure!==null){this.setGhostStructure(null);return}this.eventBus.emit(new Na(e.clientX,e.clientY))}setGhostStructure(e){this.uiState.ghostStructure=e,this.eventBus.emit(new _o(e))}getPinchDistance(){const e=Array.from(this.pointers.values()),r=e[0].clientX-e[1].clientX,i=e[0].clientY-e[1].clientY;return Math.sqrt(r*r+i*i)}getPinchCenter(){const e=Array.from(this.pointers.values());return{x:(e[0].clientX+e[1].clientX)/2,y:(e[0].clientY+e[1].clientY)/2}}isTextInputTarget(e){const r=e;if(!r)return!1;if(r.tagName==="TEXTAREA"||r.isContentEditable)return!0;if(r.tagName==="INPUT"){const i=r;return!(i.id==="attack-ratio"&&i.type==="range")}return!1}destroy(){this.moveInterval!==null&&clearInterval(this.moveInterval),this.activeKeys.clear()}isModifierKeyPressed(e){return(this.keybinds.modifierKey==="AltLeft"||this.keybinds.modifierKey==="AltRight")&&e.altKey||(this.keybinds.modifierKey==="ControlLeft"||this.keybinds.modifierKey==="ControlRight")&&e.ctrlKey||(this.keybinds.modifierKey==="ShiftLeft"||this.keybinds.modifierKey==="ShiftRight")&&e.shiftKey||(this.keybinds.modifierKey==="MetaLeft"||this.keybinds.modifierKey==="MetaRight")&&e.metaKey}isAltKeyHeld(e){return this.keybinds.altKey==="AltLeft"||this.keybinds.altKey==="AltRight"?e.altKey&&!e.ctrlKey:this.keybinds.altKey==="ControlLeft"||this.keybinds.altKey==="ControlRight"?e.ctrlKey:this.keybinds.altKey==="ShiftLeft"||this.keybinds.altKey==="ShiftRight"?e.shiftKey:this.keybinds.altKey==="MetaLeft"||this.keybinds.altKey==="MetaRight"?e.metaKey:!1}isAltKeyPressed(e){return(this.keybinds.altKey==="AltLeft"||this.keybinds.altKey==="AltRight")&&e.altKey||(this.keybinds.altKey==="ControlLeft"||this.keybinds.altKey==="ControlRight")&&e.ctrlKey||(this.keybinds.altKey==="ShiftLeft"||this.keybinds.altKey==="ShiftRight")&&e.shiftKey||(this.keybinds.altKey==="MetaLeft"||this.keybinds.altKey==="MetaRight")&&e.metaKey}}let N2;function U2(){const t=localStorage.getItem("game-records");return t?JSON.parse(t):{}}function z2(t){setTimeout(()=>localStorage.setItem("game-records",JSON.stringify(t,ho)),0)}function tT(t,e){if(localStorage===void 0)return;N2=Date.now();const r=U2();r[t]={lobby:e},z2(r)}function rT(){return N2}function iT(t){if(localStorage===void 0)return;const e=U2(),r=e[t.info.gameID];if(!r){console.log("LocalPersistantStats: game not found");return}r.gameRecord=t,z2(e)}class nT{constructor(e,r){this.prefix=e,this.cacheBuster=r,this.maps=new Map}getMapData(e){const r=this.maps.get(e);if(r)return r;const n=Object.keys(Ne).find(s=>Ne[s]===e)?.toLowerCase();if(!n)throw new Error(`Unknown map: ${e}`);const a={mapBin:()=>this.loadBinaryFromUrl(this.url(n,"map.bin")),map4xBin:()=>this.loadBinaryFromUrl(this.url(n,"map4x.bin")),map16xBin:()=>this.loadBinaryFromUrl(this.url(n,"map16x.bin")),manifest:()=>this.loadJsonFromUrl(this.url(n,"manifest.json")),webpPath:async()=>this.url(n,"thumbnail.webp")};return this.maps.set(e,a),a}url(e,r){let i=`${this.prefix}/${e}/${r}`;return this.cacheBuster&&(i+=`${i.includes("?")?"&":"?"}v=${encodeURIComponent(this.cacheBuster.trim())}`),i}async loadBinaryFromUrl(e){const r=performance.now(),i=await fetch(e);if(!i.ok)throw new Error(`Failed to load ${e}: ${i.statusText}`);const n=await i.arrayBuffer();return console.log(`[MapLoader] ${e}: ${(performance.now()-r).toFixed(0)}ms`),new Uint8Array(n)}async loadJsonFromUrl(e){const r=await fetch(e);if(!r.ok)throw new Error(`Failed to load ${e}: ${r.statusText}`);return r.json()}}const Ln=new nT("maps",window.GIT_COMMIT);var va=(t=>(t[t.slow=2]="slow",t[t.normal=1]="normal",t[t.fast=.5]="fast",t[t.fastest=0]="fastest",t))(va||{});const H2=1,aT=60;class sT{constructor(e,r,i){this.lobbyConfig=e,this.isReplay=r,this.eventBus=i,this.replayTurns=[],this.turns=[],this.intents=[],this.paused=!1,this.replaySpeedMultiplier=H2,this.winner=null,this.allPlayersStats={},this.turnsExecuted=0,this.turnStartTime=0}updateCallback(e,r){this.clientConnect=e,this.clientMessage=r}start(){if(console.log("local server starting"),this.turnCheckInterval=setInterval(()=>{const e=this.lobbyConfig.serverConfig.turnIntervalMs()*this.replaySpeedMultiplier,r=Math.max(0,this.turns.length-this.turnsExecuted),n=this.replaySpeedMultiplier===va.fastest&&this.lobbyConfig.gameRecord!==void 0?aT:0;(r===0||n>0&&r<n)&&Date.now()>this.turnStartTime+e&&(this.turnStartTime=Date.now(),this.endTurn())},5),this.eventBus.on(D2,e=>{this.replaySpeedMultiplier=e.replaySpeedMultiplier}),this.startedAt=Date.now(),this.clientConnect(),this.lobbyConfig.gameRecord&&(this.replayTurns=V_(this.lobbyConfig.gameRecord).turns),this.lobbyConfig.gameStartInfo===void 0)throw new Error("missing gameStartInfo");if(this.clientID=this.lobbyConfig.gameStartInfo.players[0]?.clientID,!this.clientID)throw new Error("missing clientID");this.clientMessage({type:"start",gameStartInfo:this.lobbyConfig.gameStartInfo,turns:[],lobbyCreatedAt:this.lobbyConfig.gameStartInfo.lobbyCreatedAt,myClientID:this.clientID})}onMessage(e){if(e.type==="rejoin"){if(!this.clientID)throw new Error("missing clientID");this.clientMessage({type:"start",gameStartInfo:this.lobbyConfig.gameStartInfo,turns:this.turns,lobbyCreatedAt:this.lobbyConfig.gameStartInfo.lobbyCreatedAt,myClientID:this.clientID})}if(e.type==="intent"){const r={...e.intent,clientID:this.clientID};if(r.type==="toggle_pause"){r.paused?(this.intents.push(r),this.endTurn(),this.paused=!0):(this.paused=!1,this.intents.push(r),this.endTurn());return}if(this.lobbyConfig.gameRecord||this.paused)return;this.intents.push(r)}if(e.type==="hash"){if(!this.lobbyConfig.gameRecord){if(e.turnNumber%100===0){const i=this.turns[e.turnNumber];i&&(i.hash=e.hash)}return}const r=this.replayTurns[e.turnNumber].hash;if(!r){console.warn(`no archived hash found for turn ${e.turnNumber}, client hash: ${e.hash}`);return}r!==e.hash?(console.error(`desync detected on turn ${e.turnNumber}, client hash: ${e.hash}, server hash: ${r}`),this.clientMessage({type:"desync",turn:e.turnNumber,correctHash:r,clientsWithCorrectHash:0,totalActiveClients:1,yourHash:e.hash})):console.log(`hash verified on turn ${e.turnNumber}, client hash: ${e.hash}, server hash: ${r}`)}e.type==="winner"&&(this.winner=e,this.allPlayersStats=e.allPlayersStats)}turnComplete(){this.turnsExecuted++}endTurn(){if(this.paused)return;if(this.replayTurns.length>0){if(this.turns.length>=this.replayTurns.length){this.endGame();return}this.intents=this.replayTurns[this.turns.length].intents}const e={turnNumber:this.turns.length,intents:this.intents};this.turns.push(e),this.intents=[],this.clientMessage({type:"turn",turn:e})}endGame(){if(console.log("local server ending game"),clearInterval(this.turnCheckInterval),this.isReplay)return;const e=[{persistentID:x2(),username:this.lobbyConfig.playerName,clientID:this.clientID,stats:this.allPlayersStats[this.clientID],cosmetics:this.lobbyConfig.gameStartInfo?.players[0].cosmetics,clanTag:$y(this.lobbyConfig.playerName)??void 0}];if(this.lobbyConfig.gameStartInfo===void 0)throw new Error("missing gameStartInfo");const r=Iy(this.lobbyConfig.gameStartInfo.gameID,this.lobbyConfig.gameStartInfo.config,e,this.turns,this.startedAt,Date.now(),this.winner?.winner),i=wk.safeParse(r);if(!i.success){const s=No(i.error);console.error("Error parsing game record",s);return}const n=this.lobbyConfig.serverConfig.workerPath(this.lobbyConfig.gameStartInfo.gameID),a=JSON.stringify(i.data,ho);oT(a).then(s=>fetch(`/${n}/api/archive_singleplayer_game`,{method:"POST",headers:{"Content-Type":"application/json","Content-Encoding":"gzip"},body:s,keepalive:!0})).catch(s=>{console.error("Failed to archive singleplayer game:",s)})}}async function oT(t){const e=new CompressionStream("gzip"),r=e.writable.getWriter(),i=e.readable.getReader();r.write(new TextEncoder().encode(t)),r.close();const n=[];let a=!1;for(;!a;){const{value:c,done:u}=await i.read();a=u,c&&n.push(c)}const s=n.reduce((c,u)=>c+u.length,0),o=new Uint8Array(s);let l=0;for(const c of n)o.set(c,l),l+=c.length;return o.buffer}class Kp{constructor(e){this.paused=e}}class Yp{constructor(e,r){this.requestor=e,this.recipient=r}}class Xp{constructor(e,r){this.requestor=e,this.recipient=r}}class xu{constructor(e,r){this.unitId=e,this.unitType=r}}class A0{constructor(e,r,i){this.requestor=e,this.recipient=r,this.accepted=i}}class F2{constructor(e){this.recipient=e}}class Zp{constructor(e){this.tile=e}}class ko{constructor(e,r){this.targetID=e,this.troops=r}}class Qp{constructor(e,r){this.dst=e,this.troops=r}}class Jp{constructor(e,r,i){this.unit=e,this.tile=r,this.rocketDirectionUp=i}}class ef{constructor(e){this.targetID=e}}class So{constructor(e,r){this.recipient=e,this.emoji=r}}class tf{constructor(e,r){this.recipient=e,this.gold=r}}class rf{constructor(e,r){this.recipient=e,this.troops=r}}class nf{constructor(e,r,i){this.recipient=e,this.quickChatKey=r,this.target=i}}class Mc{constructor(e,r){this.target=e,this.action=r}}class C0{constructor(e){this.action=e}}class q2{constructor(e){this.unitId=e}}class j2{constructor(e){this.attackID=e}}class G2{constructor(e){this.unitID=e}}class Ic{constructor(e,r){this.winner=e,this.allPlayersStats=r}}class V2{constructor(e,r){this.tick=e,this.hash=r}}class af{constructor(e,r){this.unitId=e,this.tile=r}}class sf{constructor(e){this.target=e}}class W2{constructor(e){this.config=e}}class lT{constructor(e,r){this.lobbyConfig=e,this.eventBus=r,this.socket=null,this.buffer=[],this.pingInterval=null,this.isLocal=e.gameRecord!==void 0||e.gameStartInfo?.config.gameType===lt.Singleplayer,this.eventBus.on(Yp,i=>this.onSendAllianceRequest(i)),this.eventBus.on(A0,i=>this.onAllianceRequestReplyUIEvent(i)),this.eventBus.on(F2,i=>this.onSendAllianceExtensionIntent(i)),this.eventBus.on(Xp,i=>this.onBreakAllianceRequestUIEvent(i)),this.eventBus.on(Zp,i=>this.onSendSpawnIntentEvent(i)),this.eventBus.on(ko,i=>this.onSendAttackIntent(i)),this.eventBus.on(xu,i=>this.onSendUpgradeStructureIntent(i)),this.eventBus.on(Qp,i=>this.onSendBoatAttackIntent(i)),this.eventBus.on(ef,i=>this.onSendTargetPlayerIntent(i)),this.eventBus.on(So,i=>this.onSendEmojiIntent(i)),this.eventBus.on(tf,i=>this.onSendDonateGoldIntent(i)),this.eventBus.on(rf,i=>this.onSendDonateTroopIntent(i)),this.eventBus.on(nf,i=>this.onSendQuickChatIntent(i)),this.eventBus.on(Mc,i=>this.onSendEmbargoIntent(i)),this.eventBus.on(C0,i=>this.onSendEmbargoAllIntent(i)),this.eventBus.on(Jp,i=>this.onBuildUnitIntent(i)),this.eventBus.on(Kp,i=>this.onPauseGameIntent(i)),this.eventBus.on(Ic,i=>this.onSendWinnerEvent(i)),this.eventBus.on(V2,i=>this.onSendHashEvent(i)),this.eventBus.on(j2,i=>this.onCancelAttackIntentEvent(i)),this.eventBus.on(G2,i=>this.onCancelBoatIntentEvent(i)),this.eventBus.on(af,i=>{this.onMoveWarshipEvent(i)}),this.eventBus.on(q2,i=>this.onSendDeleteUnitIntent(i)),this.eventBus.on(sf,i=>this.onSendKickPlayerIntent(i)),this.eventBus.on(W2,i=>this.onSendUpdateGameConfigIntent(i))}startPing(){this.isLocal||(this.pingInterval??=window.setInterval(()=>{this.socket!==null&&this.socket.readyState===WebSocket.OPEN&&this.sendMsg({type:"ping"})},5*1e3))}stopPing(){this.pingInterval&&(window.clearInterval(this.pingInterval),this.pingInterval=null)}connect(e,r){this.isLocal?this.connectLocal(e,r):this.connectRemote(e,r)}updateCallback(e,r){this.isLocal?this.localServer.updateCallback(e,r):(this.onconnect=e,this.onmessage=r)}connectLocal(e,r){this.localServer=new sT(this.lobbyConfig,this.lobbyConfig.gameRecord!==void 0,this.eventBus),this.localServer.updateCallback(e,r),this.localServer.start()}connectRemote(e,r){this.startPing(),this.killExistingSocket();const i=window.location.host,n=window.location.protocol==="https:"?"wss:":"ws:",a=this.lobbyConfig.serverConfig.workerPath(this.lobbyConfig.gameID);this.socket=new WebSocket(`${n}//${i}/${a}`),this.onconnect=e,this.onmessage=r,this.socket.onopen=()=>{if(console.log("Connected to game server!"),this.socket===null){console.error("socket is null");return}for(;this.buffer.length>0;){console.log("sending dropped message");const s=this.buffer.pop();if(s===void 0){console.warn("msg is undefined");continue}this.socket.send(s)}e()},this.socket.onmessage=s=>{try{const o=JSON.parse(s.data),l=lk.safeParse(o);if(!l.success){const c=No(l.error);console.error("Error parsing server message",c);return}this.onmessage(l.data)}catch(o){console.error("Error in onmessage handler:",o,s.data);return}},this.socket.onerror=s=>{console.error("Socket encountered error: ",s,"Closing socket"),this.socket!==null&&this.socket.close()},this.socket.onclose=s=>{console.log(`WebSocket closed. Code: ${s.code}, Reason: ${s.reason}`),s.code===1002?alert(`connection refused: ${s.reason}`):s.code!==1e3&&(console.log(`received error code ${s.code}, reconnecting`),this.reconnect())}}reconnect(){this.connect(this.onconnect,this.onmessage)}turnComplete(){this.isLocal&&this.localServer.turnComplete()}async joinGame(){this.sendMsg({type:"join",gameID:this.lobbyConfig.gameID,username:this.lobbyConfig.playerName,cosmetics:this.lobbyConfig.cosmetics,turnstileToken:this.lobbyConfig.turnstileToken,token:await kc()})}async rejoinGame(e){this.sendMsg({type:"rejoin",gameID:this.lobbyConfig.gameID,lastTurn:e,token:await kc()})}leaveGame(){if(this.isLocal){this.localServer.endGame();return}this.stopPing(),this.socket!==null&&(this.socket.readyState===WebSocket.OPEN?(console.log("on stop: leaving game"),this.killExistingSocket()):(console.log("WebSocket is not open. Current state:",this.socket.readyState),console.error("attempting reconnect"),this.killExistingSocket()))}onSendAllianceRequest(e){this.sendIntent({type:"allianceRequest",recipient:e.recipient.id()})}onAllianceRequestReplyUIEvent(e){this.sendIntent({type:"allianceRequestReply",requestor:e.requestor.id(),accept:e.accepted})}onBreakAllianceRequestUIEvent(e){this.sendIntent({type:"breakAlliance",recipient:e.recipient.id()})}onSendAllianceExtensionIntent(e){this.sendIntent({type:"allianceExtension",recipient:e.recipient.id()})}onSendSpawnIntentEvent(e){this.sendIntent({type:"spawn",tile:e.tile})}onSendAttackIntent(e){this.sendIntent({type:"attack",targetID:e.targetID,troops:e.troops})}onSendBoatAttackIntent(e){this.sendIntent({type:"boat",troops:e.troops,dst:e.dst})}onSendUpgradeStructureIntent(e){this.sendIntent({type:"upgrade_structure",unit:e.unitType,unitId:e.unitId})}onSendTargetPlayerIntent(e){this.sendIntent({type:"targetPlayer",target:e.targetID})}onSendEmojiIntent(e){this.sendIntent({type:"emoji",recipient:e.recipient===ui?ui:e.recipient.id(),emoji:e.emoji})}onSendDonateGoldIntent(e){this.sendIntent({type:"donate_gold",recipient:e.recipient.id(),gold:e.gold?Number(e.gold):null})}onSendDonateTroopIntent(e){this.sendIntent({type:"donate_troops",recipient:e.recipient.id(),troops:e.troops})}onSendQuickChatIntent(e){this.sendIntent({type:"quick_chat",recipient:e.recipient.id(),quickChatKey:e.quickChatKey,target:e.target})}onSendEmbargoIntent(e){this.sendIntent({type:"embargo",targetID:e.target.id(),action:e.action})}onSendEmbargoAllIntent(e){this.sendIntent({type:"embargo_all",action:e.action})}onBuildUnitIntent(e){this.sendIntent({type:"build_unit",unit:e.unit,tile:e.tile,rocketDirectionUp:e.rocketDirectionUp})}onPauseGameIntent(e){this.sendIntent({type:"toggle_pause",paused:e.paused})}onSendWinnerEvent(e){this.isLocal||this.socket?.readyState===WebSocket.OPEN?this.sendMsg({type:"winner",winner:e.winner,allPlayersStats:e.allPlayersStats}):(console.log("WebSocket is not open. Current state:",this.socket?.readyState),console.log("attempting reconnect"))}onSendHashEvent(e){this.isLocal||this.socket?.readyState===WebSocket.OPEN?this.sendMsg({type:"hash",turnNumber:e.tick,hash:e.hash}):(console.log("WebSocket is not open. Current state:",this.socket?.readyState),console.log("attempting reconnect"))}onCancelAttackIntentEvent(e){this.sendIntent({type:"cancel_attack",attackID:e.attackID})}onCancelBoatIntentEvent(e){this.sendIntent({type:"cancel_boat",unitID:e.unitID})}onMoveWarshipEvent(e){this.sendIntent({type:"move_warship",unitId:e.unitId,tile:e.tile})}onSendDeleteUnitIntent(e){this.sendIntent({type:"delete_unit",unitId:e.unitId})}onSendKickPlayerIntent(e){this.sendIntent({type:"kick_player",target:e.target})}onSendUpdateGameConfigIntent(e){this.sendIntent({type:"update_game_config",config:e.config})}sendIntent(e){if(this.isLocal||this.socket?.readyState===WebSocket.OPEN){const r={type:"intent",intent:e};this.sendMsg(r)}else console.log("WebSocket is not open. Current state:",this.socket?.readyState),console.log("attempting reconnect")}sendMsg(e){if(this.isLocal){this.localServer.onMessage(e);return}else if(this.socket===null)return;const r=JSON.stringify(e,ho);this.socket.readyState===WebSocket.CLOSED?(console.warn("socket not ready, closing and trying later"),this.socket.close(),this.socket=null,this.connectRemote(this.onconnect,this.onmessage),this.buffer.push(r)):this.socket.send(r)}killExistingSocket(){if(this.socket!==null){this.socket.onmessage=null,this.socket.onopen=null,this.socket.onclose=null,this.socket.onerror=null;try{(this.socket.readyState===WebSocket.OPEN||this.socket.readyState===WebSocket.CONNECTING)&&this.socket.close()}catch(e){console.warn("Error while closing WebSocket:",e)}this.socket=null}}}const su=class su{static setEnabled(e){this.enabled=e}static isEnabled(){return this.enabled}static clear(){this.enabled&&(this.timings={})}static record(e,r){!this.enabled||!Number.isFinite(r)||(this.timings[e]=(this.timings[e]??0)+r)}static start(){return this.enabled?performance.now():0}static end(e,r){if(!this.enabled||r===0)return;const i=performance.now()-r;this.record(e,i)}static consume(){if(!this.enabled)return{};const e={...this.timings};return this.timings={},e}};su.timings={},su.enabled=!1;let xt=su;const Wo={ATTRIBUTE:1,CHILD:2},Ko=t=>(...e)=>({_$litDirective$:t,values:e});let _u=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,r,i){this._$Ct=e,this._$AM=r,this._$Ci=i}_$AS(e,r){return this.update(e,r)}update(e,r){return this.render(...r)}};const{I:cT}=W6,uT=t=>t.strings===void 0,mb=()=>document.createComment(""),xs=(t,e,r)=>{const i=t._$AA.parentNode,n=e===void 0?t._$AB:e._$AA;if(r===void 0){const a=i.insertBefore(mb(),n),s=i.insertBefore(mb(),n);r=new cT(a,s,t,t.options)}else{const a=r._$AB.nextSibling,s=r._$AM,o=s!==t;if(o){let l;r._$AQ?.(t),r._$AM=t,r._$AP!==void 0&&(l=t._$AU)!==s._$AU&&r._$AP(l)}if(a!==n||o){let l=r._$AA;for(;l!==a;){const c=l.nextSibling;i.insertBefore(l,n),l=c}}}return r},en=(t,e,r=t)=>(t._$AI(e,r),t),dT={},hT=(t,e=dT)=>t._$AH=e,pT=t=>t._$AH,Hd=t=>{t._$AP?.(!1,!0);let e=t._$AA;const r=t._$AB.nextSibling;for(;e!==r;){const i=e.nextSibling;e.remove(),e=i}};const bb=(t,e,r)=>{const i=new Map;for(let n=e;n<=r;n++)i.set(t[n],n);return i},fn=Ko(class extends _u{constructor(t){if(super(t),t.type!==Wo.CHILD)throw Error("repeat() can only be used in text expressions")}dt(t,e,r){let i;r===void 0?r=e:e!==void 0&&(i=e);const n=[],a=[];let s=0;for(const o of t)n[s]=i?i(o,s):s,a[s]=r(o,s),s++;return{values:a,keys:n}}render(t,e,r){return this.dt(t,e,r).values}update(t,[e,r,i]){const n=pT(t),{values:a,keys:s}=this.dt(e,r,i);if(!Array.isArray(n))return this.ut=s,a;const o=this.ut??=[],l=[];let c,u,p=0,d=n.length-1,h=0,g=a.length-1;for(;p<=d&&h<=g;)if(n[p]===null)p++;else if(n[d]===null)d--;else if(o[p]===s[h])l[h]=en(n[p],a[h]),p++,h++;else if(o[d]===s[g])l[g]=en(n[d],a[g]),d--,g--;else if(o[p]===s[g])l[g]=en(n[p],a[g]),xs(t,l[g+1],n[p]),p++,g--;else if(o[d]===s[h])l[h]=en(n[d],a[h]),xs(t,n[p],n[d]),d--,h++;else if(c===void 0&&(c=bb(s,h,g),u=bb(o,p,d)),c.has(o[p]))if(c.has(o[d])){const y=u.get(s[h]),x=y!==void 0?n[y]:null;if(x===null){const m=xs(t,n[p]);en(m,a[h]),l[h]=m}else l[h]=en(x,a[h]),xs(t,n[p],x),n[y]=null;h++}else Hd(n[d]),d--;else Hd(n[p]),p++;for(;h<=g;){const y=xs(t,l[g+1]);en(y,a[h]),l[h++]=y}for(;p<=d;){const y=n[p++];y!==null&&Hd(y)}return this.ut=s,hT(t,l),Fr}});var fT=Object.defineProperty,gT=Object.getOwnPropertyDescriptor,ku=(t,e,r,i)=>{for(var n=i>1?void 0:i?gT(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&fT(e,r,n),n};class vn{constructor(e){this.player=e}}class K2{constructor(e,r){this.x=e,this.y=r}}class Y2{constructor(e){this.unit=e}}let Ua=class extends V{constructor(){super(...arguments),this.game=null,this.eventBus=null,this.players=[],this.visible=!1,this.showTopFive=!0,this._sortKey="tiles",this._sortOrder="desc"}createRenderRoot(){return this}init(){}getTickIntervalMs(){return 1e3}tick(){if(this.game===null)throw new Error("Not initialized");this.visible&&this.updateLeaderboard()}setSort(t){this._sortKey===t?this._sortOrder=this._sortOrder==="asc"?"desc":"asc":(this._sortKey=t,this._sortOrder="desc"),this.updateLeaderboard()}updateLeaderboard(){if(this.game===null)throw new Error("Not initialized");const t=this.game.myPlayer();let e=this.game.playerViews();const r=(o,l)=>this._sortOrder==="asc"?o-l:l-o,i=o=>this.game.config().maxTroops(o);switch(this._sortKey){case"gold":e=e.sort((o,l)=>r(Number(o.gold()),Number(l.gold())));break;case"maxtroops":e=e.sort((o,l)=>r(i(o),i(l)));break;default:e=e.sort((o,l)=>r(o.numTilesOwned(),l.numTilesOwned()))}const n=this.game.numLandTiles()-this.game.numTilesWithFallout(),a=e.filter(o=>o.isAlive()),s=this.showTopFive?a.slice(0,5):a;if(this.players=s.map((o,l)=>{const c=this.game.config().maxTroops(o);return{name:o.displayName(),position:l+1,score:b0(o.numTilesOwned()/n),gold:ce(o.gold()),maxTroops:Je(c),isMyPlayer:o===t,isOnSameTeam:t!==null&&(o===t||o.isOnSameTeam(t)),player:o}}),t!==null&&this.players.find(o=>o.isMyPlayer)===void 0){let o=0;for(const l of e)if(o++,l===t)break;if(t.isAlive()){const l=this.game.config().maxTroops(t);this.players.pop(),this.players.push({name:t.displayName(),position:o,score:b0(t.numTilesOwned()/this.game.numLandTiles()),gold:ce(t.gold()),maxTroops:Je(l),isMyPlayer:!0,isOnSameTeam:!0,player:t})}}this.requestUpdate()}handleRowClickPlayer(t){this.eventBus!==null&&this.eventBus.emit(new vn(t))}renderLayer(t){}shouldTransform(){return!1}render(){return this.visible?v`
      <div
        class="max-h-[35vh] overflow-y-auto text-white text-xs md:text-xs lg:text-sm md:max-h-[50vh] mt-2 ${this.visible?"":"hidden"}"
        @contextmenu=${t=>t.preventDefault()}
      >
        <div
          class="grid bg-gray-800/70 w-full text-xs md:text-xs lg:text-sm"
          style="grid-template-columns: 30px 100px 70px 55px 105px;"
        >
          <div class="contents font-bold bg-gray-700/50">
            <div class="py-1 md:py-2 text-center border-b border-slate-500">
              #
            </div>
            <div
              class="py-1 md:py-2 text-center border-b border-slate-500 truncate"
            >
              ${f("leaderboard.player")}
            </div>
            <div
              class="py-1 md:py-2 text-center border-b border-slate-500 cursor-pointer whitespace-nowrap truncate"
              @click=${()=>this.setSort("tiles")}
            >
              ${f("leaderboard.owned")}
              ${this._sortKey==="tiles"?this._sortOrder==="asc"?"⬆️":"⬇️":""}
            </div>
            <div
              class="py-1 md:py-2 text-center border-b border-slate-500 cursor-pointer whitespace-nowrap truncate"
              @click=${()=>this.setSort("gold")}
            >
              ${f("leaderboard.gold")}
              ${this._sortKey==="gold"?this._sortOrder==="asc"?"⬆️":"⬇️":""}
            </div>
            <div
              class="py-1 md:py-2 text-center border-b border-slate-500 cursor-pointer whitespace-nowrap truncate"
              @click=${()=>this.setSort("maxtroops")}
            >
              ${f("leaderboard.maxtroops")}
              ${this._sortKey==="maxtroops"?this._sortOrder==="asc"?"⬆️":"⬇️":""}
            </div>
          </div>

          ${fn(this.players,t=>t.player.id(),t=>v`
              <div
                class="contents hover:bg-slate-600/60 ${t.isOnSameTeam?"font-bold":""} cursor-pointer"
                @click=${()=>this.handleRowClickPlayer(t.player)}
              >
                <div class="py-1 md:py-2 text-center border-b border-slate-500">
                  ${t.position}
                </div>
                <div
                  class="py-1 md:py-2 text-center border-b border-slate-500 truncate"
                >
                  ${t.name}
                </div>
                <div class="py-1 md:py-2 text-center border-b border-slate-500">
                  ${t.score}
                </div>
                <div class="py-1 md:py-2 text-center border-b border-slate-500">
                  ${t.gold}
                </div>
                <div class="py-1 md:py-2 text-center border-b border-slate-500">
                  ${t.maxTroops}
                </div>
              </div>
            `)}
        </div>
      </div>

      <button
        class="mt-1 px-1.5 pb-0.5 md:px-2 text-xs md:text-xs lg:text-sm 
        border rounded-md border-slate-500 transition-colors
        text-white mx-auto block hover:bg-white/10"
        @click=${()=>{this.showTopFive=!this.showTopFive,this.updateLeaderboard()}}
      >
        ${this.showTopFive?"+":"-"}
      </button>
    `:v``}};ku([L({type:Boolean})],Ua.prototype,"visible",2);ku([M()],Ua.prototype,"_sortKey",2);ku([M()],Ua.prototype,"_sortOrder",2);Ua=ku([F("leader-board")],Ua);const _s=16,Il=15,mT=.03;class bT{constructor(e,r,i){this.game=e,this.eventBus=r,this.canvas=i,this.scale=1.8,this.offsetX=-350,this.offsetY=-200,this.lastGoToCallTime=null,this.intervalID=null,this.changed=!1,this._boundingRect=this.canvas.getBoundingClientRect(),this.eventBus.on(Xs,n=>this.onZoom(n)),this.eventBus.on(Tc,n=>this.onMove(n)),this.eventBus.on(vn,n=>this.onGoToPlayer(n)),this.eventBus.on(K2,n=>this.onGoToPosition(n)),this.eventBus.on(Y2,n=>this.onGoToUnit(n)),this.eventBus.on(L2,()=>this.centerCamera())}updateCanvasBoundingRect(){this._boundingRect=this.canvas.getBoundingClientRect()}boundingRect(){return this._boundingRect}width(){return this.boundingRect().width}hasChanged(){return this.changed}resetChanged(){this.changed=!1}handleTransform(e){e.imageSmoothingEnabled=!1,e.setTransform(this.scale,0,0,this.scale,this.game.width()/2-this.offsetX*this.scale,this.game.height()/2-this.offsetY*this.scale)}worldToScreenCoordinates(e){const r=e.x,i=e.y,n=r-this.game.width()/2,a=i-this.game.height()/2,s=(n-this.offsetX)*this.scale+this.game.width()/2,o=(a-this.offsetY)*this.scale+this.game.height()/2,l=this.boundingRect(),c=s+l.left,u=o+l.top;return{x:c,y:u}}screenToWorldCoordinates(e,r){const i=this.boundingRect(),n=e-i.left,a=r-i.top,s=(n-this.game.width()/2)/this.scale+this.offsetX,o=(a-this.game.height()/2)/this.scale+this.offsetY,l=s+this.game.width()/2,c=o+this.game.height()/2;return new We(Math.floor(l),Math.floor(c))}screenBoundingRect(){const e=this.boundingRect(),r=e.width,i=e.height,n=-this.game.width()/2/this.scale+this.offsetX,a=-this.game.height()/2/this.scale+this.offsetY,s=n+this.game.width()/2,o=a+this.game.height()/2,l=(r-this.game.width()/2)/this.scale+this.offsetX,c=(i-this.game.height()/2)/this.scale+this.offsetY,u=l+this.game.width()/2,p=c+this.game.height()/2;return[new We(Math.floor(s),Math.floor(o)),new We(Math.floor(u),Math.floor(p))]}isOnScreen(e){const[r,i]=this.screenBoundingRect();return e.x>r.x&&e.x<i.x&&e.y>r.y&&e.y<i.y}screenCenter(){const[e,r]=this.screenBoundingRect();return{screenX:e.x+Math.floor((r.x-e.x)/2),screenY:e.y+Math.floor((r.y-e.y)/2)}}onGoToPlayer(e){this.clearTarget();const r=e.player.nameLocation();r&&(this.target=new We(r.x,r.y),this.intervalID=setInterval(()=>this.goTo(),_s))}onGoToPosition(e){this.clearTarget(),this.target=new We(e.x,e.y),this.intervalID=setInterval(()=>this.goTo(),_s)}onGoToUnit(e){this.clearTarget(),this.target=new We(this.game.x(e.unit.lastTile()),this.game.y(e.unit.lastTile())),this.intervalID=setInterval(()=>this.goTo(),_s)}centerCamera(){this.clearTarget();const e=this.game.myPlayer();!e||!e.nameLocation()||(this.target=new We(e.nameLocation().x,e.nameLocation().y),this.intervalID=setInterval(()=>this.goTo(),_s))}goTo(){const{screenX:e,screenY:r}=this.screenCenter();if(this.target===null)throw new Error("null target");if(Math.abs(this.target.x-e)+Math.abs(this.target.y-r)<2){this.clearTarget();return}let i;const n=window.performance.now();this.lastGoToCallTime===null?i=_s:i=n-this.lastGoToCallTime,this.lastGoToCallTime=n;const a=1-Math.pow(mT,i/1e3);this.offsetX+=Math.max(Math.min((this.target.x-e)*a,Il),-Il),this.offsetY+=Math.max(Math.min((this.target.y-r)*a,Il),-Il),this.changed=!0}onZoom(e){this.clearTarget();const r=this.scale,i=1+e.delta/600;this.scale/=i,this.scale=Math.max(.2,Math.min(20,this.scale));const n=this.boundingRect(),a=e.x-n.left,s=e.y-n.top,o=(a-this.game.width()/2)/r+this.offsetX,l=(s-this.game.height()/2)/r+this.offsetY;this.offsetX=o-(a-this.game.width()/2)/this.scale,this.offsetY=l-(s-this.game.height()/2)/this.scale,this.clampOffsets(),this.changed=!0}clampOffsets(){const e=this.boundingRect(),r=e.width,i=e.height,n=this.game.width(),a=this.game.height(),s=this.scale,o=-n/2+(n-r)/(2*s),l=n/2+(n-r)/(2*s),c=-a/2+(a-i)/(2*s),u=a/2+(a-i)/(2*s);this.offsetX<o?this.offsetX=o:this.offsetX>l&&(this.offsetX=l),this.offsetY<c?this.offsetY=c:this.offsetY>u&&(this.offsetY=u)}onMove(e){this.clearTarget(),this.offsetX-=e.deltaX/this.scale,this.offsetY-=e.deltaY/this.scale,this.clampOffsets(),this.changed=!0}clearTarget(){this.intervalID!==null&&(clearInterval(this.intervalID),this.intervalID=null),this.target=null}override(e=0,r=0,i=1){this.clearTarget(),this.offsetX=e,this.offsetY=r,this.scale=i,this.changed=!0}centerAll(e=1){const r=this.boundingRect().width,i=this.boundingRect().height,n=this.game.width(),a=this.game.height(),s=r/n*e,o=i/a*e,l=Math.min(s,o),c=(n-r)/2/l,u=(a-i)/2/l;this.override(c,u,l)}}var vT=Object.defineProperty,yT=Object.getOwnPropertyDescriptor,of=(t,e,r,i)=>{for(var n=i>1?void 0:i?yT(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&vT(e,r,n),n};const wT=1.6,xT=2,Fd=150,_T=150;let On=class extends V{constructor(){if(super(),this.userSettings=new Gt,this.isActive=!1,this.alertType="betrayal",this.animationTimeout=null,this.seenAttackIds=new Set,this.lastAlertTick=-1,this.outgoingAttackTicks=new Map,!document.querySelector("style[data-alert-frame]")){const t=document.createElement("style");t.setAttribute("data-alert-frame",""),t.textContent=On.styles.cssText,document.head.appendChild(t)}}createRenderRoot(){return this}init(){}tick(){if(!this.game)return;const t=this.game.myPlayer();if(!t||!t.isAlive()){this.seenAttackIds.clear(),this.outgoingAttackTicks.clear(),this.lastAlertTick=-1;return}this.trackOutgoingAttacks(),this.game.updatesSinceLastTick()?.[ye.BrokeAlliance]?.forEach(e=>{this.onBrokeAllianceUpdate(e)}),this.checkForNewAttacks()}shouldTransform(){return!1}onBrokeAllianceUpdate(t){const e=this.game.myPlayer();if(!e)return;this.game.playerBySmallID(t.betrayedID)===e&&(this.alertType="betrayal",this.activateAlert())}activateAlert(){this.userSettings.alertFrame()&&(this.isActive=!0,this.lastAlertTick=this.game.ticks(),this.requestUpdate())}trackOutgoingAttacks(){const t=this.game.myPlayer();if(!t||!t.isAlive())return;const e=this.game.ticks(),r=t.outgoingAttacks();for(const i of r)if(i.targetID!==0&&!i.retreating){const n=this.outgoingAttackTicks.get(i.targetID);(n===void 0||e-n>=Fd)&&this.outgoingAttackTicks.set(i.targetID,e)}for(const[i,n]of this.outgoingAttackTicks.entries())e-n>Fd&&this.outgoingAttackTicks.delete(i)}checkForNewAttacks(){const t=this.game.myPlayer();if(!t||!t.isAlive())return;const e=t.incomingAttacks(),r=this.game.ticks(),i=this.lastAlertTick!==-1&&r-this.lastAlertTick<_T,a=t.troops()/5;for(const o of e)if(!o.retreating&&!this.seenAttackIds.has(o.id)){const l=this.outgoingAttackTicks.get(o.attackerID),c=l!==void 0&&r-l<Fd,u=o.troops<a;!i&&!c&&!u?(this.seenAttackIds.add(o.id),this.alertType="land-attack",this.activateAlert()):this.seenAttackIds.add(o.id)}const s=new Set(e.map(o=>o.id));for(const o of this.seenAttackIds)s.has(o)||this.seenAttackIds.delete(o)}dismissAlert(){this.isActive=!1,this.animationTimeout&&(clearTimeout(this.animationTimeout),this.animationTimeout=null),this.requestUpdate()}render(){return this.isActive?v`
      <div
        class=${`alert-border animate ${this.alertType}`}
        @animationend=${()=>this.dismissAlert()}
      ></div>
    `:v``}};On.styles=pu`
    .alert-border {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      border: 17px solid;
      box-sizing: border-box;
      z-index: 40;
      opacity: 0;
    }

    .alert-border.betrayal {
      border-color: #ee0000;
    }

    .alert-border.land-attack {
      border-color: #ffa500;
    }

    .alert-border.animate {
      animation: alertBlink ${wT}s ease-in-out ${xT};
    }

    @keyframes alertBlink {
      0% {
        opacity: 0;
      }
      50% {
        opacity: 1;
      }
      100% {
        opacity: 0;
      }
    }
  `;of([M()],On.prototype,"isActive",2);of([M()],On.prototype,"alertType",2);On=of([F("alert-frame")],On);const lf=""+new URL("../images/BattleshipIconWhite.svg",import.meta.url).href,Su=""+new URL("../images/CityIconWhite.svg",import.meta.url).href,cf=""+new URL("../images/FactoryIconWhite.svg",import.meta.url).href,Au=""+new URL("../images/GoldCoinIcon.svg",import.meta.url).href,X2=""+new URL("../images/MIRVIcon.svg",import.meta.url).href,uf=""+new URL("../images/MissileSiloIconWhite.svg",import.meta.url).href,Z2=""+new URL("../images/MushroomCloudIconWhite.svg",import.meta.url).href,Cu=""+new URL("../images/NukeIconWhite.svg",import.meta.url).href,df=""+new URL("../images/PortIcon.svg",import.meta.url).href,hf=""+new URL("../images/SamLauncherIconWhite.svg",import.meta.url).href,Tu=""+new URL("../images/ShieldIconWhite.svg",import.meta.url).href;var kT=Object.defineProperty,ST=Object.getOwnPropertyDescriptor,Q2=(t,e,r,i)=>{for(var n=i>1?void 0:i?ST(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&kT(e,r,n),n};const T0=[[{unitType:C.AtomBomb,icon:Cu,description:"build_menu.desc.atom_bomb",key:"unit_type.atom_bomb",countable:!1},{unitType:C.MIRV,icon:X2,description:"build_menu.desc.mirv",key:"unit_type.mirv",countable:!1},{unitType:C.HydrogenBomb,icon:Z2,description:"build_menu.desc.hydrogen_bomb",key:"unit_type.hydrogen_bomb",countable:!1},{unitType:C.Warship,icon:lf,description:"build_menu.desc.warship",key:"unit_type.warship",countable:!0},{unitType:C.Port,icon:df,description:"build_menu.desc.port",key:"unit_type.port",countable:!0},{unitType:C.MissileSilo,icon:uf,description:"build_menu.desc.missile_silo",key:"unit_type.missile_silo",countable:!0},{unitType:C.SAMLauncher,icon:hf,description:"build_menu.desc.sam_launcher",key:"unit_type.sam_launcher",countable:!0},{unitType:C.DefensePost,icon:Tu,description:"build_menu.desc.defense_post",key:"unit_type.defense_post",countable:!0},{unitType:C.City,icon:Su,description:"build_menu.desc.city",key:"unit_type.city",countable:!0},{unitType:C.Factory,icon:cf,description:"build_menu.desc.factory",key:"unit_type.factory",countable:!0}]],AT=T0.flat();let Ao=class extends V{constructor(){super(...arguments),this.filteredBuildTable=T0,this._hidden=!0}init(){this.eventBus.on(P2,t=>{if(!this.game.myPlayer()?.isAlive()||!this._hidden)return;const e=this.transformHandler.screenToWorldCoordinates(t.x,t.y);if(e===null||!this.game.isValidCoord(e.x,e.y))return;const r=this.game.ref(e.x,e.y);this.showMenu(r)}),this.eventBus.on(es,()=>this.hideMenu()),this.eventBus.on(Wp,()=>this.hideMenu()),this.eventBus.on(M2,()=>this.hideMenu())}tick(){this._hidden||this.refresh()}canBuildOrUpgrade(t){if(this.game?.myPlayer()===null||this.playerActions===null)return!1;const r=(this.playerActions?.buildableUnits??[]).filter(i=>i.type===t.unitType);return r.length===0?!1:r[0].canBuild!==!1||r[0].canUpgrade!==!1}cost(t){for(const e of this.playerActions?.buildableUnits??[])if(e.type===t.unitType)return e.cost;return 0n}count(t){const e=this.game?.myPlayer();return e?e.totalUnitLevels(t.unitType).toString():"?"}sendBuildOrUpgrade(t,e){if(t.canUpgrade!==!1)this.eventBus.emit(new xu(t.canUpgrade,t.type));else if(t.canBuild){const r=t.type===C.AtomBomb||t.type===C.HydrogenBomb?this.uiState.rocketDirectionUp:void 0;this.eventBus.emit(new Jp(t.type,e,r))}this.hideMenu()}render(){return v`
      <div
        class="build-menu ${this._hidden?"hidden":""}"
        @contextmenu=${t=>t.preventDefault()}
      >
        ${this.filteredBuildTable.map(t=>v`
            <div class="build-row">
              ${t.map(e=>{const r=this.playerActions?.buildableUnits.find(n=>n.type===e.unitType);if(r===void 0)return v``;const i=r.canBuild!==!1||r.canUpgrade!==!1;return v`
                  <button
                    class="build-button"
                    @click=${()=>this.sendBuildOrUpgrade(r,this.clickedTile)}
                    ?disabled=${!i}
                    title=${i?"":f("build_menu.not_enough_money")}
                  >
                    <img
                      src=${e.icon}
                      alt="${e.unitType}"
                      width="40"
                      height="40"
                    />
                    <span class="build-name"
                      >${e.key&&f(e.key)}</span
                    >
                    <span class="build-description"
                      >${e.description&&f(e.description)}</span
                    >
                    <span class="build-cost" translate="no">
                      ${ce(this.game&&this.game.myPlayer()?this.cost(e):0)}
                      <img
                        src=${Au}
                        alt="gold"
                        width="12"
                        height="12"
                        class="align-middle"
                      />
                    </span>
                    ${e.countable?v`<div class="build-count-chip">
                          <span class="build-count">${this.count(e)}</span>
                        </div>`:""}
                  </button>
                `})}
            </div>
          `)}
      </div>
    `}hideMenu(){this._hidden=!0,this.requestUpdate()}showMenu(t){this.clickedTile=t,this._hidden=!1,this.refresh()}refresh(){this.game.myPlayer()?.actions(this.clickedTile).then(t=>{this.playerActions=t,this.requestUpdate()}),this.filteredBuildTable=this.getBuildableUnits()}getBuildableUnits(){return T0.map(t=>t.filter(e=>!this.game?.config()?.isUnitDisabled(e.unitType)))}get isVisible(){return!this._hidden}};Ao.styles=pu`
    :host {
      display: block;
    }
    .build-menu {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 9999;
      background-color: #1e1e1e;
      padding: 15px;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
      border-radius: 10px;
      display: flex;
      flex-direction: column;
      align-items: center;
      max-width: 95vw;
      max-height: 95vh;
      overflow-y: auto;
    }
    .build-description {
      font-size: 0.6rem;
    }
    .build-row {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      width: 100%;
    }
    .build-button {
      position: relative;
      width: 120px;
      height: 140px;
      border: 2px solid #444;
      background-color: #2c2c2c;
      color: white;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      margin: 8px;
      padding: 10px;
      gap: 5px;
    }
    .build-button:not(:disabled):hover {
      background-color: #3a3a3a;
      transform: scale(1.05);
      border-color: #666;
    }
    .build-button:not(:disabled):active {
      background-color: #4a4a4a;
      transform: scale(0.95);
    }
    .build-button:disabled {
      background-color: #1a1a1a;
      border-color: #333;
      cursor: not-allowed;
      opacity: 0.7;
    }
    .build-button:disabled img {
      opacity: 0.5;
    }
    .build-button:disabled .build-cost {
      color: #ff4444;
    }
    .build-icon {
      font-size: 40px;
      margin-bottom: 5px;
    }
    .build-name {
      font-size: 14px;
      font-weight: bold;
      margin-bottom: 5px;
      text-align: center;
    }
    .build-cost {
      font-size: 14px;
    }
    .hidden {
      display: none !important;
    }
    .build-count-chip {
      position: absolute;
      top: -10px;
      right: -10px;
      background-color: #2c2c2c;
      color: white;
      padding: 2px 10px;
      border-radius: 10000px;
      transition: all 0.3s ease;
      font-size: 12px;
      display: flex;
      justify-content: center;
      align-content: center;
      border: 1px solid #444;
    }
    .build-button:not(:disabled):hover > .build-count-chip {
      background-color: #3a3a3a;
      border-color: #666;
    }
    .build-button:not(:disabled):active > .build-count-chip {
      background-color: #4a4a4a;
    }
    .build-button:disabled > .build-count-chip {
      background-color: #1a1a1a;
      border-color: #333;
      cursor: not-allowed;
    }
    .build-count {
      font-weight: bold;
      font-size: 14px;
    }

    @media (max-width: 768px) {
      .build-menu {
        padding: 10px;
        max-height: 80vh;
        width: 80vw;
      }
      .build-button {
        width: 140px;
        height: 120px;
        margin: 4px;
        padding: 6px;
        gap: 5px;
      }
      .build-icon {
        font-size: 28px;
      }
      .build-name {
        font-size: 12px;
        margin-bottom: 3px;
      }
      .build-cost {
        font-size: 11px;
      }
      .build-count {
        font-weight: bold;
        font-size: 10px;
      }
      .build-count-chip {
        padding: 1px 5px;
      }
    }

    @media (max-width: 480px) {
      .build-menu {
        padding: 8px;
        max-height: 70vh;
      }
      .build-button {
        width: calc(50% - 6px);
        height: 100px;
        margin: 3px;
        padding: 4px;
        border-width: 1px;
      }
      .build-icon {
        font-size: 24px;
      }
      .build-name {
        font-size: 10px;
        margin-bottom: 2px;
      }
      .build-cost {
        font-size: 9px;
      }
      .build-count {
        font-weight: bold;
        font-size: 8px;
      }
      .build-count-chip {
        padding: 0 3px;
      }
      .build-button img {
        width: 24px;
        height: 24px;
      }
      .build-cost img {
        width: 10px;
        height: 10px;
      }
    }
  `;Q2([M()],Ao.prototype,"_hidden",2);Ao=Q2([F("build-menu")],Ao);let E0=class extends _u{constructor(e){if(super(e),this.it=Ie,e.type!==Wo.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(e){if(e===Ie||e==null)return this._t=void 0,this.it=e;if(e===Fr)return e;if(typeof e!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(e===this.it)return this._t;this.it=e;const r=[e];return r.raw=r,this._t={_$litType$:this.constructor.resultType,strings:r,values:[]}}};E0.directiveName="unsafeHTML",E0.resultType=1;const J2=Ko(E0);var CT=Object.defineProperty,TT=Object.getOwnPropertyDescriptor,Eu=(t,e,r,i)=>{for(var n=i>1?void 0:i?TT(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&CT(e,r,n),n};let za=class extends V{constructor(){super(...arguments),this.active=!1,this._hidden=!1,this.newEvents=0,this.chatEvents=[]}toggleHidden(){this._hidden=!this._hidden,this._hidden&&(this.newEvents=0),this.requestUpdate()}addEvent(t){this.chatEvents=[...this.chatEvents,t],this._hidden&&this.newEvents++,this.requestUpdate()}removeEvent(t){this.chatEvents=[...this.chatEvents.slice(0,t),...this.chatEvents.slice(t+1)]}onDisplayMessageEvent(t){if(t.messageType!==de.CHAT)return;const e=this.game.myPlayer();t.playerID!==null&&(!e||e.smallID()!==t.playerID)||this.addEvent({description:t.message,createdAt:this.game.ticks(),highlight:!0,unsafeDescription:!0})}init(){}tick(){const t=this.game.updatesSinceLastTick();if(t===null)return;const e=t[ye.DisplayEvent];if(e){for(const r of e)if(r.messageType===de.CHAT){const i=this.game.myPlayer();if(r.playerID!==null&&(!i||i.smallID()!==r.playerID))continue;this.chatEvents=[...this.chatEvents,{description:r.message,unsafeDescription:!0,createdAt:this.game.ticks()}]}}this.chatEvents.length>100&&(this.chatEvents=this.chatEvents.slice(-100)),this.requestUpdate()}getChatContent(t){return t.unsafeDescription?J2(My(t.description)):t.description}render(){return this.active?v`
      <div
        class="pointer-events-auto ${this._hidden?"w-fit px-2.5 py-1.25":""} rounded-md bg-black/60 relative max-h-[30vh] flex flex-col-reverse overflow-y-auto w-full lg:bottom-2.5 lg:right-2.5 z-50 lg:max-w-[30vw] lg:w-full lg:w-auto"
      >
        <div>
          <div class="w-full bg-black/80 sticky top-0 px-2.5">
            <button
              class="text-white cursor-pointer pointer-events-auto ${this._hidden?"hidden":""}"
              @click=${this.toggleHidden}
            >
              Hide
            </button>
          </div>

          <button
            class="text-white cursor-pointer pointer-events-auto ${this._hidden?"":"hidden"}"
            @click=${this.toggleHidden}
          >
            Chat
            <span
              class="${this.newEvents?"":"hidden"} inline-block px-2 bg-red-500 rounded-xs"
              >${this.newEvents}</span
            >
          </button>

          <table
            class="w-full border-collapse text-white shadow-lg lg:text-xl text-xs pointer-events-none ${this._hidden?"hidden":""}"
          >
            <tbody>
              ${this.chatEvents.map(t=>v`
                  <tr class="border-b border-gray-200/0">
                    <td class="lg:p-3 p-1 text-left">
                      ${this.getChatContent(t)}
                    </td>
                  </tr>
                `)}
            </tbody>
          </table>
        </div>
      </div>
    `:v``}createRenderRoot(){return this}};Eu([M()],za.prototype,"_hidden",2);Eu([M()],za.prototype,"newEvents",2);Eu([M()],za.prototype,"chatEvents",2);za=Eu([F("chat-display")],za);var ET=Object.defineProperty,MT=Object.getOwnPropertyDescriptor,ex=(t,e,r,i)=>{for(var n=i>1?void 0:i?MT(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&ET(e,r,n),n};const tx=by;let Pc=class extends V{constructor(){super(...arguments),this.players=[],this.playerSearchQuery="",this.previewText=null,this.requiresPlayerSelection=!1,this.selectedCategory=null,this.selectedPhraseText=null,this.selectedPhraseTemplate=null,this.selectedQuickChatKey=null,this.selectedPlayer=null,this.quickChatPhrases={help:[{text:"Please give me troops!",requiresPlayer:!1}],attack:[{text:"Attack [P1]!",requiresPlayer:!0}],defend:[{text:"Defend [P1]!",requiresPlayer:!0}],greet:[{text:"Hello!",requiresPlayer:!1}],misc:[{text:"Let's go!",requiresPlayer:!1}]},this.categories=[{id:"help"},{id:"attack"},{id:"defend"},{id:"greet"},{id:"misc"},{id:"warnings"}]}createRenderRoot(){return this}getPhrasesForCategory(t){return tx[t]??[]}render(){return v`
      <o-modal title="${f("chat.title")}">
        <div class="chat-columns">
          <div class="chat-column">
            <div class="column-title">${f("chat.category")}</div>
            ${this.categories.map(t=>v`
                <button
                  class="chat-option-button ${this.selectedCategory===t.id?"selected":""}"
                  @click=${()=>this.selectCategory(t.id)}
                >
                  ${f(`chat.cat.${t.id}`)}
                </button>
              `)}
          </div>

          ${this.selectedCategory?v`
                <div class="chat-column">
                  <div class="column-title">
                    ${f("chat.phrase")}
                  </div>
                  <div class="phrase-scroll-area">
                    ${this.getPhrasesForCategory(this.selectedCategory).map(t=>v`
                        <button
                          class="chat-option-button ${this.selectedPhraseText===f(`chat.${this.selectedCategory}.${t.key}`)?"selected":""}"
                          @click=${()=>this.selectPhrase(t)}
                        >
                          ${this.renderPhrasePreview(t)}
                        </button>
                      `)}
                  </div>
                </div>
              `:null}
          ${this.requiresPlayerSelection||this.selectedPlayer?v`
                <div class="chat-column">
                  <div class="column-title">
                    ${f("chat.player")}
                  </div>

                  <input
                    class="player-search-input"
                    type="text"
                    placeholder="${f("chat.search")}"
                    .value=${this.playerSearchQuery}
                    @input=${this.onPlayerSearchInput}
                  />

                  <div class="player-scroll-area">
                    ${this.getSortedFilteredPlayers().map(t=>v`
                        <button
                          class="chat-option-button ${this.selectedPlayer===t?"selected":""}"
                          style="border: 2px solid ${t.territoryColor().toHex()};"
                          @click=${()=>this.selectPlayer(t)}
                        >
                          ${t.name()}
                        </button>
                      `)}
                  </div>
                </div>
              `:null}
        </div>

        <div class="chat-preview">
          ${this.previewText?f(this.previewText):f("chat.build")}
        </div>
        <div class="chat-send">
          <button
            class="chat-send-button"
            @click=${this.sendChatMessage}
            ?disabled=${!this.previewText||this.requiresPlayerSelection&&!this.selectedPlayer}
          >
            ${f("chat.send")}
          </button>
        </div>
      </o-modal>
    `}initEventBus(t){this.eventBus=t,t.on(es,e=>{this.hidden||this.close()})}selectCategory(t){this.selectedCategory=t,this.selectedPhraseText=null,this.previewText=null,this.requiresPlayerSelection=!1,this.requestUpdate()}selectPhrase(t){this.selectedQuickChatKey=this.getFullQuickChatKey(this.selectedCategory,t.key),this.selectedPhraseTemplate=f(`chat.${this.selectedCategory}.${t.key}`),this.selectedPhraseText=f(`chat.${this.selectedCategory}.${t.key}`),this.previewText=`chat.${this.selectedCategory}.${t.key}`,this.requiresPlayerSelection=t.requiresPlayer,this.requestUpdate()}renderPhrasePreview(t){return f(`chat.${this.selectedCategory}.${t.key}`)}selectPlayer(t){this.previewText&&(this.previewText=this.selectedPhraseTemplate?.replace("[P1]",t.name())??null,this.selectedPlayer=t,this.requiresPlayerSelection=!1,this.requestUpdate())}sendChatMessage(){console.log("Sent message:",this.previewText),console.log("Sender:",this.sender),console.log("Recipient:",this.recipient),console.log("Key:",this.selectedQuickChatKey),this.sender&&this.recipient&&this.selectedQuickChatKey&&this.eventBus.emit(new nf(this.recipient,this.selectedQuickChatKey,this.selectedPlayer?.id())),this.previewText=null,this.selectedCategory=null,this.requiresPlayerSelection=!1,this.close(),this.requestUpdate()}onPlayerSearchInput(t){const e=t.target;this.playerSearchQuery=e.value.toLowerCase(),this.requestUpdate()}getSortedFilteredPlayers(){const t=[...this.players].sort((i,n)=>i.name().localeCompare(n.name())),e=t.filter(i=>i.name().toLowerCase().includes(this.playerSearchQuery)),r=t.filter(i=>!i.name().toLowerCase().includes(this.playerSearchQuery));return[...e,...r]}getFullQuickChatKey(t,e){return`${t}.${e}`}open(t,e){t&&e&&(console.log("Sent message:",e),console.log("Sent message:",t),this.players=this.g.players().filter(r=>r.isAlive()&&r.data.playerType!==ge.Bot),this.recipient=e,this.sender=t),this.requestUpdate(),this.modalEl?.open()}close(){this.selectedCategory=null,this.selectedPhraseText=null,this.previewText=null,this.requiresPlayerSelection=!1,this.modalEl?.close()}setRecipient(t){this.recipient=t}setSender(t){this.sender=t}openWithSelection(t,e,r,i){r&&i&&(this.players=this.g.players().filter(a=>a.isAlive()&&a.data.playerType!==ge.Bot),this.recipient=i,this.sender=r),this.selectCategory(t);const n=this.getPhrasesForCategory(t).find(a=>a.key===e);n&&this.selectPhrase(n),this.requestUpdate(),this.modalEl?.open()}};ex([Vt("o-modal")],Pc.prototype,"modalEl",2);Pc=ex([F("chat-modal")],Pc);const rx=""+new URL("../images/SoldierIcon.svg",import.meta.url).href,vb=""+new URL("../images/SwordIcon.svg",import.meta.url).href;var IT=Object.defineProperty,PT=Object.getOwnPropertyDescriptor,bi=(t,e,r,i)=>{for(var n=i>1?void 0:i?PT(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&IT(e,r,n),n};let kr=class extends V{constructor(){super(...arguments),this.attackRatio=.2,this._isVisible=!1,this._attackingTroops=0,this._touchDragging=!1,this._troopRateIsIncreasing=!0,this._outsideTouchHandler=null}getTickIntervalMs(){return 100}init(){this.attackRatio=Number(localStorage.getItem("settings.attackRatio")??"0.2"),this.uiState.attackRatio=this.attackRatio,this.eventBus.on(lc,t=>{let e=this.attackRatio+t.attackRatio/100;e<.01&&(e=.01),e>1&&(e=1),e===.11&&this.attackRatio===.01&&(e=.1),this.attackRatio=e,this.onAttackRatioChange(this.attackRatio)})}tick(){!this._isVisible&&!this.game.inSpawnPhase()&&this.setVisibile(!0);const t=this.game.myPlayer();if(t===null||!t.isAlive()){this.setVisibile(!1);return}this.updateTroopIncrease(),this._maxTroops=this.game.config().maxTroops(t),this._gold=t.gold(),this._troops=t.troops(),this._attackingTroops=t.outgoingAttacks().map(e=>e.troops).reduce((e,r)=>e+r,0),this.troopRate=this.game.config().troopIncreaseRate(t)*10,this.requestUpdate()}updateTroopIncrease(){const t=this.game?.myPlayer();if(t===null)return;const e=this.game.config().troopIncreaseRate(t);this._troopRateIsIncreasing=e>=this._lastTroopIncreaseRate,this._lastTroopIncreaseRate=e}onAttackRatioChange(t){this.uiState.attackRatio=t}renderLayer(t){}shouldTransform(){return!1}setVisibile(t){this._isVisible=t,this.requestUpdate()}handleAttackTouchStart(t){if(t.preventDefault(),t.stopPropagation(),this._touchDragging){this.closeAttackBar();return}this._touchDragging=!0,setTimeout(()=>{this._outsideTouchHandler=()=>{this.closeAttackBar()},document.addEventListener("touchstart",this._outsideTouchHandler)},0)}closeAttackBar(){this._touchDragging=!1,this._outsideTouchHandler&&(document.removeEventListener("touchstart",this._outsideTouchHandler),this._outsideTouchHandler=null)}handleBarTouch(t){t.preventDefault(),t.stopPropagation(),this.setRatioFromTouch(t.touches[0]);const e=i=>{i.preventDefault(),this.setRatioFromTouch(i.touches[0])},r=()=>{document.removeEventListener("touchmove",e),document.removeEventListener("touchend",r)};document.addEventListener("touchmove",e,{passive:!1}),document.addEventListener("touchend",r)}setRatioFromTouch(t){const e=this.querySelector(".attack-drag-bar");if(!e)return;const r=e.getBoundingClientRect(),i=(r.bottom-t.clientY)/(r.bottom-r.top);this.attackRatio=Math.round(Math.max(1,Math.min(100,i*100)))/100,this.onAttackRatioChange(this.attackRatio)}handleRatioSliderInput(t){const e=Number(t.target.value);this.attackRatio=e/100,this.onAttackRatioChange(this.attackRatio)}renderTroopBar(){const t=Math.max(this._maxTroops,1),e=this._troops/t*100,r=this._attackingTroops/t*100,i=Math.max(0,Math.min(100,e)),n=Math.max(0,Math.min(100-i,r));return v`
      <div
        class="w-full h-6 lg:h-8 border border-gray-600 rounded-md bg-gray-900/60 overflow-hidden relative"
      >
        <div class="h-full flex">
          ${i>0?v`<div
                class="h-full bg-green-500 transition-[width] duration-200"
                style="width: ${i}%;"
              ></div>`:""}
          ${n>0?v`<div
                class="h-full bg-orange-400 transition-[width] duration-200"
                style="width: ${n}%;"
              ></div>`:""}
        </div>
        <div
          class="absolute inset-0 flex items-center justify-between px-1.5 lg:px-2 text-xs lg:text-sm font-bold leading-none pointer-events-none"
          translate="no"
        >
          <span class="text-white drop-shadow-[0_1px_1px_rgba(0,0,0,0.8)]"
            >${Je(this._troops)}</span
          >
          <span class="text-white drop-shadow-[0_1px_1px_rgba(0,0,0,0.8)]"
            >${Je(this._maxTroops)}</span
          >
        </div>
        <div
          class="absolute inset-0 flex items-center justify-center gap-0.5 pointer-events-none"
          translate="no"
        >
          <img
            src=${rx}
            alt=""
            aria-hidden="true"
            width="12"
            height="12"
            class="lg:w-4 lg:h-4 brightness-0 invert drop-shadow-[0_1px_1px_rgba(0,0,0,0.8)]"
          />
          <span
            class="text-[10px] lg:text-xs font-bold drop-shadow-[0_1px_1px_rgba(0,0,0,0.8)] ${this._troopRateIsIncreasing?"text-green-400":"text-orange-400"}"
            >+${Je(this.troopRate)}/s</span
          >
        </div>
      </div>
    `}render(){return v`
      <div
        class="pointer-events-auto ${this._isVisible?"relative z-[60] w-full max-lg:landscape:fixed max-lg:landscape:bottom-0 max-lg:landscape:left-0 max-lg:landscape:w-1/2 max-lg:landscape:z-50 lg:max-w-[400px] text-sm lg:text-base bg-gray-800/70 p-1.5 pr-2 lg:p-5 shadow-lg lg:rounded-tr-xl min-[1200px]:rounded-xl backdrop-blur-sm":"hidden"}"
        @contextmenu=${t=>t.preventDefault()}
      >
        <div class="flex gap-2 lg:gap-3 items-center">
          <!-- Gold: 1/4 -->
          <div
            class="flex items-center justify-center p-1 lg:p-1.5 lg:gap-1 border rounded-md border-yellow-400 font-bold text-yellow-400 text-xs lg:text-sm w-1/5 lg:w-auto shrink-0"
            translate="no"
          >
            <img
              src=${Au}
              width="13"
              height="13"
              class="lg:w-4 lg:h-4"
            />
            <span class="px-0.5">${ce(this._gold)}</span>
          </div>
          <!-- Troop bar: 2/4 -->
          <div class="w-3/5 lg:flex-1">${this.renderTroopBar()}</div>
          <!-- Attack ratio: 1/4 -->
          <div
            class="relative w-1/5 shrink-0 flex items-center justify-center gap-1 cursor-pointer lg:hidden"
            @touchstart=${t=>this.handleAttackTouchStart(t)}
          >
            <div class="flex flex-col items-center w-10 shrink-0">
              <div
                class="flex items-center gap-0.5 text-white text-xs font-bold tabular-nums"
                translate="no"
              >
                <img
                  src=${vb}
                  alt=""
                  aria-hidden="true"
                  width="10"
                  height="10"
                  class="brightness-0 invert sepia saturate-[10000%] hue-rotate-[0deg]"
                  style="filter: brightness(0) saturate(100%) invert(36%) sepia(95%) saturate(5500%) hue-rotate(350deg) brightness(95%) contrast(95%);"
                />
                ${(this.attackRatio*100).toFixed(0)}%
              </div>
              <div class="text-[10px] text-red-400 tabular-nums" translate="no">
                (${Je((this.game?.myPlayer()?.troops()??0)*this.attackRatio)})
              </div>
            </div>
            <!-- Small red vertical bar indicator -->
            <div class="relative shrink-0">
              <div
                class="w-1.5 h-8 bg-white/20 rounded-full relative overflow-hidden"
              >
                <div
                  class="absolute bottom-0 w-full bg-red-500 rounded-full transition-all duration-200"
                  style="height: ${this.attackRatio*100}%"
                ></div>
              </div>
              ${this._touchDragging?v`
                    <div
                      class="absolute bottom-full left-1/2 -translate-x-1/2 mb-1 flex flex-col items-center pointer-events-auto z-[10000] bg-gray-800/80 backdrop-blur-sm rounded-lg p-2 w-12"
                      style="height: 50vh;"
                      @touchstart=${t=>this.handleBarTouch(t)}
                    >
                      <span
                        class="text-red-400 text-sm font-bold mb-1"
                        translate="no"
                        >${(this.attackRatio*100).toFixed(0)}%</span
                      >
                      <div
                        class="attack-drag-bar flex-1 w-3 bg-white/20 rounded-full relative overflow-hidden"
                      >
                        <div
                          class="absolute bottom-0 w-full bg-red-500 rounded-full"
                          style="height: ${this.attackRatio*100}%"
                        ></div>
                      </div>
                    </div>
                  `:""}
            </div>
          </div>
        </div>
        <!-- Attack ratio bar (desktop, always visible) -->
        <div class="hidden lg:block mt-2">
          <div
            class="flex items-center justify-between text-sm font-bold mb-1"
            translate="no"
          >
            <span class="text-white flex items-center gap-1"
              ><img
                src=${vb}
                alt=""
                aria-hidden="true"
                width="14"
                height="14"
                style="filter: brightness(0) saturate(100%) invert(36%) sepia(95%) saturate(5500%) hue-rotate(350deg) brightness(95%) contrast(95%);"
              />Attack Ratio</span
            >
            <span class="text-white tabular-nums"
              >${(this.attackRatio*100).toFixed(0)}%
              (${Je((this.game?.myPlayer()?.troops()??0)*this.attackRatio)})</span
            >
          </div>
          <input
            type="range"
            min="1"
            max="100"
            .value=${String(Math.round(this.attackRatio*100))}
            @input=${t=>this.handleRatioSliderInput(t)}
            class="w-full h-2 accent-red-500 cursor-pointer"
          />
        </div>
      </div>
    `}createRenderRoot(){return this}};bi([M()],kr.prototype,"attackRatio",2);bi([M()],kr.prototype,"_maxTroops",2);bi([M()],kr.prototype,"troopRate",2);bi([M()],kr.prototype,"_troops",2);bi([M()],kr.prototype,"_isVisible",2);bi([M()],kr.prototype,"_gold",2);bi([M()],kr.prototype,"_attackingTroops",2);bi([M()],kr.prototype,"_touchDragging",2);kr=bi([F("control-panel")],kr);class $T{constructor(e,r,i){this.transformHandler=e,this.x=r,this.y=i,this.lifeTime=0,this.duration=800,this.startRadius=13,this.chevronSize=5,this.cell=new We(this.x+.5,this.y+.5)}render(e,r){if(this.lifeTime+=r,this.lifeTime>=this.duration)return!1;const i=this.lifeTime/this.duration,n=1-i,a=this.transformHandler.scale,s=a>10?1+(a-10)/10:1,o=this.startRadius*s*(1-i*.7),l=this.chevronSize*s,c=this.transformHandler.worldToScreenCoordinates(this.cell),u=c.x,p=c.y;e.save(),e.globalAlpha=n,e.strokeStyle="#ff0000",e.lineWidth=2*s,e.lineCap="round",e.lineJoin="round";const d=l*.4,h=l*.6,g=l;return e.beginPath(),e.moveTo(u-g,p-o-h),e.lineTo(u,p-o+d),e.lineTo(u+g,p-o-h),e.moveTo(u-g,p+o+h),e.lineTo(u,p+o-d),e.lineTo(u+g,p+o+h),e.moveTo(u-o-h,p-g),e.lineTo(u-o+d,p),e.lineTo(u-o-h,p+g),e.moveTo(u+o+h,p-g),e.lineTo(u+o-d,p),e.lineTo(u+o+h,p+g),e.stroke(),e.restore(),!0}}const RT=.9,DT=2;class LT{constructor(e,r,i,n){this.transformHandler=e,this.x=r,this.y=i,this.radius=n,this.offset=0,this.rotationSpeed=20,this.animationDuration=150,this.animationElapsedTime=0,this.ended=!1,this.lifeTime=0,this.outerRadius=n*2-4,this.dashSize=Math.PI*this.outerRadius-10,this.cell=new We(this.x+.5,this.y+.5)}render(e,r){if(this.lifeTime+=r,this.ended&&(this.animationElapsedTime+=r,this.animationElapsedTime>=this.animationDuration))return!1;let i;this.ended?i=Math.max(0,1-this.animationElapsedTime/this.animationDuration):i=1;const n=Math.max(0,Math.min(1,RT*i)),a=this.transformHandler.worldToScreenCoordinates(this.cell);a.x=Math.round(a.x),a.y=Math.round(a.y);const s=this.transformHandler.scale,o=s>10?1+(s-10)/10:1;return this.offset+=this.rotationSpeed*(r/1e3),e.save(),e.globalAlpha=n,e.lineWidth=1,e.strokeStyle=`rgba(255,0,0,${n})`,this.drawInnerRing(e,a.x,a.y,o),this.drawOuterRing(e,a.x,a.y,o),e.restore(),!0}drawInnerRing(e,r,i,n){e.beginPath(),e.lineWidth=2,e.lineDashOffset=this.offset*n,e.setLineDash([8*n,8*n]),e.arc(r,i,this.radius*n,0,Math.PI*2),e.stroke()}drawOuterRing(e,r,i,n){e.beginPath(),e.lineWidth=4*n,e.lineDashOffset=-this.offset/2*n,e.setLineDash([this.dashSize*n,10*n]),e.arc(r,i,this.outerRadius*n,0,Math.PI*2),e.stroke(),e.beginPath(),e.strokeStyle="rgba(0,0,0,0.2)",e.arc(r,i+DT,this.outerRadius*n,0,Math.PI*2),e.stroke()}}class OT extends LT{constructor(e,r,i){const n=i.targetTile();if(n===void 0)throw new Error("NavalTarget requires a target tile");super(e,r.x(n),r.y(n),10),this.game=r,this.unit=i}render(e,r){return!this.ended&&(!this.unit.isActive()||this.unit.type()===C.TransportShip&&this.unit.retreating())&&(this.ended=!0),super.render(e,r)}}const BT=20,NT=.6;class UT{constructor(e,r,i,n,a){this.transformHandler=e,this.x=r,this.y=i,this.innerDiameter=n,this.outerDiameter=a,this.offset=0,this.rotationSpeed=20,this.baseAlpha=.9,this.animationDuration=150,this.ended=!1,this.lifeTime=0,this.cell=new We(this.x+.5,this.y+.5);const s=Math.max(1,Math.floor(this.outerDiameter/3));this.dashSize=Math.PI/s*this.outerDiameter}render(e,r){if(this.lifeTime+=r,this.ended&&this.lifeTime>=this.animationDuration)return!1;let i;this.ended?i=Math.max(0,1-this.lifeTime/this.animationDuration):i=Math.min(1,this.lifeTime/this.animationDuration);const n=Math.max(0,Math.min(1,this.baseAlpha*i)),a=this.transformHandler.scale,s=this.innerDiameter/2*(1-i)+this.innerDiameter*i,o=this.transformHandler.worldToScreenCoordinates(this.cell);o.x=Math.round(o.x),o.y=Math.round(o.y),e.save(),e.globalAlpha=n,e.lineWidth=2,e.strokeStyle=`rgba(255,0,0,${n})`,e.fillStyle=`rgba(255,0,0,${Math.max(0,n-NT)})`,e.beginPath(),e.lineWidth=1,e.arc(o.x,o.y,s*a,0,Math.PI*2),e.stroke(),e.fill(),this.offset+=this.rotationSpeed*(r/1e3),e.beginPath(),e.strokeStyle=`rgba(255,0,0,${n})`,e.lineWidth=Math.max(2,1*a),e.lineDashOffset=this.offset*a,e.setLineDash([this.dashSize*a]);const l=(this.outerDiameter+BT)*(1-i)+this.outerDiameter*i;return e.arc(o.x,o.y,l*a,0,Math.PI*2),e.stroke(),e.restore(),!0}}class zT extends UT{constructor(e,r,i){const n=i.targetTile();if(n===void 0)throw new Error("NukeArea requires a target tile");const a=r.config().nukeMagnitudes(i.type());super(e,r.x(n),r.y(n),a.inner,a.outer),this.game=r,this.nuke=i}render(e,r){return!this.ended&&!this.nuke.isActive()&&(this.ended=!0,this.lifeTime=0),super.render(e,r)}}const HT=1.1;class FT{constructor(e,r,i,n,a,s=15,o={r:255,g:255,b:255}){this.transformHandler=e,this.text=r,this.x=i,this.y=n,this.duration=a,this.riseDistance=s,this.color=o,this.fontSize=8,this.font="Overpass, sans-serif",this.lifeTime=0,this.cell=new We(this.x+.5,this.y+.5)}render(e,r){if(this.lifeTime+=r,this.lifeTime>=this.duration)return!1;const i=this.transformHandler.scale;if(i<HT)return!0;const n=this.transformHandler.worldToScreenCoordinates(this.cell);n.x=Math.round(n.x),n.y=Math.round(n.y);const a=Math.round(this.fontSize*i),s=this.lifeTime/this.duration,o=n.y-s*this.riseDistance*i,l=Math.max(0,1-s);return e.save(),e.font=`${a}px ${this.font}`,e.fillStyle=`rgba(${this.color.r}, ${this.color.g}, ${this.color.b}, ${l})`,e.textAlign="center",e.fillText(this.text,n.x,o),e.restore(),!0}}const qT=-5,jT=8,GT=2500;class VT{constructor(e,r,i){this.game=e,this.transformHandler=r,this.eventBus=i,this.uiElements=[],this.lastRefresh=Date.now()}init(){this.eventBus.on(af,e=>{const r=this.game.x(e.tile),i=this.game.y(e.tile);this.uiElements.push(new $T(this.transformHandler,r,i))})}shouldTransform(){return!1}tick(){if(!this.game.config().userSettings()?.fxLayer())return;const e=this.game.updatesSinceLastTick();e&&(e[ye.Unit]?.forEach(r=>{const i=this.game.unit(r.id);i&&this.onUnitEvent(i)}),e[ye.BonusEvent]?.forEach(r=>{r!==void 0&&this.onBonusEvent(r)}),e[ye.ConquestEvent]?.forEach(r=>{r!==void 0&&this.onConquestEvent(r)}))}onBonusEvent(e){if(this.game.player(e.player)!==this.game.myPlayer())return;const r=e.tile,i=this.game.x(r);let n=this.game.y(r)+qT;const a=e.gold,s=e.troops;a!==0&&(this.addNumber(a,i,n,1e3,10),n+=jT),s!==0&&this.addNumber(s,i,n,1e3,10)}onConquestEvent(e){if(this.game.player(e.conquerorId)!==this.game.myPlayer())return;const i=this.game.player(e.conqueredId).nameLocation(),n=i.x,a=i.y;this.addNumber(e.gold,n,a+8,GT,0)}onUnitEvent(e){switch(e.type()){case C.HydrogenBomb:case C.AtomBomb:{this.onBombEvent(e);break}case C.TransportShip:{this.onTransportShipEvent(e);break}}}onBombEvent(e){const r=this.game.myPlayer();if(r&&this.createdThisTick(e)&&(e.owner()===r||e.owner().isOnSameTeam(r))){const i=new zT(this.transformHandler,this.game,e);this.uiElements.push(i)}}onTransportShipEvent(e){const r=this.game.myPlayer();if(r&&this.createdThisTick(e)&&e.owner()===r){const i=new OT(this.transformHandler,this.game,e);this.uiElements.push(i)}}renderLayer(e){const r=Date.now(),i=r-this.lastRefresh;this.lastRefresh=r,this.game.config().userSettings()?.fxLayer()&&this.renderUIElements(e,i)}renderUIElements(e,r){for(let i=this.uiElements.length-1;i>=0;i--)this.uiElements[i].render(e,r)||this.uiElements.splice(i,1)}createdThisTick(e){return e.createdAt()===this.game.ticks()}addNumber(e,r,i,n,a){if(BigInt(e)===0n)return;const s=typeof e=="bigint"?e<0n?-e:e:Math.abs(e),o=ce(s,0),l=e>=0?"+":"-";this.uiElements.push(new FT(this.transformHandler,`${l} ${o}`,r,i,n,a))}}var WT=Object.defineProperty,KT=Object.getOwnPropertyDescriptor,ix=(t,e,r,i)=>{for(var n=i>1?void 0:i?KT(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&WT(e,r,n),n};let $c=class extends V{constructor(){super(...arguments),this.isVisible=!1,this.onEmojiClicked=()=>{},this.handleBackdropClick=t=>{const e=this.querySelector('div[class*="bg-zinc-900"]');e&&!e.contains(t.target)&&this.hideTable()}}initEventBus(t){t.on(Wp,e=>{this.isVisible=!0;const r=this.transformHandler.screenToWorldCoordinates(e.x,e.y);if(!this.game.isValidCoord(r.x,r.y))return;const i=this.game.ref(r.x,r.y);if(!this.game.hasOwner(i))return;const n=this.game.owner(i);n instanceof A2||this.showTable(a=>{const s=n===this.game.myPlayer()?ui:n;t.emit(new So(s,uo.indexOf(a))),this.hideTable()})}),t.on(es,e=>{this.hidden||this.hideTable()})}render(){return this.isVisible?v`
      <div
        class="fixed inset-0 bg-black/15 backdrop-brightness-110 flex items-start sm:items-center justify-center z-10002 pt-4 sm:pt-0"
        @click=${this.handleBackdropClick}
      >
        <div class="relative">
          <!-- Close button -->
          <button
            class="absolute -top-3 -right-3 w-7 h-7 flex items-center justify-center
                    bg-zinc-700 hover:bg-red-500 text-white rounded-full shadow-sm transition-colors z-10004"
            @click=${this.hideTable}
          >
            ✕
          </button>

          <div
            class="bg-zinc-900/95 p-2 sm:p-3 rounded-[10px] z-10003 shadow-2xl shadow-black/50 ring-1 ring-white/5
                   w-[calc(100vw-32px)] sm:w-100 max-h-[calc(100vh-60px)] overflow-y-auto"
            @contextmenu=${t=>t.preventDefault()}
            @wheel=${t=>t.stopPropagation()}
            @click=${t=>t.stopPropagation()}
          >
            <div class="grid grid-cols-5 gap-1 sm:gap-2">
              ${uo.map(t=>v`
                  <button
                    class="flex items-center justify-center cursor-pointer aspect-square
                           border border-solid border-zinc-600 rounded-lg bg-zinc-800 hover:bg-zinc-700 active:bg-zinc-600
                           text-3xl sm:text-4xl transition-transform duration-300 hover:scale-110 active:scale-95"
                    @click=${()=>this.onEmojiClicked(t)}
                  >
                    ${t}
                  </button>
                `)}
            </div>
          </div>
        </div>
      </div>
    `:null}hideTable(){this.isVisible=!1,this.requestUpdate()}showTable(t){this.onEmojiClicked=t,this.isVisible=!0,this.requestUpdate()}createRenderRoot(){return this}};ix([M()],$c.prototype,"isVisible",2);$c=ix([F("emoji-table")],$c);const pf=""+new URL("../images/AllianceIconWhite.svg",import.meta.url).href,nx=""+new URL("../images/ChatIconWhite.svg",import.meta.url).href,ff=""+new URL("../images/DonateGoldIconWhite.svg",import.meta.url).href,Rc=""+new URL("../images/SwordIconWhite.svg",import.meta.url).href;var YT=Object.defineProperty,XT=Object.getOwnPropertyDescriptor,dr=(t,e,r,i)=>{for(var n=i>1?void 0:i?XT(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&YT(e,r,n),n};let zt=class extends V{constructor(){super(),this.active=!1,this.events=[],this.alliancesCheckedAt=new Map,this.incomingAttacks=[],this.outgoingAttacks=[],this.outgoingLandAttacks=[],this.outgoingBoats=[],this._hidden=!1,this._isVisible=!1,this.newEvents=0,this.latestGoldAmount=null,this.goldAmountAnimating=!1,this.goldAmountTimeoutId=null,this.eventsFilters=new Map([[vr.ATTACK,!1],[vr.NUKE,!1],[vr.TRADE,!1],[vr.ALLIANCE,!1],[vr.CHAT,!1]]),this._shouldScrollToBottom=!0,this.updateMap=[[ye.DisplayEvent,this.onDisplayMessageEvent.bind(this)],[ye.DisplayChatEvent,this.onDisplayChatEvent.bind(this)],[ye.AllianceRequest,this.onAllianceRequestEvent.bind(this)],[ye.AllianceRequestReply,this.onAllianceRequestReplyEvent.bind(this)],[ye.BrokeAlliance,this.onBrokeAllianceEvent.bind(this)],[ye.TargetPlayer,this.onTargetPlayerEvent.bind(this)],[ye.Emoji,this.onEmojiMessageEvent.bind(this)],[ye.UnitIncoming,this.onUnitIncomingEvent.bind(this)],[ye.AllianceExpired,this.onAllianceExpiredEvent.bind(this)]],this.events=[],this.incomingAttacks=[],this.outgoingAttacks=[],this.outgoingBoats=[]}updated(t){super.updated(t),this._eventsContainer&&this._shouldScrollToBottom&&(this._eventsContainer.scrollTop=this._eventsContainer.scrollHeight)}renderButton(t){const{content:e,onClick:r,className:i="",disabled:n=!1,translate:a=!0,hidden:s=!1}=t;return s?v``:v`
      <button
        class="${i}"
        @click=${r}
        ?disabled=${n}
        ?translate=${a}
      >
        ${e}
      </button>
    `}renderToggleButton(t,e){const r={default:"h-5"};return this.renderButton({content:v`<img
        src="${t}"
        class="${r.default}"
        style="${this.eventsFilters.get(e)?"filter: grayscale(1) opacity(0.5);":""}"
      />`,onClick:()=>this.toggleEventFilter(e),className:"cursor-pointer pointer-events-auto"})}toggleHidden(){this._hidden=!this._hidden,this._hidden&&(this.newEvents=0),this.requestUpdate()}toggleEventFilter(t){const e=this.eventsFilters.get(t)??!1;this.eventsFilters.set(t,!e),this.requestUpdate()}init(){}tick(){if(this.active=!0,this._eventsContainer){const i=this._eventsContainer;this._shouldScrollToBottom=i.scrollHeight-i.scrollTop-i.clientHeight<5}else this._shouldScrollToBottom=!0;!this._isVisible&&!this.game.inSpawnPhase()&&(this._isVisible=!0,this.requestUpdate());const t=this.game.myPlayer();if(!t||!t.isAlive()){this._isVisible&&(this._isVisible=!1,this.requestUpdate());return}this.checkForAllianceExpirations();const e=this.game.updatesSinceLastTick();if(e)for(const[i,n]of this.updateMap)e[i]?.forEach(n);let r=this.events.filter(i=>{const n=this.game.ticks()-i.createdAt<(i.duration??600)&&!i.shouldDelete?.(this.game);return!n&&i.onDelete&&i.onDelete(),n});r.length>30&&(r=r.slice(-30)),this.events.length!==r.length&&(this.events=r,this.requestUpdate()),this.incomingAttacks=t.incomingAttacks().filter(i=>this.game.playerBySmallID(i.attackerID).type()!==ge.Bot),this.outgoingAttacks=t.outgoingAttacks().filter(i=>i.targetID!==0),this.outgoingLandAttacks=t.outgoingAttacks().filter(i=>i.targetID===0),this.outgoingBoats=t.units().filter(i=>i.type()===C.TransportShip),this.requestUpdate()}disconnectedCallback(){this.goldAmountTimeoutId!==null&&(clearTimeout(this.goldAmountTimeoutId),this.goldAmountTimeoutId=null)}checkForAllianceExpirations(){const t=this.game.myPlayer();if(t?.isAlive())for(const e of t.alliances()){if(e.expiresAt>this.game.ticks()+this.game.config().allianceExtensionPromptOffset()||(this.alliancesCheckedAt.get(e.id)??0)>=this.game.ticks()-this.game.config().allianceExtensionPromptOffset())continue;this.alliancesCheckedAt.set(e.id,this.game.ticks());const r=this.game.player(e.other);r.isAlive()&&this.addEvent({description:f("events_display.about_to_expire",{name:r.name()}),type:de.RENEW_ALLIANCE,duration:this.game.config().allianceExtensionPromptOffset()-30,buttons:[{text:f("events_display.focus"),className:"btn-gray",action:()=>this.eventBus.emit(new vn(r)),preventClose:!0},{text:f("events_display.renew_alliance",{name:r.name()}),className:"btn",action:()=>this.eventBus.emit(new F2(r))},{text:f("events_display.ignore"),className:"btn-info",action:()=>{}}],highlight:!0,createdAt:this.game.ticks(),focusID:r.smallID(),allianceID:e.id})}}addEvent(t){this.events=[...this.events,t],this._hidden===!0&&this.newEvents++,this.requestUpdate()}removeEvent(t){this.events=[...this.events.slice(0,t),...this.events.slice(t+1)]}shouldTransform(){return!1}renderLayer(){}removeAllianceRenewalEvents(t){this.events=this.events.filter(e=>!(e.type===de.RENEW_ALLIANCE&&e.allianceID===t))}onDisplayMessageEvent(t){const e=this.game.myPlayer();if(t.playerID!==null&&(!e||e.smallID()!==t.playerID))return;if(t.goldAmount!==void 0){const i=this.latestGoldAmount!==t.goldAmount;this.latestGoldAmount=t.goldAmount,this.goldAmountTimeoutId!==null&&clearTimeout(this.goldAmountTimeoutId),this.goldAmountTimeoutId=setTimeout(()=>{this.latestGoldAmount=null,this.goldAmountTimeoutId=null,this.requestUpdate()},5e3),i&&(this.goldAmountAnimating=!0,setTimeout(()=>{this.goldAmountAnimating=!1,this.requestUpdate()},600))}let r=t.message;t.message.startsWith("events_display.")&&(r=f(t.message,t.params??{})),this.addEvent({description:r,createdAt:this.game.ticks(),highlight:!0,type:t.messageType,unsafeDescription:!0})}onDisplayChatEvent(t){const e=this.game.myPlayer();if(t.playerID===null||!e||e.smallID()!==t.playerID)return;const r=f(`chat.${t.category}.${t.key}`);let i=r;if(t.target)try{const s=this.game.player(t.target)?.displayName()??t.target;i=r.replace("[P1]",s)}catch(a){console.warn(`Failed to resolve player for target ID '${t.target}'`,a);return}let n="";if(t.recipient!==null){const a=this.game.player(t.recipient);n=a?a.displayName():""}this.addEvent({description:f(t.isFrom?"chat.from":"chat.to",{user:n,msg:i}),createdAt:this.game.ticks(),highlight:!0,type:de.CHAT,unsafeDescription:!1})}onAllianceRequestEvent(t){const e=this.game.myPlayer();if(!e||t.recipientID!==e.smallID())return;const r=this.game.playerBySmallID(t.requestorID),i=this.game.playerBySmallID(t.recipientID);this.addEvent({description:f("events_display.request_alliance",{name:r.name()}),buttons:[{text:f("events_display.focus"),className:"btn-gray",action:()=>this.eventBus.emit(new vn(r)),preventClose:!0},{text:f("events_display.accept_alliance"),className:"btn",action:()=>this.eventBus.emit(new A0(r,i,!0))},{text:f("events_display.reject_alliance"),className:"btn-info",action:()=>this.eventBus.emit(new A0(r,i,!1))}],highlight:!0,type:de.ALLIANCE_REQUEST,createdAt:this.game.ticks(),priority:0,duration:this.game.config().allianceRequestDuration()-20,shouldDelete:n=>r.isAlliedWith(i),focusID:t.requestorID})}onAllianceRequestReplyEvent(t){const e=this.game.myPlayer();if(!e)return;if(t.request.recipientID===e.smallID()){this.events=this.events.filter(i=>!(i.type===de.ALLIANCE_REQUEST&&i.focusID===t.request.requestorID)),this.requestUpdate();return}if(t.request.requestorID!==e.smallID())return;const r=this.game.playerBySmallID(t.request.recipientID);this.addEvent({description:f("events_display.alliance_request_status",{name:r.name(),status:t.accepted?f("events_display.alliance_accepted"):f("events_display.alliance_rejected")}),type:t.accepted?de.ALLIANCE_ACCEPTED:de.ALLIANCE_REJECTED,highlight:!0,createdAt:this.game.ticks(),focusID:t.request.recipientID})}onBrokeAllianceEvent(t){const e=this.game.myPlayer();if(!e)return;this.removeAllianceRenewalEvents(t.allianceID),this.requestUpdate();const r=this.game.playerBySmallID(t.betrayedID),i=this.game.playerBySmallID(t.traitorID);if(!r.isDisconnected()){if(!r.isTraitor()&&i===e){const n=Math.round((1-this.game.config().traitorDefenseDebuff())*100),a=Math.floor(this.game.config().traitorDuration()*.1),s=a===1?f("events_display.duration_second"):f("events_display.duration_seconds_plural",{seconds:a});this.addEvent({description:f("events_display.betrayal_description",{name:r.name(),malusPercent:n,durationText:s}),type:de.ALLIANCE_BROKEN,highlight:!0,createdAt:this.game.ticks(),focusID:t.betrayedID})}else if(r===e){const n=[{text:f("events_display.focus"),className:"btn-gray",action:()=>this.eventBus.emit(new vn(i)),preventClose:!0}];this.addEvent({description:f("events_display.betrayed_you",{name:i.name()}),type:de.ALLIANCE_BROKEN,highlight:!0,createdAt:this.game.ticks(),focusID:t.traitorID,buttons:n})}}}onAllianceExpiredEvent(t){const e=this.game.myPlayer();if(!e)return;const r=t.player1ID===e.smallID()?t.player2ID:t.player2ID===e.smallID()?t.player1ID:null;if(r===null)return;const i=this.game.playerBySmallID(r);!i||!e.isAlive()||!i.isAlive()||this.addEvent({description:f("events_display.alliance_expired",{name:i.name()}),type:de.ALLIANCE_EXPIRED,highlight:!0,createdAt:this.game.ticks(),focusID:r})}onTargetPlayerEvent(t){const e=this.game.playerBySmallID(t.playerID),r=this.game.myPlayer();if(!r||!r.isFriendly(e))return;const i=this.game.playerBySmallID(t.targetID);this.addEvent({description:f("events_display.attack_request",{name:e.name(),target:i.name()}),type:de.ATTACK_REQUEST,highlight:!0,createdAt:this.game.ticks(),focusID:t.targetID})}emitCancelAttackIntent(t){this.game.myPlayer()&&this.eventBus.emit(new j2(t))}emitBoatCancelIntent(t){this.game.myPlayer()&&this.eventBus.emit(new G2(t))}emitGoToPlayerEvent(t){const e=this.game.playerBySmallID(t);e&&this.eventBus.emit(new vn(e))}emitGoToPositionEvent(t,e){this.eventBus.emit(new K2(t,e))}emitGoToUnitEvent(t){this.eventBus.emit(new Y2(t))}onEmojiMessageEvent(t){const e=this.game.myPlayer();if(!e)return;const r=t.emoji.recipientID===ui?ui:this.game.playerBySmallID(t.emoji.recipientID),i=this.game.playerBySmallID(t.emoji.senderID);r===e?this.addEvent({description:`${i.displayName()}: ${t.emoji.message}`,unsafeDescription:!0,type:de.CHAT,highlight:!0,createdAt:this.game.ticks(),focusID:t.emoji.senderID}):i===e&&r!==ui&&this.addEvent({description:f("events_display.sent_emoji",{name:r.displayName(),emoji:t.emoji.message}),unsafeDescription:!0,type:de.CHAT,highlight:!0,createdAt:this.game.ticks(),focusID:r.smallID()})}onUnitIncomingEvent(t){const e=this.game.myPlayer();if(!e||e.smallID()!==t.playerID)return;const r=this.game.unit(t.unitID);this.addEvent({description:t.message,type:t.messageType,unsafeDescription:!1,highlight:!0,createdAt:this.game.ticks(),unitView:r})}getEventDescription(t){return t.unsafeDescription?J2(My(t.description)):t.description}async attackWarningOnClick(t){const e=this.game.playerBySmallID(t.attackerID);if(e!==void 0){if(e instanceof ao){const r=await e.attackAveragePosition(t.attackerID,t.id);r===null?this.emitGoToPlayerEvent(t.attackerID):this.emitGoToPositionEvent(r.x,r.y)}}else this.emitGoToPlayerEvent(t.attackerID)}handleRetaliate(t){const e=this.game.playerBySmallID(t.attackerID);if(!e)return;const r=this.game.myPlayer();if(!r)return;const i=Math.min(t.troops,this.uiState.attackRatio*r.troops());this.eventBus.emit(new ko(e.id(),i))}renderIncomingAttacks(){return v`
      ${this.incomingAttacks.length>0?v`
            <div class="flex flex-wrap gap-y-1 gap-x-2">
              ${this.incomingAttacks.map(t=>v`
                  <div class="inline-flex items-center gap-1">
                    ${this.renderButton({content:v`
                        ${Je(t.troops)}
                        ${this.game.playerBySmallID(t.attackerID)?.name()}
                        ${t.retreating?`(${f("events_display.retreating")}...)`:""}
                      `,onClick:()=>this.attackWarningOnClick(t),className:"text-left text-red-400",translate:!1})}
                    ${t.retreating?"":this.renderButton({content:f("events_display.retaliate"),onClick:()=>this.handleRetaliate(t),className:"inline-block px-3 py-1 text-white rounded-sm text-md md:text-sm cursor-pointer transition-colors duration-300 bg-red-600 hover:bg-red-700",translate:!0})}
                  </div>
                `)}
            </div>
          `:""}
    `}renderOutgoingAttacks(){return v`
      ${this.outgoingAttacks.length>0?v`
            <div class="flex flex-wrap gap-y-1 gap-x-2">
              ${this.outgoingAttacks.map(t=>v`
                  <div class="inline-flex items-center gap-1">
                    ${this.renderButton({content:v`
                        ${Je(t.troops)}
                        ${this.game.playerBySmallID(t.targetID)?.name()}
                      `,onClick:async()=>this.attackWarningOnClick(t),className:"text-left text-blue-400",translate:!1})}
                    ${t.retreating?v`<span class="shrink-0 text-blue-400"
                          >(${f("events_display.retreating")}...)</span
                        >`:this.renderButton({content:"❌",onClick:()=>this.emitCancelAttackIntent(t.id),className:"text-left shrink-0",disabled:t.retreating})}
                  </div>
                `)}
            </div>
          `:""}
    `}renderOutgoingLandAttacks(){return v`
      ${this.outgoingLandAttacks.length>0?v`
            <div class="flex flex-wrap gap-y-1 gap-x-2">
              ${this.outgoingLandAttacks.map(t=>v`
                  <div class="inline-flex items-center gap-1">
                    ${this.renderButton({content:v`${Je(t.troops)}
                      ${f("help_modal.ui_wilderness")}`,className:"text-left text-gray-400",translate:!1})}
                    ${t.retreating?v`<span class="shrink-0 text-blue-400"
                          >(${f("events_display.retreating")}...)</span
                        >`:this.renderButton({content:"❌",onClick:()=>this.emitCancelAttackIntent(t.id),className:"text-left shrink-0",disabled:t.retreating})}
                  </div>
                `)}
            </div>
          `:""}
    `}renderBoats(){return v`
      ${this.outgoingBoats.length>0?v`
            <div class="flex flex-wrap gap-y-1 gap-x-2">
              ${this.outgoingBoats.map(t=>v`
                  <div class="inline-flex items-center gap-1">
                    ${this.renderButton({content:v`${f("events_display.boat")}:
                      ${Je(t.troops())}`,onClick:()=>this.emitGoToUnitEvent(t),className:"text-left text-blue-400",translate:!1})}
                    ${t.retreating()?v`<span class="shrink-0 text-blue-400"
                          >(${f("events_display.retreating")}...)</span
                        >`:this.renderButton({content:"❌",onClick:()=>this.emitBoatCancelIntent(t.id()),className:"text-left shrink-0",disabled:t.retreating()})}
                  </div>
                `)}
            </div>
          `:""}
    `}renderBetrayalDebuffTimer(){const t=this.game.myPlayer();if(!t||!t.isTraitor())return v``;const e=t.getTraitorRemainingTicks(),r=Math.ceil(e/10);return r<=0?v``:v`
      ${this.renderButton({content:v`${f("events_display.betrayal_debuff_ends",{time:r})}`,className:"text-left text-yellow-400",translate:!1})}
    `}render(){if(!this.active||!this._isVisible)return v``;const t=v`
      <style>
        @keyframes goldBounce {
          0% {
            transform: scale(1);
          }
          30% {
            transform: scale(1.3);
          }
          50% {
            transform: scale(1.1);
          }
          70% {
            transform: scale(1.2);
          }
          100% {
            transform: scale(1);
          }
        }
      </style>
    `,e=this.events.filter(r=>{const i=s3(r.type);return!this.eventsFilters.get(i)});return e.sort((r,i)=>{const n=r.priority??1e5,a=i.priority??1e5;return n===a?r.createdAt-i.createdAt:a-n}),v`
      ${t}
      <!-- Events Toggle (when hidden) -->
      ${this._hidden?v`
            <div
              class="relative w-fit min-[1200px]:bottom-4 min-[1200px]:right-4 z-50"
            >
              ${this.renderButton({content:v`
                  Events
                  <span
                    class="${this.newEvents?"":"hidden"} inline-block px-2 bg-red-500 rounded-lg text-sm"
                    >${this.newEvents}</span
                  >
                `,onClick:this.toggleHidden,className:"text-white cursor-pointer pointer-events-auto w-fit p-2 lg:p-3 rounded-lg bg-gray-800/70 backdrop-blur-sm"})}
            </div>
          `:v`
            <!-- Main Events Display -->
            <div
              class="relative w-full min-[1200px]:bottom-4 min-[1200px]:right-4 z-50 min-[1200px]:w-96 backdrop-blur-sm"
            >
              <!-- Button Bar -->
              <div
                class="w-full p-2 lg:p-3 bg-gray-800/70 min-[1200px]:rounded-t-lg lg:rounded-tl-lg"
              >
                <div class="flex justify-between items-center">
                  <div class="flex gap-4">
                    ${this.renderToggleButton(Rc,vr.ATTACK)}
                    ${this.renderToggleButton(Cu,vr.NUKE)}
                    ${this.renderToggleButton(ff,vr.TRADE)}
                    ${this.renderToggleButton(pf,vr.ALLIANCE)}
                    ${this.renderToggleButton(nx,vr.CHAT)}
                  </div>
                  <div class="flex items-center gap-3">
                    ${this.latestGoldAmount!==null?v`<span
                          class="text-green-400 font-semibold transition-all duration-300 ${this.goldAmountAnimating?"animate-pulse scale-110":"scale-100"}"
                          style="animation: ${this.goldAmountAnimating?"goldBounce 0.6s ease-out":"none"}"
                          >+${ce(this.latestGoldAmount)}</span
                        >`:""}
                    ${this.renderButton({content:f("leaderboard.hide"),onClick:this.toggleHidden,className:"text-white cursor-pointer pointer-events-auto"})}
                  </div>
                </div>
              </div>

              <!-- Content Area -->
              <div
                class="bg-gray-800/70 max-h-[30vh] overflow-y-auto w-full h-full min-[1200px]:rounded-b-xl events-container"
              >
                <div>
                  <table
                    class="w-full max-h-none border-collapse text-white shadow-lg lg:text-base text-md md:text-xs pointer-events-auto"
                  >
                    <tbody>
                      ${e.map((r,i)=>v`
                          <tr>
                            <td
                              class="lg:px-2 lg:py-1 p-1 text-left ${lC(r.type)}"
                            >
                              ${r.focusID?this.renderButton({content:this.getEventDescription(r),onClick:()=>{r.focusID&&this.emitGoToPlayerEvent(r.focusID)},className:"text-left"}):r.unitView?this.renderButton({content:this.getEventDescription(r),onClick:()=>{r.unitView&&this.emitGoToUnitEvent(r.unitView)},className:"text-left"}):this.getEventDescription(r)}
                              <!-- Events with buttons (Alliance requests) -->
                              ${r.buttons?v`
                                    <div class="flex flex-wrap gap-1.5 mt-1">
                                      ${r.buttons.map(n=>v`
                                          <button
                                            class="inline-block px-3 py-1 text-white rounded-sm text-md md:text-sm cursor-pointer transition-colors duration-300
                            ${n.className.includes("btn-info")?"bg-blue-500 hover:bg-blue-600":n.className.includes("btn-gray")?"bg-gray-500 hover:bg-gray-600":"bg-green-600 hover:bg-green-700"}"
                                            @click=${()=>{if(n.action(),!n.preventClose){const a=this.events.findIndex(s=>s===r);a!==-1&&this.removeEvent(a)}this.requestUpdate()}}
                                          >
                                            ${n.text}
                                          </button>
                                        `)}
                                    </div>
                                  `:""}
                            </td>
                          </tr>
                        `)}
                      <!--- Incoming attacks row -->
                      ${this.incomingAttacks.length>0?v`
                            <tr class="lg:px-2 lg:py-1 p-1">
                              <td class="lg:px-2 lg:py-1 p-1 text-left">
                                ${this.renderIncomingAttacks()}
                              </td>
                            </tr>
                          `:""}

                      <!--- Betrayal debuff timer row -->
                      ${(()=>{const r=this.game.myPlayer();return r&&r.isTraitor()&&r.getTraitorRemainingTicks()>0})()?v`
                            <tr class="lg:px-2 lg:py-1 p-1">
                              <td class="lg:px-2 lg:py-1 p-1 text-left">
                                ${this.renderBetrayalDebuffTimer()}
                              </td>
                            </tr>
                          `:""}

                      <!--- Outgoing attacks row -->
                      ${this.outgoingAttacks.length>0?v`
                            <tr class="lg:px-2 lg:py-1 p-1">
                              <td class="lg:px-2 lg:py-1 p-1 text-left">
                                ${this.renderOutgoingAttacks()}
                              </td>
                            </tr>
                          `:""}

                      <!--- Outgoing land attacks row -->
                      ${this.outgoingLandAttacks.length>0?v`
                            <tr class="lg:px-2 lg:py-1 p-1">
                              <td class="lg:px-2 lg:py-1 p-1 text-left">
                                ${this.renderOutgoingLandAttacks()}
                              </td>
                            </tr>
                          `:""}

                      <!--- Boats row -->
                      ${this.outgoingBoats.length>0?v`
                            <tr class="lg:px-2 lg:py-1 p-1">
                              <td class="lg:px-2 lg:py-1 p-1 text-left">
                                ${this.renderBoats()}
                              </td>
                            </tr>
                          `:""}

                      <!--- Empty row when no events or attacks -->
                      ${e.length===0&&this.incomingAttacks.length===0&&this.outgoingAttacks.length===0&&this.outgoingLandAttacks.length===0&&this.outgoingBoats.length===0&&!(()=>{const r=this.game.myPlayer();return r&&r.isTraitor()&&r.getTraitorRemainingTicks()>0})()?v`
                            <tr>
                              <td
                                class="lg:px-2 lg:py-1 p-1 min-w-72 text-left"
                              >
                                &nbsp;
                              </td>
                            </tr>
                          `:""}
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          `}
    `}createRenderRoot(){return this}};dr([M()],zt.prototype,"incomingAttacks",2);dr([M()],zt.prototype,"outgoingAttacks",2);dr([M()],zt.prototype,"outgoingLandAttacks",2);dr([M()],zt.prototype,"outgoingBoats",2);dr([M()],zt.prototype,"_hidden",2);dr([M()],zt.prototype,"_isVisible",2);dr([M()],zt.prototype,"newEvents",2);dr([M()],zt.prototype,"latestGoldAmount",2);dr([M()],zt.prototype,"goldAmountAnimating",2);dr([M()],zt.prototype,"eventsFilters",2);dr([Vt(".events-container")],zt.prototype,"_eventsContainer",2);zt=dr([F("events-display")],zt);var Pl=Q5();const ZT=""+new URL("of4-B-aCKxsA.mp3",import.meta.url).href,QT=""+new URL("openfront-FrD1OCbb.mp3",import.meta.url).href,JT=""+new URL("war-BpS5PwvO.mp3",import.meta.url).href,e8=""+new URL("../sounds/effects/ka-ching.mp3",import.meta.url).href;var ax=(t=>(t.KaChing="ka-ching",t))(ax||{});class t8{constructor(){this.backgroundMusic=[],this.currentTrack=0,this.soundEffects=new Map,this.soundEffectsVolume=1,this.backgroundMusicVolume=0,this.backgroundMusic=[new Pl.Howl({src:[ZT],loop:!1,onend:this.playNext.bind(this),volume:0}),new Pl.Howl({src:[QT],loop:!1,onend:this.playNext.bind(this),volume:0}),new Pl.Howl({src:[JT],loop:!1,onend:this.playNext.bind(this),volume:0})],this.loadSoundEffect("ka-ching",e8)}playBackgroundMusic(){this.backgroundMusic.length>0&&!this.backgroundMusic[this.currentTrack].playing()&&this.backgroundMusic[this.currentTrack].play()}stopBackgroundMusic(){this.backgroundMusic.length>0&&this.backgroundMusic[this.currentTrack].stop()}setBackgroundMusicVolume(e){this.backgroundMusicVolume=Math.max(0,Math.min(1,e)),this.backgroundMusic.forEach(r=>{r.volume(this.backgroundMusicVolume)})}playNext(){this.currentTrack=(this.currentTrack+1)%this.backgroundMusic.length,this.playBackgroundMusic()}loadSoundEffect(e,r){if(!this.soundEffects.has(e)){const i=new Pl.Howl({src:[r],volume:this.soundEffectsVolume});this.soundEffects.set(e,i)}}playSoundEffect(e){const r=this.soundEffects.get(e);r&&r.play()}setSoundEffectsVolume(e){this.soundEffectsVolume=Math.max(0,Math.min(1,e)),this.soundEffects.forEach(r=>{r.volume(this.soundEffectsVolume)})}stopSoundEffect(e){const r=this.soundEffects.get(e);r&&r.stop()}unloadSoundEffect(e){const r=this.soundEffects.get(e);r&&(r.unload(),this.soundEffects.delete(e))}}const yn=new t8,r8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHgAAAAQBAMAAAAv7abWAAAAElBMVEUAAACRkZGzsLCRkZGRkZGzsLCQajTAAAAABHRSTlMAt7t4Km0AcgAAAO9JREFUKM+tkUGuwjAMRE3r7tN/gn5O0COk0mT/+XLufxWw8DhCArGAWY2dN3Hcytf197w97S/4RWbZg3FD/b4ftWwYgf8ib8OTzDMT3XQc9PJiGS1n+tUZ8njOd8V54+suuq48OMm00eOB78l34PIThR7ig1Nljkc/8M1W8qg4cloVO+0BiSRvzcACNyUP9ZtSR4mw+dZhPVBjWPCsvOAw1OSX8UvgSr73Q7iORN/fdivZRjMy8H7NwoD7AF8flV8OPS5CBarevRpaj4A25ArOG+IiuBgOJnzjgQ1I6ckzoNkfvsbrekzLfnr2yXyoKzKPSXtPo5z4AAAAAElFTkSuQmCC",i8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAKoAAAAPCAYAAAB0p1TfAAAAAXNSR0IArs4c6QAAAy5JREFUaIHtmTFvGjEUx+0qKxkiMnRstogpXwCaTlkTFeauWUBNlmwoWxYScQsrM0Xp2qmFfoFMqFsZGYIywBrpdQi+vDPPfvbZF1GJv3TSnc/+n8n98uz3Toitttrq7bV4bELoOBjVc3ngcZRH88tnwAfl8dz9xM7DNl73MImbh4uuL89BHXk9sI+tjwx5wCYIAEBKmfkdMKqD/PjN+bctHpuwu59Y+5+eHKd/yO8/fq315Z5pAiLpD73ege7jOx57JP2hxOe+PljXl+fQ7vQK42kjQaXgC+ln9XCAGkOqRMFqky1yuUISA3YKzFiwFqlCJhYFIOQBACCEENjT9RmmrQAXQZUUpPdX5bTt7GaenrsAqwN2e/QkLh721vpxoGAfysMXtGm1Ah9+TyT2DYG1yKha2H+QCSQfiBWgYtx4aagN0nuuHgrUUrkrlNey8l4IR1hPT47h/qqcgVNBq9o4WE2R0Ac2V48Q0GJEVrXXDAGWAv5dXjNOUkoJhLwj7bjxAiiC1FUppJPZa2NtkL22iFryxQrQs5t5Cqypn5LpxVNRlfNI+kOJD90jJDmKoRgRtd3pST25YkFNo9obCwAghRRLRVdHlSazdY/aQJTKXWuFAC/5OJpimdqVcGZNwapgK9oDe9nuu/iEZvh5tWO7qSD1jYQhcGfGUlGUiayLxyaUJjORJkg5IjGM6sBByEnfTwpBL6s2eHSPpM/3o2BzWdI5iH2W9FhRFV9bI6qC03e5litR7RzEEonswETU3f1EsqWpcUMs5y3zHBxLWzjBchWuXfou01R/n0RoWq2wlQfOg4uoofdNfdilP2/2rkdhBWmuPSo+rw2EXg2waTlvZaF0TKZUgqT2ojqUeEtAJVP4hV887K2i6qso6HRI8PVO66e8PXpii/023R0cimm1Qo7nPNudnlRRzlSgd8n6qf2niza2bqakw+gLukt5ylbwp8pTImeJCmfoebJ1m4fPPvXr3z/i7uAwHeOb7WPQMLzCY9k3eZjGbySoMeqwsRW76B/yVSi0jOQSzTnFKEMJDc6iv25FVYwqQ97v/Zl55Pze/78o9Dv/VlttRegf6GKHk4ygjswAAAAASUVORK5CYII=",n8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANIAAAAUBAMAAAAKBn7YAAAAElBMVEUAAAD///9zc3P///9IOzGkpKSSivjdAAAAAnRSTlMAdVb8SIsAAAEBSURBVEjH3ZJBjoQgEEUrWAdwMQcgAntSZPaEeAK8/12muvT3JM7CTBuSTv8o4uObb1HQW2qmGeMQ5UmHiTINUs4YRsstdp81YOekeApihbll0sz8SFm8XpamBD+yQ7qEEAxY30RK36fFByFTEH15FUIwHOuUSvhGKDLvQQiGdCTJJj3bLD+gTWenkOaT0yBdQwgGFMqpxBO0r/wd6JZny8KvoUk9MhVGsE3pK/DcvVY6DLTGisytIzSlCNj/D13pKJCTh4GpMh2ZHqHc3HoD6iHBrnIjM0DIRGjlL6p/IV9ClPTsmiIzDBHv5x5dG6nWrbJeabRWb484PAl9qUyfoh8jSUHpPJ//TgAAAABJRU5ErkJggg==",a8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAHAgMAAACErt4mAAAACVBMVEUAAAC3t7eWlpZhB7eFAAAAAXRSTlMAQObYZgAAACNJREFUCNdjQAFcYDIERDA6MMxyYlBgYA1gY3IA8pkaUFQCAEQQArt2PQPRAAAAAElFTkSuQmCC",s8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAAMBAMAAADff4MYAAAAElBMVEUAAAD/vAD/////hgDRTBL/8xIjl22TAAAAAXRSTlMAQObYZgAAADRJREFUGNNjoCZwwSLGbIBFUBBMGgpDuQ4ggkkBRDIqCYA0MTAAtbGAJRFSQVAprAYOIAAAnRgCMrzidM8AAAAASUVORK5CYII=",o8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAANBAMAAAAtROHmAAAAElBMVEUAAACgoKD58WnYMQSycAD///97aI2+AAAAAXRSTlMAQObYZgAAAFpJREFUGNONi7sNgDAMBc98epssQMMAMAEF+8+E7SJFiFCe/HT2SWYo8lUK/FrpvoqCOnKrMc3TckPDRC2shE1kmS1GChS33hL2UqYTcWwVcMC6t+CB5W7QzwvkXgYEyKMOdQAAAABJRU5ErkJggg==",l8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAhwAAAA8BAMAAADf435QAAAAFVBMVEUAAAD/////9ln/hgBuTBH/vAD/3zZRIri0AAAAAXRSTlMAQObYZgAAB+xJREFUaN7tm01v00AQhg1eONeWuGMjc15llZxz8A+AWMsZESn//ycwX/ZkvwwOAZrCqHVbvw3qPHlndtY21f/4H/9yHKuXFLWDg4OoboxxHPOCGR+NVI0cLONwqwmbUsLGPJptHEdRsfXee+9sPmHEkU0OhSKLCgA+y3BL2FRDDK4iHJMrVQJ64GhyrJZfq55V1JJvSSn5Y34V4vAulzC6w+A3q2/2s+oSmm+ehpfIyEzD1rVTOQ3C8SjLC6TUY+TsgTBOpHZNOxXWleoDfMMwH6YVFHt/7Xa9xAcXawijI61pmqEqxlOFLB8majJA9i9mGsLDRtoeObR9P3j/uR0eKOF1GjtNNweqazBaABbhAG/QeQ9xyuGgdfaRjCE0lEdqjkYiwbEnX5zwCBHjqG31hnG4ybn3z7tZXMV1OWTM0cyRyHv2RY8B7vgUO4NxVK97IPLcFs9XTfOUFbAcxPRpOexQkQA5xjFgldAhthY3z0lGj6ReRppHKW5PyYw3+4wzKpWK5JvmhDSYFB1itfeDlzhN4T+7d3aZ0qBwkgEMDxTH1YTXRGF6vIGGRN4cV++/i1ARDdFStUdfUHgf4QAahONyuZxz7VRxlDanZkk4y6E6ynzGP2yrFImnXOfoOF22R5ATkWplYUnVae97jq71nipEZSgR7w7nC4RMNc5/CuplxiEVc0z29aRK8iZ8JZ8QHERoE40Sj5poCA9MzMY44EN5OHulDtJGuZQg19oF+t65w4Vw7MAhoHofe0NwxBmZxTVwRCEoCmSRuGHcViqFcgkWUjWAsmJvqD+sqkSjoxeCOviqDjauUCczjsuMQ+0xLjhMHsfIKS6C4siX1r1xNH0XL6baV3LtY38iXXD0fjr1g9rDHqhMEAX2D4dTbBbHuFRGZB3OW3yhhjC/vsZqPKW1om8/OsBmVNUDe0iZCI5h6vv2yh4HooCBXyfsLEpDcdB30dU+5qOL8l0HtyaIMo6m7ZoYR/DSrgn0NwSipwBl8PBv6T6vvsLB08f1+mKWQmFbaPq6WGyb3MY07c04dmE5RNWyi3C08HFVLa+xtcxLCyiI492ccl0fzohjGT64WiIcYoX1618qr4XJZF2uFa2WEEfAA6wf4uhWcUipfLzI2gJHxEE2cIgBccj4wfbA5mGOEQ76DBaP0Why2jZK7hiLWT9tx9F0JRwuwdFd6Y42tC3SuFwYxwmOiANTt28vBywVckpVAxg0yh5wjDOOKzfIueiugcpZHPrLxZLYgkNaR5Ay9lKdOlMcjeBwYHzCATQwEMcAJ/pJcFRfLge0hC66QIZw6Cil6QqPjTdblEcp6acSJ41ozmpDVXG4voyjBhwnxnFhHB3h6AmHxVd/OQMOWwU4wk56jHCUYx1H9Sdw1DvQyjhwBItxeMGR3n45/FYc5lhM+n44+q6Mw+GlH5pIGce3AIfwQAZfUxxaLC8Kh1/BgX2C5o6fxrGa7oaR4+/gwM09D6MfGUeDOJZW6t47xmFluw849I8PioV/0jd6Ow1T/XUcp57WVV1oBUdLOCYHnwEOCBvjGDO3lkyeicl6QdViK92+0IYZ/yyOrqeFVqdS4ON57oBFBw4T0uAKkUldrRC3UmUTbl5VXx1Ox/vgSOdOGrMUR5OZSgVH0w4nrJYIxzCB6AkH0dC4nGMcmmCEQyXWN+PQMexuOCqUoi1cgKMfeKWVIBz94AiHqwQB2eIAZFIc1UxlDHBotWjxZOuqDEiH9O1buKh1BDjCamkVR8045HKHBF1PJxwT4zggBbkI5Jz+8XTEDsk1ozSCOlEwP1p3ihvXGzb4aSdVHGG1cO7veUZrGkof9Nkigz+1/cQ4rFw2Ph8WHDa2Nu1a9HKYpp+GntygNs1tl3/gQ3doimPX0Tml0TEuxtG1hANOKo7PzeAs31R4Qh5EQg42KXjBsX53YSybI8J7t4uDgqONLg6+7gmC+kZaC+PgXqGBP3YzDkuL6+Eah4stLjgk1t7y8QZz3I4DOUi+AY5a7DDT6BiH7u8G5cG10jST47uzguPMXRR3+htxjNoUNrjjLjcWdHagWlFUS6NEQWuFx1ImEJpDL5UyDqCALDDsKo5jbpMqPSWFZZaDQrvbbSfhwSPmh/iWpObL64ri6ACH8sBvsVZEdvipISe9DXMVHJkuiiBCWMcCjvvflGwRBafu4hE+wuFmzYGmN/CFzGyCepI7tBJSPXtvxRh8PEIuag35apbppAjLBNfO7n/LmqoivWVNkgb8jnre7aDxTt6zQTyBGZzQqnEQEx7YQqyYQ3FwCBXpiPxV00dYBr6mHVNw/qEHGlSK4oNTzYGppk9v/BzTrkdPCA7kgcE45AKyn/SdjydwE5lE1LCEtELoF1X6I4+71E6qZKFhw2foIL2FByCYzUFP1up1IIj5XHqTdYSQr9o1Uu/o9J6F9ScehmK787aGYCgN9T5kifEJTqheO33QdD5fX50ykp7agvNOM9azmWXEKLo/86gcZFLTdJpR5U3HOtkLuyuMkHuK9jrP2ybxsXTN+Hc/SKkqLcGpWtMph23UpRgf6knS3J9fbi7cQ0uwWuohGeu80HDgnLJ4wgW3jNk+xrPmG6JeS8phKy3K+ynrkmf6XzPuU2ZFWrQM50RdVB7TIGvWgSirvsRDls3xYf4Xw8/zWBP3Oo+lMa5N2ublldLqkiXz+hqsl0fkF+aPl4jj3lGG9R1oAOaY7uFOIwAAAABJRU5ErkJggg==",c8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAbAAAAAmBAMAAABXKNPzAAAAFVBMVEUAAABRSEH////y6278kULfPiv/wFWL0RyhAAAAAXRSTlMAQObYZgAAA9lJREFUaN7tmcFuozAQhplCep5fTe4RlXqmdR4AFPbeSpv7Koe+/yMsxiaDmaHt0rDaSPsfgjNuKn/M+GeA7L9WVlHb8d1rZouz29DPMZjAEN8KjLPTRKdxnLJ/Vi79mlfDIJnYnHRmPk8NZuPrK3cz39sqiQcwWwQ7DvwFgtrIlKxfVLRxsE1/QfwxAHhK638CnR2+btaKSoFVtse17AFMCIBZAzCC0vBAOiXm6/lLn4JjpcK1X7wuFrAHIAUAG4AwiKcnYW1/cXXunFNgRRNWqjcM2RnAR2AqM5hkZAVKd3AWGICH9uie2QDYSgIEwAaLVJjULrFtnHw9yNwFVQrg0HY6arCtjzdgBXbC7iRksu9O/mqQFi+tbe7VBcxNZjxXTzAF2MKrBRuVyNglYIKzycC0SmZsFQJWTcDaKE6shdDAa9t4gHoMFkzlDbJ/xub5Sqws72oqSx3zTGXZpywfhckXHNCDFcdMgaFFxy7EwFvsdTnLWCyPh3Zxs17je192+jWN9lw9We4mYOjkd1kxisdKhD9SXQnvDqPS2pwiDliAiC9EpBuTGF+CXz69v59L7R3lPibucAkeGvRcMWUS7oG4t8AGoxUDOx5vq6KNY8kUAf7TWDFYSBaY/93TuSyfzntViFU/eHROdsyheWjbuJnao4RrzwPuV9kOYJu3cdsnQ4rJkAm5kVFgZnbI2Eta546rI3tKgseLH3ZgScWNwUQ9WHT94US3r8lZ3wG6zff8BP56k2znpvTVpWijUlf0ZGFagSEouZQBUGAzPfvGyoxdXzaYjWBbh7YP5/ahFu/cxDswgDUmmNcM2Fxm5Aea2BZNExZSpqN6xr3s4/xjCtYgajsFC3/wx2A8D0argqW9h4Ad6mlLKISmZY8nMF49sVAucL+FYM658U1ZIWDPaT6CKyowcXsbjHiUGFofLJdS7LE02BYKDEzeHtkCE2K1exSYwucF5iGumIK5cijFBIxmwEg6jxRsx2GwE7Ck8+iO+Bzs23YvGsBKl8YvYOId0isGGZZBMqE2HMAzBo+5mmTFYONaNepewvHxMHNHzCpuTVD8roEtxvTu7Jumcm+DFW4ftlit+oGgmTBsl9fAnHECLAgs7N96+H22KrHOji+hEuu5S6om65fPKt4DsP0vVOqhR/o5wfKOJPcpC72VBvuwsyNWE/ZiIMBWPFveQYrez0awiJurmsRbOZqnGl+sG54/QQK8iio7fLCfZRfNzKPgaz0nJMjnqnIpWF4PYMckfmJ53XLbmryu+CGISSr5Fl4pLXjBsRkX6228OPu6BFJ0I28H19RvHTaRkh+Vug8AAAAASUVORK5CYII=",u8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOAAAAAOBAMAAADETQ0gAAAAD1BMVEUAAAC0tLT///9GRkb09PRlm2kAAAAAAXRSTlMAQObYZgAAAJdJREFUOMvFj8kNwzAMBGkiBZhQAwt2IKiBPNx/TSFlBXwkfhlYr2GNqIMDyRPZduHGjCu23owqbmN0pngbkZ0ottZbN5K4hDRxCXjibMgTV4P7YveTikX/lnOC9cvrON5JjxRVk4D4jPzw3P9DDQSRIhUV5IeYRGKoKLyKeTGax5GUZO2ApkiCkFxEQuDq60FYjXD9Qno+9wQmfUyHB3UAAAAASUVORK5CYII=",d8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAMBAMAAADrBkIEAAAAFVBMVEUAAACzsLCzsLCRkZGRkZGRkZGzsLB2lMM6AAAABXRSTlMAu4rAiiIt7AwAAAB1SURBVBjTjYzBCYAwEASDaN5RGxArSAk+LOBENu/4SPovwdugEQTBg1uG4W7Nv2neYn5wKjnoWrMyXRELseur6DxLDmJO/hY2Kl0a2FQkaYlOEbuhwKjHgYcJnt+gDlFUF8xSviNLEzmDCGGHIpkJqci6rzkBYewSfpPg4wYAAAAASUVORK5CYII=",h8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJAAAAAQBAMAAAAL2OtTAAAAG1BMVEUAAACRkZFra2uGhob58WmycADYMQT///+NjY0nur1kAAAAAnRSTlMAtyOW6xcAAAEgSURBVDjLxU/LSsRAEBw74Fn0B8aamPPQDZKjDGH3upf8wAh+wCLkKnrxs51M5gWyYFCwQ6C6pqq7Wv1Pddw0Wu8zS6Mnuin07hS4p5zHKmV3hrjTySuELkeC/tH1V3mZWN1lbJikPUKrS01dLMlMAtyWEFAoKm4aDojqAaouBpIooPGjXAaNhBFK09YIYN7KAWJK6MB/AsnLYNYRMmJF3AkwJgmhDqJGYznwsm0WwxbYMK/694oxBnPGTdCiN2JgALsORX0gICZt9mZczVHD0asGwPvwR7MfEL5ouE68yrw0vES+w/MjDzxsQ3t/cAe8uDjU9X5C7xv+6Rtf9dTydJxez4tfVgNNy3Q+uoAr71r+sj40D/Os5tN8+hX+u/oChDpVGhb4LtEAAAAASUVORK5CYII=",p8="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEwAAAATBAMAAADIYfY6AAAAD1BMVEUAAAD/////hgD/vAD/8xIdM+tCAAAAAXRSTlMAQObYZgAAAIxJREFUKM+tkmEKgCAMhcsT9KADjHWDOkHg/c/Uawv8kVOhnugEP5+4bfqkNEYJF85AgEdtOoIygNjbbsbi8QRsu0lgYnHFrQib3aNg6ahhfuhv2o2CSRvTfzHxxEnrC9PmdsIRJeQ0bCdHy1RNbwYyt3yVnGpUL+RMX7Oj+qVP5HSkk/ShxLqqL7XkXHyoEjwZUOqgAAAAAElFTkSuQmCC";class yb{constructor(e,r,i,n,a=!1,s,o){if(this.image=e,this.frameWidth=r,this.frameCount=i,this.frameDuration=n,this.looping=a,this.originX=s,this.originY=o,this.currentFrame=0,this.elapsedTime=0,this.active=!0,"height"in e)this.frameHeight=e.height;else throw new Error("Image source must have a 'height' property.")}update(e){this.active&&(this.elapsedTime+=e,this.elapsedTime>=this.frameDuration&&(this.elapsedTime-=this.frameDuration,this.currentFrame++,this.currentFrame>=this.frameCount&&(this.looping?this.currentFrame=0:(this.currentFrame=this.frameCount-1,this.active=!1))))}isActive(){return this.active}lifeTime(){if(!this.looping)return this.frameDuration*this.frameCount}draw(e,r,i){const n=r-this.originX,a=i-this.originY;e.drawImage(this.image,this.currentFrame*this.frameWidth,0,this.frameWidth,this.frameHeight,n,a,this.frameWidth,this.frameHeight)}reset(){this.currentFrame=0,this.elapsedTime=0}setOrigin(e,r){this.originX=e,this.originY=r}}var Re=(t=>(t.MiniFire="MiniFire",t.MiniSmoke="MiniSmoke",t.MiniBigSmoke="MiniBigSmoke",t.MiniSmokeAndFire="MiniSmokeAndFire",t.MiniExplosion="MiniExplosion",t.UnitExplosion="UnitExplosion",t.BuildingExplosion="BuildingExplosion",t.SinkingShip="SinkingShip",t.Nuke="Nuke",t.SAMExplosion="SAMExplosion",t.UnderConstruction="UnderConstruction",t.Dust="Dust",t.Conquest="Conquest",t))(Re||{});const f8=""+new URL("../sprites/atombomb.png",import.meta.url).href,g8=""+new URL("../sprites/hydrogenbomb.png",import.meta.url).href,m8=""+new URL("../sprites/mirv2.png",import.meta.url).href,b8=""+new URL("../sprites/samMissile.png",import.meta.url).href,v8=""+new URL("../sprites/tradeship.png",import.meta.url).href,y8=""+new URL("../sprites/trainCarriage.png",import.meta.url).href,w8=""+new URL("../sprites/trainCarriageLoaded.png",import.meta.url).href,x8=""+new URL("../sprites/trainEngine.png",import.meta.url).href,_8=""+new URL("../sprites/transportship.png",import.meta.url).href,k8=""+new URL("../sprites/warship.png",import.meta.url).href,Ca={Engine:"Engine",Carriage:"Carriage",LoadedCarriage:"LoadedCarriage"},S8={[C.TransportShip]:_8,[C.Warship]:k8,[C.SAMMissile]:b8,[C.AtomBomb]:f8,[C.HydrogenBomb]:g8,[C.TradeShip]:v8,[C.MIRV]:m8,[Ca.Engine]:x8,[Ca.Carriage]:y8,[Ca.LoadedCarriage]:w8},Co=new Map,A8=async()=>{const t=Object.entries(S8),e=t.length;let r=0;await Promise.all(t.map(async([i,n])=>{const a=i;if(!n||n===""){console.warn(`No sprite URL for ${a}, skipping...`);return}try{const s=new Image;s.crossOrigin="anonymous",s.src=n,await new Promise((l,c)=>{s.onload=()=>l(),s.onerror=u=>c(u)});const o=await createImageBitmap(s);Co.set(a,o),r++,r===e&&console.log("All sprites loaded.")}catch(s){console.error(`Failed to load sprite for ${a}:`,s)}}))};function sx(t){switch(t.trainType()){case Xl.Engine:case Xl.TailEngine:return Ca.Engine;case Xl.Carriage:default:return t.isLoaded()?Ca.LoadedCarriage:Ca.Carriage}}const C8=t=>{const e=t.type();if(e===C.Train){const r=sx(t);return Co.get(r)??null}return Co.get(e)??null},T8=t=>{const e=t.type();if(e===C.Train){const r=sx(t);return Co.has(r)}return Co.has(e)},qd=new Map,ox=(t,e,r,i)=>{const n=document.createElement("canvas");n.width=t.width,n.height=t.height;const a=n.getContext("2d");a.drawImage(t,0,0);const s=a.getImageData(0,0,n.width,n.height),o=s.data,l=e.toRgb(),c=r.toRgb(),u=i.toRgb();for(let p=0;p<o.length;p+=4){const d=o[p],h=o[p+1],g=o[p+2];d===180&&h===180&&g===180?(o[p]=l.r,o[p+1]=l.g,o[p+2]=l.b):d===70&&h===70&&g===70?(o[p]=c.r,o[p+1]=c.g,o[p+2]=c.b):d===130&&h===130&&g===130&&(o[p]=u.r,o[p+1]=u.g,o[p+2]=u.b)}return a.putImageData(s,0,0),n};function E8(t,e,r){const i=t.owner();return`${`${t.type()}-${t.trainType()}-${t.isLoaded()}`}-${i.id()}-${e.toRgbString()}-${r.toRgbString()}`}const wb=(t,e,r,i)=>{const n=r??t.owner().territoryColor(),a=i??t.owner().borderColor(),s=e.spawnHighlightColor(),o=E8(t,n,a);if(qd.has(o))return qd.get(o);const l=C8(t);if(l===null)throw new Error(`Failed to load sprite for ${t.type()}`);const c=ox(l,n,a,s);return qd.set(o,c),c},$l={[Re.MiniFire]:{url:o8,frameWidth:7,frameCount:6,frameDuration:100,looping:!0,originX:3,originY:11},[Re.MiniSmoke]:{url:d8,frameWidth:11,frameCount:4,frameDuration:120,looping:!0,originX:2,originY:10},[Re.MiniBigSmoke]:{url:r8,frameWidth:24,frameCount:5,frameDuration:120,looping:!0,originX:9,originY:14},[Re.MiniSmokeAndFire]:{url:h8,frameWidth:24,frameCount:5,frameDuration:120,looping:!0,originX:9,originY:14},[Re.MiniExplosion]:{url:s8,frameWidth:13,frameCount:4,frameDuration:70,looping:!1,originX:6,originY:6},[Re.Dust]:{url:a8,frameWidth:9,frameCount:3,frameDuration:100,looping:!1,originX:4,originY:5},[Re.UnitExplosion]:{url:p8,frameWidth:19,frameCount:4,frameDuration:70,looping:!1,originX:9,originY:9},[Re.BuildingExplosion]:{url:i8,frameWidth:17,frameCount:10,frameDuration:70,looping:!1,originX:8,originY:8},[Re.SinkingShip]:{url:u8,frameWidth:16,frameCount:14,frameDuration:90,looping:!1,originX:7,originY:7},[Re.Nuke]:{url:l8,frameWidth:60,frameCount:9,frameDuration:70,looping:!1,originX:30,originY:30},[Re.SAMExplosion]:{url:c8,frameWidth:48,frameCount:9,frameDuration:70,looping:!1,originX:23,originY:19},[Re.Conquest]:{url:n8,frameWidth:21,frameCount:10,frameDuration:90,looping:!1,originX:10,originY:16}};class M8{constructor(){this.animatedSpriteImageMap=new Map,this.coloredAnimatedSpriteCache=new Map}async loadAllAnimatedSpriteImages(){const e=Object.entries($l);await Promise.all(e.map(async([r,i])=>{const n=r;if(i?.url)try{const a=new Image;a.crossOrigin="anonymous",a.src=i.url,await new Promise((o,l)=>{a.onload=()=>o(),a.onerror=c=>l(c)});const s=document.createElement("canvas");s.width=a.width,s.height=a.height,s.getContext("2d").drawImage(a,0,0),this.animatedSpriteImageMap.set(n,s)}catch(a){console.error(`Failed to load sprite for ${n}:`,a)}}))}createRegularAnimatedSprite(e){const r=$l[e],i=this.animatedSpriteImageMap.get(e);return!r||!i?null:new yb(i,r.frameWidth,r.frameCount,r.frameDuration,r.looping??!0,r.originX,r.originY)}getColoredAnimatedSprite(e,r,i){const n=this.animatedSpriteImageMap.get(r),a=$l[r];if(!n||!a)return null;const s=e.territoryColor(),o=e.borderColor(),l=i.spawnHighlightColor(),c=`${r}-${e.id()}`;let u;return this.coloredAnimatedSpriteCache.has(c)?u=this.coloredAnimatedSpriteCache.get(c):(u=ox(n,s,o,l),this.coloredAnimatedSpriteCache.set(c,u)),u}createColoredAnimatedSpriteForUnit(e,r,i){const n=$l[e],a=this.getColoredAnimatedSprite(r,e,i);return!n||!a?null:new yb(a,n.frameWidth,n.frameCount,n.frameDuration,n.looping??!0,n.originX,n.originY)}createAnimatedSprite(e,r,i){return r&&i?this.createColoredAnimatedSpriteForUnit(e,r,i):this.createRegularAnimatedSprite(e)}}function I8(t,e=.3,r=.7){if(t<e){const i=t/e;return i*i}else{if(t<r)return 1;{const i=(t-r)/(1-r);return 1-i*i}}}class lx{constructor(e,r,i){this.fxToFade=e,this.fadeIn=r,this.fadeOut=i}renderTick(e,r){const i=this.fxToFade.getElapsedTime()/this.fxToFade.getDuration();r.save(),r.globalAlpha=I8(i,this.fadeIn,this.fadeOut);const n=this.fxToFade.renderTick(e,r);return r.restore(),n}}class Br{constructor(e,r,i,n,a,s,o){this.x=r,this.y=i,this.elapsedTime=0,this.waitToTheEnd=!1,this.animatedSprite=e.createAnimatedSprite(n,s,o),this.animatedSprite?(this.waitToTheEnd=!!a,this.duration=a??this.animatedSprite.lifeTime()??1e3):console.error("Could not load animated sprite",n)}setPosition(e,r){this.x=e,this.y=r}renderTick(e,r){return!this.animatedSprite||(this.elapsedTime+=e,this.elapsedTime>=this.duration)||!this.animatedSprite.isActive()&&!this.waitToTheEnd?!1:(this.animatedSprite.update(e),this.animatedSprite.draw(r,this.x,this.y),!0)}getElapsedTime(){return this.elapsedTime}getDuration(){return this.duration}}function P8(t,e,r){const i=r.player(e.conqueredId),n=i.nameLocation().x,a=i.nameLocation().y,s=new Br(t,n,a,Re.Conquest,2500);return new lx(s,.1,.6)}class cx{constructor(e,r,i,n){this.x=e,this.y=r,this.duration=i,this.maxRadius=n,this.lifeTime=0}renderTick(e,r){if(this.lifeTime+=e,this.lifeTime>=this.duration)return!1;const i=this.lifeTime/this.duration,n=i*this.maxRadius;return r.beginPath(),r.arc(this.x,this.y,n,0,Math.PI*2),r.strokeStyle="rgba(255, 255, 255, "+(1-i)+")",r.lineWidth=.5,r.stroke(),!0}}function $8(t,e,r,i,n,a,s,o){const l=Math.max(0,Math.floor(n));for(let c=0;c<l;c++){const u=Math.random()*2*Math.PI,p=Math.random()*(i/2),d=Math.floor(e+Math.cos(u)*p),h=Math.floor(r+Math.sin(u)*p);if(o.isValidCoord(d,h)&&o.isLand(o.ref(d,h))){const g=new lx(new Br(t,d,h,a,6e3),.1,.8);s.push(g)}}}function R8(t,e,r,i,n){const a=[];a.push(new Br(t,e,r,Re.Nuke)),a.push(new cx(e,r,1500,i*1.5));const s=[{type:Re.MiniFire,radiusFactor:1,density:1/25},{type:Re.MiniSmoke,radiusFactor:1,density:1/28},{type:Re.MiniBigSmoke,radiusFactor:.9,density:1/70},{type:Re.MiniSmokeAndFire,radiusFactor:.9,density:1/70}];for(const{type:o,radiusFactor:l,density:c}of s)$8(t,e,r,i*l,i*c,o,a,n);return a}class D8{constructor(){this.tasks=[],this.timeElapsed=0}add(e,r){return this.tasks.push({delay:e,action:r,triggered:!1}),this}update(e){this.timeElapsed+=e;for(const r of this.tasks)!r.triggered&&this.timeElapsed>=r.delay&&(r.action(),r.triggered=!0)}isComplete(){return this.tasks.every(e=>e.triggered)}}class L8{constructor(e,r,i,n){this.x=r,this.y=i,this.timeline=new D8,this.explosions=[];const a=[{dx:0,dy:0,delay:0,type:Re.UnitExplosion},{dx:4,dy:-6,delay:80,type:Re.UnitExplosion},{dx:-6,dy:4,delay:160,type:Re.UnitExplosion}];for(const{dx:s,dy:o,delay:l,type:c}of a)this.timeline.add(l,()=>{n.isValidCoord(r+s,i+o)&&this.explosions.push(new Br(e,r+s,i+o,c))})}renderTick(e,r){this.timeline.update(e);let i=!0;for(const n of this.explosions)n.renderTick(e,r)&&(i=!1);return!i||!this.timeline.isComplete()}}var At=(t=>(t[t.VERTICAL=0]="VERTICAL",t[t.HORIZONTAL=1]="HORIZONTAL",t[t.TOP_LEFT=2]="TOP_LEFT",t[t.TOP_RIGHT=3]="TOP_RIGHT",t[t.BOTTOM_LEFT=4]="BOTTOM_LEFT",t[t.BOTTOM_RIGHT=5]="BOTTOM_RIGHT",t))(At||{});function O8(t,e){if(e.length===0)return[];if(e.length===1)return[{tile:e[0],type:0}];const r=[];r.push({tile:e[0],type:xb(t,e[0],e[1])});for(let i=1;i<e.length-1;i++){const n=B8(t,e[i-1],e[i],e[i+1]);r.push({tile:e[i],type:n})}return r.push({tile:e[e.length-1],type:xb(t,e[e.length-1],e[e.length-2])}),r}function xb(t,e,r){const i=t.x(e),n=t.y(e),a=t.x(r),s=t.y(r),o=a-i,l=s-n;return o===0&&l===0||o===0?0:l===0?1:0}function B8(t,e,r,i){const n=t.x(e),a=t.y(e),s=t.x(r),o=t.y(r),l=t.x(i),c=t.y(i),u=s-n,p=o-a,d=l-s,h=c-o;if(u===d&&p===h){if(u!==0)return 1;if(p!==0)return 0}if(u===0&&d!==0||u!==0&&d===0){if(u===0&&d===1&&p===-1)return 5;if(u===0&&d===-1&&p===-1)return 4;if(u===0&&d===1&&p===1)return 3;if(u===0&&d===-1&&p===1||u===1&&d===0&&h===-1)return 2;if(u===-1&&d===0&&h===-1)return 3;if(u===1&&d===0&&h===1)return 4;if(u===-1&&d===0&&h===1)return 5}return console.warn(`Invalid rail segment: ${u}:${p}, ${d}:${h}`),0}class jd{constructor(e,r,i=!1){this.id=e,this.railTiles=r,this.headIndex=0,this.increment=3,this.tailIndex=i?0:r.length}isComplete(){return this.headIndex>=this.tailIndex}tiles(){return this.railTiles}remainingTiles(){return this.isComplete()?[]:this.railTiles.slice(this.headIndex,this.tailIndex)}drawnTiles(){if(this.isComplete())return this.tiles();let e=this.railTiles.slice(0,this.headIndex);return e=e.concat(this.railTiles.slice(this.tailIndex)),e}tick(){if(this.isComplete())return[];let e;return this.tailIndex-this.headIndex<=2*this.increment?e=this.railTiles.slice(this.headIndex,this.tailIndex):e=[...this.railTiles.slice(this.headIndex,this.headIndex+this.increment),...this.railTiles.slice(this.tailIndex-this.increment,this.tailIndex)],this.headIndex=Math.min(this.headIndex+this.increment,this.tailIndex),this.tailIndex=Math.max(this.tailIndex-this.increment,this.headIndex),e}}const N8={[At.TOP_RIGHT]:q8,[At.BOTTOM_LEFT]:V8,[At.TOP_LEFT]:j8,[At.BOTTOM_RIGHT]:G8,[At.HORIZONTAL]:H8,[At.VERTICAL]:F8},U8={[At.TOP_RIGHT]:X8,[At.BOTTOM_LEFT]:Z8,[At.TOP_LEFT]:Q8,[At.BOTTOM_RIGHT]:J8,[At.HORIZONTAL]:K8,[At.VERTICAL]:Y8};function z8(t){const e=N8[t];if(!e)throw new Error(`Unsupported RailType: ${t}`);return e()}function H8(){return[[-1,-1,2,1],[-1,1,2,1],[-1,0,1,1]]}function F8(){return[[-1,-1,1,2],[1,-1,1,2],[0,0,1,1]]}function q8(){return[[-1,-1,1,1],[0,-1,1,2],[1,-1,1,3]]}function j8(){return[[-1,-1,1,3],[0,-1,1,2],[1,-1,1,1]]}function G8(){return[[-1,1,1,1],[0,0,1,2],[1,-1,1,3]]}function V8(){return[[-1,-1,1,3],[0,0,1,2],[1,1,1,1]]}function W8(t){const e=U8[t];if(!e)throw new Error(`Unsupported RailType: ${t}`);return e()}function K8(){return[[-1,-2,3,1],[-1,2,3,1],[-1,3,1,1],[1,3,1,1]]}function Y8(){return[[-2,-1,1,3],[2,-1,1,3]]}function X8(){return[[-2,-2,1,2],[-1,0,1,1],[0,1,1,1],[1,2,2,1],[2,-2,1,1]]}function Z8(){return[[-2,-2,2,1],[0,-1,1,1],[1,0,1,1],[2,1,1,2],[-2,2,1,1]]}function Q8(){return[[-2,-2,1,1],[-2,2,2,1],[0,1,1,1],[1,0,1,1],[2,-2,1,2]]}function J8(){return[[-2,1,1,2],[-1,0,1,1],[0,-1,1,1],[1,-2,2,1],[2,2,1,1]]}const eE=[C.Port,C.City,C.Factory];class M0{constructor(e){this.tile=e}}class tE{constructor(e,r,i,n){this.game=e,this.eventBus=r,this.transformHandler=i,this.uiState=n,this.alternativeView=!1,this.existingRailroads=new Map,this.railroads=new Map,this.pendingRailroads=new Set,this.nextRailIndexToCheck=0,this.railTileList=[],this.railTileIndex=new Map,this.lastRailColorUpdate=0,this.railColorIntervalMs=50}shouldTransform(){return!0}tick(){this.updatePendingRailroads();const e=this.game.updatesSinceLastTick();e&&(e[ye.RailroadConstructionEvent]?.forEach(r=>{r!==void 0&&this.onRailroadConstruction(r)}),e[ye.RailroadSnapEvent]?.forEach(r=>{r!==void 0&&this.onRailroadSnapEvent(r)}),e[ye.RailroadDestructionEvent]?.forEach(r=>{r!==void 0&&this.onRailroadDestruction(r)}))}updatePendingRailroads(){for(const e of this.pendingRailroads){const r=this.railroads.get(e);if(r===void 0){this.pendingRailroads.delete(e);continue}const i=r.tick();if(i.length===0){this.pendingRailroads.delete(e);continue}for(const n of i)this.paintRailTile(n),this.eventBus.emit(new M0(n.tile))}}updateRailColors(){if(this.railTileList.length===0)return;const e=performance.now();if(e-this.lastRailColorUpdate<this.railColorIntervalMs)return;this.lastRailColorUpdate=e;const r=Math.max(1,Math.ceil(this.railTileList.length/120));let i=0;for(;i<r&&this.railTileList.length>0;){const n=this.railTileList[this.nextRailIndexToCheck],a=this.existingRailroads.get(n);if(a){const s=this.game.owner(n)?.id()??null;a.lastOwnerId!==s&&(a.lastOwnerId=s,this.paintRail(a.tile))}this.nextRailIndexToCheck=(this.nextRailIndexToCheck+1)%this.railTileList.length,i++}}init(){this.eventBus.on(Dn,e=>{this.alternativeView=e.alternateView;for(const{tile:r}of this.existingRailroads.values())this.paintRail(r)}),this.redraw()}redraw(){this.canvas=document.createElement("canvas");const e=this.canvas.getContext("2d",{alpha:!0});if(e===null)throw new Error("2d context not supported");this.context=e,this.context.imageSmoothingEnabled=!0,this.context.imageSmoothingQuality="high",this.canvas.width=this.game.width()*2,this.canvas.height=this.game.height()*2;for(const[r,i]of this.existingRailroads)this.paintRail(i.tile)}highlightOverlappingRailroads(e){if(this.uiState.ghostStructure===null||!eE.includes(this.uiState.ghostStructure)||this.uiState.overlappingRailroads===void 0||this.uiState.overlappingRailroads.length===0)return;const r=-this.game.width()/2,i=-this.game.height()/2;e.fillStyle="rgba(0, 255, 0, 0.4)";for(const n of this.uiState.overlappingRailroads){const a=this.railroads.get(n);if(a)for(const s of a.drawnTiles()){const o=this.game.x(s.tile),l=this.game.y(s.tile);e.fillRect(o+r-1,l+i-1,2.5,2.5)}}}renderLayer(e){const r=this.transformHandler.scale;if(r<=1||this.existingRailroads.size===0)return;this.updateRailColors();const i=(r-1)/1,n=Math.max(0,Math.min(1,i)),[a,s]=this.transformHandler.screenBoundingRect(),o=2,l=Math.max(0,a.x-o),c=Math.max(0,a.y-o),u=Math.min(this.game.width(),s.x+o),p=Math.min(this.game.height(),s.y+o),d=Math.max(0,u-l),h=Math.max(0,p-c);if(d===0||h===0)return;const g=l*2,y=c*2,x=d*2,m=h*2,k=-this.game.width()/2+l,S=-this.game.height()/2+c;e.save(),e.globalAlpha=n,this.highlightOverlappingRailroads(e),e.drawImage(this.canvas,g,y,x,m,k,S,d,h),e.restore()}onRailroadSnapEvent(e){const r=this.railroads.get(e.originalId);if(!r){console.warn("Could not snap railroad: ",e.originalId);return}r.isComplete()||this.drawRemainingTiles(r);const i=e.tiles1.map(a=>({tile:a,type:At.HORIZONTAL})),n=e.tiles2.map(a=>({tile:a,type:At.HORIZONTAL}));this.railroads.set(e.newId1,new jd(e.newId1,i,!0)),this.railroads.set(e.newId2,new jd(e.newId2,n,!0)),this.railroads.delete(e.originalId)}drawRemainingTiles(e){for(const r of e.remainingTiles())this.paintRail(r);this.pendingRailroads.delete(e.id)}onRailroadConstruction(e){const r=O8(this.game,e.tiles),i=new jd(e.id,r);this.addRailroad(i)}onRailroadDestruction(e){const r=this.railroads.get(e.id);if(!r){console.warn("Can't remove unexisting railroad: ",e.id);return}this.removeRailroad(r)}addRailroad(e){this.railroads.set(e.id,e),this.pendingRailroads.add(e.id)}removeRailroad(e){this.pendingRailroads.delete(e.id);for(const r of e.drawnTiles())this.clearRailroad(r.tile),this.eventBus.emit(new M0(r.tile));this.railroads.delete(e.id)}paintRailTile(e){const r=this.game.owner(e.tile)?.id()??null,i=this.existingRailroads.get(e.tile);i?(i.numOccurence++,i.tile=e,i.lastOwnerId=r):(this.existingRailroads.set(e.tile,{tile:e,numOccurence:1,lastOwnerId:r}),this.railTileIndex.set(e.tile,this.railTileList.length),this.railTileList.push(e.tile),this.paintRail(e))}clearRailroad(e){const r=this.existingRailroads.get(e);if(r&&r.numOccurence--,!r||r.numOccurence<=0){if(this.existingRailroads.delete(e),this.removeRailTile(e),this.context===void 0)throw new Error("Not initialized");this.game.isWater(e)?this.context.clearRect(this.game.x(e)*2-2,this.game.y(e)*2-2,5,6):this.context.clearRect(this.game.x(e)*2-1,this.game.y(e)*2-1,3,3)}}removeRailTile(e){const r=this.railTileIndex.get(e);if(r===void 0)return;const i=this.railTileList.length-1,n=this.railTileList[i];this.railTileList[r]=n,this.railTileIndex.set(n,r),this.railTileList.pop(),this.railTileIndex.delete(e),this.nextRailIndexToCheck>=this.railTileList.length&&(this.nextRailIndexToCheck=0)}paintRail(e){if(this.context===void 0)throw new Error("Not initialized");const{tile:r}=e,{type:i}=e,n=this.game.x(r),a=this.game.y(r);this.game.isWater(r)&&this.paintBridge(this.context,n,a,i);const s=this.game.owner(r),o=s.isPlayer()?s:null;let l=o?o.borderColor():b("rgba(255,255,255,1)");this.alternativeView&&o?.isMe()&&(l=b("#00ff00")),this.context.fillStyle=l.toRgbString(),this.paintRailRects(this.context,n,a,i)}paintRailRects(e,r,i,n){const a=z8(n);for(const[s,o,l,c]of a)e.fillRect(r*2+s,i*2+o,l,c)}paintBridge(e,r,i,n){e.save(),e.fillStyle="rgb(197,69,72)";const a=W8(n);for(const[s,o,l,c]of a)e.fillRect(r*2+s,i*2+o,l,c);e.restore()}}class rE{constructor(e,r,i){this.game=e,this.eventBus=r,this.transformHandler=i,this.lastRefreshMs=0,this.refreshRate=10,this.animatedSpriteLoader=new M8,this.allFx=[],this.hasBufferedFrame=!1,this.theme=this.game.config().theme()}shouldTransform(){return!0}tick(){this.game.config().userSettings()?.fxLayer()&&(this.game.updatesSinceLastTick()?.[ye.Unit]?.map(e=>this.game.unit(e.id))?.forEach(e=>{e!==void 0&&this.onUnitEvent(e)}),this.game.updatesSinceLastTick()?.[ye.ConquestEvent]?.forEach(e=>{e!==void 0&&this.onConquestEvent(e)}))}onUnitEvent(e){switch(e.type()){case C.AtomBomb:{this.onNukeEvent(e,70);break}case C.MIRVWarhead:this.onNukeEvent(e,70);break;case C.HydrogenBomb:{this.onNukeEvent(e,160);break}case C.Warship:this.onWarshipEvent(e);break;case C.Shell:this.onShellEvent(e);break;case C.Train:this.onTrainEvent(e);break;case C.DefensePost:case C.City:case C.Port:case C.MissileSilo:case C.SAMLauncher:case C.Factory:this.onStructureEvent(e);break}}onShellEvent(e){if(!e.isActive()&&e.reachedTarget()){const r=this.game.x(e.lastTile()),i=this.game.y(e.lastTile()),n=new Br(this.animatedSpriteLoader,r,i,Re.MiniExplosion);this.allFx.push(n)}}onTrainEvent(e){if(!e.isActive()&&!e.reachedTarget()){const r=this.game.x(e.lastTile()),i=this.game.y(e.lastTile()),n=new Br(this.animatedSpriteLoader,r,i,Re.MiniExplosion);this.allFx.push(n)}}onRailroadEvent(e){if(Math.floor(Math.random()*3)===0){const i=this.game.x(e),n=this.game.y(e),a=new Br(this.animatedSpriteLoader,i,n,Re.Dust);this.allFx.push(a)}}onConquestEvent(e){this.game.player(e.conquerorId)===this.game.myPlayer()&&(yn.playSoundEffect(ax.KaChing),this.allFx.push(P8(this.animatedSpriteLoader,e,this.game)))}onWarshipEvent(e){if(!e.isActive()){const r=this.game.x(e.lastTile()),i=this.game.y(e.lastTile()),n=new L8(this.animatedSpriteLoader,r,i,this.game);this.allFx.push(n);const a=new Br(this.animatedSpriteLoader,r,i,Re.SinkingShip,void 0,e.owner(),this.theme);this.allFx.push(a)}}onStructureEvent(e){if(!e.isActive()){const r=this.game.x(e.lastTile()),i=this.game.y(e.lastTile()),n=new Br(this.animatedSpriteLoader,r,i,Re.BuildingExplosion);this.allFx.push(n)}}onNukeEvent(e,r){e.isActive()||(e.reachedTarget()?this.handleNukeExplosion(e,r):this.handleSAMInterception(e))}handleNukeExplosion(e,r){const i=this.game.x(e.lastTile()),n=this.game.y(e.lastTile()),a=R8(this.animatedSpriteLoader,i,n,r,this.game);this.allFx=this.allFx.concat(a)}handleSAMInterception(e){const r=this.game.x(e.lastTile()),i=this.game.y(e.lastTile()),n=new Br(this.animatedSpriteLoader,r,i,Re.SAMExplosion);this.allFx.push(n);const a=new cx(r,i,800,40);this.allFx.push(a)}async init(){this.redraw(),this.eventBus.on(M0,e=>{this.onRailroadEvent(e.tile)});try{this.animatedSpriteLoader.loadAllAnimatedSpriteImages(),console.log("FX sprites loaded successfully")}catch(e){console.error("Failed to load FX sprites:",e)}}redraw(){this.canvas=document.createElement("canvas");const e=this.canvas.getContext("2d");if(e===null)throw new Error("2d context not supported");this.context=e,this.context.imageSmoothingEnabled=!1,this.canvas.width=this.game.width(),this.canvas.height=this.game.height()}renderLayer(e){const r=performance.now(),i=this.allFx.length>0;if(!this.game.config().userSettings()?.fxLayer()||!i){this.hasBufferedFrame&&(this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.hasBufferedFrame=!1),this.lastRefreshMs=r;return}if(!this.hasBufferedFrame||r>this.lastRefreshMs+this.refreshRate){const a=this.hasBufferedFrame?r-this.lastRefreshMs:0;this.renderAllFx(a),this.lastRefreshMs=r,this.hasBufferedFrame=!0}this.drawVisibleFx(e)}drawVisibleFx(e){const r=this.game.width(),i=this.game.height(),[n,a]=this.transformHandler.screenBoundingRect(),s=2,o=Math.max(0,Math.floor(n.x-s)),l=Math.max(0,Math.floor(n.y-s)),c=Math.min(r,Math.ceil(a.x+s)),u=Math.min(i,Math.ceil(a.y+s)),p=Math.max(0,c-o),d=Math.max(0,u-l);p===0||d===0||e.drawImage(this.canvas,o,l,p,d,-r/2+o,-i/2+l,p,d)}renderAllFx(e){this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.renderContextFx(e)}renderContextFx(e){for(let r=this.allFx.length-1;r>=0;r--)this.allFx[r].renderTick(e,this.context)||this.allFx.splice(r,1)}}const iE=""+new URL("../images/LeaderboardIconRegularWhite.svg",import.meta.url).href,nE=""+new URL("../images/LeaderboardIconSolidWhite.svg",import.meta.url).href,aE=""+new URL("../images/TeamIconRegularWhite.svg",import.meta.url).href,sE=""+new URL("../images/TeamIconSolidWhite.svg",import.meta.url).href;var oE=Object.defineProperty,lE=Object.getOwnPropertyDescriptor,ts=(t,e,r,i)=>{for(var n=i>1?void 0:i?lE(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&oE(e,r,n),n};let Di=class extends V{constructor(){super(...arguments),this.isLeaderboardShow=!1,this.isTeamLeaderboardShow=!1,this.isVisible=!1,this.isPlayerTeamLabelVisible=!1,this.playerTeam=null,this.playerColor=new di("#FFFFFF"),this._shownOnInit=!1}createRenderRoot(){return this}init(){this.isVisible=!0,this.isTeamGame&&(this.isPlayerTeamLabelVisible=!0),window.innerWidth>=1024&&(this._shownOnInit=!0),this.requestUpdate()}tick(){!this.playerTeam&&this.game.myPlayer()?.team()&&(this.playerTeam=this.game.myPlayer().team(),this.playerTeam&&(this.playerColor=this.game.config().theme().teamColor(this.playerTeam),this.requestUpdate())),this._shownOnInit&&!this.game.inSpawnPhase()&&(this._shownOnInit=!1,this.isLeaderboardShow=!0,this.requestUpdate()),!this.game.inSpawnPhase()&&this.isPlayerTeamLabelVisible&&(this.isPlayerTeamLabelVisible=!1,this.requestUpdate())}toggleLeaderboard(){this.isLeaderboardShow=!this.isLeaderboardShow}toggleTeamLeaderboard(){this.isTeamLeaderboardShow=!this.isTeamLeaderboardShow}get isTeamGame(){return this.game?.config().gameConfig().gameMode===pe.Team}getTranslatedPlayerTeamLabel(){if(!this.playerTeam)return"";const t=`team_colors.${this.playerTeam.toLowerCase()}`,e=f(t);return e===t?this.playerTeam:e}render(){return v`
      <aside
        class=${`fixed top-4 left-4 z-1000 flex flex-col max-h-[calc(100vh-80px)] overflow-y-auto p-2 bg-slate-800/40 backdrop-blur-xs shadow-xs rounded-lg transition-transform duration-300 ease-out transform ${this.isVisible?"translate-x-0":"hidden"}`}
      >
        <div class="flex items-center gap-4 xl:gap-6 text-white">
          <div
            class="cursor-pointer p-0.5 bg-gray-700/50 hover:bg-gray-600 border rounded-md border-slate-500 transition-colors"
            @click=${this.toggleLeaderboard}
            role="button"
            tabindex="0"
            @keydown=${t=>{(t.key==="Enter"||t.key===" "||t.code==="Space")&&(t.preventDefault(),this.toggleLeaderboard())}}
          >
            <img
              src=${this.isLeaderboardShow?nE:iE}
              alt=${f("help_modal.icon_alt_player_leaderboard")||"Player Leaderboard Icon"}
              width="20"
              height="20"
            />
          </div>
          ${this.isTeamGame?v`
                <div
                  class="cursor-pointer p-0.5 bg-gray-700/50 hover:bg-gray-600 border rounded-md border-slate-500 transition-colors"
                  @click=${this.toggleTeamLeaderboard}
                  role="button"
                  tabindex="0"
                  @keydown=${t=>{(t.key==="Enter"||t.key===" "||t.code==="Space")&&(t.preventDefault(),this.toggleTeamLeaderboard())}}
                >
                  <img
                    src=${this.isTeamLeaderboardShow?sE:aE}
                    alt=${f("help_modal.icon_alt_team_leaderboard")||"Team Leaderboard Icon"}
                    width="20"
                    height="20"
                  />
                </div>
              `:null}
        </div>
        ${this.isPlayerTeamLabelVisible?v`
              <div
                class="flex items-center w-full text-white"
                @contextmenu=${t=>t.preventDefault()}
              >
                ${f("help_modal.ui_your_team")}
                <span
                  style="--color: ${this.playerColor.toRgbString()}"
                  class="text-(--color)"
                >
                  &nbsp;${this.getTranslatedPlayerTeamLabel()} &#10687;
                </span>
              </div>
            `:null}
        <div
          class=${`block lg:flex flex-wrap ${this.isLeaderboardShow&&this.isTeamLeaderboardShow?"gap-2":""}`}
        >
          <leader-board .visible=${this.isLeaderboardShow}></leader-board>
          <team-stats
            class="flex-1"
            .visible=${this.isTeamLeaderboardShow&&this.isTeamGame}
          ></team-stats>
        </div>
        <slot></slot>
      </aside>
    `}};ts([M()],Di.prototype,"isLeaderboardShow",2);ts([M()],Di.prototype,"isTeamLeaderboardShow",2);ts([M()],Di.prototype,"isVisible",2);ts([M()],Di.prototype,"isPlayerTeamLabelVisible",2);ts([M()],Di.prototype,"playerTeam",2);Di=ts([F("game-left-sidebar")],Di);var cE=Object.defineProperty,uE=Object.getOwnPropertyDescriptor,Mu=(t,e,r,i)=>{for(var n=i>1?void 0:i?uE(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&cE(e,r,n),n};class ux{constructor(e=!0,r=!1){this.visible=e,this.isSingleplayer=r}}let Ha=class extends V{constructor(){super(...arguments),this.visible=!1,this._replaySpeedMultiplier=H2,this.isSingleplayer=!1}createRenderRoot(){return this}init(){this.eventBus&&this.eventBus.on(ux,t=>{this.visible=t.visible,this.isSingleplayer=t.isSingleplayer})}getTickIntervalMs(){return 1e3}tick(){this.visible&&this.requestUpdate()}onReplaySpeedChange(t){this._replaySpeedMultiplier=t,this.eventBus?.emit(new D2(t))}renderLayer(t){}shouldTransform(){return!1}render(){return this.visible?v`
      <div
        class="p-2 bg-gray-800/70 backdrop-blur-xs shadow-xs rounded-lg"
        @contextmenu=${t=>t.preventDefault()}
      >
        <label class="block mb-2 text-white" translate="no">
          ${this.game?.config()?.isReplay()?f("replay_panel.replay_speed"):f("replay_panel.game_speed")}
        </label>
        <div class="grid grid-cols-4 gap-2">
          ${this.renderSpeedButton(va.slow,"×0.5")}
          ${this.renderSpeedButton(va.normal,"×1")}
          ${this.renderSpeedButton(va.fast,"×2")}
          ${this.renderSpeedButton(va.fastest,f("replay_panel.fastest_game_speed"))}
        </div>
      </div>
    `:v``}renderSpeedButton(t,e){const r=this._replaySpeedMultiplier===t?"bg-blue-400":"";return v`
      <button
        class="py-0.5 px-1 text-sm text-white rounded-sm border transition border-gray-500 ${r} hover:border-gray-200"
        @click=${()=>this.onReplaySpeedChange(t)}
      >
        ${e}
      </button>
    `}};Mu([L({type:Boolean})],Ha.prototype,"visible",2);Mu([M()],Ha.prototype,"_replaySpeedMultiplier",2);Mu([L({type:Boolean})],Ha.prototype,"isSingleplayer",2);Ha=Mu([F("replay-panel")],Ha);const dE=""+new URL("../images/CursorPriceIconWhite.svg",import.meta.url).href,hE=""+new URL("../images/DarkModeIconWhite.svg",import.meta.url).href,dx=""+new URL("../images/EmojiIconWhite.svg",import.meta.url).href,gf=""+new URL("../images/ExitIconWhite.svg",import.meta.url).href,pE=""+new URL("../images/ExplosionIconWhite.svg",import.meta.url).href,fE=""+new URL("../images/MouseIconWhite.svg",import.meta.url).href,gE=""+new URL("../images/NinjaIconWhite.svg",import.meta.url).href,I0=""+new URL("../images/SettingIconWhite.svg",import.meta.url).href,mE=""+new URL("../images/SirenIconWhite.svg",import.meta.url).href,bE=""+new URL("../images/TreeIconWhite.svg",import.meta.url).href,_b=""+new URL("../images/music.svg",import.meta.url).href;var vE=Object.defineProperty,yE=Object.getOwnPropertyDescriptor,rs=(t,e,r,i)=>{for(var n=i>1?void 0:i?yE(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&vE(e,r,n),n};class hx{constructor(e=!0,r=!1,i=!1){this.isVisible=e,this.shouldPause=r,this.isPaused=i}}let Li=class extends V{constructor(){super(...arguments),this.isVisible=!1,this.alternateView=!1,this.shouldPause=!1,this.wasPausedWhenOpened=!1,this.handleOutsideClick=t=>{this.isVisible&&this.modalOverlay&&t.target===this.modalOverlay&&this.closeModal()},this.handleKeyDown=t=>{this.isVisible&&t.key==="Escape"&&this.closeModal()}}init(){yn.setBackgroundMusicVolume(this.userSettings.backgroundMusicVolume()),yn.setSoundEffectsVolume(this.userSettings.soundEffectsVolume()),this.eventBus.on(hx,t=>{this.isVisible=t.isVisible,this.shouldPause=t.shouldPause,this.wasPausedWhenOpened=t.isPaused,this.pauseGame(!0)})}createRenderRoot(){return this}connectedCallback(){super.connectedCallback(),window.addEventListener("click",this.handleOutsideClick,!0),window.addEventListener("keydown",this.handleKeyDown)}disconnectedCallback(){window.removeEventListener("click",this.handleOutsideClick,!0),window.removeEventListener("keydown",this.handleKeyDown),super.disconnectedCallback()}openModal(){this.isVisible=!0,this.requestUpdate()}closeModal(){this.isVisible=!1,this.requestUpdate(),this.pauseGame(!1)}pauseGame(t){this.shouldPause&&!this.wasPausedWhenOpened&&(t?ve.gameplayStop():ve.gameplayStart(),this.eventBus.emit(new Kp(t)))}onTerrainButtonClick(){this.alternateView=!this.alternateView,this.eventBus.emit(new Dn(this.alternateView)),this.requestUpdate()}onToggleEmojisButtonClick(){this.userSettings.toggleEmojis(),this.requestUpdate()}onToggleStructureSpritesButtonClick(){this.userSettings.toggleStructureSprites(),this.requestUpdate()}onToggleSpecialEffectsButtonClick(){this.userSettings.toggleFxLayer(),this.requestUpdate()}onToggleAlertFrameButtonClick(){this.userSettings.toggleAlertFrame(),this.requestUpdate()}onToggleDarkModeButtonClick(){this.userSettings.toggleDarkMode(),this.eventBus.emit(new Vp),this.requestUpdate()}onToggleRandomNameModeButtonClick(){this.userSettings.toggleRandomName(),this.requestUpdate()}onToggleLeftClickOpensMenu(){this.userSettings.toggleLeftClickOpenMenu(),this.requestUpdate()}onToggleCursorCostLabelButtonClick(){this.userSettings.toggleCursorCostLabel(),this.requestUpdate()}onTogglePerformanceOverlayButtonClick(){this.userSettings.togglePerformanceOverlay(),this.requestUpdate()}onExitButtonClick(){window.location.href="/"}onVolumeChange(t){const e=parseFloat(t.target.value)/100;this.userSettings.setBackgroundMusicVolume(e),yn.setBackgroundMusicVolume(e),this.requestUpdate()}onSoundEffectsVolumeChange(t){const e=parseFloat(t.target.value)/100;this.userSettings.setSoundEffectsVolume(e),yn.setSoundEffectsVolume(e),this.requestUpdate()}render(){return this.isVisible?v`
      <div
        class="modal-overlay fixed inset-0 bg-black/60 backdrop-blur-xs z-2000 flex items-center justify-center p-4"
        @contextmenu=${t=>t.preventDefault()}
      >
        <div
          class="bg-slate-800 border border-slate-600 rounded-lg max-w-md w-full max-h-[80vh] overflow-y-auto"
        >
          <div
            class="flex items-center justify-between p-4 border-b border-slate-600"
          >
            <div class="flex items-center gap-2">
              <img
                src=${I0}
                alt="settings"
                width="24"
                height="24"
                class="align-middle"
              />
              <h2 class="text-xl font-semibold text-white">
                ${f("user_setting.tab_basic")}
              </h2>
            </div>
            <button
              class="text-slate-400 hover:text-white text-2xl font-bold leading-none"
              @click=${this.closeModal}
            >
              ×
            </button>
          </div>

          <div class="p-4 flex flex-col gap-3">
            <div
              class="flex gap-3 items-center w-full text-left p-3 hover:bg-slate-700 rounded-sm text-white transition-colors"
            >
              <img src=${_b} alt="musicIcon" width="20" height="20" />
              <div class="flex-1">
                <div class="font-medium">
                  ${f("user_setting.background_music_volume")}
                </div>
                <input
                  type="range"
                  min="0"
                  max="100"
                  .value=${this.userSettings.backgroundMusicVolume()*100}
                  @input=${this.onVolumeChange}
                  class="w-full border border-slate-500 rounded-lg"
                />
              </div>
              <div class="text-sm text-slate-400">
                ${Math.round(this.userSettings.backgroundMusicVolume()*100)}%
              </div>
            </div>

            <div
              class="flex gap-3 items-center w-full text-left p-3 hover:bg-slate-700 rounded-sm text-white transition-colors"
            >
              <img
                src=${_b}
                alt="soundEffectsIcon"
                width="20"
                height="20"
              />
              <div class="flex-1">
                <div class="font-medium">
                  ${f("user_setting.sound_effects_volume")}
                </div>
                <input
                  type="range"
                  min="0"
                  max="100"
                  .value=${this.userSettings.soundEffectsVolume()*100}
                  @input=${this.onSoundEffectsVolumeChange}
                  class="w-full border border-slate-500 rounded-lg"
                />
              </div>
              <div class="text-sm text-slate-400">
                ${Math.round(this.userSettings.soundEffectsVolume()*100)}%
              </div>
            </div>

            <button
              class="flex gap-3 items-center w-full text-left p-3 hover:bg-slate-700 rounded-sm text-white transition-colors"
              @click="${this.onTerrainButtonClick}"
            >
              <img src=${bE} alt="treeIcon" width="20" height="20" />
              <div class="flex-1">
                <div class="font-medium">
                  ${f("user_setting.toggle_terrain")}
                </div>
                <div class="text-sm text-slate-400">
                  ${f("user_setting.toggle_view_desc")}
                </div>
              </div>
              <div class="text-sm text-slate-400">
                ${this.alternateView?f("user_setting.on"):f("user_setting.off")}
              </div>
            </button>

            <button
              class="flex gap-3 items-center w-full text-left p-3 hover:bg-slate-700 rounded-sm text-white transition-colors"
              @click="${this.onToggleEmojisButtonClick}"
            >
              <img src=${dx} alt="emojiIcon" width="20" height="20" />
              <div class="flex-1">
                <div class="font-medium">
                  ${f("user_setting.emojis_label")}
                </div>
                <div class="text-sm text-slate-400">
                  ${f("user_setting.emojis_desc")}
                </div>
              </div>
              <div class="text-sm text-slate-400">
                ${this.userSettings.emojis()?f("user_setting.on"):f("user_setting.off")}
              </div>
            </button>

            <button
              class="flex gap-3 items-center w-full text-left p-3 hover:bg-slate-700 rounded-sm text-white transition-colors"
              @click="${this.onToggleDarkModeButtonClick}"
            >
              <img
                src=${hE}
                alt="darkModeIcon"
                width="20"
                height="20"
              />
              <div class="flex-1">
                <div class="font-medium">
                  ${f("user_setting.dark_mode_label")}
                </div>
                <div class="text-sm text-slate-400">
                  ${f("user_setting.dark_mode_desc")}
                </div>
              </div>
              <div class="text-sm text-slate-400">
                ${this.userSettings.darkMode()?f("user_setting.on"):f("user_setting.off")}
              </div>
            </button>

            <button
              class="flex gap-3 items-center w-full text-left p-3 hover:bg-slate-700 rounded-sm text-white transition-colors"
              @click="${this.onToggleSpecialEffectsButtonClick}"
            >
              <img
                src=${pE}
                alt="specialEffects"
                width="20"
                height="20"
              />
              <div class="flex-1">
                <div class="font-medium">
                  ${f("user_setting.special_effects_label")}
                </div>
                <div class="text-sm text-slate-400">
                  ${f("user_setting.special_effects_desc")}
                </div>
              </div>
              <div class="text-sm text-slate-400">
                ${this.userSettings.fxLayer()?f("user_setting.on"):f("user_setting.off")}
              </div>
            </button>

            <button
              class="flex gap-3 items-center w-full text-left p-3 hover:bg-slate-700 rounded-sm text-white transition-colors"
              @click="${this.onToggleAlertFrameButtonClick}"
            >
              <img src=${mE} alt="alertFrame" width="20" height="20" />
              <div class="flex-1">
                <div class="font-medium">
                  ${f("user_setting.alert_frame_label")}
                </div>
                <div class="text-sm text-slate-400">
                  ${f("user_setting.alert_frame_desc")}
                </div>
              </div>
              <div class="text-sm text-slate-400">
                ${this.userSettings.alertFrame()?f("user_setting.on"):f("user_setting.off")}
              </div>
            </button>

            <button
              class="flex gap-3 items-center w-full text-left p-3 hover:bg-slate-700 rounded-sm text-white transition-colors"
              @click="${this.onToggleStructureSpritesButtonClick}"
            >
              <img
                src=${Su}
                alt="structureSprites"
                width="20"
                height="20"
              />
              <div class="flex-1">
                <div class="font-medium">
                  ${f("user_setting.structure_sprites_label")}
                </div>
                <div class="text-sm text-slate-400">
                  ${f("user_setting.structure_sprites_desc")}
                </div>
              </div>
              <div class="text-sm text-slate-400">
                ${this.userSettings.structureSprites()?f("user_setting.on"):f("user_setting.off")}
              </div>
            </button>

            <button
              class="flex gap-3 items-center w-full text-left p-3 hover:bg-slate-700 rounded-sm text-white transition-colors"
              @click="${this.onToggleCursorCostLabelButtonClick}"
            >
              <img
                src=${dE}
                alt="cursorCostLabel"
                width="20"
                height="20"
              />
              <div class="flex-1">
                <div class="font-medium">
                  ${f("user_setting.cursor_cost_label_label")}
                </div>
                <div class="text-sm text-slate-400">
                  ${f("user_setting.cursor_cost_label_desc")}
                </div>
              </div>
              <div class="text-sm text-slate-400">
                ${this.userSettings.cursorCostLabel()?f("user_setting.on"):f("user_setting.off")}
              </div>
            </button>

            <button
              class="flex gap-3 items-center w-full text-left p-3 hover:bg-slate-700 rounded-sm text-white transition-colors"
              @click="${this.onToggleRandomNameModeButtonClick}"
            >
              <img src=${gE} alt="ninjaIcon" width="20" height="20" />
              <div class="flex-1">
                <div class="font-medium">
                  ${f("user_setting.anonymous_names_label")}
                </div>
                <div class="text-sm text-slate-400">
                  ${f("user_setting.anonymous_names_desc")}
                </div>
              </div>
              <div class="text-sm text-slate-400">
                ${this.userSettings.anonymousNames()?f("user_setting.on"):f("user_setting.off")}
              </div>
            </button>

            <button
              class="flex gap-3 items-center w-full text-left p-3 hover:bg-slate-700 rounded-sm text-white transition-colors"
              @click="${this.onToggleLeftClickOpensMenu}"
            >
              <img src=${fE} alt="mouseIcon" width="20" height="20" />
              <div class="flex-1">
                <div class="font-medium">
                  ${f("user_setting.left_click_menu")}
                </div>
                <div class="text-sm text-slate-400">
                  ${f("user_setting.left_click_desc")}
                </div>
              </div>
              <div class="text-sm text-slate-400">
                ${this.userSettings.leftClickOpensMenu()?f("user_setting.on"):f("user_setting.off")}
              </div>
            </button>

            <button
              class="flex gap-3 items-center w-full text-left p-3 hover:bg-slate-700 rounded-sm text-white transition-colors"
              @click="${this.onTogglePerformanceOverlayButtonClick}"
            >
              <img
                src=${I0}
                alt="performanceIcon"
                width="20"
                height="20"
              />
              <div class="flex-1">
                <div class="font-medium">
                  ${f("user_setting.performance_overlay_label")}
                </div>
                <div class="text-sm text-slate-400">
                  ${f("user_setting.performance_overlay_desc")}
                </div>
              </div>
              <div class="text-sm text-slate-400">
                ${this.userSettings.performanceOverlay()?f("user_setting.on"):f("user_setting.off")}
              </div>
            </button>

            <div class="border-t border-slate-600 pt-3 mt-4">
              <button
                class="flex gap-3 items-center w-full text-left p-3 hover:bg-red-600/20 rounded-sm text-red-400 transition-colors"
                @click="${this.onExitButtonClick}"
              >
                <img src=${gf} alt="exitIcon" width="20" height="20" />
                <div class="flex-1">
                  <div class="font-medium">
                    ${f("user_setting.exit_game_label")}
                  </div>
                  <div class="text-sm text-slate-400">
                    ${f("user_setting.exit_game_info")}
                  </div>
                </div>
              </button>
            </div>
          </div>
        </div>
      </div>
    `:null}};rs([M()],Li.prototype,"isVisible",2);rs([M()],Li.prototype,"alternateView",2);rs([Vt(".modal-overlay")],Li.prototype,"modalOverlay",2);rs([L({type:Boolean})],Li.prototype,"shouldPause",2);rs([L({type:Boolean})],Li.prototype,"wasPausedWhenOpened",2);Li=rs([F("settings-modal")],Li);const wE=""+new URL("../images/FastForwardIconSolidWhite.svg",import.meta.url).href,xE=""+new URL("../images/PauseIconWhite.svg",import.meta.url).href,_E=""+new URL("../images/PlayIconWhite.svg",import.meta.url).href;var kE=Object.defineProperty,SE=Object.getOwnPropertyDescriptor,is=(t,e,r,i)=>{for(var n=i>1?void 0:i?SE(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&kE(e,r,n),n};let Oi=class extends V{constructor(){super(...arguments),this._isSinglePlayer=!1,this._isReplayVisible=!1,this._isVisible=!0,this.isPaused=!1,this.timer=0,this.hasWinner=!1,this.isLobbyCreator=!1,this.secondsToHms=t=>{const e=a=>a<10?`0${a}`:a,r=Math.floor(t/3600),i=Math.floor(t%3600/60),n=Math.floor(t%3600%60);return r!==0?`${e(r)}:${e(i)}:${e(n)}`:`${e(i)}:${e(n)}`}}createRenderRoot(){return this}init(){this._isSinglePlayer=this.game?.config()?.gameConfig()?.gameType===lt.Singleplayer||this.game.config().isReplay(),this._isVisible=!0,this.game.inSpawnPhase(),this.eventBus.on(Ic,()=>{this.hasWinner=!0,this.requestUpdate()}),this.requestUpdate()}getTickIntervalMs(){return 250}tick(){!this.isLobbyCreator&&this.game.myPlayer()?.isLobbyCreator()&&(this.isLobbyCreator=!0,this.requestUpdate());const t=this.game.config().gameConfig().maxTimerValue,e=this.game.config().numSpawnPhaseTurns(),r=this.game.ticks(),i=Math.max(0,r-e),n=Math.floor(i/10);if(this.game.inSpawnPhase()){this.timer=t!==void 0?t*60:0;return}this.hasWinner||(t!==void 0?this.timer=Math.max(0,t*60-n):this.timer=n)}toggleReplayPanel(){this._isReplayVisible=!this._isReplayVisible,this.eventBus.emit(new ux(this._isReplayVisible,this._isSinglePlayer))}onPauseButtonClick(){this.isPaused=!this.isPaused,this.isPaused?ve.gameplayStop():ve.gameplayStart(),this.eventBus.emit(new Kp(this.isPaused))}async onExitButtonClick(){this.game.myPlayer()?.isAlive()&&!confirm(f("help_modal.exit_confirmation"))||(await ve.requestMidgameAd(),await ve.gameplayStop(),window.location.href="/")}onSettingsButtonClick(){this.eventBus.emit(new hx(!0,this._isSinglePlayer,this.isPaused))}render(){if(this.game===void 0)return v``;const t=this.game.config().gameConfig().maxTimerValue!==void 0&&this.timer<60?"text-red-400":"";return v`
      <aside
        class=${`w-fit flex flex-row items-center gap-3 py-2 px-3 bg-gray-800/70 backdrop-blur-xs shadow-xs rounded-lg transition-transform duration-300 ease-out transform text-white ${this._isVisible?"translate-x-0":"translate-x-full"}`}
        @contextmenu=${e=>e.preventDefault()}
      >
        <!-- In-game time -->
        <div class=${t}>${this.secondsToHms(this.timer)}</div>

        <!-- Buttons -->
        ${this.maybeRenderReplayButtons()}

        <div class="cursor-pointer" @click=${this.onSettingsButtonClick}>
          <img src=${I0} alt="settings" width="20" height="20" />
        </div>

        <div class="cursor-pointer" @click=${this.onExitButtonClick}>
          <img src=${gf} alt="exit" width="20" height="20" />
        </div>
      </aside>
    `}maybeRenderReplayButtons(){const t=this._isSinglePlayer||this.game?.config()?.isReplay(),e=t||this.isLobbyCreator;return v`
      ${t?v`
            <div class="cursor-pointer" @click=${this.toggleReplayPanel}>
              <img
                src=${wE}
                alt="replay"
                width="20"
                height="20"
              />
            </div>
          `:""}
      ${e?v`
            <div class="cursor-pointer" @click=${this.onPauseButtonClick}>
              <img
                src=${this.isPaused?_E:xE}
                alt="play/pause"
                width="20"
                height="20"
              />
            </div>
          `:""}
    `}};is([M()],Oi.prototype,"_isSinglePlayer",2);is([M()],Oi.prototype,"_isReplayVisible",2);is([M()],Oi.prototype,"_isVisible",2);is([M()],Oi.prototype,"isPaused",2);is([M()],Oi.prototype,"timer",2);Oi=is([F("game-right-sidebar")],Oi);var AE=Object.defineProperty,CE=Object.getOwnPropertyDescriptor,Yo=(t,e,r,i)=>{for(var n=i>1?void 0:i?CE(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&AE(e,r,n),n};let Bn=class extends V{constructor(){super(...arguments),this.isVisible=!1,this.isPaused=!1,this.toastMessage=null,this.toastColor="green",this.toastTimeout=null,this.handleShowMessage=t=>{const{message:e,duration:r,color:i}=t.detail??{};(typeof e=="string"||e&&typeof e.values=="object")&&(this.toastMessage=e,this.toastColor=i==="red"?"red":"green",this.requestUpdate(),this.toastTimeout&&clearTimeout(this.toastTimeout),this.toastTimeout=window.setTimeout(()=>{this.toastMessage=null,this.requestUpdate()},typeof r=="number"?r??2e3:2e3))}}createRenderRoot(){return this}connectedCallback(){super.connectedCallback(),window.addEventListener("show-message",this.handleShowMessage)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("show-message",this.handleShowMessage),this.toastTimeout&&clearTimeout(this.toastTimeout)}init(){this.isVisible=!0,this.requestUpdate()}tick(){const t=this.game.updatesSinceLastTick();if(t&&t[ye.GamePaused].length>0){const e=t[ye.GamePaused][0];this.isPaused=e.paused}this.isVisible=this.game.inSpawnPhase()||this.isPaused,this.requestUpdate()}getMessage(){return this.isPaused?this.game.config().gameConfig().gameType===lt.Singleplayer?f("heads_up_message.singleplayer_game_paused"):f("heads_up_message.multiplayer_game_paused"):this.game.config().isRandomSpawn()?f("heads_up_message.random_spawn"):f("heads_up_message.choose_spawn")}render(){return v`
      <div style="pointer-events: none;">
        ${this.toastMessage?v`
              <div
                class="fixed top-6 left-1/2 -translate-x-1/2 z-[11001] px-6 py-4 rounded-xl transition-all duration-300 animate-fade-in-out"
                style="max-width: 90vw; min-width: 200px; text-align: center;
                  background: ${this.toastColor==="red"?"rgba(239,68,68,0.1)":"rgba(34,197,94,0.1)"};
                  border: 1px solid ${this.toastColor==="red"?"rgba(239,68,68,0.5)":"rgba(34,197,94,0.5)"};
                  color: white;
                  box-shadow: 0 0 30px 0 ${this.toastColor==="red"?"rgba(239,68,68,0.3)":"rgba(34,197,94,0.3)"};
                  backdrop-filter: blur(12px);"
                @contextmenu=${t=>t.preventDefault()}
              >
                ${typeof this.toastMessage=="string"?v`<span class="font-medium">${this.toastMessage}</span>`:this.toastMessage}
              </div>
            `:null}
        ${this.isVisible?v`
              <div
                class="fixed top-[15%] left-1/2 -translate-x-1/2 z-[11000]
                            inline-flex items-center justify-center h-8 lg:h-10
                            w-fit max-w-[90vw]
                            bg-gray-900/60 rounded-md lg:rounded-lg
                            backdrop-blur-md text-white text-md lg:text-xl px-3 lg:px-4
                            text-center break-words"
                style="word-wrap: break-word; hyphens: auto;"
                @contextmenu=${t=>t.preventDefault()}
              >
                ${this.getMessage()}
              </div>
            `:null}
      </div>
    `}};Yo([M()],Bn.prototype,"isVisible",2);Yo([M()],Bn.prototype,"isPaused",2);Yo([M()],Bn.prototype,"toastMessage",2);Yo([M()],Bn.prototype,"toastColor",2);Bn=Yo([F("heads-up-message")],Bn);var TE=Object.getOwnPropertyDescriptor,EE=(t,e,r,i)=>{for(var n=i>1?void 0:i?TE(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=s(n)||n);return n};let P0=class extends V{constructor(){super(...arguments),this.isVisible=!1,this.isActive=!1,this.progressRatio=0}createRenderRoot(){return this.style.position="fixed",this.style.top="0",this.style.left="0",this.style.width="100%",this.style.height="7px",this.style.zIndex="1000",this.style.pointerEvents="none",this}init(){this.isVisible=!0}tick(){if(!this.game||!this.isVisible)return;const t=this.game.config().gameConfig().gameMode===pe.Team&&!this.game.inSpawnPhase();this.style.top=t?"7px":"0px";const e=this.game.config().spawnImmunityDuration(),r=this.game.config().numSpawnPhaseTurns();if(e<=50||this.game.inSpawnPhase()){this.setInactive();return}const i=r+e,n=this.game.ticks();if(n>=i||n<r){this.setInactive();return}const a=Math.max(0,n-r);this.progressRatio=Math.min(1,Math.max(0,a/e)),this.isActive=!0,this.requestUpdate()}setInactive(){this.isActive&&(this.isActive=!1,this.requestUpdate())}shouldTransform(){return!1}render(){if(!this.isVisible||!this.isActive)return v``;const t=this.progressRatio*100;return v`
      <div class="w-full h-full flex z-999">
        <div
          class="h-full transition-all duration-100 ease-in-out"
          style="width: ${t}%; background-color: rgba(255, 165, 0, 0.9);"
        ></div>
      </div>
    `}};P0=EE([F("immunity-timer")],P0);var ME=Object.getOwnPropertyDescriptor,IE=(t,e,r,i)=>{for(var n=i>1?void 0:i?ME(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=s(n)||n);return n};const PE=600*10,Gd="standard_iab_head1",kb="header-ad-container",$E=1536;let $0=class extends V{constructor(){super(...arguments),this.isHidden=!1,this.adLoaded=!1,this.shouldShow=!1}createRenderRoot(){return this}init(){}showHeaderAd(){window.innerWidth<$E||window.adsEnabled&&(this.shouldShow=!0,this.requestUpdate(),this.updateComplete.then(()=>{this.loadAd()}))}loadAd(){if(!window.ramp){console.warn("Playwire RAMP not available for header ad");return}try{window.ramp.que.push(()=>{try{window.ramp.spaAddAds([{type:Gd,selectorId:kb}]),this.adLoaded=!0,console.log("Header ad loaded:",Gd)}catch(t){console.error("Failed to add header ad:",t)}})}catch(t){console.error("Failed to load header ad:",t)}}hideHeaderAd(){this.shouldShow=!1,this.adLoaded=!1;try{window.ramp.destroyUnits(Gd),console.log("successfully destroyed in game header ad")}catch(t){console.error("error destroying in game header ad",t)}this.requestUpdate()}tick(){if(this.isHidden)return;if(this.game.ticks()-this.game.config().numSpawnPhaseTurns()>PE){console.log("destroying header ad and refreshing PageOS"),this.hideHeaderAd(),this.isHidden=!0,window.PageOS?.session?.newPageView&&window.PageOS.session.newPageView();return}}shouldTransform(){return!1}render(){return this.shouldShow?v`
      <div
        id="${kb}"
        class="hidden 2xl:flex fixed top-0 left-1/2 -translate-x-1/2 z-[100] justify-center items-center pointer-events-auto p-0 -mt-[20px]"
      ></div>
    `:v``}};$0=IE([F("in-game-header-ad")],$0);const RE=""+new URL("../images/BoatIconWhite.svg",import.meta.url).href,DE=""+new URL("../images/BuildIconWhite.svg",import.meta.url).href,px=""+new URL("../images/DonateTroopIconWhite.svg",import.meta.url).href,mf=""+new URL("../images/InfoIcon.svg",import.meta.url).href,LE=""+new URL("../images/TargetIconWhite.svg",import.meta.url).href,fx=""+new URL("../images/TraitorIconWhite.svg",import.meta.url).href,OE=""+new URL("../images/XIcon.svg",import.meta.url).href,Pt={build:"#ebe250",building:"#2c2c2c",boat:"#3f6ab1",ally:"#53ac75",breakAlly:"#c74848",breakAllyNoDebuff:"#d4882b",delete:"#ff0000",info:"#64748B",attack:"#ff0000",tooltip:{cost:"#ffd700",count:"#aaa"},chat:{default:"#66c",help:"#4caf50",attack:"#f44336",defend:"#2196f3",greet:"#ff9800",misc:"#9c27b0",warnings:"#e3c532"}};function R0(t){const e=t.selected;if(e===null)return!1;const r=e.isFriendly;return typeof r!="function"?!1:r.call(e,t.myPlayer)}function D0(t){const e=t.selected;if(e===null)return!1;const r=e.isDisconnected;return typeof r!="function"?!1:r.call(e)}f("player_panel.start_trade");f("player_panel.stop_trade");const Sb={id:"ally_request",name:"request",disabled:t=>!t.playerActions?.interaction?.canSendAllianceRequest,displayed:t=>!t.playerActions?.interaction?.canBreakAlliance,color:Pt.ally,icon:pf,action:t=>{t.playerActionHandler.handleAllianceRequest(t.myPlayer,t.selected),t.closeMenu()}},BE={id:"ally_break",name:"break",disabled:t=>!t.playerActions?.interaction?.canBreakAlliance,displayed:t=>!!t.playerActions?.interaction?.canBreakAlliance,color:t=>t.selected?.isTraitor()||t.selected?.isDisconnected()?Pt.breakAllyNoDebuff:Pt.breakAlly,icon:fx,action:t=>{t.playerActionHandler.handleBreakAlliance(t.myPlayer,t.selected),t.closeMenu()}},NE={id:"info",name:"info",disabled:t=>!t.selected||t.game.inSpawnPhase(),icon:mf,color:Pt.info,action:t=>{t.playerPanel.show(t.playerActions,t.tile)}};function UE(t,e){const r=new Set,i=n=>{e.isUnitDisabled(n)||r.add(n)};return t?(i(C.City),i(C.DefensePost),i(C.Port),i(C.MissileSilo),i(C.SAMLauncher),i(C.Factory)):(i(C.Warship),i(C.HydrogenBomb),i(C.MIRV),i(C.AtomBomb)),r}const Ab=[C.AtomBomb,C.MIRV,C.HydrogenBomb,C.Warship];function gx(t,e,r){const i=UE(t.selected===t.myPlayer,t.game.config());return AT.filter(n=>i.has(n.unitType)&&(e==="attack"?Ab.includes(n.unitType):!Ab.includes(n.unitType))).map(n=>({id:`${r}_${n.unitType}`,name:n.key?n.key.replace("unit_type.",""):n.unitType.toString(),disabled:a=>!a.buildMenu.canBuildOrUpgrade(n),color:t.buildMenu.canBuildOrUpgrade(n)?e==="attack"?Pt.attack:Pt.building:void 0,icon:n.icon,tooltipItems:[{text:f(n.key??""),className:"title"},{text:f(n.description??""),className:"description"},{text:`${ce(t.buildMenu.cost(n))} ${f("player_panel.gold")}`,className:"cost"},n.countable?{text:`${t.buildMenu.count(n)}x`,className:"count"}:null].filter(a=>a!==null),action:a=>{const s=a.playerActions.buildableUnits.find(o=>o.type===n.unitType);s!==void 0&&(a.buildMenu.canBuildOrUpgrade(n)&&a.buildMenu.sendBuildOrUpgrade(s,a.tile),a.closeMenu())}}))}const zE={id:"attack",name:"radial_attack",disabled:t=>t.game.inSpawnPhase(),icon:Rc,color:Pt.attack,subMenu:t=>t===void 0?[]:gx(t,"attack","attack")},HE={id:"attack",name:"radial_donate_gold",disabled:t=>t.game.inSpawnPhase()||!t.playerActions?.interaction?.canDonateGold,icon:ff,color:"#EAB308",action:t=>{t.selected&&t.playerPanel.openSendGoldModal(t.playerActions,t.tile,t.selected)}},FE={id:"delete",name:"delete",cooldown:t=>t.myPlayer.deleteUnitCooldown(),disabled:t=>{const e=t.game.owner(t.tile),r=t.game.isLand(t.tile);if(!e.isPlayer()||e.id()!==t.myPlayer.id()||!r||t.game.inSpawnPhase()||t.myPlayer.deleteUnitCooldown()>0)return!0;const i=5;return t.myPlayer.units().filter(a=>!a.isUnderConstruction()&&a.markedForDeletion()===!1&&t.game.manhattanDist(a.tile(),t.tile)<=i).length===0},icon:OE,color:Pt.delete,tooltipKeys:[{key:"radial_menu.delete_unit_title",className:"title"},{key:"radial_menu.delete_unit_description",className:"description"}],action:t=>{const r=t.myPlayer.units().filter(i=>t.game.manhattanDist(i.tile(),t.tile)<=5);r.length>0&&(r.sort((i,n)=>t.game.manhattanDist(i.tile(),t.tile)-t.game.manhattanDist(n.tile(),t.tile)),t.playerActionHandler.handleDeleteUnit(r[0].id())),t.closeMenu()}},qE={id:"build",name:"build",disabled:t=>t.game.inSpawnPhase(),icon:DE,color:Pt.build,subMenu:t=>t===void 0?[]:gx(t,"build","build")},jE={id:"boat",name:"boat",disabled:t=>!t.playerActions.buildableUnits.some(e=>e.type===C.TransportShip&&e.canBuild),icon:RE,color:Pt.boat,action:async t=>{t.playerActionHandler.handleBoatAttack(t.myPlayer,t.tile),t.closeMenu()}},GE={disabled:t=>{const e=t.game.owner(t.tile);return t.game.isLand(t.tile)?t.game.inSpawnPhase()?!!(t.game.config().isRandomSpawn()||e.isPlayer()):R0(t)&&!D0(t)?!t.playerActions.interaction?.canDonateTroops:!t.playerActions.canAttack:!0},action:t=>{if(t.game.inSpawnPhase())t.playerActionHandler.handleSpawn(t.tile);else if(R0(t)&&!D0(t)){const e=t.selected,r=t.uiState?.attackRatio??1,i=Math.floor(r*t.myPlayer.troops());i>0&&t.playerActionHandler.handleDonateTroops(e,i)}else t.playerActionHandler.handleAttack(t.myPlayer,t.selected?.id()??null);t.closeMenu()}},VE={id:"root",name:"root",disabled:()=>!1,icon:mf,color:Pt.info,subMenu:t=>{const e=t.selected?.isAlliedWith(t.myPlayer),r=D0(t),i=t.game.owner(t.tile),n=i.isPlayer()&&i.id()===t.myPlayer.id();return[NE,...n?[FE,Sb,qE]:[e&&!r?BE:jE,Sb,R0(t)&&!r?HE:zE]].filter(s=>s!==null)}};class WE{constructor(e,r){if(this.game=e,this.eventBus=r,this.ctModal=document.querySelector("chat-modal"),!this.ctModal)throw new Error("Chat modal element not found. Ensure chat-modal element exists in DOM before initializing ChatIntegration")}setupChatModal(e,r){this.ctModal.setSender(e),this.ctModal.setRecipient(r)}createQuickChatMenu(e){if(!this.ctModal)throw new Error("Chat modal not set");const r=this.game.myPlayer();if(!r)throw new Error("Current player not found");return this.ctModal.categories.map(i=>{const n=f(`chat.cat.${i.id}`),a=Pt.chat[i.id]||Pt.chat.default,o=(tx[i.id]||[]).map(l=>{const c=f(`chat.${i.id}.${l.key}`);return{id:`phrase-${i.id}-${l.key}`,name:c,disabled:()=>!1,text:this.shortenText(c),fontSize:"10px",color:a,tooltipItems:[{text:c,className:"description"}],action:u=>{l.requiresPlayer?this.ctModal.openWithSelection(i.id,l.key,r,e):this.eventBus.emit(new nf(e,`${i.id}.${l.key}`,void 0))}}});return{id:`chat-category-${i.id}`,name:n,disabled:()=>!1,text:n,color:a,_action:()=>{},subMenu:()=>o}})}shortenText(e,r=15){return e.length<=r?e:e.substring(0,r-3)+"..."}}class KE{constructor(e,r){this.eventBus=e,this.uiState=r}async getPlayerActions(e,r){return await e.actions(r)}handleAttack(e,r){this.eventBus.emit(new ko(r,this.uiState.attackRatio*e.troops()))}handleBoatAttack(e,r){this.eventBus.emit(new Qp(r,this.uiState.attackRatio*e.troops()))}async findBestTransportShipSpawn(e,r){return await e.bestTransportShipSpawn(r)}handleSpawn(e){this.eventBus.emit(new Zp(e))}handleAllianceRequest(e,r){this.eventBus.emit(new Yp(e,r))}handleBreakAlliance(e,r){this.eventBus.emit(new Xp(e,r))}handleTargetPlayer(e){e&&this.eventBus.emit(new ef(e))}handleDonateGold(e){this.eventBus.emit(new tf(e,null))}handleDonateTroops(e,r){const i=r??null;i!==null&&i<=0||this.eventBus.emit(new rf(e,i))}handleEmbargo(e,r){this.eventBus.emit(new Mc(e,r))}handleEmoji(e,r){this.eventBus.emit(new So(e,r))}handleDeleteUnit(e){this.eventBus.emit(new q2(e))}}var YE={value:()=>{}};function mx(){for(var t=0,e=arguments.length,r={},i;t<e;++t){if(!(i=arguments[t]+"")||i in r||/[\s.]/.test(i))throw new Error("illegal type: "+i);r[i]=[]}return new cc(r)}function cc(t){this._=t}function XE(t,e){return t.trim().split(/^|\s+/).map(function(r){var i="",n=r.indexOf(".");if(n>=0&&(i=r.slice(n+1),r=r.slice(0,n)),r&&!e.hasOwnProperty(r))throw new Error("unknown type: "+r);return{type:r,name:i}})}cc.prototype=mx.prototype={constructor:cc,on:function(t,e){var r=this._,i=XE(t+"",r),n,a=-1,s=i.length;if(arguments.length<2){for(;++a<s;)if((n=(t=i[a]).type)&&(n=ZE(r[n],t.name)))return n;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++a<s;)if(n=(t=i[a]).type)r[n]=Cb(r[n],t.name,e);else if(e==null)for(n in r)r[n]=Cb(r[n],t.name,null);return this},copy:function(){var t={},e=this._;for(var r in e)t[r]=e[r].slice();return new cc(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var r=new Array(n),i=0,n,a;i<n;++i)r[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(a=this._[t],i=0,n=a.length;i<n;++i)a[i].value.apply(e,r)},apply:function(t,e,r){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],n=0,a=i.length;n<a;++n)i[n].value.apply(e,r)}};function ZE(t,e){for(var r=0,i=t.length,n;r<i;++r)if((n=t[r]).name===e)return n.value}function Cb(t,e,r){for(var i=0,n=t.length;i<n;++i)if(t[i].name===e){t[i]=YE,t=t.slice(0,i).concat(t.slice(i+1));break}return r!=null&&t.push({name:e,value:r}),t}var L0="http://www.w3.org/1999/xhtml";const Tb={svg:"http://www.w3.org/2000/svg",xhtml:L0,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Iu(t){var e=t+="",r=e.indexOf(":");return r>=0&&(e=t.slice(0,r))!=="xmlns"&&(t=t.slice(r+1)),Tb.hasOwnProperty(e)?{space:Tb[e],local:t}:t}function QE(t){return function(){var e=this.ownerDocument,r=this.namespaceURI;return r===L0&&e.documentElement.namespaceURI===L0?e.createElement(t):e.createElementNS(r,t)}}function JE(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function bx(t){var e=Iu(t);return(e.local?JE:QE)(e)}function eM(){}function bf(t){return t==null?eM:function(){return this.querySelector(t)}}function tM(t){typeof t!="function"&&(t=bf(t));for(var e=this._groups,r=e.length,i=new Array(r),n=0;n<r;++n)for(var a=e[n],s=a.length,o=i[n]=new Array(s),l,c,u=0;u<s;++u)(l=a[u])&&(c=t.call(l,l.__data__,u,a))&&("__data__"in l&&(c.__data__=l.__data__),o[u]=c);return new er(i,this._parents)}function rM(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function iM(){return[]}function vx(t){return t==null?iM:function(){return this.querySelectorAll(t)}}function nM(t){return function(){return rM(t.apply(this,arguments))}}function aM(t){typeof t=="function"?t=nM(t):t=vx(t);for(var e=this._groups,r=e.length,i=[],n=[],a=0;a<r;++a)for(var s=e[a],o=s.length,l,c=0;c<o;++c)(l=s[c])&&(i.push(t.call(l,l.__data__,c,s)),n.push(l));return new er(i,n)}function yx(t){return function(){return this.matches(t)}}function wx(t){return function(e){return e.matches(t)}}var sM=Array.prototype.find;function oM(t){return function(){return sM.call(this.children,t)}}function lM(){return this.firstElementChild}function cM(t){return this.select(t==null?lM:oM(typeof t=="function"?t:wx(t)))}var uM=Array.prototype.filter;function dM(){return Array.from(this.children)}function hM(t){return function(){return uM.call(this.children,t)}}function pM(t){return this.selectAll(t==null?dM:hM(typeof t=="function"?t:wx(t)))}function fM(t){typeof t!="function"&&(t=yx(t));for(var e=this._groups,r=e.length,i=new Array(r),n=0;n<r;++n)for(var a=e[n],s=a.length,o=i[n]=[],l,c=0;c<s;++c)(l=a[c])&&t.call(l,l.__data__,c,a)&&o.push(l);return new er(i,this._parents)}function xx(t){return new Array(t.length)}function gM(){return new er(this._enter||this._groups.map(xx),this._parents)}function Dc(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Dc.prototype={constructor:Dc,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function mM(t){return function(){return t}}function bM(t,e,r,i,n,a){for(var s=0,o,l=e.length,c=a.length;s<c;++s)(o=e[s])?(o.__data__=a[s],i[s]=o):r[s]=new Dc(t,a[s]);for(;s<l;++s)(o=e[s])&&(n[s]=o)}function vM(t,e,r,i,n,a,s){var o,l,c=new Map,u=e.length,p=a.length,d=new Array(u),h;for(o=0;o<u;++o)(l=e[o])&&(d[o]=h=s.call(l,l.__data__,o,e)+"",c.has(h)?n[o]=l:c.set(h,l));for(o=0;o<p;++o)h=s.call(t,a[o],o,a)+"",(l=c.get(h))?(i[o]=l,l.__data__=a[o],c.delete(h)):r[o]=new Dc(t,a[o]);for(o=0;o<u;++o)(l=e[o])&&c.get(d[o])===l&&(n[o]=l)}function yM(t){return t.__data__}function wM(t,e){if(!arguments.length)return Array.from(this,yM);var r=e?vM:bM,i=this._parents,n=this._groups;typeof t!="function"&&(t=mM(t));for(var a=n.length,s=new Array(a),o=new Array(a),l=new Array(a),c=0;c<a;++c){var u=i[c],p=n[c],d=p.length,h=xM(t.call(u,u&&u.__data__,c,i)),g=h.length,y=o[c]=new Array(g),x=s[c]=new Array(g),m=l[c]=new Array(d);r(u,p,y,x,m,h,e);for(var k=0,S=0,_,w;k<g;++k)if(_=y[k]){for(k>=S&&(S=k+1);!(w=x[S])&&++S<g;);_._next=w||null}}return s=new er(s,i),s._enter=o,s._exit=l,s}function xM(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function _M(){return new er(this._exit||this._groups.map(xx),this._parents)}function kM(t,e,r){var i=this.enter(),n=this,a=this.exit();return typeof t=="function"?(i=t(i),i&&(i=i.selection())):i=i.append(t+""),e!=null&&(n=e(n),n&&(n=n.selection())),r==null?a.remove():r(a),i&&n?i.merge(n).order():n}function SM(t){for(var e=t.selection?t.selection():t,r=this._groups,i=e._groups,n=r.length,a=i.length,s=Math.min(n,a),o=new Array(n),l=0;l<s;++l)for(var c=r[l],u=i[l],p=c.length,d=o[l]=new Array(p),h,g=0;g<p;++g)(h=c[g]||u[g])&&(d[g]=h);for(;l<n;++l)o[l]=r[l];return new er(o,this._parents)}function AM(){for(var t=this._groups,e=-1,r=t.length;++e<r;)for(var i=t[e],n=i.length-1,a=i[n],s;--n>=0;)(s=i[n])&&(a&&s.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(s,a),a=s);return this}function CM(t){t||(t=TM);function e(p,d){return p&&d?t(p.__data__,d.__data__):!p-!d}for(var r=this._groups,i=r.length,n=new Array(i),a=0;a<i;++a){for(var s=r[a],o=s.length,l=n[a]=new Array(o),c,u=0;u<o;++u)(c=s[u])&&(l[u]=c);l.sort(e)}return new er(n,this._parents).order()}function TM(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function EM(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function MM(){return Array.from(this)}function IM(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var i=t[e],n=0,a=i.length;n<a;++n){var s=i[n];if(s)return s}return null}function PM(){let t=0;for(const e of this)++t;return t}function $M(){return!this.node()}function RM(t){for(var e=this._groups,r=0,i=e.length;r<i;++r)for(var n=e[r],a=0,s=n.length,o;a<s;++a)(o=n[a])&&t.call(o,o.__data__,a,n);return this}function DM(t){return function(){this.removeAttribute(t)}}function LM(t){return function(){this.removeAttributeNS(t.space,t.local)}}function OM(t,e){return function(){this.setAttribute(t,e)}}function BM(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function NM(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttribute(t):this.setAttribute(t,r)}}function UM(t,e){return function(){var r=e.apply(this,arguments);r==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,r)}}function zM(t,e){var r=Iu(t);if(arguments.length<2){var i=this.node();return r.local?i.getAttributeNS(r.space,r.local):i.getAttribute(r)}return this.each((e==null?r.local?LM:DM:typeof e=="function"?r.local?UM:NM:r.local?BM:OM)(r,e))}function _x(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function HM(t){return function(){this.style.removeProperty(t)}}function FM(t,e,r){return function(){this.style.setProperty(t,e,r)}}function qM(t,e,r){return function(){var i=e.apply(this,arguments);i==null?this.style.removeProperty(t):this.style.setProperty(t,i,r)}}function jM(t,e,r){return arguments.length>1?this.each((e==null?HM:typeof e=="function"?qM:FM)(t,e,r??"")):Fa(this.node(),t)}function Fa(t,e){return t.style.getPropertyValue(e)||_x(t).getComputedStyle(t,null).getPropertyValue(e)}function GM(t){return function(){delete this[t]}}function VM(t,e){return function(){this[t]=e}}function WM(t,e){return function(){var r=e.apply(this,arguments);r==null?delete this[t]:this[t]=r}}function KM(t,e){return arguments.length>1?this.each((e==null?GM:typeof e=="function"?WM:VM)(t,e)):this.node()[t]}function kx(t){return t.trim().split(/^|\s+/)}function vf(t){return t.classList||new Sx(t)}function Sx(t){this._node=t,this._names=kx(t.getAttribute("class")||"")}Sx.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Ax(t,e){for(var r=vf(t),i=-1,n=e.length;++i<n;)r.add(e[i])}function Cx(t,e){for(var r=vf(t),i=-1,n=e.length;++i<n;)r.remove(e[i])}function YM(t){return function(){Ax(this,t)}}function XM(t){return function(){Cx(this,t)}}function ZM(t,e){return function(){(e.apply(this,arguments)?Ax:Cx)(this,t)}}function QM(t,e){var r=kx(t+"");if(arguments.length<2){for(var i=vf(this.node()),n=-1,a=r.length;++n<a;)if(!i.contains(r[n]))return!1;return!0}return this.each((typeof e=="function"?ZM:e?YM:XM)(r,e))}function JM(){this.textContent=""}function eI(t){return function(){this.textContent=t}}function tI(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function rI(t){return arguments.length?this.each(t==null?JM:(typeof t=="function"?tI:eI)(t)):this.node().textContent}function iI(){this.innerHTML=""}function nI(t){return function(){this.innerHTML=t}}function aI(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function sI(t){return arguments.length?this.each(t==null?iI:(typeof t=="function"?aI:nI)(t)):this.node().innerHTML}function oI(){this.nextSibling&&this.parentNode.appendChild(this)}function lI(){return this.each(oI)}function cI(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function uI(){return this.each(cI)}function dI(t){var e=typeof t=="function"?t:bx(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function hI(){return null}function pI(t,e){var r=typeof t=="function"?t:bx(t),i=e==null?hI:typeof e=="function"?e:bf(e);return this.select(function(){return this.insertBefore(r.apply(this,arguments),i.apply(this,arguments)||null)})}function fI(){var t=this.parentNode;t&&t.removeChild(this)}function gI(){return this.each(fI)}function mI(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function bI(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function vI(t){return this.select(t?bI:mI)}function yI(t){return arguments.length?this.property("__data__",t):this.node().__data__}function wI(t){return function(e){t.call(this,e,this.__data__)}}function xI(t){return t.trim().split(/^|\s+/).map(function(e){var r="",i=e.indexOf(".");return i>=0&&(r=e.slice(i+1),e=e.slice(0,i)),{type:e,name:r}})}function _I(t){return function(){var e=this.__on;if(e){for(var r=0,i=-1,n=e.length,a;r<n;++r)a=e[r],(!t.type||a.type===t.type)&&a.name===t.name?this.removeEventListener(a.type,a.listener,a.options):e[++i]=a;++i?e.length=i:delete this.__on}}}function kI(t,e,r){return function(){var i=this.__on,n,a=wI(e);if(i){for(var s=0,o=i.length;s<o;++s)if((n=i[s]).type===t.type&&n.name===t.name){this.removeEventListener(n.type,n.listener,n.options),this.addEventListener(n.type,n.listener=a,n.options=r),n.value=e;return}}this.addEventListener(t.type,a,r),n={type:t.type,name:t.name,value:e,listener:a,options:r},i?i.push(n):this.__on=[n]}}function SI(t,e,r){var i=xI(t+""),n,a=i.length,s;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,c=o.length,u;l<c;++l)for(n=0,u=o[l];n<a;++n)if((s=i[n]).type===u.type&&s.name===u.name)return u.value}return}for(o=e?kI:_I,n=0;n<a;++n)this.each(o(i[n],e,r));return this}function Tx(t,e,r){var i=_x(t),n=i.CustomEvent;typeof n=="function"?n=new n(e,r):(n=i.document.createEvent("Event"),r?(n.initEvent(e,r.bubbles,r.cancelable),n.detail=r.detail):n.initEvent(e,!1,!1)),t.dispatchEvent(n)}function AI(t,e){return function(){return Tx(this,t,e)}}function CI(t,e){return function(){return Tx(this,t,e.apply(this,arguments))}}function TI(t,e){return this.each((typeof e=="function"?CI:AI)(t,e))}function*EI(){for(var t=this._groups,e=0,r=t.length;e<r;++e)for(var i=t[e],n=0,a=i.length,s;n<a;++n)(s=i[n])&&(yield s)}var Ex=[null];function er(t,e){this._groups=t,this._parents=e}function Xo(){return new er([[document.documentElement]],Ex)}function MI(){return this}er.prototype=Xo.prototype={constructor:er,select:tM,selectAll:aM,selectChild:cM,selectChildren:pM,filter:fM,data:wM,enter:gM,exit:_M,join:kM,merge:SM,selection:MI,order:AM,sort:CM,call:EM,nodes:MM,node:IM,size:PM,empty:$M,each:RM,attr:zM,style:jM,property:KM,classed:QM,text:rI,html:sI,raise:lI,lower:uI,append:dI,insert:pI,remove:gI,clone:vI,datum:yI,on:SI,dispatch:TI,[Symbol.iterator]:EI};function _i(t){return typeof t=="string"?new er([[document.querySelector(t)]],[document.documentElement]):new er([[t]],Ex)}function yf(t,e,r){t.prototype=e.prototype=r,r.constructor=t}function Mx(t,e){var r=Object.create(t.prototype);for(var i in e)r[i]=e[i];return r}function Zo(){}var To=.7,Lc=1/To,Ta="\\s*([+-]?\\d+)\\s*",Eo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Hr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",II=/^#([0-9a-f]{3,8})$/,PI=new RegExp(`^rgb\\(${Ta},${Ta},${Ta}\\)$`),$I=new RegExp(`^rgb\\(${Hr},${Hr},${Hr}\\)$`),RI=new RegExp(`^rgba\\(${Ta},${Ta},${Ta},${Eo}\\)$`),DI=new RegExp(`^rgba\\(${Hr},${Hr},${Hr},${Eo}\\)$`),LI=new RegExp(`^hsl\\(${Eo},${Hr},${Hr}\\)$`),OI=new RegExp(`^hsla\\(${Eo},${Hr},${Hr},${Eo}\\)$`),Eb={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};yf(Zo,Ei,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Mb,formatHex:Mb,formatHex8:BI,formatHsl:NI,formatRgb:Ib,toString:Ib});function Mb(){return this.rgb().formatHex()}function BI(){return this.rgb().formatHex8()}function NI(){return Ix(this).formatHsl()}function Ib(){return this.rgb().formatRgb()}function Ei(t){var e,r;return t=(t+"").trim().toLowerCase(),(e=II.exec(t))?(r=e[1].length,e=parseInt(e[1],16),r===6?Pb(e):r===3?new Nt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):r===8?Rl(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):r===4?Rl(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=PI.exec(t))?new Nt(e[1],e[2],e[3],1):(e=$I.exec(t))?new Nt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=RI.exec(t))?Rl(e[1],e[2],e[3],e[4]):(e=DI.exec(t))?Rl(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=LI.exec(t))?Db(e[1],e[2]/100,e[3]/100,1):(e=OI.exec(t))?Db(e[1],e[2]/100,e[3]/100,e[4]):Eb.hasOwnProperty(t)?Pb(Eb[t]):t==="transparent"?new Nt(NaN,NaN,NaN,0):null}function Pb(t){return new Nt(t>>16&255,t>>8&255,t&255,1)}function Rl(t,e,r,i){return i<=0&&(t=e=r=NaN),new Nt(t,e,r,i)}function UI(t){return t instanceof Zo||(t=Ei(t)),t?(t=t.rgb(),new Nt(t.r,t.g,t.b,t.opacity)):new Nt}function Oc(t,e,r,i){return arguments.length===1?UI(t):new Nt(t,e,r,i??1)}function Nt(t,e,r,i){this.r=+t,this.g=+e,this.b=+r,this.opacity=+i}yf(Nt,Oc,Mx(Zo,{brighter(t){return t=t==null?Lc:Math.pow(Lc,t),new Nt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?To:Math.pow(To,t),new Nt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Nt(Tn(this.r),Tn(this.g),Tn(this.b),Bc(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$b,formatHex:$b,formatHex8:zI,formatRgb:Rb,toString:Rb}));function $b(){return`#${wn(this.r)}${wn(this.g)}${wn(this.b)}`}function zI(){return`#${wn(this.r)}${wn(this.g)}${wn(this.b)}${wn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Rb(){const t=Bc(this.opacity);return`${t===1?"rgb(":"rgba("}${Tn(this.r)}, ${Tn(this.g)}, ${Tn(this.b)}${t===1?")":`, ${t})`}`}function Bc(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Tn(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function wn(t){return t=Tn(t),(t<16?"0":"")+t.toString(16)}function Db(t,e,r,i){return i<=0?t=e=r=NaN:r<=0||r>=1?t=e=NaN:e<=0&&(t=NaN),new xr(t,e,r,i)}function Ix(t){if(t instanceof xr)return new xr(t.h,t.s,t.l,t.opacity);if(t instanceof Zo||(t=Ei(t)),!t)return new xr;if(t instanceof xr)return t;t=t.rgb();var e=t.r/255,r=t.g/255,i=t.b/255,n=Math.min(e,r,i),a=Math.max(e,r,i),s=NaN,o=a-n,l=(a+n)/2;return o?(e===a?s=(r-i)/o+(r<i)*6:r===a?s=(i-e)/o+2:s=(e-r)/o+4,o/=l<.5?a+n:2-a-n,s*=60):o=l>0&&l<1?0:s,new xr(s,o,l,t.opacity)}function HI(t,e,r,i){return arguments.length===1?Ix(t):new xr(t,e,r,i??1)}function xr(t,e,r,i){this.h=+t,this.s=+e,this.l=+r,this.opacity=+i}yf(xr,HI,Mx(Zo,{brighter(t){return t=t==null?Lc:Math.pow(Lc,t),new xr(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?To:Math.pow(To,t),new xr(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*e,n=2*r-i;return new Nt(Vd(t>=240?t-240:t+120,n,i),Vd(t,n,i),Vd(t<120?t+240:t-120,n,i),this.opacity)},clamp(){return new xr(Lb(this.h),Dl(this.s),Dl(this.l),Bc(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Bc(this.opacity);return`${t===1?"hsl(":"hsla("}${Lb(this.h)}, ${Dl(this.s)*100}%, ${Dl(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Lb(t){return t=(t||0)%360,t<0?t+360:t}function Dl(t){return Math.max(0,Math.min(1,t||0))}function Vd(t,e,r){return(t<60?e+(r-e)*t/60:t<180?r:t<240?e+(r-e)*(240-t)/60:e)*255}const Px=t=>()=>t;function FI(t,e){return function(r){return t+r*e}}function qI(t,e,r){return t=Math.pow(t,r),e=Math.pow(e,r)-t,r=1/r,function(i){return Math.pow(t+i*e,r)}}function jI(t){return(t=+t)==1?$x:function(e,r){return r-e?qI(e,r,t):Px(isNaN(e)?r:e)}}function $x(t,e){var r=e-t;return r?FI(t,r):Px(isNaN(t)?e:t)}const Ob=(function t(e){var r=jI(e);function i(n,a){var s=r((n=Oc(n)).r,(a=Oc(a)).r),o=r(n.g,a.g),l=r(n.b,a.b),c=$x(n.opacity,a.opacity);return function(u){return n.r=s(u),n.g=o(u),n.b=l(u),n.opacity=c(u),n+""}}return i.gamma=t,i})(1);function Si(t,e){return t=+t,e=+e,function(r){return t*(1-r)+e*r}}var O0=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Wd=new RegExp(O0.source,"g");function GI(t){return function(){return t}}function VI(t){return function(e){return t(e)+""}}function WI(t,e){var r=O0.lastIndex=Wd.lastIndex=0,i,n,a,s=-1,o=[],l=[];for(t=t+"",e=e+"";(i=O0.exec(t))&&(n=Wd.exec(e));)(a=n.index)>r&&(a=e.slice(r,a),o[s]?o[s]+=a:o[++s]=a),(i=i[0])===(n=n[0])?o[s]?o[s]+=n:o[++s]=n:(o[++s]=null,l.push({i:s,x:Si(i,n)})),r=Wd.lastIndex;return r<e.length&&(a=e.slice(r),o[s]?o[s]+=a:o[++s]=a),o.length<2?l[0]?VI(l[0].x):GI(e):(e=l.length,function(c){for(var u=0,p;u<e;++u)o[(p=l[u]).i]=p.x(c);return o.join("")})}var Bb=180/Math.PI,B0={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Rx(t,e,r,i,n,a){var s,o,l;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(l=t*r+e*i)&&(r-=t*l,i-=e*l),(o=Math.sqrt(r*r+i*i))&&(r/=o,i/=o,l/=o),t*i<e*r&&(t=-t,e=-e,l=-l,s=-s),{translateX:n,translateY:a,rotate:Math.atan2(e,t)*Bb,skewX:Math.atan(l)*Bb,scaleX:s,scaleY:o}}var Ll;function KI(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?B0:Rx(e.a,e.b,e.c,e.d,e.e,e.f)}function YI(t){return t==null||(Ll||(Ll=document.createElementNS("http://www.w3.org/2000/svg","g")),Ll.setAttribute("transform",t),!(t=Ll.transform.baseVal.consolidate()))?B0:(t=t.matrix,Rx(t.a,t.b,t.c,t.d,t.e,t.f))}function Dx(t,e,r,i){function n(c){return c.length?c.pop()+" ":""}function a(c,u,p,d,h,g){if(c!==p||u!==d){var y=h.push("translate(",null,e,null,r);g.push({i:y-4,x:Si(c,p)},{i:y-2,x:Si(u,d)})}else(p||d)&&h.push("translate("+p+e+d+r)}function s(c,u,p,d){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),d.push({i:p.push(n(p)+"rotate(",null,i)-2,x:Si(c,u)})):u&&p.push(n(p)+"rotate("+u+i)}function o(c,u,p,d){c!==u?d.push({i:p.push(n(p)+"skewX(",null,i)-2,x:Si(c,u)}):u&&p.push(n(p)+"skewX("+u+i)}function l(c,u,p,d,h,g){if(c!==p||u!==d){var y=h.push(n(h)+"scale(",null,",",null,")");g.push({i:y-4,x:Si(c,p)},{i:y-2,x:Si(u,d)})}else(p!==1||d!==1)&&h.push(n(h)+"scale("+p+","+d+")")}return function(c,u){var p=[],d=[];return c=t(c),u=t(u),a(c.translateX,c.translateY,u.translateX,u.translateY,p,d),s(c.rotate,u.rotate,p,d),o(c.skewX,u.skewX,p,d),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,p,d),c=u=null,function(h){for(var g=-1,y=d.length,x;++g<y;)p[(x=d[g]).i]=x.x(h);return p.join("")}}}var XI=Dx(KI,"px, ","px)","deg)"),ZI=Dx(YI,", ",")",")"),qa=0,Zs=0,ks=0,Lx=1e3,Nc,Qs,Uc=0,Nn=0,Pu=0,Mo=typeof performance=="object"&&performance.now?performance:Date,Ox=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function wf(){return Nn||(Ox(QI),Nn=Mo.now()+Pu)}function QI(){Nn=0}function zc(){this._call=this._time=this._next=null}zc.prototype=Bx.prototype={constructor:zc,restart:function(t,e,r){if(typeof t!="function")throw new TypeError("callback is not a function");r=(r==null?wf():+r)+(e==null?0:+e),!this._next&&Qs!==this&&(Qs?Qs._next=this:Nc=this,Qs=this),this._call=t,this._time=r,N0()},stop:function(){this._call&&(this._call=null,this._time=1/0,N0())}};function Bx(t,e,r){var i=new zc;return i.restart(t,e,r),i}function JI(){wf(),++qa;for(var t=Nc,e;t;)(e=Nn-t._time)>=0&&t._call.call(void 0,e),t=t._next;--qa}function Nb(){Nn=(Uc=Mo.now())+Pu,qa=Zs=0;try{JI()}finally{qa=0,tP(),Nn=0}}function eP(){var t=Mo.now(),e=t-Uc;e>Lx&&(Pu-=e,Uc=t)}function tP(){for(var t,e=Nc,r,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(r=e._next,e._next=null,e=t?t._next=r:Nc=r);Qs=t,N0(i)}function N0(t){if(!qa){Zs&&(Zs=clearTimeout(Zs));var e=t-Nn;e>24?(t<1/0&&(Zs=setTimeout(Nb,t-Mo.now()-Pu)),ks&&(ks=clearInterval(ks))):(ks||(Uc=Mo.now(),ks=setInterval(eP,Lx)),qa=1,Ox(Nb))}}function Ub(t,e,r){var i=new zc;return e=e==null?0:+e,i.restart(n=>{i.stop(),t(n+e)},e,r),i}var rP=mx("start","end","cancel","interrupt"),iP=[],Nx=0,zb=1,U0=2,uc=3,Hb=4,z0=5,dc=6;function $u(t,e,r,i,n,a){var s=t.__transition;if(!s)t.__transition={};else if(r in s)return;nP(t,r,{name:e,index:i,group:n,on:rP,tween:iP,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:Nx})}function xf(t,e){var r=Ir(t,e);if(r.state>Nx)throw new Error("too late; already scheduled");return r}function Wr(t,e){var r=Ir(t,e);if(r.state>uc)throw new Error("too late; already running");return r}function Ir(t,e){var r=t.__transition;if(!r||!(r=r[e]))throw new Error("transition not found");return r}function nP(t,e,r){var i=t.__transition,n;i[e]=r,r.timer=Bx(a,0,r.time);function a(c){r.state=zb,r.timer.restart(s,r.delay,r.time),r.delay<=c&&s(c-r.delay)}function s(c){var u,p,d,h;if(r.state!==zb)return l();for(u in i)if(h=i[u],h.name===r.name){if(h.state===uc)return Ub(s);h.state===Hb?(h.state=dc,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete i[u]):+u<e&&(h.state=dc,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete i[u])}if(Ub(function(){r.state===uc&&(r.state=Hb,r.timer.restart(o,r.delay,r.time),o(c))}),r.state=U0,r.on.call("start",t,t.__data__,r.index,r.group),r.state===U0){for(r.state=uc,n=new Array(d=r.tween.length),u=0,p=-1;u<d;++u)(h=r.tween[u].value.call(t,t.__data__,r.index,r.group))&&(n[++p]=h);n.length=p+1}}function o(c){for(var u=c<r.duration?r.ease.call(null,c/r.duration):(r.timer.restart(l),r.state=z0,1),p=-1,d=n.length;++p<d;)n[p].call(t,u);r.state===z0&&(r.on.call("end",t,t.__data__,r.index,r.group),l())}function l(){r.state=dc,r.timer.stop(),delete i[e];for(var c in i)return;delete t.__transition}}function aP(t,e){var r=t.__transition,i,n,a=!0,s;if(r){e=e==null?null:e+"";for(s in r){if((i=r[s]).name!==e){a=!1;continue}n=i.state>U0&&i.state<z0,i.state=dc,i.timer.stop(),i.on.call(n?"interrupt":"cancel",t,t.__data__,i.index,i.group),delete r[s]}a&&delete t.__transition}}function sP(t){return this.each(function(){aP(this,t)})}function oP(t,e){var r,i;return function(){var n=Wr(this,t),a=n.tween;if(a!==r){i=r=a;for(var s=0,o=i.length;s<o;++s)if(i[s].name===e){i=i.slice(),i.splice(s,1);break}}n.tween=i}}function lP(t,e,r){var i,n;if(typeof r!="function")throw new Error;return function(){var a=Wr(this,t),s=a.tween;if(s!==i){n=(i=s).slice();for(var o={name:e,value:r},l=0,c=n.length;l<c;++l)if(n[l].name===e){n[l]=o;break}l===c&&n.push(o)}a.tween=n}}function cP(t,e){var r=this._id;if(t+="",arguments.length<2){for(var i=Ir(this.node(),r).tween,n=0,a=i.length,s;n<a;++n)if((s=i[n]).name===t)return s.value;return null}return this.each((e==null?oP:lP)(r,t,e))}function _f(t,e,r){var i=t._id;return t.each(function(){var n=Wr(this,i);(n.value||(n.value={}))[e]=r.apply(this,arguments)}),function(n){return Ir(n,i).value[e]}}function Ux(t,e){var r;return(typeof e=="number"?Si:e instanceof Ei?Ob:(r=Ei(e))?(e=r,Ob):WI)(t,e)}function uP(t){return function(){this.removeAttribute(t)}}function dP(t){return function(){this.removeAttributeNS(t.space,t.local)}}function hP(t,e,r){var i,n=r+"",a;return function(){var s=this.getAttribute(t);return s===n?null:s===i?a:a=e(i=s,r)}}function pP(t,e,r){var i,n=r+"",a;return function(){var s=this.getAttributeNS(t.space,t.local);return s===n?null:s===i?a:a=e(i=s,r)}}function fP(t,e,r){var i,n,a;return function(){var s,o=r(this),l;return o==null?void this.removeAttribute(t):(s=this.getAttribute(t),l=o+"",s===l?null:s===i&&l===n?a:(n=l,a=e(i=s,o)))}}function gP(t,e,r){var i,n,a;return function(){var s,o=r(this),l;return o==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),l=o+"",s===l?null:s===i&&l===n?a:(n=l,a=e(i=s,o)))}}function mP(t,e){var r=Iu(t),i=r==="transform"?ZI:Ux;return this.attrTween(t,typeof e=="function"?(r.local?gP:fP)(r,i,_f(this,"attr."+t,e)):e==null?(r.local?dP:uP)(r):(r.local?pP:hP)(r,i,e))}function bP(t,e){return function(r){this.setAttribute(t,e.call(this,r))}}function vP(t,e){return function(r){this.setAttributeNS(t.space,t.local,e.call(this,r))}}function yP(t,e){var r,i;function n(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&vP(t,a)),r}return n._value=e,n}function wP(t,e){var r,i;function n(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&bP(t,a)),r}return n._value=e,n}function xP(t,e){var r="attr."+t;if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;var i=Iu(t);return this.tween(r,(i.local?yP:wP)(i,e))}function _P(t,e){return function(){xf(this,t).delay=+e.apply(this,arguments)}}function kP(t,e){return e=+e,function(){xf(this,t).delay=e}}function SP(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?_P:kP)(e,t)):Ir(this.node(),e).delay}function AP(t,e){return function(){Wr(this,t).duration=+e.apply(this,arguments)}}function CP(t,e){return e=+e,function(){Wr(this,t).duration=e}}function TP(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?AP:CP)(e,t)):Ir(this.node(),e).duration}function EP(t,e){if(typeof e!="function")throw new Error;return function(){Wr(this,t).ease=e}}function MP(t){var e=this._id;return arguments.length?this.each(EP(e,t)):Ir(this.node(),e).ease}function IP(t,e){return function(){var r=e.apply(this,arguments);if(typeof r!="function")throw new Error;Wr(this,t).ease=r}}function PP(t){if(typeof t!="function")throw new Error;return this.each(IP(this._id,t))}function $P(t){typeof t!="function"&&(t=yx(t));for(var e=this._groups,r=e.length,i=new Array(r),n=0;n<r;++n)for(var a=e[n],s=a.length,o=i[n]=[],l,c=0;c<s;++c)(l=a[c])&&t.call(l,l.__data__,c,a)&&o.push(l);return new pi(i,this._parents,this._name,this._id)}function RP(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,r=t._groups,i=e.length,n=r.length,a=Math.min(i,n),s=new Array(i),o=0;o<a;++o)for(var l=e[o],c=r[o],u=l.length,p=s[o]=new Array(u),d,h=0;h<u;++h)(d=l[h]||c[h])&&(p[h]=d);for(;o<i;++o)s[o]=e[o];return new pi(s,this._parents,this._name,this._id)}function DP(t){return(t+"").trim().split(/^|\s+/).every(function(e){var r=e.indexOf(".");return r>=0&&(e=e.slice(0,r)),!e||e==="start"})}function LP(t,e,r){var i,n,a=DP(e)?xf:Wr;return function(){var s=a(this,t),o=s.on;o!==i&&(n=(i=o).copy()).on(e,r),s.on=n}}function OP(t,e){var r=this._id;return arguments.length<2?Ir(this.node(),r).on.on(t):this.each(LP(r,t,e))}function BP(t){return function(){var e=this.parentNode;for(var r in this.__transition)if(+r!==t)return;e&&e.removeChild(this)}}function NP(){return this.on("end.remove",BP(this._id))}function UP(t){var e=this._name,r=this._id;typeof t!="function"&&(t=bf(t));for(var i=this._groups,n=i.length,a=new Array(n),s=0;s<n;++s)for(var o=i[s],l=o.length,c=a[s]=new Array(l),u,p,d=0;d<l;++d)(u=o[d])&&(p=t.call(u,u.__data__,d,o))&&("__data__"in u&&(p.__data__=u.__data__),c[d]=p,$u(c[d],e,r,d,c,Ir(u,r)));return new pi(a,this._parents,e,r)}function zP(t){var e=this._name,r=this._id;typeof t!="function"&&(t=vx(t));for(var i=this._groups,n=i.length,a=[],s=[],o=0;o<n;++o)for(var l=i[o],c=l.length,u,p=0;p<c;++p)if(u=l[p]){for(var d=t.call(u,u.__data__,p,l),h,g=Ir(u,r),y=0,x=d.length;y<x;++y)(h=d[y])&&$u(h,e,r,y,d,g);a.push(d),s.push(u)}return new pi(a,s,e,r)}var HP=Xo.prototype.constructor;function FP(){return new HP(this._groups,this._parents)}function qP(t,e){var r,i,n;return function(){var a=Fa(this,t),s=(this.style.removeProperty(t),Fa(this,t));return a===s?null:a===r&&s===i?n:n=e(r=a,i=s)}}function zx(t){return function(){this.style.removeProperty(t)}}function jP(t,e,r){var i,n=r+"",a;return function(){var s=Fa(this,t);return s===n?null:s===i?a:a=e(i=s,r)}}function GP(t,e,r){var i,n,a;return function(){var s=Fa(this,t),o=r(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(t),Fa(this,t))),s===l?null:s===i&&l===n?a:(n=l,a=e(i=s,o))}}function VP(t,e){var r,i,n,a="style."+e,s="end."+a,o;return function(){var l=Wr(this,t),c=l.on,u=l.value[a]==null?o||(o=zx(e)):void 0;(c!==r||n!==u)&&(i=(r=c).copy()).on(s,n=u),l.on=i}}function WP(t,e,r){var i=(t+="")=="transform"?XI:Ux;return e==null?this.styleTween(t,qP(t,i)).on("end.style."+t,zx(t)):typeof e=="function"?this.styleTween(t,GP(t,i,_f(this,"style."+t,e))).each(VP(this._id,t)):this.styleTween(t,jP(t,i,e),r).on("end.style."+t,null)}function KP(t,e,r){return function(i){this.style.setProperty(t,e.call(this,i),r)}}function YP(t,e,r){var i,n;function a(){var s=e.apply(this,arguments);return s!==n&&(i=(n=s)&&KP(t,s,r)),i}return a._value=e,a}function XP(t,e,r){var i="style."+(t+="");if(arguments.length<2)return(i=this.tween(i))&&i._value;if(e==null)return this.tween(i,null);if(typeof e!="function")throw new Error;return this.tween(i,YP(t,e,r??""))}function ZP(t){return function(){this.textContent=t}}function QP(t){return function(){var e=t(this);this.textContent=e??""}}function JP(t){return this.tween("text",typeof t=="function"?QP(_f(this,"text",t)):ZP(t==null?"":t+""))}function e9(t){return function(e){this.textContent=t.call(this,e)}}function t9(t){var e,r;function i(){var n=t.apply(this,arguments);return n!==r&&(e=(r=n)&&e9(n)),e}return i._value=t,i}function r9(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,t9(t))}function i9(){for(var t=this._name,e=this._id,r=Hx(),i=this._groups,n=i.length,a=0;a<n;++a)for(var s=i[a],o=s.length,l,c=0;c<o;++c)if(l=s[c]){var u=Ir(l,e);$u(l,t,r,c,s,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new pi(i,this._parents,t,r)}function n9(){var t,e,r=this,i=r._id,n=r.size();return new Promise(function(a,s){var o={value:s},l={value:function(){--n===0&&a()}};r.each(function(){var c=Wr(this,i),u=c.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),c.on=e}),n===0&&a()})}var a9=0;function pi(t,e,r,i){this._groups=t,this._parents=e,this._name=r,this._id=i}function Hx(){return++a9}var ei=Xo.prototype;pi.prototype={constructor:pi,select:UP,selectAll:zP,selectChild:ei.selectChild,selectChildren:ei.selectChildren,filter:$P,merge:RP,selection:FP,transition:i9,call:ei.call,nodes:ei.nodes,node:ei.node,size:ei.size,empty:ei.empty,each:ei.each,on:OP,attr:mP,attrTween:xP,style:WP,styleTween:XP,text:JP,textTween:r9,remove:NP,tween:cP,delay:SP,duration:TP,ease:MP,easeVarying:PP,end:n9,[Symbol.iterator]:ei[Symbol.iterator]};function s9(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var o9={time:null,delay:0,duration:250,ease:s9};function l9(t,e){for(var r;!(r=t.__transition)||!(r=r[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return r}function c9(t){var e,r;t instanceof pi?(e=t._id,t=t._name):(e=Hx(),(r=o9).time=wf(),t=t==null?null:t+"");for(var i=this._groups,n=i.length,a=0;a<n;++a)for(var s=i[a],o=s.length,l,c=0;c<o;++c)(l=s[c])&&$u(l,t,e,c,s,r||l9(l,e));return new pi(i,this._parents,t,e)}Xo.prototype.interrupt=sP;Xo.prototype.transition=c9;const H0=Math.PI,F0=2*H0,dn=1e-6,u9=F0-dn;function Fx(t){this._+=t[0];for(let e=1,r=t.length;e<r;++e)this._+=arguments[e]+t[e]}function d9(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Fx;const r=10**e;return function(i){this._+=i[0];for(let n=1,a=i.length;n<a;++n)this._+=Math.round(arguments[n]*r)/r+i[n]}}class h9{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Fx:d9(e)}moveTo(e,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,r){this._append`L${this._x1=+e},${this._y1=+r}`}quadraticCurveTo(e,r,i,n){this._append`Q${+e},${+r},${this._x1=+i},${this._y1=+n}`}bezierCurveTo(e,r,i,n,a,s){this._append`C${+e},${+r},${+i},${+n},${this._x1=+a},${this._y1=+s}`}arcTo(e,r,i,n,a){if(e=+e,r=+r,i=+i,n=+n,a=+a,a<0)throw new Error(`negative radius: ${a}`);let s=this._x1,o=this._y1,l=i-e,c=n-r,u=s-e,p=o-r,d=u*u+p*p;if(this._x1===null)this._append`M${this._x1=e},${this._y1=r}`;else if(d>dn)if(!(Math.abs(p*l-c*u)>dn)||!a)this._append`L${this._x1=e},${this._y1=r}`;else{let h=i-s,g=n-o,y=l*l+c*c,x=h*h+g*g,m=Math.sqrt(y),k=Math.sqrt(d),S=a*Math.tan((H0-Math.acos((y+d-x)/(2*m*k)))/2),_=S/k,w=S/m;Math.abs(_-1)>dn&&this._append`L${e+_*u},${r+_*p}`,this._append`A${a},${a},0,0,${+(p*h>u*g)},${this._x1=e+w*l},${this._y1=r+w*c}`}}arc(e,r,i,n,a,s){if(e=+e,r=+r,i=+i,s=!!s,i<0)throw new Error(`negative radius: ${i}`);let o=i*Math.cos(n),l=i*Math.sin(n),c=e+o,u=r+l,p=1^s,d=s?n-a:a-n;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>dn||Math.abs(this._y1-u)>dn)&&this._append`L${c},${u}`,i&&(d<0&&(d=d%F0+F0),d>u9?this._append`A${i},${i},0,1,${p},${e-o},${r-l}A${i},${i},0,1,${p},${this._x1=c},${this._y1=u}`:d>dn&&this._append`A${i},${i},0,${+(d>=H0)},${p},${this._x1=e+i*Math.cos(a)},${this._y1=r+i*Math.sin(a)}`)}rect(e,r,i,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+r}h${i=+i}v${+n}h${-i}Z`}toString(){return this._}}function St(t){return function(){return t}}const Fb=Math.abs,yt=Math.atan2,tn=Math.cos,p9=Math.max,Kd=Math.min,Lr=Math.sin,ya=Math.sqrt,Bt=1e-12,Io=Math.PI,Hc=Io/2,hc=2*Io;function f9(t){return t>1?0:t<-1?Io:Math.acos(t)}function qb(t){return t>=1?Hc:t<=-1?-Hc:Math.asin(t)}function g9(t){let e=3;return t.digits=function(r){if(!arguments.length)return e;if(r==null)e=null;else{const i=Math.floor(r);if(!(i>=0))throw new RangeError(`invalid digits: ${r}`);e=i}return t},()=>new h9(e)}function m9(t){return t.innerRadius}function b9(t){return t.outerRadius}function v9(t){return t.startAngle}function y9(t){return t.endAngle}function w9(t){return t&&t.padAngle}function x9(t,e,r,i,n,a,s,o){var l=r-t,c=i-e,u=s-n,p=o-a,d=p*l-u*c;if(!(d*d<Bt))return d=(u*(e-a)-p*(t-n))/d,[t+d*l,e+d*c]}function Ol(t,e,r,i,n,a,s){var o=t-r,l=e-i,c=(s?a:-a)/ya(o*o+l*l),u=c*l,p=-c*o,d=t+u,h=e+p,g=r+u,y=i+p,x=(d+g)/2,m=(h+y)/2,k=g-d,S=y-h,_=k*k+S*S,w=n-a,A=d*y-g*h,T=(S<0?-1:1)*ya(p9(0,w*w*_-A*A)),I=(A*S-k*T)/_,O=(-A*k-S*T)/_,B=(A*S+k*T)/_,E=(-A*k+S*T)/_,$=I-x,R=O-m,N=B-x,D=E-m;return $*$+R*R>N*N+D*D&&(I=B,O=E),{cx:I,cy:O,x01:-u,y01:-p,x11:I*(n/w-1),y11:O*(n/w-1)}}function _9(){var t=m9,e=b9,r=St(0),i=null,n=v9,a=y9,s=w9,o=null,l=g9(c);function c(){var u,p,d=+t.apply(this,arguments),h=+e.apply(this,arguments),g=n.apply(this,arguments)-Hc,y=a.apply(this,arguments)-Hc,x=Fb(y-g),m=y>g;if(o||(o=u=l()),h<d&&(p=h,h=d,d=p),!(h>Bt))o.moveTo(0,0);else if(x>hc-Bt)o.moveTo(h*tn(g),h*Lr(g)),o.arc(0,0,h,g,y,!m),d>Bt&&(o.moveTo(d*tn(y),d*Lr(y)),o.arc(0,0,d,y,g,m));else{var k=g,S=y,_=g,w=y,A=x,T=x,I=s.apply(this,arguments)/2,O=I>Bt&&(i?+i.apply(this,arguments):ya(d*d+h*h)),B=Kd(Fb(h-d)/2,+r.apply(this,arguments)),E=B,$=B,R,N;if(O>Bt){var D=qb(O/d*Lr(I)),j=qb(O/h*Lr(I));(A-=D*2)>Bt?(D*=m?1:-1,_+=D,w-=D):(A=0,_=w=(g+y)/2),(T-=j*2)>Bt?(j*=m?1:-1,k+=j,S-=j):(T=0,k=S=(g+y)/2)}var ee=h*tn(k),oe=h*Lr(k),we=d*tn(w),me=d*Lr(w);if(B>Bt){var fe=h*tn(S),ut=h*Lr(S),W=d*tn(_),Ye=d*Lr(_),le;if(x<Io)if(le=x9(ee,oe,W,Ye,fe,ut,we,me)){var Rt=ee-le[0],Kt=oe-le[1],Pr=fe-le[0],pr=ut-le[1],$r=1/Lr(f9((Rt*Pr+Kt*pr)/(ya(Rt*Rt+Kt*Kt)*ya(Pr*Pr+pr*pr)))/2),U=ya(le[0]*le[0]+le[1]*le[1]);E=Kd(B,(d-U)/($r-1)),$=Kd(B,(h-U)/($r+1))}else E=$=0}T>Bt?$>Bt?(R=Ol(W,Ye,ee,oe,h,$,m),N=Ol(fe,ut,we,me,h,$,m),o.moveTo(R.cx+R.x01,R.cy+R.y01),$<B?o.arc(R.cx,R.cy,$,yt(R.y01,R.x01),yt(N.y01,N.x01),!m):(o.arc(R.cx,R.cy,$,yt(R.y01,R.x01),yt(R.y11,R.x11),!m),o.arc(0,0,h,yt(R.cy+R.y11,R.cx+R.x11),yt(N.cy+N.y11,N.cx+N.x11),!m),o.arc(N.cx,N.cy,$,yt(N.y11,N.x11),yt(N.y01,N.x01),!m))):(o.moveTo(ee,oe),o.arc(0,0,h,k,S,!m)):o.moveTo(ee,oe),!(d>Bt)||!(A>Bt)?o.lineTo(we,me):E>Bt?(R=Ol(we,me,fe,ut,d,-E,m),N=Ol(ee,oe,W,Ye,d,-E,m),o.lineTo(R.cx+R.x01,R.cy+R.y01),E<B?o.arc(R.cx,R.cy,E,yt(R.y01,R.x01),yt(N.y01,N.x01),!m):(o.arc(R.cx,R.cy,E,yt(R.y01,R.x01),yt(R.y11,R.x11),!m),o.arc(0,0,d,yt(R.cy+R.y11,R.cx+R.x11),yt(N.cy+N.y11,N.cx+N.x11),m),o.arc(N.cx,N.cy,E,yt(N.y11,N.x11),yt(N.y01,N.x01),!m))):o.arc(0,0,d,w,_,m)}if(o.closePath(),u)return o=null,u+""||null}return c.centroid=function(){var u=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,p=(+n.apply(this,arguments)+ +a.apply(this,arguments))/2-Io/2;return[tn(p)*u,Lr(p)*u]},c.innerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:St(+u),c):t},c.outerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:St(+u),c):e},c.cornerRadius=function(u){return arguments.length?(r=typeof u=="function"?u:St(+u),c):r},c.padRadius=function(u){return arguments.length?(i=u==null?null:typeof u=="function"?u:St(+u),c):i},c.startAngle=function(u){return arguments.length?(n=typeof u=="function"?u:St(+u),c):n},c.endAngle=function(u){return arguments.length?(a=typeof u=="function"?u:St(+u),c):a},c.padAngle=function(u){return arguments.length?(s=typeof u=="function"?u:St(+u),c):s},c.context=function(u){return arguments.length?(o=u??null,c):o},c}function k9(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function S9(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function A9(t){return t}function C9(){var t=A9,e=S9,r=null,i=St(0),n=St(hc),a=St(0);function s(o){var l,c=(o=k9(o)).length,u,p,d=0,h=new Array(c),g=new Array(c),y=+i.apply(this,arguments),x=Math.min(hc,Math.max(-hc,n.apply(this,arguments)-y)),m,k=Math.min(Math.abs(x)/c,a.apply(this,arguments)),S=k*(x<0?-1:1),_;for(l=0;l<c;++l)(_=g[h[l]=l]=+t(o[l],l,o))>0&&(d+=_);for(e!=null?h.sort(function(w,A){return e(g[w],g[A])}):r!=null&&h.sort(function(w,A){return r(o[w],o[A])}),l=0,p=d?(x-c*S)/d:0;l<c;++l,y=m)u=h[l],_=g[u],m=y+(_>0?_*p:0)+S,g[u]={data:o[u],index:l,value:_,startAngle:y,endAngle:m,padAngle:k};return g}return s.value=function(o){return arguments.length?(t=typeof o=="function"?o:St(+o),s):t},s.sortValues=function(o){return arguments.length?(e=o,r=null,s):e},s.sort=function(o){return arguments.length?(r=o,e=null,s):r},s.startAngle=function(o){return arguments.length?(i=typeof o=="function"?o:St(+o),s):i},s.endAngle=function(o){return arguments.length?(n=typeof o=="function"?o:St(+o),s):n},s.padAngle=function(o){return arguments.length?(a=typeof o=="function"?o:St(+o),s):a},s}function Js(t,e,r){this.k=t,this.x=e,this.y=r}Js.prototype={constructor:Js,scale:function(t){return t===1?this:new Js(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Js(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Js.prototype;const T9=""+new URL("../images/BackIconWhite.svg",import.meta.url).href;function Bl(t,e){return typeof t.color=="function"?e?t.color(e):void 0:t.color}class q0{constructor(){}}class E9{constructor(e,r,i,n={}){this.eventBus=e,this.rootMenu=r,this.centerButtonElement=i,this.tooltipElement=null,this.isVisible=!1,this.currentLevel=0,this.menuStack=[],this.currentMenuItems=[],this.centerButtonState="default",this.isTransitioning=!1,this.lastHideTime=0,this.reopenCooldownMs=300,this.anchorX=0,this.anchorY=0,this.menuGroups=new Map,this.menuPaths=new Map,this.menuIcons=new Map,this.selectedItemId=null,this.submenuHoverTimeout=null,this.backButtonHoverTimeout=null,this.navigationInProgress=!1,this.originalCenterButtonIcon="",this.defaultCenterButtonColor="#2c3e50",this.params=null,this.handleResize=()=>{this.isVisible&&this.clampAndSetMenuPositionForLevel(this.currentLevel)},this.config={menuSize:n.menuSize??190,submenuScale:n.submenuScale??1.5,centerButtonSize:n.centerButtonSize??30,iconSize:n.iconSize??32,centerIconSize:n.centerIconSize??48,disabledColor:n.disabledColor??Oc(128,128,128).toString(),menuTransitionDuration:n.menuTransitionDuration??300,mainMenuInnerRadius:n.mainMenuInnerRadius??40,centerButtonIcon:n.centerButtonIcon??"",maxNestedLevels:n.maxNestedLevels??3,innerRadiusIncrement:n.innerRadiusIncrement??20,tooltipStyle:n.tooltipStyle??""},this.originalCenterButtonIcon=this.config.centerButtonIcon,this.backIconSize=this.config.centerIconSize*.8,this.centerButtonColor=this.defaultCenterButtonColor,this.centerButtonIconSize=this.config.centerIconSize}init(){this.createMenuElement(),this.createTooltipElement(),this.eventBus.on(es,e=>{this.hideRadialMenu()})}createMenuElement(){this.menuElement=_i(document.body).append("div").attr("class","radial-menu-container").style("position","fixed").style("display","none").style("z-index","9999").style("touch-action","none").style("top","0").style("left","0").style("width","100vw").style("height","100vh").on("click",()=>{this.hideRadialMenu(),this.eventBus.emit(new q0)}).on("contextmenu",l=>{l.preventDefault(),this.hideRadialMenu(),this.eventBus.emit(new q0)});const e=this.config.menuSize*Math.pow(this.config.submenuScale,this.config.maxNestedLevels-1),r=this.menuElement.append("svg").attr("width",e).attr("height",e).style("position","absolute").style("top","50%").style("left","50%").style("transform","translate(-50%, -50%)").style("pointer-events","all").on("click",l=>this.hideRadialMenu()),i=r.append("g").attr("class","menu-container").attr("transform",`translate(${e/2},${e/2})`),a=r.append("defs").append("filter").attr("id","glow");a.append("feGaussianBlur").attr("stdDeviation","2").attr("result","coloredBlur");const s=a.append("feMerge");s.append("feMergeNode").attr("in","coloredBlur"),s.append("feMergeNode").attr("in","SourceGraphic");const o=i.append("g").attr("class","center-button");o.append("circle").attr("class","center-button-hitbox").attr("r",this.config.centerButtonSize).attr("fill","transparent").style("cursor","pointer").on("click",l=>{l.stopPropagation(),this.handleCenterButtonClick()}).on("touchstart",l=>{l.preventDefault(),l.stopPropagation(),this.handleCenterButtonClick()}).on("mouseover",()=>this.onCenterButtonHover(!0)).on("mouseout",()=>this.onCenterButtonHover(!1)),o.append("circle").attr("class","center-button-visible").attr("r",this.config.centerButtonSize).attr("fill",this.centerButtonColor).style("pointer-events","none"),o.append("image").attr("class","center-button-icon").attr("xlink:href",this.config.centerButtonIcon).attr("width",this.centerButtonIconSize).attr("height",this.centerButtonIconSize).attr("x",-this.centerButtonIconSize/2).attr("y",-this.centerButtonIconSize/2).style("pointer-events","none")}createTooltipElement(){this.tooltipElement=document.createElement("div"),this.tooltipElement.className="radial-tooltip",this.tooltipElement.style.position="absolute",this.tooltipElement.style.pointerEvents="none",this.tooltipElement.style.background="rgba(0, 0, 0, 0.7)",this.tooltipElement.style.color="white",this.tooltipElement.style.padding="6px 10px",this.tooltipElement.style.borderRadius="6px",this.tooltipElement.style.fontSize="12px",this.tooltipElement.style.zIndex="10000",this.tooltipElement.style.maxWidth="250px",this.tooltipElement.style.display="none",document.body.appendChild(this.tooltipElement);const e=document.createElement("style");e.textContent=`
      .radial-tooltip .title {
        font-weight: bold;
        font-size: 14px;
        margin-bottom: 4px;
      }

      ${this.config.tooltipStyle}
    `,document.head.appendChild(e)}getInnerRadiusForLevel(e){return e===0?40:75}getOuterRadiusForLevel(e){const r=this.getInnerRadiusForLevel(e);let i=55;return e!==0&&(i=65),r+i}renderMenuItems(e,r){const i=this.menuElement.select(".menu-container");i.selectAll(`.menu-level-${r}`).remove();const n=i.append("g").attr("class",`menu-level-${r}`);r===0?n.style("opacity",1).style("transform","scale(1)"):n.style("opacity",0).style("transform","scale(0.5)"),this.menuGroups.set(r,n);const a=-Math.PI/e.length,s=C9().value(()=>1).padAngle(.03).startAngle(a).endAngle(2*Math.PI+a),o=this.getInnerRadiusForLevel(r),l=this.getOuterRadiusForLevel(r),c=_9().innerRadius(o).outerRadius(l),u=n.selectAll(".menu-item").data(s(e)).enter().append("g").attr("class","menu-item-group");return this.renderPaths(u,c,r),this.setupEventHandlers(u,r),this.renderIconsAndText(u,c),this.setupAnimations(n),n}renderPaths(e,r,i){e.append("path").attr("class","menu-item-path").attr("d",r).attr("fill",n=>{const a=this.params===null||n.data.disabled(this.params),s=a?this.config.disabledColor:Bl(n.data,this.params)??"#333333",o=a?.5:.7;return n.data.id===this.selectedItemId&&this.currentLevel>i?s:Ei(s)?.copy({opacity:o})?.toString()??s}).attr("stroke","#ffffff").attr("stroke-width","2").style("cursor",n=>this.params===null||n.data.disabled(this.params)?"not-allowed":"pointer").style("opacity",n=>this.params===null||n.data.disabled(this.params)?.5:1).style("transition",`filter ${this.config.menuTransitionDuration/2}ms, stroke-width ${this.config.menuTransitionDuration/2}ms, fill ${this.config.menuTransitionDuration/2}ms`).attr("data-id",n=>n.data.id),e.each(n=>{const a=n.data.id,s=_i(`path[data-id="${a}"]`);if(this.menuPaths.set(a,s),a===this.selectedItemId&&i===0&&this.currentLevel>0){s.attr("filter","url(#glow)"),s.attr("stroke-width","3");const o=this.params===null||n.data.disabled(this.params)?this.config.disabledColor:Bl(n.data,this.params)??"#333333";s.attr("fill",o)}}),this.menuGroups.forEach((n,a)=>{a<this.currentLevel?n.selectAll("path").each(function(){_i(this).style("pointer-events","none")}):a===this.currentLevel&&n.selectAll("path").style("pointer-events","auto")})}setupEventHandlers(e,r){const i=(o,l)=>{const c=this.params===null||o.data.disabled(this.params);o.data.tooltipItems&&o.data.tooltipItems.length>0?this.showTooltip(o.data.tooltipItems):o.data.tooltipKeys&&o.data.tooltipKeys.length>0&&this.showTooltip(o.data.tooltipKeys),!(c||this.currentLevel>0&&this.currentLevel!==r||this.navigationInProgress)&&(l.attr("filter","url(#glow)"),l.attr("stroke-width","3"))},n=(o,l)=>{const c=this.params===null||o.data.disabled(this.params);if(this.submenuHoverTimeout!==null&&(window.clearTimeout(this.submenuHoverTimeout),this.submenuHoverTimeout=null),this.hideTooltip(),c||this.currentLevel>0&&r===0&&o.data.id===this.selectedItemId)return;l.attr("filter",null),l.attr("stroke-width","2");const u=c?this.config.disabledColor:Bl(o.data,this.params)??"#333333",p=c?.5:.7;l.attr("fill",Ei(u)?.copy({opacity:p})?.toString()??u)},a=(o,l)=>{if(l.stopPropagation(),this.params===null||o.data.disabled(this.params)||this.navigationInProgress||this.currentLevel>0&&r===0&&o.data.id!==this.selectedItemId)return;const c=o.data.subMenu?.(this.params);c&&c.length>0?(this.navigationInProgress=!0,this.selectedItemId=o.data.id,this.navigateToSubMenu(c),this.updateCenterButtonState("back")):(o.data.action?.(this.params),this.isTransitioning=!1,this.hideRadialMenu())};function s(o){const l=document.querySelector(".radial-tooltip");l&&l.style.display!=="none"&&(l.style.left=o.pageX+10+"px",l.style.top=o.pageY+10+"px")}e.each(o=>{const l=o.data.id,c=_i(`path[data-id="${l}"]`);c.on("mouseover",function(){i(o,c)}),c.on("mouseout",function(){n(o,c)}),c.on("mousemove",function(u){s(u)}),c.on("click",function(u){a(o,u)}),c.on("touchstart",function(u){u.preventDefault(),u.stopPropagation(),a(o,u)})})}isItemDisabled(e){return this.params===null||this.params.game.inSpawnPhase()||e.disabled(this.params)}renderIconsAndText(e,r){e.append("g").attr("class","menu-item-content").style("pointer-events","none").attr("data-id",i=>i.data.id).each(i=>{const n=i.data.id,a=_i(`g[data-id="${n}"]`),s=this.isItemDisabled(i.data);if(i.data.text)a.append("text").attr("text-anchor","middle").attr("dominant-baseline","central").attr("x",r.centroid(i)[0]).attr("y",r.centroid(i)[1]).attr("fill","white").attr("font-size",i.data.fontSize??"12px").attr("font-family","Arial, sans-serif").style("opacity",s?.5:1).text(i.data.text);else{const o=a.append("image").attr("xlink:href",i.data.icon).attr("width",this.config.iconSize).attr("height",this.config.iconSize).attr("x",r.centroid(i)[0]-this.config.iconSize/2).attr("y",r.centroid(i)[1]-this.config.iconSize/2).attr("opacity",s?.5:1);if(y2(i.data.icon).then(l=>{if(!l||l===1)return;let c=this.config.iconSize,u=this.config.iconSize;const p=Math.round(c*l);l>1?c=p:u=p,o.attr("width",c).attr("height",u).attr("x",r.centroid(i)[0]-c/2).attr("y",r.centroid(i)[1]-u/2)}),this.params&&i.data.cooldown?.(this.params)){const l=Math.ceil(i.data.cooldown?.(this.params));a.append("text").attr("class","cooldown-text").text(l+"s").attr("fill","white").attr("opacity",s?.5:1).attr("font-size","14px").attr("font-weight","bold").attr("x",r.centroid(i)[0]-this.config.iconSize/4).attr("y",r.centroid(i)[1]+this.config.iconSize/2+7)}}this.menuIcons.set(n,a)})}setupAnimations(e){e.transition().duration(this.config.menuTransitionDuration*.8).style("opacity",1).style("transform","scale(1)").on("start",()=>{this.isTransitioning=!0}).on("end",()=>{this.isTransitioning=!1})}navigateToSubMenu(e){this.isTransitioning=!0,this.menuStack.push(this.currentMenuItems),this.currentMenuItems=e,this.currentLevel++,this.clampAndSetMenuPositionForLevel(this.currentLevel),this.renderMenuItems(this.currentMenuItems,this.currentLevel),this.updateMenuGroupVisibility(),this.animatePreviousMenu()}updateMenuGroupVisibility(){this.updateMenuVisibility("forward")}updateMenuVisibility(e="backward"){this.menuGroups.forEach((r,i)=>{i===this.currentLevel?(r.style("display","block"),r.transition().duration(this.config.menuTransitionDuration*.8).style("transform","scale(1)").style("opacity",1),r.selectAll("path").style("pointer-events","auto")):i===this.currentLevel-1&&this.currentLevel>0?(r.style("display","block"),r.transition().duration(this.config.menuTransitionDuration*.8).style("transform",`scale(${this.currentLevel===1?"0.65":"0.5"})`).style("opacity",.8),e==="forward"&&r.selectAll("path").each(function(){_i(this).style("pointer-events","none")})):i!==this.currentLevel+1&&r.transition().duration(this.config.menuTransitionDuration*.5).style("transform","scale(0.5)").style("opacity",0).on("end",function(){_i(this).style("display","none")})})}animatePreviousMenu(){this.menuElement.select(".menu-container").select(`.menu-level-${this.currentLevel-1}`).transition().duration(this.config.menuTransitionDuration*.8).style("transform",`scale(${this.currentLevel===1?"0.65":"0.5"})`).style("opacity",.8).on("end",()=>{this.navigationInProgress=!1})}navigateBack(){this.menuStack.length!==0&&(this.isTransitioning=!0,this.updateMenuLevels(),this.clampAndSetMenuPositionForLevel(this.currentLevel),this.clearSelectedItemHoverState(),this.updateMenuVisibility("backward"),this.animateMenuTransitions())}updateMenuLevels(){const e=this.menuStack.pop(),r=this.currentLevel-1;this.currentLevel=r,r===0&&(this.selectedItemId=null),this.currentMenuItems=e??[],this.currentLevel===0&&this.updateCenterButtonState("default")}clearSelectedItemHoverState(){if(this.selectedItemId){const e=this.menuPaths.get(this.selectedItemId);e&&(e.attr("filter",null),e.attr("stroke-width","2"))}this.refresh()}animateMenuTransitions(){const e=this.menuElement.select(".menu-container"),r=e.select(`.menu-level-${this.currentLevel+1}`),i=e.select(`.menu-level-${this.currentLevel}`);r.transition().duration(this.config.menuTransitionDuration*.8).style("transform","scale(0.5)").style("opacity",0).on("end",function(){_i(this).remove()}),i.empty()?this.renderAndAnimateNewMenu():this.animateExistingMenu(i)}renderAndAnimateNewMenu(){this.renderMenuItems(this.currentMenuItems,this.currentLevel).style("transform","scale(0.8)").style("opacity",.3).transition().duration(this.config.menuTransitionDuration*.8).style("transform","scale(1)").style("opacity",1).on("end",()=>{this.isTransitioning=!1,this.navigationInProgress=!1})}animateExistingMenu(e){e.transition().duration(this.config.menuTransitionDuration*.8).style("transform","scale(1)").style("opacity",1).on("end",()=>{this.isTransitioning=!1,this.navigationInProgress=!1}),e.selectAll("path").style("pointer-events","auto")}showRadialMenu(e,r){this.isReopeningAllowed()&&(this.resetMenu(),this.isTransitioning=!1,this.selectedItemId=null,this.anchorX=e,this.anchorY=r,this.menuElement.style("display","block"),this.clampAndSetMenuPositionForLevel(this.currentLevel),this.isVisible=!0,this.renderMenuItems(this.currentMenuItems,this.currentLevel),this.onCenterButtonHover(!0),window.addEventListener("resize",this.handleResize))}hideRadialMenu(){this.isVisible&&(this.isTransitioning=!1,this.menuElement.style("display","none"),this.isVisible=!1,this.selectedItemId=null,this.hideTooltip(),this.resetMenu(),this.isTransitioning=!1,this.menuGroups.clear(),this.menuPaths.clear(),this.menuIcons.clear(),this.lastHideTime=Date.now(),window.removeEventListener("resize",this.handleResize))}handleCenterButtonClick(){if(this.centerButtonState==="default"){this.params&&this.isCenterButtonEnabled()&&this.centerButtonElement?.action(this.params);return}if(this.centerButtonState==="back"){this.navigationInProgress=!0,this.navigateBack();return}}disableAllButtons(){this.updateCenterButtonState("default"),this.refresh()}updateCenterButtonState(e){if(this.centerButtonState=e,e==="back"){const a=this.config.centerButtonSize*.8;this.menuElement.select(".center-button-hitbox").transition().duration(0).attr("r",a),this.menuElement.select(".center-button-visible").transition().duration(0).attr("r",a),this.menuElement.select(".center-button-icon").attr("xlink:href",T9).attr("width",this.backIconSize).attr("height",this.backIconSize).attr("x",-this.backIconSize/2).attr("y",-this.backIconSize/2)}e==="default"&&(this.menuElement.select(".center-button-hitbox").transition().duration(0).attr("r",this.config.centerButtonSize),this.menuElement.select(".center-button-visible").transition().duration(0).attr("r",this.config.centerButtonSize),this.menuElement.select(".center-button-icon").attr("xlink:href",this.originalCenterButtonIcon).attr("width",this.centerButtonIconSize).attr("height",this.centerButtonIconSize).attr("x",-this.centerButtonIconSize/2).attr("y",-this.centerButtonIconSize/2));const r=this.menuElement.select(".center-button"),i=this.isCenterButtonEnabled();r.select(".center-button-hitbox").style("cursor",i?"pointer":"not-allowed");const n=e==="back"?this.defaultCenterButtonColor:this.centerButtonColor;r.select(".center-button-visible").attr("fill",i?n:"#999999"),r.select(".center-button-icon").style("opacity",i?1:.5)}isCenterButtonEnabled(){return this.currentLevel>0?!0:this.params&&this.centerButtonElement?!this.centerButtonElement.disabled(this.params):!1}onCenterButtonHover(e){if(!this.isCenterButtonEnabled())return;const r=e?1.2:1;this.menuElement.select(".center-button-hitbox").transition().duration(200).attr("r",this.config.centerButtonSize*r),this.menuElement.select(".center-button-visible").transition().duration(200).attr("r",this.config.centerButtonSize*r)}isMenuVisible(){return this.isVisible}getCurrentLevel(){return this.currentLevel}setParams(e){this.params=e}getDefaultCenterIconSize(){return this.config.centerIconSize}setCenterButtonAppearance(e,r,i){if(this.originalCenterButtonIcon=e,this.centerButtonColor=r??this.defaultCenterButtonColor,this.centerButtonIconSize=i??this.config.centerIconSize,!this.menuElement)return;this.menuElement.select(".center-button-icon").attr("xlink:href",e).attr("width",this.centerButtonIconSize).attr("height",this.centerButtonIconSize).attr("x",-this.centerButtonIconSize/2).attr("y",-this.centerButtonIconSize/2),this.menuElement.select(".center-button-visible").attr("fill",this.isCenterButtonEnabled()?this.centerButtonColor:"#999999"),this.updateCenterButtonState(this.centerButtonState)}findMenuItem(e){return this.currentMenuItems.find(r=>r.id===e)}resetMenu(){this.currentLevel=0,this.menuStack=[],this.currentMenuItems=this.rootMenu.subMenu(this.params),this.navigationInProgress=!1,this.menuGroups.clear(),this.menuPaths.clear(),this.menuIcons.clear();const e=this.menuElement?.select(".menu-container");e&&e.selectAll("[class^='menu-level-']").remove(),this.updateCenterButtonState("default"),this.submenuHoverTimeout!==null&&(window.clearTimeout(this.submenuHoverTimeout),this.submenuHoverTimeout=null),this.backButtonHoverTimeout!==null&&(window.clearTimeout(this.backButtonHoverTimeout),this.backButtonHoverTimeout=null)}refreshMenu(){this.isVisible&&this.renderMenuItems(this.currentMenuItems,this.currentLevel)}refresh(){!this.isVisible||!this.params||(this.menuPaths.forEach((e,r)=>{const i=this.findMenuItem(r);if(i){const n=this.isItemDisabled(i),a=n?this.config.disabledColor:Bl(i,this.params)??"#333333",s=n?.5:.7;e.attr("fill",Ei(a)?.copy({opacity:s})?.toString()??a),e.style("opacity",n?.5:1),e.style("cursor",n?"not-allowed":"pointer");const o=this.menuIcons.get(r);if(o){const l=o.select("text");l.empty()||l.style("opacity",n?.5:1);const c=o.select("image");c.empty()||c.attr("opacity",n?.5:1);const u=o.select(".cooldown-text");if(this.params&&!u.empty()&&i.cooldown){const p=Math.ceil(i.cooldown(this.params));p<=0?u.remove():u.text(p+"s")}}}}),this.updateCenterButtonState(this.centerButtonState))}renderLayer(e){}shouldTransform(){return!1}isReopeningAllowed(){return Date.now()-this.lastHideTime>=this.reopenCooldownMs}showTooltip(e){if(this.tooltipElement){this.tooltipElement.innerHTML="";for(const r of e){const i=document.createElement("div");i.className=r.className,"key"in r?i.textContent=f(r.key,r.params):i.textContent=r.text,this.tooltipElement.appendChild(i)}this.tooltipElement.style.display="block"}}hideTooltip(){this.tooltipElement&&(this.tooltipElement.style.display="none")}clampAndSetMenuPositionForLevel(e){const r=this.getOuterRadiusForLevel(e),i=Math.max(r,this.config.centerButtonSize)+10,n=window.innerWidth,a=window.innerHeight,s=2*i>n?n/2:Math.min(Math.max(this.anchorX,i),n-i),o=2*i>a?a/2:Math.min(Math.max(this.anchorY,i),a-i);this.menuElement.select("svg").style("top",`${o}px`).style("left",`${s}px`)}}var M9=Object.getOwnPropertyDescriptor,I9=(t,e,r,i)=>{for(var n=i>1?void 0:i?M9(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=s(n)||n);return n};let j0=class extends V{constructor(t,e,r,i,n,a,s){super(),this.eventBus=t,this.game=e,this.transformHandler=r,this.emojiTable=i,this.buildMenu=n,this.uiState=a,this.playerPanel=s,this.clickedTile=null;const o={centerButtonIcon:Rc,tooltipStyle:`
        .radial-tooltip .cost {
          margin-top: 4px;
          color: ${Pt.tooltip.cost};
        }
        .radial-tooltip .count {
          color: ${Pt.tooltip.count};
        }
      `};this.radialMenu=new E9(this.eventBus,VE,GE,o),this.playerActionHandler=new KE(this.eventBus,this.uiState),this.chatIntegration=new WE(this.game,this.eventBus)}getTickIntervalMs(){return 500}init(){this.radialMenu.init(),this.eventBus.on(Na,t=>{const e=this.transformHandler.screenToWorldCoordinates(t.x,t.y);this.game.isValidCoord(e.x,e.y)&&this.game.myPlayer()!==null&&(this.clickedTile=this.game.ref(e.x,e.y),this.game.myPlayer().actions(this.clickedTile).then(r=>{this.updatePlayerActions(this.game.myPlayer(),r,this.clickedTile,t.x,t.y)}))})}async updatePlayerActions(t,e,r,i=null,n=null){this.buildMenu.playerActions=e;const a=this.game.owner(r),s=a.isPlayer()?a:null;t&&s&&this.chatIntegration.setupChatModal(t,s);const o={myPlayer:t,selected:s,tile:r,playerActions:e,game:this.game,buildMenu:this.buildMenu,emojiTable:this.emojiTable,playerActionHandler:this.playerActionHandler,playerPanel:this.playerPanel,chatIntegration:this.chatIntegration,uiState:this.uiState,closeMenu:()=>this.closeMenu(),eventBus:this.eventBus},l=s!==null&&s.isFriendly(t)&&!s.isDisconnected();this.radialMenu.setCenterButtonAppearance(l?px:Rc,l?"#34D399":"#2c3e50",l?this.radialMenu.getDefaultCenterIconSize()*.75:this.radialMenu.getDefaultCenterIconSize()),this.radialMenu.setParams(o),i!==null&&n!==null?this.radialMenu.showRadialMenu(i,n):this.radialMenu.refresh()}async tick(){!this.radialMenu.isMenuVisible()||this.clickedTile===null||this.game.myPlayer().actions(this.clickedTile).then(t=>{this.updatePlayerActions(this.game.myPlayer(),t,this.clickedTile)})}renderLayer(t){this.radialMenu.renderLayer(t)}shouldTransform(){return this.radialMenu.shouldTransform()}closeMenu(){this.radialMenu.isMenuVisible()&&this.radialMenu.hideRadialMenu(),this.buildMenu.isVisible&&this.buildMenu.hideMenu(),this.emojiTable.isVisible&&this.emojiTable.hideTable(),this.playerPanel.isVisible&&this.playerPanel.hide()}};j0=I9([F("main-radial-menu")],j0);class P9{constructor(){this.tabId=`${Date.now()}-${Math.random()}`,this.lockKey="multi-tab-lock",this.heartbeatIntervalMs=1e3,this.staleThresholdMs=3e3,this.heartbeatTimer=null,this.isPunished=!1,this.punishmentCount=0,this.startPenaltyCallback=()=>{},window.addEventListener("storage",this.onStorageEvent.bind(this)),window.addEventListener("beforeunload",this.onBeforeUnload.bind(this))}startMonitoring(e){this.startPenaltyCallback=e,this.writeLock(),this.heartbeatTimer=window.setInterval(()=>this.heartbeat(),this.heartbeatIntervalMs)}stopMonitoring(){this.heartbeatTimer!==null&&(clearInterval(this.heartbeatTimer),this.heartbeatTimer=null),this.readLock()?.owner===this.tabId&&localStorage.removeItem(this.lockKey),window.removeEventListener("storage",this.onStorageEvent.bind(this)),window.removeEventListener("beforeunload",this.onBeforeUnload.bind(this))}heartbeat(){const e=Date.now(),r=this.readLock();if(!r||r.owner===this.tabId||e-r.timestamp>this.staleThresholdMs){this.writeLock(),this.isPunished=!1;return}this.isPunished||this.applyPunishment()}onStorageEvent(e){if(e.key===this.lockKey&&e.newValue){let r;try{r=JSON.parse(e.newValue)}catch(i){console.error("Failed to parse lock",i);return}r.owner!==this.tabId&&!this.isPunished&&this.applyPunishment()}}onBeforeUnload(){this.readLock()?.owner===this.tabId&&localStorage.removeItem(this.lockKey)}applyPunishment(){this.isPunished=!0,this.punishmentCount++;const e=1e4;this.startPenaltyCallback(e),setTimeout(()=>{this.isPunished=!1},e)}writeLock(){localStorage.setItem(this.lockKey,JSON.stringify({owner:this.tabId,timestamp:Date.now()}))}readLock(){const e=localStorage.getItem(this.lockKey);if(!e)return null;try{return JSON.parse(e)}catch(r){return console.error("Failed to parse lock",e,r),null}}}var $9=Object.defineProperty,R9=Object.getOwnPropertyDescriptor,Vn=(t,e,r,i)=>{for(var n=i>1?void 0:i?R9(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&$9(e,r,n),n};let fi=class extends V{constructor(){super(...arguments),this.duration=5e3,this.countdown=5,this.isVisible=!1,this.fakeIp="",this.deviceFingerprint="",this.reported=!0}createRenderRoot(){return this}tick(){this.game.inSpawnPhase()||this.game.config().gameConfig().gameType===lt.Singleplayer||this.game.config().serverConfig().env()===zr.Dev||this.detector||(this.detector=new P9,this.detector.startMonitoring(t=>{this.show(t)}))}init(){this.fakeIp=this.generateFakeIp(),this.deviceFingerprint=this.generateDeviceFingerprint(),this.reported=!0}generateFakeIp(){return Array.from({length:4},()=>Math.floor(Math.random()*255)).join(".")}generateDeviceFingerprint(){return Array.from({length:32},()=>Math.floor(Math.random()*16).toString(16)).join("")}show(t){this.game.myPlayer()?.isAlive()&&(this.duration=t,this.countdown=Math.ceil(t/1e3),this.isVisible=!0,this.intervalId=window.setInterval(()=>{this.countdown--,this.countdown<=0&&this.hide()},1e3),this.requestUpdate())}hide(){this.isVisible=!1,this.intervalId&&(window.clearInterval(this.intervalId),this.intervalId=void 0),this.dispatchEvent(new CustomEvent("penalty-complete",{bubbles:!0,composed:!0})),this.requestUpdate()}disconnectedCallback(){super.disconnectedCallback(),this.intervalId&&window.clearInterval(this.intervalId)}render(){return this.isVisible?v`
      <div
        class="fixed inset-0 z-50 overflow-auto bg-red-500/20 flex items-center justify-center"
      >
        <div
          class="relative p-6 bg-white dark:bg-gray-800 rounded-xl shadow-xl max-w-md w-full m-4 transition-all transform"
        >
          <div class="flex items-center justify-between mb-4">
            <h2 class="text-2xl font-bold text-red-600 dark:text-red-400">
              ${f("multi_tab.warning")}
            </h2>
            <div
              class="px-2 py-1 bg-red-600 text-white text-xs font-bold rounded-full animate-pulse"
            >
              RECORDING
            </div>
          </div>

          <p class="mb-4 text-gray-800 dark:text-gray-200">
            ${f("multi_tab.detected")}
          </p>

          <div
            class="mb-4 p-3 bg-gray-100 dark:bg-gray-900 rounded-md text-sm font-mono"
          >
            <div class="flex justify-between mb-1">
              <span class="text-gray-500 dark:text-gray-400">IP:</span>
              <span class="text-red-600 dark:text-red-400">${this.fakeIp}</span>
            </div>
            <div class="flex justify-between mb-1">
              <span class="text-gray-500 dark:text-gray-400"
                >Device Fingerprint:</span
              >
              <span class="text-red-600 dark:text-red-400"
                >${this.deviceFingerprint}</span
              >
            </div>
            <div class="flex justify-between">
              <span class="text-gray-500 dark:text-gray-400">Reported:</span>
              <span class="text-red-600 dark:text-red-400"
                >${this.reported?"TRUE":"FALSE"}</span
              >
            </div>
          </div>

          <p class="mb-4 text-gray-800 dark:text-gray-200">
            ${f("multi_tab.please_wait")}
            <span class="font-bold text-xl">${this.countdown}</span>
            ${f("multi_tab.seconds")}
          </p>

          <div
            class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 mb-4"
          >
            <div
              class="bg-red-600 dark:bg-red-500 h-2.5 rounded-full transition-all duration-1000 ease-linear w-(--width)"
              style="--width: ${this.countdown/(this.duration/1e3)*100}%"
            ></div>
          </div>

          <p class="text-sm text-gray-600 dark:text-gray-400">
            ${f("multi_tab.explanation")}
          </p>

          <p class="mt-3 text-xs text-red-500 font-semibold">
            Repeated violations may result in permanent account suspension.
          </p>
        </div>
      </div>
    `:v``}};Vn([L({type:Number})],fi.prototype,"duration",2);Vn([M()],fi.prototype,"countdown",2);Vn([M()],fi.prototype,"isVisible",2);Vn([M()],fi.prototype,"fakeIp",2);Vn([M()],fi.prototype,"deviceFingerprint",2);Vn([M()],fi.prototype,"reported",2);fi=Vn([F("multi-tab-modal")],fi);const D9={rainbow:4e3,"bright-rainbow":4e3,"copper-glow":3e3,"silver-glow":3e3,"gold-glow":3e3,neon:3e3,lava:6e3,water:6200};function kf(t,e,r=void 0){if(r===void 0){console.warn("No cosmetics provided for flag",t);return}if(!t.startsWith("!"))return;const n=t.slice(1).split("_").map(a=>{const[s,o]=a.split("-");return{layerKey:s,colorKey:o}});e.innerHTML="",e.style.overflow="hidden",e.style.position="relative",e.style.aspectRatio="3/4";for(const{layerKey:a,colorKey:s}of n){const l=`/flags/custom/${r?.flag?.layers[a]?.name??a}.svg`;if(!l)continue;const c=document.createElement("div");c.style.position="absolute",c.style.top="0",c.style.left="0",c.style.width="100%",c.style.height="100%";const u=r?.flag?.color[s]?.color??s;if(!u.startsWith("#")&&!/^([0-9a-fA-F]{6}|[0-9a-fA-F]{3})$/.test(u)){const d=D9[u]??5e3,g=performance.now()%d;d||console.warn(`No animation duration for: ${u}`),c.classList.add(`flag-color-${u}`),c.style.animationDelay=`-${g}ms`}else c.style.backgroundColor=u;c.style.maskImage=`url(${l})`,c.style.maskRepeat="no-repeat",c.style.maskPosition="center",c.style.maskSize="contain",c.style.webkitMaskImage=`url(${l})`,c.style.webkitMaskRepeat="no-repeat",c.style.webkitMaskPosition="center",c.style.webkitMaskSize="contain",e.appendChild(c)}}const Sf=""+new URL("../images/AllianceIcon.svg",import.meta.url).href,L9=""+new URL("../images/AllianceIconFaded.svg",import.meta.url).href,O9=""+new URL("../images/AllianceRequestBlackIcon.svg",import.meta.url).href,B9=""+new URL("../images/AllianceRequestWhiteIcon.svg",import.meta.url).href,N9=""+new URL("../images/CrownIcon.svg",import.meta.url).href,U9=""+new URL("../images/DisconnectedIcon.svg",import.meta.url).href,z9=""+new URL("../images/EmbargoBlackIcon.svg",import.meta.url).href,H9=""+new URL("../images/EmbargoWhiteIcon.svg",import.meta.url).href,F9=""+new URL("../images/NukeIconRed.svg",import.meta.url).href,q9=""+new URL("../images/QuestionMarkIcon.svg",import.meta.url).href,j9=""+new URL("../images/TargetIcon.svg",import.meta.url).href,G9=""+new URL("../images/TraitorIcon.svg",import.meta.url).href;function qx(t){const e=t.playerViews().sort((r,i)=>i.numTilesOwned()-r.numTilesOwned());return e.length>0?e[0]:null}function jx(t){const{game:e,player:r,includeAllianceIcon:i,firstPlace:n}=t,a=e.myPlayer(),s=e.config().userSettings(),o=s?.darkMode()??!1,l=s?.emojis()??!1,c=[];if(r===n&&c.push({id:"crown",kind:"image",src:N9}),r.isTraitor()&&c.push({id:"traitor",kind:"image",src:G9}),r.isDisconnected()&&c.push({id:"disconnected",kind:"image",src:U9}),i&&a!==null&&a.isAlliedWith(r)&&c.push({id:"alliance",kind:"image",src:Sf}),a!==null&&r.isRequestingAllianceWith(a)){const d=o?B9:O9;c.push({id:"alliance-request",kind:"image",src:d})}if(a!==null&&new Set(a.transitiveTargets()).has(r)&&c.push({id:"target",kind:"image",src:j9,center:!0}),l){const d=r.outgoingEmojis().filter(h=>h.recipientID===ui||h.recipientID===a?.smallID());d.length>0&&c.push({id:"emoji",kind:"emoji",text:d[0].message})}if(a?.hasEmbargo(r)){const d=o?H9:z9;c.push({id:"embargo",kind:"image",src:d})}const u=e.units(...i3).filter(d=>{const h=r.id()===d.owner().id(),g=!a||d.owner().id()!==a.id();return h&&g&&d.isActive()}),p=u.some(d=>{const h=d.targetTile();return!h||!a?!1:e.owner(h).id()===a.id()});if(u.length>0){const d=p?F9:Cu;c.push({id:"nuke",kind:"image",src:d})}return c}function V9(t,e,r,i){const n=document.createElement("div");n.setAttribute("data-icon","alliance"),n.setAttribute("dark-mode",i.toString()),n.style.position="relative",n.style.width=`${t}px`,n.style.height=`${t}px`,n.style.display="inline-block",n.style.flexShrink="0";const a=document.createElement("img");a.src=L9,a.style.width=`${t}px`,a.style.height=`${t}px`,a.style.display="block",a.setAttribute("dark-mode",i.toString()),n.appendChild(a);const s=document.createElement("div");s.className="alliance-progress-overlay",s.style.position="absolute",s.style.left="0",s.style.top="0",s.style.width="100%",s.style.height="100%",s.style.clipPath=Gx(e);const o=document.createElement("img");o.src=Sf,o.style.width=`${t}px`,o.style.height=`${t}px`,o.style.display="block",o.setAttribute("dark-mode",i.toString()),s.appendChild(o),n.appendChild(s);const l=document.createElement("img");return l.className="alliance-question-mark",l.src=q9,l.style.position="absolute",l.style.left="0",l.style.top="0",l.style.width=`${t}px`,l.style.height=`${t}px`,l.style.display=r?"block":"none",l.style.pointerEvents="none",l.setAttribute("dark-mode",i.toString()),n.appendChild(l),n}function Gx(t){return`inset(${(20+(1-t)*80*.78).toFixed(2)}% -2px 0 -2px)`}const jb=""+new URL("../images/ShieldIconBlack.svg",import.meta.url).href;class W9{constructor(e,r,i,n,a,s){this.player=e,this.lastRenderCalc=r,this.location=i,this.fontSize=n,this.fontColor=a,this.element=s,this.icons=new Map}}class K9{constructor(e,r,i){this.game=e,this.transformHandler=r,this.eventBus=i,this.lastChecked=0,this.renderCheckRate=100,this.renderRefreshRate=500,this.rand=new Pn(10),this.renders=[],this.seenPlayers=new Set,this.theme=this.game.config().theme(),this.userSettings=new Gt,this.isVisible=!0,this.firstPlace=null,this.shieldIconImage=new Image,this.shieldIconImage.src=jb,this.shieldIconImage=new Image,this.shieldIconImage.src=jb}resizeCanvas(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight}shouldTransform(){return!1}redraw(){this.theme=this.game.config().theme()}init(){this.canvas=m2(),window.addEventListener("resize",()=>this.resizeCanvas()),this.resizeCanvas(),this.container=document.createElement("div"),this.container.style.position="fixed",this.container.style.left="50%",this.container.style.top="50%",this.container.style.pointerEvents="none",this.container.style.zIndex="2",document.body.appendChild(this.container);const e=document.createElement("style");e.textContent=`
      @keyframes traitorFlash {
        0%, 100% {
          opacity: 1;
        }
        50% {
          opacity: 0.3;
        }
      }
    `,this.container.appendChild(e),this.eventBus.on(Dn,r=>this.onAlternateViewChange(r))}onAlternateViewChange(e){this.isVisible=!e.alternateView;for(const r of this.renders)this.updateElementVisibility(r)}updateElementVisibility(e){if(!e.player.nameLocation()||!e.player.isAlive())return;const r=Math.max(1,Math.floor(e.player.nameLocation().size)),i=this.transformHandler.scale*r,n=e.location?this.transformHandler.isOnScreen(e.location):!1;!this.isVisible||i<7||this.transformHandler.scale>17&&i>100||!n?e.element.style.display="none":e.element.style.display="flex"}getTickIntervalMs(){return 1e3}tick(){this.firstPlace=qx(this.game);for(const e of this.game.playerViews())e.isAlive()&&(this.seenPlayers.has(e)||(this.seenPlayers.add(e),this.renders.push(new W9(e,0,null,0,"",this.createPlayerElement(e)))))}renderLayer(e){const r=this.transformHandler.worldToScreenCoordinates(new We(0,0)),i=new We(r.x-window.innerWidth/2,r.y-window.innerHeight/2);this.container.style.transform=`translate(${i.x}px, ${i.y}px) scale(${this.transformHandler.scale})`;const n=Date.now();if(n>this.lastChecked+this.renderCheckRate){this.lastChecked=n;for(const a of this.renders)this.renderPlayerInfo(a)}e.drawImage(this.canvas,0,0,e.canvas.width,e.canvas.height)}createPlayerElement(e){const r=document.createElement("div");r.style.position="absolute",r.style.display="flex",r.style.flexDirection="column",r.style.alignItems="center",r.style.gap="0px";const i=document.createElement("div");i.classList.add("player-icons"),i.style.display="flex",i.style.gap="4px",i.style.justifyContent="center",i.style.alignItems="center",i.style.zIndex="2",i.style.opacity="0.8",r.appendChild(i);const n=document.createElement("div"),a=l=>{l.classList.add("player-flag"),l.style.opacity="0.8",l.style.zIndex="1",l.style.aspectRatio="3/4"};if(e.cosmetics.flag){const l=e.cosmetics.flag;if(l!=null&&l.startsWith("!")){const c=document.createElement("div");a(c),kf(l,c),n.appendChild(c)}else if(l!=null){const c=document.createElement("img");a(c),c.src="/flags/"+l+".svg",n.appendChild(c)}}n.classList.add("player-name"),n.style.color=this.theme.textColor(e),n.style.fontFamily=this.theme.font(),n.style.whiteSpace="nowrap",n.style.textOverflow="ellipsis",n.style.zIndex="3",n.style.display="flex",n.style.justifyContent="flex-end",n.style.alignItems="center";const s=document.createElement("span");s.className="player-name-span",s.innerHTML=e.name(),n.appendChild(s),r.appendChild(n);const o=document.createElement("div");return o.classList.add("player-troops"),o.setAttribute("translate","no"),o.textContent=Je(e.troops()),o.style.color=this.theme.textColor(e),o.style.fontFamily=this.theme.font(),o.style.zIndex="3",o.style.marginTop="-5%",r.appendChild(o),r.style.display="none",this.container.appendChild(r),r}renderPlayerInfo(e){if(!e.player.nameLocation()||!e.player.isAlive()){this.renders=this.renders.filter(m=>m!==e),e.element.remove();return}const r=e.location;e.location=new We(e.player.nameLocation().x,e.player.nameLocation().y);const i=Math.max(1,Math.floor(e.player.nameLocation().size));if(e.fontSize=Math.max(4,Math.floor(i*.4)),e.fontColor=this.theme.textColor(e.player),this.updateElementVisibility(e),e.element.style.display==="none")return;const n=Date.now();if(n-e.lastRenderCalc<=this.renderRefreshRate)return;e.lastRenderCalc=n+this.rand.nextInt(0,100);const a=e.element.querySelector(".player-name"),s=e.element.querySelector(".player-flag"),o=e.element.querySelector(".player-troops");a.style.fontSize=`${e.fontSize}px`,a.style.lineHeight=`${e.fontSize}px`,a.style.color=e.fontColor;const l=a.querySelector(".player-name-span");l&&(l.innerHTML=e.player.name()),s&&(s.style.height=`${e.fontSize}px`),o.style.fontSize=`${e.fontSize}px`,o.style.color=e.fontColor,o.textContent=Je(e.player.troops());const c=ce(e.player.troops()/e.player.numTilesOwned()),u=e.element.querySelector(".player-shield"),p=u?.querySelector("img"),d=u?.querySelector("span");p&&(p.style.width=`${e.fontSize*.8}px`,p.style.height=`${e.fontSize*.8}px`),d&&(d.style.fontSize=`${e.fontSize*.6}px`,d.style.marginTop=`${-e.fontSize*.1}px`,d.textContent=c);const h=e.element.querySelector(".player-icons"),g=Math.min(e.fontSize*1.5,48),y=jx({game:this.game,player:e.player,includeAllianceIcon:!0,firstPlace:this.firstPlace}),x=new Set(y.map(m=>m.id));for(const[m,k]of e.icons)x.has(m)||(k.remove(),e.icons.delete(m));for(const m of y)if(m.kind==="emoji"&&m.text){let k=e.icons.get(m.id);k||(k=document.createElement("div"),k.style.position="absolute",k.style.top="50%",k.style.transform="translateY(-50%)",h.appendChild(k),e.icons.set(m.id,k)),k.textContent=m.text,k.style.fontSize=`${g}px`}else if(m.kind==="image"&&m.src){if(m.id==="alliance"){let S=e.icons.get(m.id);const w=this.game.myPlayer()?.alliances().find(I=>I.other===e.player.id());let A=0,T=!1;if(w){const I=Math.max(0,w.expiresAt-this.game.ticks()),O=Math.max(1,this.game.config().allianceDuration());A=Math.max(0,Math.min(1,I/O)),T=w.hasExtensionRequest}if(!S)S=V9(g,A,T,this.userSettings.darkMode()),h.appendChild(S),e.icons.set(m.id,S);else{S.style.width=`${g}px`,S.style.height=`${g}px`,S.style.flexShrink="0";const I=S.querySelector(".alliance-progress-overlay");I&&(I.style.clipPath=Gx(A));const O=S.querySelector(".alliance-question-mark");O&&(O.style.display=T?"block":"none");const B=S.getElementsByTagName("img");for(const E of B)E.style.width=`${g}px`,E.style.height=`${g}px`}continue}let k=e.icons.get(m.id);if(k||(k=this.createIconElement(m.src,g,m.center),h.appendChild(k),e.icons.set(m.id,k)),k.src!==m.src&&(k.src=m.src),k.style.width=`${g}px`,k.style.height=`${g}px`,m.id==="traitor"){const S=e.player.getTraitorRemainingTicks(),_=Math.round(S/10*2)/2;if(_<=15){const A=Math.max(0,Math.min(15,_))/15,T=1-Math.pow(1-A,3),I=1,O=.2,E=`${(O+(I-O)*T).toFixed(2)}s`;k.style.animation=`traitorFlash ${E} infinite`,k.style.animationTimingFunction="ease-in-out"}else k.style.animation="none"}}if(e.location&&e.location!==r){const m=Math.min(i*.25,3);e.element.style.transform=`translate(${e.location.x}px, ${e.location.y}px) translate(-50%, -50%) scale(${m})`}}createIconElement(e,r,i=!1){const n=document.createElement("img");return n.src=e,n.style.width=`${r}px`,n.style.height=`${r}px`,n.setAttribute("dark-mode",this.userSettings.darkMode().toString()),i&&(n.style.position="absolute",n.style.top="50%",n.style.transform="translateY(-50%)"),n}}function Y9(t){const{gm:e,targetTile:r,magnitude:i}=t,n=i.inner*i.inner,a=new Map;return e.circleSearch(r,i.outer,(s,o)=>{const l=e.ownerID(s);if(l>0){const c=o<=n?1:.5,u=a.get(l)??0;a.set(l,u+c)}return!0}),a}function X9(t){const{game:e,targetTile:r,magnitude:i,allySmallIds:n,threshold:a}=t;if(n.size===0)return!1;if(e.anyUnitNearby(r,i.outer,Ly,u=>u.owner().isPlayer()&&n.has(u.owner().smallID())))return!0;const o=i.inner*i.inner,l=new Map;let c=!1;return e.circleSearch(r,i.outer,(u,p)=>{const d=e.ownerID(u);if(d>0&&n.has(d)){const h=p<=o?1:.5,g=(l.get(d)??0)+h;if(l.set(d,g),g>a)return c=!0,!1}return!0}),c}function Z9(t){const{game:e,targetTile:r,magnitude:i,threshold:n}=t,a=new Set,s=Y9({gm:e,targetTile:r,magnitude:i});for(const[o,l]of s)l>n&&a.add(o);return e.nearbyUnits(r,i.outer,[...Ly]).forEach(({unit:o})=>a.add(o.owner().smallID())),a}class Q9{constructor(e,r){this.p1=e,this.p2=r,this.dx=Math.abs(r.x-e.x),this.dy=Math.abs(r.y-e.y),this.sx=e.x<r.x?1:-1,this.sy=e.y<r.y?1:-1,this.error=this.dx-this.dy}size(){return Math.max(this.dx,this.dy)+1}increment(){if(this.p1.x===this.p2.x&&this.p1.y===this.p2.y)return!0;const e=this.p1.x,r=this.p1.y,i=2*this.error;return i>-this.dy&&(this.error-=this.dy,this.p1.x+=this.sx),i<this.dx&&(this.error+=this.dx,this.p1.y+=this.sy),{x:e,y:r}}}class J9{constructor(e,r,i,n){this.p0=e,this.p1=r,this.p2=i,this.p3=n}getPointAt(e){const r=1-e,i=r*r,n=i*r,a=e*e,s=a*e,o=n*this.p0.x+3*i*e*this.p1.x+3*r*a*this.p2.x+s*this.p3.x,l=n*this.p0.y+3*i*e*this.p1.y+3*r*a*this.p2.y+s*this.p3.y;return{x:o,y:l}}}class e$ extends J9{constructor(e,r,i,n,a){super(e,r,i,n),this.totalDistance=0,this.cachedPoints=[],this.currentIndex=0,this.computeAllPoints(a,.002)}getAllPoints(){return this.cachedPoints}increment(e){for(this.totalDistance+=e;this.currentIndex<this.cachedPoints.length-1&&this.getDistanceUpToIndex(this.currentIndex+1)<this.totalDistance;)this.currentIndex++;return this.currentIndex>=this.cachedPoints.length-1?null:this.cachedPoints[this.currentIndex]}getCurrentIndex(){return this.currentIndex}computeAllPoints(e,r){this.cachedPoints=[],this.totalDistance=0,this.currentIndex=0;let i=0,n=this.getPointAt(i);this.cachedPoints.push(n);let a=0;for(;i<1;){i=Math.min(i+r,1);const o=this.getPointAt(i),l=o.x-n.x,c=o.y-n.y,u=Math.sqrt(l*l+c*c);a+=u,a>=e&&(this.cachedPoints.push(o),a=0),n=o}const s=this.getPointAt(1);(this.cachedPoints.length===0||s.x!==this.cachedPoints[this.cachedPoints.length-1].x||s.y!==this.cachedPoints[this.cachedPoints.length-1].y)&&this.cachedPoints.push(s)}getDistanceUpToIndex(e){let r=0;for(let i=1;i<=e;i++){const n=this.cachedPoints[i-1],a=this.cachedPoints[i],s=a.x-n.x,o=a.y-n.y;r+=Math.sqrt(s*s+o*o)}return r}}var G0=(t=>(t[t.NEXT=0]="NEXT",t[t.PENDING=1]="PENDING",t[t.COMPLETE=2]="COMPLETE",t[t.NOT_FOUND=3]="NOT_FOUND",t))(G0||{});const t$=50;class r${constructor(e,r){this.gameMap=e,this.options=r,this.curve=null,this.lastTo=null}createCurve(e,r){const i=this.options?.increment??3,n=this.options?.distanceBasedHeight??!0,a=this.options?.directionUp??!0,s={x:this.gameMap.x(e),y:this.gameMap.y(e)},o={x:this.gameMap.x(r),y:this.gameMap.y(r)},l=o.x-s.x,c=o.y-s.y,u=Math.sqrt(l*l+c*c),p=n?Math.max(u/3,t$):0,d=a?-1:1,h=this.gameMap.height(),g={x:s.x+l/4,y:Nr(s.y+c/4+d*p,0,h-1)},y={x:s.x+l*3/4,y:Nr(s.y+c*3/4+d*p,0,h-1)};return new e$(s,g,y,o,i)}findPath(e,r){if(Array.isArray(e))throw new Error("ParabolaUniversalPathFinder does not support multiple start points");return this.createCurve(e,r).getAllPoints().map(n=>this.gameMap.ref(Math.floor(n.x),Math.floor(n.y)))}next(e,r,i){this.lastTo!==r&&(this.curve=this.createCurve(e,r),this.lastTo=r);const n=this.curve.increment(i??1);if(!n)return{status:G0.COMPLETE,node:r};const a=this.gameMap.ref(Math.floor(n.x),Math.floor(n.y));return{status:G0.NEXT,node:a}}invalidate(){this.curve=null,this.lastTo=null}currentIndex(){return this.curve?.getCurrentIndex()??0}}class i${static Parabola(e,r){return new r$(e,r)}}class n${constructor(e,r,i,n){this.game=e,this.eventBus=r,this.transformHandler=i,this.uiState=n,this.mousePos={x:0,y:0},this.trajectoryPoints=[],this.untargetableSegmentBounds=[-1,-1],this.targetedIndex=-1,this.lastTrajectoryUpdate=0,this.lastTargetTile=null,this.currentGhostStructure=null,this.cachedSpawnTile=null}shouldTransform(){return!0}init(){this.eventBus.on(Vo,e=>{this.mousePos.x=e.x,this.mousePos.y=e.y}),this.eventBus.on(_o,e=>{this.currentGhostStructure=e.ghostStructure,e.ghostStructure!==C.AtomBomb&&e.ghostStructure!==C.HydrogenBomb&&(this.trajectoryPoints=[],this.lastTargetTile=null,this.cachedSpawnTile=null)}),this.eventBus.on(Ec,e=>{this.uiState.rocketDirectionUp=e.rocketDirectionUp,this.lastTargetTile=null})}tick(){this.updateTrajectoryPreview()}renderLayer(e){this.updateTrajectoryPath(),this.drawTrajectoryPreview(e)}updateTrajectoryPreview(){const e=this.currentGhostStructure;if(!(e===C.AtomBomb||e===C.HydrogenBomb)){this.cachedSpawnTile=null;return}const i=performance.now();if(i-this.lastTrajectoryUpdate<50)return;this.lastTrajectoryUpdate=i;const n=this.game.myPlayer();if(!n){this.trajectoryPoints=[],this.lastTargetTile=null,this.cachedSpawnTile=null;return}const a=this.transformHandler.boundingRect();if(!a){this.trajectoryPoints=[],this.cachedSpawnTile=null;return}const s=this.mousePos.x-a.left,o=this.mousePos.y-a.top,l=this.transformHandler.screenToWorldCoordinates(s,o);if(!this.game.isValidCoord(l.x,l.y)){this.trajectoryPoints=[],this.lastTargetTile=null,this.cachedSpawnTile=null;return}const c=this.game.ref(l.x,l.y);this.lastTargetTile!==c&&(this.lastTargetTile=c,n.actions(c).then(u=>{if(this.lastTargetTile!==c)return;const p=u.buildableUnits.find(h=>h.type===e);if(!p||p.canBuild===!1){this.cachedSpawnTile=null;return}const d=p.canBuild;if(!d){this.cachedSpawnTile=null;return}this.cachedSpawnTile=d}).catch(()=>{this.cachedSpawnTile=null}))}updateTrajectoryPath(){const e=this.currentGhostStructure;if(!(e===C.AtomBomb||e===C.HydrogenBomb)||!this.cachedSpawnTile){this.trajectoryPoints=[];return}if(!this.game.myPlayer()){this.trajectoryPoints=[];return}const n=this.transformHandler.boundingRect();if(!n){this.trajectoryPoints=[];return}const a=this.mousePos.x-n.left,s=this.mousePos.y-n.top,o=this.transformHandler.screenToWorldCoordinates(a,s);if(!this.game.isValidCoord(o.x,o.y)){this.trajectoryPoints=[];return}const l=this.game.ref(o.x,o.y),c=this.game.config().defaultNukeSpeed(),u=i$.Parabola(this.game,{increment:c,distanceBasedHeight:!0,directionUp:this.uiState.rocketDirectionUp});this.trajectoryPoints=u.findPath(this.cachedSpawnTile,l)??[];const p=this.game.config().defaultNukeTargetableRange()**2;this.untargetableSegmentBounds=[-1,-1];for(let h=0;h<this.trajectoryPoints.length;h++){const g=this.trajectoryPoints[h];if(this.untargetableSegmentBounds[0]===-1){if(this.game.euclideanDistSquared(g,this.cachedSpawnTile)>p){if(this.game.euclideanDistSquared(g,l)<p)break;this.untargetableSegmentBounds[0]=h}}else if(this.game.euclideanDistSquared(g,l)<p){this.untargetableSegmentBounds[1]=h;break}}const d=Z9({game:this.game,targetTile:l,magnitude:this.game.config().nukeMagnitudes(e),allySmallIds:new Set(this.game.myPlayer()?.allies().map(h=>h.smallID())),threshold:this.game.config().nukeAllianceBreakThreshold()});this.targetedIndex=this.trajectoryPoints.length;for(let h=0;h<this.trajectoryPoints.length;h++){const g=this.trajectoryPoints[h];for(const y of this.game.nearbyUnits(g,this.game.config().maxSamRange(),C.SAMLauncher))if(!(y.unit.owner().isMe()||this.game.myPlayer()?.isFriendly(y.unit.owner())&&!d.has(y.unit.owner().smallID()))&&y.distSquared<=this.game.config().samRange(y.unit.level())**2){this.targetedIndex=h;break}if(this.targetedIndex!==this.trajectoryPoints.length)break;h===this.untargetableSegmentBounds[0]&&(h=this.untargetableSegmentBounds[1]-1)}}drawTrajectoryPreview(e){const r=this.currentGhostStructure;if(!(r===C.AtomBomb||r===C.HydrogenBomb)||this.trajectoryPoints.length===0||!this.game.myPlayer())return;const a="rgba(140, 140, 140, 1)",s="rgba(150, 90, 90, 1)",o="rgba(0, 0, 0, 1)",l="rgba(255, 0, 0, 1)",c="rgba(255, 255, 255, 1)",u="rgba(255, 255, 255, 1)",p="rgba(255, 80, 80, 1)",d="rgba(255, 80, 80, 1)",h=1.5,g=1.25,y=2,x=6,m=[2,6],k=[8,4],S=[2,6],_=[8,4],w=(D,j)=>[D[0]+j,Math.max(D[1]-j,0)];let A=a,T=u,I=k,O=g;const B=()=>{e.lineWidth=O+h,e.setLineDash(w(I,h)),e.lineDashOffset=h/2,e.strokeStyle=A,e.stroke(),e.lineWidth=O,e.setLineDash(I),e.lineDashOffset=0,e.strokeStyle=T,e.stroke()},E=(D,j)=>{e.beginPath(),e.arc(D,j,4,0,2*Math.PI,!1),A=a,T=u,I=[1,0],B()},$=(D,j)=>{e.beginPath(),e.moveTo(D-x,j-x),e.lineTo(D+x,j+x),e.moveTo(D-x,j+x),e.lineTo(D+x,j-x),A=o,T=l,I=[1,0],O=y,B()},R=-this.game.width()/2,N=-this.game.height()/2;e.save(),e.beginPath();for(let D=0;D<this.trajectoryPoints.length;D++){const j=this.trajectoryPoints[D],ee=this.game.x(j)+R,oe=this.game.y(j)+N;D===0?e.moveTo(ee,oe):e.lineTo(ee,oe),D===this.untargetableSegmentBounds[0]?(B(),E(ee,oe),e.beginPath(),D>=this.targetedIndex?(A=s,T=p,I=S):(A=a,T=c,I=m)):D===this.untargetableSegmentBounds[1]&&(B(),E(ee,oe),e.beginPath(),D>=this.targetedIndex?(A=s,T=d,I=_):(A=a,T=u,I=k)),D===this.targetedIndex&&(B(),$(ee,oe),e.beginPath(),A=s,T=d,I=_,O=g)}B(),e.restore()}}var a$=Object.defineProperty,s$=Object.getOwnPropertyDescriptor,$t=(t,e,r,i)=>{for(var n=i>1?void 0:i?s$(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&a$(e,r,n),n};let ct=class extends V{constructor(){super(),this.currentFPS=0,this.averageFPS=0,this.frameTime=0,this.tickExecutionAvg=0,this.tickExecutionMax=0,this.tickDelayAvg=0,this.tickDelayMax=0,this.isVisible=!1,this.isDragging=!1,this.position={x:50,y:20},this.copyStatus="idle",this.frameCount=0,this.lastTime=0,this.frameTimes=[],this.fpsHistory=[],this.lastSecondTime=0,this.framesThisSecond=0,this.dragStart={x:0,y:0},this.tickExecutionTimes=[],this.tickDelayTimes=[],this.copyStatusTimeoutId=null,this.layerStats=new Map,this.layerBreakdown=[],this.handleMouseDown=t=>{const e=t.target;e.classList.contains("close-button")||e.classList.contains("reset-button")||e.classList.contains("copy-json-button")||(this.isDragging=!0,this.dragStart={x:t.clientX-this.position.x,y:t.clientY-this.position.y},document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp),t.preventDefault())},this.handleMouseMove=t=>{if(!this.isDragging)return;const e=t.clientX-this.dragStart.x,r=t.clientY-this.dragStart.y,i=window.innerWidth,n=window.innerHeight;this.position={x:Math.max(0,Math.min(i-100,e)),y:Math.max(0,Math.min(n-100,r))},this.requestUpdate()},this.handleMouseUp=()=>{this.isDragging=!1,document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp)},this.handleReset=()=>{this.frameCount=0,this.lastTime=0,this.frameTimes=[],this.fpsHistory=[],this.lastSecondTime=0,this.framesThisSecond=0,this.currentFPS=0,this.averageFPS=0,this.frameTime=0,this.tickExecutionTimes=[],this.tickDelayTimes=[],this.tickExecutionAvg=0,this.tickExecutionMax=0,this.tickDelayAvg=0,this.tickDelayMax=0,this.layerStats.clear(),this.layerBreakdown=[],this.requestUpdate()}}init(){this.eventBus.on(I2,()=>{this.userSettings.togglePerformanceOverlay(),this.setVisible(this.userSettings.performanceOverlay())}),this.eventBus.on(B2,t=>{this.updateTickMetrics(t.tickExecutionDuration,t.tickDelay)})}setVisible(t){this.isVisible=t,xt.setEnabled(t)}handleClose(){this.userSettings.togglePerformanceOverlay()}updateFrameMetrics(t,e){const r=this.isVisible;if(this.isVisible=this.userSettings.performanceOverlay(),r!==this.isVisible&&xt.setEnabled(this.isVisible),!this.isVisible)return;const i=performance.now();if(this.lastTime===0){this.lastTime=i,this.lastSecondTime=i;return}const n=i-this.lastTime;if(this.frameTimes.push(n),this.frameTimes.length>60&&this.frameTimes.shift(),this.frameTimes.length>0){const a=this.frameTimes.reduce((s,o)=>s+o,0)/this.frameTimes.length;this.currentFPS=Math.round(1e3/a),this.frameTime=Math.round(a)}this.framesThisSecond++,i-this.lastSecondTime>=1e3&&(this.fpsHistory.push(this.framesThisSecond),this.fpsHistory.length>60&&this.fpsHistory.shift(),this.fpsHistory.length>0&&(this.averageFPS=Math.round(this.fpsHistory.reduce((a,s)=>a+s,0)/this.fpsHistory.length)),this.framesThisSecond=0,this.lastSecondTime=i),this.lastTime=i,this.frameCount++,e&&this.updateLayerStats(e),this.requestUpdate()}updateLayerStats(t){Object.entries(t).forEach(([i,n])=>{const a=this.layerStats.get(i);if(!a)this.layerStats.set(i,{avg:n,max:n,last:n,total:n});else{const s=a.avg+.2*(n-a.avg),o=Math.max(a.max,n),l=a.total+n;this.layerStats.set(i,{avg:s,max:o,last:n,total:l})}});const r=Array.from(this.layerStats.entries()).map(([i,n])=>({name:i,avg:n.avg,max:n.max,total:n.total})).sort((i,n)=>n.total-i.total);this.layerBreakdown=r}updateTickMetrics(t,e){if(!(!this.isVisible||!this.userSettings.performanceOverlay())){if(t!==void 0&&(this.tickExecutionTimes.push(t),this.tickExecutionTimes.length>60&&this.tickExecutionTimes.shift(),this.tickExecutionTimes.length>0)){const r=this.tickExecutionTimes.reduce((i,n)=>i+n,0)/this.tickExecutionTimes.length;this.tickExecutionAvg=Math.round(r*100)/100,this.tickExecutionMax=Math.round(Math.max(...this.tickExecutionTimes))}if(e!==void 0&&(this.tickDelayTimes.push(e),this.tickDelayTimes.length>60&&this.tickDelayTimes.shift(),this.tickDelayTimes.length>0)){const r=this.tickDelayTimes.reduce((i,n)=>i+n,0)/this.tickDelayTimes.length;this.tickDelayAvg=Math.round(r*100)/100,this.tickDelayMax=Math.round(Math.max(...this.tickDelayTimes))}this.requestUpdate()}}shouldTransform(){return!1}getPerformanceColor(t){return t>=55?"performance-good":t>=30?"performance-warning":"performance-bad"}buildPerformanceSnapshot(){return{timestamp:new Date().toISOString(),fps:{current:this.currentFPS,average60s:this.averageFPS,frameTimeMs:this.frameTime,history:[...this.fpsHistory]},ticks:{executionAvgMs:this.tickExecutionAvg,executionMaxMs:this.tickExecutionMax,delayAvgMs:this.tickDelayAvg,delayMaxMs:this.tickDelayMax,executionSamples:[...this.tickExecutionTimes],delaySamples:[...this.tickDelayTimes]},layers:this.layerBreakdown.map(t=>({...t}))}}clearCopyStatusTimeout(){this.copyStatusTimeoutId!==null&&(clearTimeout(this.copyStatusTimeoutId),this.copyStatusTimeoutId=null)}scheduleCopyStatusReset(){this.clearCopyStatusTimeout(),this.copyStatusTimeoutId=setTimeout(()=>{this.copyStatus="idle",this.copyStatusTimeoutId=null,this.requestUpdate()},2e3)}async handleCopyJson(){const t=this.buildPerformanceSnapshot(),e=JSON.stringify(t,null,2);try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(e);else{const r=document.createElement("textarea");r.value=e,r.style.position="fixed",r.style.left="-9999px",document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r)}this.copyStatus="success"}catch(r){console.warn("Failed to copy performance snapshot",r),this.copyStatus="error"}this.scheduleCopyStatusReset()}render(){if(!this.isVisible)return v``;const t=this.copyStatus==="success"?f("performance_overlay.copied"):this.copyStatus==="error"?f("performance_overlay.failed_copy"):f("performance_overlay.copy_clipboard"),e=this.layerBreakdown.length>0?Math.max(...this.layerBreakdown.map(r=>r.avg)):1;return v`
      <div
        class="performance-overlay ${this.isDragging?"dragging":""}"
        style="--left: ${this.position.x}px; --top: ${this.position.y}px; --transform: none;"
        @mousedown="${this.handleMouseDown}"
      >
        <button class="reset-button" @click="${this.handleReset}">
          ${f("performance_overlay.reset")}
        </button>
        <button
          class="copy-json-button"
          @click="${this.handleCopyJson}"
          title="${f("performance_overlay.copy_json_title")}"
        >
          ${t}
        </button>
        <button class="close-button" @click="${this.handleClose}">×</button>
        <div class="performance-line">
          ${f("performance_overlay.fps")}
          <span class="${this.getPerformanceColor(this.currentFPS)}"
            >${this.currentFPS}</span
          >
        </div>
        <div class="performance-line">
          ${f("performance_overlay.avg_60s")}
          <span class="${this.getPerformanceColor(this.averageFPS)}"
            >${this.averageFPS}</span
          >
        </div>
        <div class="performance-line">
          ${f("performance_overlay.frame")}
          <span class="${this.getPerformanceColor(1e3/this.frameTime)}"
            >${this.frameTime}ms</span
          >
        </div>
        <div class="performance-line">
          ${f("performance_overlay.tick_exec")}
          <span>${this.tickExecutionAvg.toFixed(2)}ms</span>
          (max: <span>${this.tickExecutionMax}ms</span>)
        </div>
        <div class="performance-line">
          ${f("performance_overlay.tick_delay")}
          <span>${this.tickDelayAvg.toFixed(2)}ms</span>
          (max: <span>${this.tickDelayMax}ms</span>)
        </div>
        ${this.layerBreakdown.length?v`<div class="layers-section">
              <div class="performance-line">
                ${f("performance_overlay.layers_header")}
              </div>
              ${this.layerBreakdown.map(r=>{const i=Math.min(100,r.avg/e*100||0);return v`<div class="layer-row">
                  <span class="layer-name" title=${r.name}
                    >${r.name}
                  </span>
                  <div class="layer-bar">
                    <div
                      class="layer-bar-fill"
                      style="--width: ${i}%;"
                    ></div>
                  </div>
                  <span class="layer-metrics">
                    ${r.avg.toFixed(2)} / ${r.max.toFixed(2)}ms
                  </span>
                </div>`})}
            </div>`:v``}
      </div>
    `}};ct.styles=pu`
    .performance-overlay {
      position: fixed;
      top: var(--top, 20px);
      left: var(--left, 50%);
      transform: var(--transform, translateX(-50%));
      background: rgba(0, 0, 0, 0.8);
      color: white;
      padding: 8px 16px;
      border-radius: 4px;
      font-family: monospace;
      font-size: 12px;
      z-index: 9999;
      user-select: none;
      cursor: move;
      transition: none;
      min-width: 420px;
    }

    .performance-overlay.dragging {
      cursor: grabbing;
      transition: none;
      opacity: 0.5;
    }

    .performance-line {
      margin: 2px 0;
    }

    .performance-good {
      color: #4ade80; /* green-400 */
    }

    .performance-warning {
      color: #fbbf24; /* amber-400 */
    }

    .performance-bad {
      color: #f87171; /* red-400 */
    }

    .close-button {
      position: absolute;
      top: 8px;
      right: 8px;
      width: 20px;
      height: 20px;
      background-color: rgba(0, 0, 0, 0.8);
      border-radius: 4px;
      color: white;
      font-size: 14px;
      font-weight: bold;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      line-height: 1;
      user-select: none;
      pointer-events: auto;
    }

    .reset-button {
      position: absolute;
      top: 8px;
      left: 8px;
      height: 20px;
      padding: 0 6px;
      background-color: rgba(0, 0, 0, 0.8);
      border-radius: 4px;
      color: white;
      font-size: 10px;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      line-height: 1;
      user-select: none;
      pointer-events: auto;
    }

    .copy-json-button {
      position: absolute;
      top: 8px;
      left: 70px;
      height: 20px;
      padding: 0 6px;
      background-color: rgba(0, 0, 0, 0.8);
      border-radius: 4px;
      color: white;
      font-size: 10px;
      border: none;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      line-height: 1;
      user-select: none;
      pointer-events: auto;
    }

    .layers-section {
      margin-top: 4px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      padding-top: 4px;
    }

    .layer-row {
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 11px;
      margin-top: 2px;
    }

    .layer-name {
      flex: 0 0 280px;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .layer-bar {
      flex: 1;
      height: 6px;
      background: rgba(148, 163, 184, 0.25);
      border-radius: 3px;
      overflow: hidden;
    }

    .layer-bar-fill {
      height: 100%;
      width: var(--width);
      background: #38bdf8;
      border-radius: 3px;
    }

    .layer-metrics {
      flex: 0 0 auto;
      white-space: nowrap;
    }
  `;$t([L({type:Object})],ct.prototype,"eventBus",2);$t([L({type:Object})],ct.prototype,"userSettings",2);$t([M()],ct.prototype,"currentFPS",2);$t([M()],ct.prototype,"averageFPS",2);$t([M()],ct.prototype,"frameTime",2);$t([M()],ct.prototype,"tickExecutionAvg",2);$t([M()],ct.prototype,"tickExecutionMax",2);$t([M()],ct.prototype,"tickDelayAvg",2);$t([M()],ct.prototype,"tickDelayMax",2);$t([M()],ct.prototype,"isVisible",2);$t([M()],ct.prototype,"isDragging",2);$t([M()],ct.prototype,"position",2);$t([M()],ct.prototype,"copyStatus",2);$t([M()],ct.prototype,"layerBreakdown",2);ct=$t([F("performance-overlay")],ct);const so=(t,e)=>{const r=t._$AN;if(r===void 0)return!1;for(const i of r)i._$AO?.(e,!1),so(i,e);return!0},Fc=t=>{let e,r;do{if((e=t._$AM)===void 0)break;r=e._$AN,r.delete(t),t=e}while(r?.size===0)},Vx=t=>{for(let e;e=t._$AM;t=e){let r=e._$AN;if(r===void 0)e._$AN=r=new Set;else if(r.has(t))break;r.add(t),c$(e)}};function o$(t){this._$AN!==void 0?(Fc(this),this._$AM=t,Vx(this)):this._$AM=t}function l$(t,e=!1,r=0){const i=this._$AH,n=this._$AN;if(n!==void 0&&n.size!==0)if(e)if(Array.isArray(i))for(let a=r;a<i.length;a++)so(i[a],!1),Fc(i[a]);else i!=null&&(so(i,!1),Fc(i));else so(this,t)}const c$=t=>{t.type==Wo.CHILD&&(t._$AP??=l$,t._$AQ??=o$)};let Wx=class extends _u{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,r,i){super._$AT(e,r,i),Vx(this),this.isConnected=e._$AU}_$AO(e,r=!0){e!==this.isConnected&&(this.isConnected=e,e?this.reconnected?.():this.disconnected?.()),r&&(so(this,e),Fc(this))}setValue(e){if(uT(this._$Ct))this._$Ct._$AI(e,this);else{const r=[...this._$Ct._$AH];r[this._$Ci]=e,this._$Ct._$AI(r,this,0)}}disconnected(){}reconnected(){}};const Yd=new WeakMap,u$=Ko(class extends Wx{render(t){return Ie}update(t,[e]){const r=e!==this.G;return r&&this.G!==void 0&&this.rt(void 0),(r||this.lt!==this.ct)&&(this.G=e,this.ht=t.options?.host,this.rt(this.ct=t.element)),Ie}rt(t){if(this.isConnected||(t=void 0),typeof this.G=="function"){const e=this.ht??globalThis;let r=Yd.get(e);r===void 0&&(r=new WeakMap,Yd.set(e,r)),r.get(this.G)!==void 0&&this.G.call(this.ht,void 0),r.set(this.G,t),t!==void 0&&this.G.call(this.ht,t)}else this.G.value=t}get lt(){return typeof this.G=="function"?Yd.get(this.ht??globalThis)?.get(this.G):this.G?.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}});var d$=Object.defineProperty,h$=Object.getOwnPropertyDescriptor,Vi=(t,e,r,i)=>{for(var n=i>1?void 0:i?h$(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&d$(e,r,n),n};function V0(t,e,r){const i=r.x(e),n=r.y(e),a=t.x-i,s=t.y-n;return Math.sqrt(a*a+s*s)}function p$(t,e){return(r,i)=>{const n=V0(t,r.tile(),e),a=V0(t,i.tile(),e);return n-a}}let qr=class extends V{constructor(){super(...arguments),this.player=null,this.playerProfile=null,this.unit=null,this._isInfoVisible=!1,this._isActive=!1,this.lastMouseUpdate=0}init(){this.eventBus.on(Vo,t=>this.onMouseEvent(t)),this.eventBus.on(Na,t=>this.maybeShow(t.x,t.y)),this.eventBus.on(q0,()=>this.hide()),this._isActive=!0}onMouseEvent(t){const e=Date.now();e-this.lastMouseUpdate<100||(this.lastMouseUpdate=e,this.maybeShow(t.x,t.y))}hide(){this.setVisible(!1),this.unit=null,this.player=null}maybeShow(t,e){this.hide();const r=this.transform.screenToWorldCoordinates(t,e);if(!this.game.isValidCoord(r.x,r.y))return;const i=this.game.ref(r.x,r.y);if(!i)return;const n=this.game.owner(i);if(n&&n.isPlayer())this.player=n,this.player.profile().then(a=>{this.playerProfile=a}),this.setVisible(!0);else if(!this.game.isLand(i)){const a=this.game.units(C.Warship,C.TradeShip,C.TransportShip).filter(s=>V0(r,s.tile(),this.game)<50).sort(p$(r,this.game));a.length>0&&(this.unit=a[0],this.setVisible(!0))}}tick(){this.requestUpdate()}renderLayer(t){}shouldTransform(){return!1}setVisible(t){this._isInfoVisible=t,this.requestUpdate()}getRelationClass(t){switch(t){case st.Hostile:return"text-red-500";case st.Distrustful:return"text-red-300";case st.Neutral:return"text-white";case st.Friendly:return"text-green-500";default:return"text-white"}}getRelationName(t){switch(t){case st.Hostile:return f("relation.hostile");case st.Distrustful:return f("relation.distrustful");case st.Neutral:return f("relation.neutral");case st.Friendly:return f("relation.friendly");default:return f("relation.default")}}displayUnitCount(t,e,r){return this.game.config().isUnitDisabled(e)?"":v`<div
          class="flex items-center justify-center gap-0.5 lg:gap-1 p-0.5 lg:p-1 border rounded-md border-gray-500 text-[10px] lg:text-xs w-9 lg:w-12 h-6 lg:h-7"
          translate="no"
        >
          <img
            src=${r}
            class="w-3 h-3 lg:w-4 lg:h-4 object-contain shrink-0"
          />
          <span>${t.totalUnitLevels(e)}</span>
        </div>`}allianceExpirationText(t){const{expiresAt:e}=t,r=e-this.game.ticks();let i=0;return r>0&&(i=Math.max(0,Math.floor(r/10))),Oa(i)}renderPlayerNameIcons(t){const e=qx(this.game),r=jx({game:this.game,player:t,includeAllianceIcon:!1,firstPlace:e});return r.length===0?v``:v`<span class="flex items-center gap-1 ml-1 shrink-0">
      ${r.map(i=>i.kind==="emoji"&&i.text?v`<span class="text-sm shrink-0" translate="no"
              >${i.text}</span
            >`:i.kind==="image"&&i.src?v`<img src=${i.src} alt="" class="w-4 h-4 shrink-0" />`:v``)}
    </span>`}renderPlayerInfo(t){const e=this.game.myPlayer(),r=e?.isFriendly(t),i=e?.isAlliedWith(t);let n=null;const a=this.game.config().maxTroops(t),s=t.outgoingAttacks().map(c=>c.troops).reduce((c,u)=>c+u,0),o=t.troops();if(i){const c=e?.alliances().find(u=>u.other===t.id());c!==void 0&&(n=v` <div
          class="flex flex-col items-center ml-auto mr-0 text-sm font-bold leading-tight"
        >
          <img src=${Sf} width="20" height="20" />
          ${this.allianceExpirationText(c)}
        </div>`)}let l="";switch(t.type()){case ge.Bot:l=f("player_type.bot");break;case ge.Nation:l=f("player_type.nation");break;case ge.Human:l=f("player_type.player");break}return v`
      <div class="flex items-start gap-2 lg:gap-3 p-1.5 lg:p-2">
        <!-- Left: Gold & Troop bar -->
        <div class="flex flex-col gap-1 shrink-0 w-28">
          <div
            class="flex items-center justify-center p-1 border rounded-md border-yellow-400 font-bold text-yellow-400 text-xs w-28 lg:gap-1"
            translate="no"
          >
            <img src=${Au} width="13" height="13" />
            <span class="px-0.5">${ce(t.gold())}</span>
          </div>
          <div class="w-28" translate="no">
            ${this.renderTroopBar(o,s,a)}
          </div>
        </div>
        <!-- Right: Player identity + Units below -->
        <div class="flex flex-col justify-between self-stretch">
          <div
            class="flex items-center gap-2 font-bold text-sm lg:text-lg ${r?"text-green-500":"text-white"}"
          >
            ${t.cosmetics.flag?t.cosmetics.flag.startsWith("!")?v`<div
                    class="h-6 aspect-3/4 player-flag"
                    ${u$(c=>{c instanceof HTMLElement&&requestAnimationFrame(()=>{kf(t.cosmetics.flag,c)})})}
                  ></div>`:v`<img
                    class="h-6 aspect-3/4"
                    src=${"/flags/"+t.cosmetics.flag+".svg"}
                  />`:v``}
            <span>${t.name()}</span>
            ${t.team()!==null&&t.type()!==ge.Bot?v`<div class="flex flex-col leading-tight">
                  <span class="text-gray-400 text-xs font-normal"
                    >${l}</span
                  >
                  <span class="text-xs font-normal text-gray-400"
                    >[<span
                      style="color: ${this.game.config().theme().teamColor(t.team()).toHex()}"
                      >${t.team()}</span
                    >]</span
                  >
                </div>`:v`<span class="text-gray-400 text-xs font-normal"
                  >${l}</span
                >`}
            ${this.renderPlayerNameIcons(t)} ${n??""}
          </div>
          <div class="flex gap-0.5 lg:gap-1 items-center mt-1">
            ${this.displayUnitCount(t,C.City,Su)}
            ${this.displayUnitCount(t,C.Factory,cf)}
            ${this.displayUnitCount(t,C.Port,df)}
            ${this.displayUnitCount(t,C.MissileSilo,uf)}
            ${this.displayUnitCount(t,C.SAMLauncher,hf)}
            ${this.displayUnitCount(t,C.Warship,lf)}
          </div>
        </div>
      </div>
    `}renderTroopBar(t,e,r){const i=Math.max(r,1),n=t/i*100,a=e/i*100,s=Math.max(0,Math.min(100,n)),o=Math.max(0,Math.min(100-s,a));return v`
      <div
        class="w-full mt-1 lg:mt-2 h-5 lg:h-6 border border-gray-600 rounded-md bg-gray-900/60 overflow-hidden relative"
      >
        <div class="h-full flex">
          ${s>0?v`<div
                class="h-full bg-green-500 transition-[width] duration-200"
                style="width: ${s}%;"
              ></div>`:""}
          ${o>0?v`<div
                class="h-full bg-orange-400 transition-[width] duration-200"
                style="width: ${o}%;"
              ></div>`:""}
        </div>
        <div
          class="absolute inset-0 flex items-center justify-between px-1.5 text-xs font-bold leading-none pointer-events-none"
          translate="no"
        >
          <span class="text-white drop-shadow-[0_1px_1px_rgba(0,0,0,0.8)]"
            >${Je(t)}</span
          >
          <span class="text-white drop-shadow-[0_1px_1px_rgba(0,0,0,0.8)]"
            >${Je(r)}</span
          >
        </div>
        <img
          src=${rx}
          alt=""
          aria-hidden="true"
          width="14"
          height="14"
          class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 brightness-0 invert drop-shadow-[0_1px_1px_rgba(0,0,0,0.8)] pointer-events-none"
        />
      </div>
    `}renderUnitInfo(t){const e=(t.owner()===this.game.myPlayer()||this.game.myPlayer()?.isFriendly(t.owner()))??!1;return v`
      <div class="p-2">
        <div class="font-bold mb-1 ${e?"text-green-500":"text-white"}">
          ${t.owner().name()}
        </div>
        <div class="mt-1">
          <div class="text-sm opacity-80">${t.type()}</div>
          ${t.hasHealth()?v` <div class="text-sm">Health: ${t.health()}</div> `:""}
          ${t.type()===C.TransportShip?v`
                <div class="text-sm">
                  Troops: ${Je(t.troops())}
                </div>
              `:""}
        </div>
      </div>
    `}render(){if(!this._isActive)return v``;const t=this._isInfoVisible?"opacity-100 visible":"opacity-0 invisible pointer-events-none";return v`
      <div
        class="fixed top-0 lg:top-4 left-0 right-0 sm:left-1/2 sm:right-auto sm:-translate-x-1/2 z-[1001]"
        @contextmenu=${e=>e.preventDefault()}
      >
        <div
          class="bg-gray-800/70 backdrop-blur-xs shadow-xs lg:rounded-lg shadow-lg transition-all duration-300 text-white text-lg lg:text-base w-full sm:w-auto sm:min-w-[400px] overflow-hidden ${t}"
        >
          ${this.player!==null?this.renderPlayerInfo(this.player):""}
          ${this.unit!==null?this.renderUnitInfo(this.unit):""}
        </div>
      </div>
    `}createRenderRoot(){return this}};Vi([L({type:Object})],qr.prototype,"game",2);Vi([L({type:Object})],qr.prototype,"eventBus",2);Vi([L({type:Object})],qr.prototype,"transform",2);Vi([M()],qr.prototype,"player",2);Vi([M()],qr.prototype,"playerProfile",2);Vi([M()],qr.prototype,"unit",2);Vi([M()],qr.prototype,"_isInfoVisible",2);qr=Vi([F("player-info-overlay")],qr);const f$="h-5 w-5 shrink-0 transition-transform group-hover:scale-110 text-zinc-400",g$="text-base sm:text-[14px] leading-5 font-semibold tracking-tight",m$=()=>{const t="group w-full min-w-[50px] select-none flex flex-col items-center justify-center gap-1 rounded-lg py-1.5 border border-white/10 bg-white/4 shadow-xs transition-all duration-150 focus-visible:outline-hidden focus-visible:ring-2 focus-visible:ring-white/20 active:translate-y-[1px]";return{normal:`${t} text-white/90 hover:bg-white/10 hover:text-white`,red:`${t} text-red-400 hover:bg-red-500/10 hover:text-red-300 focus-visible:ring-red-400/30`,green:`${t} text-emerald-400 hover:bg-emerald-500/10 hover:text-emerald-300 focus-visible:ring-emerald-400/30`,yellow:`${t} text-[#f59e0b] hover:bg-[#f59e0b]/10 hover:text-[#fbbf24] focus-visible:ring-[#f59e0b]/30`,indigo:`${t} text-indigo-400 hover:bg-indigo-500/10 hover:text-indigo-300 focus-visible:ring-indigo-400/30`,sky:`${t} text-[#38bdf8] hover:bg-[#38bdf8]/10 hover:text-[#0ea5e9] focus-visible:ring-[#38bdf8]/30`}},Xt=t=>{const{onClick:e,type:r="normal",icon:i,iconAlt:n,title:a,label:s,disabled:o=!1}=t,c=m$()[r];return v`
    <button
      @click=${e}
      class="${c}"
      title="${a}"
      type="button"
      aria-label="${a}"
      ?disabled=${o}
    >
      <img src=${i} alt=${n} aria-hidden="true" class="${f$}" />
      <span class="${g$}">${s}</span>
    </button>
  `};var b$=Object.defineProperty,v$=Object.getOwnPropertyDescriptor,Af=(t,e,r,i)=>{for(var n=i>1?void 0:i?v$(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&b$(e,r,n),n};let qc=class extends V{constructor(){super(...arguments),this.spacing="md",this.color="bg-zinc-700/80"}createRenderRoot(){return this}render(){const t={sm:"my-0.5",md:"my-1",lg:"my-2"},e=t[this.spacing]??t.md,r=this.color||"bg-zinc-700/80";return v`<div
      role="separator"
      aria-hidden="true"
      class="${e} h-px ${r}"
    ></div>`}};Af([L({type:String})],qc.prototype,"spacing",2);Af([L({type:String})],qc.prototype,"color",2);qc=Af([F("ui-divider")],qc);var y$=Object.defineProperty,w$=Object.getOwnPropertyDescriptor,ns=(t,e,r,i)=>{for(var n=i>1?void 0:i?w$(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&y$(e,r,n),n};let Un=class extends V{constructor(){super(...arguments),this.eventBus=null,this.myPlayer=null,this.target=null,this.open=!1,this.alreadyKicked=!1,this.handleKeydown=t=>{t.key==="Escape"&&(t.preventDefault(),this.closeModal())},this.handleKickClick=t=>{t.stopPropagation();const e=this.myPlayer,r=this.target,i=this.eventBus;if(!e||!r||!this.canKick(e,r)||this.alreadyKicked||!i)return;const n=r.clientID();!n||n.length===0||!confirm(f("player_panel.kick_confirm",{name:r.name()}))||(i.emit(new sf(n)),this.dispatchEvent(new CustomEvent("kicked",{detail:{playerId:String(r.id())}})),this.closeModal())}}createRenderRoot(){return this}updated(t){t.has("open")&&this.open&&queueMicrotask(()=>this.querySelector('[role="dialog"]')?.focus())}closeModal(){this.dispatchEvent(new CustomEvent("close"))}canKick(t,e){return t.isLobbyCreator()&&e!==t&&e.type()===ge.Human&&!!e.clientID()}render(){if(!this.open)return v``;const t=this.myPlayer,e=this.target;if(!t||!e)return v``;const r=this.canKick(t,e),i=this.alreadyKicked,n=f("player_panel.moderation"),a=f(i?"player_panel.kicked":"player_panel.kick");return v`
      <div class="absolute inset-0 z-1200 flex items-center justify-center p-4">
        <div
          class="absolute inset-0 bg-black/60 rounded-2xl"
          @click=${()=>this.closeModal()}
        ></div>

        <div
          role="dialog"
          aria-modal="true"
          aria-labelledby="moderation-title"
          class="relative z-10 w-full max-w-120 focus:outline-hidden"
          tabindex="0"
          @keydown=${this.handleKeydown}
        >
          <div
            class="rounded-2xl bg-zinc-900 p-5 shadow-2xl ring-1 ring-zinc-800 max-h-[90vh] text-zinc-200"
            @click=${s=>s.stopPropagation()}
          >
            <div class="mb-3 flex items-center justify-between relative">
              <div class="flex items-center gap-2">
                <img
                  src=${Tu}
                  alt=""
                  aria-hidden="true"
                  class="h-5 w-5"
                />
                <h2
                  id="moderation-title"
                  class="text-lg font-semibold tracking-tight text-zinc-100"
                >
                  ${n}
                </h2>
              </div>

              <button
                type="button"
                @click=${()=>this.closeModal()}
                class="absolute -top-3 -right-3 flex h-7 w-7 items-center justify-center rounded-full bg-zinc-700 text-white shadow-sm hover:bg-red-500 transition-colors focus-visible:ring-2 focus-visible:ring-white/30 focus:outline-hidden"
                aria-label=${f("common.close")}
                title=${f("common.close")}
              >
                ✕
              </button>
            </div>

            <div
              class="mb-4 rounded-xl border border-white/10 bg-white/5 px-3 py-2"
            >
              <div
                class="text-sm font-semibold text-zinc-100 truncate"
                title=${e.name()}
              >
                ${e.name()}
              </div>
            </div>

            <div class="grid auto-cols-fr grid-flow-col gap-1">
              ${Xt({onClick:this.handleKickClick,icon:gf,iconAlt:"Kick",title:a,label:a,type:"red",disabled:i||!r})}
            </div>
          </div>
        </div>
      </div>
    `}};ns([L({attribute:!1})],Un.prototype,"eventBus",2);ns([L({attribute:!1})],Un.prototype,"myPlayer",2);ns([L({attribute:!1})],Un.prototype,"target",2);ns([L({type:Boolean})],Un.prototype,"open",2);ns([L({type:Boolean})],Un.prototype,"alreadyKicked",2);Un=ns([F("player-moderation-modal")],Un);var x$=Object.defineProperty,_$=Object.getOwnPropertyDescriptor,rr=(t,e,r,i)=>{for(var n=i>1?void 0:i?_$(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&x$(e,r,n),n};let Ht=class extends V{constructor(){super(...arguments),this.eventBus=null,this.open=!1,this.mode="troops",this.total=0,this.uiState=null,this.format=Je,this.myPlayer=null,this.target=null,this.gameView=null,this.heading=null,this.sendAmount=0,this.selectedPercent=null,this.PRESETS=[10,25,50,75,100],this.handleKeydown=t=>{t.key==="Escape"&&(t.preventDefault(),this.closeModal()),t.key==="Enter"&&(t.preventDefault(),this.confirm())},this.i18n={title:t=>this.mode==="troops"?f("send_troops_modal.title_with_name",{name:t}):f("send_gold_modal.title_with_name",{name:t}),availableChip:()=>f("common.available"),availableTooltip:()=>this.mode==="troops"?f("send_troops_modal.available_tooltip"):f("send_gold_modal.available_tooltip"),max:()=>f("common.preset_max"),ariaSlider:()=>this.mode==="troops"?f("send_troops_modal.aria_slider"):f("send_gold_modal.aria_slider"),summarySend:()=>f("common.summary_send"),summaryKeep:()=>f("common.summary_keep"),closeLabel:()=>f("common.close"),cancel:()=>f("common.cancel"),send:()=>f("common.send"),cap:()=>f("common.cap_label"),capTooltip:()=>f("common.cap_tooltip"),sliderTooltip:(t,e)=>this.mode==="troops"?f("send_troops_modal.slider_tooltip",{percent:t,amount:e}):f("send_gold_modal.slider_tooltip",{percent:t,amount:e}),capacityNote:t=>f("send_troops_modal.capacity_note",{amount:t}),targetDeadTitle:()=>f("common.target_dead"),targetDeadNote:()=>f("common.target_dead_note")}}createRenderRoot(){return this}connectedCallback(){super.connectedCallback();const t=this.uiState&&typeof this.uiState.attackRatio=="number"?Math.round(this.uiState.attackRatio*100):100;this.selectedPercent=this.sanitizePercent(t);const e=this.getPercentBasis();this.sendAmount=this.clampSend(Math.floor(e*this.selectedPercent/100))}updated(t){if(t.has("open")&&this.open){if(!this.isSenderAlive()||!this.isTargetAlive()){this.closeModal();return}queueMicrotask(()=>this.querySelector('[role="dialog"]')?.focus())}if(t.has("total")||t.has("mode")||t.has("target")||t.has("gameView")){const e=this.getPercentBasis();if(this.selectedPercent!==null){const r=this.sanitizePercent(this.selectedPercent),i=Math.floor(e*r/100);this.sendAmount=this.clampSend(i)}else this.sendAmount=this.clampSend(this.sendAmount)}}closeModal(){this.dispatchEvent(new CustomEvent("close"))}confirm(){if(!this.isSenderAlive()||!this.isTargetAlive()||!this.eventBus)return;const t=this.myPlayer,e=this.target,r=this.limitAmount(this.sendAmount);if(!(!t||!e||r<=0)){if(this.mode==="troops"){const i=Number(t.troops());if(r>i)return;this.eventBus.emit(new rf(e,r))}else{const i=Number(t.gold());if(r>i)return;this.eventBus.emit(new tf(e,BigInt(r)))}this.dispatchEvent(new CustomEvent("confirm",{detail:{amount:r,closePanel:!0,success:!0}})),this.closeModal()}}toNum(t){return Number(typeof t=="bigint"?t:t??0)}getTotalNumber(){const t=this.toNum(this.total);return this.isSenderAlive()?t:0}sanitizePercent(t){return Nr(t,0,100)}getCapacityLeft(){if(!this.isTargetAlive())return 0;if(this.mode!=="troops"||!this.gameView||!this.target)return null;const t=this.toNum(this.target.troops()),e=this.toNum(this.gameView.config().maxTroops(this.target));return Math.max(0,e-t)}getPercentBasis(){return this.getTotalNumber()}limitAmount(t){const e=this.getCapacityLeft(),r=this.getTotalNumber(),i=e===null?r:Math.min(r,e);return Nr(t,0,i)}clampSend(t){const e=this.getTotalNumber(),r=Nr(t,0,e);return this.limitAmount(r)}percentOfBasis(t){const e=this.getPercentBasis();return e?Math.round(t/e*100):0}keepAfter(t){const e=this.getTotalNumber();return Math.max(0,e-t)}getFillColor(){return this.mode==="troops"?"rgb(168 85 247)":"rgb(234 179 8)"}getMinKeepRatio(){return this.mode==="troops"?.3:0}isTargetAlive(){return this.target?.isAlive()??!1}isSenderAlive(){return this.myPlayer?.isAlive()??!1}renderHeader(){const t=this.target?.name?.()??"";return v`
      <div class="mb-3 flex items-center justify-between relative">
        <h2
          id="send-title"
          class="text-lg font-semibold tracking-tight text-zinc-100"
        >
          ${this.heading??this.i18n.title(t)}
        </h2>
        <!-- Close button -->
        <button
          type="button"
          @click=${()=>this.closeModal()}
          class="absolute -top-3 -right-3 flex h-7 w-7 items-center justify-center rounded-full bg-zinc-700 text-white shadow-sm hover:bg-red-500 transition-colors focus-visible:ring-2 focus-visible:ring-white/30 focus:outline-hidden"
          aria-label=${this.i18n.closeLabel()}
          title=${this.i18n.closeLabel()}
        >
          ✕
        </button>
      </div>
    `}renderAvailable(){const t=this.getTotalNumber();return v`
      <div class="mb-4 pb-3 border-b border-zinc-800">
        <div class="flex items-center gap-2 text-[13px]">
          <!-- Available -->
          <span
            class="inline-flex items-center gap-1 rounded-full bg-indigo-600/15 px-2 py-0.5 ring-1 ring-indigo-400/40 text-indigo-100"
            title=${this.i18n.availableTooltip()}
          >
            <span class="opacity-90">${this.i18n.availableChip()}</span>
            <span class="font-mono tabular-nums">${this.format(t)}</span>
          </span>
        </div>
      </div>
    `}renderPresets(t){const e=this.getTotalNumber(),r=!this.isSenderAlive()||!this.isTargetAlive();return v`
      <div class="mb-8 grid grid-cols-5 gap-2">
        ${this.PRESETS.map(i=>{const n=this.sanitizePercent(i),a=(this.selectedPercent??t)===n,s=n===100?this.i18n.max():`${n}%`;return v`
            <button
              ?disabled=${r}
              class="rounded-lg px-3 py-2 text-sm ring-1 transition
                ${r?"bg-zinc-800/70 text-zinc-400 ring-zinc-700 cursor-not-allowed":a?"bg-indigo-600 text-white ring-indigo-300/60":"bg-zinc-800 text-zinc-200 ring-zinc-700 hover:bg-zinc-700 hover:text-zinc-50"}"
              @click=${()=>{if(r)return;this.selectedPercent=n;const o=Math.floor(e*n/100);this.sendAmount=this.clampSend(o)}}
              ?aria-pressed=${a}
              title="${n}%"
            >
              ${s}
            </button>
          `})}
      </div>
    `}renderSlider(t){const e=this.getTotalNumber(),r=this.getCapacityLeft(),i=r===null?e:Math.min(e,r),n=!this.isSenderAlive()||!this.isTargetAlive(),a=r===null?null:Math.max(0,Math.min(100,Math.round(Math.min(r,e)/(e||1)*100))),s=this.getFillColor(),o=e<=0||n;return v`
      <div class="${a!==null?"mb-8":"mb-2"}">
        <div
          class="relative px-1 rounded-lg overflow-visible focus-within:ring-2 focus-within:ring-indigo-500/30"
        >
          <input
            type="range"
            min="0"
            .max=${e}
            .value=${this.sendAmount}
            ?disabled=${o}
            @input=${c=>{if(n)return;const u=Number(c.target.value),p=e?Math.round(u/e*100):0;this.selectedPercent=this.sanitizePercent(p);const d=Math.min(u,i);this.sendAmount=this.clampSend(d)}}
            class="w-full appearance-none bg-transparent range-x focus:outline-hidden"
            aria-label=${this.i18n.ariaSlider()}
            aria-valuemin="0"
            aria-valuemax=${i}
            aria-valuetext=${this.i18n.sliderTooltip(t,this.format(this.sendAmount))}
            style="--percent:${t}%; --fill:${s}; --track: rgba(255,255,255,.28); --thumb-ring: rgb(24 24 27);"
          />

          <!-- Tooltip -->
          <div
            class="pointer-events-none absolute -top-6 -translate-x-1/2 select-none left-(--pos)"
            style="--pos: ${t}%"
          >
            <div
              class="rounded-sm bg-[#0f1116] ring-1 ring-zinc-700 text-zinc-100 px-1.5 py-0.5 text-[12px] shadow-sm whitespace-nowrap w-max z-50"
            >
              ${t}% • ${this.format(this.sendAmount)}
            </div>
          </div>

          <!-- Cap marker -->
          ${a!==null?v`
                <div
                  class="pointer-events-none absolute top-1/2 -translate-y-1/2 h-3 w-0.5 bg-amber-400/80 shadow-sm left-(--pos)"
                  style="--pos:${a}%;"
                  title=${this.i18n.capTooltip()}
                ></div>
                <div
                  class="pointer-events-none absolute top-full mt-1.5 -translate-x-1/2 select-none left-(--pos)"
                  style="--pos:${a}%"
                >
                  <div
                    class="rounded-sm bg-[#0f1116] ring-1 ring-amber-400/40 text-amber-200 px-1 py-0.5 text-[11px] shadow-sm whitespace-nowrap"
                  >
                    ${this.i18n.cap()}
                  </div>
                </div>
              `:v``}
        </div>
      </div>
    `}renderCapacityNote(t){return t!==this.sendAmount?v`<p class="mt-1 text-xs text-amber-300">
      ${this.i18n.capacityNote(this.format(t))}
    </p>`:v``}renderSummary(t){const e=this.getTotalNumber(),r=this.keepAfter(t),i=this.getMinKeepRatio()>0&&r<Math.floor(e*this.getMinKeepRatio());return v`
      <div class="mt-3 text-center text-sm text-zinc-200">
        ${this.i18n.summarySend()}
        <span class="font-semibold text-indigo-400 font-mono"
          >${this.format(t)}</span
        >
        · ${this.i18n.summaryKeep()}
        <span
          class="font-semibold font-mono ${i?"text-amber-400":"text-emerald-400"}"
        >
          ${this.format(r)}
        </span>
      </div>
    `}renderActions(){const t=this.getTotalNumber(),e=!this.isSenderAlive()||!this.isTargetAlive(),r=t<=0||this.clampSend(this.sendAmount)<=0||e;return v`
      <div class="mt-5 flex justify-end gap-2">
        <button
          class="h-10 min-w-24 rounded-lg px-3 text-sm font-semibold
                 text-zinc-100 bg-zinc-800 ring-1 ring-zinc-700
                 hover:bg-zinc-700 focus:outline-hidden
                 focus-visible:ring-2 focus-visible:ring-white/20"
          @click=${()=>this.closeModal()}
        >
          ${this.i18n.cancel()}
        </button>
        <button
          class="h-10 min-w-24 rounded-lg px-3 text-sm font-semibold text-white
                 bg-indigo-600 enabled:hover:bg-indigo-500
                 focus:outline-hidden focus-visible:ring-2 focus-visible:ring-indigo-400/50
                 disabled:cursor-not-allowed disabled:opacity-50"
          ?disabled=${r}
          @click=${()=>this.confirm()}
        >
          ${this.i18n.send()}
        </button>
      </div>
    `}renderDeadNote(){return v`
      <div
        class="mb-2 rounded-md border border-amber-500/30 bg-amber-500/10 px-3 py-2 text-amber-200 text-sm"
      >
        <div class="font-semibold">${this.i18n.targetDeadTitle()}</div>
        <div>${this.i18n.targetDeadNote()}</div>
      </div>
    `}renderSliderStyles(){return v`
      <style>
        .range-x {
          -webkit-appearance: none;
          appearance: none;
          height: 8px;
          outline: none;
          background: transparent;
        }
        .range-x::-webkit-slider-runnable-track {
          height: 8px;
          border-radius: 9999px;
          background: linear-gradient(
            90deg,
            var(--fill) 0,
            var(--fill) var(--percent),
            /* allowed (clamped) fill */ rgba(255, 255, 255, 0.22)
              var(--percent),
            rgba(255, 255, 255, 0.22) 100%
          );
        }
        .range-x::-webkit-slider-thumb {
          -webkit-appearance: none;
          height: 18px;
          width: 18px;
          border-radius: 9999px;
          background: var(--fill);
          border: 3px solid var(--thumb-ring);
          margin-top: -5px;
        }
        .range-x::-moz-range-track {
          height: 8px;
          border-radius: 9999px;
          background: rgba(255, 255, 255, 0.22);
        }
        .range-x::-moz-range-progress {
          height: 8px;
          border-radius: 9999px;
          background: var(--fill);
        }
        .range-x::-moz-range-thumb {
          height: 18px;
          width: 18px;
          border-radius: 9999px;
          background: var(--fill);
          border: 3px solid var(--thumb-ring);
        }
      </style>
    `}render(){if(!this.open)return v``;const t=this.percentOfBasis(this.sendAmount),e=this.limitAmount(this.sendAmount);return v`
      <div class="absolute inset-0 z-1100 flex items-center justify-center p-4">
        <div
          class="absolute inset-0 bg-black/60 rounded-2xl"
          @click=${()=>this.closeModal()}
        ></div>

        <div
          role="dialog"
          aria-modal="true"
          aria-labelledby="send-title"
          class="relative z-10 w-full max-w-135 focus:outline-hidden"
          tabindex="0"
          @keydown=${this.handleKeydown}
        >
          <div
            class="rounded-2xl bg-zinc-900 p-5 shadow-2xl ring-1 ring-zinc-800 max-h-[90vh] text-zinc-200"
            @click=${r=>r.stopPropagation()}
          >
            ${this.renderHeader()} ${this.renderAvailable()}
            ${this.isTargetAlive()?v``:this.renderDeadNote()}
            ${this.renderPresets(t)} ${this.renderSlider(t)}
            ${this.mode==="troops"?this.renderCapacityNote(e):v``}
            ${this.renderSummary(e)} ${this.renderActions()}
            ${this.renderSliderStyles()}
          </div>
        </div>
      </div>
    `}};rr([L({attribute:!1})],Ht.prototype,"eventBus",2);rr([L({type:Boolean})],Ht.prototype,"open",2);rr([L({type:String})],Ht.prototype,"mode",2);rr([L({type:Object})],Ht.prototype,"total",2);rr([L({type:Object})],Ht.prototype,"uiState",2);rr([L({attribute:!1})],Ht.prototype,"format",2);rr([L({attribute:!1})],Ht.prototype,"myPlayer",2);rr([L({attribute:!1})],Ht.prototype,"target",2);rr([L({attribute:!1})],Ht.prototype,"gameView",2);rr([L({type:String})],Ht.prototype,"heading",2);rr([M()],Ht.prototype,"sendAmount",2);rr([M()],Ht.prototype,"selectedPercent",2);Ht=rr([F("send-resource-modal")],Ht);const Gb=""+new URL("../images/StopIconWhite.png",import.meta.url).href,Vb=""+new URL("../images/TradingIconWhite.png",import.meta.url).href,k$=""+new URL("../images/TraitorIconLightRed.svg",import.meta.url).href;var S$=Object.defineProperty,A$=Object.getOwnPropertyDescriptor,vi=(t,e,r,i)=>{for(var n=i>1?void 0:i?A$(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&S$(e,r,n),n};let Sr=class extends V{constructor(){super(...arguments),this.actions=null,this.tile=null,this._profileForPlayerId=null,this.kickedPlayerIDs=new Set,this.sendTarget=null,this.sendMode="none",this.isVisible=!1,this.allianceExpiryText=null,this.allianceExpirySeconds=null,this.otherProfile=null,this.suppressNextHide=!1,this.moderationTarget=null,this.closeSend=()=>{this.sendTarget=null,this.sendMode="none"},this.confirmSend=t=>{this.closeSend(),t.detail?.closePanel&&this.hide()},this.closeModeration=()=>{this.moderationTarget=null},this.handleModerationKicked=t=>{const e=t.detail?.playerId;e&&this.kickedPlayerIDs.add(String(e)),this.closeModeration(),this.hide()}}createRenderRoot(){return this}initEventBus(t){this.eventBus=t,t.on(es,e=>{this.isVisible&&this.hide()}),t.on(Ec,e=>{this.uiState.rocketDirectionUp=e.rocketDirectionUp,this.requestUpdate()})}init(){this.eventBus.on(Cn,()=>{if(this.suppressNextHide){this.suppressNextHide=!1;return}this.hide()}),this.ctModal=document.querySelector("chat-modal"),this.ctModal||console.warn("ChatModal element not found in DOM")}async tick(){if(this.isVisible&&this.tile){const t=this.g.owner(this.tile);if(t&&t.isPlayer()){const r=t,i=r.id();this._profileForPlayerId!==Number(i)&&(this.otherProfile=await r.profile(),this._profileForPlayerId=Number(i))}const e=this.g.myPlayer();if(e!==null&&e.isAlive()){if(this.actions=await e.actions(this.tile),this.actions?.interaction?.allianceExpiresAt!==void 0){const i=this.actions.interaction.allianceExpiresAt-this.g.ticks(),n=Math.max(0,Math.floor(i/10));i>0?(this.allianceExpirySeconds=n,this.allianceExpiryText=Oa(n)):(this.allianceExpirySeconds=null,this.allianceExpiryText=null)}else this.allianceExpirySeconds=null,this.allianceExpiryText=null;this.requestUpdate()}}}show(t,e){this.actions=t,this.tile=e,this.moderationTarget=null,this.isVisible=!0,this.requestUpdate()}openSendGoldModal(t,e,r){this.suppressNextHide=!0,this.actions=t,this.tile=e,this.sendTarget=r,this.sendMode="gold",this.moderationTarget=null,this.isVisible=!0,this.requestUpdate()}hide(){this.isVisible=!1,this.sendMode="none",this.sendTarget=null,this.moderationTarget=null,this.requestUpdate()}handleClose(t){t.stopPropagation(),this.hide()}handleAllianceClick(t,e,r){t.stopPropagation(),this.eventBus.emit(new Yp(e,r)),this.hide()}handleBreakAllianceClick(t,e,r){t.stopPropagation(),this.eventBus.emit(new Xp(e,r)),this.hide()}openSendTroops(t){this.suppressNextHide=!0,this.sendTarget=t,this.sendMode="troops"}openSendGold(t){this.suppressNextHide=!0,this.sendTarget=t,this.sendMode="gold"}handleDonateTroopClick(t,e,r){t.stopPropagation(),this.openSendTroops(r)}handleDonateGoldClick(t,e,r){t.stopPropagation(),this.openSendGold(r)}handleEmbargoClick(t,e,r){t.stopPropagation(),this.eventBus.emit(new Mc(r,"start")),this.hide()}handleStopEmbargoClick(t,e,r){t.stopPropagation(),this.eventBus.emit(new Mc(r,"stop")),this.hide()}onStopTradingAllClick(t){t.stopPropagation(),this.eventBus.emit(new C0("start"))}onStartTradingAllClick(t){t.stopPropagation(),this.eventBus.emit(new C0("stop"))}handleEmojiClick(t,e,r){t.stopPropagation(),this.emojiTable.showTable(i=>{e===r?this.eventBus.emit(new So(ui,uo.indexOf(i))):this.eventBus.emit(new So(r,uo.indexOf(i))),this.emojiTable.hideTable(),this.hide()})}handleChat(t,e,r){if(t.stopPropagation(),!this.ctModal){console.warn("ChatModal element not found in DOM");return}this.ctModal.open(e,r),this.hide()}handleTargetClick(t,e){t.stopPropagation(),this.eventBus.emit(new ef(e.id())),this.hide()}openModeration(t,e){t.stopPropagation(),this.suppressNextHide=!0,this.moderationTarget=e}handleToggleRocketDirection(t){t.stopPropagation();const e=!this.uiState.rocketDirectionUp;this.eventBus.emit(new Ec(e))}identityChipProps(t){switch(t){case ge.Nation:return{labelKey:"player_type.nation",aria:"Nation player",classes:"border-indigo-400/25 bg-indigo-500/10 text-indigo-200",icon:"🏛️"};case ge.Bot:return{labelKey:"player_type.bot",aria:"Bot",classes:"border-purple-400/25 bg-purple-500/10 text-purple-200",icon:"🤖"};case ge.Human:default:return{labelKey:"player_type.player",aria:"Human player",classes:"border-zinc-400/20 bg-zinc-500/5 text-zinc-300",icon:"👤"}}}getRelationClass(t){const e="inline-flex items-center gap-1.5 rounded-full border px-2.5 py-0.5 shadow-[inset_0_0_8px_rgba(255,255,255,0.04)]";switch(t){case st.Hostile:return`${e} border-red-400/30 bg-red-500/10 text-red-200`;case st.Distrustful:return`${e} border-red-300/40 bg-red-300/10 text-red-300`;case st.Friendly:return`${e} border-emerald-400/30 bg-emerald-500/10 text-emerald-200`;case st.Neutral:default:return`${e} border-zinc-400/30 bg-zinc-500/10 text-zinc-200`}}getRelationName(t){switch(t){case st.Hostile:return f("relation.hostile");case st.Distrustful:return f("relation.distrustful");case st.Friendly:return f("relation.friendly");case st.Neutral:default:return f("relation.neutral")}}getExpiryColorClass(t){return t===null?"text-white":t<=30?"text-red-400":t<=60?"text-yellow-400":"text-emerald-400"}getTraitorRemainingSeconds(t){const e=t.data.traitorRemainingTicks??0;return!t.isTraitor()||e<=0?null:Math.ceil(e/10)}renderTraitorBadge(t){if(!t.isTraitor())return v``;const e=this.getTraitorRemainingSeconds(t),r=e!==null?Oa(e):null,i=e!==null?`mx-1 size-1 rounded-full bg-red-400/70 ${e<=10?"animate-pulse":""}`:"";return v`
      <div class="mt-1" role="status" aria-live="polite" aria-atomic="true">
        <span
          class="inline-flex items-center gap-2 rounded-full border border-red-400/30
            bg-red-500/10 px-2.5 py-0.5 text-sm font-semibold text-red-200
            shadow-[inset_0_0_8px_rgba(239,68,68,0.12)]"
          title=${f("player_panel.traitor")}
        >
          <img src=${k$} alt="" aria-hidden="true" class="size-4.5" />
          <span class="tracking-tight"
            >${f("player_panel.traitor")}</span
          >
          ${r?v`<span class=${i}></span>
                <span
                  class="tabular-nums font-bold text-red-100 whitespace-nowrap text-sm"
                >
                  ${r}
                </span>`:""}
        </span>
      </div>
    `}renderModeration(t,e){if(!t.isLobbyCreator())return v``;const r=f("player_panel.moderation");return v`
      <ui-divider></ui-divider>
      <div class="grid auto-cols-fr grid-flow-col gap-1">
        ${Xt({onClick:i=>this.openModeration(i,e),icon:Tu,iconAlt:"Moderation",title:r,label:r,type:"red"})}
      </div>
    `}renderRelationPillIfNation(t,e){if(t.type()!==ge.Nation)return v``;if(t.isTraitor())return v``;if(e?.isAlliedWith&&e.isAlliedWith(t))return v``;if(!this.otherProfile||!e)return v``;const r=this.otherProfile.relations?.[e.smallID()]??st.Neutral,i=this.getRelationClass(r),n=this.getRelationName(r);return v`
      <div class="mt-1">
        <span class="text-sm font-semibold ${i}">${n}</span>
      </div>
    `}renderIdentityRow(t,e){const r=t.cosmetics.flag,i=typeof r=="string"?hp.find(a=>a.code===r):void 0,n=t.type()===ge.Human?null:this.identityChipProps(t.type());return v`
      <div class="flex items-center gap-2.5 flex-wrap">
        ${i&&typeof r=="string"?v`<img
              src="/flags/${encodeURIComponent(r)}.svg"
              alt=${i?.name??"Flag"}
              class="h-10 w-10 rounded-full object-cover"
              @error=${a=>{a.target.style.display="none"}}
            />`:""}

        <div class="flex-1 min-w-0">
          <h2
            class="text-xl font-bold tracking-[-0.01em] text-zinc-50 truncate"
            title=${t.name()}
          >
            ${t.name()}
          </h2>
        </div>
        ${n?v`<span
              class=${`inline-flex items-center gap-1.5 rounded-full border px-2 py-0.5 text-xs font-semibold ${n.classes}`}
              role="status"
              aria-label=${n.aria}
              title=${f(n.labelKey)}
            >
              <span aria-hidden="true" class="leading-none">${n.icon}</span>
              <span class="tracking-tight"
                >${f(n.labelKey)}</span
              >
            </span>`:v``}
      </div>
      ${this.renderTraitorBadge(t)}
      ${this.renderRelationPillIfNation(t,e)}
    `}renderResources(t){return v`
      <div class="mb-1 flex justify-between gap-2">
        <div
          class="inline-flex items-center gap-1.5 rounded-lg bg-white/4 px-3 py-1.5 shrink-0
                    text-white w-35"
        >
          <span class="mr-0.5">💰</span>
          <span translate="no" class="tabular-nums w-[5ch] font-semibold">
            ${ce(t.gold()||0)}
          </span>
          <span class="text-zinc-200 whitespace-nowrap">
            ${f("player_panel.gold")}</span
          >
        </div>

        <div
          class="inline-flex items-center gap-1.5 rounded-lg bg-white/4 px-3 py-1.5
                    text-white w-35 shrink-0"
        >
          <span class="mr-0.5">🛡️</span>
          <span translate="no" class="tabular-nums w-[5ch] font-semibold">
            ${Je(t.troops()||0)}
          </span>
          <span class="text-zinc-200 whitespace-nowrap">
            ${f("player_panel.troops")}</span
          >
        </div>
      </div>
    `}renderRocketDirectionToggle(){return v`
      <ui-divider></ui-divider>
      <button
        class="flex w-full items-center justify-between rounded-xl bg-white/5 px-3 py-2 text-left text-white hover:bg-white/8 active:scale-[0.995] transition"
        @click=${t=>this.handleToggleRocketDirection(t)}
      >
        <div class="flex flex-col">
          <span class="text-sm font-semibold tracking-tight">
            ${f("player_panel.flip_rocket_trajectory")}
          </span>
          <span class="text-xs text-zinc-300" translate="no">
            ${this.uiState.rocketDirectionUp?f("player_panel.arc_up"):f("player_panel.arc_down")}
          </span>
        </div>
        <span class="text-lg" aria-hidden="true">🔀</span>
      </button>
    `}renderStats(t,e){return v`
      <!-- Betrayals -->
      <div class="grid grid-cols-[auto_1fr] gap-x-6 gap-y-2">
        <div
          class="flex items-center gap-2 text-[15px] font-medium text-zinc-100 leading-snug"
        >
          <span aria-hidden="true">⚠️</span>
          <span>${f("player_panel.betrayals")}</span>
        </div>
        <div class="text-right text-[14px] font-semibold text-zinc-200">
          ${t.data.betrayals??0}
        </div>
      </div>

      <!-- Trading / Embargo -->
      <div class="grid grid-cols-[auto_1fr] gap-x-6 gap-y-2">
        <div
          class="flex items-center gap-2 text-[15px] font-medium text-zinc-100 leading-snug"
        >
          <span aria-hidden="true">⚓</span>
          <span>${f("player_panel.trading")}</span>
        </div>
        <div
          class="flex items-center justify-end gap-2 text-[14px] font-semibold"
        >
          ${t.hasEmbargoAgainst(e)?v`<span class="text-amber-400"
                >${f("player_panel.stopped")}</span
              >`:v`<span class="text-blue-400"
                >${f("player_panel.active")}</span
              >`}
        </div>
      </div>
    `}renderAlliances(t){const e=t.allies(),r=new Intl.Collator(void 0,{sensitivity:"base"}),i=[...e].sort((n,a)=>r.compare(n.name(),a.name()));return v`
      <div class="select-none">
        <div class="flex items-center justify-between mb-2">
          <div
            id="alliances-title"
            class="text-[15px] font-medium text-zinc-200"
          >
            ${f("player_panel.alliances")}
          </div>
          <span
            aria-labelledby="alliances-title"
            class="inline-flex items-center justify-center min-w-5 h-5 px-1.5 rounded-[10px]
                 text-[12px] text-zinc-100 bg-white/10 border border-white/20"
          >
            ${e.length}
          </span>
        </div>

        <div
          class="rounded-lg bg-zinc-800/70 ring-1 ring-zinc-700/60 w-full min-w-0"
        >
          <ul
            class="max-h-30 overflow-y-auto p-2
                 flex flex-wrap gap-1.5
                 scrollbar-thin scrollbar-thumb-zinc-600 hover:scrollbar-thumb-zinc-500 scrollbar-track-zinc-800"
            role="list"
            aria-labelledby="alliances-title"
            translate="no"
          >
            ${i.length===0?v`<li class="text-zinc-400 text-[14px] px-1">
                  ${f("common.none")}
                </li>`:i.map(n=>v`<li
                      class="max-w-full inline-flex items-center gap-1.5
                             rounded-md border border-white/10 bg-white/5
                             px-2.5 py-1 text-[14px] text-zinc-100
                             hover:bg-white/8 active:scale-[0.99] transition"
                      title=${n.name()}
                    >
                      <span class="truncate">${n.name()}</span>
                    </li>`)}
          </ul>
        </div>
      </div>
    `}renderAllianceExpiry(){return this.allianceExpiryText===null?v``:v`
      <div class="grid grid-cols-[auto_1fr] gap-x-6 gap-y-2 text-base">
        <div class="font-semibold text-zinc-300">
          ${f("player_panel.alliance_time_remaining")}
        </div>
        <div class="text-right font-semibold">
          <span
            class="inline-flex items-center rounded-full px-2 py-0.5 text-[14px] font-bold ${this.getExpiryColorClass(this.allianceExpirySeconds)}"
            >${this.allianceExpiryText}</span
          >
        </div>
      </div>
    `}renderActions(t,e){const r=this.g.myPlayer(),i=this.actions?.interaction?.canDonateGold,n=this.actions?.interaction?.canDonateTroops,a=this.actions?.interaction?.canSendAllianceRequest,s=e===r?this.actions?.canSendEmojiAllPlayers:this.actions?.interaction?.canSendEmoji,o=this.actions?.interaction?.canBreakAlliance,l=this.actions?.interaction?.canTarget,c=this.actions?.interaction?.canEmbargo;return v`
      <div class="flex flex-col gap-2.5">
        <div class="grid auto-cols-fr grid-flow-col gap-1">
          ${Xt({onClick:u=>this.handleChat(u,t,e),icon:nx,iconAlt:"Chat",title:f("player_panel.chat"),label:f("player_panel.chat")})}
          ${s?Xt({onClick:u=>this.handleEmojiClick(u,t,e),icon:dx,iconAlt:"Emoji",title:f("player_panel.emotes"),label:f("player_panel.emotes"),type:"normal"}):""}
          ${l?Xt({onClick:u=>this.handleTargetClick(u,e),icon:LE,iconAlt:"Target",title:f("player_panel.target"),label:f("player_panel.target"),type:"normal"}):""}
          ${n?Xt({onClick:u=>this.handleDonateTroopClick(u,t,e),icon:px,iconAlt:"Troops",title:f("player_panel.send_troops"),label:f("player_panel.troops"),type:"normal"}):""}
          ${i?Xt({onClick:u=>this.handleDonateGoldClick(u,t,e),icon:ff,iconAlt:"Gold",title:f("player_panel.send_gold"),label:f("player_panel.gold"),type:"normal"}):""}
        </div>
        <ui-divider></ui-divider>
        ${e===t?v``:v`
              <div class="grid auto-cols-fr grid-flow-col gap-1">
                ${Xt(c?{onClick:u=>this.handleEmbargoClick(u,t,e),icon:Gb,iconAlt:"Stop Trading",title:f("player_panel.stop_trade"),label:f("player_panel.stop_trade"),type:"yellow"}:{onClick:u=>this.handleStopEmbargoClick(u,t,e),icon:Vb,iconAlt:"Start Trading",title:f("player_panel.start_trade"),label:f("player_panel.start_trade"),type:"green"})}
                ${o?Xt({onClick:u=>this.handleBreakAllianceClick(u,t,e),icon:fx,iconAlt:"Break Alliance",title:f("player_panel.break_alliance"),label:f("player_panel.break_alliance"),type:"red"}):""}
                ${a?Xt({onClick:u=>this.handleAllianceClick(u,t,e),icon:pf,iconAlt:"Alliance",title:f("player_panel.send_alliance"),label:f("player_panel.send_alliance"),type:"indigo"}):""}
              </div>
            `}
        ${e===t?v`<div class="grid auto-cols-fr grid-flow-col gap-1">
              ${Xt({onClick:u=>this.onStopTradingAllClick(u),icon:Gb,iconAlt:"Stop Trading With All",title:this.actions?.canEmbargoAll?f("player_panel.stop_trade_all"):`${f("player_panel.stop_trade_all")} - ${f("cooldown")}`,label:this.actions?.canEmbargoAll?f("player_panel.stop_trade_all"):`${f("player_panel.stop_trade_all")} ⏳`,type:"yellow",disabled:!this.actions?.canEmbargoAll})}
              ${Xt({onClick:u=>this.onStartTradingAllClick(u),icon:Vb,iconAlt:"Start Trading With All",title:this.actions?.canEmbargoAll?f("player_panel.start_trade_all"):`${f("player_panel.start_trade_all")} - ${f("cooldown")}`,label:this.actions?.canEmbargoAll?f("player_panel.start_trade_all"):`${f("player_panel.start_trade_all")} ⏳`,type:"green",disabled:!this.actions?.canEmbargoAll})}
            </div>`:""}
        ${this.renderModeration(t,e)}
      </div>
    `}render(){if(!this.isVisible)return v``;const t=this.g.myPlayer();if(!t)return v``;if(!this.tile)return v``;const e=this.g.owner(this.tile);if(!e||!e.isPlayer())return this.hide(),console.warn("Tile is not owned by a player"),v``;const r=e,i=t.gold(),n=Number(t.troops());return v`
      <style>
        /* Soft glowing ring animation for traitors */
        .traitor-ring {
          border-radius: 1rem;
          box-shadow:
            0 0 0 2px rgba(239, 68, 68, 0.34),
            0 0 12px 4px rgba(239, 68, 68, 0.22),
            inset 0 0 14px rgba(239, 68, 68, 0.13);
          animation: glowPulse 2.4s ease-in-out infinite;
        }
        @keyframes glowPulse {
          0%,
          100% {
            box-shadow:
              0 0 0 2px rgba(239, 68, 68, 0.22),
              0 0 8px 2px rgba(239, 68, 68, 0.15),
              inset 0 0 8px rgba(239, 68, 68, 0.07);
          }
          50% {
            box-shadow:
              0 0 0 4px rgba(239, 68, 68, 0.38),
              0 0 18px 6px rgba(239, 68, 68, 0.26),
              inset 0 0 18px rgba(239, 68, 68, 0.15);
          }
        }
      </style>

      <div
        class="fixed inset-0 z-10001 flex items-center justify-center overflow-auto
               bg-black/15 backdrop-brightness-110 pointer-events-auto"
        @contextmenu=${a=>a.preventDefault()}
        @wheel=${a=>a.stopPropagation()}
        @click=${()=>this.hide()}
      >
        <div
          class="pointer-events-auto max-h-[90vh] min-w-75 max-w-100 px-4 py-2"
          @click=${a=>a.stopPropagation()}
        >
          <div class="relative">
            <div
              class="absolute inset-2 -z-10 rounded-2xl bg-black/25 backdrop-blur-[2px]"
            ></div>
            <div
              class=${`relative w-full bg-zinc-900/95 rounded-2xl text-zinc-100 shadow-2xl shadow-black/50
                 ${r.isTraitor()?"traitor-ring":"ring-1 ring-white/5"}`}
            >
              <div class="overflow-visible">
                <div
                  class="overflow-auto [-webkit-overflow-scrolling:touch] resize-y max-h-[calc(100vh-120px-env(safe-area-inset-bottom))]"
                >
                  <div class="sticky top-0 z-20 flex justify-end p-2">
                    <button
                      @click=${this.handleClose}
                      class="absolute right-3 top-3 z-20 flex h-7 w-7 items-center justify-center rounded-full bg-zinc-700 text-white shadow-sm hover:bg-red-500 transition-colors"
                      aria-label=${f("common.close")||"Close"}
                      title=${f("common.close")||"Close"}
                    >
                      ✕
                    </button>
                  </div>

                  <div
                    class="p-6 flex flex-col gap-2 font-sans antialiased text-[14.5px] leading-relaxed"
                  >
                    <!-- Identity (flag, name, type, traitor, relation) -->
                    <div class="mb-1">${this.renderIdentityRow(r,t)}</div>

                    ${this.sendTarget?v`
                          <send-resource-modal
                            .open=${this.sendMode!=="none"}
                            .mode=${this.sendMode}
                            .total=${this.sendMode==="troops"?n:i}
                            .uiState=${this.uiState}
                            .myPlayer=${t}
                            .target=${this.sendTarget}
                            .gameView=${this.g}
                            .eventBus=${this.eventBus}
                            .format=${this.sendMode==="troops"?Je:ce}
                            @confirm=${this.confirmSend}
                            @close=${this.closeSend}
                          ></send-resource-modal>
                        `:""}
                    ${this.moderationTarget?v`
                          <player-moderation-modal
                            .open=${!0}
                            .myPlayer=${t}
                            .target=${this.moderationTarget}
                            .eventBus=${this.eventBus}
                            .alreadyKicked=${this.kickedPlayerIDs.has(String(this.moderationTarget.id()))}
                            @close=${this.closeModeration}
                            @kicked=${this.handleModerationKicked}
                          ></player-moderation-modal>
                        `:""}

                    <ui-divider></ui-divider>

                    <!-- Resources -->
                    ${this.renderResources(r)}

                    <!-- Rocket direction toggle -->
                    ${r===t?this.renderRocketDirectionToggle():""}

                    <ui-divider></ui-divider>

                    <!-- Stats: betrayals / trading -->
                    ${this.renderStats(r,t)}

                    <ui-divider></ui-divider>

                    <!-- Alliances list -->
                    ${this.renderAlliances(r)}

                    <!-- Alliance time remaining -->
                    ${this.renderAllianceExpiry()}

                    <ui-divider></ui-divider>

                    <!-- Actions -->
                    ${this.renderActions(t,r)}
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    `}};vi([M()],Sr.prototype,"sendTarget",2);vi([M()],Sr.prototype,"sendMode",2);vi([M()],Sr.prototype,"isVisible",2);vi([M()],Sr.prototype,"allianceExpiryText",2);vi([M()],Sr.prototype,"allianceExpirySeconds",2);vi([M()],Sr.prototype,"otherProfile",2);vi([M()],Sr.prototype,"suppressNextHide",2);vi([M()],Sr.prototype,"moderationTarget",2);Sr=vi([F("player-panel")],Sr);class C${constructor(e,r,i){this.game=e,this.eventBus=r,this.uiState=i,this.samLaunchers=new Map,this.hoveredShow=!1,this.ghostShow=!1,this.visible=!1,this.samRanges=[],this.dashOffset=0,this.rotationSpeed=14,this.lastRefresh=Date.now(),this.needsRedraw=!1}handleToggleStructure(e){const r=e.structureTypes;this.hoveredShow=!!r&&(r.indexOf(C.SAMLauncher)!==-1||r.indexOf(C.City)!==-1),this.updateVisibility()}init(){this.eventBus.on(ba,e=>this.handleToggleStructure(e))}shouldTransform(){return!0}tick(){const e=this.game.updatesSinceLastTick()?.[ye.Unit];if(e)for(const r of e){const i=this.game.unit(r.id);if(i&&i.type()===C.SAMLauncher&&this.hasChanged(i)){this.needsRedraw=!0;break}}this.ghostShow=this.uiState.ghostStructure===C.MissileSilo||this.uiState.ghostStructure===C.SAMLauncher||this.uiState.ghostStructure===C.City||this.uiState.ghostStructure===C.AtomBomb||this.uiState.ghostStructure===C.HydrogenBomb,this.updateVisibility()}renderLayer(e){this.visible&&(this.needsRedraw&&(this.computeCircleUnions(),this.needsRedraw=!1),this.updateDashAnimation(),this.drawCirclesUnion(e))}updateDashAnimation(){const e=Date.now(),r=e-this.lastRefresh;this.lastRefresh=e,this.dashOffset+=this.rotationSpeed*r/1e3,this.dashOffset>1e6&&(this.dashOffset=this.dashOffset%1e6)}updateVisibility(){const e=this.hoveredShow||this.ghostShow;e!==this.visible&&(this.visible=e)}hasChanged(e){const r=this.samLaunchers.get(e.id()),i=r===void 0,n=e.isActive(),a=e.owner().smallID();let s=i||!n;return s||=!i&&r.ownerId!==a,s||=!i&&r.level!==e.level(),s}getAllSamRanges(){const e=this.game.units(C.SAMLauncher).filter(i=>i.isActive());return this.samLaunchers.clear(),e.forEach(i=>this.samLaunchers.set(i.id(),{ownerId:i.owner().smallID(),level:i.level()})),e.map(i=>{const n=i.tile();return{x:this.game.x(n),y:this.game.y(n),r:this.game.config().samRange(i.level()),owner:i.owner(),arcs:[]}})}computeUncoveredArcIntervals(e,r){e.arcs=[];const i=Math.PI*2,n=1e-9,a=p=>{for(;p<0;)p+=i;for(;p>=i;)p-=i;return p},s=p=>{if(p.length===0)return[];const d=[];for(const[y,x]of p){const m=a(y),k=a(x);k<m?(d.push([m,i]),d.push([0,k])):d.push([m,k])}d.sort((y,x)=>y[0]-x[0]);const h=[];let g=d[0].slice();for(let y=1;y<d.length;y++){const x=d[y];x[0]<=g[1]+n?g[1]=Math.max(g[1],x[1]):(h.push([g[0],g[1]]),g=x.slice())}return h.push([g[0],g[1]]),h},o=[];let l=!1;for(const p of r){if(e===p||e.owner.smallID()!==p.owner.smallID())continue;const d=p.x-e.x,h=p.y-e.y,g=Math.hypot(d,h);if(g+e.r<=p.r+n){l=!0;break}if(g>=e.r+p.r-n)continue;if(g<=n){if(p.r>=e.r){l=!0;break}continue}const y=Math.atan2(h,d),x=(e.r*e.r+g*g-p.r*p.r)/(2*e.r*g),m=Math.acos(Math.max(-1,Math.min(1,x)));o.push([y-m,y+m])}if(l)return;const c=s(o),u=[];if(c.length===0)u.push([0,i]);else{let p=0;for(const[d,h]of c)d>p+n&&u.push([p,d]),p=Math.max(p,h);p<i-n&&u.push([p,i])}e.arcs=u}drawArcSegments(e,r){const i="rgba(0, 0, 0, 1)",n="rgba(0, 255, 0, 1)",a="rgba(255, 0, 0, 1)",s="rgba(255, 255, 0, 1)",c=[12,6],u=-this.game.width()/2,p=-this.game.height()/2;for(const[d,h]of r.arcs)h-d<.001||(e.beginPath(),e.arc(r.x+u,r.y+p,r.r,d,h),e.strokeStyle=i,e.lineWidth=4,e.setLineDash([c[0]+1,Math.max(c[1]-1,0)]),e.lineDashOffset=this.dashOffset+1/2,e.stroke(),r.owner.isMe()?e.strokeStyle=n:this.game.myPlayer()?.isFriendly(r.owner)?e.strokeStyle=s:e.strokeStyle=a,e.lineWidth=3,e.setLineDash(c),e.lineDashOffset=this.dashOffset,e.stroke())}computeCircleUnions(){this.samRanges=this.getAllSamRanges();for(let e=0;e<this.samRanges.length;e++){const r=this.samRanges[e];this.computeUncoveredArcIntervals(r,this.samRanges)}}drawCirclesUnion(e){const r=this.samRanges;if(!(r.length===0||!this.visible)){e.save();for(let i=0;i<r.length;i++)this.drawArcSegments(e,r[i]);e.restore()}}}var T$=Object.getOwnPropertyDescriptor,E$=(t,e,r,i)=>{for(var n=i>1?void 0:i?T$(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=s(n)||n);return n};let W0=class extends V{constructor(){super(...arguments),this.ratios=[0],this.colors=["rgba(0, 128, 255, 0.7)","rgba(0, 0, 0, 0.5)"],this.isVisible=!1}createRenderRoot(){return this.style.position="fixed",this.style.top="0",this.style.left="0",this.style.width="100%",this.style.height="7px",this.style.zIndex="1000",this.style.pointerEvents="none",this}init(){this.isVisible=!0}tick(){if(this.game.inSpawnPhase()){this.ratios=[this.game.ticks()/this.game.config().numSpawnPhaseTurns()],this.colors=["rgba(0, 128, 255, 0.7)"],this.requestUpdate();return}if(this.ratios=[],this.colors=[],this.game.config().gameConfig().gameMode!==pe.Team){this.requestUpdate();return}const t=new Map;for(const i of this.game.players()){const n=i.team();if(n===null)throw new Error("Team is null");const a=t.get(n)??0;t.set(n,a+i.numTilesOwned())}const e=this.game.config().theme(),r=M$(t.values());if(r===0){this.requestUpdate();return}for(const[i,n]of t){const a=n/r;this.ratios.push(a),this.colors.push(e.teamColor(i).toRgbString())}this.requestUpdate()}shouldTransform(){return!1}render(){return this.isVisible?this.ratios.length===0||this.colors.length===0?v``:!this.game.inSpawnPhase()&&this.game.config().gameConfig().gameMode!==pe.Team?v``:v`
      <div class="w-full h-full flex z-999">
        ${this.ratios.map((t,e)=>{const r=this.colors[e]||"rgba(0, 0, 0, 0.5)";return v`
            <div
              class="h-full transition-all duration-100 ease-in-out w-(--width) bg-(--bg)"
              style="--width: ${t*100}%; --bg: ${r};"
            ></div>
          `})}
      </div>
    `:v``}};W0=E$([F("spawn-timer")],W0);function M$(t){let e=0;for(const r of t)e+=r;return e}var I$=Object.defineProperty,P$=Object.getOwnPropertyDescriptor,Qo=(t,e,r,i)=>{for(var n=i>1?void 0:i?P$(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&I$(e,r,n),n};const ua="precontent_ad_video";let gi=class extends V{constructor(){super(...arguments),this.isVisible=!0,this.adLoadTimeout=null,this.rampCheckInterval=null,this.rampWaitTimeout=null,this.adStarted=!1}createRenderRoot(){return this}connectedCallback(){super.connectedCallback(),this.style.display="block",this.style.width="100%",this.style.maxWidth="800px",this.style.aspectRatio="16/9",this.showVideoAd()}disconnectedCallback(){super.disconnectedCallback(),this.adLoadTimeout&&(clearTimeout(this.adLoadTimeout),this.adLoadTimeout=null),this.rampCheckInterval&&(clearInterval(this.rampCheckInterval),this.rampCheckInterval=null),this.rampWaitTimeout&&(clearTimeout(this.rampWaitTimeout),this.rampWaitTimeout=null)}showVideoAd(){if(!window.ramp){this.rampCheckInterval=setInterval(()=>{window.ramp&&window.ramp.que&&(this.rampCheckInterval&&(clearInterval(this.rampCheckInterval),this.rampCheckInterval=null),this.rampWaitTimeout&&(clearTimeout(this.rampWaitTimeout),this.rampWaitTimeout=null),this.loadVideoAd())},100),this.rampWaitTimeout=setTimeout(()=>{this.rampCheckInterval&&(clearInterval(this.rampCheckInterval),this.rampCheckInterval=null),console.log("[VideoAd] Ramp SDK never loaded - possible adblocker"),this.handleAdBlocked()},gi.AD_LOAD_TIMEOUT_MS);return}this.loadVideoAd()}loadVideoAd(){this.adLoadTimeout=setTimeout(()=>{this.adStarted||(console.log("[VideoAd] Ad load timeout - possible adblocker detected"),this.handleAdBlocked())},gi.AD_LOAD_TIMEOUT_MS);const t=window.ramp.onPlayerReady;window.ramp.onPlayerReady=()=>{t&&t(),window.Bolt&&(window.Bolt.on(ua,window.Bolt.BOLT_AD_STARTED??"boltAdStarted",()=>{console.log("[VideoAd] Ad started"),this.adStarted=!0,this.adLoadTimeout&&(clearTimeout(this.adLoadTimeout),this.adLoadTimeout=null)}),window.Bolt.on(ua,window.Bolt.BOLT_AD_COMPLETE,()=>{console.log("[VideoAd] Ad completed"),this.hideElement()}),window.Bolt.on(ua,window.Bolt.BOLT_AD_ERROR,()=>{console.log("[VideoAd] Ad error/no fill"),this.handleAdBlocked()}),window.Bolt.on(ua,window.Bolt.BOLT_MIDPOINT,()=>{console.log("[VideoAd] Ad midpoint"),this.onMidpoint&&this.onMidpoint()}),window.Bolt.on(ua,window.Bolt.SHOW_HIDDEN_CONTAINER??"showHiddenContainer",()=>{console.log("[VideoAd] Ad finished"),this.hideElement()}))},window.ramp.que.push(()=>{const e=[{type:ua}];window.ramp.addUnits(e).then(()=>{window.ramp.displayUnits()}).catch(r=>{console.error("[VideoAd] Error adding units:",r),window.ramp.displayUnits()})})}handleAdBlocked(){this.adLoadTimeout&&(clearTimeout(this.adLoadTimeout),this.adLoadTimeout=null),this.onAdBlocked&&this.onAdBlocked()}hideElement(){this.style.display="none",this.isVisible=!1,this.onComplete&&this.onComplete(),this.dispatchEvent(new CustomEvent("ad-complete",{bubbles:!0,composed:!0}))}render(){return this.isVisible?v`
      <div
        class="game-video-ad"
        style="width: 100%; height: 100%; overflow: hidden;"
      >
        <div
          id="precontent-video-location"
          style="width: 100%; height: 100%;"
        ></div>
      </div>
    `:v``}};gi.AD_LOAD_TIMEOUT_MS=8e3;Qo([M()],gi.prototype,"isVisible",2);Qo([L({attribute:!1})],gi.prototype,"onComplete",2);Qo([L({attribute:!1})],gi.prototype,"onMidpoint",2);Qo([L({attribute:!1})],gi.prototype,"onAdBlocked",2);gi=Qo([F("video-ad")],gi);var $$=Object.defineProperty,R$=Object.getOwnPropertyDescriptor,Cf=(t,e,r,i)=>{for(var n=i>1?void 0:i?R$(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&$$(e,r,n),n};let Po=class extends V{constructor(){super(...arguments),this.shouldShow=!1,this.adComplete=!1,this.handleComplete=()=>{this.adComplete=!0,this.shouldShow=!1}}createRenderRoot(){return this}init(){!window.adsEnabled||window.innerWidth<768||ve.isOnCrazyGames()||this.game.config().gameConfig().gameType===lt.Singleplayer||yu()<3||(this.shouldShow=!0)}tick(){this.adComplete||this.shouldShow&&!this.game.inSpawnPhase()&&(this.shouldShow=!1,this.requestUpdate())}shouldTransform(){return!1}render(){return!this.shouldShow||this.adComplete?v``:v`
      <div class="fixed bottom-0 left-0 z-[9999] pointer-events-auto">
        <video-ad
          style="width: 400px; max-width: 400px; height: 225px; aspect-ratio: auto;"
          .onComplete="${this.handleComplete}"
        ></video-ad>
      </div>
    `}};Cf([M()],Po.prototype,"shouldShow",2);Cf([M()],Po.prototype,"adComplete",2);Po=Cf([F("spawn-video-ad")],Po);var Xd=function(t){var e=t/255;return e<.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)},Zd=function(t){return .2126*Xd(t.r)+.7152*Xd(t.g)+.0722*Xd(t.b)};function D$(t){t.prototype.luminance=function(){return e=Zd(this.rgba),(r=2)===void 0&&(r=0),i===void 0&&(i=Math.pow(10,r)),Math.round(i*e)/i+0;var e,r,i},t.prototype.contrast=function(e){e===void 0&&(e="#FFF");var r,i,n,a,s,o,l,c=e instanceof t?e:new t(e);return a=this.rgba,s=c.toRgb(),o=Zd(a),l=Zd(s),r=o>l?(o+.05)/(l+.05):(l+.05)/(o+.05),(i=2)===void 0&&(i=0),n===void 0&&(n=Math.pow(10,i)),Math.floor(n*r)/n+0},t.prototype.isReadable=function(e,r){return e===void 0&&(e="#FFF"),r===void 0&&(r={}),this.contrast(e)>=(o=(s=(i=r).size)===void 0?"normal":s,(a=(n=i.level)===void 0?"AA":n)==="AAA"&&o==="normal"?7:a==="AA"&&o==="large"?3:4.5);var i,n,a,s,o}}var L$=`in vec2 aPosition;
out vec2 vTextureCoord;

uniform vec4 uInputSize;
uniform vec4 uOutputFrame;
uniform vec4 uOutputTexture;

vec4 filterVertexPosition( void )
{
    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;
    
    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aPosition * (uOutputFrame.zw * uInputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`,O$=`struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;

struct VSOutput {
    @builtin(position) position: vec4<f32>,
    @location(0) uv : vec2<f32>
  };

fn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>
{
    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;

    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;
    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;

    return vec4(position, 0.0, 1.0);
}

fn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);
}

fn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>
{
  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);  
}

fn getSize() -> vec2<f32>
{
  return gfu.uGlobalFrame.zw;
}
  
@vertex
fn mainVertex(
  @location(0) aPosition : vec2<f32>, 
) -> VSOutput {
  return VSOutput(
   filterVertexPosition(aPosition),
   filterTextureCoord(aPosition)
  );
}`,B$=`precision highp float;
in vec2 vTextureCoord;
out vec4 finalColor;

uniform sampler2D uTexture;
uniform vec2 uThickness;
uniform vec3 uColor;
uniform float uAlpha;
uniform float uKnockout;

uniform vec4 uInputClamp;

const float DOUBLE_PI = 2. * 3.14159265358979323846264;
const float ANGLE_STEP = \${ANGLE_STEP};

float outlineMaxAlphaAtPos(vec2 pos) {
    if (uThickness.x == 0. || uThickness.y == 0.) {
        return 0.;
    }

    vec4 displacedColor;
    vec2 displacedPos;
    float maxAlpha = 0.;

    for (float angle = 0.; angle <= DOUBLE_PI; angle += ANGLE_STEP) {
        displacedPos.x = vTextureCoord.x + uThickness.x * cos(angle);
        displacedPos.y = vTextureCoord.y + uThickness.y * sin(angle);
        displacedColor = texture(uTexture, clamp(displacedPos, uInputClamp.xy, uInputClamp.zw));
        maxAlpha = max(maxAlpha, displacedColor.a);
    }

    return maxAlpha;
}

void main(void) {
    vec4 sourceColor = texture(uTexture, vTextureCoord);
    vec4 contentColor = sourceColor * float(uKnockout < 0.5);
    float outlineAlpha = uAlpha * outlineMaxAlphaAtPos(vTextureCoord.xy) * (1.-sourceColor.a);
    vec4 outlineColor = vec4(vec3(uColor) * outlineAlpha, outlineAlpha);
    finalColor = contentColor + outlineColor;
}
`,N$=`struct OutlineUniforms {
  uThickness:vec2<f32>,
  uColor:vec3<f32>,
  uAlpha:f32,
  uAngleStep:f32,
  uKnockout:f32,
};

struct GlobalFilterUniforms {
  uInputSize:vec4<f32>,
  uInputPixel:vec4<f32>,
  uInputClamp:vec4<f32>,
  uOutputFrame:vec4<f32>,
  uGlobalFrame:vec4<f32>,
  uOutputTexture:vec4<f32>,
};

@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;

@group(0) @binding(1) var uTexture: texture_2d<f32>; 
@group(0) @binding(2) var uSampler: sampler;
@group(1) @binding(0) var<uniform> outlineUniforms : OutlineUniforms;

@fragment
fn mainFragment(
  @builtin(position) position: vec4<f32>,
  @location(0) uv : vec2<f32>
) -> @location(0) vec4<f32> {
  let sourceColor: vec4<f32> = textureSample(uTexture, uSampler, uv);
  let contentColor: vec4<f32> = sourceColor * (1. - outlineUniforms.uKnockout);
  
  let outlineAlpha: f32 = outlineUniforms.uAlpha * outlineMaxAlphaAtPos(uv) * (1. - sourceColor.a);
  let outlineColor: vec4<f32> = vec4<f32>(vec3<f32>(outlineUniforms.uColor) * outlineAlpha, outlineAlpha);
  
  return contentColor + outlineColor;
}

fn outlineMaxAlphaAtPos(uv: vec2<f32>) -> f32 {
  let thickness = outlineUniforms.uThickness;

  if (thickness.x == 0. || thickness.y == 0.) {
    return 0.;
  }
  
  let angleStep = outlineUniforms.uAngleStep;

  var displacedColor: vec4<f32>;
  var displacedPos: vec2<f32>;

  var maxAlpha: f32 = 0.;
  var displaced: vec2<f32>;
  var curColor: vec4<f32>;

  for (var angle = 0.; angle <= DOUBLE_PI; angle += angleStep)
  {
    displaced.x = uv.x + thickness.x * cos(angle);
    displaced.y = uv.y + thickness.y * sin(angle);
    curColor = textureSample(uTexture, uSampler, clamp(displaced, gfu.uInputClamp.xy, gfu.uInputClamp.zw));
    maxAlpha = max(maxAlpha, curColor.a);
  }

  return maxAlpha;
}

const DOUBLE_PI: f32 = 3.14159265358979323846264 * 2.;`,U$=Object.defineProperty,z$=(t,e,r)=>e in t?U$(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,xn=(t,e,r)=>(z$(t,typeof e!="symbol"?e+"":e,r),r);const Ru=class hn extends J5{constructor(...e){let r=e[0]??{};typeof r=="number"&&(e_("6.0.0","OutlineFilter constructor params are now options object. See params: { thickness, color, quality, alpha, knockout }"),r={thickness:r},e[1]!==void 0&&(r.color=e[1]),e[2]!==void 0&&(r.quality=e[2]),e[3]!==void 0&&(r.alpha=e[3]),e[4]!==void 0&&(r.knockout=e[4])),r={...hn.DEFAULT_OPTIONS,...r};const i=r.quality??.1,n=t_.from({vertex:{source:O$,entryPoint:"mainVertex"},fragment:{source:N$,entryPoint:"mainFragment"}}),a=r_.from({vertex:L$,fragment:B$.replace(/\$\{ANGLE_STEP\}/,hn.getAngleStep(i).toFixed(7)),name:"outline-filter"});super({gpuProgram:n,glProgram:a,resources:{outlineUniforms:{uThickness:{value:new Float32Array(2),type:"vec2<f32>"},uColor:{value:new Float32Array(3),type:"vec3<f32>"},uAlpha:{value:r.alpha,type:"f32"},uAngleStep:{value:0,type:"f32"},uKnockout:{value:r.knockout?1:0,type:"f32"}}}}),xn(this,"uniforms"),xn(this,"_thickness"),xn(this,"_quality"),xn(this,"_color"),this.uniforms=this.resources.outlineUniforms.uniforms,this.uniforms.uAngleStep=hn.getAngleStep(i),this._color=new i_,this.color=r.color??0,Object.assign(this,r)}apply(e,r,i,n){this.uniforms.uThickness[0]=this.thickness/r.source.width,this.uniforms.uThickness[1]=this.thickness/r.source.height,e.applyFilter(this,r,i,n)}static getAngleStep(e){return parseFloat((Math.PI*2/Math.max(e*hn.MAX_SAMPLES,hn.MIN_SAMPLES)).toFixed(7))}get thickness(){return this._thickness}set thickness(e){this._thickness=this.padding=e}get color(){return this._color.value}set color(e){this._color.setValue(e);const[r,i,n]=this._color.toArray();this.uniforms.uColor[0]=r,this.uniforms.uColor[1]=i,this.uniforms.uColor[2]=n}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}get quality(){return this._quality}set quality(e){this._quality=e,this.uniforms.uAngleStep=hn.getAngleStep(e)}get knockout(){return this.uniforms.uKnockout===1}set knockout(e){this.uniforms.uKnockout=e?1:0}};xn(Ru,"DEFAULT_OPTIONS",{thickness:1,color:0,alpha:1,quality:.1,knockout:!1});xn(Ru,"MIN_SAMPLES",1);xn(Ru,"MAX_SAMPLES",100);let da=Ru;const H$=""+new URL("../images/AnchorIcon.png",import.meta.url).href,F$=""+new URL("../images/CityIcon.png",import.meta.url).href,q$=""+new URL("../images/FactoryUnit.png",import.meta.url).href,j$=""+new URL("../images/MissileSiloUnit.png",import.meta.url).href,G$=""+new URL("../images/SamLauncherUnit.png",import.meta.url).href,V$=""+new URL("../images/ShieldIcon.png",import.meta.url).href,jc={[C.City]:"circle",[C.Port]:"pentagon",[C.Factory]:"circle",[C.DefensePost]:"octagon",[C.SAMLauncher]:"square",[C.MissileSilo]:"triangle",[C.Warship]:"cross",[C.AtomBomb]:"cross",[C.HydrogenBomb]:"cross",[C.MIRV]:"cross"},Kx=3,K0=3.5,Gc=1.4,Qd=.5,gn=4.3,Y0={circle:28,octagon:28,pentagon:30,square:28,triangle:28,cross:20},Yx=4;class W${constructor(e,r,i,n){this.textureCache=new Map,this.structuresInfos=new Map([[C.City,{iconPath:F$,image:null}],[C.Factory,{iconPath:q$,image:null}],[C.DefensePost,{iconPath:V$,image:null}],[C.Port,{iconPath:H$,image:null}],[C.MissileSilo,{iconPath:j$,image:null}],[C.SAMLauncher,{iconPath:G$,image:null}]]),this.theme=e,this.game=r,this.transformHandler=i,this.renderSprites=n,this.structuresInfos.forEach((a,s)=>this.loadIcon(a,s))}loadIcon(e,r){const i=new Image;i.src=e.iconPath,i.onload=()=>{e.image=i,this.invalidateTextureCache(r)},i.onerror=()=>{console.error(`Failed to load icon for ${r}: ${e.iconPath}`)}}invalidateTextureCache(e){for(const r of Array.from(this.textureCache.keys()))r.includes(`-${e}`)&&this.textureCache.delete(r)}createGhostContainer(e,r,i,n){const a=new li,s=this.createTexture(n,e,!1,!1,!0),o=new lg(s);o.anchor.set(.5),o.alpha=.5,a.addChild(o);const l=new cg({text:"125K",style:{fontFamily:"round_6x6_modified",fontSize:12}});l.anchor.set(.5);const c=new li,u=18,p=(o.height>0?o.height/2:16)+u/2+4,d=8,h=32,g=l.width,y=Math.max(h,g+d*2),x=new ug;return x.roundRect(-y/2,p-u/2,y,u,4).fill({color:0,alpha:.65}),l.position.set(0,p),c.addChild(x),c.addChild(l),a.addChild(c),a.position.set(i.x,i.y),a.scale.set(Math.min(1,this.transformHandler.scale/Gc)),r.addChild(a),{container:a,priceText:l,priceBg:x,priceGroup:c,priceBox:{height:u,y:p,paddingX:d,minWidth:h}}}createUnitContainer(e,r){const i=new li,n=e.tile(),a=new We(this.game.x(n),this.game.y(n)),s=this.transformHandler.worldToScreenCoordinates(a),o=e.markedForDeletion()!==!1,l=e.isUnderConstruction(),c=e.type(),{type:u,stage:p}=r,{scale:d}=this.transformHandler;if(this.renderSprites=this.game.config().userSettings()?.structureSprites()??!0,u==="icon"||u==="dot"){const y=this.createTexture(c,e.owner(),l,o,u==="icon"),x=new lg(y);x.anchor.set(.5),i.addChild(x)}if((u==="icon"||u==="level")&&e.level()>1){const y=new cg({text:e.level().toString(),style:{fontFamily:"round_6x6_modified",fontSize:14}});y.anchor.set(.5);const x=jc[c];x!==void 0&&(y.position.y=Math.round(-Y0[x]/2-2)),i.addChild(y)}const h=Math.round(s.x);let g=Math.round(s.y);if(u==="level"&&d>=gn&&this.renderSprites&&(g=Math.round(s.y-d*Yx)),i.position.set(h,g),u==="icon"){const y=d>=gn&&!this.renderSprites?Math.max(1,d/K0):Math.min(1,d/Gc);i.scale.set(y)}else u==="level"&&i.scale.set(Math.max(1,d/Kx));return p.addChild(i),i}createTexture(e,r,i,n,a){const o=(i?`construction-${e}`:`${this.theme.territoryColor(r).toRgbString()}-${e}`)+(a?"-icon":"")+(n?"-deleted":"");if(this.textureCache.has(o))return this.textureCache.get(o);const l=jc[e],c=l?this.createIcon(r,e,i,n,l,a):dg.EMPTY;return this.textureCache.set(o,c),c}createIcon(e,r,i,n,a,s){const o=document.createElement("canvas");let l=Y0[a];s||(l/=2.5),o.width=Math.ceil(l),o.height=Math.ceil(l);const c=o.getContext("2d");c.fillStyle=i?"rgb(198,198,198)":e.structureColors().light.toRgbString(),c.strokeStyle=i?"rgb(127,127, 127)":e.structureColors().dark.toRgbString(),c.lineWidth=1;const u=l/2;switch(a){case"triangle":c.beginPath(),c.moveTo(u,1),c.lineTo(l-1,l-1),c.lineTo(0,l-1),c.closePath(),c.fill(),c.stroke();break;case"square":c.fillRect(1,1,l-2,l-2),c.strokeRect(1,1,l-3,l-3);break;case"octagon":{const d=u,h=u,g=u-1,y=Math.PI*2/8;c.beginPath();for(let x=0;x<8;x++){const m=y*x-Math.PI/8,k=d+g*Math.cos(m),S=h+g*Math.sin(m);x===0?c.moveTo(k,S):c.lineTo(k,S)}c.closePath(),c.fill(),c.stroke()}break;case"pentagon":{const d=u,h=u,g=u-1,y=Math.PI*2/5;c.beginPath();for(let x=0;x<5;x++){const m=y*x-Math.PI/2,k=d+g*Math.cos(m),S=h+g*Math.sin(m);x===0?c.moveTo(k,S):c.lineTo(k,S)}c.closePath(),c.fill(),c.stroke()}break;case"cross":{c.strokeStyle="rgba(0, 0, 0, 1)",c.fillStyle="rgba(0, 0, 0, 1)";const d=l*.18,h=l/2;c.save(),c.translate(u,u),c.beginPath(),c.moveTo(0,-d),c.lineTo(0,-h),c.stroke(),c.beginPath(),c.moveTo(0,d),c.lineTo(0,h),c.stroke(),c.beginPath(),c.moveTo(-d,0),c.lineTo(-h,0),c.stroke(),c.beginPath(),c.moveTo(d,0),c.lineTo(h,0),c.stroke(),c.restore();break}case"circle":c.beginPath(),c.arc(u,u,u-1,0,Math.PI*2),c.fill(),c.stroke();break;default:throw new Error(`Unknown shape: ${a}`)}const p=this.structuresInfos.get(r);if(p?.image&&s){const d={triangle:[6,11],square:[5,5],octagon:[6,6],pentagon:[7,7],circle:[6,6],cross:[0,0]},[h,g]=d[a]||[0,0];c.drawImage(this.getImageColored(p.image,e.structureColors().dark.toRgbString()),h,g)}if(n){c.save(),c.strokeStyle="rgba(255, 64, 64, 0.95)",c.lineWidth=Math.max(2,Math.round(l*.12)),c.lineCap="round";const d=Math.max(2,l*.12);c.beginPath(),c.moveTo(d,d),c.lineTo(l-d,l-d),c.moveTo(l-d,d),c.lineTo(d,l-d),c.stroke(),c.restore()}return dg.from(o)}createRange(e,r,i,n,a=!1){if(r===void 0)throw new Error("Not initialized");const s=new li,o=new ug;let l=0;switch(e){case C.SAMLauncher:l=this.game.config().samRange(n??1);break;case C.Factory:l=this.game.config().trainStationMaxRange();break;case C.DefensePost:l=this.game.config().defensePostRange();break;case C.AtomBomb:l=this.game.config().nukeMagnitudes(C.AtomBomb).outer;break;case C.HydrogenBomb:l=this.game.config().nukeMagnitudes(C.HydrogenBomb).outer;break;default:return null}const c=e===C.AtomBomb||e===C.HydrogenBomb,u=a&&c?16739125:16777215,p=a&&c?.35:.2,d=a&&c?16729156:16777215,h=a&&c?.8:.5,g=a&&c?2:1;return o.circle(0,0,l).fill({color:u,alpha:p}).stroke({width:g,color:d,alpha:h}),s.addChild(o),s.position.set(i.x,i.y),s.scale.set(this.transformHandler.scale),r.addChild(s),s}getImageColored(e,r){const i=document.createElement("canvas");i.width=e.width,i.height=e.height;const n=i.getContext("2d");return n.fillStyle=r,n.fillRect(0,0,i.width,i.height),n.globalCompositeOperation="destination-in",n.drawImage(e,0,0),i}}const K$=""+new URL("../fonts/round_6x6_modified.xml",import.meta.url).href;zo([D$]);class Y${constructor(e,r,i,n,a,s=0,o=!0){this.unit=e,this.owner=r,this.iconContainer=i,this.levelContainer=n,this.dotContainer=a,this.level=s,this.underConstruction=o,this.isOnScreen=!1}}class X${constructor(e,r,i,n){this.game=e,this.eventBus=r,this.uiState=i,this.transformHandler=n,this.ghostUnit=null,this.rootStage=new li,this.playerActions=null,this.renderer=null,this.rendererInitialized=!1,this.renders=[],this.seenUnits=new Set,this.mousePos={x:0,y:0},this.renderSprites=!0,this.structures=new Map([[C.City,{visible:!0}],[C.Factory,{visible:!0}],[C.DefensePost,{visible:!0}],[C.Port,{visible:!0}],[C.MissileSilo,{visible:!0}],[C.SAMLauncher,{visible:!0}]]),this.theme=e.config().theme(),this.factory=new W$(this.theme,e,n,this.renderSprites)}async setupRenderer(){try{await n_.load(K$)}catch(r){console.error("Failed to load bitmap font:",r)}const e=new a_;this.pixicanvas=document.createElement("canvas"),this.pixicanvas.width=window.innerWidth,this.pixicanvas.height=window.innerHeight,this.iconsStage=new li,this.iconsStage.position.set(0,0),this.iconsStage.setSize(this.pixicanvas.width,this.pixicanvas.height),this.ghostStage=new li,this.ghostStage.position.set(0,0),this.ghostStage.setSize(this.pixicanvas.width,this.pixicanvas.height),this.levelsStage=new li,this.levelsStage.position.set(0,0),this.levelsStage.setSize(this.pixicanvas.width,this.pixicanvas.height),this.dotsStage=new li,this.dotsStage.position.set(0,0),this.dotsStage.setSize(this.pixicanvas.width,this.pixicanvas.height),this.rootStage.addChild(this.dotsStage,this.iconsStage,this.levelsStage,this.ghostStage),this.rootStage.position.set(0,0),this.rootStage.setSize(this.pixicanvas.width,this.pixicanvas.height),await e.init({canvas:this.pixicanvas,resolution:1,width:this.pixicanvas.width,height:this.pixicanvas.height,antialias:!1,clearBeforeRender:!0,backgroundAlpha:0,backgroundColor:0}),this.renderer=e,this.rendererInitialized=!0}shouldTransform(){return!1}async init(){this.eventBus.on(ba,e=>this.toggleStructures(e.structureTypes)),this.eventBus.on(Vo,e=>this.moveGhost(e)),this.eventBus.on(Cn,e=>this.createStructure(e)),window.addEventListener("resize",()=>this.resizeCanvas()),await this.setupRenderer(),this.redraw()}resizeCanvas(){this.renderer&&(this.pixicanvas.width=window.innerWidth,this.pixicanvas.height=window.innerHeight,this.renderer.resize(innerWidth,innerHeight,1))}tick(){this.game.updatesSinceLastTick()?.[ye.Unit]?.map(e=>this.game.unit(e.id))?.forEach(e=>{e!==void 0&&(e.isActive()?this.handleActiveUnit(e):this.seenUnits.has(e)&&this.handleInactiveUnit(e))}),this.renderSprites=this.game.config().userSettings()?.structureSprites()??!0}redraw(){this.resizeCanvas()}renderLayer(e){if(!this.renderer||!this.rendererInitialized)return;if(this.ghostUnit?this.uiState.ghostStructure===null?this.removeGhostStructure():this.uiState.ghostStructure!==this.ghostUnit.buildableUnit.type&&this.clearGhostStructure():this.uiState.ghostStructure!==null&&this.createGhostStructure(this.uiState.ghostStructure),this.renderGhost(),this.transformHandler.hasChanged())for(const i of this.renders)this.computeNewLocation(i);const r=this.transformHandler.scale;this.dotsStage.visible=r<=Qd,this.iconsStage.visible=r>Qd&&(r<=gn||!this.renderSprites),this.levelsStage.visible=r>gn&&this.renderSprites,this.renderer.render(this.rootStage),e.drawImage(this.renderer.canvas,0,0)}renderGhost(){if(!this.ghostUnit)return;const e=performance.now();if(e-this.lastGhostQueryAt<50)return;const r=this.transformHandler.boundingRect();if(!r)return;const i=this.mousePos.x-r.left,n=this.mousePos.y-r.top;this.lastGhostQueryAt=e;let a;const s=this.transformHandler.screenToWorldCoordinates(i,n);this.game.isValidCoord(s.x,s.y)&&(a=this.game.ref(s.x,s.y));let o=!1;const l=this.game.myPlayer(),c=this.ghostUnit.buildableUnit.type;if(a&&l&&(c===C.AtomBomb||c===C.HydrogenBomb)){const u=l.allies().filter(p=>!p.isDisconnected());u.length>0&&(o=X9({game:this.game,targetTile:a,magnitude:this.game.config().nukeMagnitudes(c),allySmallIds:new Set(u.map(p=>p.smallID())),threshold:this.game.config().nukeAllianceBreakThreshold()}))}this.game?.myPlayer()?.actions(a).then(u=>{if(this.potentialUpgrade&&(this.potentialUpgrade.iconContainer.filters=[],this.potentialUpgrade.dotContainer.filters=[]),this.ghostUnit?.container&&(this.ghostUnit.container.filters=[]),!this.ghostUnit)return;const p=u.buildableUnits.find(x=>x.type===this.ghostUnit.buildableUnit.type),d=this.game.config().userSettings().cursorCostLabel();if(!p){Object.assign(this.ghostUnit.buildableUnit,{canBuild:!1,canUpgrade:!1}),this.updateGhostPrice(0,d),this.ghostUnit.container.filters=[new da({thickness:2,color:"rgba(255, 0, 0, 1)"})];return}this.ghostUnit.buildableUnit=p,this.updateGhostPrice(p.cost??0,d);const h=this.resolveGhostRangeLevel(p);this.updateGhostRange(h,o),p.canUpgrade?(this.potentialUpgrade=this.renders.find(x=>x.unit.id()===p.canUpgrade&&x.unit.owner().id()===this.game.myPlayer()?.id()),this.potentialUpgrade&&(this.potentialUpgrade.iconContainer.filters=[new da({thickness:2,color:"rgba(0, 255, 0, 1)"})],this.potentialUpgrade.dotContainer.filters=[new da({thickness:2,color:"rgba(0, 255, 0, 1)"})]),this.uiState.overlappingRailroads=[]):p.canBuild===!1?(this.ghostUnit.container.filters=[new da({thickness:2,color:"rgba(255, 0, 0, 1)"})],this.uiState.overlappingRailroads=[]):this.uiState.overlappingRailroads=p.overlappingRailroads;const g=this.transformHandler.scale,y=g>=gn?Math.max(1,g/K0):Math.min(1,g/Gc);this.ghostUnit.container.scale.set(y),this.ghostUnit.range?.scale.set(this.transformHandler.scale)})}updateGhostPrice(e,r){if(!this.ghostUnit)return;const{priceText:i,priceBg:n,priceBox:a,priceGroup:s}=this.ghostUnit;if(s.visible=r,!r)return;i.text=ce(e),i.position.set(0,a.y);const o=i.width,l=Math.max(a.minWidth,o+a.paddingX*2);n.clear(),n.roundRect(-l/2,a.y-a.height/2,l,a.height,4).fill({color:0,alpha:.65})}createStructure(e){if(!this.ghostUnit)return;if(this.ghostUnit.buildableUnit.canBuild===!1&&this.ghostUnit.buildableUnit.canUpgrade===!1){this.removeGhostStructure();return}const r=this.transformHandler.boundingRect();if(!r)return;const i=e.x-r.left,n=e.y-r.top,a=this.transformHandler.screenToWorldCoordinates(i,n);if(this.ghostUnit.buildableUnit.canUpgrade!==!1)this.eventBus.emit(new xu(this.ghostUnit.buildableUnit.canUpgrade,this.ghostUnit.buildableUnit.type));else if(this.ghostUnit.buildableUnit.canBuild){const s=this.ghostUnit.buildableUnit.type,o=s===C.AtomBomb||s===C.HydrogenBomb?this.uiState.rocketDirectionUp:void 0;this.eventBus.emit(new Jp(s,this.game.ref(a.x,a.y),o))}this.removeGhostStructure()}moveGhost(e){if(this.mousePos.x=e.x,this.mousePos.y=e.y,!this.ghostUnit)return;const r=this.transformHandler.boundingRect();if(!r)return;const i=e.x-r.left,n=e.y-r.top;this.ghostUnit.container.position.set(i,n),this.ghostUnit.range?.position.set(i,n)}createGhostStructure(e){const r=this.game.myPlayer();if(!r||e===null)return;const i=this.transformHandler.boundingRect(),n=this.mousePos.x-i.left,a=this.mousePos.y-i.top,s=this.factory.createGhostContainer(r,this.ghostStage,{x:n,y:a},e);this.ghostUnit={container:s.container,priceText:s.priceText,priceBg:s.priceBg,priceGroup:s.priceGroup,priceBox:s.priceBox,range:null,buildableUnit:{type:e,canBuild:!1,canUpgrade:!1,cost:0n,overlappingRailroads:[]}};const o=this.game.config().userSettings().cursorCostLabel();this.updateGhostPrice(0,o);const l=this.resolveGhostRangeLevel(this.ghostUnit.buildableUnit);this.updateGhostRange(l)}clearGhostStructure(){this.ghostUnit&&(this.ghostUnit.container.destroy(),this.ghostUnit.range?.destroy(),this.ghostUnit=null),this.potentialUpgrade&&(this.potentialUpgrade.iconContainer.filters=[],this.potentialUpgrade.dotContainer.filters=[],this.potentialUpgrade=void 0)}removeGhostStructure(){this.clearGhostStructure(),this.uiState.ghostStructure=null,this.eventBus.emit(new _o(null))}resolveGhostRangeLevel(e){if(e.type===C.SAMLauncher){if(e.canUpgrade!==!1){const r=this.game.unit(e.canUpgrade);if(r)return r.level()+1;console.error("Failed to find existing SAMLauncher for upgrade")}return 1}}updateGhostRange(e,r=!1){if(!this.ghostUnit||this.ghostUnit.range&&this.ghostUnit.rangeLevel===e&&this.ghostUnit.targetingAlly===r)return;this.ghostUnit.range?.destroy(),this.ghostUnit.range=null,this.ghostUnit.rangeLevel=e,this.ghostUnit.targetingAlly=r;const i=this.ghostUnit.container.position,n=this.factory.createRange(this.ghostUnit.buildableUnit.type,this.ghostStage,{x:i.x,y:i.y},e,r);n&&(this.ghostUnit.range=n)}toggleStructures(e){for(const[r,i]of this.structures)i.visible=e?.indexOf(r)!==-1||e===null;for(const r of this.renders)this.modifyVisibility(r)}findRenderByUnit(e){return this.renders.find(r=>r.unit.id()===e.id())}handleActiveUnit(e){if(this.seenUnits.has(e)){const r=this.findRenderByUnit(e);r&&(this.checkForConstructionState(r,e),this.checkForDeletionState(r,e),this.checkForOwnershipChange(r,e),this.checkForLevelChange(r,e))}else this.structures.has(e.type())&&this.addNewStructure(e)}handleInactiveUnit(e){const r=this.findRenderByUnit(e);r&&this.deleteStructure(r)}modifyVisibility(e){const r=e.unit.type(),i=this.structures.get(r);let n=!1;for(const a of this.structures.values())if(a.visible===!1){n=!0;break}i&&(e.iconContainer.alpha=i.visible?1:.3,e.dotContainer.alpha=i.visible?1:.3,i.visible&&n?(e.iconContainer.filters=[new da({thickness:2,color:"rgb(255, 255, 255)"})],e.dotContainer.filters=[new da({thickness:2,color:"rgb(255, 255, 255)"})]):(e.iconContainer.filters=[],e.dotContainer.filters=[]))}checkForDeletionState(e,r){r.markedForDeletion()!==!1&&(e.iconContainer?.destroy(),e.dotContainer?.destroy(),e.iconContainer=this.createIconSprite(r),e.dotContainer=this.createDotSprite(r),this.modifyVisibility(e))}checkForConstructionState(e,r){e.underConstruction&&!r.isUnderConstruction()&&(e.underConstruction=!1,e.iconContainer?.destroy(),e.dotContainer?.destroy(),e.iconContainer=this.createIconSprite(r),e.dotContainer=this.createDotSprite(r),this.modifyVisibility(e))}checkForOwnershipChange(e,r){e.owner!==r.owner().id()&&(e.owner=r.owner().id(),e.iconContainer?.destroy(),e.dotContainer?.destroy(),e.iconContainer=this.createIconSprite(r),e.dotContainer=this.createDotSprite(r),this.modifyVisibility(e))}checkForLevelChange(e,r){e.level!==r.level()&&(e.level=r.level(),e.iconContainer?.destroy(),e.levelContainer?.destroy(),e.dotContainer?.destroy(),e.iconContainer=this.createIconSprite(r),e.levelContainer=this.createLevelSprite(r),e.dotContainer=this.createDotSprite(r),this.modifyVisibility(e))}computeNewLocation(e){const r=e.unit.tile(),i=new We(this.game.x(r),this.game.y(r)),n=this.transformHandler.worldToScreenCoordinates(i);n.x=Math.round(n.x);const a=this.transformHandler.scale;n.y=Math.round(a>=gn&&this.game.config().userSettings()?.structureSprites()?n.y-a*Yx:n.y);const s=e.unit.type(),o=s!==void 0&&jc[s]!==void 0?Y0[jc[s]]:28,l=n.x+o>0&&n.x-o<this.pixicanvas.width&&n.y+o>0&&n.y-o<this.pixicanvas.height;if(l)if(a>gn){const c=this.game.config().userSettings()?.structureSprites()?e.levelContainer:e.iconContainer;c.position.set(n.x,n.y),c.scale.set(Math.max(1,a/(c===e.levelContainer?Kx:K0)))}else a>Qd?(e.iconContainer.position.set(n.x,n.y),e.iconContainer.scale.set(Math.min(1,a/Gc))):e.dotContainer.position.set(n.x,n.y);e.isOnScreen!==l&&(e.isOnScreen=l,e.iconContainer.visible=l,e.dotContainer.visible=l,e.levelContainer.visible=l)}addNewStructure(e){this.seenUnits.add(e);const r=new Y$(e,e.owner().id(),this.createIconSprite(e),this.createLevelSprite(e),this.createDotSprite(e),e.level(),e.isUnderConstruction());this.renders.push(r),this.computeNewLocation(r),this.modifyVisibility(r)}createLevelSprite(e){return this.factory.createUnitContainer(e,{type:"level",stage:this.levelsStage})}createDotSprite(e){return this.factory.createUnitContainer(e,{type:"dot",stage:this.dotsStage})}createIconSprite(e){return this.factory.createUnitContainer(e,{type:"icon",stage:this.iconsStage})}deleteStructure(e){e.iconContainer?.destroy(),e.levelContainer?.destroy(),e.dotContainer?.destroy(),this.renders=this.renders.filter(r=>r.unit!==e.unit),this.seenUnits.delete(e.unit)}}const Z$=""+new URL("../images/buildings/cityAlt1.png",import.meta.url).href,Q$=""+new URL("../images/buildings/factoryAlt1.png",import.meta.url).href,J$=""+new URL("../images/buildings/fortAlt3.png",import.meta.url).href,e7=""+new URL("../images/buildings/port1.png",import.meta.url).href,t7=""+new URL("../images/buildings/silo1.png",import.meta.url).href,r7=""+new URL("../images/buildings/silo4.png",import.meta.url).href,Wb=b("rgb(150,150,150)"),ha=16.5,pa=13.5,ar=.5,i7=4.3;class n7{constructor(e,r,i){this.game=e,this.eventBus=r,this.transformHandler=i,this.unitIcons=new Map,this.unitConfigs={[C.Port]:{icon:e7,borderRadius:ha*ar,territoryRadius:pa*ar},[C.City]:{icon:Z$,borderRadius:ha*ar,territoryRadius:pa*ar},[C.Factory]:{icon:Q$,borderRadius:ha*ar,territoryRadius:pa*ar},[C.MissileSilo]:{icon:t7,borderRadius:ha*ar,territoryRadius:pa*ar},[C.DefensePost]:{icon:J$,borderRadius:ha*ar,territoryRadius:pa*ar},[C.SAMLauncher]:{icon:r7,borderRadius:ha*ar,territoryRadius:pa*ar}},this.theme=e.config().theme(),this.tempCanvas=document.createElement("canvas");const n=this.tempCanvas.getContext("2d");if(n===null)throw new Error("2d context not supported");this.tempContext=n,this.loadIconData()}loadIcon(e,r){const i=new Image;i.src=r.icon,i.onload=()=>{this.unitIcons.set(e,i),console.log(`icon loaded: ${e}, size: ${i.width}x${i.height}`)},i.onerror=()=>{console.error(`Failed to load icon for ${e}: ${r.icon}`)}}loadIconData(){Object.entries(this.unitConfigs).forEach(([e,r])=>{this.loadIcon(e,r)})}shouldTransform(){return!0}tick(){const e=this.game.updatesSinceLastTick(),r=e!==null?e[ye.Unit]:[];for(const i of r){const n=this.game.unit(i.id);n!==void 0&&this.handleUnitRendering(n)}}init(){this.redraw()}redraw(){console.log("structure layer redrawing"),this.canvas=document.createElement("canvas");const e=this.canvas.getContext("2d",{alpha:!0});if(e===null)throw new Error("2d context not supported");this.context=e,this.context.imageSmoothingEnabled=!0,this.context.imageSmoothingQuality="high",this.canvas.width=this.game.width()*2,this.canvas.height=this.game.height()*2,Promise.all(Array.from(this.unitIcons.values()).map(r=>r.decode?.().catch(i=>{console.warn("Failed to decode unit icon image:",i)}))).finally(()=>{this.game.units().forEach(r=>this.handleUnitRendering(r))})}renderLayer(e){this.transformHandler.scale<=i7||!this.game.config().userSettings()?.structureSprites()||e.drawImage(this.canvas,-this.game.width()/2,-this.game.height()/2,this.game.width(),this.game.height())}isUnitTypeSupported(e){return e in this.unitConfigs}drawBorder(e,r,i){for(const n of this.game.bfs(e.tile(),fb(e.tile(),i.borderRadius,!0)))this.paintCell(new We(this.game.x(n),this.game.y(n)),r,255);for(const n of this.game.bfs(e.tile(),fb(e.tile(),i.territoryRadius,!0)))this.paintCell(new We(this.game.x(n),this.game.y(n)),e.isUnderConstruction()?Wb:e.owner().territoryColor(),130)}handleUnitRendering(e){const r=e.type(),i=r;if(!this.isUnitTypeSupported(r))return;const n=this.unitConfigs[r];let a,s=e.owner().borderColor();if(e.isUnderConstruction()?(a=this.unitIcons.get(i),s=Wb):a=this.unitIcons.get(i),!n||!a)return;for(const p of this.game.bfs(e.tile(),S0(e.tile(),n.borderRadius+1,!0)))this.clearCell(new We(this.game.x(p),this.game.y(p)));if(!e.isActive())return;this.drawBorder(e,s,n);const o=a.width>>1,l=a.height>>1,c=this.game.x(e.tile())-(o>>1),u=this.game.y(e.tile())-(l>>1);this.renderIcon(a,c,u-4,o,l,e)}renderIcon(e,r,i,n,a,s){s.owner().borderColor(),s.isUnderConstruction(),this.tempCanvas.width=n*2,this.tempCanvas.height=a*2,this.tempContext.imageSmoothingEnabled=!0,this.tempContext.imageSmoothingQuality="high",this.tempContext.drawImage(e,0,0,n*2,a*2),this.tempContext.globalCompositeOperation="destination-in",this.tempContext.drawImage(e,0,0,n*2,a*2),this.context.drawImage(this.tempCanvas,r*2,i*2)}paintCell(e,r,i){this.clearCell(e),this.context.fillStyle=r.alpha(i/255).toRgbString(),this.context.fillRect(e.x*2,e.y*2,2,2)}clearCell(e){this.context.clearRect(e.x*2,e.y*2,2,2)}}var a7=Object.defineProperty,s7=Object.getOwnPropertyDescriptor,Xx=(t,e,r,i)=>{for(var n=i>1?void 0:i?s7(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&a7(e,r,n),n};let Vc=class extends V{constructor(){super(...arguments),this.visible=!1,this.teams=[],this._shownOnInit=!1,this.showUnits=!1,this._myTeam=null}createRenderRoot(){return this}init(){}getTickIntervalMs(){return 1e3}tick(){this.game.config().gameConfig().gameMode===pe.Team&&(!this._shownOnInit&&!this.game.inSpawnPhase()&&(this._shownOnInit=!0,this.updateTeamStats()),this.visible&&this.updateTeamStats())}updateTeamStats(){const t=this.game.playerViews(),e={};if(this._myTeam===null){const r=this.game.myPlayer();this._myTeam=r?.team()??null}for(const r of t){const i=r.team();i!==null&&(e[i]??=[],e[i].push(r))}this.teams=Object.entries(e).map(([r,i])=>{let n=0n,a=0,s=0,o=0,l=0,c=0,u=0;for(const h of i)h.isAlive()&&(a+=this.game.config().maxTroops(h),n+=h.gold(),s+=h.numTilesOwned(),l+=h.totalUnitLevels(C.MissileSilo),o+=h.totalUnitLevels(C.SAMLauncher),c+=h.totalUnitLevels(C.Warship),u+=h.totalUnitLevels(C.City));const p=this.game.numLandTiles()-this.game.numTilesWithFallout(),d=s/p;return{teamName:r,isMyTeam:r===this._myTeam,totalScoreStr:b0(d),totalScoreSort:s,totalGold:ce(n),totalMaxTroops:Je(a),players:i,totalLaunchers:ce(l),totalSAMs:ce(o),totalWarShips:ce(c),totalCities:ce(u)}}).sort((r,i)=>i.totalScoreSort-r.totalScoreSort),this.requestUpdate()}renderLayer(t){}shouldTransform(){return!1}render(){return this.visible?v`
      <div
        class="max-h-[30vh] overflow-y-auto grid bg-slate-800/70 w-full text-white text-xs md:text-sm mt-2"
        @contextmenu=${t=>t.preventDefault()}
      >
        <div
          class="grid w-full grid-cols-[repeat(var(--cols),1fr)]"
          style="--cols:${this.showUnits?5:4};"
        >
          <!-- Header -->
          <div class="contents font-bold bg-slate-700/50">
            <div class="p-1.5 md:p-2.5 text-center border-b border-slate-500">
              ${f("leaderboard.team")}
            </div>
            ${this.showUnits?v`
                  <div
                    class="p-1.5 md:p-2.5 text-center border-b border-slate-500"
                  >
                    ${f("leaderboard.launchers")}
                  </div>
                  <div
                    class="p-1.5 md:p-2.5 text-center border-b border-slate-500"
                  >
                    ${f("leaderboard.sams")}
                  </div>
                  <div
                    class="p-1.5 md:p-2.5 text-center border-b border-slate-500"
                  >
                    ${f("leaderboard.warships")}
                  </div>
                  <div
                    class="p-1.5 md:p-2.5 text-center border-b border-slate-500"
                  >
                    ${f("leaderboard.cities")}
                  </div>
                `:v`
                  <div
                    class="p-1.5 md:p-2.5 text-center border-b border-slate-500"
                  >
                    ${f("leaderboard.owned")}
                  </div>
                  <div
                    class="p-1.5 md:p-2.5 text-center border-b border-slate-500"
                  >
                    ${f("leaderboard.gold")}
                  </div>
                  <div
                    class="p-1.5 md:p-2.5 text-center border-b border-slate-500"
                  >
                    ${f("leaderboard.maxtroops")}
                  </div>
                `}
          </div>

          <!-- Data rows -->
          ${this.teams.map(t=>this.showUnits?v`
                  <div
                    class="contents hover:bg-slate-600/60 text-center cursor-pointer ${t.isMyTeam?"font-bold":""}"
                  >
                    <div class="py-1.5 border-b border-slate-500">
                      ${t.teamName}
                    </div>
                    <div class="py-1.5 border-b border-slate-500">
                      ${t.totalLaunchers}
                    </div>
                    <div class="py-1.5 border-b border-slate-500">
                      ${t.totalSAMs}
                    </div>
                    <div class="py-1.5 border-b border-slate-500">
                      ${t.totalWarShips}
                    </div>
                    <div class="py-1.5 border-b border-slate-500">
                      ${t.totalCities}
                    </div>
                  </div>
                `:v`
                  <div
                    class="contents hover:bg-slate-600/60 text-center cursor-pointer ${t.isMyTeam?"font-bold":""}"
                  >
                    <div class="py-1.5 border-b border-slate-500">
                      ${t.teamName}
                    </div>
                    <div class="py-1.5 border-b border-slate-500">
                      ${t.totalScoreStr}
                    </div>
                    <div class="py-1.5 border-b border-slate-500">
                      ${t.totalGold}
                    </div>
                    <div class="py-1.5 border-b border-slate-500">
                      ${t.totalMaxTroops}
                    </div>
                  </div>
                `)}
        </div>
        <button
          class="team-stats-button"
          aria-pressed=${String(this.showUnits)}
          @click=${()=>{this.showUnits=!this.showUnits,this.requestUpdate()}}
        >
          ${this.showUnits?f("leaderboard.show_control"):f("leaderboard.show_units")}
        </button>
      </div>
    `:v``}};Xx([L({type:Boolean})],Vc.prototype,"visible",2);Vc=Xx([F("team-stats")],Vc);class o7{constructor(e,r){this.game=e,this.transformHandler=r}shouldTransform(){return!0}tick(){this.game.config().theme()!==this.theme&&this.redraw()}init(){console.log("redrew terrain layer"),this.redraw()}redraw(){this.canvas=document.createElement("canvas"),this.canvas.width=this.game.width(),this.canvas.height=this.game.height();const e=this.canvas.getContext("2d",{alpha:!1});if(e===null)throw new Error("2d context not supported");this.context=e,this.imageData=this.context.createImageData(this.canvas.width,this.canvas.height),this.initImageData(),this.context.putImageData(this.imageData,0,0)}initImageData(){this.theme=this.game.config().theme(),this.game.forEachTile(e=>{const r=this.theme.terrainColor(this.game,e),n=(this.game.y(e)*this.game.width()+this.game.x(e))*4;this.imageData.data[n]=r.rgba.r,this.imageData.data[n+1]=r.rgba.g,this.imageData.data[n+2]=r.rgba.b,this.imageData.data[n+3]=255})}renderLayer(e){this.transformHandler.scale<1?(e.imageSmoothingEnabled=!0,e.imageSmoothingQuality="low"):e.imageSmoothingEnabled=!1,e.drawImage(this.canvas,-this.game.width()/2,-this.game.height()/2,this.game.width(),this.game.height())}}var Jd={},Ss={},eh={};var Kb;function Tf(){if(Kb)return eh;Kb=1;class t{constructor(r,i,n){if(typeof r!="function")throw new Error("Heap constructor expects a compare function");this._compare=r,this._nodes=Array.isArray(i)?i:[],this._leaf=n||null}toArray(){return Array.from(this._nodes)}_hasLeftChild(r){return r*2+1<this.size()}_hasRightChild(r){return r*2+2<this.size()}_compareAt(r,i){return this._compare(this._nodes[r],this._nodes[i])}_swap(r,i){const n=this._nodes[r];this._nodes[r]=this._nodes[i],this._nodes[i]=n}_shouldSwap(r,i){return r<0||r>=this.size()||i<0||i>=this.size()?!1:this._compareAt(r,i)>0}_compareChildrenOf(r){if(!this._hasLeftChild(r)&&!this._hasRightChild(r))return-1;const i=r*2+1,n=r*2+2;return this._hasLeftChild(r)?this._hasRightChild(r)&&this._compareAt(i,n)>0?n:i:n}_compareChildrenBefore(r,i,n){return this._compareAt(n,i)<=0&&n<r?n:i}_heapifyUp(r){let i=r,n=Math.floor((i-1)/2);for(;this._shouldSwap(n,i);)this._swap(n,i),i=n,n=Math.floor((i-1)/2)}_heapifyDown(r){let i=r,n=this._compareChildrenOf(i);for(;this._shouldSwap(i,n);)this._swap(i,n),i=n,n=this._compareChildrenOf(i)}_heapifyDownUntil(r){let i=0,n=1,a=2,s;for(;n<r;)s=this._compareChildrenBefore(r,n,a),this._shouldSwap(i,s)&&this._swap(i,s),i=s,n=i*2+1,a=i*2+2}insert(r){return this._nodes.push(r),this._heapifyUp(this.size()-1),(this._leaf===null||this._compare(r,this._leaf)>0)&&(this._leaf=r),this}push(r){return this.insert(r)}extractRoot(){if(this.isEmpty())return null;const r=this.root();return this._nodes[0]=this._nodes[this.size()-1],this._nodes.pop(),this._heapifyDown(0),r===this._leaf&&(this._leaf=this.root()),r}pop(){return this.extractRoot()}sort(){for(let r=this.size()-1;r>0;r-=1)this._swap(0,r),this._heapifyDownUntil(r);return this._nodes}fix(){for(let r=Math.floor(this.size()/2)-1;r>=0;r-=1)this._heapifyDown(r);for(let r=Math.floor(this.size()/2);r<this.size();r+=1){const i=this._nodes[r];(this._leaf===null||this._compare(i,this._leaf)>0)&&(this._leaf=i)}return this}isValid(){const r=i=>{let n=!0,a=!0;if(this._hasLeftChild(i)){const s=i*2+1;if(this._compareAt(i,s)>0)return!1;n=r(s)}if(this._hasRightChild(i)){const s=i*2+2;if(this._compareAt(i,s)>0)return!1;a=r(s)}return n&&a};return r(0)}clone(){return new t(this._compare,this._nodes.slice(),this._leaf)}root(){return this.isEmpty()?null:this._nodes[0]}top(){return this.root()}leaf(){return this._leaf}size(){return this._nodes.length}isEmpty(){return this.size()===0}clear(){this._nodes=[],this._leaf=null}[Symbol.iterator](){let r=this.size();return{next:()=>(r-=1,{value:this.pop(),done:r===-1})}}static heapify(r,i){if(!Array.isArray(r))throw new Error("Heap.heapify expects an array of values");if(typeof i!="function")throw new Error("Heap.heapify expects a compare function");return new t(i,r).fix()}static isHeapified(r,i){return new t(i,r).isValid()}}return eh.Heap=t,eh}var th={};var Yb;function l7(){if(Yb)return th;Yb=1;const{Heap:t}=Tf(),e=i=>(n,a)=>{const s=typeof i=="function"?i(n):n,o=typeof i=="function"?i(a):a;return s<=o?-1:1};class r{constructor(n,a){this._getCompareValue=n,this._heap=a||new t(e(n))}toArray(){return Array.from(this._heap._nodes)}insert(n){return this._heap.insert(n)}push(n){return this.insert(n)}extractRoot(){return this._heap.extractRoot()}pop(){return this.extractRoot()}sort(){return this._heap.sort()}fix(){return this._heap.fix()}isValid(){return this._heap.isValid()}root(){return this._heap.root()}top(){return this.root()}leaf(){return this._heap.leaf()}size(){return this._heap.size()}isEmpty(){return this._heap.isEmpty()}clear(){this._heap.clear()}clone(){return new r(this._getCompareValue,this._heap.clone())}[Symbol.iterator](){let n=this.size();return{next:()=>(n-=1,{value:this.pop(),done:n===-1})}}static heapify(n,a){if(!Array.isArray(n))throw new Error("MinHeap.heapify expects an array");const s=new t(e(a),n);return new r(a,s).fix()}static isHeapified(n,a){const s=new t(e(a),n);return new r(a,s).isValid()}}return th.MinHeap=r,th}var rh={};var Xb;function c7(){if(Xb)return rh;Xb=1;const{Heap:t}=Tf(),e=i=>(n,a)=>{const s=typeof i=="function"?i(n):n,o=typeof i=="function"?i(a):a;return s<o?1:-1};class r{constructor(n,a){this._getCompareValue=n,this._heap=a||new t(e(n))}insert(n){return this._heap.insert(n)}push(n){return this.insert(n)}extractRoot(){return this._heap.extractRoot()}pop(){return this.extractRoot()}sort(){return this._heap.sort()}toArray(){return Array.from(this._heap._nodes)}fix(){return this._heap.fix()}isValid(){return this._heap.isValid()}root(){return this._heap.root()}top(){return this.root()}leaf(){return this._heap.leaf()}size(){return this._heap.size()}isEmpty(){return this._heap.isEmpty()}clear(){this._heap.clear()}clone(){return new r(this._getCompareValue,this._heap.clone())}[Symbol.iterator](){let n=this.size();return{next:()=>(n-=1,{value:this.pop(),done:n===-1})}}static heapify(n,a){if(!Array.isArray(n))throw new Error("MaxHeap.heapify expects an array");const s=new t(e(a),n);return new r(a,s).fix()}static isHeapified(n,a){const s=new t(e(a),n);return new r(a,s).isValid()}}return rh.MaxHeap=r,rh}var Zb;function Ef(){if(Zb)return Ss;Zb=1;const{Heap:t}=Tf(),{MinHeap:e}=l7(),{MaxHeap:r}=c7();return Ss.Heap=t,Ss.MinHeap=e,Ss.MaxHeap=r,Ss}var Qb;function u7(){if(Qb)return Jd;Qb=1;const{Heap:t,MinHeap:e}=Ef(),r=n=>(a,s)=>{const o=typeof n=="function"?n(a):a,l=typeof n=="function"?n(s):s;return o<=l?-1:1};class i{constructor(a,s){if(a&&typeof a=="object"&&typeof a.compare=="function"){this._getCompareValue=null;const o=(l,c)=>a.compare(l,c)<=0?-1:1;this._heap=s||new t(o)}else{const o=a;if(o&&typeof o!="function")throw new Error("MinPriorityQueue constructor requires a callback for object values");this._heap=s||new e(o)}}front(){return this._heap.root()}back(){return this._heap.leaf()}enqueue(a){return this._heap.insert(a)}push(a){return this.enqueue(a)}dequeue(){return this._heap.extractRoot()}pop(){return this.dequeue()}remove(a){if(typeof a!="function")throw new Error("MinPriorityQueue remove expects a callback");const s=[],o=[];for(;!this.isEmpty();){const l=this.pop();a(l)?s.push(l):o.push(l)}return o.forEach(l=>this.push(l)),s}contains(a){if(typeof a!="function")throw new Error("MinPriorityQueue contains expects a callback");let s=!1;const o=[];for(;!this.isEmpty();){const l=this.pop();if(o.push(l),a(l)){s=!0;break}}return o.forEach(l=>this.push(l)),s}size(){return this._heap.size()}isEmpty(){return this._heap.isEmpty()}clear(){this._heap.clear()}toArray(){return this._heap.clone().sort().reverse()}[Symbol.iterator](){let a=this.size();return{next:()=>(a-=1,{value:this.pop(),done:a===-1})}}static fromArray(a,s){const o=new t(r(s),a);return new i(s,new e(s,o).fix())}}return Jd.MinPriorityQueue=i,Jd}var ih={};var Jb;function d7(){if(Jb)return ih;Jb=1;const{Heap:t,MaxHeap:e}=Ef(),r=n=>(a,s)=>{const o=typeof n=="function"?n(a):a,l=typeof n=="function"?n(s):s;return o<l?1:-1};class i{constructor(a,s){if(a&&typeof a=="object"&&typeof a.compare=="function"){this._getCompareValue=null;const o=(l,c)=>a.compare(l,c)>=0?-1:1;this._heap=s||new t(o)}else{const o=a;if(o&&typeof o!="function")throw new Error("MaxPriorityQueue constructor requires a callback for object values");this._heap=s||new e(o)}}front(){return this._heap.root()}back(){return this._heap.leaf()}enqueue(a){return this._heap.insert(a)}push(a){return this.enqueue(a)}dequeue(){return this._heap.extractRoot()}pop(){return this.dequeue()}remove(a){if(typeof a!="function")throw new Error("MaxPriorityQueue remove expects a callback");const s=[],o=[];for(;!this.isEmpty();){const l=this.pop();a(l)?s.push(l):o.push(l)}return o.forEach(l=>this.push(l)),s}contains(a){if(typeof a!="function")throw new Error("MaxPriorityQueue contains expects a callback");let s=!1;const o=[];for(;!this.isEmpty();){const l=this.pop();if(o.push(l),a(l)){s=!0;break}}return o.forEach(l=>this.push(l)),s}size(){return this._heap.size()}isEmpty(){return this._heap.isEmpty()}clear(){this._heap.clear()}toArray(){return this._heap.clone().sort().reverse()}[Symbol.iterator](){let a=this.size();return{next:()=>(a-=1,{value:this.pop(),done:a===-1})}}static fromArray(a,s){const o=new t(r(s),a);return new i(s,new e(s,o).fix())}}return ih.MaxPriorityQueue=i,ih}var nh={};var e1;function h7(){if(e1)return nh;e1=1;const{Heap:t}=Ef();class e{constructor(i,n){if(typeof i!="function")throw new Error("PriorityQueue constructor expects a compare function");this._heap=new t(i,n),n&&this._heap.fix()}front(){return this._heap.root()}back(){return this._heap.leaf()}enqueue(i){return this._heap.insert(i)}push(i){return this.enqueue(i)}dequeue(){return this._heap.extractRoot()}pop(){return this.dequeue()}remove(i){if(typeof i!="function")throw new Error("PriorityQueue remove expects a callback");const n=[],a=[];for(;!this.isEmpty();){const s=this.pop();i(s)?n.push(s):a.push(s)}return a.forEach(s=>this.push(s)),n}contains(i){if(typeof i!="function")throw new Error("PriorityQueue contains expects a callback");let n=!1;const a=[];for(;!this.isEmpty();){const s=this.pop();if(a.push(s),i(s)){n=!0;break}}return a.forEach(s=>this.push(s)),n}size(){return this._heap.size()}isEmpty(){return this._heap.isEmpty()}clear(){this._heap.clear()}toArray(){return this._heap.clone().sort().reverse()}[Symbol.iterator](){let i=this.size();return{next:()=>(i-=1,{value:this.pop(),done:i===-1})}}static fromArray(i,n){return new e(n,i)}}return nh.PriorityQueue=e,nh}var ah,t1;function p7(){if(t1)return ah;t1=1;const{MinPriorityQueue:t}=u7(),{MaxPriorityQueue:e}=d7(),{PriorityQueue:r}=h7();return ah={MinPriorityQueue:t,MaxPriorityQueue:e,PriorityQueue:r},ah}var f7=p7();class g7{constructor(e,r,i,n){this.game=e,this.eventBus=r,this.transformHandler=i,this.borderAnimTime=0,this.tileToRenderQueue=new f7.PriorityQueue((a,s)=>a.lastUpdate-s.lastUpdate),this.random=new Pn(123),this.highlightedTerritory=null,this.alternativeView=!1,this.lastDragTime=0,this.nodrawDragDuration=200,this.lastMousePosition=null,this.refreshRate=10,this.lastRefresh=0,this.lastFocusedPlayer=null,this.userSettings=n,this.theme=e.config().theme(),this.cachedTerritoryPatternsEnabled=void 0}shouldTransform(){return!0}async paintPlayerBorder(e){(await e.borderTiles()).borderTiles.forEach(i=>{this.paintTerritory(i,!0)})}tick(){this.game.inSpawnPhase()&&this.spawnHighlight(),this.game.recentlyUpdatedTiles().forEach(a=>this.enqueueTile(a));const e=this.game.updatesSinceLastTick();(e!==null?e[ye.Unit]:[]).forEach(a=>{if(a.unitType===C.DefensePost){if(a.underConstruction)return;const s=a.pos;this.game.bfs(s,S0(s,this.game.config().defensePostRange())).forEach(o=>{this.game.isBorder(o)&&(this.game.ownerID(o)===a.ownerID||this.game.ownerID(o)===a.lastOwnerID)&&this.enqueueTile(o)})}});const i=this.game.myPlayer();i&&(e?.[ye.BrokeAlliance]?.forEach(a=>{const s=this.game.playerBySmallID(a.betrayedID);s&&s instanceof ao&&this.redrawBorder(s)}),e?.[ye.AllianceRequestReply]?.forEach(a=>{if(a.accepted&&(a.request.requestorID===i.smallID()||a.request.recipientID===i.smallID())){const s=a.request.requestorID===i.smallID()?a.request.recipientID:a.request.requestorID,o=this.game.playerBySmallID(s);o&&o instanceof ao&&this.redrawBorder(o)}}),e?.[ye.EmbargoEvent]?.forEach(a=>{const s=this.game.playerBySmallID(a.playerID),o=this.game.playerBySmallID(a.embargoedID);(s.id()===i?.id()||o.id()===i?.id())&&this.redrawBorder(s,o)}));const n=this.game.focusedPlayer();n!==this.lastFocusedPlayer&&(this.lastFocusedPlayer&&this.paintPlayerBorder(this.lastFocusedPlayer),n&&this.paintPlayerBorder(n),this.lastFocusedPlayer=n)}spawnHighlight(){if(this.game.ticks()%5===0)return;this.highlightContext.clearRect(0,0,this.game.width(),this.game.height()),this.drawFocusedPlayerHighlight();const e=this.game.playerViews().filter(n=>n.type()===ge.Human),r=this.game.focusedPlayer(),i=Object.values($e);for(const n of e){if(n===r)continue;const a=n.nameLocation();if(!a)continue;const s=this.game.ref(a.x,a.y);if(!s)continue;let o=this.theme.spawnHighlightColor();const l=this.game.myPlayer();if(l!==null&&l!==n&&l.team()===null)o=this.theme.spawnHighlightColor();else if(l!==null&&l!==n){const c=n.team();c!==null&&i.includes(c)?o=this.theme.teamColor(c):l.isFriendly(n)?o=this.theme.spawnHighlightTeamColor():o=this.theme.spawnHighlightColor()}for(const c of this.game.bfs(s,S0(s,9,!0)))this.game.hasOwner(c)||this.paintHighlightTile(c,o,255)}}drawFocusedPlayerHighlight(){const e=this.game.focusedPlayer();if(!e)return;const r=e.nameLocation();if(!r)return;this.borderAnimTime+=.5;const i=8,n=24,a=i+(n-i)*(.5+.5*Math.sin(this.borderAnimTime)),s=this.theme.spawnHighlightSelfColor();let o=null;const l=e.team();l!==null&&Object.values($e).includes(l)?o=this.theme.teamColor(l).alpha(.5):o=s,this.drawBreathingRing(r.x,r.y,i,n,a,s,o),this.drawTeammateHighlights(i,n,a)}drawTeammateHighlights(e,r,i){const n=this.game.myPlayer();if(n===null||n.team()===null)return;const a=this.game.playerViews().filter(u=>u!==n&&n.isOnSameTeam(u)),s=5,o=14,l=s+(o-s)*((i-e)/(r-e)),c=Object.values($e);for(const u of a){const p=u.nameLocation();if(!p)continue;const d=u.team();let h,g;d!==null&&c.includes(d)?(h=this.theme.teamColor(d).alpha(.5),g=this.theme.teamColor(d).alpha(.5)):(h=this.theme.spawnHighlightTeamColor(),g=this.theme.spawnHighlightTeamColor()),this.drawBreathingRing(p.x,p.y,s,o,l,h,g)}}init(){this.eventBus.on(T2,e=>this.onMouseOver(e)),this.eventBus.on(Dn,e=>{this.alternativeView=e.alternateView}),this.eventBus.on(Tc,e=>{}),this.redraw()}onMouseOver(e){this.lastMousePosition={x:e.x,y:e.y},this.updateHighlightedTerritory()}updateHighlightedTerritory(){if(!this.alternativeView||!this.lastMousePosition)return;const e=this.transformHandler.screenToWorldCoordinates(this.lastMousePosition.x,this.lastMousePosition.y);if(!this.game.isValidCoord(e.x,e.y))return;const r=this.highlightedTerritory,i=this.getTerritoryAtCell(e);if(i?this.highlightedTerritory=i:this.highlightedTerritory=null,r?.id()!==this.highlightedTerritory?.id()){const n=[];r&&n.push(r),this.highlightedTerritory&&n.push(this.highlightedTerritory),this.redrawBorder(...n)}}getTerritoryAtCell(e){const r=this.game.ref(e.x,e.y);if(!r||!this.game.hasOwner(r))return null;const i=this.game.owner(r);return i instanceof ao?i:null}redraw(){console.log("redrew territory layer"),this.canvas=document.createElement("canvas");const e=this.canvas.getContext("2d");if(e===null)throw new Error("2d context not supported");this.context=e,this.canvas.width=this.game.width(),this.canvas.height=this.game.height(),this.imageData=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),this.alternativeImageData=this.context.getImageData(0,0,this.canvas.width,this.canvas.height),this.initImageData(),this.context.putImageData(this.alternativeView?this.alternativeImageData:this.imageData,0,0),this.highlightCanvas=document.createElement("canvas");const r=this.highlightCanvas.getContext("2d",{alpha:!0});if(r===null)throw new Error("2d context not supported");this.highlightContext=r,this.highlightCanvas.width=this.game.width(),this.highlightCanvas.height=this.game.height(),this.game.forEachTile(i=>{this.paintTerritory(i)})}redrawBorder(...e){return Promise.all(e.map(async r=>{(await r.borderTiles()).borderTiles.forEach(n=>{this.paintTerritory(n,!0)})}))}initImageData(){this.game.forEachTile(e=>{const r=new We(this.game.x(e),this.game.y(e)),n=(r.y*this.game.width()+r.x)*4;this.imageData.data[n+3]=0,this.alternativeImageData.data[n+3]=0})}renderLayer(e){const r=Date.now();if(r>this.lastDragTime+this.nodrawDragDuration&&r>this.lastRefresh+this.refreshRate){this.lastRefresh=r;const n=xt.start();this.renderTerritory(),xt.end("TerritoryLayer:renderTerritory",n);const[a,s]=this.transformHandler.screenBoundingRect(),o=Math.max(0,a.x),l=Math.max(0,a.y),c=Math.min(this.game.width()-1,s.x),u=Math.min(this.game.height()-1,s.y),p=c-o+1,d=u-l+1;if(p>0&&d>0){const h=xt.start();this.context.putImageData(this.alternativeView?this.alternativeImageData:this.imageData,0,0,o,l,p,d),xt.end("TerritoryLayer:putImageData",h)}}const i=xt.start();if(e.drawImage(this.canvas,-this.game.width()/2,-this.game.height()/2,this.game.width(),this.game.height()),xt.end("TerritoryLayer:drawCanvas",i),this.game.inSpawnPhase()){const n=xt.start();e.drawImage(this.highlightCanvas,-this.game.width()/2,-this.game.height()/2,this.game.width(),this.game.height()),xt.end("TerritoryLayer:drawHighlightCanvas",n)}}renderTerritory(){let e=Math.floor(this.tileToRenderQueue.size()/10);for((e===0||this.game.inSpawnPhase())&&(e=this.tileToRenderQueue.size());e>0;){e--;const r=this.tileToRenderQueue.pop();if(!r)break;const i=r.tile;this.paintTerritory(i);for(const n of this.game.neighbors(i))this.paintTerritory(n,!0)}}paintTerritory(e,r=!1){if(r&&!this.game.hasOwner(e))return;if(!this.game.hasOwner(e)){if(this.game.hasFallout(e)){this.paintTile(this.imageData,e,this.theme.falloutColor(),150),this.paintTile(this.alternativeImageData,e,this.theme.falloutColor(),150);return}this.clearTile(e);return}const i=this.game.owner(e);this.highlightedTerritory&&(this.highlightedTerritory.id(),i.id());const n=this.game.myPlayer();if(this.game.isBorder(e)){if(i&&this.game.focusedPlayer(),n){const s=this.alternateViewColor(i);this.paintTile(this.alternativeImageData,e,s,255)}const a=this.game.hasUnitNearby(e,this.game.config().defensePostRange(),C.DefensePost,i.id());this.paintTile(this.imageData,e,i.borderColor(e,a),255)}else this.clearAlternativeTile(e),this.paintTile(this.imageData,e,i.territoryColor(e),150)}alternateViewColor(e){const r=this.game.myPlayer();return r?e.smallID()===r.smallID()?this.theme.selfColor():e.isFriendly(r)?this.theme.allyColor():e.hasEmbargo(r)?this.theme.enemyColor():this.theme.neutralColor():this.theme.neutralColor()}paintAlternateViewTile(e,r){const i=this.alternateViewColor(r);this.paintTile(this.alternativeImageData,e,i,255)}paintTile(e,r,i,n){const a=r*4;e.data[a]=i.rgba.r,e.data[a+1]=i.rgba.g,e.data[a+2]=i.rgba.b,e.data[a+3]=n}clearTile(e){const r=e*4;this.imageData.data[r+3]=0,this.alternativeImageData.data[r+3]=0}clearAlternativeTile(e){const r=e*4;this.alternativeImageData.data[r+3]=0}enqueueTile(e){this.tileToRenderQueue.push({tile:e,lastUpdate:this.game.ticks()+this.random.nextFloat(0,.5)})}async enqueuePlayerBorder(e){(await e.borderTiles()).borderTiles.forEach(i=>{this.enqueueTile(i)})}paintHighlightTile(e,r,i){this.clearTile(e);const n=this.game.x(e),a=this.game.y(e);this.highlightContext.fillStyle=r.alpha(i/255).toRgbString(),this.highlightContext.fillRect(n,a,1,1)}clearHighlightTile(e){const r=this.game.x(e),i=this.game.y(e);this.highlightContext.clearRect(r,i,1,1)}drawBreathingRing(e,r,i,n,a,s,o){const l=this.highlightContext;if(!l)return;l.beginPath();const c=s.alpha(0),u=l.createRadialGradient(e,r,i,e,r,n);u.addColorStop(0,c.toRgbString()),u.addColorStop(.01,s.toRgbString()),u.addColorStop(.1,s.toRgbString()),u.addColorStop(1,c.toRgbString()),l.arc(e,r,n,0,Math.PI*2),l.fillStyle=u,l.closePath(),l.fill();const p=o.alpha(0);l.beginPath();const d=l.createRadialGradient(e,r,i,e,r,a);d.addColorStop(0,p.toRgbString()),d.addColorStop(.01,o.toRgbString()),d.addColorStop(1,o.toRgbString()),l.arc(e,r,a,0,Math.PI*2),l.fillStyle=d,l.fill()}}const mn=class mn{constructor(e=[],r,i,n,a,s,o=0){this.colors=e,this.ctx=r,this.x=i,this.y=n,this.w=a,this.h=s,this.progress=o,this.setProgress(o)}setProgress(e){if(e=Math.max(0,Math.min(1,e)),this.clear(),this.ctx.fillStyle="rgba(0, 0, 0, 1)",this.ctx.fillRect(this.x-1,this.y-1,this.w,this.h),this.colors.length===0)this.ctx.fillStyle="#808080";else{const r=Math.min(this.colors.length-1,Math.floor(e*this.colors.length));this.ctx.fillStyle=this.colors[r]}this.ctx.fillRect(this.x,this.y,Math.max(1,Math.floor(e*(this.w-2))),this.h-2),this.progress=e}clear(){this.ctx.clearRect(this.x-mn.CLEAR_PADDING,this.y-mn.CLEAR_PADDING,this.w+mn.CLEAR_PADDING,this.h+mn.CLEAR_PADDING)}getX(){return this.x}getY(){return this.y}getProgress(){return this.progress}};mn.CLEAR_PADDING=2;let Wc=mn;const r1=["rgb(232, 25, 25)","rgb(240, 122, 25)","rgb(202, 231, 15)","rgb(44, 239, 18)"],m7=11,b7=14,i1=3;class v7{constructor(e,r,i){this.game=e,this.eventBus=r,this.transformHandler=i,this.theme=null,this.userSettings=new Gt,this.selectionAnimTime=0,this.allProgressBars=new Map,this.allHealthBars=new Map,this.selectedUnit=null,this.lastSelectionBoxCenter=null,this.SELECTION_BOX_SIZE=6,this.theme=e.config().theme()}shouldTransform(){return!0}tick(){this.selectionAnimTime=(this.selectionAnimTime+1)%60,this.selectedUnit&&this.selectedUnit.type()===C.Warship&&this.drawSelectionBox(this.selectedUnit),this.game.updatesSinceLastTick()?.[ye.Unit]?.map(e=>this.game.unit(e.id))?.forEach(e=>{e!==void 0&&this.onUnitEvent(e)}),this.updateProgressBars()}init(){this.eventBus.on(Ys,e=>this.onUnitSelection(e)),this.redraw()}renderLayer(e){e.drawImage(this.canvas,-this.game.width()/2,-this.game.height()/2,this.game.width(),this.game.height())}redraw(){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=this.game.width(),this.canvas.height=this.game.height()}onUnitEvent(e){if(e.isUnderConstruction()){this.createLoadingBar(e);return}switch(e.type()){case C.Warship:{this.drawHealthBar(e);break}case C.City:case C.Factory:case C.DefensePost:case C.Port:case C.MissileSilo:case C.SAMLauncher:(e.markedForDeletion()!==!1||e.missileReadinesss()<1)&&this.createLoadingBar(e);break;default:return}}clearIcon(e,r,i){this.context!==null&&this.context.clearRect(r,i,e.width,e.height)}drawIcon(e,r,i,n){if(this.context===null||this.theme===null)return;const a=r.owner().borderColor();this.context.fillStyle=a.toRgbString(),this.context.fillRect(i,n,e.width,e.height),this.context.drawImage(e,i,n)}onUnitSelection(e){if(e.isSelected)this.selectedUnit=e.unit,e.unit&&e.unit.type()===C.Warship&&this.drawSelectionBox(e.unit);else if(this.selectedUnit===e.unit){if(this.lastSelectionBoxCenter){const{x:r,y:i,size:n}=this.lastSelectionBoxCenter;this.clearSelectionBox(r,i,n),this.lastSelectionBoxCenter=null}this.selectedUnit=null}}clearSelectionBox(e,r,i){for(let n=e-i;n<=e+i;n++)for(let a=r-i;a<=r+i;a++)(n===e-i||n===e+i||a===r-i||a===r+i)&&this.clearCell(n,a)}drawSelectionBox(e){if(!e||!e.isActive())return;const r=this.SELECTION_BOX_SIZE,a=200+Math.sin(this.selectionAnimTime*.1)*55;if(this.theme===null)throw new Error("missing theme");const o=e.owner().territoryColor().lighten(.2),l=e.tile(),c=this.game.x(l),u=this.game.y(l);if(this.lastSelectionBoxCenter&&(this.lastSelectionBoxCenter.x!==c||this.lastSelectionBoxCenter.y!==u)){const p=this.lastSelectionBoxCenter.size,d=this.lastSelectionBoxCenter.x,h=this.lastSelectionBoxCenter.y;this.clearSelectionBox(d,h,p)}for(let p=c-r;p<=c+r;p++)for(let d=u-r;d<=u+r;d++)(p===c-r||p===c+r||d===u-r||d===u+r)&&(p+d)%2===0&&this.paintCell(p,d,o,a);this.lastSelectionBoxCenter={x:c,y:u,size:r}}drawHealthBar(e){const r=this.game.unitInfo(e.type()).maxHealth;if(!(r===void 0||this.context===null)){if(this.allHealthBars.has(e.id())&&(e.health()>=r||e.health()<=0||!e.isActive()))this.allHealthBars.get(e.id())?.clear(),this.allHealthBars.delete(e.id());else if(e.isActive()&&e.health()<r&&e.health()>0){this.allHealthBars.get(e.id())?.clear();const i=new Wc(r1,this.context,this.game.x(e.tile())-4,this.game.y(e.tile())-6,m7,i1,e.health()/r);this.allHealthBars.set(e.id(),i)}}}updateProgressBars(){this.allProgressBars.forEach((e,r)=>{const i=this.getProgress(e.unit);if(i>=1){this.allProgressBars.get(r)?.progressBar.clear(),this.allProgressBars.delete(r);return}else e.progressBar.setProgress(i)})}getProgress(e){if(!e.isActive())return 1;if(e.isUnderConstruction()){const i=this.game.unitInfo(e.type()).constructionDuration;if(i===void 0)throw new Error("unit does not have constructionTime");return(this.game.ticks()-e.createdAt())/(i===0?1:i)}switch(e.type()){case C.MissileSilo:case C.SAMLauncher:return e.markedForDeletion()?this.deletionProgress(this.game,e):e.missileReadinesss();case C.City:case C.Factory:case C.Port:case C.DefensePost:return this.deletionProgress(this.game,e);default:return 1}}deletionProgress(e,r){const i=r.markedForDeletion();return i===!1?1:Math.max(0,(i-e.ticks())/e.config().deletionMarkDuration())}createLoadingBar(e){if(this.context&&!this.allProgressBars.has(e.id())){const r=new Wc(r1,this.context,this.game.x(e.tile())-6,this.game.y(e.tile())+6,b7,i1,0);this.allProgressBars.set(e.id(),{unit:e,progressBar:r})}}paintCell(e,r,i,n){if(this.context===null)throw new Error("null context");this.clearCell(e,r),this.context.fillStyle=i.alpha(n/255).toRgbString(),this.context.fillRect(e,r,1,1)}clearCell(e,r){if(this.context===null)throw new Error("null context");this.context.clearRect(e,r,1,1)}}var y7=Object.getOwnPropertyDescriptor,w7=(t,e,r,i)=>{for(var n=i>1?void 0:i?y7(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=s(n)||n);return n};let X0=class extends V{constructor(){super(...arguments),this.playerActions=null,this.keybinds={},this._cities=0,this._warships=0,this._factories=0,this._missileSilo=0,this._port=0,this._defensePost=0,this._samLauncher=0,this.allDisabled=!1,this._hoveredUnit=null}createRenderRoot(){return this}init(){const t=this.game.config(),e=localStorage.getItem("settings.keybinds");if(e)try{this.keybinds=JSON.parse(e)}catch(r){console.warn("Invalid keybinds JSON:",r)}this.allDisabled=t.isUnitDisabled(C.City)&&t.isUnitDisabled(C.Factory)&&t.isUnitDisabled(C.Port)&&t.isUnitDisabled(C.DefensePost)&&t.isUnitDisabled(C.MissileSilo)&&t.isUnitDisabled(C.SAMLauncher)&&t.isUnitDisabled(C.Warship)&&t.isUnitDisabled(C.AtomBomb)&&t.isUnitDisabled(C.HydrogenBomb)&&t.isUnitDisabled(C.MIRV),this.requestUpdate()}cost(t){for(const e of this.playerActions?.buildableUnits??[])if(e.type===t)return e.cost;return 0n}canBuild(t){if(this.game?.config().isUnitDisabled(t))return!1;const e=this.game?.myPlayer();switch(t){case C.AtomBomb:case C.HydrogenBomb:case C.MIRV:return this.cost(t)<=(e?.gold()??0n)&&(e?.units(C.MissileSilo).length??0)>0;case C.Warship:return this.cost(t)<=(e?.gold()??0n)&&(e?.units(C.Port).length??0)>0;default:return this.cost(t)<=(e?.gold()??0n)}}tick(){const t=this.game?.myPlayer();t?.actions().then(e=>{this.playerActions=e}),t&&(this._cities=t.totalUnitLevels(C.City),this._missileSilo=t.totalUnitLevels(C.MissileSilo),this._port=t.totalUnitLevels(C.Port),this._defensePost=t.totalUnitLevels(C.DefensePost),this._samLauncher=t.totalUnitLevels(C.SAMLauncher),this._factories=t.totalUnitLevels(C.Factory),this._warships=t.totalUnitLevels(C.Warship),this.requestUpdate())}render(){const t=this.game?.myPlayer();return!this.game||!t||this.game.inSpawnPhase()||!t.isAlive()||this.allDisabled?null:v`
      <div
        class="hidden min-[1200px]:flex fixed bottom-4 left-1/2 transform -translate-x-1/2 z-[1100] 2xl:flex-row xl:flex-col min-[1200px]:flex-col 2xl:gap-5 xl:gap-2 min-[1200px]:gap-2 justify-center items-center"
      >
        <div class="bg-gray-800/70 backdrop-blur-xs rounded-lg p-0.5">
          <div class="grid grid-rows-1 auto-cols-max grid-flow-col gap-1 w-fit">
            ${this.renderUnitItem(Su,this._cities,C.City,"city",this.keybinds.buildCity?.key??"1")}
            ${this.renderUnitItem(cf,this._factories,C.Factory,"factory",this.keybinds.buildFactory?.key??"2")}
            ${this.renderUnitItem(df,this._port,C.Port,"port",this.keybinds.buildPort?.key??"3")}
            ${this.renderUnitItem(Tu,this._defensePost,C.DefensePost,"defense_post",this.keybinds.buildDefensePost?.key??"4")}
            ${this.renderUnitItem(uf,this._missileSilo,C.MissileSilo,"missile_silo",this.keybinds.buildMissileSilo?.key??"5")}
            ${this.renderUnitItem(hf,this._samLauncher,C.SAMLauncher,"sam_launcher",this.keybinds.buildSamLauncher?.key??"6")}
          </div>
        </div>
        <div class="bg-gray-800/70 backdrop-blur-xs rounded-lg p-0.5 w-fit">
          <div class="grid grid-rows-1 auto-cols-max grid-flow-col gap-1">
            ${this.renderUnitItem(lf,this._warships,C.Warship,"warship",this.keybinds.buildWarship?.key??"7")}
            ${this.renderUnitItem(Cu,null,C.AtomBomb,"atom_bomb",this.keybinds.buildAtomBomb?.key??"8")}
            ${this.renderUnitItem(Z2,null,C.HydrogenBomb,"hydrogen_bomb",this.keybinds.buildHydrogenBomb?.key??"9")}
            ${this.renderUnitItem(X2,null,C.MIRV,"mirv",this.keybinds.buildMIRV?.key??"0")}
          </div>
        </div>
      </div>
    `}renderUnitItem(t,e,r,i,n){if(this.game.config().isUnitDisabled(r))return v``;const a=this.uiState.ghostStructure===r,s=this._hoveredUnit===r,o=n.replace("Digit","").replace("Key","").toUpperCase();return v`
      <div
        class="flex flex-col items-center relative"
        @mouseenter=${()=>{this._hoveredUnit=r,this.requestUpdate()}}
        @mouseleave=${()=>{this._hoveredUnit=null,this.requestUpdate()}}
      >
        ${s?v`
              <div
                class="absolute -top-[250%] left-1/2 -translate-x-1/2 text-gray-200 text-center w-max text-xs bg-gray-800/90 backdrop-blur-xs rounded-sm p-1 z-20 shadow-lg pointer-events-none"
              >
                <div class="font-bold text-sm mb-1">
                  ${f("unit_type."+i)}${` [${o}]`}
                </div>
                <div class="p-2">
                  ${f("build_menu.desc."+i)}
                </div>
                <div class="flex items-center justify-center gap-1">
                  <img src=${Au} width="13" height="13" />
                  <span class="text-yellow-300"
                    >${ce(this.cost(r))}</span
                  >
                </div>
              </div>
            `:null}
        <div
          class="${this.canBuild(r)?"":"opacity-40"} border border-slate-500 rounded-sm pr-2 pb-1 flex items-center gap-2 cursor-pointer
             ${a?"hover:bg-gray-400/10":"hover:bg-gray-800"}
             rounded-sm text-white ${a?"bg-slate-400/20":""}"
          @click=${()=>{a?(this.uiState.ghostStructure=null,this.eventBus?.emit(new _o(null))):this.canBuild(r)&&(this.uiState.ghostStructure=r,this.eventBus?.emit(new _o(r))),this.requestUpdate()}}
          @mouseenter=${()=>{switch(r){case C.AtomBomb:case C.HydrogenBomb:this.eventBus?.emit(new ba([C.MissileSilo,C.SAMLauncher]));break;case C.Warship:this.eventBus?.emit(new ba([C.Port]));break;default:this.eventBus?.emit(new ba([r]))}}}
          @mouseleave=${()=>this.eventBus?.emit(new ba(null))}
        >
          ${v`<div class="ml-1 text-xs relative -top-1.5 text-gray-400">
            ${o}
          </div>`}
          <div class="flex items-center gap-1 pt-1">
            <img src=${t} alt=${i} class="align-middle size-6" />
            ${e!==null?ce(e):null}
          </div>
        </div>
      </div>
    `}};X0=w7([F("unit-display")],X0);class x7{constructor(e,r,i){this.game=e,this.eventBus=r,this.unitToTrail=new Map,this.alternateView=!1,this.oldShellTile=new Map,this.selectedUnit=null,this.WARSHIP_SELECTION_RADIUS=10,this.theme=e.config().theme(),this.transformHandler=i}shouldTransform(){return!0}tick(){const e=this.game.updatesSinceLastTick()?.[ye.Unit]?.map(r=>r.id);this.updateUnitsSprites(e??[])}init(){this.eventBus.on(Dn,e=>this.onAlternativeViewEvent(e)),this.eventBus.on(Cn,e=>this.onMouseUp(e)),this.eventBus.on(E2,e=>this.onTouch(e)),this.eventBus.on(Ys,e=>this.onUnitSelectionChange(e)),this.redraw(),A8()}findWarshipsNearCell(e){return this.game.units(C.Warship).filter(r=>r.isActive()&&r.owner()===this.game.myPlayer()&&this.game.manhattanDist(r.tile(),e)<=this.WARSHIP_SELECTION_RADIUS).sort((r,i)=>{const n=this.game.manhattanDist(r.tile(),e),a=this.game.manhattanDist(i.tile(),e);return n-a})}onMouseUp(e,r,i){if(r===void 0){const n=this.transformHandler.screenToWorldCoordinates(e.x,e.y);if(!this.game.isValidCoord(n.x,n.y))return;r=this.game.ref(n.x,n.y)}if(this.game.isOcean(r)){if(this.selectedUnit){this.eventBus.emit(new af(this.selectedUnit.id(),r)),this.eventBus.emit(new Ys(this.selectedUnit,!1));return}i??=this.findWarshipsNearCell(r),i.length>0&&this.eventBus.emit(new Ys(i[0],!0))}}onTouch(e){const r=this.transformHandler.screenToWorldCoordinates(e.x,e.y),i=this.game.ref(r.x,r.y);if(!this.game.isOcean(i)){this.eventBus.emit(new Na(e.x,e.y));return}if(!this.game.isValidRef(i))return;if(this.selectedUnit){this.onMouseUp(new Cn(e.x,e.y),i);return}const n=this.findWarshipsNearCell(i);n.length>0?this.onMouseUp(new Cn(e.x,e.y),i,n):this.eventBus.emit(new Na(e.x,e.y))}onUnitSelectionChange(e){e.isSelected?this.selectedUnit=e.unit:this.selectedUnit===e.unit&&(this.selectedUnit=null)}handleUnitDeactivation(e){this.selectedUnit===e&&!e.isActive()&&this.eventBus.emit(new Ys(e,!1))}renderLayer(e){e.drawImage(this.transportShipTrailCanvas,-this.game.width()/2,-this.game.height()/2,this.game.width(),this.game.height()),e.drawImage(this.canvas,-this.game.width()/2,-this.game.height()/2,this.game.width(),this.game.height())}onAlternativeViewEvent(e){this.alternateView=e.alternateView,this.redraw()}redraw(){this.canvas=document.createElement("canvas");const e=this.canvas.getContext("2d");if(e===null)throw new Error("2d context not supported");this.context=e,this.transportShipTrailCanvas=document.createElement("canvas");const r=this.transportShipTrailCanvas.getContext("2d");if(r===null)throw new Error("2d context not supported");this.unitTrailContext=r,this.canvas.width=this.game.width(),this.canvas.height=this.game.height(),this.transportShipTrailCanvas.width=this.game.width(),this.transportShipTrailCanvas.height=this.game.height(),this.updateUnitsSprites(this.game.units().map(i=>i.id())),this.unitToTrail.forEach((i,n)=>{for(const a of i)this.paintCell(this.game.x(a),this.game.y(a),this.relationship(n),n.owner().territoryColor(),150,this.unitTrailContext)})}updateUnitsSprites(e){const r=e?.map(i=>this.game.unit(i)).filter(i=>i!==void 0);r&&(this.clearUnitsCells(r),this.drawUnitsCells(r))}clearUnitsCells(e){e.filter(r=>T8(r)).forEach(r=>{const n=wb(r,this.theme).width+1,a=this.game.x(r.lastTile()),s=this.game.y(r.lastTile());this.context.clearRect(a-n/2,s-n/2,n,n)})}drawUnitsCells(e){e.forEach(r=>this.onUnitEvent(r))}relationship(e){const r=this.game.myPlayer();return r===null?2:r===e.owner()?0:r.isFriendly(e.owner())?1:2}onUnitEvent(e){switch(e.isActive()||this.handleUnitDeactivation(e),e.type()){case C.TransportShip:this.handleBoatEvent(e);break;case C.Warship:this.handleWarShipEvent(e);break;case C.Shell:this.handleShellEvent(e);break;case C.SAMMissile:this.handleMissileEvent(e);break;case C.TradeShip:this.handleTradeShipEvent(e);break;case C.Train:this.handleTrainEvent(e);break;case C.MIRVWarhead:this.handleMIRVWarhead(e);break;case C.AtomBomb:case C.HydrogenBomb:case C.MIRV:this.handleNuke(e);break}}handleWarShipEvent(e){e.targetUnitId()?this.drawSprite(e,b("rgb(200,0,0)")):this.drawSprite(e)}handleShellEvent(e){const r=this.relationship(e);this.clearCell(this.game.x(e.lastTile()),this.game.y(e.lastTile()));const i=this.oldShellTile.get(e);i!==void 0&&this.clearCell(this.game.x(i),this.game.y(i)),this.oldShellTile.set(e,e.lastTile()),e.isActive()&&(this.paintCell(this.game.x(e.tile()),this.game.y(e.tile()),r,e.owner().borderColor(),255),this.paintCell(this.game.x(e.lastTile()),this.game.y(e.lastTile()),r,e.owner().borderColor(),255))}handleMissileEvent(e){this.drawSprite(e)}drawTrail(e,r,i){for(const n of e)this.paintCell(this.game.x(n),this.game.y(n),i,r,150,this.unitTrailContext)}clearTrail(e){const r=this.unitToTrail.get(e)??[],i=this.relationship(e);for(const a of r)this.clearCell(this.game.x(a),this.game.y(a),this.unitTrailContext);this.unitToTrail.delete(e);const n=new Set(r);for(const[a,s]of this.unitToTrail)for(const o of s)n.has(o)&&this.paintCell(this.game.x(o),this.game.y(o),i,a.owner().territoryColor(),150,this.unitTrailContext)}handleNuke(e){const r=this.relationship(e);this.unitToTrail.has(e)||this.unitToTrail.set(e,[]);let i=1;const n=this.unitToTrail.get(e)??[];if(n.length>=1){const a={x:this.game.x(e.lastTile()),y:this.game.y(e.lastTile())},s={x:this.game.x(n[n.length-1]),y:this.game.y(n[n.length-1])},o=new Q9(s,a);let l=o.increment();for(;l!==!0;)n.push(this.game.ref(l.x,l.y)),l=o.increment();i=o.size()}else n.push(e.lastTile());this.drawTrail(n.slice(-i),e.owner().territoryColor(),r),this.drawSprite(e),e.isActive()||this.clearTrail(e)}handleMIRVWarhead(e){const r=this.relationship(e);this.clearCell(this.game.x(e.lastTile()),this.game.y(e.lastTile())),e.isActive()&&this.paintCell(this.game.x(e.tile()),this.game.y(e.tile()),r,e.owner().borderColor(),255)}handleTradeShipEvent(e){this.drawSprite(e)}handleTrainEvent(e){this.drawSprite(e)}handleBoatEvent(e){const r=this.relationship(e);this.unitToTrail.has(e)||this.unitToTrail.set(e,[]);const i=this.unitToTrail.get(e)??[];i.push(e.lastTile()),this.drawTrail(i.slice(-1),e.owner().territoryColor(),r),this.drawSprite(e),e.isActive()||this.clearTrail(e)}paintCell(e,r,i,n,a,s=this.context){if(this.clearCell(e,r,s),this.alternateView)switch(i){case 0:s.fillStyle=this.theme.selfColor().toRgbString();break;case 1:s.fillStyle=this.theme.allyColor().toRgbString();break;case 2:s.fillStyle=this.theme.enemyColor().toRgbString();break}else s.fillStyle=n.alpha(a/255).toRgbString();s.fillRect(e,r,1,1)}clearCell(e,r,i=this.context){i.clearRect(e,r,1,1)}drawSprite(e,r){const i=this.game.x(e.tile()),n=this.game.y(e.tile());let a=null;if(this.alternateView){let o=this.relationship(e);const l=e.targetUnitId();if(e.type()===C.TradeShip&&l!==void 0){const c=this.game.unit(l)?.owner(),u=this.game.myPlayer();u!==null&&c!==void 0&&(u===c?o=0:u.isFriendly(c)&&(o=1))}switch(o){case 0:a=this.theme.selfColor();break;case 1:a=this.theme.allyColor();break;case 2:a=this.theme.enemyColor();break}}const s=wb(e,this.theme,a??r,a??void 0);if(e.isActive()){const o=e.targetable();o||(this.context.save(),this.context.globalAlpha=.5),this.context.drawImage(s,Math.round(i-s.width/2),Math.round(n-s.height/2),s.width,s.width),o||this.context.restore()}}}async function Zx(t,e){if(t.product===null){alert("This pattern is not available for purchase.");return}const r=await gC(t.product.priceId,e?.name??null);if(r===!1){alert("Failed to create checkout session.");return}window.location.href=r}let Nl=null,Qx=null;function _7(t){let e=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);e=(e<<5)-e+i,e=e&e}return e.toString(36)}async function as(){return Nl!==null||(Nl=(async()=>{try{const t=await fetch(`${Wt()}/cosmetics.json`);if(!t.ok)return console.error(`HTTP error! status: ${t.status}`),null;const e=w_.safeParse(await t.json());if(!e.success)return console.error(`Invalid cosmetics: ${e.error.message}`),null;const i=Object.keys(e.data.patterns).sort().map(n=>n+(e.data.patterns[n].product?"sale":"")).join(",");return Qx=_7(i),e.data}catch(t){return console.error("Error getting cosmetics:",t),null}})()),Nl}async function n1(){return await as(),Qx}function Jx(t,e,r,i){const n=r===!1?[]:r.player.flares??[];if(n.includes("pattern:*"))return"owned";if(e===null)return n.includes(`pattern:${t.name}`)?"owned":"blocked";const a=`pattern:${t.name}:${e.name}`;return n.includes(a)?"owned":t.product===null||e?.isArchived||i!==t.affiliateCode?"blocked":"purchasable"}var k7=Object.defineProperty,S7=Object.getOwnPropertyDescriptor,ss=(t,e,r,i)=>{for(var n=i>1?void 0:i?S7(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&k7(e,r,n),n};let Bi=class extends V{constructor(){super(),this.hasShownDeathModal=!1,this.isVisible=!1,this.showButtons=!1,this.isWin=!1,this.isRankedGame=!1,this.patternContent=null,this.rand=Math.random()}createRenderRoot(){return this}render(){return v`
      <div
        class="${this.isVisible?"fixed top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 bg-gray-800/70 p-6 shrink-0 rounded-lg z-9999 shadow-2xl backdrop-blur-xs text-white w-87.5 max-w-[90%] md:w-175 animate-fadeIn":"hidden"}"
      >
        <h2 class="m-0 mb-4 text-[26px] text-center text-white">
          ${this._title||""}
        </h2>
        ${this.innerHtml()}
        <div
          class="${this.showButtons?"flex justify-between gap-2.5":"hidden"}"
        >
          <button
            @click=${this._handleExit}
            class="flex-1 px-3 py-3 text-base cursor-pointer bg-blue-500/60 text-white border-0 rounded-sm transition-all duration-200 hover:bg-blue-500/80 hover:-translate-y-px active:translate-y-px"
          >
            ${f("win_modal.exit")}
          </button>
          ${this.isRankedGame?v`
                <button
                  @click=${this._handleRequeue}
                  class="flex-1 px-3 py-3 text-base cursor-pointer bg-purple-600 text-white border-0 rounded-sm transition-all duration-200 hover:bg-purple-500 hover:-translate-y-px active:translate-y-px"
                >
                  ${f("win_modal.requeue")}
                </button>
              `:null}
          <button
            @click=${this.hide}
            class="flex-1 px-3 py-3 text-base cursor-pointer bg-blue-500/60 text-white border-0 rounded-sm transition-all duration-200 hover:bg-blue-500/80 hover:-translate-y-px active:translate-y-px"
          >
            ${this.game.myPlayer()?.isAlive()?f("win_modal.keep"):f("win_modal.spectate")}
          </button>
        </div>
      </div>

      <style>
        @keyframes fadeIn {
          from {
            opacity: 0;
            transform: translate(-50%, -48%);
          }
          to {
            opacity: 1;
            transform: translate(-50%, -50%);
          }
        }

        .animate-fadeIn {
          animation: fadeIn 0.3s ease-out;
        }
      </style>
    `}innerHtml(){return v2()?this.steamWishlist():!this.isWin&&yu()<3?this.renderYoutubeTutorial():this.rand<.25?this.steamWishlist():this.rand<.5?this.discordDisplay():this.renderPatternButton()}renderYoutubeTutorial(){return v`
      <div class="text-center mb-6 bg-black/30 p-2.5 rounded-sm">
        <h3 class="text-xl font-semibold text-white mb-3">
          ${f("win_modal.youtube_tutorial")}
        </h3>
        <!-- 56.25% = 9:16 -->
        <div class="relative w-full pb-[56.25%]">
          <iframe
            class="absolute top-0 left-0 w-full h-full rounded-sm"
            src="${this.isVisible?m0:""}"
            title="YouTube video player"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
            allowfullscreen
          ></iframe>
        </div>
      </div>
    `}renderPatternButton(){return v`
      <div class="text-center mb-6 bg-black/30 p-2.5 rounded-sm">
        <h3 class="text-xl font-semibold text-white mb-3">
          ${f("win_modal.support_openfront")}
        </h3>
        <p class="text-white mb-3">
          ${f("win_modal.territory_pattern")}
        </p>
        <div class="flex justify-center">${this.patternContent}</div>
      </div>
    `}async loadPatternContent(){const t=await jo(),e=await as(),r=[];for(const o of Object.values(e?.patterns??{}))for(const l of o.colorPalettes??[])if(Jx(o,l,t,null)==="purchasable"){const c=e?.colorPalettes?.[l.name];c&&r.push({pattern:o,colorPalette:c})}if(r.length===0){this.patternContent=v``;return}const i=[...r].sort(()=>Math.random()-.5),a=window.innerWidth<768?1:3,s=i.slice(0,Math.min(a,i.length));this.patternContent=v`
      <div class="flex gap-4 flex-wrap justify-start">
        ${s.map(({pattern:o,colorPalette:l})=>v`
            <pattern-button
              .pattern=${o}
              .colorPalette=${l}
              .requiresPurchase=${!0}
              .onSelect=${c=>{}}
              .onPurchase=${(c,u)=>Zx(c,u)}
            ></pattern-button>
          `)}
      </div>
    `}steamWishlist(){return v`<p class="m-0 mb-5 text-center bg-black/30 p-2.5 rounded-sm">
      <a
        href="https://store.steampowered.com/app/3560670"
        target="_blank"
        rel="noopener noreferrer"
        class="text-[#4a9eff] underline font-medium transition-colors duration-200 text-2xl hover:text-[#6db3ff]"
      >
        ${f("win_modal.wishlist")}
      </a>
    </p>`}discordDisplay(){return v`
      <div class="text-center mb-6 bg-black/30 p-2.5 rounded-sm">
        <h3 class="text-xl font-semibold text-white mb-3">
          ${f("win_modal.join_discord")}
        </h3>
        <p class="text-white mb-3">
          ${f("win_modal.discord_description")}
        </p>
        <a
          href="https://discord.com/invite/openfront"
          target="_blank"
          rel="noopener noreferrer"
          class="inline-block px-6 py-3 bg-indigo-600 text-white rounded-sm font-semibold transition-all duration-200 hover:bg-indigo-700 hover:-translate-y-px no-underline"
        >
          ${f("win_modal.join_server")}
        </a>
      </div>
    `}async show(){ve.gameplayStop(),await this.loadPatternContent(),this.isRankedGame=this.game.config().gameConfig().rankedType===gp.OneVOne,this.isVisible=!0,this.requestUpdate(),setTimeout(()=>{this.showButtons=!0,this.requestUpdate()},3e3)}hide(){this.isVisible=!1,this.showButtons=!1,this.requestUpdate()}_handleExit(){this.hide(),window.location.href="/"}_handleRequeue(){this.hide(),window.location.href="/?requeue"}init(){}tick(){const t=this.game.myPlayer();!this.hasShownDeathModal&&t&&!t.isAlive()&&!this.game.inSpawnPhase()&&t.hasSpawned()&&(this.hasShownDeathModal=!0,this._title=f("win_modal.died"),this.show());const e=this.game.updatesSinceLastTick();(e!==null?e[ye.Win]:[]).forEach(i=>{if(i.winner!==void 0)if(i.winner[0]==="team")this.eventBus.emit(new Ic(i.winner,i.allPlayersStats)),i.winner[1]===this.game.myPlayer()?.team()?(this._title=f("win_modal.your_team"),this.isWin=!0,ve.happytime()):(this._title=f("win_modal.other_team",{team:i.winner[1]}),this.isWin=!1),history.replaceState(null,"",`${window.location.pathname}?replay`),this.show();else if(i.winner[0]==="nation")this._title=f("win_modal.nation_won",{nation:i.winner[1]}),this.isWin=!1,this.show();else{const n=this.game.playerByClientID(i.winner[1]);if(!n?.isPlayer())return;const a=n.clientID();a!==null&&this.eventBus.emit(new Ic(["player",a],i.allPlayersStats)),a!==null&&a===this.game.myPlayer()?.clientID()?(this._title=f("win_modal.you_won"),this.isWin=!0,ve.happytime()):(this._title=f("win_modal.other_won",{player:n.name()}),this.isWin=!1),history.replaceState(null,"",`${window.location.pathname}?replay`),this.show()}})}renderLayer(){}shouldTransform(){return!1}};ss([M()],Bi.prototype,"isVisible",2);ss([M()],Bi.prototype,"showButtons",2);ss([M()],Bi.prototype,"isWin",2);ss([M()],Bi.prototype,"isRankedGame",2);ss([M()],Bi.prototype,"patternContent",2);Bi=ss([F("win-modal")],Bi);function A7(t,e,r){const i=new bT(e,r,t),n=new Gt,a={attackRatio:20,ghostStructure:null,rocketDirectionUp:!0};document.querySelector("game-starting-modal").hide();const o=document.querySelector("emoji-table");(!o||!(o instanceof $c))&&console.error("EmojiTable element not found in the DOM"),o.transformHandler=i,o.game=e,o.initEventBus(r);const l=document.querySelector("build-menu");(!l||!(l instanceof Ao))&&console.error("BuildMenu element not found in the DOM"),l.game=e,l.eventBus=r,l.uiState=a,l.transformHandler=i;const c=document.querySelector("leader-board");(!c||!(c instanceof Ua))&&console.error("LeaderBoard element not found in the DOM"),c.eventBus=r,c.game=e;const u=document.querySelector("game-left-sidebar");(!u||!(u instanceof Di))&&console.error("GameLeftSidebar element not found in the DOM"),u.game=e;const p=document.querySelector("team-stats");(!p||!(p instanceof Vc))&&console.error("TeamStats element not found in the DOM"),p.eventBus=r,p.game=e;const d=document.querySelector("control-panel");d instanceof kr||console.error("ControlPanel element not found in the DOM"),d.eventBus=r,d.uiState=a,d.game=e;const h=document.querySelector("events-display");h instanceof zt||console.error("events display not found"),h.eventBus=r,h.game=e,h.uiState=a;const g=document.querySelector("chat-display");g instanceof za||console.error("chat display not found"),g.eventBus=r,g.game=e;const y=document.querySelector("player-info-overlay");y instanceof qr||console.error("player info overlay not found"),y.eventBus=r,y.transform=i,y.game=e;const x=document.querySelector("win-modal");x instanceof Bi||console.error("win modal not found"),x.eventBus=r,x.game=e;const m=document.querySelector("replay-panel");m instanceof Ha||console.error("replay panel not found"),m.eventBus=r,m.game=e;const k=document.querySelector("game-right-sidebar");k instanceof Oi||console.error("Game Right bar not found"),k.game=e,k.eventBus=r;const S=document.querySelector("settings-modal");S instanceof Li||console.error("settings modal not found"),S.userSettings=n,S.eventBus=r;const _=document.querySelector("unit-display");_ instanceof X0||console.error("unit display not found"),_.game=e,_.eventBus=r,_.uiState=a;const w=document.querySelector("player-panel");w instanceof Sr||console.error("player panel not found"),w.g=e,w.initEventBus(r),w.emojiTable=o,w.uiState=a;const A=document.querySelector("chat-modal");A instanceof Pc||console.error("chat modal not found"),A.g=e,A.initEventBus(r);const T=document.querySelector("multi-tab-modal");T instanceof fi||console.error("multi-tab modal not found"),T.game=e;const I=document.querySelector("heads-up-message");I instanceof Bn||console.error("heads-up message not found"),I.game=e;const O=new n7(e,r,i),B=new C$(e,r,a),E=document.querySelector("performance-overlay");E instanceof ct||console.error("performance overlay not found"),E.eventBus=r,E.userSettings=n;const $=document.querySelector("alert-frame");$ instanceof On||console.error("alert frame not found"),$.game=e;const R=document.querySelector("spawn-timer");R instanceof W0||console.error("spawn timer not found"),R.game=e,R.transformHandler=i;const N=document.querySelector("immunity-timer");N instanceof P0||console.error("immunity timer not found"),N.game=e;const D=document.querySelector("in-game-header-ad");D instanceof $0||console.error("in-game header ad not found"),D.game=e;const j=document.querySelector("spawn-video-ad");j instanceof Po||console.error("spawn video ad not found"),j.game=e;const ee=[new o7(e,i),new g7(e,r,i,n),new tE(e,r,i,a),O,B,new x7(e,r,i),new rE(e,r,i),new v7(e,r,i),new n$(e,r,i,a),new X$(e,r,a,i),new VT(e,i,r),new K9(e,i,r),h,g,l,new j0(r,e,i,o,l,a,w),R,N,c,u,_,k,d,y,x,m,S,p,w,I,T,D,j,$,E];return new C7(e,r,t,i,a,ee,E)}class C7{constructor(e,r,i,n,a,s,o){this.game=e,this.eventBus=r,this.canvas=i,this.transformHandler=n,this.uiState=a,this.layers=s,this.performanceOverlay=o,this.layerTickState=new Map;const l=i.getContext("2d",{alpha:!1});if(l===null)throw new Error("2d context not supported");this.context=l}initialize(){this.eventBus.on(Vp,()=>this.redraw()),this.layers.forEach(r=>r.init?.()),document.body.contains(this.canvas)||document.body.appendChild(this.canvas),window.addEventListener("resize",()=>this.resizeCanvas()),this.resizeCanvas(),this.transformHandler.centerAll(.9);let e=requestAnimationFrame(()=>this.renderGame());this.canvas.addEventListener("contextlost",()=>{cancelAnimationFrame(e)}),this.canvas.addEventListener("contextrestored",()=>{this.redraw(),e=requestAnimationFrame(()=>this.renderGame())})}resizeCanvas(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.transformHandler.updateCanvasBoundingRect()}redraw(){this.layers.forEach(e=>{e.redraw&&e.redraw()})}renderGame(){xt.clear();const e=performance.now();this.context.fillStyle=this.game.config().theme().backgroundColor().toHex(),this.context.fillRect(0,0,this.canvas.width,this.canvas.height);const r=(s,o)=>s&&!o?(this.context.save(),this.transformHandler.handleTransform(this.context),!0):!s&&o?(this.context.restore(),!1):o;let i=!1;for(const s of this.layers){const o=s.shouldTransform?.()??!1;i=r(o,i);const l=xt.start();s.renderLayer?.(this.context),xt.end(s.constructor?.name??"UnknownLayer",l)}r(!1,i),this.transformHandler.resetChanged(),requestAnimationFrame(()=>this.renderGame());const n=performance.now()-e,a=xt.consume();this.performanceOverlay.updateFrameMetrics(n,a),n>50&&console.warn(`tick ${this.game.ticks()} took ${n}ms to render frame`)}tick(){const e=performance.now();for(const r of this.layers){if(!r.tick)continue;const i=this.layerTickState.get(r)??{lastTickAtMs:-1/0},n=r.getTickIntervalMs?.()??0;if(n>0&&e-i.lastTickAtMs<n){this.layerTickState.set(r,i);continue}i.lastTickAtMs=e,this.layerTickState.set(r,i),r.tick()}}resize(e,r){this.canvas.width=Math.ceil(e/window.devicePixelRatio),this.canvas.height=Math.ceil(r/window.devicePixelRatio)}}function T7(t,e,r,i){let n;console.log(`joining lobby: gameID: ${e.gameID}`);const a=new Gt;tT(e.gameID,e.gameStartInfo?.config??{});const s=new lT(e,t);let o=null;const l=()=>{console.log(`Joining game lobby ${e.gameID}`),s.joinGame()};let c=null;const u=p=>{if(p.type==="lobby_info"){n=p.myClientID,t.emit(new po(p.lobby,p.myClientID));return}p.type==="prestart"&&(console.log(`lobby: game prestarting: ${JSON.stringify(p,ho)}`),c=C2(p.gameMap,p.gameMapSize,Ln),r()),p.type==="start"&&(r(),console.log(`lobby: game started: ${JSON.stringify(p,ho,2)}`),n=p.myClientID,i(),e.gameStartInfo=p.gameStartInfo,E7(e,n,t,s,a,c,Ln).then(d=>{o=d,d.start()}).catch(d=>{console.error("error creating client game",d),o=null;const h=document.querySelector("game-starting-modal");h&&h.classList.add("hidden"),wa(d.message,d.stack,e.gameID,n,!0,!1,"error_modal.connection_error")})),p.type==="error"&&(p.error==="full-lobby"?document.dispatchEvent(new CustomEvent("leave-lobby",{detail:{lobby:e.gameID},bubbles:!0,composed:!0})):wa(p.error,p.message,e.gameID,n,!0,!1,"error_modal.connection_error"))};return s.connect(l,u),(p=!1)=>!p&&o?.shouldPreventWindowClose()?(console.log("Player is active, prevent leaving game"),!1):(console.log("leaving game"),o=null,s.leaveGame(),!0)}async function E7(t,e,r,i,n,a,s){if(t.gameStartInfo===void 0)throw new Error("missing gameStartInfo");const o=await T6(t.gameStartInfo.config,n,t.gameRecord!==void 0);let l=null;a?l=await a:l=await C2(t.gameStartInfo.config.gameMap,t.gameStartInfo.config.gameMapSize,s);const c=new JC(t.gameStartInfo,e);await c.initialize();const u=new ZC(c,o,l,e,t.gameStartInfo.gameID,t.gameStartInfo.players),p=m2(),d=A7(p,u,r);return console.log(`creating private game got difficulty: ${t.gameStartInfo.config.difficulty}`),new M7(t,e,r,d,new eT(d.uiState,p,r),i,c,u)}class M7{constructor(e,r,i,n,a,s,o,l){this.lobby=e,this.clientID=r,this.eventBus=i,this.renderer=n,this.input=a,this.transport=s,this.worker=o,this.gameView=l,this.myPlayer=null,this.isActive=!1,this.turnsSeen=0,this.lastMousePosition=null,this.lastMessageTime=0,this.connectionCheckInterval=null,this.goToPlayerTimeout=null,this.lastTickReceiveTime=0,this.currentTickDelay=void 0,this.lastMessageTime=Date.now()}shouldPreventWindowClose(){return!!this.myPlayer?.isAlive()}async saveGame(e){if(this.myPlayer===null)return;const r=[{persistentID:x2(),username:this.lobby.playerName,clientID:this.clientID,stats:e.allPlayersStats[this.clientID]}];if(this.lobby.gameStartInfo===void 0)throw new Error("missing gameStartInfo");const i=Iy(this.lobby.gameStartInfo.gameID,this.lobby.gameStartInfo.config,r,[],rT(),Date.now(),e.winner,this.lobby.gameStartInfo.lobbyCreatedAt);iT(i)}start(){yn.playBackgroundMusic(),console.log("starting client game"),this.isActive=!0,this.lastMessageTime=Date.now(),setTimeout(()=>{this.connectionCheckInterval=setInterval(()=>this.onConnectionCheck(),1e3)},2e4),this.eventBus.on(Cn,this.inputEvent.bind(this)),this.eventBus.on(Vo,this.onMouseMove.bind(this)),this.eventBus.on(O2,this.autoUpgradeEvent.bind(this)),this.eventBus.on($2,this.doBoatAttackUnderCursor.bind(this)),this.eventBus.on(R2,this.doGroundAttackUnderCursor.bind(this)),this.renderer.initialize(),this.input.initialize(),this.worker.start(a=>{if(this.lobby.gameStartInfo===void 0)throw new Error("missing gameStartInfo");if("errMsg"in a){wa(a.errMsg,a.stack??"missing",this.lobby.gameStartInfo.gameID,this.clientID),console.error(a.stack),this.stop();return}this.transport.turnComplete(),a.updates[ye.Hash].forEach(s=>{this.eventBus.emit(new V2(s.tick,s.hash))}),this.gameView.update(a),this.renderer.tick(),this.eventBus.emit(new B2(a.tickExecutionDuration,this.currentTickDelay)),this.currentTickDelay=void 0,a.updates[ye.Win].length>0&&this.saveGame(a.updates[ye.Win][0])});const e=this.worker,r=()=>{this.isActive&&(e.sendHeartbeat(),requestAnimationFrame(r))};requestAnimationFrame(r);const i=()=>{console.log("Connected to game server!"),this.transport.rejoinGame(this.turnsSeen)},n=a=>{if(this.lastMessageTime=Date.now(),a.type==="start"){if(console.log("starting game! in client game runner"),this.gameView.config().isRandomSpawn()){const s=()=>{const o=this.gameView.myPlayer();if(this.gameView.inSpawnPhase()&&!o?.hasSpawned()){this.goToPlayerTimeout=setTimeout(s,1e3);return}if(o){if(!this.gameView.inSpawnPhase()&&!o.hasSpawned()){wa("spawn_failed",f("error_modal.spawn_failed.description"),this.lobby.gameID,this.clientID,!0,!1,f("error_modal.spawn_failed.title"));return}this.eventBus.emit(new vn(o))}};s()}for(const s of a.turns)if(!(s.turnNumber<this.turnsSeen)){for(;s.turnNumber-1>this.turnsSeen;)this.worker.sendTurn({turnNumber:this.turnsSeen,intents:[]}),this.turnsSeen++;this.worker.sendTurn(s),this.turnsSeen++}}if(a.type==="desync"){if(this.lobby.gameStartInfo===void 0)throw new Error("missing gameStartInfo");wa(`desync from server: ${JSON.stringify(a)}`,"",this.lobby.gameStartInfo.gameID,this.clientID,!0,!1,"error_modal.desync_notice")}if(a.type==="error"&&wa(a.error,a.message,this.lobby.gameID,this.clientID,!0,!1,"error_modal.connection_error"),a.type==="turn"){const s=Date.now();this.lastTickReceiveTime>0&&(this.currentTickDelay=s-this.lastTickReceiveTime),this.lastTickReceiveTime=s,this.turnsSeen!==a.turn.turnNumber?console.error(`got wrong turn have turns ${this.turnsSeen}, received turn ${a.turn.turnNumber}`):(this.worker.sendTurn(this.gameView.config().isReplay()?{...a.turn,intents:a.turn.intents.filter(o=>o.type!=="toggle_pause")}:a.turn),this.turnsSeen++)}};this.transport.updateCallback(i,n),console.log("sending join game"),this.transport.rejoinGame(0)}stop(){yn.stopBackgroundMusic(),this.isActive&&(this.isActive=!1,this.worker.cleanup(),this.transport.leaveGame(),this.connectionCheckInterval&&(clearInterval(this.connectionCheckInterval),this.connectionCheckInterval=null),this.goToPlayerTimeout&&(clearTimeout(this.goToPlayerTimeout),this.goToPlayerTimeout=null))}inputEvent(e){if(!this.isActive||this.renderer.uiState.ghostStructure!==null)return;const r=this.renderer.transformHandler.screenToWorldCoordinates(e.x,e.y);if(!this.gameView.isValidCoord(r.x,r.y))return;console.log(`clicked cell ${r}`);const i=this.gameView.ref(r.x,r.y);if(this.gameView.isLand(i)&&!this.gameView.hasOwner(i)&&this.gameView.inSpawnPhase()&&!this.gameView.config().isRandomSpawn()){this.eventBus.emit(new Zp(i));return}if(!this.gameView.inSpawnPhase()){if(this.myPlayer===null){const n=this.gameView.playerByClientID(this.clientID);if(n===null)return;this.myPlayer=n}this.myPlayer.actions(i).then(n=>{this.myPlayer!==null&&(n.canAttack?this.eventBus.emit(new ko(this.gameView.owner(i).id(),this.myPlayer.troops()*this.renderer.uiState.attackRatio)):this.canAutoBoat(n,i)&&this.sendBoatAttackIntent(i))})}}autoUpgradeEvent(e){if(!this.isActive)return;const r=this.renderer.transformHandler.screenToWorldCoordinates(e.x,e.y);if(!this.gameView.isValidCoord(r.x,r.y))return;const i=this.gameView.ref(r.x,r.y);if(this.myPlayer===null){const n=this.gameView.playerByClientID(this.clientID);if(n===null)return;this.myPlayer=n}this.gameView.inSpawnPhase()||this.findAndUpgradeNearestBuilding(i)}findAndUpgradeNearestBuilding(e){this.myPlayer.actions(e).then(r=>{const i=[];for(const n of r.buildableUnits)if(n.canUpgrade!==!1){const a=this.gameView.units().find(s=>s.id()===n.canUpgrade);if(a){const s=this.gameView.manhattanDist(e,a.tile());i.push({unitId:n.canUpgrade,unitType:n.type,distance:s})}}if(i.length>0){i.sort((a,s)=>a.distance-s.distance);const n=i[0];this.eventBus.emit(new xu(n.unitId,n.unitType))}})}doBoatAttackUnderCursor(){const e=this.getTileUnderCursor();if(e!==null){if(this.myPlayer===null){const r=this.gameView.playerByClientID(this.clientID);if(r===null)return;this.myPlayer=r}this.myPlayer.actions(e).then(r=>{this.canBoatAttack(r)!==!1&&this.sendBoatAttackIntent(e)})}}doGroundAttackUnderCursor(){const e=this.getTileUnderCursor();if(e!==null){if(this.myPlayer===null){const r=this.gameView.playerByClientID(this.clientID);if(r===null)return;this.myPlayer=r}this.myPlayer.actions(e).then(r=>{this.myPlayer!==null&&r.canAttack&&this.eventBus.emit(new ko(this.gameView.owner(e).id(),this.myPlayer.troops()*this.renderer.uiState.attackRatio))})}}getTileUnderCursor(){if(!this.isActive||!this.lastMousePosition||this.gameView.inSpawnPhase())return null;const e=this.renderer.transformHandler.screenToWorldCoordinates(this.lastMousePosition.x,this.lastMousePosition.y);return this.gameView.isValidCoord(e.x,e.y)?this.gameView.ref(e.x,e.y):null}canBoatAttack(e){const r=e.buildableUnits.find(i=>i.type===C.TransportShip);return r===void 0?(console.warn("no transport ship buildable units"),!1):r.canBuild}sendBoatAttackIntent(e){this.myPlayer&&this.eventBus.emit(new Qp(e,this.myPlayer.troops()*this.renderer.uiState.attackRatio))}canAutoBoat(e,r){if(!this.gameView.isLand(r))return!1;const i=this.canBoatAttack(e);if(i===!1)return!1;const n=this.gameView.euclideanDistSquared(r,i),a=100,s=a*a;return n<s}onMouseMove(e){this.lastMousePosition={x:e.x,y:e.y}}onConnectionCheck(){if(this.transport.isLocal)return;const e=Date.now(),r=e-this.lastMessageTime;r>5e3&&(console.log(`No message from server for ${r} ms, reconnecting`),this.lastMessageTime=e,this.transport.reconnect())}}function wa(t,e,r,i,n=!1,a=!0,s="error_modal.crashed"){if(document.querySelector("#error-modal"))return;const o=f(t),l=o===t?t:o,c=document.createElement("div");c.id="error-modal";const u=[a?f("error_modal.paste_discord"):null,f(s),`game id: ${r}`,`client id: ${i}`,`Error: ${l}`,e?`Message: ${e}`:null].filter(Boolean).join(`
`),p=document.createElement("pre");p.textContent=u;const d=document.createElement("button");if(d.textContent=f("error_modal.copy_clipboard"),d.className="copy-btn",d.addEventListener("click",async()=>{try{await navigator.clipboard.writeText(u),d.textContent=f("error_modal.copied")}catch{d.textContent=f("error_modal.failed_copy")}}),c.appendChild(p),c.appendChild(d),n){const h=document.createElement("button");h.textContent="X",h.className="close-btn",h.addEventListener("click",()=>{c.remove()}),c.appendChild(h)}document.body.appendChild(c)}var I7=Object.defineProperty,P7=Object.getOwnPropertyDescriptor,Mf=(t,e,r,i)=>{for(var n=i>1?void 0:i?P7(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&I7(e,r,n),n};const $7="flag";let Kc=class extends V{constructor(){super(...arguments),this.flag="",this.showSelectLabel=!1,this.updateFlag=t=>{const e=t;vp.safeParse(e.detail.flag).success&&this.flag!==e.detail.flag&&(this.flag=e.detail.flag)}}isDefaultFlagValue(t){return!t||t==="xx"}getCurrentFlag(){return this.flag}getStoredFlag(){const t=localStorage.getItem($7);return t||""}dispatchFlagEvent(){this.dispatchEvent(new CustomEvent("flag-change",{detail:{flag:this.flag},bubbles:!0,composed:!0}))}onInputClick(t){t.preventDefault(),t.stopPropagation(),this.dispatchEvent(new CustomEvent("flag-input-click",{bubbles:!0,composed:!0}))}connectedCallback(){super.connectedCallback(),this.flag=this.getStoredFlag(),this.dispatchFlagEvent(),window.addEventListener("flag-change",this.updateFlag)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("flag-change",this.updateFlag)}createRenderRoot(){return this}render(){const t=this.isDefaultFlagValue(this.flag),e=this.showSelectLabel&&t,r=f(e?"flag_input.title":"flag_input.button_title");return v`
      <button
        id="flag-input"
        class="flag-btn p-0! m-0 border-0 w-full h-full flex cursor-pointer justify-center items-center focus:outline-none focus:ring-0 transition-all duration-200 hover:scale-105 bg-slate-900/80 hover:bg-slate-800/80 active:bg-slate-800/90 rounded-lg overflow-hidden"
        title=${r}
        @click=${this.onInputClick}
      >
        <span
          id="flag-preview"
          class=${e?"hidden":"w-full h-full overflow-hidden"}
        ></span>
        ${e?v`<span
              class="text-[10px] font-black text-white/40 uppercase leading-none break-words w-full text-center px-1"
            >
              ${f("flag_input.title")}
            </span>`:null}
      </button>
    `}updated(){const t=this.renderRoot.querySelector("#flag-preview");if(t){if(this.showSelectLabel&&this.isDefaultFlagValue(this.flag)){t.innerHTML="";return}if(t.innerHTML="",this.flag?.startsWith("!"))kf(this.flag,t);else{const e=document.createElement("img");e.src=this.flag?`/flags/${this.flag}.svg`:"/flags/xx.svg",e.className="w-full h-full object-cover drop-shadow",e.onerror=()=>{e.src.endsWith("/flags/xx.svg")||(e.src="/flags/xx.svg")},t.appendChild(e)}}}};Mf([M()],Kc.prototype,"flag",2);Mf([L({type:Boolean,attribute:"show-select-label"})],Kc.prototype,"showSelectLabel",2);Kc=Mf([F("flag-input")],Kc);var R7=Object.defineProperty,D7=Object.getOwnPropertyDescriptor,If=(t,e,r,i)=>{for(var n=i>1?void 0:i?D7(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&R7(e,r,n),n};let ja=class extends gt{constructor(){super(...arguments),this.search="",this.returnTo=""}updated(t){super.updated(t)}render(){const t=v`
      <div
        class="h-full flex flex-col bg-black/60 backdrop-blur-md rounded-2xl border border-white/10 overflow-hidden"
      >
        <div
          class="relative flex flex-col border-b border-white/10 pb-4 shrink-0"
        >
          ${It({title:f("flag_input.title"),onBack:()=>this.close(),ariaLabel:f("common.back")})}

          <div class="md:flex items-center gap-2 justify-center mt-4">
            <input
              class="h-12 w-full max-w-md border border-white/10 bg-black/60
              rounded-xl shadow-inner text-xl text-center focus:outline-none
              focus:ring-2 focus:ring-blue-500/50 focus:border-blue-500 text-white placeholder-white/30 transition-all"
              type="text"
              placeholder=${f("flag_input.search_flag")}
              @change=${this.handleSearch}
              @keyup=${this.handleSearch}
            />
          </div>
        </div>

        <div
          class="flex-1 overflow-y-auto px-6 pb-6 scrollbar-thin scrollbar-thumb-white/20 scrollbar-track-transparent mr-1"
        >
          <div class="pt-2 flex flex-wrap justify-center gap-4 min-h-min">
            ${hp.filter(e=>!e.restricted&&this.includedInSearch(e)).map(e=>v`
                <button
                  @click=${()=>{this.setFlag(e.code),this.close()}}
                  class="group relative flex flex-col items-center gap-2 p-3 rounded-xl border border-white/5 bg-white/5 hover:bg-white/10 hover:border-white/20 transition-all cursor-pointer
                      w-[100px] sm:w-[120px]"
                >
                  <img
                    class="w-full h-auto rounded shadow-sm group-hover:scale-105 transition-transform duration-200"
                    src="/flags/${e.code}.svg"
                    loading="lazy"
                    @error=${r=>{const i=r.currentTarget,n="/flags/xx.svg";i.src&&!i.src.endsWith(n)&&(i.src=n)}}
                  />
                  <span
                    class="text-xs font-bold text-gray-300 group-hover:text-white text-center leading-tight w-full whitespace-normal break-words"
                    >${e.name}</span
                  >
                </button>
              `)}
          </div>
        </div>
      </div>
    `;return this.inline?t:v`
      <o-modal
        id="flag-input-modal"
        title=${f("flag_input.title")}
        ?inline=${this.inline}
        hideHeader
        hideCloseButton
      >
        ${t}
      </o-modal>
    `}includedInSearch(t){return t.name.toLowerCase().includes(this.search.toLowerCase())||t.code.toLowerCase().includes(this.search.toLowerCase())}handleSearch(t){this.search=t.target.value}setFlag(t){localStorage.setItem("flag",t),this.dispatchEvent(new CustomEvent("flag-change",{detail:{flag:t},bubbles:!0,composed:!0}))}onOpen(){}onClose(){if(this.returnTo){const t=document.querySelector(this.returnTo);t?.open&&t.open(),this.returnTo=""}}};If([Vt("#flag-input-modal")],ja.prototype,"modalRef",2);If([M()],ja.prototype,"search",2);ja=If([F("flag-input-modal")],ja);var Z=(t=>(t.ConquestHumans="ConquestHumans",t.ConquestBots="ConquestBots",t.Atoms="Atoms",t.Hydros="Hydros",t.MIRV="MIRV",t.TotalGold="TotalGold",t.StolenGold="StolenGold",t.NavalTrade="NavalTrade",t.TrainTrade="TrainTrade",t.ConqueredGold="ConqueredGold",t.Lifetime="Lifetime",t))(Z||{});function L7(t){return t.stats!==void 0&&(t.stats.units!==void 0||t.stats.killedAt!==void 0||t.stats.conquests!==void 0)}class O7{constructor(e){this.duration=e.info.duration,this.players=this.summarizePlayers(e)}get allPlayers(){return this.players}sortedBy(e){return[...this.players].sort((r,i)=>this.getAdjustedScore(i,e)-this.getAdjustedScore(r,e))}score(e,r){return this.getScore(e,r)}summarizePlayers(e){const r={};for(const n of e.info.players){if(n===void 0||!L7(n))continue;const a=n.stats,s=n.username.match(/^\[(.*?)\]\s*(.*)$/);let o=n.username;n.clanTag&&s&&(o=s[2]);const l=(a.gold??[]).map(u=>BigInt(u??0)),c=(a.conquests??[]).map(u=>BigInt(u??0));r[n.clientID]={id:n.clientID,rawUsername:n.username,username:o,tag:n.clanTag,conquests:c,flag:n.cosmetics?.flag??void 0,killedAt:a.killedAt!==null?Number(a.killedAt):void 0,gold:l,atoms:Number(a.bombs?.abomb?.[0])||0,hydros:Number(a.bombs?.hbomb?.[0])||0,mirv:Number(a.bombs?.mirv?.[0])||0,winner:!1}}const i=e.info.winner;if(i!==void 0&&Array.isArray(i)&&i.length>0){if(i[0]==="player"){const n=i[1];r[n]&&(r[n].winner=!0)}else if(i[0]==="team")for(let n=2;n<i.length;n++){const a=i[n];r[a]&&(r[a].winner=!0)}}return Object.values(r)}getScore(e,r){switch(r){case"Lifetime":return e.killedAt?e.killedAt/Math.max(this.duration,1)*10:100;case"ConquestHumans":return Number(e.conquests[u3]??0n);case"ConquestBots":return Number(e.conquests[h3]??0n)+Number(e.conquests[d3]??0n);case"Atoms":return e.atoms;case"Hydros":return e.hydros;case"MIRV":return e.mirv;case"TotalGold":return Number(e.gold.reduce((i,n)=>i+n,0n));case"StolenGold":return Number(e.gold[f3]??0n);case"NavalTrade":return Number(e.gold[Uy]??0n);case"ConqueredGold":return Number(e.gold[p3]??0n);case"TrainTrade":{const i=e.gold[zy]??0n,n=e.gold[Hy]??0n;return Number(i+n)}}}getAdjustedScore(e,r){let i=this.getScore(e,r);return e.winner&&(i+=.1),i}}var B7=Object.defineProperty,N7=Object.getOwnPropertyDescriptor,Wn=(t,e,r,i)=>{for(var n=i>1?void 0:i?N7(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&B7(e,r,n),n};let Ni=class extends V{constructor(){super(...arguments),this.bestScore=1,this.rank=1,this.score=0,this.currentPlayer=!1}createRenderRoot(){return this}render(){if(!this.player)return v``;const{player:t}=this,e=t.winner||this.currentPlayer;return v`
      <li
        class="${t.winner,"bg-black/20"} border-b-1
          ${t.winner?"border-yellow-500 border-1 box-content":e?"border-white/5":"border-transparent"}
           relative pt-1 pb-1 pr-2 pl-2 sm:pl-5 sm:pr-5 flex justify-between items-center hover:bg-white/[0.07] transition-colors duration-150 ease-in-out"
      >
        <div
          class="font-bold text-right w-7.5 text-lg text-white absolute -left-10"
        >
          ${this.rank}
        </div>
        ${this.renderPlayerInfo()}
      </li>
    `}renderPlayerIcon(){return v`
      ${this.renderIcon()} ${this.player.winner?this.renderCrownIcon():""}
    `}renderCrownIcon(){return v`
      <img
        src="/images/CrownIcon.svg"
        class="absolute -top-0.75 left-4 size-3.75 sm:-top-1.75 sm:left-7.5 sm:size-5"
      />
    `}renderPlayerInfo(){switch(this.rankType){case Z.Lifetime:case Z.ConquestHumans:case Z.ConquestBots:return this.renderScoreAsBar();case Z.Atoms:case Z.Hydros:case Z.MIRV:return this.renderBombScore();case Z.TotalGold:case Z.ConqueredGold:case Z.StolenGold:return this.renderGoldScore();case Z.NavalTrade:case Z.TrainTrade:return this.renderTradeScore();default:return v``}}renderScoreAsBar(){return v`
      <div class="flex gap-3 items-center w-full">
        ${this.renderPlayerIcon()}
        <div class="flex flex-col sm:flex-row gap-1 text-left w-full">
          ${this.renderPlayerName()} ${this.renderScoreBar()}
        </div>
      </div>
      <div>
        <div
          class="font-bold rounded-[50%] size-7.5 leading-[1.6rem] border border-white/10 text-center bg-white/5 text-white/80"
        >
          ${Number(this.score).toFixed(0)}
        </div>
      </div>
    `}renderScoreBar(){const t=Math.max(this.bestScore,1),e=Math.min(Math.max(this.score/t*100,0),100);return v`
      <div class="w-full pr-2.5 m-auto">
        <div class="h-1.75 bg-white/10 w-full">
          <!-- bar background -->
          <div
            class="h-1.75 bg-blue-500/50 w-(--width)"
            style="--width: ${e}%;"
          ></div>
        </div>
      </div>
    `}renderMultiScoreType(t,e){return v`
      <div
        class="${e?"font-bold text-[18px] text-white/80":"leading-[24px] text-white/40"} min-w-7.5 sm:min-w-15 inline-block text-center"
      >
        ${ce(t)}
      </div>
    `}renderAllBombs(){return v`
      <div class="flex justify-between text-sm sm:pr-20">
        ${this.renderMultiScoreType(this.player.atoms,this.rankType===Z.Atoms)}
        /
        ${this.renderMultiScoreType(this.player.hydros,this.rankType===Z.Hydros)}
        /
        ${this.renderMultiScoreType(this.player.mirv,this.rankType===Z.MIRV)}
      </div>
    `}renderAllTrades(){const t=this.player.gold[Uy]??0n,e=this.player.gold[zy]??0n,r=this.player.gold[Hy]??0n;return v`
      <div class="flex justify-between text-sm align-baseline">
        ${this.renderMultiScoreType(Number(e+r),this.rankType===Z.TrainTrade)}
        /
        ${this.renderMultiScoreType(Number(t),this.rankType===Z.NavalTrade)}
      </div>
    `}renderBombScore(){return v`
      <div class="flex gap-3 items-center align-baseline w-full">
        ${this.renderPlayerIcon()}
        <div class="flex flex-col sm:flex-row gap-1 text-left w-full">
          ${this.renderPlayerName()} ${this.renderAllBombs()}
        </div>
      </div>
    `}renderGoldScore(){return v`
      <div class="flex gap-3 items-center">
        ${this.renderPlayerIcon()}
        <div class="text-left w-31.25 sm:w-50">${this.renderPlayerName()}</div>
      </div>

      <div class="flex gap-2">
        <div
          class="font-bold rounded-md w-15 text-white/80 text-sm sm:w-25 leading-[1.9rem] text-center"
        >
          ${ce(this.score)}
        </div>
        <img src="/images/GoldCoinIcon.svg" class="size-3.5 sm:size-5 m-auto" />
      </div>
    `}renderTradeScore(){return v`
      <div class="flex flex-col sm:flex-row gap-1 text-left w-full">
        <div class="flex gap-3 items-center">
          ${this.renderPlayerIcon()}
          <div class="text-left w-31.25 sm:w-50">
            ${this.renderPlayerName()}
          </div>
        </div>

        <div class="flex gap-2 justify-between items-center w-full">
          <div class="rounded-md text-sm leading-[1.9rem] text-center w-full">
            ${this.renderAllTrades()}
          </div>
          <img src="/images/GoldCoinIcon.svg" class="w-5 size-3.5 sm:size-5" />
        </div>
      </div>
    `}renderPlayerName(){return v`
      <div class="flex gap-1 items-center w-50 shrink-0">
        ${this.player.tag?this.renderTag(this.player.tag):""}
        <div
          class="text-xs sm:text-sm font-bold tracking-wide text-white/80 text-ellipsis w-37.5 shrink-0 overflow-hidden whitespace-nowrap"
        >
          ${this.player.username}
        </div>
      </div>
    `}renderTag(t){return v`
      <div
        class="px-2.5 py-1 rounded bg-blue-500/10 border border-blue-500/20 text-blue-300 font-bold text-xs tracking-wide group-hover:bg-blue-500/20 transition-colors"
      >
        ${t}
      </div>
    `}renderIcon(){return this.player.killedAt?v` <div
        class="size-7.5 leading-1.25 shrink-0 text-lg sm:size-10 pt-3 sm:leading-3.75 sm:rounded-[50%] sm:border sm:border-gray-200 text-center sm:bg-slate-500 sm:text-2xl"
      >
        💀
      </div>`:this.player.flag?v`<img
        src="/flags/${this.player.flag}.svg"
        class="min-w-7.5 h-7.5 sm:min-w-10 sm:h-10 shrink-0"
      />`:v`
      <div
        class="size-7.5 leading-1.25 shrink-0 rounded-[50%] sm:size-10 sm:pt-2.5 sm:leading-3.5 border border-gray-200 text-center bg-slate-500"
      >
        <img
          src="/images/ProfileIcon.svg"
          class="size-5 mt-0.5 sm:size-6.25 sm:-mt-1.25 m-auto"
        />
      </div>
    `}};Wn([L({type:Object})],Ni.prototype,"player",2);Wn([L({type:String})],Ni.prototype,"rankType",2);Wn([L({type:Number})],Ni.prototype,"bestScore",2);Wn([L({type:Number})],Ni.prototype,"rank",2);Wn([L({type:Number})],Ni.prototype,"score",2);Wn([L({type:Boolean})],Ni.prototype,"currentPlayer",2);Ni=Wn([F("player-row")],Ni);var U7=Object.defineProperty,z7=Object.getOwnPropertyDescriptor,e5=(t,e,r,i)=>{for(var n=i>1?void 0:i?z7(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&U7(e,r,n),n};const H7=new Set([Z.TotalGold,Z.StolenGold,Z.ConqueredGold,Z.NavalTrade,Z.TrainTrade]),F7=new Set([Z.ConquestHumans,Z.ConquestBots,Z.Atoms,Z.Hydros,Z.MIRV]),q7=new Set([Z.NavalTrade,Z.TrainTrade]),j7=new Set([Z.Atoms,Z.Hydros,Z.MIRV]),G7=new Set([Z.ConquestHumans,Z.ConquestBots]),a1=t=>H7.has(t),V7=t=>q7.has(t),W7=t=>j7.has(t),s1=t=>F7.has(t),K7=t=>G7.has(t);let Z0=class extends V{constructor(){super(...arguments),this.rankType=Z.Lifetime}onSort(t){this.dispatchEvent(new CustomEvent("sort",{detail:t}))}renderMainButtons(){return v`
      <div class="flex items-end justify-center p-6 pb-2 gap-5">
        ${this.renderButton(Z.Lifetime,this.rankType===Z.Lifetime,"game_info_modal.duration")}
        ${this.renderButton(Z.ConquestHumans,s1(this.rankType),"game_info_modal.war")}
        ${this.renderButton(Z.TotalGold,a1(this.rankType),"game_info_modal.economy")}
      </div>
    `}renderButton(t,e,r){return v`
      <button
        class="px-6 py-2 text-xs font-bold transition-all duration-200 rounded-lg uppercase tracking-widest hover:text-white hover:bg-white/5 border ${e?"bg-blue-500/20 text-blue-400 border-blue-500/30 shadow-[0_0_15px_rgba(59,130,246,0.2)]":"text-white/40 border-transparent"}"
        @click=${()=>this.onSort(t)}
      >
        ${f(r)}
      </button>
    `}renderWarSubranking(){return s1(this.rankType)?v`
      <div class="flex justify-center gap-3 pb-1">
        ${this.renderSubButton(Z.MIRV,W7(this.rankType),"game_info_modal.bombs")}
        ${this.renderSubButton(Z.ConquestHumans,K7(this.rankType),"game_info_modal.conquests")}
      </div>
    `:""}renderEconomySubranking(){if(!a1(this.rankType))return"";const t=[[Z.StolenGold,"game_info_modal.pirate"],[Z.ConqueredGold,"game_info_modal.conquered"],[Z.TotalGold,"game_info_modal.total_gold"]];return v`
      <div class="flex justify-center gap-3 pb-1">
        ${this.renderSubButton(Z.NavalTrade,V7(this.rankType),"game_info_modal.trade")}
        ${t.map(([e,r])=>this.renderSubButton(e,this.rankType===e,r))}
      </div>
    `}renderSubButton(t,e,r){return v`
      <button
        @click=${()=>this.onSort(t)}
        class="text-[10px] font-bold uppercase tracking-wider bg-white/5 border border-white/10 hover:bg-white/20 px-3 py-1 rounded text-white/60 hover:text-white transition-colors ${e?"outline-1 outline-white/80 font-bold":""}"
      >
        ${f(r)}
      </button>
    `}render(){return v`
      ${this.renderMainButtons()} ${this.renderWarSubranking()}
      ${this.renderEconomySubranking()}
    `}createRenderRoot(){return this}};e5([L({type:String})],Z0.prototype,"rankType",2);Z0=e5([F("ranking-controls")],Z0);var Y7=Object.defineProperty,X7=Object.getOwnPropertyDescriptor,t5=(t,e,r,i)=>{for(var n=i>1?void 0:i?X7(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&Y7(e,r,n),n};let Q0=class extends V{constructor(){super(...arguments),this.rankType=Z.Lifetime}onSort(t){this.dispatchEvent(new CustomEvent("sort",{detail:t}))}render(){return v`
      <li
        class="h-[30px] text-lg border-white/5 bg-white/[0.02] text-white/60 text-xs uppercase tracking-wider relative pt-2 pb-2 pr-5 pl-5 flex justify-between items-center"
      >
        ${this.renderHeaderContent()}
      </li>
    `}renderHeaderContent(){switch(this.rankType){case Z.Lifetime:return v`<div class="w-full">
          ${f("game_info_modal.survival_time")}
        </div>`;case Z.ConquestHumans:case Z.ConquestBots:return v`
          <div class="flex justify-between sm:px-17.5 w-full">
            ${this.renderMultipleChoiceHeaderButton(f("game_info_modal.num_of_conquests_humans"),Z.ConquestHumans)}
            /
            ${this.renderMultipleChoiceHeaderButton(f("game_info_modal.num_of_conquests_bots"),Z.ConquestBots)}
          </div>
        `;case Z.Atoms:case Z.Hydros:case Z.MIRV:return v`
          <div class="flex justify-between sm:px-17.5 w-full">
            ${this.renderMultipleChoiceHeaderButton(f("game_info_modal.atoms"),Z.Atoms)}
            /
            ${this.renderMultipleChoiceHeaderButton(f("game_info_modal.hydros"),Z.Hydros)}
            /
            ${this.renderMultipleChoiceHeaderButton(f("game_info_modal.mirv"),Z.MIRV)}
          </div>
        `;case Z.TotalGold:return v`<div class="w-full">
          ${f("game_info_modal.all_gold")}
        </div>`;case Z.NavalTrade:case Z.TrainTrade:return v`
          <div class="flex justify-between sm:px-17.5 w-full">
            ${this.renderMultipleChoiceHeaderButton(f("game_info_modal.train_trade"),Z.TrainTrade)}
            /
            ${this.renderMultipleChoiceHeaderButton(f("game_info_modal.naval_trade"),Z.NavalTrade)}
          </div>
        `;case Z.ConqueredGold:return v`<div class="w-full">
          ${f("game_info_modal.conquest_gold")}
        </div>`;case Z.StolenGold:return v`<div class="w-full">
          ${f("game_info_modal.stolen_gold")}
        </div>`;default:return console.warn("Unhandled RankType",this.rankType),null}}renderMultipleChoiceHeaderButton(t,e){return v`
      <button
        @click=${()=>this.onSort(e)}
        class="${this.rankType===e?"border-b-2 border-b-white":Ie}"
      >
        ${t}
      </button>
    `}createRenderRoot(){return this}};t5([L({type:String})],Q0.prototype,"rankType",2);Q0=t5([F("ranking-header")],Q0);var Z7=Object.defineProperty,Q7=Object.getOwnPropertyDescriptor,yi=(t,e,r,i)=>{for(var n=i>1?void 0:i?Q7(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&Z7(e,r,n),n};let Ar=class extends V{constructor(){super(...arguments),this.mapImage=null,this.gameInfo=null,this.rankedPlayers=[],this.gameId=null,this.rankType=Z.Lifetime,this.username=null,this.isLoadingGame=!0,this.ranking=null}connectedCallback(){super.connectedCallback(),this.updateRanking()}createRenderRoot(){return this}render(){return v`
      <o-modal
        id="gameInfoModal"
        title="${f("game_info_modal.title")}"
        translationKey="main.game_info"
      >
        <div
          class="h-full flex flex-col items-center px-25 text-center mb-4 scrollbar-thin scrollbar-thumb-white/20 scrollbar-track-transparent"
        >
          <div class="w-75 sm:w-125">
            ${this.isLoadingGame?this.renderLoadingAnimation():this.renderRanking()}
          </div>
        </div>
      </o-modal>
    `}renderRanking(){return this.rankedPlayers.length===0?v`
        <div class="flex flex-col items-center justify-center p-6 text-white">
          <p class="mb-2">❌ ${f("game_info_modal.no_winner")}</p>
        </div>
      `:v`
      ${this.renderGameInfo()}
      <ranking-controls
        .rankType=${this.rankType}
        @sort=${this.sort}
      ></ranking-controls>
      ${this.renderSummaryTable()}
    `}renderLoadingAnimation(){return v` <div
      class="flex flex-col items-center justify-center p-6 text-white"
    >
      <p class="mb-2">${f("game_info_modal.loading_game_info")}</p>
      <div
        class="w-6 h-6 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"
      ></div>
    </div>`}sort(t){this.rankType=t.detail,this.updateRanking()}updateRanking(){this.ranking&&(this.rankedPlayers=this.ranking.sortedBy(this.rankType))}renderGameInfo(){const t=this.gameInfo;if(!t)return v``;const e=Q_(t.config.gameMap);return v`
      <div
        class="h-37.5 flex relative justify-between rounded-xl bg-black/20 items-center"
      >
        ${this.mapImage?v`<img
              src="${this.mapImage}"
              class="absolute place-self-start col-span-full row-span-full h-full rounded-xl mask-[linear-gradient(to_left,transparent,#fff)] ${e?"object-cover object-center":""}"
            />`:v`<div
              class="place-self-start col-span-full row-span-full h-full rounded-xl bg-gray-300"
            ></div>`}
        <div class="text-right p-3 w-full">
          <div class="font-normal pl-1 pr-1">
            <span class="bg-white text-blue-800 font-normal pl-1 pr-1"
              >${t.config.gameMode}</span
            >
            <span class="font-bold">${t.config.gameMap}</span>
          </div>
          <div>${Oa(t.duration)}</div>
          <div>
            ${t.players.length} ${f("game_info_modal.players")}
          </div>
        </div>
      </div>
    `}renderSummaryTable(){const t=this.rankedPlayers.length>0?this.score(this.rankedPlayers[0]):0;return v`
      <ul>
        <ranking-header
          .rankType=${this.rankType}
          @sort=${this.sort}
        ></ranking-header>
        ${this.rankedPlayers.map((e,r)=>v`
            <player-row
              .player=${e}
              .rank=${r+1}
              .score=${this.ranking?.score(e,this.rankType)??0}
              .rankType=${this.rankType}
              .bestScore=${t}
              .currentPlayer=${this.username===e.rawUsername}
            ></player-row>
          `)}
      </ul>
    `}open(){this.modalEl?.open()}close(){this.modalEl?.close()}score(t){return this.ranking?this.ranking.score(t,this.rankType):0}async loadMapImage(t){try{const e=t,r=Ln.getMapData(e);this.mapImage=await r.webpPath()}catch(e){console.error("Failed to load map image:",e)}}loadUserName(){const t=document.querySelector("username-input");t&&(this.username=t.getCurrentUsername())}async loadGame(t){try{this.isLoadingGame=!0,this.loadUserName();const e=await mC(t);if(!e)return;this.gameInfo=e.info,this.ranking=new O7(e),this.updateRanking(),this.isLoadingGame=!1,await this.loadMapImage(e.info.config.gameMap)}catch(e){console.error("Failed to load game:",e)}finally{this.isLoadingGame=!1}}};yi([Vt("o-modal")],Ar.prototype,"modalEl",2);yi([M()],Ar.prototype,"mapImage",2);yi([M()],Ar.prototype,"gameInfo",2);yi([M()],Ar.prototype,"rankedPlayers",2);yi([L({type:String})],Ar.prototype,"gameId",2);yi([L({type:String})],Ar.prototype,"rankType",2);yi([M()],Ar.prototype,"username",2);yi([M()],Ar.prototype,"isLoadingGame",2);Ar=yi([F("game-info-modal")],Ar);var J7=Object.defineProperty,eR=Object.getOwnPropertyDescriptor,r5=(t,e,r,i)=>{for(var n=i>1?void 0:i?eR(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&J7(e,r,n),n};let Yc=class extends V{constructor(){super(...arguments),this.isVisible=!1}createRenderRoot(){return this}render(){const t=this.isVisible;return v`
      <div
        class="fixed inset-0 bg-black/30 backdrop-blur-[4px] z-[9998] transition-all duration-300 ${t?"opacity-100 visible":"opacity-0 invisible"}"
      ></div>
      <div
        class="fixed top-1/2 left-1/2 bg-zinc-800/70 p-6 rounded-xl z-[9999] shadow-[0_0_20px_rgba(0,0,0,0.5)] backdrop-blur-[5px] text-white w-[300px] text-center transition-all duration-300 -translate-x-1/2 ${t?"opacity-100 visible -translate-y-1/2":"opacity-0 invisible -translate-y-[48%]"}"
      >
        <div class="text-xl mt-5 mb-2.5 px-0">
          © OpenFront and Contributors
        </div>
        <a
          href="https://github.com/openfrontio/OpenFrontIO/blob/main/CREDITS.md"
          target="_blank"
          rel="noopener noreferrer"
          class="block mt-2.5 mb-4 text-xl text-blue-400 no-underline transition-colors duration-200 hover:text-blue-300 hover:underline"
          >${f("game_starting_modal.credits")}</a
        >
        <p class="my-0.5 text-sm">
          ${f("game_starting_modal.code_license")}
        </p>
        <p class="text-base my-5 bg-black/30 p-2.5 rounded">
          ${f("game_starting_modal.title")}
        </p>
      </div>
    `}show(){this.isVisible=!0,this.requestUpdate()}hide(){this.isVisible=!1,this.requestUpdate()}};r5([M()],Yc.prototype,"isVisible",2);Yc=r5([F("game-starting-modal")],Yc);var tR=Object.defineProperty,rR=Object.getOwnPropertyDescriptor,os=(t,e,r,i)=>{for(var n=i>1?void 0:i?rR(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&tR(e,r,n),n};let zn=class extends V{constructor(){super(...arguments),this.adClient="ca-pub-7035513310742290",this.adSlot="5220834834",this.adFormat="auto",this.fullWidthResponsive=!0,this.adTest="off"}createRenderRoot(){return this}render(){return iR()?v``:v`
      <div class="mt-4 rounded-lg p-2 w-full overflow-hidden">
        <ins
          class="adsbygoogle block"
          data-ad-client="${this.adClient}"
          data-ad-slot="${this.adSlot}"
          data-ad-format="${this.adFormat}"
          data-full-width-responsive="${this.fullWidthResponsive}"
          data-adtest="${this.adTest}"
        ></ins>
      </div>
    `}connectedCallback(){super.connectedCallback(),setTimeout(()=>{try{(window.adsbygoogle=window.adsbygoogle||[]).push({}),console.log("Ad initialized for slot:",this.adSlot)}catch(t){console.error("AdSense initialization error for slot:",this.adSlot,t)}},100)}};os([L({type:String})],zn.prototype,"adClient",2);os([L({type:String})],zn.prototype,"adSlot",2);os([L({type:String})],zn.prototype,"adFormat",2);os([L({type:Boolean})],zn.prototype,"fullWidthResponsive",2);os([L({type:String})],zn.prototype,"adTest",2);zn=os([F("google-ad")],zn);const iR=()=>!!(window!==void 0&&typeof window.process=="object"&&window.process.type==="renderer"||process!==void 0&&typeof process.versions=="object"&&process.versions.electron||typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0);var nR=Object.defineProperty,aR=Object.getOwnPropertyDescriptor,Pf=(t,e,r,i)=>{for(var n=i>1?void 0:i?aR(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&nR(e,r,n),n};let Ga=class extends V{constructor(){super(...arguments),this.isVisible=!1,this.adLoaded=!1,this.leftAdType="standard_iab_left2",this.rightAdType="standard_iab_rght1",this.leftContainerId="gutter-ad-container-left",this.rightContainerId="gutter-ad-container-right"}createRenderRoot(){return this}connectedCallback(){super.connectedCallback(),document.addEventListener("userMeResponse",()=>{window.adsEnabled?(console.log("showing gutter ads"),this.show()):console.log("not showing gutter ads")})}firstUpdated(){console.log("GutterAdModal DOM is ready")}show(){this.isVisible=!0,this.requestUpdate(),this.updateComplete.then(()=>{this.loadAds()})}close(){try{window.ramp.destroyUnits(this.leftAdType),window.ramp.destroyUnits(this.rightAdType),console.log("successfully destroyed gutter ads")}catch(t){console.error("error destroying gutter ads",t)}}loadAds(){console.log("loading ramp ads");const t=this.querySelector(`#${this.leftContainerId}`),e=this.querySelector(`#${this.rightContainerId}`);if(!t||!e){console.warn("Ad containers not found in DOM");return}if(!window.ramp){console.warn("Playwire RAMP not available");return}if(this.adLoaded){console.log("Ads already loaded, skipping");return}try{window.ramp.que.push(()=>{try{window.ramp.spaAddAds([{type:this.leftAdType,selectorId:this.leftContainerId},{type:this.rightAdType,selectorId:this.rightContainerId}]),this.adLoaded=!0,console.log("Playwire ads loaded:",this.leftAdType,this.rightAdType)}catch(r){console.log(r)}})}catch(r){console.error("Failed to load Playwire ads:",r)}}disconnectedCallback(){super.disconnectedCallback()}render(){return this.isVisible?v`
      <!-- Left Gutter Ad -->
      <div
        class="hidden xl:flex fixed transform -translate-y-1/2 w-[160px] min-h-[600px] z-[100] pointer-events-auto items-center justify-center"
        style="left: calc(50% - 10cm - 230px); top: calc(50% + 10px);"
      >
        <div
          id="${this.leftContainerId}"
          class="w-full h-full flex items-center justify-center p-2"
        ></div>
      </div>

      <!-- Right Gutter Ad -->
      <div
        class="hidden xl:flex fixed transform -translate-y-1/2 w-[160px] min-h-[600px] z-[100] pointer-events-auto items-center justify-center"
        style="left: calc(50% + 10cm + 70px); top: calc(50% + 10px);"
      >
        <div
          id="${this.rightContainerId}"
          class="w-full h-full flex items-center justify-center p-2"
        ></div>
      </div>
    `:v``}};Ga.styles=pu``;Pf([M()],Ga.prototype,"isVisible",2);Pf([M()],Ga.prototype,"adLoaded",2);Ga=Pf([F("gutter-ads")],Ga);const sR=`@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-translate-z:0;--tw-scale-x:1;--tw-scale-y:1;--tw-scale-z:1;--tw-rotate-x:initial;--tw-rotate-y:initial;--tw-rotate-z:initial;--tw-skew-x:initial;--tw-skew-y:initial;--tw-space-y-reverse:0;--tw-divide-y-reverse:0;--tw-border-style:solid;--tw-gradient-position:initial;--tw-gradient-from:#0000;--tw-gradient-via:#0000;--tw-gradient-to:#0000;--tw-gradient-stops:initial;--tw-gradient-via-stops:initial;--tw-gradient-from-position:0%;--tw-gradient-via-position:50%;--tw-gradient-to-position:100%;--tw-leading:initial;--tw-font-weight:initial;--tw-tracking:initial;--tw-ordinal:initial;--tw-slashed-zero:initial;--tw-numeric-figure:initial;--tw-numeric-spacing:initial;--tw-numeric-fraction:initial;--tw-shadow:0 0 #0000;--tw-shadow-color:initial;--tw-shadow-alpha:100%;--tw-inset-shadow:0 0 #0000;--tw-inset-shadow-color:initial;--tw-inset-shadow-alpha:100%;--tw-ring-color:initial;--tw-ring-shadow:0 0 #0000;--tw-inset-ring-color:initial;--tw-inset-ring-shadow:0 0 #0000;--tw-ring-inset:initial;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-offset-shadow:0 0 #0000;--tw-outline-style:solid;--tw-blur:initial;--tw-brightness:initial;--tw-contrast:initial;--tw-grayscale:initial;--tw-hue-rotate:initial;--tw-invert:initial;--tw-opacity:initial;--tw-saturate:initial;--tw-sepia:initial;--tw-drop-shadow:initial;--tw-drop-shadow-color:initial;--tw-drop-shadow-alpha:100%;--tw-drop-shadow-size:initial;--tw-backdrop-blur:initial;--tw-backdrop-brightness:initial;--tw-backdrop-contrast:initial;--tw-backdrop-grayscale:initial;--tw-backdrop-hue-rotate:initial;--tw-backdrop-invert:initial;--tw-backdrop-opacity:initial;--tw-backdrop-saturate:initial;--tw-backdrop-sepia:initial;--tw-duration:initial;--tw-ease:initial;--tw-content:""}}}@layer theme{:root,:host{--font-sans:ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";--font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;--color-red-100:oklch(93.6% .032 17.717);--color-red-200:oklch(88.5% .062 18.334);--color-red-300:oklch(80.8% .114 19.571);--color-red-400:oklch(70.4% .191 22.216);--color-red-500:oklch(63.7% .237 25.331);--color-red-600:oklch(57.7% .245 27.325);--color-red-700:oklch(50.5% .213 27.518);--color-red-900:oklch(39.6% .141 25.723);--color-orange-400:oklch(75% .183 55.934);--color-orange-500:oklch(70.5% .213 47.604);--color-amber-200:oklch(92.4% .12 95.746);--color-amber-300:oklch(87.9% .169 91.605);--color-amber-400:oklch(82.8% .189 84.429);--color-amber-500:oklch(76.9% .188 70.08);--color-amber-600:oklch(66.6% .179 58.318);--color-yellow-300:oklch(90.5% .182 98.111);--color-yellow-400:oklch(85.2% .199 91.936);--color-yellow-500:oklch(79.5% .184 86.047);--color-yellow-600:oklch(68.1% .162 75.834);--color-green-300:oklch(87.1% .15 154.449);--color-green-400:oklch(79.2% .209 151.711);--color-green-500:oklch(72.3% .219 149.579);--color-green-600:oklch(62.7% .194 149.214);--color-green-700:oklch(52.7% .154 150.069);--color-emerald-200:oklch(90.5% .093 164.15);--color-emerald-300:oklch(84.5% .143 164.978);--color-emerald-400:oklch(76.5% .177 163.223);--color-emerald-500:oklch(69.6% .17 162.48);--color-teal-400:oklch(77.7% .152 181.912);--color-teal-500:oklch(70.4% .14 182.503);--color-cyan-400:oklch(78.9% .154 211.53);--color-blue-100:oklch(93.2% .032 255.585);--color-blue-200:oklch(88.2% .059 254.128);--color-blue-300:oklch(80.9% .105 251.813);--color-blue-400:oklch(70.7% .165 254.624);--color-blue-500:oklch(62.3% .214 259.815);--color-blue-600:oklch(54.6% .245 262.881);--color-blue-700:oklch(48.8% .243 264.376);--color-blue-800:oklch(42.4% .199 265.638);--color-blue-900:oklch(37.9% .146 265.522);--color-indigo-100:oklch(93% .034 272.788);--color-indigo-200:oklch(87% .065 274.039);--color-indigo-300:oklch(78.5% .115 274.713);--color-indigo-400:oklch(67.3% .182 276.935);--color-indigo-500:oklch(58.5% .233 277.117);--color-indigo-600:oklch(51.1% .262 276.966);--color-indigo-700:oklch(45.7% .24 277.023);--color-purple-100:oklch(94.6% .033 307.174);--color-purple-200:oklch(90.2% .063 306.703);--color-purple-400:oklch(71.4% .203 305.504);--color-purple-500:oklch(62.7% .265 303.9);--color-purple-600:oklch(55.8% .288 302.321);--color-slate-300:oklch(86.9% .022 252.894);--color-slate-400:oklch(70.4% .04 256.788);--color-slate-500:oklch(55.4% .046 257.417);--color-slate-600:oklch(44.6% .043 257.281);--color-slate-700:oklch(37.2% .044 257.287);--color-slate-800:oklch(27.9% .041 260.031);--color-slate-900:oklch(20.8% .042 265.755);--color-slate-950:oklch(12.9% .042 264.695);--color-gray-100:oklch(96.7% .003 264.542);--color-gray-200:oklch(92.8% .006 264.531);--color-gray-300:oklch(87.2% .01 258.338);--color-gray-400:oklch(70.7% .022 261.325);--color-gray-500:oklch(55.1% .027 264.364);--color-gray-600:oklch(44.6% .03 256.802);--color-gray-700:oklch(37.3% .034 259.733);--color-gray-800:oklch(27.8% .033 256.848);--color-gray-900:oklch(21% .034 264.665);--color-zinc-50:oklch(98.5% 0 0);--color-zinc-100:oklch(96.7% .001 286.375);--color-zinc-200:oklch(92% .004 286.32);--color-zinc-300:oklch(87.1% .006 286.286);--color-zinc-400:oklch(70.5% .015 286.067);--color-zinc-500:oklch(55.2% .016 285.938);--color-zinc-600:oklch(44.2% .017 285.786);--color-zinc-700:oklch(37% .013 285.805);--color-zinc-800:oklch(27.4% .006 286.033);--color-zinc-900:oklch(21% .006 285.885);--color-black:#000;--color-white:#fff;--spacing:.25rem;--container-md:28rem;--container-5xl:64rem;--container-6xl:72rem;--text-xs:.75rem;--text-xs--line-height:calc(1/.75);--text-sm:.875rem;--text-sm--line-height:calc(1.25/.875);--text-base:1rem;--text-base--line-height: 1.5 ;--text-lg:1.125rem;--text-lg--line-height:calc(1.75/1.125);--text-xl:1.25rem;--text-xl--line-height:calc(1.75/1.25);--text-2xl:1.5rem;--text-2xl--line-height:calc(2/1.5);--text-3xl:1.875rem;--text-3xl--line-height: 1.2 ;--text-4xl:2.25rem;--text-4xl--line-height:calc(2.5/2.25);--font-weight-normal:400;--font-weight-medium:500;--font-weight-semibold:600;--font-weight-bold:700;--font-weight-black:900;--tracking-tight:-.025em;--tracking-wide:.025em;--tracking-wider:.05em;--tracking-widest:.1em;--leading-tight:1.25;--leading-snug:1.375;--leading-relaxed:1.625;--radius-xs:.125rem;--radius-sm:.25rem;--radius-md:.375rem;--radius-lg:.5rem;--radius-xl:.75rem;--radius-2xl:1rem;--ease-out:cubic-bezier(0,0,.2,1);--ease-in-out:cubic-bezier(.4,0,.2,1);--animate-spin:spin 1s linear infinite;--animate-ping:ping 1s cubic-bezier(0,0,.2,1)infinite;--animate-pulse:pulse 2s cubic-bezier(.4,0,.6,1)infinite;--blur-xs:4px;--blur-sm:8px;--blur-md:12px;--default-transition-duration:.15s;--default-transition-timing-function:cubic-bezier(.4,0,.2,1);--default-font-family:var(--font-sans);--default-mono-font-family:var(--font-mono)}}@layer base{*,:after,:before,::backdrop{box-sizing:border-box;border:0 solid;margin:0;padding:0}::file-selector-button{box-sizing:border-box;border:0 solid;margin:0;padding:0}html,:host{-webkit-text-size-adjust:100%;tab-size:4;line-height:1.5;font-family:var(--default-font-family,ui-sans-serif,system-ui,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji");font-feature-settings:var(--default-font-feature-settings,normal);font-variation-settings:var(--default-font-variation-settings,normal);-webkit-tap-highlight-color:transparent}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:var(--default-mono-font-family,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace);font-feature-settings:var(--default-mono-font-feature-settings,normal);font-variation-settings:var(--default-mono-font-variation-settings,normal);font-size:1em}small{font-size:80%}sub,sup{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}:-moz-focusring{outline:auto}progress{vertical-align:baseline}summary{display:list-item}ol,ul,menu{list-style:none}img,svg,video,canvas,audio,iframe,embed,object{vertical-align:middle;display:block}img,video{max-width:100%;height:auto}button,input,select,optgroup,textarea{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}::file-selector-button{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}:where(select:is([multiple],[size])) optgroup{font-weight:bolder}:where(select:is([multiple],[size])) optgroup option{padding-inline-start:20px}::file-selector-button{margin-inline-end:4px}::placeholder{opacity:1}@supports (not ((-webkit-appearance:-apple-pay-button))) or (contain-intrinsic-size:1px){::placeholder{color:currentColor}@supports (color:color-mix(in lab,red,red)){::placeholder{color:color-mix(in oklab,currentcolor 50%,transparent)}}}textarea{resize:vertical}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-date-and-time-value{min-height:1lh;text-align:inherit}::-webkit-datetime-edit{display:inline-flex}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-datetime-edit{padding-block:0}::-webkit-datetime-edit-year-field{padding-block:0}::-webkit-datetime-edit-month-field{padding-block:0}::-webkit-datetime-edit-day-field{padding-block:0}::-webkit-datetime-edit-hour-field{padding-block:0}::-webkit-datetime-edit-minute-field{padding-block:0}::-webkit-datetime-edit-second-field{padding-block:0}::-webkit-datetime-edit-millisecond-field{padding-block:0}::-webkit-datetime-edit-meridiem-field{padding-block:0}::-webkit-calendar-picker-indicator{line-height:1}:-moz-ui-invalid{box-shadow:none}button,input:where([type=button],[type=reset],[type=submit]){appearance:button}::file-selector-button{appearance:button}::-webkit-inner-spin-button{height:auto}::-webkit-outer-spin-button{height:auto}[hidden]:where(:not([hidden=until-found])){display:none!important}*,:after,:before,::backdrop{border-color:var(--color-gray-200,currentColor)}::file-selector-button{border-color:var(--color-gray-200,currentColor)}input,textarea,select{color:#000;background-color:#fff}input::placeholder,textarea::placeholder{color:var(--color-gray-400)}button:not(:disabled),[role=button]:not(:disabled){cursor:pointer}dialog{margin:auto}}@layer components;@layer utilities{.pointer-events-auto{pointer-events:auto}.pointer-events-none{pointer-events:none}.invisible{visibility:hidden}.visible{visibility:visible}.absolute{position:absolute}.fixed{position:fixed}.relative{position:relative}.static{position:static}.sticky{position:sticky}.inset-0{inset:calc(var(--spacing)*0)}.inset-2{inset:calc(var(--spacing)*2)}.inset-x-0{inset-inline:calc(var(--spacing)*0)}.-top-0\\.75{top:calc(var(--spacing)*-.75)}.-top-1{top:calc(var(--spacing)*-1)}.-top-1\\.5{top:calc(var(--spacing)*-1.5)}.-top-3{top:calc(var(--spacing)*-3)}.-top-6{top:calc(var(--spacing)*-6)}.-top-8{top:calc(var(--spacing)*-8)}.-top-\\[250\\%\\]{top:-250%}.top-0{top:calc(var(--spacing)*0)}.top-1\\.5{top:calc(var(--spacing)*1.5)}.top-1\\/2{top:50%}.top-3{top:calc(var(--spacing)*3)}.top-4{top:calc(var(--spacing)*4)}.top-5{top:calc(var(--spacing)*5)}.top-6{top:calc(var(--spacing)*6)}.top-10{top:calc(var(--spacing)*10)}.top-\\[15\\%\\]{top:15%}.top-\\[45\\%\\]{top:45%}.top-full{top:100%}.-right-1{right:calc(var(--spacing)*-1)}.-right-3{right:calc(var(--spacing)*-3)}.right-0{right:calc(var(--spacing)*0)}.right-1{right:calc(var(--spacing)*1)}.right-3{right:calc(var(--spacing)*3)}.right-4{right:calc(var(--spacing)*4)}.right-5{right:calc(var(--spacing)*5)}.bottom-0{bottom:calc(var(--spacing)*0)}.bottom-1{bottom:calc(var(--spacing)*1)}.bottom-4{bottom:calc(var(--spacing)*4)}.bottom-full{bottom:100%}.-left-10{left:calc(var(--spacing)*-10)}.left-\\(--pos\\){left:var(--pos)}.left-0{left:calc(var(--spacing)*0)}.left-1\\/2{left:50%}.left-4{left:calc(var(--spacing)*4)}.isolate{isolation:isolate}.-z-10{z-index:-10}.-z-50{z-index:-50}.z-10{z-index:10}.z-20{z-index:20}.z-30{z-index:30}.z-50{z-index:50}.z-999{z-index:999}.z-1000{z-index:1000}.z-1100{z-index:1100}.z-1200{z-index:1200}.z-2000{z-index:2000}.z-9999{z-index:9999}.z-10001{z-index:10001}.z-10002{z-index:10002}.z-10003{z-index:10003}.z-10004{z-index:10004}.z-40001{z-index:40001}.z-99999{z-index:99999}.z-\\[60\\]{z-index:60}.z-\\[100\\]{z-index:100}.z-\\[1001\\]{z-index:1001}.z-\\[1100\\]{z-index:1100}.z-\\[9998\\]{z-index:9998}.z-\\[9999\\]{z-index:9999}.z-\\[10000\\]{z-index:10000}.z-\\[11000\\]{z-index:11000}.z-\\[11001\\]{z-index:11001}.order-1{order:1}.order-2{order:2}.col-span-2{grid-column:span 2/span 2}.col-span-full{grid-column:1/-1}.row-span-full{grid-row:1/-1}.container{width:100%}@media(min-width:40rem){.container{max-width:40rem}}@media(min-width:48rem){.container{max-width:48rem}}@media(min-width:64rem){.container{max-width:64rem}}@media(min-width:80rem){.container{max-width:80rem}}@media(min-width:96rem){.container{max-width:96rem}}.m-0{margin:calc(var(--spacing)*0)}.m-4{margin:calc(var(--spacing)*4)}.m-8{margin:calc(var(--spacing)*8)}.m-auto{margin:auto}.mx-0\\.5{margin-inline:calc(var(--spacing)*.5)}.mx-1{margin-inline:calc(var(--spacing)*1)}.mx-auto{margin-inline:auto}.my-0\\.5{margin-block:calc(var(--spacing)*.5)}.my-1{margin-block:calc(var(--spacing)*1)}.my-2{margin-block:calc(var(--spacing)*2)}.my-3{margin-block:calc(var(--spacing)*3)}.my-5{margin-block:calc(var(--spacing)*5)}.my-auto{margin-block:auto}.-mt-\\[20px\\]{margin-top:-20px}.mt-0\\.5{margin-top:calc(var(--spacing)*.5)}.mt-1{margin-top:calc(var(--spacing)*1)}.mt-1\\.5{margin-top:calc(var(--spacing)*1.5)}.mt-2{margin-top:calc(var(--spacing)*2)}.mt-2\\.5{margin-top:calc(var(--spacing)*2.5)}.mt-3{margin-top:calc(var(--spacing)*3)}.mt-4{margin-top:calc(var(--spacing)*4)}.mt-5{margin-top:calc(var(--spacing)*5)}.mt-6{margin-top:calc(var(--spacing)*6)}.mt-8{margin-top:calc(var(--spacing)*8)}.mt-auto{margin-top:auto}.mr-0{margin-right:calc(var(--spacing)*0)}.mr-0\\.5{margin-right:calc(var(--spacing)*.5)}.mr-1{margin-right:calc(var(--spacing)*1)}.mr-2{margin-right:calc(var(--spacing)*2)}.mr-4{margin-right:calc(var(--spacing)*4)}.mb-1{margin-bottom:calc(var(--spacing)*1)}.mb-1\\.5{margin-bottom:calc(var(--spacing)*1.5)}.mb-2{margin-bottom:calc(var(--spacing)*2)}.mb-2\\.5{margin-bottom:calc(var(--spacing)*2.5)}.mb-3{margin-bottom:calc(var(--spacing)*3)}.mb-4{margin-bottom:calc(var(--spacing)*4)}.mb-5{margin-bottom:calc(var(--spacing)*5)}.mb-6{margin-bottom:calc(var(--spacing)*6)}.mb-8{margin-bottom:calc(var(--spacing)*8)}.mb-\\[clamp\\(1rem\\,2vh\\,2rem\\)\\]{margin-bottom:clamp(1rem,2vh,2rem)}.ml-1{margin-left:calc(var(--spacing)*1)}.ml-2{margin-left:calc(var(--spacing)*2)}.ml-4{margin-left:calc(var(--spacing)*4)}.ml-\\[clamp\\(0\\.2rem\\,0\\.4vw\\,0\\.4vh\\)\\]{margin-left:clamp(.2rem,.4vw,.4vh)}.ml-auto{margin-left:auto}.box-border{box-sizing:border-box}.box-content{box-sizing:content-box}.block{display:block}.contents{display:contents}.flex{display:flex}.grid{display:grid}.hidden{display:none}.inline{display:inline}.inline-block{display:inline-block}.inline-flex{display:inline-flex}.table{display:table}.aspect-3\\/4{aspect-ratio:3/4}.aspect-\\[2\\/1\\]{aspect-ratio:2}.aspect-\\[4\\/3\\]{aspect-ratio:4/3}.aspect-square{aspect-ratio:1}.size-1{width:calc(var(--spacing)*1);height:calc(var(--spacing)*1)}.size-3\\.5{width:calc(var(--spacing)*3.5);height:calc(var(--spacing)*3.5)}.size-3\\.75{width:calc(var(--spacing)*3.75);height:calc(var(--spacing)*3.75)}.size-4\\.5{width:calc(var(--spacing)*4.5);height:calc(var(--spacing)*4.5)}.size-5{width:calc(var(--spacing)*5);height:calc(var(--spacing)*5)}.size-6{width:calc(var(--spacing)*6);height:calc(var(--spacing)*6)}.size-7\\.5{width:calc(var(--spacing)*7.5);height:calc(var(--spacing)*7.5)}.size-\\[48px\\]{width:48px;height:48px}.h-0{height:calc(var(--spacing)*0)}.h-1{height:calc(var(--spacing)*1)}.h-1\\.5{height:calc(var(--spacing)*1.5)}.h-1\\.75{height:calc(var(--spacing)*1.75)}.h-1\\/2{height:50%}.h-2{height:calc(var(--spacing)*2)}.h-2\\.5{height:calc(var(--spacing)*2.5)}.h-3{height:calc(var(--spacing)*3)}.h-4{height:calc(var(--spacing)*4)}.h-5{height:calc(var(--spacing)*5)}.h-6{height:calc(var(--spacing)*6)}.h-7{height:calc(var(--spacing)*7)}.h-7\\.5{height:calc(var(--spacing)*7.5)}.h-8{height:calc(var(--spacing)*8)}.h-10{height:calc(var(--spacing)*10)}.h-12{height:calc(var(--spacing)*12)}.h-16{height:calc(var(--spacing)*16)}.h-20{height:calc(var(--spacing)*20)}.h-24{height:calc(var(--spacing)*24)}.h-37\\.5{height:calc(var(--spacing)*37.5)}.h-40{height:calc(var(--spacing)*40)}.h-80{height:calc(var(--spacing)*80)}.h-\\[2px\\]{height:2px}.h-\\[22px\\]{height:22px}.h-\\[28px\\]{height:28px}.h-\\[30px\\]{height:30px}.h-\\[40px\\]{height:40px}.h-\\[50px\\]{height:50px}.h-\\[60px\\]{height:60px}.h-\\[calc\\(100\\%-2px\\)\\]{height:calc(100% - 2px)}.h-\\[clamp\\(40px\\,6vh\\,64px\\)\\]{height:clamp(40px,6vh,64px)}.h-auto{height:auto}.h-full{height:100%}.h-px{height:1px}.max-h-30{max-height:calc(var(--spacing)*30)}.max-h-\\[30vh\\]{max-height:30vh}.max-h-\\[35vh\\]{max-height:35vh}.max-h-\\[80vh\\]{max-height:80vh}.max-h-\\[90vh\\]{max-height:90vh}.max-h-\\[calc\\(100vh-4rem\\)\\]{max-height:calc(100vh - 4rem)}.max-h-\\[calc\\(100vh-60px\\)\\]{max-height:calc(100vh - 60px)}.max-h-\\[calc\\(100vh-80px\\)\\]{max-height:calc(100vh - 80px)}.max-h-\\[calc\\(100vh-120px-env\\(safe-area-inset-bottom\\)\\)\\]{max-height:calc(100vh - 120px - env(safe-area-inset-bottom))}.max-h-none{max-height:none}.min-h-0{min-height:calc(var(--spacing)*0)}.min-h-\\[100px\\]{min-height:100px}.min-h-\\[240px\\]{min-height:240px}.min-h-\\[400px\\]{min-height:400px}.min-h-\\[600px\\]{min-height:600px}.min-h-full{min-height:100%}.min-h-min{min-height:min-content}.min-h-screen{min-height:100vh}.w-\\(--width\\){width:var(--width)}.w-0{width:calc(var(--spacing)*0)}.w-0\\.5{width:calc(var(--spacing)*.5)}.w-1\\.5{width:calc(var(--spacing)*1.5)}.w-1\\/2{width:50%}.w-1\\/5{width:20%}.w-2{width:calc(var(--spacing)*2)}.w-2\\.5{width:calc(var(--spacing)*2.5)}.w-3{width:calc(var(--spacing)*3)}.w-3\\/5{width:60%}.w-4{width:calc(var(--spacing)*4)}.w-5{width:calc(var(--spacing)*5)}.w-6{width:calc(var(--spacing)*6)}.w-7{width:calc(var(--spacing)*7)}.w-7\\.5{width:calc(var(--spacing)*7.5)}.w-8{width:calc(var(--spacing)*8)}.w-9{width:calc(var(--spacing)*9)}.w-10{width:calc(var(--spacing)*10)}.w-12{width:calc(var(--spacing)*12)}.w-15{width:calc(var(--spacing)*15)}.w-16{width:calc(var(--spacing)*16)}.w-24{width:calc(var(--spacing)*24)}.w-28{width:calc(var(--spacing)*28)}.w-31\\.25{width:calc(var(--spacing)*31.25)}.w-32{width:calc(var(--spacing)*32)}.w-35{width:calc(var(--spacing)*35)}.w-37\\.5{width:calc(var(--spacing)*37.5)}.w-48{width:calc(var(--spacing)*48)}.w-50{width:calc(var(--spacing)*50)}.w-75{width:calc(var(--spacing)*75)}.w-87\\.5{width:calc(var(--spacing)*87.5)}.w-320{width:calc(var(--spacing)*320)}.w-\\[5ch\\]{width:5ch}.w-\\[6rem\\]{width:6rem}.w-\\[8\\%\\]{width:8%}.w-\\[20\\%\\]{width:20%}.w-\\[52px\\]{width:52px}.w-\\[60px\\]{width:60px}.w-\\[80\\%\\]{width:80%}.w-\\[90\\%\\]{width:90%}.w-\\[100px\\]{width:100px}.w-\\[160px\\]{width:160px}.w-\\[200px\\]{width:200px}.w-\\[300px\\]{width:300px}.w-\\[calc\\(100\\%-1px\\)\\]{width:calc(100% - 1px)}.w-\\[calc\\(100vw-32px\\)\\]{width:calc(100vw - 32px)}.w-\\[clamp\\(120px\\,15vw\\,192px\\)\\]{width:clamp(120px,15vw,192px)}.w-auto{width:auto}.w-fit{width:fit-content}.w-full{width:100%}.w-max{width:max-content}.w-px{width:1px}.max-w-5xl{max-width:var(--container-5xl)}.max-w-6xl{max-width:var(--container-6xl)}.max-w-100{max-width:calc(var(--spacing)*100)}.max-w-120{max-width:calc(var(--spacing)*120)}.max-w-135{max-width:calc(var(--spacing)*135)}.max-w-\\[20cm\\]{max-width:20cm}.max-w-\\[90\\%\\]{max-width:90%}.max-w-\\[90vw\\]{max-width:90vw}.max-w-\\[200px\\]{max-width:200px}.max-w-\\[220px\\]{max-width:220px}.max-w-\\[240px\\]{max-width:240px}.max-w-\\[900px\\]{max-width:900px}.max-w-full{max-width:100%}.max-w-md{max-width:var(--container-md)}.max-w-none{max-width:none}.min-w-0{min-width:calc(var(--spacing)*0)}.min-w-5{min-width:calc(var(--spacing)*5)}.min-w-7\\.5{min-width:calc(var(--spacing)*7.5)}.min-w-24{min-width:calc(var(--spacing)*24)}.min-w-72{min-width:calc(var(--spacing)*72)}.min-w-75{min-width:calc(var(--spacing)*75)}.min-w-\\[32px\\]{min-width:32px}.min-w-\\[50px\\]{min-width:50px}.min-w-\\[60px\\]{min-width:60px}.min-w-\\[80px\\]{min-width:80px}.min-w-\\[100px\\]{min-width:100px}.min-w-\\[400px\\]{min-width:400px}.flex-1{flex:1}.shrink-0{flex-shrink:0}.grow{flex-grow:1}.border-collapse{border-collapse:collapse}.border-separate{border-collapse:separate}.border-spacing-y-1{--tw-border-spacing-y:calc(var(--spacing)*1);border-spacing:var(--tw-border-spacing-x)var(--tw-border-spacing-y)}.origin-center{transform-origin:50%}.origin-left{transform-origin:0}.-translate-x-1\\/2{--tw-translate-x: -50% ;translate:var(--tw-translate-x)var(--tw-translate-y)}.-translate-x-full{--tw-translate-x:-100%;translate:var(--tw-translate-x)var(--tw-translate-y)}.translate-x-0{--tw-translate-x:calc(var(--spacing)*0);translate:var(--tw-translate-x)var(--tw-translate-y)}.translate-x-full{--tw-translate-x:100%;translate:var(--tw-translate-x)var(--tw-translate-y)}.-translate-y-1\\/2{--tw-translate-y: -50% ;translate:var(--tw-translate-x)var(--tw-translate-y)}.-translate-y-\\[1px\\]{--tw-translate-y: -1px ;translate:var(--tw-translate-x)var(--tw-translate-y)}.-translate-y-\\[48\\%\\]{--tw-translate-y: -48% ;translate:var(--tw-translate-x)var(--tw-translate-y)}.translate-y-0{--tw-translate-y:calc(var(--spacing)*0);translate:var(--tw-translate-x)var(--tw-translate-y)}.translate-y-3{--tw-translate-y:calc(var(--spacing)*3);translate:var(--tw-translate-x)var(--tw-translate-y)}.scale-75{--tw-scale-x:75%;--tw-scale-y:75%;--tw-scale-z:75%;scale:var(--tw-scale-x)var(--tw-scale-y)}.scale-100{--tw-scale-x:100%;--tw-scale-y:100%;--tw-scale-z:100%;scale:var(--tw-scale-x)var(--tw-scale-y)}.scale-110{--tw-scale-x:110%;--tw-scale-y:110%;--tw-scale-z:110%;scale:var(--tw-scale-x)var(--tw-scale-y)}.scale-125{--tw-scale-x:125%;--tw-scale-y:125%;--tw-scale-z:125%;scale:var(--tw-scale-x)var(--tw-scale-y)}.rotate-12{rotate:12deg}.transform{transform:var(--tw-rotate-x,)var(--tw-rotate-y,)var(--tw-rotate-z,)var(--tw-skew-x,)var(--tw-skew-y,)}.animate-ping{animation:var(--animate-ping)}.animate-pulse{animation:var(--animate-pulse)}.animate-spin{animation:var(--animate-spin)}.cursor-not-allowed{cursor:not-allowed}.cursor-pointer{cursor:pointer}.resize{resize:both}.resize-y{resize:vertical}.list-disc{list-style-type:disc}.appearance-none{appearance:none}.auto-cols-fr{grid-auto-columns:minmax(0,1fr)}.auto-cols-max{grid-auto-columns:max-content}.grid-flow-col{grid-auto-flow:column}.grid-cols-1{grid-template-columns:repeat(1,minmax(0,1fr))}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.grid-cols-5{grid-template-columns:repeat(5,minmax(0,1fr))}.grid-cols-\\[auto_1fr\\]{grid-template-columns:auto 1fr}.grid-cols-\\[repeat\\(var\\(--cols\\)\\,1fr\\)\\]{grid-template-columns:repeat(var(--cols),1fr)}.grid-rows-1{grid-template-rows:repeat(1,minmax(0,1fr))}.grid-rows-2{grid-template-rows:repeat(2,minmax(0,1fr))}.flex-col{flex-direction:column}.flex-col-reverse{flex-direction:column-reverse}.flex-row{flex-direction:row}.flex-nowrap{flex-wrap:nowrap}.flex-wrap{flex-wrap:wrap}.content-start{align-content:flex-start}.items-center{align-items:center}.items-end{align-items:flex-end}.items-start{align-items:flex-start}.items-stretch{align-items:stretch}.justify-between{justify-content:space-between}.justify-center{justify-content:center}.justify-end{justify-content:flex-end}.justify-start{justify-content:flex-start}.gap-0{gap:calc(var(--spacing)*0)}.gap-0\\.5{gap:calc(var(--spacing)*.5)}.gap-1{gap:calc(var(--spacing)*1)}.gap-1\\.5{gap:calc(var(--spacing)*1.5)}.gap-2{gap:calc(var(--spacing)*2)}.gap-2\\.5{gap:calc(var(--spacing)*2.5)}.gap-3{gap:calc(var(--spacing)*3)}.gap-4{gap:calc(var(--spacing)*4)}.gap-5{gap:calc(var(--spacing)*5)}.gap-6{gap:calc(var(--spacing)*6)}.gap-8{gap:calc(var(--spacing)*8)}.gap-\\[6px\\]{gap:6px}.gap-\\[clamp\\(1\\.5rem\\,3vw\\,3rem\\)\\]{gap:clamp(1.5rem,3vw,3rem)}.gap-\\[clamp\\(1rem\\,3vh\\,3rem\\)\\]{gap:clamp(1rem,3vh,3rem)}:where(.space-y-1>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*1)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*1)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-2>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*2)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*2)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-3>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*3)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*3)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-4>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*4)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*4)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-6>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*6)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*6)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-8>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*8)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*8)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-10>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*10)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*10)*calc(1 - var(--tw-space-y-reverse)))}.gap-x-2{column-gap:calc(var(--spacing)*2)}.gap-x-6{column-gap:calc(var(--spacing)*6)}.gap-y-1{row-gap:calc(var(--spacing)*1)}.gap-y-2{row-gap:calc(var(--spacing)*2)}:where(.divide-y>:not(:last-child)){--tw-divide-y-reverse:0;border-bottom-style:var(--tw-border-style);border-top-style:var(--tw-border-style);border-top-width:calc(1px*var(--tw-divide-y-reverse));border-bottom-width:calc(1px*calc(1 - var(--tw-divide-y-reverse)))}:where(.divide-white\\/5>:not(:last-child)){border-color:#ffffff0d}@supports (color:color-mix(in lab,red,red)){:where(.divide-white\\/5>:not(:last-child)){border-color:color-mix(in oklab,var(--color-white)5%,transparent)}}.place-self-start{place-self:start}.self-end{align-self:flex-end}.self-stretch{align-self:stretch}.truncate{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.overflow-auto{overflow:auto}.overflow-hidden{overflow:hidden}.overflow-visible{overflow:visible}.overflow-x-auto{overflow-x:auto}.overflow-x-hidden{overflow-x:hidden}.overflow-y-auto{overflow-y:auto}.rounded{border-radius:.25rem}.rounded-2xl{border-radius:var(--radius-2xl)}.rounded-\\[10px\\]{border-radius:10px}.rounded-\\[50\\%\\]{border-radius:50%}.rounded-full{border-radius:3.40282e38px}.rounded-lg{border-radius:var(--radius-lg)}.rounded-md{border-radius:var(--radius-md)}.rounded-sm{border-radius:var(--radius-sm)}.rounded-xl{border-radius:var(--radius-xl)}.rounded-xs{border-radius:var(--radius-xs)}.rounded-t-xl{border-top-left-radius:var(--radius-xl);border-top-right-radius:var(--radius-xl)}.rounded-tl-full{border-top-left-radius:3.40282e38px}.border{border-style:var(--tw-border-style);border-width:1px}.border-0{border-style:var(--tw-border-style);border-width:0}.border-1{border-style:var(--tw-border-style);border-width:1px}.border-2{border-style:var(--tw-border-style);border-width:2px}.border-4{border-style:var(--tw-border-style);border-width:4px}.border-t{border-top-style:var(--tw-border-style);border-top-width:1px}.border-b,.border-b-1{border-bottom-style:var(--tw-border-style);border-bottom-width:1px}.border-b-2{border-bottom-style:var(--tw-border-style);border-bottom-width:2px}.border-l-4{border-left-style:var(--tw-border-style);border-left-width:4px}.border-dashed{--tw-border-style:dashed;border-style:dashed}.border-none{--tw-border-style:none;border-style:none}.border-solid{--tw-border-style:solid;border-style:solid}.border-\\[\\#1a1a1a\\]{border-color:#1a1a1a}.border-\\[\\#ccc\\]{border-color:#ccc}.border-amber-500\\/30{border-color:#f99c004d}@supports (color:color-mix(in lab,red,red)){.border-amber-500\\/30{border-color:color-mix(in oklab,var(--color-amber-500)30%,transparent)}}.border-black\\/10{border-color:#0000001a}@supports (color:color-mix(in lab,red,red)){.border-black\\/10{border-color:color-mix(in oklab,var(--color-black)10%,transparent)}}.border-black\\/30{border-color:#0000004d}@supports (color:color-mix(in lab,red,red)){.border-black\\/30{border-color:color-mix(in oklab,var(--color-black)30%,transparent)}}.border-blue-400\\/30{border-color:#54a2ff4d}@supports (color:color-mix(in lab,red,red)){.border-blue-400\\/30{border-color:color-mix(in oklab,var(--color-blue-400)30%,transparent)}}.border-blue-400\\/40{border-color:#54a2ff66}@supports (color:color-mix(in lab,red,red)){.border-blue-400\\/40{border-color:color-mix(in oklab,var(--color-blue-400)40%,transparent)}}.border-blue-500{border-color:var(--color-blue-500)}.border-blue-500\\/20{border-color:#3080ff33}@supports (color:color-mix(in lab,red,red)){.border-blue-500\\/20{border-color:color-mix(in oklab,var(--color-blue-500)20%,transparent)}}.border-blue-500\\/30{border-color:#3080ff4d}@supports (color:color-mix(in lab,red,red)){.border-blue-500\\/30{border-color:color-mix(in oklab,var(--color-blue-500)30%,transparent)}}.border-blue-500\\/50{border-color:#3080ff80}@supports (color:color-mix(in lab,red,red)){.border-blue-500\\/50{border-color:color-mix(in oklab,var(--color-blue-500)50%,transparent)}}.border-cyan-400{border-color:var(--color-cyan-400)}.border-emerald-400\\/30{border-color:#00d2944d}@supports (color:color-mix(in lab,red,red)){.border-emerald-400\\/30{border-color:color-mix(in oklab,var(--color-emerald-400)30%,transparent)}}.border-emerald-400\\/40{border-color:#00d29466}@supports (color:color-mix(in lab,red,red)){.border-emerald-400\\/40{border-color:color-mix(in oklab,var(--color-emerald-400)40%,transparent)}}.border-gray-200{border-color:var(--color-gray-200)}.border-gray-200\\/0{border-color:#0000}@supports (color:color-mix(in lab,red,red)){.border-gray-200\\/0{border-color:color-mix(in oklab,var(--color-gray-200)0%,transparent)}}.border-gray-500{border-color:var(--color-gray-500)}.border-gray-600{border-color:var(--color-gray-600)}.border-gray-700{border-color:var(--color-gray-700)}.border-green-500{border-color:var(--color-green-500)}.border-green-500\\/30{border-color:#00c7584d}@supports (color:color-mix(in lab,red,red)){.border-green-500\\/30{border-color:color-mix(in oklab,var(--color-green-500)30%,transparent)}}.border-indigo-400\\/25{border-color:#7d87ff40}@supports (color:color-mix(in lab,red,red)){.border-indigo-400\\/25{border-color:color-mix(in oklab,var(--color-indigo-400)25%,transparent)}}.border-orange-400{border-color:var(--color-orange-400)}.border-purple-400\\/25{border-color:#c07eff40}@supports (color:color-mix(in lab,red,red)){.border-purple-400\\/25{border-color:color-mix(in oklab,var(--color-purple-400)25%,transparent)}}.border-red-300\\/40{border-color:#ffa3a366}@supports (color:color-mix(in lab,red,red)){.border-red-300\\/40{border-color:color-mix(in oklab,var(--color-red-300)40%,transparent)}}.border-red-400\\/30{border-color:#ff65684d}@supports (color:color-mix(in lab,red,red)){.border-red-400\\/30{border-color:color-mix(in oklab,var(--color-red-400)30%,transparent)}}.border-red-500\\/20{border-color:#fb2c3633}@supports (color:color-mix(in lab,red,red)){.border-red-500\\/20{border-color:color-mix(in oklab,var(--color-red-500)20%,transparent)}}.border-red-500\\/30{border-color:#fb2c364d}@supports (color:color-mix(in lab,red,red)){.border-red-500\\/30{border-color:color-mix(in oklab,var(--color-red-500)30%,transparent)}}.border-red-500\\/50{border-color:#fb2c3680}@supports (color:color-mix(in lab,red,red)){.border-red-500\\/50{border-color:color-mix(in oklab,var(--color-red-500)50%,transparent)}}.border-slate-500{border-color:var(--color-slate-500)}.border-slate-600{border-color:var(--color-slate-600)}.border-transparent{border-color:#0000}.border-white\\/5{border-color:#ffffff0d}@supports (color:color-mix(in lab,red,red)){.border-white\\/5{border-color:color-mix(in oklab,var(--color-white)5%,transparent)}}.border-white\\/10{border-color:#ffffff1a}@supports (color:color-mix(in lab,red,red)){.border-white\\/10{border-color:color-mix(in oklab,var(--color-white)10%,transparent)}}.border-white\\/20{border-color:#fff3}@supports (color:color-mix(in lab,red,red)){.border-white\\/20{border-color:color-mix(in oklab,var(--color-white)20%,transparent)}}.border-white\\/40{border-color:#fff6}@supports (color:color-mix(in lab,red,red)){.border-white\\/40{border-color:color-mix(in oklab,var(--color-white)40%,transparent)}}.border-white\\/90{border-color:#ffffffe6}@supports (color:color-mix(in lab,red,red)){.border-white\\/90{border-color:color-mix(in oklab,var(--color-white)90%,transparent)}}.border-yellow-400{border-color:var(--color-yellow-400)}.border-yellow-500{border-color:var(--color-yellow-500)}.border-yellow-500\\/30{border-color:#edb2004d}@supports (color:color-mix(in lab,red,red)){.border-yellow-500\\/30{border-color:color-mix(in oklab,var(--color-yellow-500)30%,transparent)}}.border-zinc-400\\/20{border-color:#9f9fa933}@supports (color:color-mix(in lab,red,red)){.border-zinc-400\\/20{border-color:color-mix(in oklab,var(--color-zinc-400)20%,transparent)}}.border-zinc-400\\/30{border-color:#9f9fa94d}@supports (color:color-mix(in lab,red,red)){.border-zinc-400\\/30{border-color:color-mix(in oklab,var(--color-zinc-400)30%,transparent)}}.border-zinc-600{border-color:var(--color-zinc-600)}.border-zinc-800{border-color:var(--color-zinc-800)}.border-t-blue-400{border-top-color:var(--color-blue-400)}.border-t-blue-500{border-top-color:var(--color-blue-500)}.border-t-green-500{border-top-color:var(--color-green-500)}.border-t-transparent{border-top-color:#0000}.border-t-white{border-top-color:var(--color-white)}.border-t-yellow-500{border-top-color:var(--color-yellow-500)}.border-b-white{border-bottom-color:var(--color-white)}.border-l-blue-500{border-left-color:var(--color-blue-500)}.bg-\\(--bg\\){background-color:var(--bg)}.bg-\\[\\#0f1116\\]{background-color:#0f1116}.bg-\\[\\#2a2a2a\\]{background-color:#2a2a2a}.bg-\\[\\#3d7bab\\]{background-color:#3d7bab}.bg-\\[\\#5865F2\\]{background-color:#5865f2}.bg-\\[\\#23232382\\]{background-color:#23232382}.bg-amber-400\\/80{background-color:#fcbb00cc}@supports (color:color-mix(in lab,red,red)){.bg-amber-400\\/80{background-color:color-mix(in oklab,var(--color-amber-400)80%,transparent)}}.bg-amber-500\\/10{background-color:#f99c001a}@supports (color:color-mix(in lab,red,red)){.bg-amber-500\\/10{background-color:color-mix(in oklab,var(--color-amber-500)10%,transparent)}}.bg-amber-600\\/10{background-color:#dd74001a}@supports (color:color-mix(in lab,red,red)){.bg-amber-600\\/10{background-color:color-mix(in oklab,var(--color-amber-600)10%,transparent)}}.bg-black\\/15{background-color:#00000026}@supports (color:color-mix(in lab,red,red)){.bg-black\\/15{background-color:color-mix(in oklab,var(--color-black)15%,transparent)}}.bg-black\\/20{background-color:#0003}@supports (color:color-mix(in lab,red,red)){.bg-black\\/20{background-color:color-mix(in oklab,var(--color-black)20%,transparent)}}.bg-black\\/25{background-color:#00000040}@supports (color:color-mix(in lab,red,red)){.bg-black\\/25{background-color:color-mix(in oklab,var(--color-black)25%,transparent)}}.bg-black\\/30{background-color:#0000004d}@supports (color:color-mix(in lab,red,red)){.bg-black\\/30{background-color:color-mix(in oklab,var(--color-black)30%,transparent)}}.bg-black\\/60{background-color:#0009}@supports (color:color-mix(in lab,red,red)){.bg-black\\/60{background-color:color-mix(in oklab,var(--color-black)60%,transparent)}}.bg-black\\/80{background-color:#000c}@supports (color:color-mix(in lab,red,red)){.bg-black\\/80{background-color:color-mix(in oklab,var(--color-black)80%,transparent)}}.bg-blue-400{background-color:var(--color-blue-400)}.bg-blue-400\\/80{background-color:#54a2ffcc}@supports (color:color-mix(in lab,red,red)){.bg-blue-400\\/80{background-color:color-mix(in oklab,var(--color-blue-400)80%,transparent)}}.bg-blue-500{background-color:var(--color-blue-500)}.bg-blue-500\\/10{background-color:#3080ff1a}@supports (color:color-mix(in lab,red,red)){.bg-blue-500\\/10{background-color:color-mix(in oklab,var(--color-blue-500)10%,transparent)}}.bg-blue-500\\/15{background-color:#3080ff26}@supports (color:color-mix(in lab,red,red)){.bg-blue-500\\/15{background-color:color-mix(in oklab,var(--color-blue-500)15%,transparent)}}.bg-blue-500\\/20{background-color:#3080ff33}@supports (color:color-mix(in lab,red,red)){.bg-blue-500\\/20{background-color:color-mix(in oklab,var(--color-blue-500)20%,transparent)}}.bg-blue-500\\/50{background-color:#3080ff80}@supports (color:color-mix(in lab,red,red)){.bg-blue-500\\/50{background-color:color-mix(in oklab,var(--color-blue-500)50%,transparent)}}.bg-blue-500\\/60{background-color:#3080ff99}@supports (color:color-mix(in lab,red,red)){.bg-blue-500\\/60{background-color:color-mix(in oklab,var(--color-blue-500)60%,transparent)}}.bg-blue-600{background-color:var(--color-blue-600)}.bg-blue-600\\/90{background-color:#155dfce6}@supports (color:color-mix(in lab,red,red)){.bg-blue-600\\/90{background-color:color-mix(in oklab,var(--color-blue-600)90%,transparent)}}.bg-blue-900\\/20{background-color:#1c398e33}@supports (color:color-mix(in lab,red,red)){.bg-blue-900\\/20{background-color:color-mix(in oklab,var(--color-blue-900)20%,transparent)}}.bg-emerald-400{background-color:var(--color-emerald-400)}.bg-emerald-500\\/10{background-color:#00bb7f1a}@supports (color:color-mix(in lab,red,red)){.bg-emerald-500\\/10{background-color:color-mix(in oklab,var(--color-emerald-500)10%,transparent)}}.bg-gray-100{background-color:var(--color-gray-100)}.bg-gray-200{background-color:var(--color-gray-200)}.bg-gray-300{background-color:var(--color-gray-300)}.bg-gray-500{background-color:var(--color-gray-500)}.bg-gray-700{background-color:var(--color-gray-700)}.bg-gray-700\\/50{background-color:#36415380}@supports (color:color-mix(in lab,red,red)){.bg-gray-700\\/50{background-color:color-mix(in oklab,var(--color-gray-700)50%,transparent)}}.bg-gray-700\\/70{background-color:#364153b3}@supports (color:color-mix(in lab,red,red)){.bg-gray-700\\/70{background-color:color-mix(in oklab,var(--color-gray-700)70%,transparent)}}.bg-gray-800{background-color:var(--color-gray-800)}.bg-gray-800\\/70{background-color:#1e2939b3}@supports (color:color-mix(in lab,red,red)){.bg-gray-800\\/70{background-color:color-mix(in oklab,var(--color-gray-800)70%,transparent)}}.bg-gray-800\\/80{background-color:#1e2939cc}@supports (color:color-mix(in lab,red,red)){.bg-gray-800\\/80{background-color:color-mix(in oklab,var(--color-gray-800)80%,transparent)}}.bg-gray-800\\/90{background-color:#1e2939e6}@supports (color:color-mix(in lab,red,red)){.bg-gray-800\\/90{background-color:color-mix(in oklab,var(--color-gray-800)90%,transparent)}}.bg-gray-900\\/60{background-color:#10182899}@supports (color:color-mix(in lab,red,red)){.bg-gray-900\\/60{background-color:color-mix(in oklab,var(--color-gray-900)60%,transparent)}}.bg-green-500{background-color:var(--color-green-500)}.bg-green-500\\/20{background-color:#00c75833}@supports (color:color-mix(in lab,red,red)){.bg-green-500\\/20{background-color:color-mix(in oklab,var(--color-green-500)20%,transparent)}}.bg-green-600{background-color:var(--color-green-600)}.bg-indigo-500\\/10{background-color:#625fff1a}@supports (color:color-mix(in lab,red,red)){.bg-indigo-500\\/10{background-color:color-mix(in oklab,var(--color-indigo-500)10%,transparent)}}.bg-indigo-600{background-color:var(--color-indigo-600)}.bg-indigo-600\\/15{background-color:#4f39f626}@supports (color:color-mix(in lab,red,red)){.bg-indigo-600\\/15{background-color:color-mix(in oklab,var(--color-indigo-600)15%,transparent)}}.bg-orange-400{background-color:var(--color-orange-400)}.bg-orange-500\\/10{background-color:#fe6e001a}@supports (color:color-mix(in lab,red,red)){.bg-orange-500\\/10{background-color:color-mix(in oklab,var(--color-orange-500)10%,transparent)}}.bg-orange-500\\/20{background-color:#fe6e0033}@supports (color:color-mix(in lab,red,red)){.bg-orange-500\\/20{background-color:color-mix(in oklab,var(--color-orange-500)20%,transparent)}}.bg-purple-500\\/10{background-color:#ac4bff1a}@supports (color:color-mix(in lab,red,red)){.bg-purple-500\\/10{background-color:color-mix(in oklab,var(--color-purple-500)10%,transparent)}}.bg-purple-500\\/20{background-color:#ac4bff33}@supports (color:color-mix(in lab,red,red)){.bg-purple-500\\/20{background-color:color-mix(in oklab,var(--color-purple-500)20%,transparent)}}.bg-purple-600{background-color:var(--color-purple-600)}.bg-red-300\\/10{background-color:#ffa3a31a}@supports (color:color-mix(in lab,red,red)){.bg-red-300\\/10{background-color:color-mix(in oklab,var(--color-red-300)10%,transparent)}}.bg-red-400{background-color:var(--color-red-400)}.bg-red-400\\/70{background-color:#ff6568b3}@supports (color:color-mix(in lab,red,red)){.bg-red-400\\/70{background-color:color-mix(in oklab,var(--color-red-400)70%,transparent)}}.bg-red-500{background-color:var(--color-red-500)}.bg-red-500\\/10{background-color:#fb2c361a}@supports (color:color-mix(in lab,red,red)){.bg-red-500\\/10{background-color:color-mix(in oklab,var(--color-red-500)10%,transparent)}}.bg-red-500\\/20{background-color:#fb2c3633}@supports (color:color-mix(in lab,red,red)){.bg-red-500\\/20{background-color:color-mix(in oklab,var(--color-red-500)20%,transparent)}}.bg-red-500\\/80{background-color:#fb2c36cc}@supports (color:color-mix(in lab,red,red)){.bg-red-500\\/80{background-color:color-mix(in oklab,var(--color-red-500)80%,transparent)}}.bg-red-600{background-color:var(--color-red-600)}.bg-red-600\\/80{background-color:#e40014cc}@supports (color:color-mix(in lab,red,red)){.bg-red-600\\/80{background-color:color-mix(in oklab,var(--color-red-600)80%,transparent)}}.bg-red-900\\/90{background-color:#82181ae6}@supports (color:color-mix(in lab,red,red)){.bg-red-900\\/90{background-color:color-mix(in oklab,var(--color-red-900)90%,transparent)}}.bg-slate-400\\/10{background-color:#90a1b91a}@supports (color:color-mix(in lab,red,red)){.bg-slate-400\\/10{background-color:color-mix(in oklab,var(--color-slate-400)10%,transparent)}}.bg-slate-400\\/20{background-color:#90a1b933}@supports (color:color-mix(in lab,red,red)){.bg-slate-400\\/20{background-color:color-mix(in oklab,var(--color-slate-400)20%,transparent)}}.bg-slate-500{background-color:var(--color-slate-500)}.bg-slate-700\\/50{background-color:#31415880}@supports (color:color-mix(in lab,red,red)){.bg-slate-700\\/50{background-color:color-mix(in oklab,var(--color-slate-700)50%,transparent)}}.bg-slate-800{background-color:var(--color-slate-800)}.bg-slate-800\\/40{background-color:#1d293d66}@supports (color:color-mix(in lab,red,red)){.bg-slate-800\\/40{background-color:color-mix(in oklab,var(--color-slate-800)40%,transparent)}}.bg-slate-800\\/70{background-color:#1d293db3}@supports (color:color-mix(in lab,red,red)){.bg-slate-800\\/70{background-color:color-mix(in oklab,var(--color-slate-800)70%,transparent)}}.bg-slate-900\\/40{background-color:#0f172b66}@supports (color:color-mix(in lab,red,red)){.bg-slate-900\\/40{background-color:color-mix(in oklab,var(--color-slate-900)40%,transparent)}}.bg-slate-900\\/80{background-color:#0f172bcc}@supports (color:color-mix(in lab,red,red)){.bg-slate-900\\/80{background-color:color-mix(in oklab,var(--color-slate-900)80%,transparent)}}.bg-slate-950\\/70{background-color:#020618b3}@supports (color:color-mix(in lab,red,red)){.bg-slate-950\\/70{background-color:color-mix(in oklab,var(--color-slate-950)70%,transparent)}}.bg-teal-500\\/20{background-color:#00baa733}@supports (color:color-mix(in lab,red,red)){.bg-teal-500\\/20{background-color:color-mix(in oklab,var(--color-teal-500)20%,transparent)}}.bg-transparent{background-color:#0000}.bg-white{background-color:var(--color-white)}.bg-white\\/2{background-color:#ffffff05}@supports (color:color-mix(in lab,red,red)){.bg-white\\/2{background-color:color-mix(in oklab,var(--color-white)2%,transparent)}}.bg-white\\/4{background-color:#ffffff0a}@supports (color:color-mix(in lab,red,red)){.bg-white\\/4{background-color:color-mix(in oklab,var(--color-white)4%,transparent)}}.bg-white\\/5{background-color:#ffffff0d}@supports (color:color-mix(in lab,red,red)){.bg-white\\/5{background-color:color-mix(in oklab,var(--color-white)5%,transparent)}}.bg-white\\/10{background-color:#ffffff1a}@supports (color:color-mix(in lab,red,red)){.bg-white\\/10{background-color:color-mix(in oklab,var(--color-white)10%,transparent)}}.bg-white\\/20{background-color:#fff3}@supports (color:color-mix(in lab,red,red)){.bg-white\\/20{background-color:color-mix(in oklab,var(--color-white)20%,transparent)}}.bg-white\\/40{background-color:#fff6}@supports (color:color-mix(in lab,red,red)){.bg-white\\/40{background-color:color-mix(in oklab,var(--color-white)40%,transparent)}}.bg-white\\/70{background-color:#ffffffb3}@supports (color:color-mix(in lab,red,red)){.bg-white\\/70{background-color:color-mix(in oklab,var(--color-white)70%,transparent)}}.bg-white\\/\\[0\\.02\\]{background-color:#ffffff05}@supports (color:color-mix(in lab,red,red)){.bg-white\\/\\[0\\.02\\]{background-color:color-mix(in oklab,var(--color-white)2%,transparent)}}.bg-yellow-400{background-color:var(--color-yellow-400)}.bg-yellow-400\\/10{background-color:#fac8001a}@supports (color:color-mix(in lab,red,red)){.bg-yellow-400\\/10{background-color:color-mix(in oklab,var(--color-yellow-400)10%,transparent)}}.bg-yellow-500\\/10{background-color:#edb2001a}@supports (color:color-mix(in lab,red,red)){.bg-yellow-500\\/10{background-color:color-mix(in oklab,var(--color-yellow-500)10%,transparent)}}.bg-yellow-500\\/20{background-color:#edb20033}@supports (color:color-mix(in lab,red,red)){.bg-yellow-500\\/20{background-color:color-mix(in oklab,var(--color-yellow-500)20%,transparent)}}.bg-zinc-500\\/5{background-color:#71717b0d}@supports (color:color-mix(in lab,red,red)){.bg-zinc-500\\/5{background-color:color-mix(in oklab,var(--color-zinc-500)5%,transparent)}}.bg-zinc-500\\/10{background-color:#71717b1a}@supports (color:color-mix(in lab,red,red)){.bg-zinc-500\\/10{background-color:color-mix(in oklab,var(--color-zinc-500)10%,transparent)}}.bg-zinc-700{background-color:var(--color-zinc-700)}.bg-zinc-700\\/80{background-color:#3f3f46cc}@supports (color:color-mix(in lab,red,red)){.bg-zinc-700\\/80{background-color:color-mix(in oklab,var(--color-zinc-700)80%,transparent)}}.bg-zinc-800{background-color:var(--color-zinc-800)}.bg-zinc-800\\/70{background-color:#27272ab3}@supports (color:color-mix(in lab,red,red)){.bg-zinc-800\\/70{background-color:color-mix(in oklab,var(--color-zinc-800)70%,transparent)}}.bg-zinc-900{background-color:var(--color-zinc-900)}.bg-zinc-900\\/95{background-color:#18181bf2}@supports (color:color-mix(in lab,red,red)){.bg-zinc-900\\/95{background-color:color-mix(in oklab,var(--color-zinc-900)95%,transparent)}}.bg-gradient-to-b{--tw-gradient-position:to bottom in oklab;background-image:linear-gradient(var(--tw-gradient-stops))}.bg-gradient-to-br{--tw-gradient-position:to bottom right in oklab;background-image:linear-gradient(var(--tw-gradient-stops))}.bg-gradient-to-r{--tw-gradient-position:to right in oklab;background-image:linear-gradient(var(--tw-gradient-stops))}.bg-\\[linear-gradient\\(270deg\\,\\#990033\\,\\#996600\\,\\#336600\\,\\#008080\\,\\#1c3f99\\,\\#5e0099\\,\\#990033\\)\\]{background-image:linear-gradient(270deg,#903,#960,#360,teal,#1c3f99,#5e0099,#903)}.bg-none{background-image:none}.from-black\\/60{--tw-gradient-from:#0009}@supports (color:color-mix(in lab,red,red)){.from-black\\/60{--tw-gradient-from:color-mix(in oklab,var(--color-black)60%,transparent)}}.from-black\\/60{--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-blue-500\\/20{--tw-gradient-from:#3080ff33}@supports (color:color-mix(in lab,red,red)){.from-blue-500\\/20{--tw-gradient-from:color-mix(in oklab,var(--color-blue-500)20%,transparent)}}.from-blue-500\\/20{--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-blue-500\\/50{--tw-gradient-from:#3080ff80}@supports (color:color-mix(in lab,red,red)){.from-blue-500\\/50{--tw-gradient-from:color-mix(in oklab,var(--color-blue-500)50%,transparent)}}.from-blue-500\\/50{--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-blue-600{--tw-gradient-from:var(--color-blue-600);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.from-red-600{--tw-gradient-from:var(--color-red-600);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.via-blue-600{--tw-gradient-via:var(--color-blue-600);--tw-gradient-via-stops:var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-via)var(--tw-gradient-via-position),var(--tw-gradient-to)var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-via-stops)}.via-green-600{--tw-gradient-via:var(--color-green-600);--tw-gradient-via-stops:var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-via)var(--tw-gradient-via-position),var(--tw-gradient-to)var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-via-stops)}.via-yellow-600{--tw-gradient-via:var(--color-yellow-600);--tw-gradient-via-stops:var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-via)var(--tw-gradient-via-position),var(--tw-gradient-to)var(--tw-gradient-to-position);--tw-gradient-stops:var(--tw-gradient-via-stops)}.to-black\\/90{--tw-gradient-to:#000000e6}@supports (color:color-mix(in lab,red,red)){.to-black\\/90{--tw-gradient-to:color-mix(in oklab,var(--color-black)90%,transparent)}}.to-black\\/90{--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-blue-700{--tw-gradient-to:var(--color-blue-700);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-purple-500\\/20{--tw-gradient-to:#ac4bff33}@supports (color:color-mix(in lab,red,red)){.to-purple-500\\/20{--tw-gradient-to:color-mix(in oklab,var(--color-purple-500)20%,transparent)}}.to-purple-500\\/20{--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-purple-600{--tw-gradient-to:var(--color-purple-600);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-red-700{--tw-gradient-to:var(--color-red-700);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.to-transparent{--tw-gradient-to:transparent;--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.mask-\\[linear-gradient\\(to_left\\,transparent\\,\\#fff\\)\\]{-webkit-mask-image:linear-gradient(270deg,#0000,#fff);mask-image:linear-gradient(270deg,#0000,#fff)}.bg-\\[length\\:1400\\%_1400\\%\\]{background-size:1400% 1400%}.bg-cover{background-size:cover}.bg-fixed{background-attachment:fixed}.bg-center{background-position:50%}.object-contain{object-fit:contain}.object-cover{object-fit:cover}.object-center{object-position:center}.\\!p-0{padding:calc(var(--spacing)*0)!important}.p-0{padding:calc(var(--spacing)*0)}.p-0\\!{padding:calc(var(--spacing)*0)!important}.p-0\\.5{padding:calc(var(--spacing)*.5)}.p-1{padding:calc(var(--spacing)*1)}.p-1\\.5{padding:calc(var(--spacing)*1.5)}.p-2{padding:calc(var(--spacing)*2)}.p-2\\.5{padding:calc(var(--spacing)*2.5)}.p-3{padding:calc(var(--spacing)*3)}.p-4{padding:calc(var(--spacing)*4)}.p-5{padding:calc(var(--spacing)*5)}.p-6{padding:calc(var(--spacing)*6)}.p-8{padding:calc(var(--spacing)*8)}.p-12{padding:calc(var(--spacing)*12)}.p-\\[1\\.4rem\\]{padding:1.4rem}.p-\\[3px\\]{padding:3px}.p-\\[4px\\]{padding:4px}.px-0{padding-inline:calc(var(--spacing)*0)}.px-0\\.5{padding-inline:calc(var(--spacing)*.5)}.px-1{padding-inline:calc(var(--spacing)*1)}.px-1\\.5{padding-inline:calc(var(--spacing)*1.5)}.px-2{padding-inline:calc(var(--spacing)*2)}.px-2\\.5{padding-inline:calc(var(--spacing)*2.5)}.px-3{padding-inline:calc(var(--spacing)*3)}.px-4{padding-inline:calc(var(--spacing)*4)}.px-6{padding-inline:calc(var(--spacing)*6)}.px-8{padding-inline:calc(var(--spacing)*8)}.px-25{padding-inline:calc(var(--spacing)*25)}.px-\\[1\\.4rem\\]{padding-inline:1.4rem}.px-\\[clamp\\(1\\.5rem\\,3vw\\,3rem\\)\\]{padding-inline:clamp(1.5rem,3vw,3rem)}.py-0\\.5{padding-block:calc(var(--spacing)*.5)}.py-1{padding-block:calc(var(--spacing)*1)}.py-1\\.5{padding-block:calc(var(--spacing)*1.5)}.py-1\\.25{padding-block:calc(var(--spacing)*1.25)}.py-2{padding-block:calc(var(--spacing)*2)}.py-3{padding-block:calc(var(--spacing)*3)}.py-4{padding-block:calc(var(--spacing)*4)}.py-6{padding-block:calc(var(--spacing)*6)}.py-8{padding-block:calc(var(--spacing)*8)}.py-12{padding-block:calc(var(--spacing)*12)}.py-\\[1rem\\]{padding-block:1rem}.py-\\[clamp\\(0\\.2rem\\,0\\.8vh\\,0\\.75rem\\)\\]{padding-block:clamp(.2rem,.8vh,.75rem)}.pt-1{padding-top:calc(var(--spacing)*1)}.pt-2{padding-top:calc(var(--spacing)*2)}.pt-3{padding-top:calc(var(--spacing)*3)}.pt-4{padding-top:calc(var(--spacing)*4)}.pt-6{padding-top:calc(var(--spacing)*6)}.pt-\\[2px\\]{padding-top:2px}.pt-\\[clamp\\(0\\.75rem\\,1\\.5vw\\,1\\.5rem\\)\\]{padding-top:clamp(.75rem,1.5vw,1.5rem)}.pr-1{padding-right:calc(var(--spacing)*1)}.pr-2{padding-right:calc(var(--spacing)*2)}.pr-2\\.5{padding-right:calc(var(--spacing)*2.5)}.pr-5{padding-right:calc(var(--spacing)*5)}.pr-6{padding-right:calc(var(--spacing)*6)}.pr-12{padding-right:calc(var(--spacing)*12)}.pb-0{padding-bottom:calc(var(--spacing)*0)}.pb-0\\.5{padding-bottom:calc(var(--spacing)*.5)}.pb-1{padding-bottom:calc(var(--spacing)*1)}.pb-2{padding-bottom:calc(var(--spacing)*2)}.pb-3{padding-bottom:calc(var(--spacing)*3)}.pb-4{padding-bottom:calc(var(--spacing)*4)}.pb-6{padding-bottom:calc(var(--spacing)*6)}.pb-20{padding-bottom:calc(var(--spacing)*20)}.pb-\\[56\\.25\\%\\]{padding-bottom:56.25%}.pb-\\[clamp\\(0\\.75rem\\,1\\.5vw\\,1\\.5rem\\)\\]{padding-bottom:clamp(.75rem,1.5vw,1.5rem)}.pl-1{padding-left:calc(var(--spacing)*1)}.pl-2{padding-left:calc(var(--spacing)*2)}.pl-4{padding-left:calc(var(--spacing)*4)}.pl-5{padding-left:calc(var(--spacing)*5)}.text-center{text-align:center}.text-left{text-align:left}.text-right{text-align:right}.align-baseline{vertical-align:baseline}.align-middle{vertical-align:middle}.font-mono{font-family:var(--font-mono)}.font-sans{font-family:var(--font-sans)}.text-2xl{font-size:var(--text-2xl);line-height:var(--tw-leading,var(--text-2xl--line-height))}.text-3xl{font-size:var(--text-3xl);line-height:var(--tw-leading,var(--text-3xl--line-height))}.text-base{font-size:var(--text-base);line-height:var(--tw-leading,var(--text-base--line-height))}.text-lg{font-size:var(--text-lg);line-height:var(--tw-leading,var(--text-lg--line-height))}.text-sm{font-size:var(--text-sm);line-height:var(--tw-leading,var(--text-sm--line-height))}.text-xl{font-size:var(--text-xl);line-height:var(--tw-leading,var(--text-xl--line-height))}.text-xs{font-size:var(--text-xs);line-height:var(--tw-leading,var(--text-xs--line-height))}.text-\\[10px\\]{font-size:10px}.text-\\[11px\\]{font-size:11px}.text-\\[12px\\]{font-size:12px}.text-\\[13px\\]{font-size:13px}.text-\\[14\\.5px\\]{font-size:14.5px}.text-\\[14px\\]{font-size:14px}.text-\\[15px\\]{font-size:15px}.text-\\[18px\\]{font-size:18px}.text-\\[26px\\]{font-size:26px}.text-\\[clamp\\(18px\\,2\\.8vh\\,32px\\)\\]{font-size:clamp(18px,2.8vh,32px)}.leading-1\\.25{--tw-leading:calc(var(--spacing)*1.25);line-height:calc(var(--spacing)*1.25)}.leading-5{--tw-leading:calc(var(--spacing)*5);line-height:calc(var(--spacing)*5)}.leading-\\[1\\.6rem\\]{--tw-leading:1.6rem;line-height:1.6rem}.leading-\\[1\\.9rem\\]{--tw-leading:1.9rem;line-height:1.9rem}.leading-\\[24px\\]{--tw-leading:24px;line-height:24px}.leading-none{--tw-leading:1;line-height:1}.leading-relaxed{--tw-leading:var(--leading-relaxed);line-height:var(--leading-relaxed)}.leading-snug{--tw-leading:var(--leading-snug);line-height:var(--leading-snug)}.leading-tight{--tw-leading:var(--leading-tight);line-height:var(--leading-tight)}.font-black{--tw-font-weight:var(--font-weight-black);font-weight:var(--font-weight-black)}.font-bold{--tw-font-weight:var(--font-weight-bold);font-weight:var(--font-weight-bold)}.font-medium{--tw-font-weight:var(--font-weight-medium);font-weight:var(--font-weight-medium)}.font-normal{--tw-font-weight:var(--font-weight-normal);font-weight:var(--font-weight-normal)}.font-semibold{--tw-font-weight:var(--font-weight-semibold);font-weight:var(--font-weight-semibold)}.tracking-\\[-0\\.01em\\]{--tw-tracking:-.01em;letter-spacing:-.01em}.tracking-\\[0\\.05em\\]{--tw-tracking:.05em;letter-spacing:.05em}.tracking-tight{--tw-tracking:var(--tracking-tight);letter-spacing:var(--tracking-tight)}.tracking-wide{--tw-tracking:var(--tracking-wide);letter-spacing:var(--tracking-wide)}.tracking-wider{--tw-tracking:var(--tracking-wider);letter-spacing:var(--tracking-wider)}.tracking-widest{--tw-tracking:var(--tracking-widest);letter-spacing:var(--tracking-widest)}.break-words{overflow-wrap:break-word}.text-ellipsis{text-overflow:ellipsis}.hyphens-auto{-webkit-hyphens:auto;hyphens:auto}.whitespace-normal{white-space:normal}.whitespace-nowrap{white-space:nowrap}.text-\\(--color\\){color:var(--color)}.text-\\[\\#4a9eff\\]{color:#4a9eff}.text-\\[\\#38bdf8\\]{color:#38bdf8}.text-\\[\\#2563eb\\]{color:#2563eb}.text-\\[\\#f59e0b\\]{color:#f59e0b}.text-\\[\\#ff3838\\]{color:#ff3838}.text-amber-200{color:var(--color-amber-200)}.text-amber-300{color:var(--color-amber-300)}.text-amber-400{color:var(--color-amber-400)}.text-amber-600{color:var(--color-amber-600)}.text-blue-100{color:var(--color-blue-100)}.text-blue-200{color:var(--color-blue-200)}.text-blue-200\\/60{color:#bedbff99}@supports (color:color-mix(in lab,red,red)){.text-blue-200\\/60{color:color-mix(in oklab,var(--color-blue-200)60%,transparent)}}.text-blue-200\\/80{color:#bedbffcc}@supports (color:color-mix(in lab,red,red)){.text-blue-200\\/80{color:color-mix(in oklab,var(--color-blue-200)80%,transparent)}}.text-blue-300{color:var(--color-blue-300)}.text-blue-400{color:var(--color-blue-400)}.text-blue-800{color:var(--color-blue-800)}.text-emerald-200{color:var(--color-emerald-200)}.text-emerald-400{color:var(--color-emerald-400)}.text-gray-100{color:var(--color-gray-100)}.text-gray-200{color:var(--color-gray-200)}.text-gray-300{color:var(--color-gray-300)}.text-gray-400{color:var(--color-gray-400)}.text-gray-500{color:var(--color-gray-500)}.text-gray-600{color:var(--color-gray-600)}.text-gray-800{color:var(--color-gray-800)}.text-green-300{color:var(--color-green-300)}.text-green-400{color:var(--color-green-400)}.text-green-400\\/90{color:#05df72e6}@supports (color:color-mix(in lab,red,red)){.text-green-400\\/90{color:color-mix(in oklab,var(--color-green-400)90%,transparent)}}.text-green-500{color:var(--color-green-500)}.text-indigo-100{color:var(--color-indigo-100)}.text-indigo-200{color:var(--color-indigo-200)}.text-indigo-400{color:var(--color-indigo-400)}.text-orange-400{color:var(--color-orange-400)}.text-purple-100{color:var(--color-purple-100)}.text-purple-200{color:var(--color-purple-200)}.text-purple-400{color:var(--color-purple-400)}.text-red-100{color:var(--color-red-100)}.text-red-100\\/80{color:#ffe2e2cc}@supports (color:color-mix(in lab,red,red)){.text-red-100\\/80{color:color-mix(in oklab,var(--color-red-100)80%,transparent)}}.text-red-200{color:var(--color-red-200)}.text-red-300{color:var(--color-red-300)}.text-red-400{color:var(--color-red-400)}.text-red-400\\/90{color:#ff6568e6}@supports (color:color-mix(in lab,red,red)){.text-red-400\\/90{color:color-mix(in oklab,var(--color-red-400)90%,transparent)}}.text-red-500{color:var(--color-red-500)}.text-red-600{color:var(--color-red-600)}.text-slate-300{color:var(--color-slate-300)}.text-slate-400{color:var(--color-slate-400)}.text-teal-400{color:var(--color-teal-400)}.text-white{color:var(--color-white)}.text-white\\/20{color:#fff3}@supports (color:color-mix(in lab,red,red)){.text-white\\/20{color:color-mix(in oklab,var(--color-white)20%,transparent)}}.text-white\\/30{color:#ffffff4d}@supports (color:color-mix(in lab,red,red)){.text-white\\/30{color:color-mix(in oklab,var(--color-white)30%,transparent)}}.text-white\\/40{color:#fff6}@supports (color:color-mix(in lab,red,red)){.text-white\\/40{color:color-mix(in oklab,var(--color-white)40%,transparent)}}.text-white\\/50{color:#ffffff80}@supports (color:color-mix(in lab,red,red)){.text-white\\/50{color:color-mix(in oklab,var(--color-white)50%,transparent)}}.text-white\\/60{color:#fff9}@supports (color:color-mix(in lab,red,red)){.text-white\\/60{color:color-mix(in oklab,var(--color-white)60%,transparent)}}.text-white\\/70{color:#ffffffb3}@supports (color:color-mix(in lab,red,red)){.text-white\\/70{color:color-mix(in oklab,var(--color-white)70%,transparent)}}.text-white\\/80{color:#fffc}@supports (color:color-mix(in lab,red,red)){.text-white\\/80{color:color-mix(in oklab,var(--color-white)80%,transparent)}}.text-white\\/90{color:#ffffffe6}@supports (color:color-mix(in lab,red,red)){.text-white\\/90{color:color-mix(in oklab,var(--color-white)90%,transparent)}}.text-yellow-300{color:var(--color-yellow-300)}.text-yellow-400{color:var(--color-yellow-400)}.text-zinc-50{color:var(--color-zinc-50)}.text-zinc-100{color:var(--color-zinc-100)}.text-zinc-200{color:var(--color-zinc-200)}.text-zinc-300{color:var(--color-zinc-300)}.text-zinc-400{color:var(--color-zinc-400)}.capitalize{text-transform:capitalize}.lowercase{text-transform:lowercase}.uppercase{text-transform:uppercase}.italic{font-style:italic}.tabular-nums{--tw-numeric-spacing:tabular-nums;font-variant-numeric:var(--tw-ordinal,)var(--tw-slashed-zero,)var(--tw-numeric-figure,)var(--tw-numeric-spacing,)var(--tw-numeric-fraction,)}.no-underline{text-decoration-line:none}.underline{text-decoration-line:underline}.antialiased{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.placeholder-white\\/20::placeholder{color:#fff3}@supports (color:color-mix(in lab,red,red)){.placeholder-white\\/20::placeholder{color:color-mix(in oklab,var(--color-white)20%,transparent)}}.placeholder-white\\/30::placeholder{color:#ffffff4d}@supports (color:color-mix(in lab,red,red)){.placeholder-white\\/30::placeholder{color:color-mix(in oklab,var(--color-white)30%,transparent)}}.placeholder-white\\/40::placeholder{color:#fff6}@supports (color:color-mix(in lab,red,red)){.placeholder-white\\/40::placeholder{color:color-mix(in oklab,var(--color-white)40%,transparent)}}.accent-red-500{accent-color:var(--color-red-500)}.opacity-0{opacity:0}.opacity-25{opacity:.25}.opacity-30{opacity:.3}.opacity-40{opacity:.4}.opacity-50{opacity:.5}.opacity-60{opacity:.6}.opacity-80{opacity:.8}.opacity-90{opacity:.9}.opacity-100{opacity:1}.shadow{--tw-shadow:0 1px 3px 0 var(--tw-shadow-color,#0000001a),0 1px 2px -1px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-2xl{--tw-shadow:0 25px 50px -12px var(--tw-shadow-color,#00000040);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-\\[0_0_10px_rgba\\(59\\,130\\,246\\,0\\.3\\)\\]{--tw-shadow:0 0 10px var(--tw-shadow-color,#3b82f64d);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-\\[0_0_12px_rgba\\(59\\,130\\,246\\,0\\.2\\)\\]{--tw-shadow:0 0 12px var(--tw-shadow-color,#3b82f633);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-\\[0_0_15px_rgba\\(34\\,197\\,94\\,0\\.5\\)\\]{--tw-shadow:0 0 15px var(--tw-shadow-color,#22c55e80);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-\\[0_0_15px_rgba\\(34\\,211\\,238\\,0\\.2\\)\\]{--tw-shadow:0 0 15px var(--tw-shadow-color,#22d3ee33);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-\\[0_0_15px_rgba\\(59\\,130\\,246\\,0\\.2\\)\\]{--tw-shadow:0 0 15px var(--tw-shadow-color,#3b82f633);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-\\[0_0_15px_rgba\\(59\\,130\\,246\\,0\\.3\\)\\]{--tw-shadow:0 0 15px var(--tw-shadow-color,#3b82f64d);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-\\[0_0_20px_rgba\\(0\\,0\\,0\\,0\\.5\\)\\]{--tw-shadow:0 0 20px var(--tw-shadow-color,#00000080);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-\\[0_20px_60px_rgba\\(0\\,0\\,0\\,0\\.8\\)\\]{--tw-shadow:0 20px 60px var(--tw-shadow-color,#000c);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-\\[inset_0_0_8px_rgba\\(239\\,68\\,68\\,0\\.12\\)\\]{--tw-shadow:inset 0 0 8px var(--tw-shadow-color,#ef44441f);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-\\[inset_0_0_8px_rgba\\(255\\,255\\,255\\,0\\.04\\)\\]{--tw-shadow:inset 0 0 8px var(--tw-shadow-color,#ffffff0a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-inner{--tw-shadow:inset 0 2px 4px 0 var(--tw-shadow-color,#0000000d);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px var(--tw-shadow-color,#0000001a),0 4px 6px -4px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-none{--tw-shadow:0 0 #0000;box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-sm{--tw-shadow:0 1px 3px 0 var(--tw-shadow-color,#0000001a),0 1px 2px -1px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-xl{--tw-shadow:0 20px 25px -5px var(--tw-shadow-color,#0000001a),0 8px 10px -6px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-xs{--tw-shadow:0 1px 2px 0 var(--tw-shadow-color,#0000000d);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.ring{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(3px + var(--tw-ring-offset-width))var(--tw-ring-color,var(--color-blue-500));box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.ring-1{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(1px + var(--tw-ring-offset-width))var(--tw-ring-color,var(--color-blue-500));box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.ring-2{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(2px + var(--tw-ring-offset-width))var(--tw-ring-color,var(--color-blue-500));box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-black\\/50{--tw-shadow-color:#00000080}@supports (color:color-mix(in lab,red,red)){.shadow-black\\/50{--tw-shadow-color:color-mix(in oklab,color-mix(in oklab,var(--color-black)50%,transparent)var(--tw-shadow-alpha),transparent)}}.shadow-blue-900\\/20{--tw-shadow-color:#1c398e33}@supports (color:color-mix(in lab,red,red)){.shadow-blue-900\\/20{--tw-shadow-color:color-mix(in oklab,color-mix(in oklab,var(--color-blue-900)20%,transparent)var(--tw-shadow-alpha),transparent)}}.shadow-blue-900\\/40{--tw-shadow-color:#1c398e66}@supports (color:color-mix(in lab,red,red)){.shadow-blue-900\\/40{--tw-shadow-color:color-mix(in oklab,color-mix(in oklab,var(--color-blue-900)40%,transparent)var(--tw-shadow-alpha),transparent)}}.shadow-red-500\\/10{--tw-shadow-color:#fb2c361a}@supports (color:color-mix(in lab,red,red)){.shadow-red-500\\/10{--tw-shadow-color:color-mix(in oklab,color-mix(in oklab,var(--color-red-500)10%,transparent)var(--tw-shadow-alpha),transparent)}}.shadow-red-600\\/50{--tw-shadow-color:#e4001480}@supports (color:color-mix(in lab,red,red)){.shadow-red-600\\/50{--tw-shadow-color:color-mix(in oklab,color-mix(in oklab,var(--color-red-600)50%,transparent)var(--tw-shadow-alpha),transparent)}}.ring-amber-400\\/40{--tw-ring-color:#fcbb0066}@supports (color:color-mix(in lab,red,red)){.ring-amber-400\\/40{--tw-ring-color:color-mix(in oklab,var(--color-amber-400)40%,transparent)}}.ring-amber-600\\/20{--tw-ring-color:#dd740033}@supports (color:color-mix(in lab,red,red)){.ring-amber-600\\/20{--tw-ring-color:color-mix(in oklab,var(--color-amber-600)20%,transparent)}}.ring-black\\/20{--tw-ring-color:#0003}@supports (color:color-mix(in lab,red,red)){.ring-black\\/20{--tw-ring-color:color-mix(in oklab,var(--color-black)20%,transparent)}}.ring-blue-500\\/50{--tw-ring-color:#3080ff80}@supports (color:color-mix(in lab,red,red)){.ring-blue-500\\/50{--tw-ring-color:color-mix(in oklab,var(--color-blue-500)50%,transparent)}}.ring-indigo-300\\/60{--tw-ring-color:#a4b3ff99}@supports (color:color-mix(in lab,red,red)){.ring-indigo-300\\/60{--tw-ring-color:color-mix(in oklab,var(--color-indigo-300)60%,transparent)}}.ring-indigo-400\\/40{--tw-ring-color:#7d87ff66}@supports (color:color-mix(in lab,red,red)){.ring-indigo-400\\/40{--tw-ring-color:color-mix(in oklab,var(--color-indigo-400)40%,transparent)}}.ring-slate-400\\/20{--tw-ring-color:#90a1b933}@supports (color:color-mix(in lab,red,red)){.ring-slate-400\\/20{--tw-ring-color:color-mix(in oklab,var(--color-slate-400)20%,transparent)}}.ring-white\\/5{--tw-ring-color:#ffffff0d}@supports (color:color-mix(in lab,red,red)){.ring-white\\/5{--tw-ring-color:color-mix(in oklab,var(--color-white)5%,transparent)}}.ring-white\\/10{--tw-ring-color:#ffffff1a}@supports (color:color-mix(in lab,red,red)){.ring-white\\/10{--tw-ring-color:color-mix(in oklab,var(--color-white)10%,transparent)}}.ring-yellow-400\\/20{--tw-ring-color:#fac80033}@supports (color:color-mix(in lab,red,red)){.ring-yellow-400\\/20{--tw-ring-color:color-mix(in oklab,var(--color-yellow-400)20%,transparent)}}.ring-zinc-700{--tw-ring-color:var(--color-zinc-700)}.ring-zinc-700\\/60{--tw-ring-color:#3f3f4699}@supports (color:color-mix(in lab,red,red)){.ring-zinc-700\\/60{--tw-ring-color:color-mix(in oklab,var(--color-zinc-700)60%,transparent)}}.ring-zinc-800{--tw-ring-color:var(--color-zinc-800)}.outline,.outline-1{outline-style:var(--tw-outline-style);outline-width:1px}.outline-white\\/80{outline-color:#fffc}@supports (color:color-mix(in lab,red,red)){.outline-white\\/80{outline-color:color-mix(in oklab,var(--color-white)80%,transparent)}}.brightness-0{--tw-brightness:brightness(0%);filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.brightness-\\[0\\.5\\]{--tw-brightness:brightness(.5);filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.drop-shadow{--tw-drop-shadow-size:drop-shadow(0 1px 2px var(--tw-drop-shadow-color,#0000001a))drop-shadow(0 1px 1px var(--tw-drop-shadow-color,#0000000f));--tw-drop-shadow:drop-shadow(0 1px 2px #0000001a)drop-shadow(0 1px 1px #0000000f);filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.drop-shadow-\\[0_0_4px_rgba\\(255\\,56\\,56\\,0\\.4\\)\\]{--tw-drop-shadow-size:drop-shadow(0 0 4px var(--tw-drop-shadow-color,#ff383866));--tw-drop-shadow:var(--tw-drop-shadow-size);filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.drop-shadow-\\[0_0_10px_rgba\\(37\\,99\\,235\\,0\\.3\\)\\]{--tw-drop-shadow-size:drop-shadow(0 0 10px var(--tw-drop-shadow-color,#2563eb4d));--tw-drop-shadow:var(--tw-drop-shadow-size);filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.drop-shadow-\\[0_0_10px_rgba\\(37\\,99\\,235\\,0\\.4\\)\\]{--tw-drop-shadow-size:drop-shadow(0 0 10px var(--tw-drop-shadow-color,#2563eb66));--tw-drop-shadow:var(--tw-drop-shadow-size);filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.drop-shadow-\\[0_1px_1px_rgba\\(0\\,0\\,0\\,0\\.8\\)\\]{--tw-drop-shadow-size:drop-shadow(0 1px 1px var(--tw-drop-shadow-color,#000c));--tw-drop-shadow:var(--tw-drop-shadow-size);filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.grayscale{--tw-grayscale:grayscale(100%);filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.hue-rotate-\\[0deg\\]{--tw-hue-rotate:hue-rotate(0deg);filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.invert{--tw-invert:invert(100%);filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.saturate-\\[10000\\%\\]{--tw-saturate:saturate(10000%);filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.sepia{--tw-sepia:sepia(100%);filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.filter{filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.backdrop-blur-\\[2px\\]{--tw-backdrop-blur:blur(2px);-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.backdrop-blur-\\[4px\\]{--tw-backdrop-blur:blur(4px);-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.backdrop-blur-\\[5px\\]{--tw-backdrop-blur:blur(5px);-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.backdrop-blur-md{--tw-backdrop-blur:blur(var(--blur-md));-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.backdrop-blur-sm{--tw-backdrop-blur:blur(var(--blur-sm));-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.backdrop-blur-xs{--tw-backdrop-blur:blur(var(--blur-xs));-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.backdrop-brightness-110{--tw-backdrop-brightness:brightness(110%);-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.backdrop-filter{-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.transition{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to,opacity,box-shadow,transform,translate,scale,rotate,filter,-webkit-backdrop-filter,backdrop-filter,display,content-visibility,overlay,pointer-events;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-\\[margin\\]{transition-property:margin;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-\\[width\\]{transition-property:width;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-all{transition-property:all;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-colors{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-opacity{transition-property:opacity;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.transition-transform{transition-property:transform,translate,scale,rotate;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.duration-100{--tw-duration:.1s;transition-duration:.1s}.duration-150{--tw-duration:.15s;transition-duration:.15s}.duration-200{--tw-duration:.2s;transition-duration:.2s}.duration-300{--tw-duration:.3s;transition-duration:.3s}.duration-500{--tw-duration:.5s;transition-duration:.5s}.duration-1000{--tw-duration:1s;transition-duration:1s}.duration-\\[50ms\\]{--tw-duration:50ms;transition-duration:50ms}.ease-in-out{--tw-ease:var(--ease-in-out);transition-timing-function:var(--ease-in-out)}.ease-linear{--tw-ease:linear;transition-timing-function:linear}.ease-out{--tw-ease:var(--ease-out);transition-timing-function:var(--ease-out)}.will-change-\\[margin-left\\]{will-change:margin-left}.outline-none{--tw-outline-style:none;outline-style:none}.select-all{-webkit-user-select:all;user-select:all}.select-none{-webkit-user-select:none;user-select:none}.select-text{-webkit-user-select:text;user-select:text}.\\[-ms-overflow-style\\:none\\]{-ms-overflow-style:none}.\\[-webkit-overflow-scrolling\\:touch\\]{-webkit-overflow-scrolling:touch}.\\[image-rendering\\:pixelated\\]{image-rendering:pixelated}.\\[program\\:cloudflared\\]{program:cloudflared}.\\[program\\:nginx\\]{program:nginx}.\\[program\\:node\\]{program:node}.\\[scrollbar-width\\:none\\]{scrollbar-width:none}.ring-inset{--tw-ring-inset:inset}.group-hover\\:-translate-y-\\[2px\\]:is(:where(.group):hover *){--tw-translate-y: -2px ;translate:var(--tw-translate-x)var(--tw-translate-y)}.group-hover\\:scale-105:is(:where(.group):hover *){--tw-scale-x:105%;--tw-scale-y:105%;--tw-scale-z:105%;scale:var(--tw-scale-x)var(--tw-scale-y)}.group-hover\\:scale-110:is(:where(.group):hover *){--tw-scale-x:110%;--tw-scale-y:110%;--tw-scale-z:110%;scale:var(--tw-scale-x)var(--tw-scale-y)}.group-hover\\:border-white\\/20:is(:where(.group):hover *){border-color:#fff3}@supports (color:color-mix(in lab,red,red)){.group-hover\\:border-white\\/20:is(:where(.group):hover *){border-color:color-mix(in oklab,var(--color-white)20%,transparent)}}.group-hover\\:bg-blue-500\\/20:is(:where(.group):hover *){background-color:#3080ff33}@supports (color:color-mix(in lab,red,red)){.group-hover\\:bg-blue-500\\/20:is(:where(.group):hover *){background-color:color-mix(in oklab,var(--color-blue-500)20%,transparent)}}.group-hover\\:text-white:is(:where(.group):hover *){color:var(--color-white)}.group-hover\\:text-white\\/60:is(:where(.group):hover *){color:#fff9}@supports (color:color-mix(in lab,red,red)){.group-hover\\:text-white\\/60:is(:where(.group):hover *){color:color-mix(in oklab,var(--color-white)60%,transparent)}}.group-hover\\:opacity-100:is(:where(.group):hover *){opacity:1}.group-hover\\:drop-shadow-\\[0_0_6px_rgba\\(255\\,56\\,56\\,0\\.6\\)\\]:is(:where(.group):hover *){--tw-drop-shadow-size:drop-shadow(0 0 6px var(--tw-drop-shadow-color,#ff383899));--tw-drop-shadow:var(--tw-drop-shadow-size);filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.peer-checked\\:border-blue-500:is(:where(.peer):checked~*){border-color:var(--color-blue-500)}.peer-checked\\:bg-blue-600:is(:where(.peer):checked~*){background-color:var(--color-blue-600)}.before\\:absolute:before{content:var(--tw-content);position:absolute}.before\\:top-\\[3px\\]:before{content:var(--tw-content);top:3px}.before\\:left-\\[3px\\]:before{content:var(--tw-content);left:3px}.before\\:h-5:before{content:var(--tw-content);height:calc(var(--spacing)*5)}.before\\:w-5:before{content:var(--tw-content);width:calc(var(--spacing)*5)}.before\\:rounded-full:before{content:var(--tw-content);border-radius:3.40282e38px}.before\\:bg-white\\/40:before{content:var(--tw-content);background-color:#fff6}@supports (color:color-mix(in lab,red,red)){.before\\:bg-white\\/40:before{background-color:color-mix(in oklab,var(--color-white)40%,transparent)}}.before\\:shadow-sm:before{content:var(--tw-content);--tw-shadow:0 1px 3px 0 var(--tw-shadow-color,#0000001a),0 1px 2px -1px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.before\\:transition-all:before{content:var(--tw-content);transition-property:all;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.before\\:duration-300:before{content:var(--tw-content);--tw-duration:.3s;transition-duration:.3s}.before\\:content-\\[\\'\\'\\]:before{--tw-content:"";content:var(--tw-content)}.peer-checked\\:before\\:translate-x-\\[24px\\]:is(:where(.peer):checked~*):before{content:var(--tw-content);--tw-translate-x:24px;translate:var(--tw-translate-x)var(--tw-translate-y)}.peer-checked\\:before\\:bg-white:is(:where(.peer):checked~*):before{content:var(--tw-content);background-color:var(--color-white)}.focus-within\\:ring-2:focus-within{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(2px + var(--tw-ring-offset-width))var(--tw-ring-color,var(--color-blue-500));box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.focus-within\\:ring-indigo-500\\/30:focus-within{--tw-ring-color:#625fff4d}@supports (color:color-mix(in lab,red,red)){.focus-within\\:ring-indigo-500\\/30:focus-within{--tw-ring-color:color-mix(in oklab,var(--color-indigo-500)30%,transparent)}}.hover\\:translate-x-2\\.5:hover{--tw-translate-x:calc(var(--spacing)*2.5);translate:var(--tw-translate-x)var(--tw-translate-y)}.hover\\:-translate-y-0\\.5:hover{--tw-translate-y:calc(var(--spacing)*-.5);translate:var(--tw-translate-x)var(--tw-translate-y)}.hover\\:-translate-y-1:hover{--tw-translate-y:calc(var(--spacing)*-1);translate:var(--tw-translate-x)var(--tw-translate-y)}.hover\\:-translate-y-px:hover{--tw-translate-y:-1px;translate:var(--tw-translate-x)var(--tw-translate-y)}.hover\\:scale-105:hover{--tw-scale-x:105%;--tw-scale-y:105%;--tw-scale-z:105%;scale:var(--tw-scale-x)var(--tw-scale-y)}.hover\\:scale-110:hover{--tw-scale-x:110%;--tw-scale-y:110%;--tw-scale-z:110%;scale:var(--tw-scale-x)var(--tw-scale-y)}.hover\\:scale-\\[1\\.01\\]:hover{scale:1.01}.hover\\:border-blue-500:hover{border-color:var(--color-blue-500)}.hover\\:border-gray-200:hover{border-color:var(--color-gray-200)}.hover\\:border-red-500\\/50:hover{border-color:#fb2c3680}@supports (color:color-mix(in lab,red,red)){.hover\\:border-red-500\\/50:hover{border-color:color-mix(in oklab,var(--color-red-500)50%,transparent)}}.hover\\:border-white:hover{border-color:var(--color-white)}.hover\\:border-white\\/20:hover{border-color:#fff3}@supports (color:color-mix(in lab,red,red)){.hover\\:border-white\\/20:hover{border-color:color-mix(in oklab,var(--color-white)20%,transparent)}}.hover\\:bg-\\[\\#38bdf8\\]\\/10:hover{background-color:#38bdf81a}.hover\\:bg-\\[\\#4752C4\\]:hover{background-color:#4752c4}.hover\\:bg-\\[\\#f59e0b\\]\\/10:hover{background-color:#f59e0b1a}.hover\\:bg-blue-500:hover{background-color:var(--color-blue-500)}.hover\\:bg-blue-500\\/80:hover{background-color:#3080ffcc}@supports (color:color-mix(in lab,red,red)){.hover\\:bg-blue-500\\/80:hover{background-color:color-mix(in oklab,var(--color-blue-500)80%,transparent)}}.hover\\:bg-blue-600:hover{background-color:var(--color-blue-600)}.hover\\:bg-blue-700:hover{background-color:var(--color-blue-700)}.hover\\:bg-emerald-500\\/10:hover{background-color:#00bb7f1a}@supports (color:color-mix(in lab,red,red)){.hover\\:bg-emerald-500\\/10:hover{background-color:color-mix(in oklab,var(--color-emerald-500)10%,transparent)}}.hover\\:bg-gray-400\\/10:hover{background-color:#99a1af1a}@supports (color:color-mix(in lab,red,red)){.hover\\:bg-gray-400\\/10:hover{background-color:color-mix(in oklab,var(--color-gray-400)10%,transparent)}}.hover\\:bg-gray-600:hover{background-color:var(--color-gray-600)}.hover\\:bg-gray-800:hover{background-color:var(--color-gray-800)}.hover\\:bg-green-500\\/30:hover{background-color:#00c7584d}@supports (color:color-mix(in lab,red,red)){.hover\\:bg-green-500\\/30:hover{background-color:color-mix(in oklab,var(--color-green-500)30%,transparent)}}.hover\\:bg-green-700:hover{background-color:var(--color-green-700)}.hover\\:bg-indigo-500\\/10:hover{background-color:#625fff1a}@supports (color:color-mix(in lab,red,red)){.hover\\:bg-indigo-500\\/10:hover{background-color:color-mix(in oklab,var(--color-indigo-500)10%,transparent)}}.hover\\:bg-indigo-700:hover{background-color:var(--color-indigo-700)}.hover\\:bg-purple-500:hover{background-color:var(--color-purple-500)}.hover\\:bg-red-500:hover{background-color:var(--color-red-500)}.hover\\:bg-red-500\\/10:hover{background-color:#fb2c361a}@supports (color:color-mix(in lab,red,red)){.hover\\:bg-red-500\\/10:hover{background-color:color-mix(in oklab,var(--color-red-500)10%,transparent)}}.hover\\:bg-red-500\\/20:hover{background-color:#fb2c3633}@supports (color:color-mix(in lab,red,red)){.hover\\:bg-red-500\\/20:hover{background-color:color-mix(in oklab,var(--color-red-500)20%,transparent)}}.hover\\:bg-red-600:hover{background-color:var(--color-red-600)}.hover\\:bg-red-600\\/20:hover{background-color:#e4001433}@supports (color:color-mix(in lab,red,red)){.hover\\:bg-red-600\\/20:hover{background-color:color-mix(in oklab,var(--color-red-600)20%,transparent)}}.hover\\:bg-red-700:hover{background-color:var(--color-red-700)}.hover\\:bg-slate-600\\/60:hover{background-color:#45556c99}@supports (color:color-mix(in lab,red,red)){.hover\\:bg-slate-600\\/60:hover{background-color:color-mix(in oklab,var(--color-slate-600)60%,transparent)}}.hover\\:bg-slate-700:hover{background-color:var(--color-slate-700)}.hover\\:bg-slate-700\\/40:hover{background-color:#31415866}@supports (color:color-mix(in lab,red,red)){.hover\\:bg-slate-700\\/40:hover{background-color:color-mix(in oklab,var(--color-slate-700)40%,transparent)}}.hover\\:bg-slate-800\\/80:hover{background-color:#1d293dcc}@supports (color:color-mix(in lab,red,red)){.hover\\:bg-slate-800\\/80:hover{background-color:color-mix(in oklab,var(--color-slate-800)80%,transparent)}}.hover\\:bg-white\\/5:hover{background-color:#ffffff0d}@supports (color:color-mix(in lab,red,red)){.hover\\:bg-white\\/5:hover{background-color:color-mix(in oklab,var(--color-white)5%,transparent)}}.hover\\:bg-white\\/8:hover{background-color:#ffffff14}@supports (color:color-mix(in lab,red,red)){.hover\\:bg-white\\/8:hover{background-color:color-mix(in oklab,var(--color-white)8%,transparent)}}.hover\\:bg-white\\/10:hover{background-color:#ffffff1a}@supports (color:color-mix(in lab,red,red)){.hover\\:bg-white\\/10:hover{background-color:color-mix(in oklab,var(--color-white)10%,transparent)}}.hover\\:bg-white\\/20:hover{background-color:#fff3}@supports (color:color-mix(in lab,red,red)){.hover\\:bg-white\\/20:hover{background-color:color-mix(in oklab,var(--color-white)20%,transparent)}}.hover\\:bg-white\\/\\[0\\.07\\]:hover{background-color:#ffffff12}@supports (color:color-mix(in lab,red,red)){.hover\\:bg-white\\/\\[0\\.07\\]:hover{background-color:color-mix(in oklab,var(--color-white)7%,transparent)}}.hover\\:bg-zinc-700:hover{background-color:var(--color-zinc-700)}.hover\\:bg-\\[linear-gradient\\(270deg\\,\\#990033\\,\\#996600\\,\\#336600\\,\\#008080\\,\\#1c3f99\\,\\#5e0099\\,\\#990033\\)\\]:hover{background-image:linear-gradient(270deg,#903,#960,#360,teal,#1c3f99,#5e0099,#903)}.hover\\:from-blue-500:hover{--tw-gradient-from:var(--color-blue-500);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.hover\\:to-blue-600:hover{--tw-gradient-to:var(--color-blue-600);--tw-gradient-stops:var(--tw-gradient-via-stops,var(--tw-gradient-position),var(--tw-gradient-from)var(--tw-gradient-from-position),var(--tw-gradient-to)var(--tw-gradient-to-position))}.hover\\:text-\\[\\#0ea5e9\\]:hover{color:#0ea5e9}.hover\\:text-\\[\\#6db3ff\\]:hover{color:#6db3ff}.hover\\:text-\\[\\#fbbf24\\]:hover{color:#fbbf24}.hover\\:text-blue-200:hover{color:var(--color-blue-200)}.hover\\:text-blue-300:hover{color:var(--color-blue-300)}.hover\\:text-blue-500:hover{color:var(--color-blue-500)}.hover\\:text-blue-600:hover{color:var(--color-blue-600)}.hover\\:text-emerald-300:hover{color:var(--color-emerald-300)}.hover\\:text-indigo-300:hover{color:var(--color-indigo-300)}.hover\\:text-red-200:hover{color:var(--color-red-200)}.hover\\:text-red-300:hover{color:var(--color-red-300)}.hover\\:text-red-400:hover{color:var(--color-red-400)}.hover\\:text-white:hover{color:var(--color-white)}.hover\\:text-white\\/60:hover{color:#fff9}@supports (color:color-mix(in lab,red,red)){.hover\\:text-white\\/60:hover{color:color-mix(in oklab,var(--color-white)60%,transparent)}}.hover\\:text-zinc-50:hover{color:var(--color-zinc-50)}.hover\\:underline:hover{text-decoration-line:underline}.hover\\:opacity-100:hover{opacity:1}.hover\\:shadow-\\[0_0_15px_rgba\\(74\\,222\\,128\\,0\\.2\\)\\]:hover{--tw-shadow:0 0 15px var(--tw-shadow-color,#4ade8033);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.hover\\:shadow-\\[0_0_15px_rgba\\(255\\,255\\,255\\,0\\.3\\)\\]:hover{--tw-shadow:0 0 15px var(--tw-shadow-color,#ffffff4d);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.hover\\:shadow-xl:hover{--tw-shadow:0 20px 25px -5px var(--tw-shadow-color,#0000001a),0 8px 10px -6px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.hover\\:shadow-\\[\\#5865F2\\]\\/20:hover{--tw-shadow-color:#5865f233}@supports (color:color-mix(in lab,red,red)){.hover\\:shadow-\\[\\#5865F2\\]\\/20:hover{--tw-shadow-color:color-mix(in oklab,oklab(57.7436% .0140405 -.208618/.2) var(--tw-shadow-alpha),transparent)}}.hover\\:shadow-blue-900\\/40:hover{--tw-shadow-color:#1c398e66}@supports (color:color-mix(in lab,red,red)){.hover\\:shadow-blue-900\\/40:hover{--tw-shadow-color:color-mix(in oklab,color-mix(in oklab,var(--color-blue-900)40%,transparent)var(--tw-shadow-alpha),transparent)}}.hover\\:shadow-red-900\\/40:hover{--tw-shadow-color:#82181a66}@supports (color:color-mix(in lab,red,red)){.hover\\:shadow-red-900\\/40:hover{--tw-shadow-color:color-mix(in oklab,color-mix(in oklab,var(--color-red-900)40%,transparent)var(--tw-shadow-alpha),transparent)}}.hover\\:drop-shadow-\\[0_0_20px_rgba\\(37\\,99\\,235\\,0\\.5\\)\\]:hover{--tw-drop-shadow-size:drop-shadow(0 0 20px var(--tw-drop-shadow-color,#2563eb80));--tw-drop-shadow:var(--tw-drop-shadow-size);filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.hover\\:before\\:bg-white\\/60:hover:before{content:var(--tw-content);background-color:#fff9}@supports (color:color-mix(in lab,red,red)){.hover\\:before\\:bg-white\\/60:hover:before{background-color:color-mix(in oklab,var(--color-white)60%,transparent)}}.focus\\:border-blue-500:focus{border-color:var(--color-blue-500)}.focus\\:border-blue-500\\/50:focus{border-color:#3080ff80}@supports (color:color-mix(in lab,red,red)){.focus\\:border-blue-500\\/50:focus{border-color:color-mix(in oklab,var(--color-blue-500)50%,transparent)}}.focus\\:border-transparent:focus{border-color:#0000}.focus\\:border-white\\/50:focus{border-color:#ffffff80}@supports (color:color-mix(in lab,red,red)){.focus\\:border-white\\/50:focus{border-color:color-mix(in oklab,var(--color-white)50%,transparent)}}.focus\\:ring-0:focus{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(0px + var(--tw-ring-offset-width))var(--tw-ring-color,var(--color-blue-500));box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.focus\\:ring-1:focus{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(1px + var(--tw-ring-offset-width))var(--tw-ring-color,var(--color-blue-500));box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.focus\\:ring-2:focus{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(2px + var(--tw-ring-offset-width))var(--tw-ring-color,var(--color-blue-500));box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.focus\\:ring-\\[\\#5865F2\\]:focus{--tw-ring-color:#5865f2}.focus\\:ring-blue-500:focus{--tw-ring-color:var(--color-blue-500)}.focus\\:ring-blue-500\\/50:focus{--tw-ring-color:#3080ff80}@supports (color:color-mix(in lab,red,red)){.focus\\:ring-blue-500\\/50:focus{--tw-ring-color:color-mix(in oklab,var(--color-blue-500)50%,transparent)}}.focus\\:ring-offset-2:focus{--tw-ring-offset-width:2px;--tw-ring-offset-shadow:var(--tw-ring-inset,)0 0 0 var(--tw-ring-offset-width)var(--tw-ring-offset-color)}.focus\\:outline-hidden:focus{--tw-outline-style:none;outline-style:none}@media(forced-colors:active){.focus\\:outline-hidden:focus{outline-offset:2px;outline:2px solid #0000}}.focus\\:outline-none:focus{--tw-outline-style:none;outline-style:none}.focus-visible\\:ring-2:focus-visible{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(2px + var(--tw-ring-offset-width))var(--tw-ring-color,var(--color-blue-500));box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.focus-visible\\:ring-\\[\\#38bdf8\\]\\/30:focus-visible{--tw-ring-color:oklab(75.3513% -.0843 -.110505/.3)}.focus-visible\\:ring-\\[\\#f59e0b\\]\\/30:focus-visible{--tw-ring-color:oklab(76.8591% .0560995 .154808/.3)}.focus-visible\\:ring-emerald-400\\/30:focus-visible{--tw-ring-color:#00d2944d}@supports (color:color-mix(in lab,red,red)){.focus-visible\\:ring-emerald-400\\/30:focus-visible{--tw-ring-color:color-mix(in oklab,var(--color-emerald-400)30%,transparent)}}.focus-visible\\:ring-indigo-400\\/30:focus-visible{--tw-ring-color:#7d87ff4d}@supports (color:color-mix(in lab,red,red)){.focus-visible\\:ring-indigo-400\\/30:focus-visible{--tw-ring-color:color-mix(in oklab,var(--color-indigo-400)30%,transparent)}}.focus-visible\\:ring-indigo-400\\/50:focus-visible{--tw-ring-color:#7d87ff80}@supports (color:color-mix(in lab,red,red)){.focus-visible\\:ring-indigo-400\\/50:focus-visible{--tw-ring-color:color-mix(in oklab,var(--color-indigo-400)50%,transparent)}}.focus-visible\\:ring-red-400\\/30:focus-visible{--tw-ring-color:#ff65684d}@supports (color:color-mix(in lab,red,red)){.focus-visible\\:ring-red-400\\/30:focus-visible{--tw-ring-color:color-mix(in oklab,var(--color-red-400)30%,transparent)}}.focus-visible\\:ring-white\\/20:focus-visible{--tw-ring-color:#fff3}@supports (color:color-mix(in lab,red,red)){.focus-visible\\:ring-white\\/20:focus-visible{--tw-ring-color:color-mix(in oklab,var(--color-white)20%,transparent)}}.focus-visible\\:ring-white\\/30:focus-visible{--tw-ring-color:#ffffff4d}@supports (color:color-mix(in lab,red,red)){.focus-visible\\:ring-white\\/30:focus-visible{--tw-ring-color:color-mix(in oklab,var(--color-white)30%,transparent)}}.focus-visible\\:ring-white\\/50:focus-visible{--tw-ring-color:#ffffff80}@supports (color:color-mix(in lab,red,red)){.focus-visible\\:ring-white\\/50:focus-visible{--tw-ring-color:color-mix(in oklab,var(--color-white)50%,transparent)}}.focus-visible\\:outline-hidden:focus-visible{--tw-outline-style:none;outline-style:none}@media(forced-colors:active){.focus-visible\\:outline-hidden:focus-visible{outline-offset:2px;outline:2px solid #0000}}.active\\:translate-y-0:active{--tw-translate-y:calc(var(--spacing)*0);translate:var(--tw-translate-x)var(--tw-translate-y)}.active\\:translate-y-\\[1px\\]:active,.active\\:translate-y-px:active{--tw-translate-y:1px;translate:var(--tw-translate-x)var(--tw-translate-y)}.active\\:scale-95:active{--tw-scale-x:95%;--tw-scale-y:95%;--tw-scale-z:95%;scale:var(--tw-scale-x)var(--tw-scale-y)}.active\\:scale-\\[0\\.98\\]:active{scale:.98}.active\\:scale-\\[0\\.99\\]:active{scale:.99}.active\\:scale-\\[0\\.995\\]:active{scale:.995}.active\\:bg-slate-800\\/90:active{background-color:#1d293de6}@supports (color:color-mix(in lab,red,red)){.active\\:bg-slate-800\\/90:active{background-color:color-mix(in oklab,var(--color-slate-800)90%,transparent)}}.active\\:bg-zinc-600:active{background-color:var(--color-zinc-600)}.enabled\\:hover\\:bg-indigo-500:enabled:hover{background-color:var(--color-indigo-500)}.disabled\\:transform-none:disabled{transform:none}.disabled\\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\\:bg-gray-600:disabled{background-color:var(--color-gray-600)}.disabled\\:opacity-50:disabled{opacity:.5}.disabled\\:opacity-70:disabled{opacity:.7}:where(.in-game) .in-\\[\\.in-game\\]\\:hidden{display:none}@media(min-width:1200px){.min-\\[1200px\\]\\:fixed{position:fixed}.min-\\[1200px\\]\\:right-0{right:calc(var(--spacing)*0)}.min-\\[1200px\\]\\:right-4{right:calc(var(--spacing)*4)}.min-\\[1200px\\]\\:bottom-0{bottom:calc(var(--spacing)*0)}.min-\\[1200px\\]\\:bottom-4{bottom:calc(var(--spacing)*4)}.min-\\[1200px\\]\\:left-4{left:calc(var(--spacing)*4)}.min-\\[1200px\\]\\:flex{display:flex}.min-\\[1200px\\]\\:w-96{width:calc(var(--spacing)*96)}.min-\\[1200px\\]\\:w-auto{width:auto}.min-\\[1200px\\]\\:flex-col{flex-direction:column}.min-\\[1200px\\]\\:gap-2{gap:calc(var(--spacing)*2)}.min-\\[1200px\\]\\:rounded-xl{border-radius:var(--radius-xl)}.min-\\[1200px\\]\\:rounded-t-lg{border-top-left-radius:var(--radius-lg);border-top-right-radius:var(--radius-lg)}.min-\\[1200px\\]\\:rounded-b-xl{border-bottom-right-radius:var(--radius-xl);border-bottom-left-radius:var(--radius-xl)}}@media(min-width:40rem){.sm\\:-top-1\\.75{top:calc(var(--spacing)*-1.75)}.sm\\:right-auto{right:auto}.sm\\:left-1\\/2{left:50%}.sm\\:left-7\\.5{left:calc(var(--spacing)*7.5)}.sm\\:order-none{order:0}.sm\\:-mt-1\\.25{margin-top:calc(var(--spacing)*-1.25)}.sm\\:size-5{width:calc(var(--spacing)*5);height:calc(var(--spacing)*5)}.sm\\:size-6\\.25{width:calc(var(--spacing)*6.25);height:calc(var(--spacing)*6.25)}.sm\\:size-10{width:calc(var(--spacing)*10);height:calc(var(--spacing)*10)}.sm\\:h-10{height:calc(var(--spacing)*10)}.sm\\:h-\\[50px\\]{height:50px}.sm\\:w-1\\/2{width:50%}.sm\\:w-25{width:calc(var(--spacing)*25)}.sm\\:w-50{width:calc(var(--spacing)*50)}.sm\\:w-100{width:calc(var(--spacing)*100)}.sm\\:w-125{width:calc(var(--spacing)*125)}.sm\\:w-\\[120px\\]{width:120px}.sm\\:w-auto{width:auto}.sm\\:min-w-10{min-width:calc(var(--spacing)*10)}.sm\\:min-w-15{min-width:calc(var(--spacing)*15)}.sm\\:min-w-\\[400px\\]{min-width:400px}.sm\\:-translate-x-1\\/2{--tw-translate-x: -50% ;translate:var(--tw-translate-x)var(--tw-translate-y)}.sm\\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.sm\\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.sm\\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.sm\\:flex-row{flex-direction:row}.sm\\:items-center{align-items:center}.sm\\:items-end{align-items:flex-end}.sm\\:gap-2{gap:calc(var(--spacing)*2)}.sm\\:self-auto{align-self:auto}.sm\\:rounded-\\[50\\%\\]{border-radius:50%}.sm\\:border{border-style:var(--tw-border-style);border-width:1px}.sm\\:border-gray-200{border-color:var(--color-gray-200)}.sm\\:bg-slate-500{background-color:var(--color-slate-500)}.sm\\:p-3{padding:calc(var(--spacing)*3)}.sm\\:px-4{padding-inline:calc(var(--spacing)*4)}.sm\\:px-17\\.5{padding-inline:calc(var(--spacing)*17.5)}.sm\\:pt-0{padding-top:calc(var(--spacing)*0)}.sm\\:pt-2\\.5{padding-top:calc(var(--spacing)*2.5)}.sm\\:pr-5{padding-right:calc(var(--spacing)*5)}.sm\\:pr-20{padding-right:calc(var(--spacing)*20)}.sm\\:pl-5{padding-left:calc(var(--spacing)*5)}.sm\\:text-2xl{font-size:var(--text-2xl);line-height:var(--tw-leading,var(--text-2xl--line-height))}.sm\\:text-4xl{font-size:var(--text-4xl);line-height:var(--tw-leading,var(--text-4xl--line-height))}.sm\\:text-base{font-size:var(--text-base);line-height:var(--tw-leading,var(--text-base--line-height))}.sm\\:text-sm{font-size:var(--text-sm);line-height:var(--tw-leading,var(--text-sm--line-height))}.sm\\:text-\\[14px\\]{font-size:14px}.sm\\:leading-3\\.5{--tw-leading:calc(var(--spacing)*3.5);line-height:calc(var(--spacing)*3.5)}.sm\\:leading-3\\.75{--tw-leading:calc(var(--spacing)*3.75);line-height:calc(var(--spacing)*3.75)}}@media(min-width:48rem){.md\\:block{display:block}.md\\:flex{display:flex}.md\\:hidden{display:none}.md\\:table-cell{display:table-cell}.md\\:max-h-\\[50vh\\]{max-height:50vh}.md\\:w-60{width:calc(var(--spacing)*60)}.md\\:w-175{width:calc(var(--spacing)*175)}.md\\:grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.md\\:grid-cols-3{grid-template-columns:repeat(3,minmax(0,1fr))}.md\\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.md\\:grid-cols-5{grid-template-columns:repeat(5,minmax(0,1fr))}.md\\:flex-row{flex-direction:row}.md\\:gap-3{gap:calc(var(--spacing)*3)}.md\\:gap-4{gap:calc(var(--spacing)*4)}.md\\:p-2\\.5{padding:calc(var(--spacing)*2.5)}.md\\:px-2{padding-inline:calc(var(--spacing)*2)}.md\\:px-\\[clamp\\(1rem\\,1\\.5vw\\,2rem\\)\\]{padding-inline:clamp(1rem,1.5vw,2rem)}.md\\:py-2{padding-block:calc(var(--spacing)*2)}.md\\:pt-\\[clamp\\(1rem\\,3vh\\,4rem\\)\\]{padding-top:clamp(1rem,3vh,4rem)}.md\\:pr-1{padding-right:calc(var(--spacing)*1)}.md\\:pb-\\[clamp\\(0\\.5rem\\,2vh\\,2rem\\)\\]{padding-bottom:clamp(.5rem,2vh,2rem)}.md\\:text-3xl{font-size:var(--text-3xl);line-height:var(--tw-leading,var(--text-3xl--line-height))}.md\\:text-sm{font-size:var(--text-sm);line-height:var(--tw-leading,var(--text-sm--line-height))}.md\\:text-xs{font-size:var(--text-xs);line-height:var(--tw-leading,var(--text-xs--line-height))}}@media(min-width:64rem){.lg\\:top-4{top:calc(var(--spacing)*4)}.lg\\:right-2\\.5{right:calc(var(--spacing)*2.5)}.lg\\:bottom-2\\.5{bottom:calc(var(--spacing)*2.5)}.lg\\:col-span-3{grid-column:span 3/span 3}.lg\\:col-span-9{grid-column:span 9/span 9}.lg\\:col-span-12{grid-column:span 12/span 12}.lg\\:mx-auto{margin-inline:auto}.lg\\:mt-2{margin-top:calc(var(--spacing)*2)}.lg\\:block{display:block}.lg\\:flex{display:flex}.lg\\:hidden{display:none}.lg\\:hidden\\!{display:none!important}.lg\\:inline-block{display:inline-block}.lg\\:h-4{height:calc(var(--spacing)*4)}.lg\\:h-6{height:calc(var(--spacing)*6)}.lg\\:h-7{height:calc(var(--spacing)*7)}.lg\\:h-8{height:calc(var(--spacing)*8)}.lg\\:h-10{height:calc(var(--spacing)*10)}.lg\\:h-96{height:calc(var(--spacing)*96)}.lg\\:w-1\\/2{width:50%}.lg\\:w-4{width:calc(var(--spacing)*4)}.lg\\:w-12{width:calc(var(--spacing)*12)}.lg\\:w-auto{width:auto}.lg\\:w-full{width:100%}.lg\\:max-w-\\[30vw\\]{max-width:30vw}.lg\\:max-w-\\[400px\\]{max-width:400px}.lg\\:flex-1{flex:1}.lg\\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}.lg\\:grid-cols-5{grid-template-columns:repeat(5,minmax(0,1fr))}.lg\\:grid-cols-12{grid-template-columns:repeat(12,minmax(0,1fr))}.lg\\:flex-col{flex-direction:column}.lg\\:gap-1{gap:calc(var(--spacing)*1)}.lg\\:gap-3{gap:calc(var(--spacing)*3)}.lg\\:gap-6{gap:calc(var(--spacing)*6)}.lg\\:rounded-lg{border-radius:var(--radius-lg)}.lg\\:rounded-tl-lg{border-top-left-radius:var(--radius-lg)}.lg\\:rounded-tr-xl{border-top-right-radius:var(--radius-xl)}.lg\\:p-1{padding:calc(var(--spacing)*1)}.lg\\:p-1\\.5{padding:calc(var(--spacing)*1.5)}.lg\\:p-2{padding:calc(var(--spacing)*2)}.lg\\:p-3{padding:calc(var(--spacing)*3)}.lg\\:p-5{padding:calc(var(--spacing)*5)}.lg\\:px-2{padding-inline:calc(var(--spacing)*2)}.lg\\:px-4{padding-inline:calc(var(--spacing)*4)}.lg\\:py-1{padding-block:calc(var(--spacing)*1)}.lg\\:text-3xl{font-size:var(--text-3xl);line-height:var(--tw-leading,var(--text-3xl--line-height))}.lg\\:text-base{font-size:var(--text-base);line-height:var(--tw-leading,var(--text-base--line-height))}.lg\\:text-lg{font-size:var(--text-lg);line-height:var(--tw-leading,var(--text-lg--line-height))}.lg\\:text-sm{font-size:var(--text-sm);line-height:var(--tw-leading,var(--text-sm--line-height))}.lg\\:text-xl{font-size:var(--text-xl);line-height:var(--tw-leading,var(--text-xl--line-height))}.lg\\:text-xs{font-size:var(--text-xs);line-height:var(--tw-leading,var(--text-xs--line-height))}.lg\\:\\[-ms-overflow-style\\:auto\\]{-ms-overflow-style:auto}.lg\\:\\[scrollbar-width\\:auto\\]{scrollbar-width:auto}}@media(min-width:80rem){.xl\\:flex{display:flex}.xl\\:flex-col{flex-direction:column}.xl\\:gap-2{gap:calc(var(--spacing)*2)}.xl\\:gap-6{gap:calc(var(--spacing)*6)}}@media(min-width:96rem){.\\32xl\\:flex{display:flex}.\\32xl\\:flex-row{flex-direction:row}.\\32xl\\:gap-5{gap:calc(var(--spacing)*5)}}@media not all and (min-width:64rem){@media(orientation:landscape){.max-lg\\:landscape\\:fixed{position:fixed}.max-lg\\:landscape\\:bottom-0{bottom:calc(var(--spacing)*0)}.max-lg\\:landscape\\:left-0{left:calc(var(--spacing)*0)}.max-lg\\:landscape\\:z-50{z-index:50}.max-lg\\:landscape\\:w-1\\/2{width:50%}}}.dark\\:border-gray-300\\/60:where(.dark,.dark *){border-color:#d1d5dc99}@supports (color:color-mix(in lab,red,red)){.dark\\:border-gray-300\\/60:where(.dark,.dark *){border-color:color-mix(in oklab,var(--color-gray-300)60%,transparent)}}.dark\\:bg-\\[rgba\\(55\\,65\\,81\\,0\\.7\\)\\]:where(.dark,.dark *){background-color:#374151b3}.dark\\:bg-gray-700:where(.dark,.dark *){background-color:var(--color-gray-700)}.dark\\:bg-gray-800:where(.dark,.dark *){background-color:var(--color-gray-800)}.dark\\:bg-gray-900:where(.dark,.dark *){background-color:var(--color-gray-900)}.dark\\:bg-red-500:where(.dark,.dark *){background-color:var(--color-red-500)}.dark\\:text-gray-200:where(.dark,.dark *){color:var(--color-gray-200)}.dark\\:text-gray-400:where(.dark,.dark *){color:var(--color-gray-400)}.dark\\:text-red-400:where(.dark,.dark *){color:var(--color-red-400)}.dark\\:invert:where(.dark,.dark *){--tw-invert:invert(100%);filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.\\[\\&_a\\]\\:text-blue-400 a{color:var(--color-blue-400)}.\\[\\&_a\\:hover\\]\\:text-blue-300 a:hover{color:var(--color-blue-300)}.\\[\\&_h1\\]\\:mb-4 h1{margin-bottom:calc(var(--spacing)*4)}.\\[\\&_h1\\]\\:border-b h1{border-bottom-style:var(--tw-border-style);border-bottom-width:1px}.\\[\\&_h1\\]\\:border-white\\/10 h1{border-color:#ffffff1a}@supports (color:color-mix(in lab,red,red)){.\\[\\&_h1\\]\\:border-white\\/10 h1{border-color:color-mix(in oklab,var(--color-white)10%,transparent)}}.\\[\\&_h1\\]\\:pb-2 h1{padding-bottom:calc(var(--spacing)*2)}.\\[\\&_h1\\]\\:text-2xl h1{font-size:var(--text-2xl);line-height:var(--tw-leading,var(--text-2xl--line-height))}.\\[\\&_h1\\]\\:font-bold h1{--tw-font-weight:var(--font-weight-bold);font-weight:var(--font-weight-bold)}.\\[\\&_h1\\]\\:text-white h1{color:var(--color-white)}.\\[\\&_h2\\]\\:mt-6 h2{margin-top:calc(var(--spacing)*6)}.\\[\\&_h2\\]\\:mb-3 h2{margin-bottom:calc(var(--spacing)*3)}.\\[\\&_h2\\]\\:text-xl h2{font-size:var(--text-xl);line-height:var(--tw-leading,var(--text-xl--line-height))}.\\[\\&_h2\\]\\:font-bold h2{--tw-font-weight:var(--font-weight-bold);font-weight:var(--font-weight-bold)}.\\[\\&_h2\\]\\:text-blue-200 h2{color:var(--color-blue-200)}.\\[\\&_h3\\]\\:mt-4 h3{margin-top:calc(var(--spacing)*4)}.\\[\\&_h3\\]\\:mb-2 h3{margin-bottom:calc(var(--spacing)*2)}.\\[\\&_h3\\]\\:text-lg h3{font-size:var(--text-lg);line-height:var(--tw-leading,var(--text-lg--line-height))}.\\[\\&_h3\\]\\:font-semibold h3{--tw-font-weight:var(--font-weight-semibold);font-weight:var(--font-weight-semibold)}.\\[\\&_h3\\]\\:text-blue-100 h3{color:var(--color-blue-100)}.\\[\\&_li\\]\\:leading-relaxed li{--tw-leading:var(--leading-relaxed);line-height:var(--leading-relaxed)}.\\[\\&_li\\]\\:text-gray-300 li{color:var(--color-gray-300)}.\\[\\&_p\\]\\:mb-3 p{margin-bottom:calc(var(--spacing)*3)}.\\[\\&_p\\]\\:text-gray-300 p{color:var(--color-gray-300)}.\\[\\&_strong\\]\\:font-bold strong{--tw-font-weight:var(--font-weight-bold);font-weight:var(--font-weight-bold)}.\\[\\&_strong\\]\\:text-white strong{color:var(--color-white)}.\\[\\&_ul\\]\\:my-3 ul{margin-block:calc(var(--spacing)*3)}.\\[\\&_ul\\]\\:list-disc ul{list-style-type:disc}:where(.\\[\\&_ul\\]\\:space-y-1 ul>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*1)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*1)*calc(1 - var(--tw-space-y-reverse)))}.\\[\\&_ul\\]\\:pl-5 ul{padding-left:calc(var(--spacing)*5)}.\\[\\&\\.active\\]\\:translate-x-2\\.5.active{--tw-translate-x:calc(var(--spacing)*2.5);translate:var(--tw-translate-x)var(--tw-translate-y)}.\\[\\&\\.active\\]\\:text-blue-500.active{color:var(--color-blue-500)}.\\[\\&\\.active\\]\\:text-blue-600.active{color:var(--color-blue-600)}.\\[\\&\\.active\\]\\:text-white.active{color:var(--color-white)}.\\[\\&\\.active\\]\\:drop-shadow-\\[0_0_20px_rgba\\(37\\,99\\,235\\,0\\.5\\)\\].active{--tw-drop-shadow-size:drop-shadow(0 0 20px var(--tw-drop-shadow-color,#2563eb80));--tw-drop-shadow:var(--tw-drop-shadow-size);filter:var(--tw-blur,)var(--tw-brightness,)var(--tw-contrast,)var(--tw-grayscale,)var(--tw-hue-rotate,)var(--tw-invert,)var(--tw-saturate,)var(--tw-sepia,)var(--tw-drop-shadow,)}.\\[\\&\\.open\\]\\:pointer-events-auto.open{pointer-events:auto}.\\[\\&\\.open\\]\\:fixed.open{position:fixed}.\\[\\&\\.open\\]\\:inset-0.open{inset:calc(var(--spacing)*0)}.\\[\\&\\.open\\]\\:z-\\[40000\\].open{z-index:40000}.\\[\\&\\.open\\]\\:block.open{display:block}.\\[\\&\\.open\\]\\:translate-x-0.open{--tw-translate-x:calc(var(--spacing)*0);translate:var(--tw-translate-x)var(--tw-translate-y)}.\\[\\&\\.open\\]\\:bg-black\\/60.open{background-color:#0009}@supports (color:color-mix(in lab,red,red)){.\\[\\&\\.open\\]\\:bg-black\\/60.open{background-color:color-mix(in oklab,var(--color-black)60%,transparent)}}.\\[\\&\\:\\:-moz-range-progress\\]\\:h-2::-moz-range-progress{height:calc(var(--spacing)*2)}.\\[\\&\\:\\:-moz-range-progress\\]\\:rounded::-moz-range-progress{border-radius:.25rem}.\\[\\&\\:\\:-moz-range-progress\\]\\:bg-blue-500::-moz-range-progress{background-color:var(--color-blue-500)}.\\[\\&\\:\\:-moz-range-thumb\\]\\:h-\\[18px\\]::-moz-range-thumb{height:18px}.\\[\\&\\:\\:-moz-range-thumb\\]\\:w-\\[18px\\]::-moz-range-thumb{width:18px}.\\[\\&\\:\\:-moz-range-thumb\\]\\:cursor-pointer::-moz-range-thumb{cursor:pointer}.\\[\\&\\:\\:-moz-range-thumb\\]\\:rounded-full::-moz-range-thumb{border-radius:3.40282e38px}.\\[\\&\\:\\:-moz-range-thumb\\]\\:border-none::-moz-range-thumb{--tw-border-style:none;border-style:none}.\\[\\&\\:\\:-moz-range-thumb\\]\\:bg-blue-500::-moz-range-thumb{background-color:var(--color-blue-500)}.\\[\\&\\:\\:-moz-range-thumb\\]\\:shadow-\\[0_0_0_4px_rgba\\(59\\,130\\,246\\,0\\.2\\)\\]::-moz-range-thumb{--tw-shadow:0 0 0 4px var(--tw-shadow-color,#3b82f633);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.\\[\\&\\:\\:-moz-range-thumb\\]\\:transition-all::-moz-range-thumb{transition-property:all;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.active\\:\\[\\&\\:\\:-moz-range-thumb\\]\\:scale-110:active::-moz-range-thumb{--tw-scale-x:110%;--tw-scale-y:110%;--tw-scale-z:110%;scale:var(--tw-scale-x)var(--tw-scale-y)}.active\\:\\[\\&\\:\\:-moz-range-thumb\\]\\:shadow-\\[0_0_0_6px_rgba\\(59\\,130\\,246\\,0\\.3\\)\\]:active::-moz-range-thumb{--tw-shadow:0 0 0 6px var(--tw-shadow-color,#3b82f64d);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.\\[\\&\\:\\:-moz-range-track\\]\\:h-2::-moz-range-track{height:calc(var(--spacing)*2)}.\\[\\&\\:\\:-moz-range-track\\]\\:h-\\[6px\\]::-moz-range-track{height:6px}.\\[\\&\\:\\:-moz-range-track\\]\\:w-full::-moz-range-track{width:100%}.\\[\\&\\:\\:-moz-range-track\\]\\:cursor-pointer::-moz-range-track{cursor:pointer}.\\[\\&\\:\\:-moz-range-track\\]\\:rounded::-moz-range-track{border-radius:.25rem}.\\[\\&\\:\\:-moz-range-track\\]\\:rounded-full::-moz-range-track{border-radius:3.40282e38px}.\\[\\&\\:\\:-moz-range-track\\]\\:bg-transparent::-moz-range-track{background-color:#0000}.\\[\\&\\:\\:-moz-range-track\\]\\:bg-white\\/10::-moz-range-track{background-color:#ffffff1a}@supports (color:color-mix(in lab,red,red)){.\\[\\&\\:\\:-moz-range-track\\]\\:bg-white\\/10::-moz-range-track{background-color:color-mix(in oklab,var(--color-white)10%,transparent)}}.\\[\\&\\:\\:-moz-range-track\\]\\:transition-colors::-moz-range-track{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.\\[\\&\\:\\:-webkit-scrollbar\\]\\:hidden::-webkit-scrollbar{display:none}@media(min-width:64rem){.lg\\:\\[\\&\\:\\:-webkit-scrollbar\\]\\:block::-webkit-scrollbar{display:block}}.\\[\\&\\:\\:-webkit-slider-runnable-track\\]\\:h-2::-webkit-slider-runnable-track{height:calc(var(--spacing)*2)}.\\[\\&\\:\\:-webkit-slider-runnable-track\\]\\:h-\\[6px\\]::-webkit-slider-runnable-track{height:6px}.\\[\\&\\:\\:-webkit-slider-runnable-track\\]\\:w-full::-webkit-slider-runnable-track{width:100%}.\\[\\&\\:\\:-webkit-slider-runnable-track\\]\\:cursor-pointer::-webkit-slider-runnable-track{cursor:pointer}.\\[\\&\\:\\:-webkit-slider-runnable-track\\]\\:rounded::-webkit-slider-runnable-track{border-radius:.25rem}.\\[\\&\\:\\:-webkit-slider-runnable-track\\]\\:rounded-full::-webkit-slider-runnable-track{border-radius:3.40282e38px}.\\[\\&\\:\\:-webkit-slider-runnable-track\\]\\:bg-transparent::-webkit-slider-runnable-track{background-color:#0000}.\\[\\&\\:\\:-webkit-slider-runnable-track\\]\\:bg-\\[image\\:linear-gradient\\(to_right\\,\\#3b82f6_0\\%\\,\\#3b82f6_var\\(--fill\\)\\,rgba\\(255\\,255\\,255\\,0\\.1\\)_var\\(--fill\\)\\,rgba\\(255\\,255\\,255\\,0\\.1\\)_100\\%\\)\\]::-webkit-slider-runnable-track{background-image:linear-gradient(to right,#3b82f6 0%,#3b82f6 var(--fill),#ffffff1a var(--fill),#ffffff1a 100%)}.\\[\\&\\:\\:-webkit-slider-runnable-track\\]\\:transition-colors::-webkit-slider-runnable-track{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:-mt-\\[6px\\]::-webkit-slider-thumb{margin-top:-6px}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:h-\\[18px\\]::-webkit-slider-thumb{height:18px}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:w-\\[18px\\]::-webkit-slider-thumb{width:18px}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:cursor-pointer::-webkit-slider-thumb{cursor:pointer}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:appearance-none::-webkit-slider-thumb{appearance:none}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:rounded-full::-webkit-slider-thumb{border-radius:3.40282e38px}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:bg-blue-500::-webkit-slider-thumb{background-color:var(--color-blue-500)}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:shadow-\\[0_0_0_4px_rgba\\(59\\,130\\,246\\,0\\.2\\)\\]::-webkit-slider-thumb{--tw-shadow:0 0 0 4px var(--tw-shadow-color,#3b82f633);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.\\[\\&\\:\\:-webkit-slider-thumb\\]\\:transition-all::-webkit-slider-thumb{transition-property:all;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.active\\:\\[\\&\\:\\:-webkit-slider-thumb\\]\\:scale-110:active::-webkit-slider-thumb{--tw-scale-x:110%;--tw-scale-y:110%;--tw-scale-z:110%;scale:var(--tw-scale-x)var(--tw-scale-y)}.active\\:\\[\\&\\:\\:-webkit-slider-thumb\\]\\:shadow-\\[0_0_0_6px_rgba\\(59\\,130\\,246\\,0\\.3\\)\\]:active::-webkit-slider-thumb{--tw-shadow:0 0 0 6px var(--tw-shadow-color,#3b82f64d);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.\\[\\&\\>img\\]\\:h-full>img{height:100%}.\\[\\&\\>img\\]\\:w-full>img{width:100%}.\\[\\&\\>img\\]\\:object-cover>img{object-fit:cover}.in-game .\\[\\.in-game_\\&\\]\\:hidden{display:none}}html{height:100dvh}body{height:100%;padding:env(safe-area-inset-top)env(safe-area-inset-right)env(safe-area-inset-bottom)env(safe-area-inset-left);overflow:hidden!important}*{box-sizing:border-box;scrollbar-width:auto;scrollbar-color:#fff3 transparent}::-webkit-scrollbar{width:12px}::-webkit-scrollbar-track{background:0 0;border-radius:4px}::-webkit-scrollbar-thumb{background:#fff3;border-radius:4px}.hide-scrollbar{scrollbar-width:none;-ms-overflow-style:none}.hide-scrollbar::-webkit-scrollbar{display:none}.start-game-button{cursor:pointer;color:#fff;background-color:#007bff;border:none;border-radius:8px;width:100%;max-width:300px;margin:0 0 20px;padding:15px 20px;font-size:16px;transition:background-color .3s;display:inline-block}.start-game-button:not(:disabled):hover{background-color:#0056b3}.start-game-button:disabled{opacity:.7;cursor:not-allowed;background:linear-gradient(90deg,#4a4a4a,#3d3d3d)}.options-layout{grid-template-columns:1fr;gap:24px;margin:24px 0;display:grid}.option-cards{flex-flow:wrap;justify-content:center;gap:16px;display:flex}.option-card{cursor:pointer;background:#1e1e1ef2;border:2px solid #ffffff1a;border-radius:12px;flex-direction:column;justify-content:space-between;align-items:center;width:100%;min-width:100px;max-width:120px;padding:4px 4px 0;transition:all .2s ease-in-out;display:flex}.option-card:hover:not(.disabled){background:#282828f2;border-color:#ffffff4d;transform:translateY(-2px)}.option-card.selected{background:#4a9eff1a;border-color:#4a9eff}.option-card.disabled{opacity:.3;cursor:not-allowed}.option-card-title{color:#aaa;text-align:center;word-break:break-word;overflow-wrap:break-word;margin:0 0 4px;font-size:14px}.option-image{aspect-ratio:4/2;color:#aaa;background-color:#ffffff1a;border-radius:8px;justify-content:center;align-items:center;width:100%;font-size:14px;transition:transform .2s ease-in-out;display:flex}.option-card input[type=checkbox]{display:none}label.option-card:hover{transform:none}.checkbox-icon{border:2px solid #aaa;border-radius:6px;justify-content:center;align-items:center;width:16px;height:16px;margin:4px;transition:all .2s ease-in-out;display:flex}.option-card.selected .checkbox-icon{background:#4a9eff;border-color:#4a9eff}.option-card.selected .checkbox-icon:after{content:"✓";color:#fff}.clipboard-icon,.visibility-icon{color:#fff;justify-content:center;align-items:center;display:flex}.copy-success{color:green;margin-top:5px;font-size:14px;position:relative}.copy-success-icon{color:#4caf50;width:18px;height:18px}#lobbyIdInput{font-family:monospace;font-weight:600}.lobby-id-button{cursor:pointer;background:#0009;border:1px solid #ffffff1a;border-radius:6px;align-items:center;gap:8px;padding:8px 16px;transition:all .2s ease-in-out;display:flex}.lobby-id-button:hover{background:#0000004d;border-color:#fff3;transform:translateY(-1px)}.lobby-id{color:#fff;text-align:center;font-family:monospace;font-size:14px;font-weight:600}.player-tag{color:#fff;background:#2a2a2a;border-radius:16px;align-items:center;gap:8px;margin:4px;padding:8px 12px;font-size:14px;display:inline-flex}#bots-count,#private-lobby-bots-count{appearance:none;width:80%;height:16px}#bots-count::-moz-range-track{background:#fff;height:8px}#private-lobby-bots-count::-moz-range-track{background:#fff;height:8px}#bots-count::-moz-range-progress{background-color:#0075ff;height:8px}#private-lobby-bots-count::-moz-range-progress{background-color:#0075ff;height:8px}#bots-count::-moz-range-thumb{background:#0075ff;border:none;border-radius:50%;width:16px;height:16px}#private-lobby-bots-count::-moz-range-thumb{background:#0075ff;border:none;border-radius:50%;width:16px;height:16px}#bots-count::-webkit-slider-runnable-track{background:linear-gradient(to right,#0075ff var(--progress,0%),white var(--progress,0%));height:8px}#private-lobby-bots-count::-webkit-slider-runnable-track{background:linear-gradient(to right,#0075ff var(--progress,0%),white var(--progress,0%));height:8px}#bots-count::-webkit-slider-thumb{-webkit-appearance:none;background:#0075ff;border:none;border-radius:50%;width:16px;height:16px;margin-top:-4px}#private-lobby-bots-count::-webkit-slider-thumb{-webkit-appearance:none;background:#0075ff;border:none;border-radius:50%;width:16px;height:16px;margin-top:-4px}.random-map{background:#1e1e1ef2;border:2px solid #ffffff1a}.random-map.selected{background:#4a9eff1a;border:2px solid #4a9eff}#helpModal table{border-collapse:collapse}#helpModal table,#helpModal table th,#helpModal table td{border:1px solid #fff3}#helpModal table th,#helpModal table td{padding:8px 16px}#helpModal table td:first-of-type{text-align:center}#helpModal .default-image,#helpModal .info-panel-img{object-fit:contain;width:12rem;max-width:12rem;height:auto;display:block}#helpModal .player-icon-img{object-fit:contain;width:14rem;height:14rem}#helpModal .icon{background-color:#fff;width:32px;height:32px}@media screen and (max-width:768px){#helpModal .modal-content{width:100%;max-width:100vw;max-height:90vh}#error-modal{max-width:575px}}@media screen and (max-width:480px){#error-modal{max-width:350px}}#error-modal{z-index:9999;box-sizing:border-box;background:#fff;border:1px solid #000;width:87%;padding:20px;position:fixed;top:50%;left:50%;transform:translate(-50%,-50%)}#error-modal pre{white-space:pre-wrap;word-wrap:break-word;max-height:400px;overflow:auto}#error-modal button.copy-btn{color:#fff;cursor:pointer;background:#4caf50;border:none;border-radius:4px;margin-top:10px;padding:8px 16px}#error-modal button.close-btn{color:#fff;cursor:pointer;background:red;width:40px;margin-right:0;position:fixed;top:0;right:0}.start-game-button-container{justify-content:center;width:100%;margin-top:20px;display:flex}.message-area{opacity:0;border-radius:4px;height:0;margin-top:10px;padding:10px;font-size:14px;transition:opacity .3s;overflow:hidden}.message-area.show{opacity:1;height:auto;margin-bottom:10px}.message-area.error{color:#c62828;background-color:#ffebee}.message-area.success{color:#2e7d32;background-color:#e8f5e9}.lobby-id-box{z-index:50;justify-content:center;align-items:center;gap:10px;margin:40px 0 0;display:flex;position:sticky;top:0}.lobby-id-box input{color:#202020;border:1px solid #ccc;border-radius:8px;outline:0;flex-grow:1;max-width:200px;padding:10px;font-size:16px}.lobby-id-paste-button{cursor:pointer;background:#0003;border:1px solid #ffffff1a;border-radius:8px;align-items:center;padding:10px 16px;transition:all .2s ease-in-out;display:flex}.lobby-id-paste-button:hover{background:#0000004d;border-color:#fff3;transform:translateY(-1px)}.lobby-id-paste-button-icon{color:#fff;justify-content:center;align-items:center;display:flex}.options-section{background:#0003;border-radius:12px;padding:12px 24px 24px}.option-title{color:#fff;text-align:center;margin:0 0 16px;font-size:20px}.players-list{flex-wrap:wrap;justify-content:center;gap:8px;display:flex}news-button .active button{position:relative;box-shadow:0 0 0 1px #2563eb80,0 0 8px #2563eb66;border-width:2px!important;border-color:#2563eb!important}news-button .active button:after{content:"";background:#f59e0b;border:2px solid #fff;border-radius:50%;width:12px;height:12px;animation:1.5s ease-in-out infinite newsPulse;position:absolute;top:-2px;right:-2px}@keyframes newsPulse{0%,to{transform:scale(1)}50%{transform:scale(1.4)}}.host-badge{color:#4caf50;font-size:11px;font-weight:700}.remove-player-btn{color:#fff;cursor:pointer;background:#f44;border:none;border-radius:50%;justify-content:center;align-items:center;width:16px;height:16px;margin-left:4px;font-size:11px;display:flex}.remove-player-btn:hover{background:#f66}@property --tw-border-spacing-x{syntax:"<length>";inherits:false;initial-value:0}@property --tw-border-spacing-y{syntax:"<length>";inherits:false;initial-value:0}@property --tw-translate-x{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-y{syntax:"*";inherits:false;initial-value:0}@property --tw-translate-z{syntax:"*";inherits:false;initial-value:0}@property --tw-scale-x{syntax:"*";inherits:false;initial-value:1}@property --tw-scale-y{syntax:"*";inherits:false;initial-value:1}@property --tw-scale-z{syntax:"*";inherits:false;initial-value:1}@property --tw-rotate-x{syntax:"*";inherits:false}@property --tw-rotate-y{syntax:"*";inherits:false}@property --tw-rotate-z{syntax:"*";inherits:false}@property --tw-skew-x{syntax:"*";inherits:false}@property --tw-skew-y{syntax:"*";inherits:false}@property --tw-space-y-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-divide-y-reverse{syntax:"*";inherits:false;initial-value:0}@property --tw-border-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-gradient-position{syntax:"*";inherits:false}@property --tw-gradient-from{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-via{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-to{syntax:"<color>";inherits:false;initial-value:#0000}@property --tw-gradient-stops{syntax:"*";inherits:false}@property --tw-gradient-via-stops{syntax:"*";inherits:false}@property --tw-gradient-from-position{syntax:"<length-percentage>";inherits:false;initial-value:0%}@property --tw-gradient-via-position{syntax:"<length-percentage>";inherits:false;initial-value:50%}@property --tw-gradient-to-position{syntax:"<length-percentage>";inherits:false;initial-value:100%}@property --tw-leading{syntax:"*";inherits:false}@property --tw-font-weight{syntax:"*";inherits:false}@property --tw-tracking{syntax:"*";inherits:false}@property --tw-ordinal{syntax:"*";inherits:false}@property --tw-slashed-zero{syntax:"*";inherits:false}@property --tw-numeric-figure{syntax:"*";inherits:false}@property --tw-numeric-spacing{syntax:"*";inherits:false}@property --tw-numeric-fraction{syntax:"*";inherits:false}@property --tw-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-shadow-color{syntax:"*";inherits:false}@property --tw-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-inset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-shadow-color{syntax:"*";inherits:false}@property --tw-inset-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-ring-color{syntax:"*";inherits:false}@property --tw-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-inset-ring-color{syntax:"*";inherits:false}@property --tw-inset-ring-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-ring-inset{syntax:"*";inherits:false}@property --tw-ring-offset-width{syntax:"<length>";inherits:false;initial-value:0}@property --tw-ring-offset-color{syntax:"*";inherits:false;initial-value:#fff}@property --tw-ring-offset-shadow{syntax:"*";inherits:false;initial-value:0 0 #0000}@property --tw-outline-style{syntax:"*";inherits:false;initial-value:solid}@property --tw-blur{syntax:"*";inherits:false}@property --tw-brightness{syntax:"*";inherits:false}@property --tw-contrast{syntax:"*";inherits:false}@property --tw-grayscale{syntax:"*";inherits:false}@property --tw-hue-rotate{syntax:"*";inherits:false}@property --tw-invert{syntax:"*";inherits:false}@property --tw-opacity{syntax:"*";inherits:false}@property --tw-saturate{syntax:"*";inherits:false}@property --tw-sepia{syntax:"*";inherits:false}@property --tw-drop-shadow{syntax:"*";inherits:false}@property --tw-drop-shadow-color{syntax:"*";inherits:false}@property --tw-drop-shadow-alpha{syntax:"<percentage>";inherits:false;initial-value:100%}@property --tw-drop-shadow-size{syntax:"*";inherits:false}@property --tw-backdrop-blur{syntax:"*";inherits:false}@property --tw-backdrop-brightness{syntax:"*";inherits:false}@property --tw-backdrop-contrast{syntax:"*";inherits:false}@property --tw-backdrop-grayscale{syntax:"*";inherits:false}@property --tw-backdrop-hue-rotate{syntax:"*";inherits:false}@property --tw-backdrop-invert{syntax:"*";inherits:false}@property --tw-backdrop-opacity{syntax:"*";inherits:false}@property --tw-backdrop-saturate{syntax:"*";inherits:false}@property --tw-backdrop-sepia{syntax:"*";inherits:false}@property --tw-duration{syntax:"*";inherits:false}@property --tw-ease{syntax:"*";inherits:false}@property --tw-content{syntax:"*";inherits:false;initial-value:""}@keyframes spin{to{transform:rotate(360deg)}}@keyframes ping{75%,to{opacity:0;transform:scale(2)}}@keyframes pulse{50%{opacity:.5}}`;var oR=Object.defineProperty,lR=Object.getOwnPropertyDescriptor,Wi=(t,e,r,i)=>{for(var n=i>1?void 0:i?lR(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&oR(e,r,n),n};let Xe=class extends V{constructor(){super(...arguments),this.isModalOpen=!1,this.inline=!1,this.alwaysMaximized=!1,this.hideCloseButton=!1,this.title="",this.hideHeader=!1,this.maxWidth=""}open(){this.isModalOpen||(this.inline||(Xe.openCount=Xe.openCount+1,Xe.openCount===1&&(document.body.style.overflow="hidden")),this.isModalOpen=!0)}close(){this.isModalOpen&&(this.isModalOpen=!1,this.onClose?.(),this.inline||(Xe.openCount=Math.max(0,Xe.openCount-1),Xe.openCount===0&&(document.body.style.overflow="")))}disconnectedCallback(){this.isModalOpen&&!this.inline&&(Xe.openCount=Math.max(0,Xe.openCount-1),Xe.openCount===0&&(document.body.style.overflow="")),super.disconnectedCallback()}render(){const t=this.inline?"relative z-10 w-full h-full flex items-stretch bg-transparent":"fixed inset-0 z-[9999] bg-black/60 flex items-center justify-center overflow-hidden",e=this.inline?"relative flex flex-col w-full h-full m-0 max-w-full max-h-none shadow-none":`relative flex flex-col w-[90%] min-w-[400px] max-w-[900px] m-8 rounded-lg shadow-[0_20px_60px_rgba(0,0,0,0.8)] max-h-[calc(100vh-4rem)] ${this.alwaysMaximized?"h-auto":""}`,r=!this.inline&&this.maxWidth?`max-width: ${this.maxWidth};`:"";return v`
      ${this.isModalOpen?v`
            <aside
              class="${t}"
              @click=${this.inline?null:()=>this.close()}
            >
              <div
                @click=${i=>i.stopPropagation()}
                class="${e}"
                style="${r}"
              >
                ${this.inline||this.hideCloseButton?v``:v`<div
                      class="absolute top-5 right-5 z-10 text-white cursor-pointer"
                      @click=${()=>this.close()}
                    >
                      ✕
                    </div>`}
                ${!this.hideHeader&&this.title?v`<div
                      class="px-[1.4rem] py-[1rem] text-2xl font-bold text-white"
                    >
                      ${this.title}
                    </div>`:v``}
                <section
                  class="relative flex-1 min-h-0 p-[1.4rem] text-white bg-[#23232382] backdrop-blur-md rounded-lg overflow-y-auto"
                >
                  <slot></slot>
                </section>
              </div>
            </aside>
          `:v``}
    `}};Xe.styles=[qw(sR)];Xe.openCount=0;Wi([M()],Xe.prototype,"isModalOpen",2);Wi([L({type:Boolean})],Xe.prototype,"inline",2);Wi([L({type:Boolean})],Xe.prototype,"alwaysMaximized",2);Wi([L({type:Boolean})],Xe.prototype,"hideCloseButton",2);Wi([L({type:String})],Xe.prototype,"title",2);Wi([L({type:Boolean})],Xe.prototype,"hideHeader",2);Wi([L({type:String})],Xe.prototype,"maxWidth",2);Xe=Wi([F("o-modal")],Xe);async function cR(t){const e=navigator.userAgentData,r=e?.platform??uR(navigator.userAgent),i={engine:e?.brands?e.brands.map(l=>l.brand).join(", "):navigator.userAgent,platform:navigator.platform,os:r,dpr:window.devicePixelRatio};let n=null,a="Canvas2D";n=t.getContext("webgl2",{antialias:!0})??t.getContext("webgl",{antialias:!0}),n&&(a=typeof WebGL2RenderingContext<"u"&&n instanceof WebGL2RenderingContext?"WebGL2":"WebGL1");const s={type:a};if(n){s.antialias=n.getContextAttributes()?.antialias??!1,s.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE);const l=n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT);s.shaderHighp=l!==null&&l.precision>0;const c=n.getExtension("WEBGL_debug_renderer_info");if(c){const u=n.getParameter(c.UNMASKED_RENDERER_WEBGL),p=n.getParameter(c.UNMASKED_VENDOR_WEBGL);s.gpu={vendor:p,renderer:u,software:/swiftshader|llvmpipe|software/i.test(u)}}else s.gpu={unavailable:!0}}let o={};if("getBattery"in navigator)try{const l=await navigator.getBattery();o={charging:l.charging,level:Math.round(l.level*100)+"%"}}catch{o={unavailable:!0}}else o={unavailable:!0};return{browser:i,rendering:s,power:o}}function uR(t){return/windows nt/i.test(t)?"Windows":/mac os x/i.test(t)?"macOS":/android/i.test(t)?"Android":/iphone|ipad|ipod/i.test(t)?"iOS":/linux/i.test(t)?"Linux":"Unknown"}var dR=Object.defineProperty,hR=Object.getOwnPropertyDescriptor,Du=(t,e,r,i)=>{for(var n=i>1?void 0:i?hR(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&dR(e,r,n),n};let Va=class extends gt{constructor(){super(...arguments),this.markdown="Loading...",this.loading=!0,this.initialized=!1}async loadDiagnostics(){const t=document.createElement("canvas");this.diagnostics=await cR(t),this.loading=!1,this.initialized=!0}render(){const t=v`
      <div
        class="h-full select-text flex flex-col ${this.inline?"bg-black/60 backdrop-blur-md rounded-2xl border border-white/10":""}"
      >
        ${It({titleContent:v` <div
            class="w-full flex flex-col sm:flex-row justify-between gap-2"
          >
            <span
              class="text-white text-xl sm:text-2xl md:text-3xl font-bold uppercase tracking-widest break-words hyphens-auto"
            >
              <a
                class="hover:text-blue-200 text-blue-400 cursor-pointer"
                @click=${this.close}
                >${f("main.help")}</a
              >
              / ${f("troubleshooting.title")}
            </span>
            <button
              class="hover:bg-white/5 px-6 py-2 text-xs font-bold transition-all duration-200 rounded-lg uppercase tracking-widest bg-blue-500/20 text-blue-400 border border-blue-500/30 shadow-[0_0_15px_rgba(59,130,246,0.2)]"
              @click=${this.copyDiagnostics}
            >
              ${f("common.copy")}
            </button>
          </div>`,onBack:this.close,ariaLabel:f("common.back")})}
        ${this.loading?"":v`
              <div
                class="flex-1 overflow-y-auto px-1 scrollbar-thin scrollbar-thumb-white/20 scrollbar-track-transparent mr-1"
              >
                ${this.section("",v`${this.infoTip(f("troubleshooting.hardware_acceleration_tip"),!0)}`)}
                ${this.section(f("troubleshooting.environment"),v`
                    ${this.row(f("troubleshooting.browser"),this.diagnostics.browser.engine)}
                    ${this.row(f("troubleshooting.platform"),this.diagnostics.browser.platform)}
                    ${this.row(f("troubleshooting.os"),this.diagnostics.browser.os)}
                    ${this.row(f("troubleshooting.device_pixel_ratio"),this.diagnostics.browser.dpr)}
                    ${this.infoTip(f("troubleshooting.chromium_tip"))}
                  `)}
                ${this.section(f("troubleshooting.rendering"),v`
                    ${this.row(f("troubleshooting.renderer"),this.describeRenderer(this.diagnostics.rendering))}
                    ${this.row(f("troubleshooting.max_texture_size"),this.diagnostics.rendering.maxTextureSize??f("troubleshooting.unknown"))}
                    ${this.row(f("troubleshooting.high_precision_shaders"),this.diagnostics.rendering.shaderHighp===!0?f("troubleshooting.yes"):f("troubleshooting.no"))}${this.row(f("troubleshooting.gpu"),!this.diagnostics.rendering.gpu||this.diagnostics.rendering.gpu.unavailable?f("troubleshooting.unavailable"):`${this.diagnostics.rendering.gpu.vendor} — ${this.diagnostics.rendering.gpu.renderer}`)}
                    ${this.infoTip(f("troubleshooting.gpu_tip"))}
                  `)}
                ${this.section(f("troubleshooting.power"),v`
                    ${this.diagnostics.power.unavailable?this.row(f("troubleshooting.battery"),f("troubleshooting.unavailable")):v`
                          ${this.row(f("troubleshooting.charging"),this.diagnostics.power.charging?f("troubleshooting.yes"):f("troubleshooting.no"))}
                          ${this.row(f("troubleshooting.battery_level"),this.diagnostics.power.level)}
                        `}
                    ${this.infoTip(f("troubleshooting.power_saving_tip"))}
                  `)}
              </div>
            `}
      </div>
    `;return this.inline?t:v`
      <o-modal
        title=${f("troubleshooting.title")}
        ?inline=${this.inline}
        hideCloseButton
        hideHeader
      >
        ${t}
      </o-modal>
    `}infoTip(t,e){return v`
      <div
        class="mt-2 ${e?"bg-orange-500/10":"bg-white/10"} flex gap-2 text-white py-1 px-3 rounded-sm  border-1 ${e?"border-orange-400":"border-white/40"}"
      >
        <img src="${mf}" class="w-4" />
        ${t}
      </div>
    `}onOpen(){this.initialized||(this.initialized=!0,this.loadDiagnostics())}section(t,e){return v`
      <div class="px-4 py-3">
        <h4
          class="mb-2 text-xs font-semibold uppercase tracking-wide text-slate-400"
        >
          ${t}
        </h4>
        <div class="space-y-1">${e}</div>
      </div>
    `}row(t,e){return v`
      <div class="flex justify-between gap-4 text-sm">
        <span class="text-slate-400">${t}</span>
        <span class="text-right text-white max-w-100">${e}</span>
      </div>
    `}async copyDiagnostics(){if(!this.diagnostics)return;const t="```json\n"+JSON.stringify(this.diagnostics,null,2)+"\n```";await navigator.clipboard.writeText(t),window.dispatchEvent(new CustomEvent("show-message",{detail:{message:v`${f("troubleshooting.copied_to_clipboard")}`,type:"info",duration:3e3}}))}describeRenderer(t){return t.gpu?.software?f("troubleshooting.software_rendering"):t.type==="Canvas2D"?f("troubleshooting.canvas_2d_no_gpu"):`${t.type}`}close(){this.unregisterEscapeHandler(),this.inline?(this.style.pointerEvents="none",window.showPage&&window.showPage?.("page-help")):this.modalEl?.close()}};Du([L({type:String})],Va.prototype,"markdown",2);Du([L({type:Object})],Va.prototype,"diagnostics",2);Du([L({type:Boolean})],Va.prototype,"loading",2);Va=Du([F("troubleshooting-modal")],Va);var pR=Object.defineProperty,fR=Object.getOwnPropertyDescriptor,$f=(t,e,r,i)=>{for(var n=i>1?void 0:i?fR(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&pR(e,r,n),n};let Wa=class extends gt{constructor(){super(...arguments),this.keybinds=this.getKeybinds()}isKeybindObject(t){return typeof t=="object"&&t!==null&&"value"in t&&typeof t.value=="string"}getKeybinds(){let t={};try{const r=JSON.parse(localStorage.getItem("settings.keybinds")??"{}");t=Object.fromEntries(Object.entries(r).map(([i,n])=>this.isKeybindObject(n)?[i,n.value]:typeof n=="string"?[i,n]:[i,void 0]).filter(([,i])=>typeof i=="string"&&i!=="Null"))}catch(r){console.warn("Invalid keybinds JSON:",r)}return{toggleView:"Space",centerCamera:"KeyC",moveUp:"KeyW",moveDown:"KeyS",moveLeft:"KeyA",moveRight:"KeyD",zoomOut:"KeyQ",zoomIn:"KeyE",attackRatioDown:"KeyT",attackRatioUp:"KeyY",swapDirection:"KeyU",shiftKey:"ShiftLeft",modifierKey:/Mac/.test(navigator.userAgent)?"MetaLeft":"ControlLeft",altKey:"AltLeft",resetGfx:"KeyR",...t}}getKeyLabel(t){if(!t)return"";const e={ShiftLeft:"⇧ Shift",ShiftRight:"⇧ Shift",ControlLeft:"Ctrl",ControlRight:"Ctrl",AltLeft:"Alt",AltRight:"Alt",MetaLeft:"⌘",MetaRight:"⌘",Space:"Space",ArrowUp:"↑",ArrowDown:"↓",ArrowLeft:"←",ArrowRight:"→"};return e[t]?e[t]:t.startsWith("Key")&&t.length===4?t.slice(3):t.startsWith("Digit")?t.slice(5):t.startsWith("Numpad")?`Num ${t.slice(6)}`:t}renderKey(t){const e=this.getKeyLabel(t);return v`<span
      class="inline-block min-w-[32px] text-center px-2 py-1 rounded bg-[#2a2a2a] border-b-2 border-[#1a1a1a] text-white font-mono text-xs font-bold mx-0.5"
      >${e}</span
    >`}render(){const t=this.keybinds,e=v`
      <div
        class="h-full flex flex-col ${this.inline?"bg-black/60 backdrop-blur-md rounded-2xl border border-white/10":""}"
      >
        ${It({title:f("main.help"),onBack:this.close,ariaLabel:f("common.back")})}

        <div
          class="prose prose-invert prose-sm max-w-none overflow-y-auto px-6 py-3 mr-1
            [&_a]:text-blue-400 [&_a:hover]:text-blue-300 transition-colors
            [&_h1]:text-2xl [&_h1]:font-bold [&_h1]:mb-4 [&_h1]:text-white [&_h1]:border-b [&_h1]:border-white/10 [&_h1]:pb-2
            [&_h2]:text-xl [&_h2]:font-bold [&_h2]:mt-6 [&_h2]:mb-3 [&_h2]:text-blue-200
            [&_h3]:text-lg [&_h3]:font-semibold [&_h3]:mt-4 [&_h3]:mb-2 [&_h3]:text-blue-100
            [&_ul]:pl-5 [&_ul]:list-disc [&_ul]:space-y-1
            [&_li]:text-gray-300 [&_li]:leading-relaxed
            [&_p]:text-gray-300 [&_p]:mb-3 [&_strong]:text-white [&_strong]:font-bold
            scrollbar-thin scrollbar-thumb-white/20 scrollbar-track-transparent"
        >
          <!-- Video Tutorial Section -->
          <div class="flex items-center gap-3 mb-3">
            <div class="text-blue-400">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="w-5 h-5"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <polygon points="5 3 19 12 5 21 5 3"></polygon>
              </svg>
            </div>
            <h3
              class="text-xl font-bold uppercase tracking-widest text-white/90"
            >
              ${f("help_modal.video_tutorial")}
            </h3>
            <div
              class="flex-1 h-px bg-gradient-to-r from-blue-500/50 to-transparent"
            ></div>
          </div>
          <section
            class="bg-white/5 rounded-xl border border-white/10 overflow-hidden mb-8"
          >
            <div class="relative w-full h-0 pb-[56.25%]">
              <iframe
                id="tutorial-video-iframe"
                class="absolute top-0 left-0 w-full h-full"
                src="${m0}"
                title="${f("help_modal.video_tutorial_title")}"
                frameborder="0"
                allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
                allowfullscreen
              ></iframe>
            </div>
          </section>

          <!-- Troubleshooting Section -->
          <div class="flex items-center gap-3 mb-3">
            <div class="text-blue-400">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path d="M2 20 L12 0 L22 20 L2 20"></path>
                <line x1="12" y1="8" x2="12" y2="14"></line>
                <line x1="12" y1="17" x2="12.01" y2="17"></line>
              </svg>
            </div>
            <h3
              class="text-xl font-bold uppercase tracking-widest text-white/90"
            >
              ${f("main.troubleshooting")}
            </h3>
            <div
              class="flex-1 h-px bg-gradient-to-r from-blue-500/50 to-transparent"
            ></div>
          </div>
          <section>
            <div class="w-full flex flex-col items-center">
              <p class="mb-6 text-white/70 text-sm">
                ${f("help_modal.troubleshooting_desc")}
              </p>
              <button
                id="troubleshooting-button"
                class="hover:bg-white/5 px-6 py-2 text-xs font-bold transition-all duration-200 rounded-lg uppercase tracking-widest bg-blue-500/20 text-blue-400 border border-blue-500/30 shadow-[0_0_15px_rgba(59,130,246,0.2)]"
                data-page="page-troubleshooting"
                @click="${this.openTroubleshooting}"
                data-i18n="main.go_to_troubleshooting"
              >
                <span
                  class="relative z-10 text-2xl"
                  data-i18n="main.go_to_troubleshooting"
                ></span>
              </button>
            </div>
          </section>
          <!-- Hotkeys Section -->
          <div class="flex items-center gap-3 mb-3">
            <div class="text-blue-400">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="w-5 h-5 text-blue-400"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <rect x="2" y="4" width="20" height="16" rx="2" ry="2"></rect>
                <path d="M6 8h.001"></path>
                <path d="M10 8h.001"></path>
                <path d="M14 8h.001"></path>
                <path d="M18 8h.001"></path>
                <path d="M6 12h.001"></path>
                <path d="M10 12h.001"></path>
                <path d="M14 12h.001"></path>
                <path d="M18 12h.001"></path>
                <path d="M6 16h12"></path>
              </svg>
            </div>
            <h3
              class="text-xl font-bold uppercase tracking-widest text-white/90"
            >
              ${f("help_modal.hotkeys")}
            </h3>
            <div
              class="flex-1 h-px bg-gradient-to-r from-blue-500/50 to-transparent"
            ></div>
          </div>
          <section
            class="bg-white/5 rounded-xl border border-white/10 overflow-hidden"
          >
            <div class="pt-2 pb-4 px-4 overflow-x-auto">
              <table class="w-full text-sm border-separate border-spacing-y-1">
                <thead>
                  <tr
                    class="text-white/40 text-xs uppercase tracking-wider text-left"
                  >
                    <th class="pb-2 pl-4">
                      ${f("help_modal.table_key")}
                    </th>
                    <th class="pb-2">
                      ${f("help_modal.table_action")}
                    </th>
                  </tr>
                </thead>
                <tbody class="text-white/80">
                  <tr class="hover:bg-white/5 transition-colors">
                    <td class="py-3 pl-4 border-b border-white/5">
                      ${this.renderKey(t.toggleView)}
                    </td>
                    <td class="py-3 border-b border-white/5 text-white/70">
                      ${f("help_modal.action_alt_view")}
                    </td>
                  </tr>
                  <tr class="hover:bg-white/5 transition-colors">
                    <td class="py-3 pl-4 border-b border-white/5">
                      ${this.renderKey(t.swapDirection)}
                    </td>
                    <td class="py-3 border-b border-white/5 text-white/70">
                      ${f("help_modal.bomb_direction")}
                    </td>
                  </tr>
                  <tr class="hover:bg-white/5 transition-colors">
                    <td class="py-3 pl-4 border-b border-white/5">
                      <div class="inline-flex items-center gap-2">
                        ${this.renderKey(t.shiftKey)}
                        <span class="text-white/40 font-bold">+</span>
                        <div
                          class="w-5 h-8 border border-white/40 rounded-full relative"
                        >
                          <div
                            class="absolute top-0 left-0 w-1/2 h-1/2 bg-red-500/80 rounded-tl-full"
                          ></div>
                          <div
                            class="w-0.5 h-1.5 bg-white/40 rounded-full absolute top-1.5 left-1/2 -translate-x-1/2"
                          ></div>
                        </div>
                      </div>
                    </td>
                    <td class="py-3 border-b border-white/5 text-white/70">
                      ${f("help_modal.action_attack_altclick")}
                    </td>
                  </tr>
                  <tr class="hover:bg-white/5 transition-colors">
                    <td class="py-3 pl-4 border-b border-white/5">
                      <div class="inline-flex items-center gap-2">
                        ${this.renderKey(t.modifierKey)}
                        <span class="text-white/40 font-bold">+</span>
                        <div
                          class="w-5 h-8 border border-white/40 rounded-full relative"
                        >
                          <div
                            class="absolute top-0 left-0 w-1/2 h-1/2 bg-red-500/80 rounded-tl-full"
                          ></div>
                          <div
                            class="w-0.5 h-1.5 bg-white/40 rounded-full absolute top-1.5 left-1/2 -translate-x-1/2"
                          ></div>
                        </div>
                      </div>
                    </td>
                    <td class="py-3 border-b border-white/5 text-white/70">
                      ${f("help_modal.action_build")}
                    </td>
                  </tr>
                  <tr class="hover:bg-white/5 transition-colors">
                    <td class="py-3 pl-4 border-b border-white/5">
                      <div class="inline-flex items-center gap-2">
                        ${this.renderKey(t.altKey)}
                        <span class="text-white/40 font-bold">+</span>
                        <div
                          class="w-5 h-8 border border-white/40 rounded-full relative"
                        >
                          <div
                            class="absolute top-0 left-0 w-1/2 h-1/2 bg-red-500/80 rounded-tl-full"
                          ></div>
                          <div
                            class="w-0.5 h-1.5 bg-white/40 rounded-full absolute top-1.5 left-1/2 -translate-x-1/2"
                          ></div>
                        </div>
                      </div>
                    </td>
                    <td class="py-3 border-b border-white/5 text-white/70">
                      ${f("help_modal.action_emote")}
                    </td>
                  </tr>
                  <tr class="hover:bg-white/5 transition-colors">
                    <td class="py-3 pl-4 border-b border-white/5">
                      ${this.renderKey(t.centerCamera)}
                    </td>
                    <td class="py-3 border-b border-white/5 text-white/70">
                      ${f("help_modal.action_center")}
                    </td>
                  </tr>
                  <tr class="hover:bg-white/5 transition-colors">
                    <td class="py-3 pl-4 border-b border-white/5">
                      <div class="flex flex-wrap gap-2">
                        ${this.renderKey(t.zoomOut)}
                        ${this.renderKey(t.zoomIn)}
                      </div>
                    </td>
                    <td class="py-3 border-b border-white/5 text-white/70">
                      ${f("help_modal.action_zoom")}
                    </td>
                  </tr>
                  <tr class="hover:bg-white/5 transition-colors">
                    <td class="py-3 pl-4 border-b border-white/5">
                      <div class="flex flex-wrap gap-1 max-w-[200px]">
                        ${this.renderKey(t.moveUp)}
                        ${this.renderKey(t.moveLeft)}
                        ${this.renderKey(t.moveDown)}
                        ${this.renderKey(t.moveRight)}
                      </div>
                    </td>
                    <td class="py-3 border-b border-white/5 text-white/70">
                      ${f("help_modal.action_move_camera")}
                    </td>
                  </tr>
                  <tr class="hover:bg-white/5 transition-colors">
                    <td class="py-3 pl-4 border-b border-white/5">
                      <div class="flex flex-wrap gap-2">
                        ${this.renderKey(t.attackRatioDown)}
                        ${this.renderKey(t.attackRatioUp)}
                      </div>
                    </td>
                    <td class="py-3 border-b border-white/5 text-white/70">
                      ${f("help_modal.action_ratio_change")}
                    </td>
                  </tr>
                  <tr class="hover:bg-white/5 transition-colors">
                    <td class="py-3 pl-4 border-b border-white/5">
                      <div class="inline-flex items-center gap-2">
                        ${this.renderKey(t.shiftKey)}
                        <span class="text-white/40 font-bold">+</span>
                        <div class="flex items-center gap-1">
                          <div
                            class="w-5 h-8 border border-white/40 rounded-full relative"
                          >
                            <div
                              class="w-0.5 h-2 bg-red-400 rounded-full absolute top-1.5 left-1/2 -translate-x-1/2"
                            ></div>
                          </div>
                          <div class="flex flex-col text-[10px] text-white/50">
                            <span>↑</span>
                            <span>↓</span>
                          </div>
                        </div>
                      </div>
                    </td>
                    <td class="py-3 border-b border-white/5 text-white/70">
                      ${f("help_modal.action_ratio_change")}
                    </td>
                  </tr>
                  <tr class="hover:bg-white/5 transition-colors">
                    <td class="py-3 pl-4 border-b border-white/5">
                      <div class="inline-flex items-center gap-2">
                        ${this.renderKey(t.altKey)}
                        <span class="text-white/40 font-bold">+</span>
                        ${this.renderKey(t.resetGfx)}
                      </div>
                    </td>
                    <td class="py-3 border-b border-white/5 text-white/70">
                      ${f("help_modal.action_reset_gfx")}
                    </td>
                  </tr>
                  <tr class="hover:bg-white/5 transition-colors">
                    <td class="py-3 pl-4 border-b border-white/5">
                      <div
                        class="w-5 h-8 border border-white/40 rounded-full relative"
                      >
                        <div
                          class="w-0.5 h-2 bg-red-400 rounded-full absolute top-1.5 left-1/2 -translate-x-1/2"
                        ></div>
                      </div>
                    </td>
                    <td class="py-3 border-b border-white/5 text-white/70">
                      ${f("help_modal.action_auto_upgrade")}
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </section>

          <!-- UI Interface Section -->
          <section class="mb-8 mt-8">
            <div class="flex items-center gap-3 mb-6">
              <div class="text-blue-400">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect>
                  <line x1="3" y1="9" x2="21" y2="9"></line>
                  <line x1="9" y1="21" x2="9" y2="9"></line>
                </svg>
              </div>
              <h3
                class="text-xl font-bold uppercase tracking-widest text-white/90"
              >
                ${f("help_modal.ui_section")}
              </h3>
              <div
                class="flex-1 h-px bg-gradient-to-r from-blue-500/50 to-transparent"
              ></div>
            </div>

            <div class="grid grid-cols-1 gap-6">
              <!-- Leaderboard -->
              <div
                class="bg-black/20 rounded-xl border border-white/10 p-6 flex flex-col md:flex-row gap-6 hover:bg-white/5 transition-colors"
              >
                <div class="flex flex-col items-center gap-3 shrink-0">
                  <span
                    class="text-xs font-bold uppercase tracking-wider text-blue-300"
                    >${f("help_modal.ui_leaderboard")}</span
                  >
                  <img
                    src="/images/helpModal/leaderboard2.webp"
                    alt="Leaderboard"
                    class="rounded-lg shadow-lg border border-white/20 max-w-[200px]"
                    loading="lazy"
                  />
                </div>
                <div
                  class="flex items-center text-white/70 text-sm leading-relaxed"
                >
                  <p>${f("help_modal.ui_leaderboard_desc")}</p>
                </div>
              </div>

              <!-- Control Panel -->
              <div
                class="bg-black/20 rounded-xl border border-white/10 p-6 flex flex-col md:flex-row gap-6 hover:bg-white/5 transition-colors"
              >
                <div class="flex flex-col items-center gap-3 shrink-0">
                  <span
                    class="text-xs font-bold uppercase tracking-wider text-blue-300"
                    >${f("help_modal.ui_control")}</span
                  >
                  <img
                    src="/images/helpModal/controlPanel.webp"
                    alt="Control Panel"
                    class="rounded-lg shadow-lg border border-white/20 max-w-[200px]"
                    loading="lazy"
                  />
                </div>
                <div class="flex flex-col justify-center text-white/70 text-sm">
                  <p class="mb-4 leading-relaxed">
                    ${f("help_modal.ui_control_desc")}
                  </p>
                  <ul class="space-y-2 list-disc pl-4 text-white/60">
                    <li>${f("help_modal.ui_gold")}</li>
                    <li>${f("help_modal.ui_attack_ratio")}</li>
                  </ul>
                </div>
              </div>

              <!-- Events Panel -->
              <div
                class="bg-black/20 rounded-xl border border-white/10 p-6 flex flex-col md:flex-row gap-6 hover:bg-white/5 transition-colors"
              >
                <div class="flex flex-col items-center gap-3 shrink-0">
                  <span
                    class="text-xs font-bold uppercase tracking-wider text-blue-300"
                    >${f("help_modal.ui_events")}</span
                  >
                  <div class="flex flex-col gap-2">
                    <img
                      src="/images/helpModal/eventsPanel.webp"
                      alt="Events"
                      class="rounded-lg shadow-lg border border-white/20 max-w-[200px]"
                      loading="lazy"
                    />
                    <img
                      src="/images/helpModal/eventsPanelAttack.webp"
                      alt="Events Attack"
                      class="rounded-lg shadow-lg border border-white/20 max-w-[200px]"
                      loading="lazy"
                    />
                  </div>
                </div>
                <div class="flex flex-col justify-center text-white/70 text-sm">
                  <p class="mb-4 leading-relaxed">
                    ${f("help_modal.ui_events_desc")}
                  </p>
                  <ul class="space-y-2 list-disc pl-4 text-white/60">
                    <li>${f("help_modal.ui_events_alliance")}</li>
                    <li>${f("help_modal.ui_events_attack")}</li>
                    <li>${f("help_modal.ui_events_quickchat")}</li>
                  </ul>
                </div>
              </div>

              <!-- Options -->
              <div
                class="bg-black/20 rounded-xl border border-white/10 p-6 flex flex-col md:flex-row gap-6 hover:bg-white/5 transition-colors"
              >
                <div class="flex flex-col items-center gap-3 shrink-0">
                  <span
                    class="text-xs font-bold uppercase tracking-wider text-blue-300"
                    >${f("help_modal.ui_options")}</span
                  >
                  <img
                    src="/images/helpModal/options2.webp"
                    alt="Options"
                    class="rounded-lg shadow-lg border border-white/20 max-w-[200px]"
                    loading="lazy"
                  />
                </div>
                <div class="flex flex-col justify-center text-white/70 text-sm">
                  <p class="mb-4 leading-relaxed">
                    ${f("help_modal.ui_options_desc")}
                  </p>
                  <ul class="space-y-2 list-disc pl-4 text-white/60">
                    <li>${f("help_modal.option_pause")}</li>
                    <li>${f("help_modal.option_timer")}</li>
                    <li>${f("help_modal.option_exit")}</li>
                    <li>${f("help_modal.option_settings")}</li>
                  </ul>
                </div>
              </div>

              <!-- Player Overlay -->
              <div
                class="bg-black/20 rounded-xl border border-white/10 p-6 flex flex-col md:flex-row gap-6 hover:bg-white/5 transition-colors"
              >
                <div class="flex flex-col items-center gap-3 shrink-0">
                  <span
                    class="text-xs font-bold uppercase tracking-wider text-blue-300"
                    >${f("help_modal.ui_playeroverlay")}</span
                  >
                  <img
                    src="/images/helpModal/playerInfoOverlay.webp"
                    alt="Player Info"
                    class="rounded-lg shadow-lg border border-white/20 max-w-[200px]"
                    loading="lazy"
                  />
                </div>
                <div
                  class="flex items-center text-white/70 text-sm leading-relaxed"
                >
                  <p>${f("help_modal.ui_playeroverlay_desc")}</p>
                </div>
              </div>
            </div>
          </section>

          <!-- Radial Menu Section -->
          <section class="mb-8">
            <div class="flex items-center gap-3 mb-6">
              <div class="text-blue-400">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <circle cx="12" cy="12" r="10"></circle>
                  <circle cx="12" cy="12" r="3"></circle>
                </svg>
              </div>
              <h3
                class="text-xl font-bold uppercase tracking-widest text-white/90"
              >
                ${f("help_modal.radial_title")}
              </h3>
              <div
                class="flex-1 h-px bg-gradient-to-r from-blue-500/50 to-transparent"
              ></div>
            </div>

            <div
              class="bg-black/20 rounded-xl border border-white/10 p-6 flex flex-col md:flex-row gap-6 hover:bg-white/5 transition-colors"
            >
              <div class="flex flex-col gap-4 shrink-0">
                <img
                  src="/images/helpModal/radialMenu2.webp"
                  alt="Radial Menu"
                  class="rounded-lg shadow-lg border border-white/20 max-w-[200px]"
                  loading="lazy"
                />
                <img
                  src="/images/helpModal/radialMenuAlly.webp"
                  alt="Radial Menu Ally"
                  class="rounded-lg shadow-lg border border-white/20 max-w-[200px]"
                  loading="lazy"
                />
              </div>
              <div class="text-white/70 text-sm">
                <p class="mb-4 leading-relaxed">
                  ${f("help_modal.radial_desc")}
                </p>
                <ul class="space-y-3">
                  <li class="flex items-center gap-3">
                    <img
                      src="/images/BuildIconWhite.svg"
                      class="w-8 h-8 scale-75 origin-left"
                    />
                    <span>${f("help_modal.radial_build")}</span>
                  </li>
                  <li class="flex items-center gap-3">
                    <img
                      src="/images/InfoIcon.svg"
                      class="w-5 h-5 opacity-80"
                      loading="lazy"
                    />
                    <span>${f("help_modal.radial_info")}</span>
                  </li>
                  <li class="flex items-center gap-3">
                    <img
                      src="/images/BoatIconWhite.svg"
                      class="w-8 h-8 scale-75 origin-left"
                    />
                    <span>${f("help_modal.radial_boat")}</span>
                  </li>
                  <li class="flex items-center gap-3">
                    <img
                      src="/images/AllianceIconWhite.svg"
                      class="w-8 h-8 scale-75 origin-left"
                    />
                    <span>${f("help_modal.info_alliance")}</span>
                  </li>
                  <li class="flex items-center gap-3">
                    <img
                      src="/images/TraitorIconWhite.svg"
                      class="w-8 h-8 scale-75 origin-left"
                    />
                    <span>${f("help_modal.ally_betray")}</span>
                  </li>
                  <li class="flex items-center gap-3">
                    <img
                      src="/images/DonateTroopIconWhite.svg"
                      class="w-8 h-8 scale-75 origin-left"
                    />
                    <span
                      >${f("help_modal.radial_donate_troops")}</span
                    >
                  </li>
                  <li class="flex items-center gap-3">
                    <img
                      src="/images/DonateGoldIconWhite.svg"
                      class="w-8 h-8 scale-75 origin-left"
                    />
                    <span
                      >${f("help_modal.radial_donate_gold")}</span
                    >
                  </li>
                </ul>
              </div>
            </div>
          </section>

          <!-- Info/Ally Panels Section -->
          <section class="mb-8">
            <div class="flex items-center gap-3 mb-6">
              <div class="text-blue-400">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <circle cx="12" cy="12" r="10"></circle>
                  <line x1="12" y1="16" x2="12" y2="12"></line>
                  <line x1="12" y1="8" x2="12.01" y2="8"></line>
                </svg>
              </div>
              <h3
                class="text-xl font-bold uppercase tracking-widest text-white/90"
              >
                ${f("help_modal.info_title")}
              </h3>
              <div
                class="flex-1 h-px bg-gradient-to-r from-blue-500/50 to-transparent"
              ></div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <!-- Enemy Info -->
              <div
                class="bg-black/20 rounded-xl border border-white/10 p-6 flex flex-col gap-6 hover:bg-white/5 transition-colors"
              >
                <div class="flex flex-col items-center gap-3">
                  <span
                    class="text-xs font-bold uppercase tracking-wider text-blue-300"
                    >${f("help_modal.info_enemy_panel")}</span
                  >
                  <img
                    src="/images/helpModal/infoMenu2.webp"
                    alt="Enemy Info"
                    class="rounded-lg shadow-lg border border-white/20 max-w-[240px]"
                    loading="lazy"
                  />
                </div>
                <div class="text-white/70 text-sm">
                  <p class="mb-4 leading-relaxed">
                    ${f("help_modal.info_enemy_desc")}
                  </p>
                  <ul class="space-y-3">
                    <li class="flex items-center gap-3">
                      <img
                        src="/images/ChatIconWhite.svg"
                        class="w-8 h-8 scale-75 origin-left"
                      />
                      <span>${f("help_modal.info_chat")}</span>
                    </li>
                    <li class="flex items-center gap-3">
                      <img
                        src="/images/TargetIconWhite.svg"
                        class="w-8 h-8 scale-75 origin-left"
                      />
                      <span>${f("help_modal.info_target")}</span>
                    </li>
                    <li class="flex items-center gap-3">
                      <img
                        src="/images/AllianceIconWhite.svg"
                        class="w-8 h-8 scale-75 origin-left"
                      />
                      <span>${f("help_modal.info_alliance")}</span>
                    </li>
                    <li class="flex items-center gap-3">
                      <img
                        src="/images/EmojiIconWhite.svg"
                        class="w-8 h-8 scale-75 origin-left"
                      />
                      <span>${f("help_modal.info_emoji")}</span>
                    </li>
                    <li class="flex items-center gap-3">
                      <div
                        class="flex items-center justify-center w-8 h-8 opacity-80"
                      >
                        <img
                          src="/images/helpModal/stopTrading.webp"
                          class="w-full h-full object-contain"
                        />
                      </div>
                      <span>${f("help_modal.info_trade")}</span>
                    </li>
                  </ul>
                </div>
              </div>

              <!-- Ally Info -->
              <div
                class="bg-black/20 rounded-xl border border-white/10 p-6 flex flex-col gap-6 hover:bg-white/5 transition-colors"
              >
                <div class="flex flex-col items-center gap-3">
                  <span
                    class="text-xs font-bold uppercase tracking-wider text-blue-300"
                    >${f("help_modal.info_ally_panel")}</span
                  >
                  <img
                    src="/images/helpModal/infoMenu2Ally.webp"
                    alt="Ally Info"
                    class="rounded-lg shadow-lg border border-white/20 max-w-[240px]"
                    loading="lazy"
                  />
                </div>
                <div class="text-white/70 text-sm">
                  <p class="mb-4 leading-relaxed">
                    ${f("help_modal.info_ally_desc")}
                  </p>
                  <ul class="space-y-3">
                    <li class="flex items-center gap-3">
                      <img
                        src="/images/TraitorIconWhite.svg"
                        class="w-8 h-8 scale-75 origin-left"
                      />
                      <span>${f("help_modal.ally_betray")}</span>
                    </li>
                    <li class="flex items-center gap-3">
                      <img
                        src="/images/DonateTroopIconWhite.svg"
                        class="w-8 h-8 scale-75 origin-left"
                      />
                      <span>${f("help_modal.ally_donate")}</span>
                    </li>
                    <li class="flex items-center gap-3">
                      <img
                        src="/images/DonateGoldIconWhite.svg"
                        class="w-8 h-8 scale-75 origin-left"
                      />
                      <span
                        >${f("help_modal.ally_donate_gold")}</span
                      >
                    </li>
                  </ul>
                </div>
              </div>
            </div>
          </section>

          <!-- Build Menu Section -->
          <section class="mb-8">
            <div class="flex items-center gap-3 mb-6">
              <div class="text-blue-400">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path d="M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"></path>
                  <path d="M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2"></path>
                  <path d="M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2"></path>
                </svg>
              </div>
              <h3
                class="text-xl font-bold uppercase tracking-widest text-white/90"
              >
                ${f("help_modal.build_menu_title")}
              </h3>
              <div
                class="flex-1 h-px bg-gradient-to-r from-blue-500/50 to-transparent"
              ></div>
            </div>

            <p class="mb-4 text-white/70 text-sm">
              ${f("help_modal.build_menu_desc")}
            </p>

            <div class="overflow-hidden rounded-xl border border-white/10">
              <table class="w-full border-collapse">
                <thead class="bg-white/10">
                  <tr>
                    <th
                      class="py-3 pl-4 text-left text-xs font-bold uppercase tracking-wider text-blue-300 w-[20%]"
                    >
                      ${f("help_modal.build_name")}
                    </th>
                    <th
                      class="py-3 text-left text-xs font-bold uppercase tracking-wider text-blue-300 w-[8%]"
                    >
                      ${f("help_modal.build_icon")}
                    </th>
                    <th
                      class="py-3 text-left text-xs font-bold uppercase tracking-wider text-blue-300"
                    >
                      ${f("help_modal.build_desc")}
                    </th>
                  </tr>
                </thead>
                <tbody class="text-white/80">
                  <tr class="bg-white/5 hover:bg-white/10 transition-colors">
                    <td class="py-3 pl-4 border-b border-white/5 font-medium">
                      ${f("help_modal.build_city")}
                    </td>
                    <td class="py-3 border-b border-white/5">
                      <img
                        src="/images/CityIconWhite.svg"
                        class="w-8 h-8 scale-75 origin-left"
                      />
                    </td>
                    <td
                      class="py-3 border-b border-white/5 text-white/60 text-sm"
                    >
                      ${f("help_modal.build_city_desc")}
                    </td>
                  </tr>
                  <tr class="bg-white/5 hover:bg-white/10 transition-colors">
                    <td class="py-3 pl-4 border-b border-white/5 font-medium">
                      ${f("help_modal.build_defense")}
                    </td>
                    <td class="py-3 border-b border-white/5">
                      <img
                        src="/images/ShieldIconWhite.svg"
                        class="w-8 h-8 scale-75 origin-left"
                      />
                    </td>
                    <td
                      class="py-3 border-b border-white/5 text-white/60 text-sm"
                    >
                      ${f("help_modal.build_defense_desc")}
                    </td>
                  </tr>
                  <tr class="bg-white/5 hover:bg-white/10 transition-colors">
                    <td class="py-3 pl-4 border-b border-white/5 font-medium">
                      ${f("help_modal.build_port")}
                    </td>
                    <td class="py-3 border-b border-white/5">
                      <img
                        src="/images/PortIcon.svg"
                        class="w-8 h-8 scale-75 origin-left"
                      />
                    </td>
                    <td
                      class="py-3 border-b border-white/5 text-white/60 text-sm"
                    >
                      ${f("help_modal.build_port_desc")}
                    </td>
                  </tr>
                  <tr class="bg-white/5 hover:bg-white/10 transition-colors">
                    <td class="py-3 pl-4 border-b border-white/5 font-medium">
                      ${f("help_modal.build_factory")}
                    </td>
                    <td class="py-3 border-b border-white/5">
                      <img
                        src="/images/FactoryIconWhite.svg"
                        class="w-8 h-8 scale-75 origin-left"
                      />
                    </td>
                    <td
                      class="py-3 border-b border-white/5 text-white/60 text-sm"
                    >
                      ${f("help_modal.build_factory_desc")}
                    </td>
                  </tr>
                  <tr class="bg-white/5 hover:bg-white/10 transition-colors">
                    <td class="py-3 pl-4 border-b border-white/5 font-medium">
                      ${f("help_modal.build_warship")}
                    </td>
                    <td class="py-3 border-b border-white/5">
                      <img
                        src="/images/BattleshipIconWhite.svg"
                        class="w-8 h-8 scale-75 origin-left"
                      />
                    </td>
                    <td
                      class="py-3 border-b border-white/5 text-white/60 text-sm"
                    >
                      ${f("help_modal.build_warship_desc")}
                    </td>
                  </tr>
                  <tr class="bg-white/5 hover:bg-white/10 transition-colors">
                    <td class="py-3 pl-4 border-b border-white/5 font-medium">
                      ${f("help_modal.build_silo")}
                    </td>
                    <td class="py-3 border-b border-white/5">
                      <img
                        src="/images/MissileSiloIconWhite.svg"
                        class="w-8 h-8 scale-75 origin-left"
                      />
                    </td>
                    <td
                      class="py-3 border-b border-white/5 text-white/60 text-sm"
                    >
                      ${f("help_modal.build_silo_desc")}
                    </td>
                  </tr>
                  <tr class="bg-white/5 hover:bg-white/10 transition-colors">
                    <td class="py-3 pl-4 border-b border-white/5 font-medium">
                      ${f("help_modal.build_sam")}
                    </td>
                    <td class="py-3 border-b border-white/5">
                      <img
                        src="/images/SamLauncherIconWhite.svg"
                        class="w-8 h-8 scale-75 origin-left"
                      />
                    </td>
                    <td
                      class="py-3 border-b border-white/5 text-white/60 text-sm"
                    >
                      ${f("help_modal.build_sam_desc")}
                    </td>
                  </tr>
                  <tr class="bg-white/5 hover:bg-white/10 transition-colors">
                    <td class="py-3 pl-4 border-b border-white/5 font-medium">
                      ${f("help_modal.build_atom")}
                    </td>
                    <td class="py-3 border-b border-white/5">
                      <img
                        src="/images/NukeIconWhite.svg"
                        class="w-8 h-8 scale-75 origin-left"
                      />
                    </td>
                    <td
                      class="py-3 border-b border-white/5 text-white/60 text-sm"
                    >
                      ${f("help_modal.build_atom_desc")}
                    </td>
                  </tr>
                  <tr class="bg-white/5 hover:bg-white/10 transition-colors">
                    <td class="py-3 pl-4 border-b border-white/5 font-medium">
                      ${f("help_modal.build_hydrogen")}
                    </td>
                    <td class="py-3 border-b border-white/5">
                      <img
                        src="/images/MushroomCloudIconWhite.svg"
                        class="w-8 h-8 scale-75 origin-left"
                      />
                    </td>
                    <td
                      class="py-3 border-b border-white/5 text-white/60 text-sm"
                    >
                      ${f("help_modal.build_hydrogen_desc")}
                    </td>
                  </tr>
                  <tr class="bg-white/5 hover:bg-white/10 transition-colors">
                    <td class="py-3 pl-4 border-b border-white/5 font-medium">
                      ${f("help_modal.build_mirv")}
                    </td>
                    <td class="py-3 border-b border-white/5">
                      <img
                        src="/images/MIRVIcon.svg"
                        class="w-8 h-8 scale-75 origin-left"
                      />
                    </td>
                    <td
                      class="py-3 border-b border-white/5 text-white/60 text-sm"
                    >
                      ${f("help_modal.build_mirv_desc")}
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </section>

          <!-- Player Icons Section -->
          <section class="mb-4">
            <div class="flex items-center gap-3 mb-6">
              <div class="text-blue-400">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  width="24"
                  height="24"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                >
                  <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                  <circle cx="12" cy="7" r="4"></circle>
                </svg>
              </div>
              <h3
                class="text-xl font-bold uppercase tracking-widest text-white/90"
              >
                ${f("help_modal.player_icons")}
              </h3>
              <div
                class="flex-1 h-px bg-gradient-to-r from-blue-500/50 to-transparent"
              ></div>
            </div>

            <p class="mb-6 text-white/70 text-sm">
              ${f("help_modal.icon_desc")}
            </p>

            <div class="grid grid-cols-2 md:grid-cols-3 gap-6">
              <!-- Crown -->
              <div
                class="bg-black/20 rounded-xl border border-white/10 p-4 flex flex-col items-center gap-3 hover:bg-white/5 transition-colors"
              >
                <img
                  src="/images/helpModal/crown.webp"
                  alt="Rank 1"
                  class="rounded shadow-lg border border-white/10 h-24 w-auto object-contain"
                  loading="lazy"
                />
                <span
                  class="text-xs font-bold uppercase tracking-wider text-white text-center"
                >
                  ${f("help_modal.icon_crown")}
                </span>
              </div>

              <!-- Traitor -->
              <div
                class="bg-black/20 rounded-xl border border-white/10 p-4 flex flex-col items-center gap-3 hover:bg-white/5 transition-colors"
              >
                <img
                  src="/images/helpModal/traitor2.webp"
                  alt="Traitor"
                  class="rounded shadow-lg border border-white/10 h-24 w-auto object-contain"
                  loading="lazy"
                />
                <span
                  class="text-xs font-bold uppercase tracking-wider text-white text-center"
                >
                  ${f("help_modal.icon_traitor")}
                </span>
              </div>

              <!-- Ally -->
              <div
                class="bg-black/20 rounded-xl border border-white/10 p-4 flex flex-col items-center gap-3 hover:bg-white/5 transition-colors"
              >
                <img
                  src="/images/helpModal/ally2.webp"
                  alt="Ally"
                  class="rounded shadow-lg border border-white/10 h-24 w-auto object-contain"
                  loading="lazy"
                />
                <span
                  class="text-xs font-bold uppercase tracking-wider text-white text-center"
                >
                  ${f("help_modal.icon_ally")}
                </span>
              </div>

              <!-- Embargo -->
              <div
                class="bg-black/20 rounded-xl border border-white/10 p-4 flex flex-col items-center gap-3 hover:bg-white/5 transition-colors"
              >
                <img
                  src="/images/helpModal/embargo.webp"
                  alt="Embargo"
                  class="rounded shadow-lg border border-white/10 h-24 w-auto object-contain"
                  loading="lazy"
                />
                <span
                  class="text-xs font-bold uppercase tracking-wider text-white text-center"
                >
                  ${f("help_modal.icon_embargo")}
                </span>
              </div>

              <!-- Alliance Request -->
              <div
                class="bg-black/20 rounded-xl border border-white/10 p-4 flex flex-col items-center gap-3 hover:bg-white/5 transition-colors"
              >
                <img
                  src="/images/helpModal/allianceRequest.webp"
                  alt="Request"
                  class="rounded shadow-lg border border-white/10 h-24 w-auto object-contain"
                  loading="lazy"
                />
                <span
                  class="text-xs font-bold uppercase tracking-wider text-white text-center"
                >
                  ${f("help_modal.icon_request")}
                </span>
              </div>
            </div>
          </section>
        </div>
      </div>
    `;return this.inline?e:v`
      <o-modal
        id="helpModal"
        title="Instructions"
        ?inline=${this.inline}
        ?hideHeader=${!0}
        ?hideCloseButton=${!0}
      >
        ${e}
      </o-modal>
    `}openTroubleshooting(){const t=document.querySelector("troubleshooting-modal");if(!t||!(t instanceof Va)){console.warn("Troubleshooting modal element not found");return}t.open()}onOpen(){this.keybinds=this.getKeybinds(),this.videoIframe&&(this.videoIframe.src=m0)}onClose(){this.videoIframe&&(this.videoIframe.src="")}};$f([M()],Wa.prototype,"keybinds",2);$f([Vt("#tutorial-video-iframe")],Wa.prototype,"videoIframe",2);Wa=$f([F("help-modal")],Wa);var gR=Object.defineProperty,mR=Object.getOwnPropertyDescriptor,wi=(t,e,r,i)=>{for(var n=i>1?void 0:i?mR(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&gR(e,r,n),n};let jr=class extends V{constructor(){super(...arguments),this.value=0,this.min=0,this.max=400,this.step=1,this.labelKey="",this.disabledKey="",this.isEditing=!1}createRenderRoot(){return this}dispatchValueChange(){this.dispatchEvent(new CustomEvent("value-changed",{detail:{value:this.value},bubbles:!0,composed:!0}))}handleSliderInput(t){const e=t.target;this.value=e.valueAsNumber}handleSliderChange(t){const e=t.target;this.value=e.valueAsNumber,this.dispatchValueChange()}handleNumberInput(t){let r=t.target.valueAsNumber;isNaN(r)&&(r=this.min),r<this.min&&(r=this.min),r>this.max&&(r=this.max),this.value=r}handleNumberComplete(){this.dispatchValueChange()}handleNumberKeyDown(t){t.key==="Enter"&&(this.isEditing=!1,this.handleNumberComplete())}enableEditing(){this.isEditing=!0,this.updateComplete.then(()=>this.numberInput?.focus())}render(){const t=this.max===this.min?0:(this.value-this.min)/(this.max-this.min)*100;return v`
      <div
        class="flex flex-col items-center justify-center gap-1 w-full text-center"
      >
        <input
          type="range"
          .min=${this.min}
          .max=${this.max}
          .step=${this.step}
          .valueAsNumber=${this.value}
          style="background: linear-gradient(to right, #3b82f6 0%, #3b82f6 ${t}%, rgba(255, 255, 255, 0.15) ${t}%, rgba(255, 255, 255, 0.15) 100%); background-size: 100% 6px; background-repeat: no-repeat; background-position: center; border-radius: 9999px;"
          class="w-full h-6 p-0 m-0 bg-transparent appearance-none cursor-pointer focus:outline-none 
                 [&::-webkit-slider-runnable-track]:w-full [&::-webkit-slider-runnable-track]:h-[6px] [&::-webkit-slider-runnable-track]:cursor-pointer [&::-webkit-slider-runnable-track]:bg-transparent [&::-webkit-slider-runnable-track]:rounded-full [&::-webkit-slider-runnable-track]:transition-colors
                 [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:h-[18px] [&::-webkit-slider-thumb]:w-[18px] [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-blue-500 [&::-webkit-slider-thumb]:cursor-pointer [&::-webkit-slider-thumb]:-mt-[6px] [&::-webkit-slider-thumb]:shadow-[0_0_0_4px_rgba(59,130,246,0.2)] [&::-webkit-slider-thumb]:transition-all active:[&::-webkit-slider-thumb]:scale-110 active:[&::-webkit-slider-thumb]:shadow-[0_0_0_6px_rgba(59,130,246,0.3)]
                 [&::-moz-range-track]:w-full [&::-moz-range-track]:h-[6px] [&::-moz-range-track]:cursor-pointer [&::-moz-range-track]:bg-transparent [&::-moz-range-track]:rounded-full [&::-moz-range-track]:transition-colors
                 [&::-moz-range-thumb]:h-[18px] [&::-moz-range-thumb]:w-[18px] [&::-moz-range-thumb]:border-none [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-blue-500 [&::-moz-range-thumb]:cursor-pointer [&::-moz-range-thumb]:shadow-[0_0_0_4px_rgba(59,130,246,0.2)] [&::-moz-range-thumb]:transition-all active:[&::-moz-range-thumb]:scale-110 active:[&::-moz-range-thumb]:shadow-[0_0_0_6px_rgba(59,130,246,0.3)]"
          @input=${this.handleSliderInput}
          @change=${this.handleSliderChange}
        />
        <div
          class="text-xs uppercase font-bold tracking-wider text-center w-full leading-tight mb-1 flex flex-col items-center ${this.value>0?"text-white":"text-white/60"}"
        >
          <span>${this.labelKey?f(this.labelKey):""}</span>
          ${this.isEditing?v`<input
                type="number"
                .min=${this.min}
                .max=${this.max}
                .valueAsNumber=${this.value}
                class="w-[60px] bg-black/60 text-white border border-white/20 text-center rounded text-sm p-1 leading-none font-bold font-inherit mt-1 focus:outline-none focus:border-blue-500"
                @input=${this.handleNumberInput}
                @blur=${()=>{this.isEditing=!1,this.handleNumberComplete()}}
                @keydown=${this.handleNumberKeyDown}
              />`:v`<span
                class="cursor-pointer min-w-[60px] inline-block text-center text-sm font-bold select-none hover:text-white transition-colors mt-1 ${this.value>0?"text-white":"text-white/60"}"
                role="button"
                tabindex="0"
                @click=${this.enableEditing}
                @keydown=${e=>{(e.key==="Enter"||e.key===" ")&&(this.enableEditing(),e.preventDefault())}}
              >
                ${this.value===0&&this.disabledKey?f(this.disabledKey):this.value}
              </span>`}
        </div>
      </div>
    `}};wi([L({type:Number})],jr.prototype,"value",2);wi([L({type:Number})],jr.prototype,"min",2);wi([L({type:Number})],jr.prototype,"max",2);wi([L({type:Number})],jr.prototype,"step",2);wi([L({type:String})],jr.prototype,"labelKey",2);wi([L({type:String})],jr.prototype,"disabledKey",2);wi([M()],jr.prototype,"isEditing",2);wi([Vt("input[type='number']")],jr.prototype,"numberInput",2);jr=wi([F("fluent-slider")],jr);function bR(t,e){return t===0?0:e?Math.max(1,Math.floor(t*.25)):t}function vR(t,e,r=i5(t.length,e.length)){const i=new Map,n=new Map,a=new Map,s=[];for(const u of t)u.clan?(a.has(u.clan)||a.set(u.clan,[]),a.get(u.clan).push(u)):s.push(u);const o=Array.from(a.entries()).sort((u,p)=>p[1].length-u[1].length);for(const[u,p]of o){let d=null,h=0;for(const g of e){const y=n.get(g)??0;d!==null&&h<=y||(h=y,d=g)}if(d!==null){for(const g of p)h<r?(h++,i.set(g,d)):i.set(g,"kicked");n.set(d,h)}}let l=s.filter(u=>u.playerType===ge.Nation);l.length>0&&(l=new Pn(co(l[0].id)).shuffleArray(l));const c=s.filter(u=>u.playerType!==ge.Nation);for(const u of c.concat(l)){let p=null,d=0;for(const h of e){const g=n.get(h)??0;p!==null&&d<=g||(d=g,p=h)}p!==null&&(n.set(p,d+1),i.set(u,p))}return i}function yR(t,e,r){const i=i5(t.length+r,e.length);return vR(t,e,i)}function i5(t,e){return Math.ceil(t/e)}var wR=Object.defineProperty,xR=Object.getOwnPropertyDescriptor,ir=(t,e,r,i)=>{for(var n=i>1?void 0:i?xR(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&wR(e,r,n),n};let Ft=class extends V{constructor(){super(...arguments),this.gameMode=pe.FFA,this.clients=[],this.teamPreview=[],this.teamMaxSize=0,this.lobbyCreatorClientID="",this.currentClientID="",this.teamCount=2,this.nationCount=0,this.disableNations=!1,this.isCompactMap=!1,this.theme=new Rp,this.showTeamColors=!1,this.userSettings=new Gt}willUpdate(t){if(t.has("gameMode")||t.has("clients")||t.has("teamCount")||t.has("nationCount")||t.has("disableNations")||t.has("isCompactMap")){const e=this.getTeamList();this.computeTeamPreview(e),this.showTeamColors=e.length<=7}}render(){return v`
      <div class="border-t border-white/10 pt-6">
        <div class="flex justify-between items-center mb-4">
          <div
            class="text-xs font-bold text-white/40 uppercase tracking-widest"
          >
            ${this.clients.length}
            ${this.clients.length===1?f("host_modal.player"):f("host_modal.players")}
            <span style="margin: 0 8px;">•</span>
            ${this.getEffectiveNationCount()}
            ${this.getEffectiveNationCount()===1?f("host_modal.nation_player"):f("host_modal.nation_players")}
          </div>
        </div>
        <div
          class="players-list block rounded-lg border border-white/10 bg-white/5 p-2"
        >
          ${this.gameMode===pe.Team?this.renderTeamMode():this.renderFreeForAll()}
        </div>
      </div>
    `}createRenderRoot(){return this}renderTeamMode(){const t=this.teamPreview.filter(r=>r.players.length>0||r.team===$e.Nations),e=this.teamPreview.filter(r=>r.players.length===0&&r.team!==$e.Nations);return v` <div
      class="flex flex-col md:flex-row gap-3 md:gap-4 items-stretch"
    >
      <div
        class="w-full md:w-60 bg-gray-800 p-2 border border-gray-700 rounded-lg"
      >
        <div class="font-bold mb-1.5 text-gray-300 text-sm">
          ${f("host_modal.players")}
        </div>
        ${fn(this.clients,r=>r.clientID??r.username,r=>{const i=this.displayUsername(r);return v`<div
              class="px-2 py-1 rounded-sm bg-gray-700/70 mb-1 text-xs text-white"
            >
              ${i}
            </div>`})}
      </div>
      <div class="flex-1 flex flex-col gap-3 md:gap-4 md:pr-1">
        <div>
          <div class="font-semibold text-gray-200 mb-1 text-sm">
            ${f("host_modal.assigned_teams")}
          </div>
          <div class="w-full grid grid-cols-1 sm:grid-cols-2 gap-2 md:gap-3">
            ${fn(t,r=>r.team,r=>this.renderTeamCard(r,!1))}
          </div>
        </div>
        <div>
          ${e.length>0?v`<div class="font-semibold text-gray-200 mb-1 text-sm">
                ${f("host_modal.empty_teams")}
              </div>`:""}
          <div class="w-full grid grid-cols-1 sm:grid-cols-2 gap-2 md:gap-3">
            ${fn(e,r=>r.team,r=>this.renderTeamCard(r,!0))}
          </div>
        </div>
      </div>
    </div>`}renderFreeForAll(){return v`${fn(this.clients,t=>t.clientID??t.username,t=>{const e=this.displayUsername(t);return v`<span class="player-tag">
          <span class="text-white">${e}</span>
          ${t.clientID===this.lobbyCreatorClientID?v`<span class="host-badge"
                >(${f("host_modal.host_badge")})</span
              >`:this.onKickPlayer?v`<button
                  class="remove-player-btn"
                  @click=${()=>this.onKickPlayer?.(t.clientID)}
                  aria-label=${f("host_modal.remove_player",{username:e})}
                >
                  ×
                </button>`:v``}
        </span>`})} `}renderTeamCard(t,e=!1){const r=this.getEffectiveNationCount(),i=t.team===$e.Nations?r:t.players.length,n=t.team===$e.Nations?r:this.teamMaxSize;return v`
      <div class="bg-gray-800 border border-gray-700 rounded-xl flex flex-col">
        <div
          class="px-2 py-1 font-bold flex items-center justify-between text-white rounded-t-xl text-[13px] gap-2 bg-gray-700/70"
        >
          ${this.showTeamColors?v` <span
                class="inline-block w-2.5 h-2.5 rounded-full border-2 border-white/90 shadow-inner bg-(--bg)"
                style="--bg:${this.teamHeaderColor(t.team)};"
              ></span>`:null}
          <span class="truncate">${t.team}</span>
          <span class="text-white/90">${i}/${n}</span>
        </div>
        <div class="p-2 ${e?"":"flex flex-col gap-1.5"}">
          ${e?v`<div class="text-[11px] italic text-gray-400">
                ${f("host_modal.empty_team")}
              </div>`:fn(t.players,a=>a.clientID??a.username,a=>{const s=this.displayUsername(a);return v` <div
                    class="bg-gray-700/70 px-2 py-1 rounded-sm text-xs flex items-center justify-between"
                  >
                    <span class="truncate text-white">${s}</span>
                    ${a.clientID===this.lobbyCreatorClientID?v`<span class="ml-2 text-[11px] text-green-300"
                          >(${f("host_modal.host_badge")})</span
                        >`:this.onKickPlayer?v`<button
                            class="remove-player-btn ml-2"
                            @click=${()=>this.onKickPlayer?.(a.clientID)}
                            aria-label=${f("host_modal.remove_player",{username:s})}
                          >
                            ×
                          </button>`:v``}
                  </div>`})}
        </div>
      </div>
    `}getTeamList(){if(this.gameMode!==pe.Team)return[];const t=this.clients.length+this.getEffectiveNationCount(),e=this.teamCount;if(e===Ct)return[$e.Humans,$e.Nations];let r;return typeof e=="number"?r=Math.max(2,e):r=Math.max(2,Math.ceil(t/(e===En?2:e===Mn?3:e===In?4:2))),r<8?[$e.Red,$e.Blue,$e.Yellow,$e.Green,$e.Purple,$e.Orange,$e.Teal].slice(0,r):Array.from({length:r},(i,n)=>`Team ${n+1}`)}teamHeaderColor(t){try{return this.theme.teamColor(t).toHex()}catch{return"#3b3f46"}}computeTeamPreview(t=[]){if(this.gameMode!==pe.Team){this.teamPreview=[],this.teamMaxSize=0;return}if(this.teamCount===Ct){this.teamMaxSize=this.clients.length,this.teamPreview=[{team:$e.Humans,players:[...this.clients]},{team:$e.Nations,players:[]}];return}const e=this.clients.map(n=>new n3(n.username,ge.Human,n.clientID,n.clientID)),r=yR(e,t,this.getEffectiveNationCount()),i=new Map;for(const n of t)i.set(n,[]);for(const[n,a]of r.entries()){if(a==="kicked")continue;const s=i.get(a);if(!s)continue;const o=this.clients.find(l=>l.clientID===n.clientID);o&&s.push(o)}this.teamCount===En?this.teamMaxSize=2:this.teamCount===Mn?this.teamMaxSize=3:this.teamCount===In?this.teamMaxSize=4:this.teamMaxSize=Math.max(1,Math.ceil((this.clients.length+this.getEffectiveNationCount())/t.length)),this.teamPreview=t.map(n=>({team:n,players:i.get(n)??[]}))}getEffectiveNationCount(){return this.disableNations?0:this.gameMode===pe.Team&&this.teamCount===Ct?this.clients.length:bR(this.nationCount,this.isCompactMap)}displayUsername(t){return!this.userSettings.anonymousNames()||this.currentClientID&&t.clientID===this.currentClientID?t.username:Py(t.username,ge.Human)??t.username}};ir([L({type:String})],Ft.prototype,"gameMode",2);ir([L({type:Array})],Ft.prototype,"clients",2);ir([M()],Ft.prototype,"teamPreview",2);ir([M()],Ft.prototype,"teamMaxSize",2);ir([L({type:String})],Ft.prototype,"lobbyCreatorClientID",2);ir([L({type:String})],Ft.prototype,"currentClientID",2);ir([L({attribute:"team-count"})],Ft.prototype,"teamCount",2);ir([L({type:Function})],Ft.prototype,"onKickPlayer",2);ir([L({type:Number})],Ft.prototype,"nationCount",2);ir([L({type:Boolean})],Ft.prototype,"disableNations",2);ir([L({type:Boolean})],Ft.prototype,"isCompactMap",2);ir([M()],Ft.prototype,"showTeamColors",2);Ft=ir([F("lobby-player-view")],Ft);var _R=Object.defineProperty,kR=Object.getOwnPropertyDescriptor,Kr=(t,e,r,i)=>{for(var n=i>1?void 0:i?kR(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&_R(e,r,n),n};let Cr=class extends V{constructor(){super(...arguments),this.mapKey="",this.selected=!1,this.translation="",this.showMedals=!1,this.wins=new Set,this.mapWebpPath=null,this.mapName=null,this.isLoading=!0,this.hasNations=!0}createRenderRoot(){return this}connectedCallback(){super.connectedCallback(),this.loadMapData()}async loadMapData(){if(this.mapKey)try{this.isLoading=!0;const t=Ne[this.mapKey],e=Ln.getMapData(t);this.mapWebpPath=await e.webpPath();const r=await e.manifest();this.mapName=r.name,this.hasNations=Array.isArray(r.nations)&&r.nations.length>0}catch(t){console.error("Failed to load map data:",t)}finally{this.isLoading=!1}}handleKeydown(t){(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),t.target.click())}render(){return v`
      <div
        role="button"
        tabindex="0"
        aria-selected="${this.selected}"
        aria-label="${this.translation??this.mapName??this.mapKey}"
        @keydown="${this.handleKeydown}"
        class="w-full h-full p-3 flex flex-col items-center justify-between rounded-xl border cursor-pointer transition-all duration-200 gap-3 group ${this.selected?"bg-blue-500/20 border-blue-500/50 shadow-[0_0_15px_rgba(59,130,246,0.3)]":"bg-white/5 border-white/10 hover:bg-white/10 hover:border-white/20 hover:-translate-y-1 active:scale-95"}"
      >
        ${this.isLoading?v`<div
              class="w-full aspect-[2/1] text-white/40 transition-transform duration-200 rounded-lg bg-black/20 text-xs font-bold uppercase tracking-wider flex items-center justify-center animate-pulse"
            >
              ${f("map_component.loading")}
            </div>`:this.mapWebpPath?v`<div
                class="w-full aspect-[2/1] relative overflow-hidden rounded-lg bg-black/20"
              >
                <img
                  src="${this.mapWebpPath}"
                  alt="${this.translation||this.mapName}"
                  class="w-full h-full object-cover ${this.selected?"opacity-100":"opacity-80"} group-hover:opacity-100 transition-opacity duration-200"
                />
              </div>`:v`<div
                class="w-full aspect-[2/1] text-red-400 transition-transform duration-200 rounded-lg bg-red-500/10 text-xs font-bold uppercase tracking-wider flex items-center justify-center"
              >
                ${f("map_component.error")}
              </div>`}
        ${this.showMedals&&this.hasNations?v`<div class="flex gap-1 justify-center w-full">
              ${this.renderMedals()}
            </div>`:null}
        <div
          class="text-xs font-bold text-white uppercase tracking-wider text-center leading-tight break-words hyphens-auto"
        >
          ${this.translation||this.mapName}
        </div>
      </div>
    `}renderMedals(){const t=[Ce.Easy,Ce.Medium,Ce.Hard,Ce.Impossible],e={[Ce.Easy]:"var(--medal-easy)",[Ce.Medium]:"var(--medal-medium)",[Ce.Hard]:"var(--medal-hard)",[Ce.Impossible]:"var(--medal-impossible)"},r=this.readWins();return t.map(i=>{const n=r.has(i),a="url('/images/MedalIconWhite.svg') no-repeat center / contain";return v`<div
        class="w-5 h-5 ${n?"opacity-100":"opacity-25"}"
        style="background-color:${e[i]}; mask: ${a}; -webkit-mask: ${a};"
        title=${f(`difficulty.${i.toLowerCase()}`)}
      ></div>`})}readWins(){return this.wins??new Set}};Kr([L({type:String})],Cr.prototype,"mapKey",2);Kr([L({type:Boolean})],Cr.prototype,"selected",2);Kr([L({type:String})],Cr.prototype,"translation",2);Kr([L({type:Boolean})],Cr.prototype,"showMedals",2);Kr([L({attribute:!1})],Cr.prototype,"wins",2);Kr([M()],Cr.prototype,"mapWebpPath",2);Kr([M()],Cr.prototype,"mapName",2);Kr([M()],Cr.prototype,"isLoading",2);Kr([M()],Cr.prototype,"hasNations",2);Cr=Kr([F("map-display")],Cr);const SR=""+new URL("../images/RandomMap.webp",import.meta.url).href;var AR=Object.defineProperty,CR=Object.getOwnPropertyDescriptor,xi=(t,e,r,i)=>{for(var n=i>1?void 0:i?CR(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&AR(e,r,n),n};const o1=[Ne.World,Ne.Europe,Ne.NorthAmerica,Ne.SouthAmerica,Ne.Asia,Ne.Africa,Ne.Japan];let Gr=class extends V{constructor(){super(...arguments),this.selectedMap=Ne.World,this.useRandomMap=!1,this.showMedals=!1,this.randomMapDivider=!1,this.mapWins=new Map,this.showAllMaps=!1,this.handleSelectRandomMap=()=>{this.onSelectRandom?.()}}createRenderRoot(){return this}handleMapSelection(t){this.onSelectMap?.(t)}getWins(t){return this.mapWins?.get(t)??new Set}renderMapCard(t){const e=Object.entries(Ne).find(([r,i])=>i===t)?.[0];return v`
      <div
        @click=${()=>this.handleMapSelection(t)}
        class="cursor-pointer transition-transform duration-200 active:scale-95"
      >
        <map-display
          .mapKey=${e}
          .selected=${!this.useRandomMap&&this.selectedMap===t}
          .showMedals=${this.showMedals}
          .wins=${this.getWins(t)}
          .translation=${f(`map.${e?.toLowerCase()}`)}
        ></map-display>
      </div>
    `}renderAllMaps(){const t=Object.entries(J_);return v`<div class="space-y-8">
      ${t.map(([e,r])=>v`
          <div class="w-full">
            <h4
              class="text-xs font-bold text-white/40 uppercase tracking-widest mb-4 pl-2"
            >
              ${f(`map_categories.${e}`)}
            </h4>
            <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
              ${r.map(i=>this.renderMapCard(i))}
            </div>
          </div>
        `)}
    </div>`}renderFeaturedMaps(){let t=o1;return t.includes(this.selectedMap)||(t=[this.selectedMap,...o1]),v`<div class="w-full">
      <h4
        class="text-xs font-bold text-white/40 uppercase tracking-widest mb-4 pl-2"
      >
        ${f("map_categories.featured")}
      </h4>
      <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
        ${t.map(e=>this.renderMapCard(e))}
      </div>
    </div>`}render(){return v`
      <div class="space-y-8">
        <div class="w-full">
          <div
            role="tablist"
            aria-label="${f("map.map")}"
            class="grid grid-cols-2 gap-2 rounded-xl border border-white/10 bg-black/20 p-1"
          >
            <button
              type="button"
              role="tab"
              aria-selected=${!this.showAllMaps}
              class="px-3 py-2 rounded-lg text-xs font-bold uppercase tracking-wider transition-all ${this.showAllMaps?"text-white/60 hover:text-white":"bg-blue-500/20 text-blue-100 shadow-[0_0_12px_rgba(59,130,246,0.2)]"}"
              @click=${()=>this.showAllMaps=!1}
            >
              ${f("map.featured")}
            </button>
            <button
              type="button"
              role="tab"
              aria-selected=${this.showAllMaps}
              class="px-3 py-2 rounded-lg text-xs font-bold uppercase tracking-wider transition-all ${this.showAllMaps?"bg-blue-500/20 text-blue-100 shadow-[0_0_12px_rgba(59,130,246,0.2)]":"text-white/60 hover:text-white"}"
              @click=${()=>this.showAllMaps=!0}
            >
              ${f("map.all")}
            </button>
          </div>
        </div>
        ${this.showAllMaps?this.renderAllMaps():this.renderFeaturedMaps()}
        <div
          class="w-full ${this.randomMapDivider?"pt-4 border-t border-white/5":""}"
        >
          <h4
            class="text-xs font-bold text-white/40 uppercase tracking-widest mb-4 pl-2"
          >
            ${f("map_categories.special")}
          </h4>
          <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
            <button
              class="relative group rounded-xl border transition-all duration-200 overflow-hidden flex flex-col items-stretch ${this.useRandomMap?"bg-blue-500/20 border-blue-500/50 shadow-[0_0_15px_rgba(59,130,246,0.3)]":"bg-white/5 border-white/10 hover:bg-white/10 hover:border-white/20"}"
              @click=${this.handleSelectRandomMap}
            >
              <div
                class="aspect-[2/1] w-full relative overflow-hidden bg-black/20"
              >
                <img
                  src=${SR}
                  alt=${f("map.random")}
                  class="w-full h-full object-cover opacity-60 group-hover:opacity-100 transition-opacity"
                />
              </div>
              <div class="p-3 text-center border-t border-white/5">
                <div
                  class="text-xs font-bold text-white uppercase tracking-wider break-words hyphens-auto"
                >
                  ${f("map.random")}
                </div>
              </div>
            </button>
          </div>
        </div>
      </div>
    `}};xi([L({type:String})],Gr.prototype,"selectedMap",2);xi([L({type:Boolean})],Gr.prototype,"useRandomMap",2);xi([L({type:Boolean})],Gr.prototype,"showMedals",2);xi([L({type:Boolean})],Gr.prototype,"randomMapDivider",2);xi([L({attribute:!1})],Gr.prototype,"mapWins",2);xi([L({attribute:!1})],Gr.prototype,"onSelectMap",2);xi([L({attribute:!1})],Gr.prototype,"onSelectRandom",2);xi([M()],Gr.prototype,"showAllMaps",2);Gr=xi([F("map-picker")],Gr);const ga={containerActive:"bg-blue-500/20 border-blue-500/50 shadow-[0_0_15px_rgba(59,130,246,0.2)]",containerInactive:"bg-white/5 border-white/10 hover:bg-white/10 hover:border-white/20 opacity-80",labelBase:"text-[10px] uppercase font-bold tracking-wider text-center w-full leading-tight break-words hyphens-auto",labelActive:"text-white",labelInactive:"text-white/60",input:"w-full text-center rounded bg-black/60 text-white text-sm font-bold border border-white/20 focus:outline-none focus:border-blue-500 p-1 my-1"};function _n({id:t,type:e="number",min:r,max:i,step:n,value:a,ariaLabel:s,placeholder:o,onInput:l,onChange:c,onKeyDown:u,onClick:p,className:d=ga.input}){const h=a??"",g=p??(y=>y.stopPropagation());return v`
    <input
      type=${e}
      id=${t??Ie}
      min=${r??Ie}
      max=${i??Ie}
      step=${n??Ie}
      .value=${String(h)}
      class=${d}
      aria-label=${s??Ie}
      placeholder=${o??Ie}
      @click=${g}
      @input=${l}
      @change=${c}
      @keydown=${u}
    />
  `}function kn({labelKey:t,checked:e,input:r,onClick:i,onKeyDown:n,activeClassName:a=ga.containerActive,inactiveClassName:s=ga.containerInactive,labelBaseClassName:o=ga.labelBase,labelActiveClassName:l=ga.labelActive,labelInactiveClassName:c=ga.labelInactive,role:u,tabIndex:p}){const d=!!(i??n);return v`
    <div
      role=${u??(d?"button":void 0)??Ie}
      tabindex=${p??(d?0:void 0)??Ie}
      @click=${i}
      @keydown=${n??(i?x=>{x.target.tagName.toLowerCase()!=="input"&&(x.key==="Enter"||x.key===" ")&&(x.preventDefault(),i(x))}:void 0)}
      class="relative p-3 rounded-xl border transition-all duration-200 flex flex-col items-center justify-between gap-2 h-full cursor-pointer min-h-[100px] ${e?a:s}"
    >
      <div class="flex items-center justify-center w-full mt-1">
        <div
          class="w-5 h-5 rounded border flex items-center justify-center transition-colors ${e?"bg-blue-500 border-blue-500":"border-white/20 bg-white/5"}"
        >
          ${e?v`<svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-3 w-3 text-white"
                viewBox="0 0 20 20"
                fill="currentColor"
              >
                <path
                  fill-rule="evenodd"
                  d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                  clip-rule="evenodd"
                />
              </svg>`:""}
        </div>
      </div>

      ${e?r??v``:v`<div class="h-[2px] w-4 bg-white/10 rounded my-3"></div>`}

      <div
        class="${o} ${e?l:c}"
      >
        ${f(t)}
      </div>
    </div>
  `}const TR=[{type:C.City,translationKey:"unit_type.city"},{type:C.DefensePost,translationKey:"unit_type.defense_post"},{type:C.Port,translationKey:"unit_type.port"},{type:C.Warship,translationKey:"unit_type.warship"},{type:C.MissileSilo,translationKey:"unit_type.missile_silo"},{type:C.SAMLauncher,translationKey:"unit_type.sam_launcher"},{type:C.AtomBomb,translationKey:"unit_type.atom_bomb"},{type:C.HydrogenBomb,translationKey:"unit_type.hydrogen_bomb"},{type:C.MIRV,translationKey:"unit_type.mirv"},{type:C.Factory,translationKey:"unit_type.factory"}];function n5({disabledUnits:t,toggleUnit:e}){return TR.map(({type:r,translationKey:i})=>{const n=!t.includes(r);return v`
      <button
        class="relative p-4 rounded-xl border transition-all duration-200 flex flex-col items-center justify-center gap-2 min-h-[100px] w-full cursor-pointer ${n?"bg-blue-500/20 border-blue-500/50 shadow-[0_0_15px_rgba(59,130,246,0.2)]":"bg-white/5 border-white/10 hover:bg-white/10 hover:border-white/20 opacity-80"}"
        aria-pressed="${n}"
        @click=${()=>e(r,n)}
      >
        <div
          class="text-xs uppercase font-bold tracking-wider text-center w-full leading-tight break-words hyphens-auto ${n?"text-white":"text-white/60"}"
        >
          ${f(i)}
        </div>
      </button>
    `})}var ER=Object.defineProperty,MR=Object.getOwnPropertyDescriptor,Pe=(t,e,r,i)=>{for(var n=i>1?void 0:i?MR(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&ER(e,r,n),n};let Ee=class extends gt{constructor(){super(),this.selectedMap=Ne.World,this.selectedDifficulty=Ce.Easy,this.disableNations=!1,this.gameMode=pe.FFA,this.teamCount=2,this.bots=400,this.spawnImmunity=!1,this.spawnImmunityDurationMinutes=void 0,this.infiniteGold=!1,this.donateGold=!1,this.infiniteTroops=!1,this.donateTroops=!1,this.maxTimer=!1,this.maxTimerValue=void 0,this.instantBuild=!1,this.randomSpawn=!1,this.compactMap=!1,this.goldMultiplier=!1,this.goldMultiplierValue=void 0,this.startingGold=!1,this.startingGoldValue=void 0,this.lobbyId="",this.lobbyUrlSuffix="",this.clients=[],this.useRandomMap=!1,this.disabledUnits=[],this.lobbyCreatorClientID="",this.nationCount=0,this.eventBus=null,this.playersInterval=null,this.botsUpdateTimer=null,this.mapLoader=Ln,this.leaveLobbyOnClose=!0,this.handleLobbyInfo=t=>{const e=t.lobby;this.lobbyCreatorClientID=e.lobbyCreatorClientID??"",e.clients&&(this.clients=e.clients)},this.handleInstantBuildChange=t=>{this.instantBuild=t,this.putGameConfig()},this.handleRandomSpawnChange=t=>{this.randomSpawn=t,this.putGameConfig()},this.handleInfiniteGoldChange=t=>{this.infiniteGold=t,this.putGameConfig()},this.handleDonateGoldChange=t=>{this.donateGold=t,this.putGameConfig()},this.handleInfiniteTroopsChange=t=>{this.infiniteTroops=t,this.putGameConfig()},this.handleCompactMapChange=t=>{this.compactMap=t,t&&this.bots===400?this.bots=100:!t&&this.bots===100&&(this.bots=400),this.putGameConfig()},this.handleDonateTroopsChange=t=>{this.donateTroops=t,this.putGameConfig()},this.handleDisableNationsChange=async t=>{this.disableNations=t,console.log(`updating disable nations to ${this.disableNations}`),this.putGameConfig()},this.id="page-host-lobby"}renderOptionToggle(t,e,r,i=!1){return i?v``:v`
      <button
        class="relative p-4 rounded-xl border transition-all duration-200 flex flex-col items-center justify-center gap-2 h-full min-h-[100px] w-full cursor-pointer ${e?"bg-blue-500/20 border-blue-500/50 shadow-[0_0_15px_rgba(59,130,246,0.2)]":"bg-white/5 border-white/10 hover:bg-white/10 hover:border-white/20 opacity-80"}"
        @click=${()=>r(!e)}
      >
        <div
          class="text-xs uppercase font-bold tracking-wider text-center w-full leading-tight break-words hyphens-auto ${e?"text-white":"text-white/60"}"
        >
          ${f(t)}
        </div>
      </button>
    `}getRandomString(){const t="abcdefghijklmnopqrstuvwxyz0123456789";return Array.from({length:5},()=>t[Math.floor(Math.random()*t.length)]).join("")}async buildLobbyUrl(){if(ve.isOnCrazyGames()){const e=ve.createInviteLink(this.lobbyId);if(e!==null)return e}const t=await Ut();return`${window.location.origin}/${t.workerPath(this.lobbyId)}/game/${this.lobbyId}?lobby&s=${encodeURIComponent(this.lobbyUrlSuffix)}`}async constructUrl(){return this.lobbyUrlSuffix=this.getRandomString(),await this.buildLobbyUrl()}updateHistory(t){ve.isOnCrazyGames()||history.replaceState(null,"",t)}startLobbyUpdates(){if(this.stopLobbyUpdates(),!this.eventBus){console.warn("HostLobbyModal: eventBus not set, cannot subscribe to lobby updates");return}this.eventBus.on(po,this.handleLobbyInfo)}stopLobbyUpdates(){this.eventBus?.off(po,this.handleLobbyInfo)}render(){const t=this.createToggleHandlers(()=>this.maxTimer,a=>this.maxTimer=a,()=>this.maxTimerValue,a=>this.maxTimerValue=a,30),e=this.createToggleHandlers(()=>this.spawnImmunity,a=>this.spawnImmunity=a,()=>this.spawnImmunityDurationMinutes,a=>this.spawnImmunityDurationMinutes=a,5),r=this.createToggleHandlers(()=>this.goldMultiplier,a=>this.goldMultiplier=a,()=>this.goldMultiplierValue,a=>this.goldMultiplierValue=a,2),i=this.createToggleHandlers(()=>this.startingGold,a=>this.startingGold=a,()=>this.startingGoldValue,a=>this.startingGoldValue=a,5e6),n=v`
      <div
        class="h-full flex flex-col bg-black/60 backdrop-blur-md rounded-2xl border border-white/10 overflow-hidden select-none"
      >
        <!-- Header -->
        ${It({title:f("host_modal.title"),onBack:()=>{this.leaveLobbyOnClose=!0,this.close()},ariaLabel:f("common.back"),rightContent:v`
            <copy-button
              .lobbyId=${this.lobbyId}
              .lobbySuffix=${this.lobbyUrlSuffix}
              include-lobby-query
            ></copy-button>
          `})}

        <!-- Scrollable Content -->
        <div class="flex-1 overflow-y-auto custom-scrollbar p-6 mr-1">
          <div class="max-w-5xl mx-auto space-y-10">
            <!-- Map Selection -->
            <div class="space-y-6">
              <div
                class="flex items-center gap-4 pb-2 border-b border-white/10"
              >
                <div
                  class="w-8 h-8 rounded-lg bg-blue-500/20 flex items-center justify-center text-blue-400"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                    class="w-5 h-5"
                  >
                    <path
                      d="M21.731 2.269a2.625 2.625 0 00-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 000-3.712zM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 00-1.32 2.214l-.8 2.685a.75.75 0 00.933.933l2.685-.8a5.25 5.25 0 002.214-1.32L19.513 8.2z"
                    />
                  </svg>
                </div>
                <h3
                  class="text-lg font-bold text-white uppercase tracking-wider"
                >
                  ${f("map.map")}
                </h3>
              </div>
              <map-picker
                .selectedMap=${this.selectedMap}
                .useRandomMap=${this.useRandomMap}
                .randomMapDivider=${!0}
                .onSelectMap=${a=>this.handleMapSelection(a)}
                .onSelectRandom=${()=>this.handleSelectRandomMap()}
              ></map-picker>
            </div>

            <!-- Difficulty Selection -->
            <div class="space-y-6">
              <div
                class="flex items-center gap-4 pb-2 border-b border-white/10"
              >
                <div
                  class="w-8 h-8 rounded-lg bg-green-500/20 flex items-center justify-center text-green-400"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                    class="w-5 h-5"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M12.97 3.97a.75.75 0 011.06 0l7.5 7.5a.75.75 0 010 1.06l-7.5 7.5a.75.75 0 11-1.06-1.06l6.22-6.22H3a.75.75 0 010-1.5h16.19l-6.22-6.22a.75.75 0 010-1.06z"
                      clip-rule="evenodd"
                    />
                  </svg>
                </div>
                <h3
                  class="text-lg font-bold text-white uppercase tracking-wider"
                >
                  ${f("difficulty.difficulty")}
                </h3>
              </div>

              <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                ${Object.entries(Ce).filter(([a])=>isNaN(Number(a))).map(([a,s])=>{const o=this.selectedDifficulty===s,l=this.disableNations;return v`
                      <button
                        ?disabled=${l}
                        @click=${()=>!l&&this.handleDifficultySelection(s)}
                        class="relative group rounded-xl border transition-all duration-200 w-full overflow-hidden flex flex-col items-center p-4 gap-3 ${l?"opacity-30 grayscale cursor-not-allowed bg-white/5 border-white/5":o?"bg-blue-500/20 border-blue-500/50 shadow-[0_0_15px_rgba(59,130,246,0.2)]":"bg-white/5 border-white/10 hover:bg-white/10 hover:border-white/20"}"
                      >
                        <difficulty-display
                          .difficultyKey=${a}
                          class="transform scale-125 origin-center ${l?"pointer-events-none":""}"
                        ></difficulty-display>
                        <div
                          class="text-xs font-bold text-white uppercase tracking-wider text-center w-full mt-1 break-words hyphens-auto"
                        >
                          ${f(`difficulty.${a.toLowerCase()}`)}
                        </div>
                      </button>
                    `})}
              </div>
            </div>

            <!-- Game Mode -->
            <div class="space-y-6">
              <div
                class="flex items-center gap-4 pb-2 border-b border-white/10"
              >
                <div
                  class="w-8 h-8 rounded-lg bg-purple-500/20 flex items-center justify-center text-purple-400"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                    class="w-5 h-5"
                  >
                    <path
                      d="M11.25 4.533A9.707 9.707 0 006 3a9.735 9.735 0 00-3.25.555.75.75 0 00-.5.707v14.25a.75.75 0 001 .707A8.237 8.237 0 016 18.75c1.995 0 3.823.707 5.25 1.886V4.533zM12.75 20.636A8.214 8.214 0 0118 18.75c.966 0 1.89.166 2.75.47a.75.75 0 001-.708V4.262a.75.75 0 00-.5-.707A9.735 9.735 0 0018 3a9.707 9.707 0 00-5.25 1.533v16.103z"
                    />
                  </svg>
                </div>
                <h3
                  class="text-lg font-bold text-white uppercase tracking-wider"
                >
                  ${f("host_modal.mode")}
                </h3>
              </div>
              <div class="grid grid-cols-2 gap-4">
                ${[pe.FFA,pe.Team].map(a=>{const s=this.gameMode===a;return v`
                    <button
                      class="w-full py-6 rounded-xl border transition-all duration-200 flex flex-col items-center justify-center gap-3 ${s?"bg-blue-500/20 border-blue-500/50 shadow-[0_0_15px_rgba(59,130,246,0.2)]":"bg-white/5 border-white/10 hover:bg-white/10 hover:border-white/20"}"
                      @click=${()=>this.handleGameModeSelection(a)}
                    >
                      <span
                        class="text-sm font-bold text-white uppercase tracking-widest break-words hyphens-auto"
                      >
                        ${a===pe.FFA?f("game_mode.ffa"):f("game_mode.teams")}
                      </span>
                    </button>
                  `})}
              </div>
            </div>

            ${this.gameMode===pe.FFA?"":v`
                  <!-- Team Count -->
                  <div class="space-y-6">
                    <div
                      class="text-xs font-bold text-white/40 uppercase tracking-widest mb-4 pl-2"
                    >
                      ${f("host_modal.team_count")}
                    </div>
                    <div class="grid grid-cols-2 md:grid-cols-5 gap-3">
                      ${[2,3,4,5,6,7,In,Mn,En,Ct].map(a=>{const s=this.teamCount===a;return v`
                          <button
                            @click=${()=>this.handleTeamCountSelection(a)}
                            class="w-full px-4 py-3 rounded-xl border transition-all duration-200 flex items-center justify-center ${s?"bg-blue-500/20 border-blue-500/50 shadow-[0_0_15px_rgba(59,130,246,0.2)]":"bg-white/5 border-white/10 hover:bg-white/10 hover:border-white/20"}"
                          >
                            <span
                              class="text-xs font-bold uppercase tracking-wider text-center text-white break-words hyphens-auto"
                            >
                              ${typeof a=="string"?f(a===Ct?"public_lobby.teams_hvn":`host_modal.teams_${a}`):f("public_lobby.teams",{num:a})}
                            </span>
                          </button>
                        `})}
                    </div>
                  </div>
                `}

            <!-- Game Options -->
            <div class="space-y-6">
              <div
                class="flex items-center gap-4 pb-2 border-b border-white/10"
              >
                <div
                  class="w-8 h-8 rounded-lg bg-orange-500/20 flex items-center justify-center text-orange-400"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                    class="w-5 h-5"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M11.078 2.25c-.917 0-1.699.663-1.85 1.567L9.05 4.889c-.02.12-.115.26-.297.348a7.493 7.493 0 00-.986.57c-.166.115-.334.126-.45.083L6.3 5.508a1.875 1.875 0 00-2.282.819l-.922 1.597a1.875 1.875 0 00.432 2.385l.84.692c.095.078.17.229.154.43a7.598 7.598 0 000 1.139c.015.2-.059.352-.153.43l-.841.692a1.875 1.875 0 00-.432 2.385l.922 1.597a1.875 1.875 0 002.282.818l1.019-.382c.115-.043.283-.031.45.082.312.214.641.405.985.57.182.088.277.228.297.35l.178 1.071c.151.904.933 1.567 1.85 1.567h1.844c.916 0 1.699-.663 1.85-1.567l.178-1.072c.02-.12.114-.26.297-.349.344-.165.673-.356.985-.57.167-.114.335-.125.45-.082l1.02.382a1.875 1.875 0 002.28-.819l.922-1.597a1.875 1.875 0 00-.432-2.385l-.84-.692c-.095-.078-.17-.229-.154-.43a7.614 7.614 0 000-1.139c-.016-.2.059-.352.153-.43l.84-.692c.708-.582.891-1.59.433-2.385l-.922-1.597a1.875 1.875 0 00-2.282-.818l-1.02.382c-.114.043-.282.031-.449-.083a7.49 7.49 0 00-.985-.57c-.183-.087-.277-.227-.297-.348l-.179-1.072a1.875 1.875 0 00-1.85-1.567h-1.843zM12 15.75a3.75 3.75 0 100-7.5 3.75 3.75 0 000 7.5z"
                      clip-rule="evenodd"
                    />
                  </svg>
                </div>
                <h3
                  class="text-lg font-bold text-white uppercase tracking-wider"
                >
                  ${f("host_modal.options_title")}
                </h3>
              </div>
              <div class="grid grid-cols-2 lg:grid-cols-4 gap-4">
                <!-- Bots Slider -->
                <div
                  class="col-span-2 rounded-xl p-4 flex flex-col justify-center min-h-[100px] border transition-all duration-200 ${this.bots>0?"bg-blue-500/20 border-blue-500/50 shadow-[0_0_15px_rgba(59,130,246,0.2)]":"bg-white/5 border-white/10 hover:bg-white/10 hover:border-white/20 opacity-80"}"
                >
                  <fluent-slider
                    min="0"
                    max="400"
                    step="1"
                    .value=${this.bots}
                    labelKey="host_modal.bots"
                    disabledKey="host_modal.bots_disabled"
                    @value-changed=${this.handleBotsChange}
                  ></fluent-slider>
                </div>

                ${this.gameMode===pe.Team&&this.teamCount===Ct?"":this.renderOptionToggle("host_modal.disable_nations",this.disableNations,this.handleDisableNationsChange)}
                ${this.renderOptionToggle("host_modal.instant_build",this.instantBuild,this.handleInstantBuildChange)}
                ${this.renderOptionToggle("host_modal.random_spawn",this.randomSpawn,this.handleRandomSpawnChange)}
                ${this.renderOptionToggle("host_modal.donate_gold",this.donateGold,this.handleDonateGoldChange)}
                ${this.renderOptionToggle("host_modal.donate_troops",this.donateTroops,this.handleDonateTroopsChange)}
                ${this.renderOptionToggle("host_modal.infinite_gold",this.infiniteGold,this.handleInfiniteGoldChange)}
                ${this.renderOptionToggle("host_modal.infinite_troops",this.infiniteTroops,this.handleInfiniteTroopsChange)}
                ${this.renderOptionToggle("host_modal.compact_map",this.compactMap,this.handleCompactMapChange)}

                <!-- Max Timer -->
                ${kn({labelKey:"host_modal.max_timer",checked:this.maxTimer,onClick:t.click,input:_n({min:0,max:120,value:this.maxTimerValue??0,ariaLabel:f("host_modal.max_timer"),placeholder:f("host_modal.mins_placeholder"),onInput:this.handleMaxTimerValueChanges,onKeyDown:this.handleMaxTimerValueKeyDown})})}

                <!-- Spawn Immunity -->
                ${kn({labelKey:"host_modal.player_immunity_duration",checked:this.spawnImmunity,onClick:e.click,input:_n({min:0,max:120,step:1,value:this.spawnImmunityDurationMinutes??0,ariaLabel:f("host_modal.player_immunity_duration"),placeholder:f("host_modal.mins_placeholder"),onInput:this.handleSpawnImmunityDurationInput,onKeyDown:this.handleSpawnImmunityDurationKeyDown})})}

                <!-- Gold Multiplier -->
                ${kn({labelKey:"single_modal.gold_multiplier",checked:this.goldMultiplier,onClick:r.click,input:_n({id:"gold-multiplier-value",min:.1,max:1e3,step:"any",value:this.goldMultiplierValue??"",ariaLabel:f("single_modal.gold_multiplier"),placeholder:f("single_modal.gold_multiplier_placeholder"),onChange:this.handleGoldMultiplierValueChanges,onKeyDown:this.handleGoldMultiplierValueKeyDown})})}

                <!-- Starting Gold -->
                ${kn({labelKey:"single_modal.starting_gold",checked:this.startingGold,onClick:i.click,input:_n({id:"starting-gold-value",min:0,max:1e9,step:1e5,value:this.startingGoldValue??"",ariaLabel:f("single_modal.starting_gold"),placeholder:f("single_modal.starting_gold_placeholder"),onInput:this.handleStartingGoldValueChanges,onKeyDown:this.handleStartingGoldValueKeyDown})})}
              </div>
            </div>

            <!-- Enabled Items -->
            <div class="space-y-6">
              <div
                class="flex items-center gap-4 pb-2 border-b border-white/10"
              >
                <div
                  class="w-8 h-8 rounded-lg bg-teal-500/20 flex items-center justify-center text-teal-400"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                    class="w-5 h-5"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm0 8.625a1.125 1.125 0 100 2.25 1.125 1.125 0 000-2.25zM15.375 12a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zM7.5 10.875a1.125 1.125 0 100 2.25 1.125 1.125 0 000-2.25z"
                      clip-rule="evenodd"
                    />
                  </svg>
                </div>
                <h3
                  class="text-lg font-bold text-white uppercase tracking-wider"
                >
                  ${f("host_modal.enables_title")}
                </h3>
              </div>
              <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4">
                ${n5({disabledUnits:this.disabledUnits,toggleUnit:this.toggleUnit.bind(this)})}
              </div>
            </div>

            <!-- Player List -->
            <lobby-player-view
              .gameMode=${this.gameMode}
              .clients=${this.clients}
              .lobbyCreatorClientID=${this.lobbyCreatorClientID}
              .currentClientID=${this.lobbyCreatorClientID}
              .teamCount=${this.teamCount}
              .nationCount=${this.nationCount}
              .disableNations=${this.disableNations}
              .isCompactMap=${this.compactMap}
              .onKickPlayer=${a=>this.kickPlayer(a)}
            ></lobby-player-view>
          </div>
        </div>

        <!-- Player List / footer -->
        <div class="p-6 pt-4 border-t border-white/10 bg-black/20 shrink-0">
          <button
            class="w-full py-4 text-sm font-bold text-white uppercase tracking-widest bg-blue-600 hover:bg-blue-500 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl transition-all shadow-lg shadow-blue-900/20 hover:shadow-blue-900/40 hover:-translate-y-0.5 active:translate-y-0 disabled:transform-none"
            @click=${this.startGame}
            ?disabled=${this.clients.length<2}
          >
            ${this.clients.length===1?f("host_modal.waiting"):f("host_modal.start")}
          </button>
        </div>
      </div>
    `;return this.inline?n:v`
      <o-modal
        title=""
        ?hideCloseButton=${!0}
        ?inline=${this.inline}
        hideHeader
      >
        ${n}
      </o-modal>
    `}onOpen(){this.startLobbyUpdates(),this.lobbyId=oi(),IR(this.lobbyId).then(async t=>{if(this.lobbyId=t.gameID,!_3(this.lobbyId))throw new Error(`Invalid lobby ID format: ${this.lobbyId}`);ve.showInviteButton(this.lobbyId);const e=await this.constructUrl();this.updateHistory(e)}).then(()=>{this.dispatchEvent(new CustomEvent("join-lobby",{detail:{gameID:this.lobbyId,source:"host"},bubbles:!0,composed:!0}))}),this.modalEl&&(this.modalEl.onClose=()=>{this.close()}),this.playersInterval=setInterval(()=>this.pollPlayers(),1e3),this.loadNationCount()}createToggleHandlers(t,e,r,i,n=0){const a=()=>{const s=!t();e(s),i(s?r()??n:void 0),this.putGameConfig(),this.requestUpdate()};return{click:s=>{s.target.tagName.toLowerCase()!=="input"&&a()},keydown:s=>{s.target.tagName.toLowerCase()!=="input"&&(s.key==="Enter"||s.key===" ")&&(s.preventDefault(),a())}}}leaveLobby(){this.lobbyId&&this.dispatchEvent(new CustomEvent("leave-lobby",{detail:{lobby:this.lobbyId},bubbles:!0,composed:!0}))}onClose(){console.log("Closing host lobby modal"),this.stopLobbyUpdates(),this.leaveLobbyOnClose&&(this.leaveLobby(),this.updateHistory("/")),ve.hideInviteButton(),this.playersInterval&&(clearInterval(this.playersInterval),this.playersInterval=null),this.botsUpdateTimer!==null&&(clearTimeout(this.botsUpdateTimer),this.botsUpdateTimer=null),this.selectedMap=Ne.World,this.selectedDifficulty=Ce.Easy,this.disableNations=!1,this.gameMode=pe.FFA,this.teamCount=2,this.bots=400,this.spawnImmunity=!1,this.spawnImmunityDurationMinutes=void 0,this.infiniteGold=!1,this.donateGold=!1,this.infiniteTroops=!1,this.donateTroops=!1,this.maxTimer=!1,this.maxTimerValue=void 0,this.instantBuild=!1,this.randomSpawn=!1,this.compactMap=!1,this.useRandomMap=!1,this.disabledUnits=[],this.lobbyId="",this.clients=[],this.lobbyCreatorClientID="",this.nationCount=0,this.goldMultiplier=!1,this.goldMultiplierValue=void 0,this.startingGold=!1,this.startingGoldValue=void 0,this.leaveLobbyOnClose=!0}async handleSelectRandomMap(){this.useRandomMap=!0,this.selectedMap=this.getRandomMap(),await this.loadNationCount(),this.putGameConfig()}async handleMapSelection(t){this.selectedMap=t,this.useRandomMap=!1,await this.loadNationCount(),this.putGameConfig()}async handleDifficultySelection(t){this.selectedDifficulty=t,this.putGameConfig()}handleBotsChange(t){const r=t.detail.value;isNaN(r)||r<0||r>400||(this.bots=r,this.botsUpdateTimer!==null&&clearTimeout(this.botsUpdateTimer),this.botsUpdateTimer=window.setTimeout(()=>{this.putGameConfig(),this.botsUpdateTimer=null},300))}handleSpawnImmunityDurationKeyDown(t){["-","+","e","E"].includes(t.key)&&t.preventDefault()}handleSpawnImmunityDurationInput(t){const e=t.target;e.value=e.value.replace(/[eE+-]/g,"");const r=parseInt(e.value,10);Number.isNaN(r)||r<0||r>120||(this.spawnImmunityDurationMinutes=r,this.putGameConfig())}handleGoldMultiplierValueKeyDown(t){["+","-","e","E"].includes(t.key)&&t.preventDefault()}handleGoldMultiplierValueChanges(t){const e=t.target,r=parseFloat(e.value);isNaN(r)||r<.1||r>1e3?(this.goldMultiplierValue=void 0,e.value=""):this.goldMultiplierValue=r,this.putGameConfig()}handleStartingGoldValueKeyDown(t){["-","+","e","E"].includes(t.key)&&t.preventDefault()}handleStartingGoldValueChanges(t){const e=t.target;e.value=e.value.replace(/[eE+-]/g,"");const r=parseInt(e.value);isNaN(r)||r<0||r>1e9?this.startingGoldValue=void 0:this.startingGoldValue=r,this.putGameConfig()}handleMaxTimerValueKeyDown(t){["-","+","e"].includes(t.key)&&t.preventDefault()}handleMaxTimerValueChanges(t){t.target.value=t.target.value.replace(/[e+-]/gi,"");const e=parseInt(t.target.value);isNaN(e)||e<0||e>120||(this.maxTimerValue=e,this.putGameConfig())}async handleGameModeSelection(t){this.gameMode=t,this.gameMode===pe.Team?(this.donateGold=!0,this.donateTroops=!0):(this.donateGold=!1,this.donateTroops=!1),this.putGameConfig()}async handleTeamCountSelection(t){this.teamCount=t,this.putGameConfig()}async putGameConfig(){const t=this.spawnImmunityDurationMinutes?this.spawnImmunityDurationMinutes*60*10:0,e=await this.constructUrl();this.updateHistory(e),this.dispatchEvent(new CustomEvent("update-game-config",{detail:{config:{gameMap:this.selectedMap,gameMapSize:this.compactMap?sr.Compact:sr.Normal,difficulty:this.selectedDifficulty,bots:this.bots,infiniteGold:this.infiniteGold,donateGold:this.donateGold,infiniteTroops:this.infiniteTroops,donateTroops:this.donateTroops,instantBuild:this.instantBuild,randomSpawn:this.randomSpawn,gameMode:this.gameMode,disabledUnits:this.disabledUnits,spawnImmunityDuration:this.spawnImmunity?t:void 0,playerTeams:this.teamCount,...this.gameMode===pe.Team&&this.teamCount===Ct?{disableNations:!1}:{disableNations:this.disableNations},maxTimerValue:this.maxTimer===!0?this.maxTimerValue:void 0,goldMultiplier:this.goldMultiplier===!0?this.goldMultiplierValue:void 0,startingGold:this.startingGold===!0?this.startingGoldValue:void 0}},bubbles:!0,composed:!0}))}toggleUnit(t,e){this.disabledUnits=e?[...this.disabledUnits,t]:this.disabledUnits.filter(r=>r!==t),this.putGameConfig()}getRandomMap(){const t=Object.values(Ne),e=Math.floor(Math.random()*t.length);return t[e]}async startGame(){await this.putGameConfig(),console.log(`Starting private game with map: ${Ne[this.selectedMap]} ${this.useRandomMap?" (Randomly selected)":""}`),this.leaveLobbyOnClose=!1;const t=await Ut(),e=await fetch(`${window.location.origin}/${t.workerPath(this.lobbyId)}/api/start_game/${this.lobbyId}`,{method:"POST",headers:{"Content-Type":"application/json"}});return e.ok||(this.leaveLobbyOnClose=!0),e}async pollPlayers(){const t=await Ut();fetch(`/${t.workerPath(this.lobbyId)}/api/game/${this.lobbyId}`,{method:"GET",headers:{"Content-Type":"application/json"}}).then(e=>e.json()).then(e=>{this.clients=e.clients??[]})}kickPlayer(t){this.dispatchEvent(new CustomEvent("kick-player",{detail:{target:t},bubbles:!0,composed:!0}))}async loadNationCount(){const t=this.selectedMap;try{const r=await this.mapLoader.getMapData(t).manifest();this.selectedMap===t&&(this.nationCount=r.nations.length)}catch(e){console.warn("Failed to load nation count",e),this.selectedMap===t&&(this.nationCount=0)}}};Pe([M()],Ee.prototype,"selectedMap",2);Pe([M()],Ee.prototype,"selectedDifficulty",2);Pe([M()],Ee.prototype,"disableNations",2);Pe([M()],Ee.prototype,"gameMode",2);Pe([M()],Ee.prototype,"teamCount",2);Pe([M()],Ee.prototype,"bots",2);Pe([M()],Ee.prototype,"spawnImmunity",2);Pe([M()],Ee.prototype,"spawnImmunityDurationMinutes",2);Pe([M()],Ee.prototype,"infiniteGold",2);Pe([M()],Ee.prototype,"donateGold",2);Pe([M()],Ee.prototype,"infiniteTroops",2);Pe([M()],Ee.prototype,"donateTroops",2);Pe([M()],Ee.prototype,"maxTimer",2);Pe([M()],Ee.prototype,"maxTimerValue",2);Pe([M()],Ee.prototype,"instantBuild",2);Pe([M()],Ee.prototype,"randomSpawn",2);Pe([M()],Ee.prototype,"compactMap",2);Pe([M()],Ee.prototype,"goldMultiplier",2);Pe([M()],Ee.prototype,"goldMultiplierValue",2);Pe([M()],Ee.prototype,"startingGold",2);Pe([M()],Ee.prototype,"startingGoldValue",2);Pe([M()],Ee.prototype,"lobbyId",2);Pe([M()],Ee.prototype,"lobbyUrlSuffix",2);Pe([M()],Ee.prototype,"clients",2);Pe([M()],Ee.prototype,"useRandomMap",2);Pe([M()],Ee.prototype,"disabledUnits",2);Pe([M()],Ee.prototype,"lobbyCreatorClientID",2);Pe([M()],Ee.prototype,"nationCount",2);Pe([L({attribute:!1})],Ee.prototype,"eventBus",2);Ee=Pe([F("host-lobby-modal")],Ee);async function IR(t){const e=await Ut(),r=await kc();try{const i=await fetch(`/${e.workerPath(t)}/api/create_game/${t}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`}});if(!i.ok){const a=await i.text();throw console.error("Server error response:",a),new Error(`HTTP error! status: ${i.status}`)}const n=await i.json();return console.log("Success:",n),n}catch(i){throw console.error("Error creating lobby:",i),i}}var PR=Object.defineProperty,$R=Object.getOwnPropertyDescriptor,Rf=(t,e,r,i)=>{for(var n=i>1?void 0:i?$R(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&PR(e,r,n),n};let Xc=class extends V{constructor(){super(...arguments),this.label="",this.value=""}createRenderRoot(){return this}render(){return v`
      <div
        class="bg-white/5 border border-white/10 rounded-lg p-3 flex flex-col items-center justify-center gap-1 text-center min-w-[100px]"
      >
        <span
          class="text-white/40 text-[10px] font-bold uppercase tracking-wider"
          >${this.label}</span
        >
        <span
          class="text-white font-bold text-sm w-full break-words hyphens-auto"
          >${this.value}</span
        >
      </div>
    `}};Rf([L({type:String})],Xc.prototype,"label",2);Rf([L({attribute:!1})],Xc.prototype,"value",2);Xc=Rf([F("lobby-config-item")],Xc);var RR=Object.defineProperty,DR=Object.getOwnPropertyDescriptor,hr=(t,e,r,i)=>{for(var n=i>1?void 0:i?DR(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&RR(e,r,n),n};let qt=class extends gt{constructor(){super(...arguments),this.eventBus=null,this.players=[],this.playerCount=0,this.gameConfig=null,this.currentLobbyId="",this.currentClientID="",this.nationCount=0,this.lobbyStartAt=null,this.isConnecting=!0,this.lobbyCreatorClientID=null,this.leaveLobbyOnClose=!0,this.countdownTimerId=null,this.handledJoinTimeout=!1,this.handleLobbyInfo=t=>{const e=t.lobby;this.currentClientID=t.myClientID,this.isConnecting&&e.clients&&(this.isConnecting=!1),this.updateFromLobby({...e,startsAt:e.startsAt??void 0})}}isPrivateLobby(){return this.gameConfig?.gameType===lt.Private}render(){if(!this.currentLobbyId)return this.renderJoinForm();const t=this.lobbyStartAt!==null?Math.max(0,Math.floor((this.lobbyStartAt-Date.now())/1e3)):null,e=t===null?f("public_lobby.waiting_for_players"):t>0?f("public_lobby.starting_in",{time:Oa(t)}):f("public_lobby.started"),r=this.gameConfig?.maxPlayers??0,i=this.players?.length??0,n=this.isPrivateLobby()?this.lobbyCreatorClientID??"":"",a=v`
      <div
        class="h-full flex flex-col bg-black/60 backdrop-blur-md rounded-2xl border border-white/10 overflow-hidden select-none"
      >
        ${It({title:f("public_lobby.title"),onBack:()=>this.closeAndLeave(),ariaLabel:f("common.close"),rightContent:this.currentLobbyId&&this.isPrivateLobby()?v`
                  <copy-button .lobbyId=${this.currentLobbyId}></copy-button>
                `:void 0})}
        <div class="flex-1 overflow-y-auto custom-scrollbar p-6 space-y-4 mr-1">
          ${this.isConnecting?v`
                <div
                  class="min-h-[240px] flex flex-col items-center justify-center gap-4"
                >
                  <div
                    class="w-12 h-12 border-4 border-white/20 border-t-white rounded-full animate-spin"
                  ></div>
                  <p class="text-center text-white/80 text-sm">
                    ${f("public_lobby.connecting")}
                  </p>
                </div>
              `:v`
                ${this.gameConfig?this.renderGameConfig():v``}
                ${this.players.length>0?v`
                      <lobby-player-view
                        class="mt-6"
                        .gameMode=${this.gameConfig?.gameMode??pe.FFA}
                        .clients=${this.players}
                        .lobbyCreatorClientID=${n}
                        .currentClientID=${this.currentClientID}
                        .teamCount=${this.gameConfig?.playerTeams??2}
                        .nationCount=${this.nationCount}
                        .disableNations=${this.gameConfig?.disableNations??!1}
                        .isCompactMap=${this.gameConfig?.gameMapSize===sr.Compact}
                      ></lobby-player-view>
                    `:""}
              `}
        </div>

        ${this.isPrivateLobby()?v`
              <div
                class="p-6 pt-4 border-t border-white/10 bg-black/20 shrink-0"
              >
                <button
                  class="w-full py-4 text-sm font-bold text-white uppercase tracking-widest bg-blue-600 hover:bg-blue-500 disabled:opacity-50 disabled:cursor-not-allowed rounded-xl transition-all shadow-lg shadow-blue-900/20 hover:shadow-blue-900/40 hover:-translate-y-0.5 active:translate-y-0 disabled:transform-none"
                  disabled
                >
                  ${f("private_lobby.joined_waiting")}
                </button>
              </div>
            `:v`
              <div
                class="p-6 pt-4 border-t border-white/10 bg-black/20 shrink-0"
              >
                <div
                  class="w-full px-4 py-3 rounded-xl border border-white/10 bg-white/5 flex items-center justify-between gap-3"
                >
                  <div class="flex flex-col">
                    <span
                      class="text-[10px] font-bold uppercase tracking-widest text-white/40"
                      >${f("public_lobby.status")}</span
                    >
                    <span class="text-sm font-bold text-white"
                      >${e}</span
                    >
                  </div>
                  ${r>0?v`
                        <div
                          class="flex items-center gap-2 text-white/80 text-xs font-bold uppercase tracking-widest"
                        >
                          <span>${i}/${r}</span>
                          <svg
                            class="w-4 h-4 text-white"
                            fill="currentColor"
                            viewBox="0 0 20 20"
                          >
                            <path
                              d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.972 0 004 15v3H1v-3a3 3 0 013.75-2.906z"
                            ></path>
                          </svg>
                        </div>
                      `:v``}
                </div>
              </div>
            `}
      </div>
    `;return this.inline?a:v`
      <o-modal
        ?hideHeader=${!0}
        ?hideCloseButton=${!0}
        ?inline=${this.inline}
      >
        ${a}
      </o-modal>
    `}renderJoinForm(){const t=v`
      <div
        class="h-full flex flex-col bg-black/60 backdrop-blur-md rounded-2xl border border-white/10 overflow-hidden select-none"
      >
        ${It({title:f("private_lobby.title"),onBack:()=>this.closeAndLeave(),ariaLabel:f("common.close")})}
        <div class="flex-1 overflow-y-auto custom-scrollbar p-6 space-y-4 mr-1">
          <div class="flex flex-col gap-3">
            <div class="flex gap-2">
              <input
                type="text"
                id="lobbyIdInput"
                placeholder=${f("private_lobby.enter_id")}
                @keyup=${this.handleChange}
                class="flex-1 px-4 py-3 bg-white/5 border border-white/10 rounded-xl text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all font-mono text-sm tracking-wider"
              />
              <button
                @click=${this.pasteFromClipboard}
                class="px-4 py-3 bg-white/5 hover:bg-white/10 border border-white/10 hover:border-white/20 rounded-xl transition-all group"
                title=${f("common.paste")}
              >
                <svg
                  class="text-white/60 group-hover:text-white transition-colors"
                  stroke="currentColor"
                  fill="currentColor"
                  stroke-width="0"
                  viewBox="0 0 32 32"
                  height="18px"
                  width="18px"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M 15 3 C 13.742188 3 12.847656 3.890625 12.40625 5 L 5 5 L 5 28 L 13 28 L 13 30 L 27 30 L 27 14 L 25 14 L 25 5 L 17.59375 5 C 17.152344 3.890625 16.257813 3 15 3 Z M 15 5 C 15.554688 5 16 5.445313 16 6 L 16 7 L 19 7 L 19 9 L 11 9 L 11 7 L 14 7 L 14 6 C 14 5.445313 14.445313 5 15 5 Z M 7 7 L 9 7 L 9 11 L 21 11 L 21 7 L 23 7 L 23 14 L 13 14 L 13 26 L 7 26 Z M 15 16 L 25 16 L 25 28 L 15 28 Z"
                  ></path>
                </svg>
              </button>
            </div>
            <o-button
              title=${f("private_lobby.join_lobby")}
              block
              @click=${this.joinLobbyFromInput}
            ></o-button>
          </div>
        </div>
      </div>
    `;return this.inline?t:v`
      <o-modal
        ?hideHeader=${!0}
        ?hideCloseButton=${!0}
        ?inline=${this.inline}
      >
        ${t}
      </o-modal>
    `}open(t="",e=!1){super.open(),t&&(this.startTrackingLobby(t),e?this.joinPublicLobby(t):this.handleUrlJoin(t))}async handleUrlJoin(t){try{if(await this.checkActiveLobby(t))return;switch(await this.checkArchivedGame(t)){case"success":return;case"not_found":this.resetTrackingState(),this.showMessage(f("private_lobby.not_found"),"red");return;case"version_mismatch":this.resetTrackingState(),this.showMessage(f("private_lobby.version_mismatch"),"red");return;case"error":this.resetTrackingState(),this.showMessage(f("private_lobby.error"),"red");return}}catch(e){console.error("Error checking lobby from URL:",e),this.resetTrackingState(),this.showMessage(f("private_lobby.error"),"red")}}joinPublicLobby(t){this.dispatchEvent(new CustomEvent("join-lobby",{detail:{gameID:t,source:"public"},bubbles:!0,composed:!0}))}startTrackingLobby(t,e){this.currentLobbyId=t,this.currentClientID="",this.gameConfig=null,this.players=[],this.nationCount=0,this.lobbyStartAt=null,this.lobbyCreatorClientID=null,this.isConnecting=!0,this.handledJoinTimeout=!1,this.startLobbyUpdates(),e&&(this.updateFromLobby(e),e.clients&&(this.isConnecting=!1))}resetTrackingState(){this.stopLobbyUpdates(),this.currentLobbyId="",this.currentClientID="",this.isConnecting=!1}leaveLobby(){this.currentLobbyId&&this.dispatchEvent(new CustomEvent("leave-lobby",{detail:{lobby:this.currentLobbyId},bubbles:!0,composed:!0}))}onClose(){this.clearCountdownTimer(),this.stopLobbyUpdates(),this.leaveLobbyOnClose&&(this.leaveLobby(),this.updateHistory("/")),this.lobbyIdInput&&(this.lobbyIdInput.value=""),this.gameConfig=null,this.players=[],this.currentLobbyId="",this.currentClientID="",this.nationCount=0,this.lobbyStartAt=null,this.lobbyCreatorClientID=null,this.isConnecting=!0,this.leaveLobbyOnClose=!0}disconnectedCallback(){this.clearCountdownTimer(),this.stopLobbyUpdates(),super.disconnectedCallback()}closeAndLeave(){this.leaveLobby();try{this.updateHistory("/")}catch(t){console.warn("Failed to restore URL on leave:",t)}this.leaveLobbyOnClose=!1,this.close()}closeWithoutLeaving(){this.leaveLobbyOnClose=!1,this.close()}updateHistory(t){ve.isOnCrazyGames()||history.replaceState(null,"",t)}renderGameConfig(){if(!this.gameConfig)return v``;const t=this.gameConfig,e=f("map."+h2(t.gameMap)),r=p2(t),i=f2(t.publicGameModifiers);return v`
      <div class="grid grid-cols-2 sm:grid-cols-3 gap-2">
        <lobby-config-item
          .label=${f("map.map")}
          .value=${e}
        ></lobby-config-item>
        <lobby-config-item
          .label=${f("host_modal.mode")}
          .value=${r}
        ></lobby-config-item>
        ${i.map(n=>v`
            <lobby-config-item
              .label=${f(n.labelKey)}
              .value=${n.value!==void 0?ce(n.value):f("common.enabled")}
            ></lobby-config-item>
          `)}
        ${t.gameMode!==pe.FFA&&t.playerTeams&&t.playerTeams!==Ct?v`
              <lobby-config-item
                .label=${typeof t.playerTeams=="string"?f("host_modal.team_type"):f("host_modal.team_count")}
                .value=${typeof t.playerTeams=="string"?f("host_modal.teams_"+t.playerTeams):t.playerTeams.toString()}
              ></lobby-config-item>
            `:v``}
      </div>
      ${this.renderDisabledUnits()}
    `}renderDisabledUnits(){if(!this.gameConfig||!this.gameConfig.disabledUnits||this.gameConfig.disabledUnits.length===0)return v``;const t={City:"unit_type.city",Port:"unit_type.port","Defense Post":"unit_type.defense_post","SAM Launcher":"unit_type.sam_launcher","Missile Silo":"unit_type.missile_silo",Warship:"unit_type.warship",Factory:"unit_type.factory","Atom Bomb":"unit_type.atom_bomb","Hydrogen Bomb":"unit_type.hydrogen_bomb",MIRV:"unit_type.mirv","Trade Ship":"player_stats_table.unit.trade",Transport:"player_stats_table.unit.trans","MIRV Warhead":"player_stats_table.unit.mirvw"};return v`
      <div class="mt-4 p-3 bg-red-500/10 border border-red-500/20 rounded-lg">
        <div
          class="text-xs font-bold text-red-400 uppercase tracking-widest mb-2"
        >
          ${f("private_lobby.disabled_units")}
        </div>
        <div class="flex flex-wrap gap-2">
          ${this.gameConfig.disabledUnits.map(e=>{const r=t[e],i=r?f(r):e;return v`
              <span
                class="px-2 py-1 bg-red-500/20 text-red-200 text-xs rounded font-bold border border-red-500/30"
              >
                ${i}
              </span>
            `})}
        </div>
      </div>
    `}updateFromLobby(t){if(this.players=t.clients??[],this.lobbyStartAt=t.startsAt??null,this.syncCountdownTimer(),t.gameConfig){const e=this.gameConfig?.gameMap!==t.gameConfig.gameMap;this.gameConfig=t.gameConfig,e&&this.loadNationCount()}this.lobbyCreatorClientID=t.lobbyCreatorClientID??null}startLobbyUpdates(){if(this.stopLobbyUpdates(),!this.eventBus){console.warn("JoinLobbyModal: eventBus not set, cannot subscribe to lobby updates");return}this.eventBus.on(po,this.handleLobbyInfo)}stopLobbyUpdates(){this.eventBus?.off(po,this.handleLobbyInfo)}syncCountdownTimer(){if(this.lobbyStartAt===null){this.clearCountdownTimer();return}this.countdownTimerId===null&&(this.countdownTimerId=window.setInterval(()=>{this.checkForJoinTimeout(),this.requestUpdate()},1e3))}clearCountdownTimer(){this.countdownTimerId!==null&&(clearInterval(this.countdownTimerId),this.countdownTimerId=null)}checkForJoinTimeout(){this.handledJoinTimeout||!this.isConnecting||this.lobbyStartAt===null||!this.isModalOpen||Date.now()<this.lobbyStartAt||(this.handledJoinTimeout=!0,window.dispatchEvent(new CustomEvent("show-message",{detail:{message:f("public_lobby.join_timeout"),color:"red",duration:3500}})),this.closeAndLeave())}async loadNationCount(){if(!this.gameConfig){this.nationCount=0;return}const t=this.gameConfig.gameMap;try{const r=await Ln.getMapData(t).manifest();this.gameConfig?.gameMap===t&&(this.nationCount=r.nations.length)}catch(e){console.warn("Failed to load nation count",e),this.gameConfig?.gameMap===t&&(this.nationCount=0)}}isValidLobbyId(t){return Ea.test(t)}normalizeLobbyId(t){const e=t.trim();if(!e)return null;const r=this.extractLobbyIdFromUrl(e).trim();return this.isValidLobbyId(r)?r:null}sanitizeForLog(t){return t.replace(/[\r\n]/g,"")}extractLobbyIdFromUrl(t){if(!t.startsWith("http"))return t;try{const i=new URL(t).pathname.match(/game\/([^/]+)/)?.[1];return i&&Ea.test(i)?i:t}catch(e){return console.warn("Failed to parse lobby URL",e),t}}setLobbyId(t){this.lobbyIdInput&&(this.lobbyIdInput.value=this.extractLobbyIdFromUrl(t))}handleChange(t){const e=t.target.value.trim();this.setLobbyId(e)}async pasteFromClipboard(){try{const t=await navigator.clipboard.readText();this.setLobbyId(t)}catch(t){console.error("Failed to read clipboard contents: ",t)}}async joinLobbyFromInput(){const t=this.normalizeLobbyId(this.lobbyIdInput.value);if(!t){this.showMessage(f("private_lobby.not_found"),"red");return}this.lobbyIdInput.value=t,console.log(`Joining lobby with ID: ${this.sanitizeForLog(t)}`),this.startTrackingLobby(t);try{if(await this.checkActiveLobby(t))return;switch(await this.checkArchivedGame(t)){case"success":return;case"not_found":this.resetTrackingState(),this.showMessage(f("private_lobby.not_found"),"red");return;case"version_mismatch":this.resetTrackingState(),this.showMessage(f("private_lobby.version_mismatch"),"red");return;case"error":this.resetTrackingState(),this.showMessage(f("private_lobby.error"),"red");return}}catch(e){console.error("Error checking lobby existence:",e),this.resetTrackingState(),this.showMessage(f("private_lobby.error"),"red")}}showMessage(t,e="green"){window.dispatchEvent(new CustomEvent("show-message",{detail:{message:t,duration:3e3,color:e}}))}async checkActiveLobby(t){const r=`/${(await Ut()).workerPath(t)}/api/game/${t}/exists`,i=await fetch(r,{method:"GET",headers:{"Content-Type":"application/json"}});if(!i.ok||!(i.headers.get("content-type")??"").includes("application/json"))return!1;let a;try{a=await i.json()}catch(s){return console.warn("Failed to parse active lobby response",s),!1}return a.exists?(this.showMessage(f("private_lobby.joined_waiting")),this.dispatchEvent(new CustomEvent("join-lobby",{detail:{gameID:t,source:"private"},bubbles:!0,composed:!0})),!0):!1}async checkArchivedGame(t){const e=await fetch(`${Wt()}/game/${t}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(e.status===404)return"not_found";if(e.status!==200)return"error";const r=await e.json(),i=yk.safeParse(r);if(!i.success)return"version_mismatch";if(window.GIT_COMMIT!=="DEV"&&i.data.gitCommit!==window.GIT_COMMIT){const n=this.sanitizeForLog(t);return console.warn(`Git commit hash mismatch for game ${n}`,r.details),"version_mismatch"}return this.leaveLobbyOnClose=!1,this.dispatchEvent(new CustomEvent("join-lobby",{detail:{gameID:t,gameRecord:i.data,source:"private"},bubbles:!0,composed:!0})),"success"}};hr([Vt("#lobbyIdInput")],qt.prototype,"lobbyIdInput",2);hr([L({attribute:!1})],qt.prototype,"eventBus",2);hr([M()],qt.prototype,"players",2);hr([M()],qt.prototype,"playerCount",2);hr([M()],qt.prototype,"gameConfig",2);hr([M()],qt.prototype,"currentLobbyId",2);hr([M()],qt.prototype,"currentClientID",2);hr([M()],qt.prototype,"nationCount",2);hr([M()],qt.prototype,"lobbyStartAt",2);hr([M()],qt.prototype,"isConnecting",2);hr([M()],qt.prototype,"lobbyCreatorClientID",2);qt=hr([F("join-lobby-modal")],qt);var LR=Object.defineProperty,OR=Object.getOwnPropertyDescriptor,Df=(t,e,r,i)=>{for(var n=i>1?void 0:i?OR(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&LR(e,r,n),n};let Zc=class extends gt{constructor(){super(...arguments),this.languageList=[],this.currentLang="en",this.selectLanguage=t=>{this.dispatchEvent(new CustomEvent("language-selected",{detail:{lang:t},bubbles:!0,composed:!0})),this.close()}}render(){const t=v`
      <div
        class="h-full flex flex-col bg-black/60 backdrop-blur-md rounded-2xl border border-white/10 overflow-hidden select-none"
      >
        <!-- Header -->
        ${It({title:f("select_lang.title"),onBack:this.close,ariaLabel:f("common.back")})}

        <div
          class="flex-1 overflow-y-auto custom-scrollbar p-2"
        >
          <div
            class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3"
          >
            ${this.languageList.map(e=>{const r=this.currentLang===e.code,i=e.code==="debug";let n="relative group rounded-xl border transition-all duration-200 flex items-center p-3 gap-3 w-full cursor-pointer";return i?n+=" animate-pulse font-bold text-white border-2 border-dashed border-cyan-400 shadow-[0_0_15px_rgba(34,211,238,0.2)] bg-gradient-to-r from-red-600 via-yellow-600 via-green-600 via-blue-600 to-purple-600":r?n+=" bg-blue-500/20 border-blue-500/50":n+=" bg-white/5 border-white/10 hover:bg-white/10 hover:border-white/20",v`
                <button
                  class="${n}"
                  @click=${()=>this.selectLanguage(e.code)}
                >
                  <img
                    src="/flags/${e.svg}.svg"
                    class="w-8 h-6 object-contain shadow-sm rounded-sm shrink-0"
                    alt="${e.code}"
                  />
                  <div class="flex flex-col items-start min-w-0">
                    <span
                      class="text-sm font-bold uppercase tracking-wider whitespace-normal break-words w-full text-left ${r?"text-white":"text-gray-200 group-hover:text-white"}"
                      >${e.native}</span
                    >
                    <span
                      class="text-xs text-white/40 uppercase tracking-widest group-hover:text-white/60 transition-colors whitespace-normal break-words w-full text-left"
                      >${e.en}</span
                    >
                  </div>

                  ${r?v`
                        <div class="ml-auto text-blue-400 shrink-0">
                          <svg
                            xmlns="http://www.w3.org/2000/svg"
                            viewBox="0 0 24 24"
                            fill="currentColor"
                            class="w-5 h-5"
                          >
                            <path
                              fill-rule="evenodd"
                              d="M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12zm13.36-1.814a.75.75 0 10-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 00-1.06 1.06l2.25 2.25a.75.75 0 001.14-.094l3.75-5.25z"
                              clip-rule="evenodd"
                            />
                          </svg>
                        </div>
                      `:""}
                </button>
              `})}
            </div>
          </div>
        </div>
      </div>
    `;return this.inline?t:v`
      <o-modal
        title=${f("select_lang.title")}
        ?inline=${this.inline}
        .onClose=${this.close.bind(this)}
        hideHeader
        hideCloseButton
      >
        ${t}
      </o-modal>
    `}};Df([L({type:Array})],Zc.prototype,"languageList",2);Df([L({type:String})],Zc.prototype,"currentLang",2);Zc=Df([F("language-modal")],Zc);const BR={en:"English",native:"English",svg:"uk_us_flag",lang_code:"en"},NR={close:"Close",copy:"Copy",paste:"Paste",back:"Back",available:"Available",preset_max:"Max",summary_send:"Send",summary_keep:"Keep",cancel:"Cancel",send:"Send",cap_label:"Cap",cap_tooltip:"Recipient’s remaining capacity",target_dead:"Target eliminated",target_dead_note:"You can't send resources to an eliminated player.",none:"None",copied:"Copied!",click_to_copy:"Click to copy",enabled:"Enabled"},UR={title:"OpenFront (ALPHA)",login_discord:"Login with Discord",sign_in:"Sign in",discord_avatar_alt:"Discord profile avatar",user_avatar_alt:"{username}'s avatar",create:"Create Lobby",join:"Join Lobby",solo:"Solo",game_info:"Game info",wiki:"Wiki",privacy_policy:"Privacy Policy",terms_of_service:"Terms of Service",copyright:"© OpenFront™ and Contributors",play:"Play",news:"News",store:"Store",store_new_badge:"NEW",settings:"Settings",leaderboard:"Leaderboard",account:"Account",help:"Help",menu:"Menu",troubleshooting:"Troubleshooting",go_to_troubleshooting:"Go to our troubleshooting page"},zR={github_link:"on GitHub",title:"Release Notes"},HR={title:"Troubleshooting",environment:"Environment",rendering:"Rendering",power:"Power",browser:"Browser",platform:"Platform",copied_to_clipboard:"Info copied to the clipboard! Feel free to share it on our Discord if you need help.",os:"OS",device_pixel_ratio:"Device Pixel Ratio",chromium_tip:"OpenFront runs best on Chromium-based browsers.",hardware_acceleration_tip:"Make sure hardware acceleration is enabled in your browser settings for optimal performance.",renderer:"Renderer",max_texture_size:"Max Texture Size",high_precision_shaders:"High Precision Shaders",gpu:"GPU",unavailable:"Unavailable",gpu_tip:"Verify that this is the dedicated GPU, if one is available.",battery:"Battery",charging:"Charging",battery_level:"Battery Level",power_saving_tip:"Make sure that your browser is not set to power saving mode.",yes:"Yes",no:"No",unknown:"Unknown",software_rendering:"Software rendering",canvas_2d_no_gpu:"Canvas 2D (no GPU)"},FR={video_tutorial:"Video Tutorial",video_tutorial_title:"OpenFront.io Tutorial",hotkeys:"Hotkeys",table_key:"Key",table_action:"Action",action_alt_view:"Alternate view (terrain/countries)",action_attack_altclick:"Attack (when left click is set to open menu)",action_build:"Open build menu",action_emote:"Open emote menu",action_center:"Center camera on player",action_zoom:"Zoom out/in",action_move_camera:"Move camera",action_ratio_change:"Decrease/Increase attack ratio",action_reset_gfx:"Reset graphics",action_auto_upgrade:"Auto-upgrade nearest building",ui_section:"Game UI",ui_leaderboard:"Leaderboard",ui_your_team:"Your team:",ui_leaderboard_desc:"Shows the top players of the game and their names, % owned land, gold and troops. Using Show All shows all players in the game. If you don't want to see the leaderboard, click Hide.",ui_control:"Control panel",ui_control_desc:"The control panel contains the following elements:",ui_gold:"Gold - The amount of gold you have and the rate at which you gain it.",ui_attack_ratio:"Attack ratio - The amount of troops that will be used when you attack. You can adjust the attack ratio using the slider. Having more attacking troops than defending troops will make you lose fewer troops in the attack, while having less will increase the damage dealt to your attacking troops. The effect doesn't go beyond ratios of 2:1.",ui_events:"Event panel",ui_events_desc:"The Event panel displays the latest events, requests and Quick Chat messages. Some examples are:",ui_events_alliance:"Alliance - Alliance requests can be accepted or rejected. Allies can share resources and troops, but can't attack each other. Clicking Focus moves the view to the player who sent the request.",ui_events_attack:"Attacks - Incoming attacks and your outgoing attacks are shown. Click the message to center the view on the attack, nuke or Boat (transport ship). You can retreat troops by clicking the red X button. This will cost the lives of 25% of your attacking troops. If you retrieve a Boat attack, the boat returns to its starting point and will attack there if the land has been captured since. Nukes can't be retreated once launched.",ui_events_quickchat:"Quick Chat - You can see sent and received chat messages here. Send a message to a player by clicking the Quick Chat icon in their Info menu.",ui_options:"Options",ui_options_desc:"The following elements can be found inside:",ui_playeroverlay:"Player info overlay",ui_playeroverlay_desc:"When you hover over a country, the Player info overlay is displayed under Options. It shows the type of player: Human, Nation (smart bot), or Bot. A Nation's attitude towards you, ranging from Hostile to Friendly. And defending troops, gold, plus the number of Warships and various buildings the player has.",ui_wilderness:"Wilderness",option_pause:"Pause/Unpause the game - Only available in single player mode.",option_timer:"Timer - Time passed since the start of the game.",option_exit:"Exit button.",option_settings:"Settings - Open the settings menu. Inside you can toggle the Alternate view, Emojis, Dark Mode, Ninja (anonymous/random names mode), and action on left click.",radial_title:"Radial menu",radial_desc:"Right clicking (or touch on mobile) opens the Radial menu. Right click outside it to close it. From the menu you can:",radial_build:"Open the Build menu.",radial_info:"Open the Info menu.",radial_boat:"Send a Boat (transport ship) to attack at the selected location. Only available if you have access to water.",radial_donate_troops:"Donate troops equivalent to your attack ratio slider percentage to the ally you opened the radial menu on.",radial_donate_gold:"Opens the gold donation slider menu so you can quickly send allies gold.",info_title:"Info menu",info_enemy_desc:`Contains information such as the selected player's name, gold, troops, stopped trading with you, nukes sent to you, and if the player is a traitor. Stopped trading means you won't receive gold from them and they won't sent you gold via trade ships. Manually (if the player clicked "Stop trading", which lasts until you both click "Start trading") or automatically (if you betrayed your alliance, which lasts until you become allies again or after 5 minutes). Traitor displays Yes for 30 seconds when the player betrayed and attacked a player who was in an alliance with them. The icons below represent the following interactions:`,info_chat:"Send a quick chat message to the player. Select a Category, a Phrase, and if the phrase contains [P1] select a Player name to replace it with. Hit Send.",info_target:"Place a target mark on the player, marking it for all allies, used to coordinate attacks.",info_alliance:"Send an alliance request to the player. Allies can share resources and troops, but can't attack each other.",info_emoji:"Send an emoji to the player.",info_trade:'Use "Stop trading" to stop giving the player gold and receiving their gold via trade ships. If you both click "Start trading" it will start again.',info_ally_panel:"Ally info panel",info_ally_desc:"When you ally with a player, the following new icons become available:",ally_betray:"Betray your ally, ending the alliance, halting trade, and weakening your defense. Trading between you is paused for 5 minutes (or until you become allies again) and others may stop trading too. And unless the other player was a traitor themselves, you'll be marked a traitor for 30 seconds. During this time an icon will be above your name and you will have a 50% defense debuff. Bots are less likely to ally with you and players will think twice before doing so.",ally_donate:"Donate some of your troops to your ally. Used when they're low on troops and are being attacked, or when they need that extra power to crush an enemy.",ally_donate_gold:"Donate some of your gold to your ally. Used when they're low on gold and need it for buildings, or when your team member is saving for that MIRV.",build_menu_title:"Build menu",build_menu_desc:"Build these or see how many of each you already build:",build_name:"Name",build_icon:"Icon",build_desc:"Description",build_city:"City",build_city_desc:"Increases your max population. Useful when you can't expand your territory or you're about to hit your population limit.",build_factory:"Factory",build_factory_desc:"Automatically builds railroads to nearby cities, ports and other factories, and can also link up with friendly neighbors. Trains spawn regularly and give you a fixed amount of gold for each building they visit along the route, with extra gold for visiting your neighbors' buildings.",build_defense:"Defense Post",build_defense_desc:"Increases defenses around nearby borders, which show a checkered pattern. Attacks from enemies are slower and have more casualties.",build_port:"Port",build_port_desc:'Can only be built near water. Allows building Warships. Automatically sends trade ships between ports of your country and other countries (except when trade is stopped), giving gold to both sides. Trade with a player stops automatically when you attack or are attacked by a player. It resumes after 5 minutes or if you become allies. You can manually toggle trading with "Stop trading" or "Start trading".',build_warship:"Warship",build_warship_desc:"Patrols in an area, capturing enemy trade ships and destroying their Boats (transport ships) and Warships. Spawns from the nearest Port and patrols the area you first clicked to build it. You can control Warships by attack-clicking on them (see action Attack under Hotkeys) and then attack-clicking the new area you want them to move to.",build_silo:"Missile Silo",build_silo_desc:"Allows launching missiles.",build_sam:"SAM Launcher",build_sam_desc:"Can intercept enemy missiles in its 100 pixel range. The SAM has a 7.5 second cooldown.",build_atom:"Atom Bomb",build_atom_desc:"Small explosive bomb that destroys territory, buildings, ships and boats. Spawns from the nearest Missile Silo and lands in the area you first clicked to build it.",build_hydrogen:"Hydrogen Bomb",build_hydrogen_desc:"Large explosive bomb. Spawns from the nearest Missile Silo and lands in the area you first clicked to build it.",build_mirv:"MIRV",build_mirv_desc:"The most powerful bomb in the game. Splits up into smaller bombs that will cover a huge range of territory. Only damages the player that you first clicked on to build it. Spawns from the nearest Missile Silo and lands in the area you first clicked to build it.",player_icons:"Player icons",troubleshooting_desc:"If you experience performance issues, crashes, or other problems while playing OpenFront, please visit our Troubleshooting page for help diagnosing and fixing common issues:",icon_desc:"Examples of some of the ingame icons you will encounter and what they mean:",icon_crown:"Crown - Number 1. This is the top player in the leaderboard.",icon_traitor:"Broken shield - Traitor. This player attacked an ally.",icon_ally:"Handshake - Ally. This player is your ally.",icon_embargo:"Dollar stop sign - Embargo. This player has stopped trading with you automatically or manually.",icon_request:"Envelope - Alliance request. This player has sent you an alliance request.",info_enemy_panel:"Enemy info panel",exit_confirmation:"Are you sure you want to exit the game?",bomb_direction:"Atom / Hydrogen bomb arc direction",icon_alt_player_leaderboard:"Player Leaderboard Icon",icon_alt_team_leaderboard:"Team Leaderboard Icon"},qR={random_spawn:"Random spawn",toggle_achievements:"Toggle achievements",sign_in_for_achievements:"Sign in for achievements",options_title:"Options",bots:"Bots: ",bots_disabled:"Disabled",disable_nations:"Disable Nations",instant_build:"Instant build",infinite_gold:"Infinite gold",infinite_troops:"Infinite troops",compact_map:"Compact Map",max_timer:"Game length (minutes)",max_timer_placeholder:"Mins",max_timer_invalid:"Please enter a valid max timer value (1-120 minutes)",enables_title:"Enable Settings",start:"Start Game",options_changed_no_achievements:"Custom settings – achievements disabled",gold_multiplier:"Gold multiplier",gold_multiplier_placeholder:"2.0x",starting_gold:"Starting gold",starting_gold_placeholder:"5000000"},jR={title:"Logging in...",logging_in:"Logging in...",success:"Successfully logged in as {email}!"},GR={title:"Account",connected_as:"Connected as",stats_overview:"Stats Overview",link_discord:"Link Discord Account",log_out:"Log Out",sign_in_desc:"Sign in to save your stats and progress",or:"OR",email_placeholder:"Enter your email address",get_magic_link:"Get Magic Link",linked_account:"Logged in as {account_name}",fetching_account:"Fetching account information...",recovery_email_sent:"Recovery email sent to {email}",not_found:"Not Found",clear_session:"Clear Session",failed_to_send_recovery_email:"Failed to send recovery email",enter_email_address:"Please enter an email address",personal_player_id:"Personal Player ID:"},VR={title:"Leaderboard",ranked_tab:"1v1 Ranked",clans_tab:"Clans",loading:"Loading...",error:"Error loading leaderboard",no_stats:"No stats available",no_data_yet:"No Data Yet",clan:"Clan",player:"Player",games:"Games",elo:"ELO",win_score:"Win Score",win_score_tooltip:"Weighted wins based on clan participation and match difficulty",loss_score:"Loss Score",loss_score_tooltip:"Weighted losses based on clan participation and match difficulty",win_loss_ratio:"Win/Loss",ratio:"Ratio",rank:"Rank",try_again:"Try Again",your_ranking:"Your Ranking"},WR={title:"Game info",players:"Players",atoms:"Atoms",hydros:"Hydros",mirv:"MIRV",bombs:"Bombs",total_gold:"Total",all_gold:"All gold",trade:"Trade",train_trade:"Train",naval_trade:"Tradeship",conquest_gold:"Conquered player gold",stolen_gold:"Stolen with warships",num_of_conquests_humans:"Player kills",num_of_conquests_bots:"Bot kills",duration:"Duration",survival_time:"Survival time",war:"War",economy:"Economy",conquests:"Conquests",pirate:"Pirate",conquered:"Conquered",loading_game_info:"Loading game stats",no_winner:"This game ended with no winner (or a Nation won)"},KR={map:"Map",featured:"Featured",all:"All",world:"World",giantworldmap:"Giant World Map",europe:"Europe",mena:"MENA",northamerica:"North America",oceania:"Oceania",blacksea:"Black Sea",africa:"Africa",asia:"Asia",mars:"Mars",southamerica:"South America",britanniaclassic:"Britannia (Classic)",britannia:"Britannia",gatewaytotheatlantic:"Gateway to the Atlantic",australia:"Australia",random:"Random",iceland:"Iceland",pangaea:"Pangaea",eastasia:"East Asia",betweentwoseas:"Between Two Seas",faroeislands:"Faroe Islands",deglaciatedantarctica:"Deglaciated Antarctica",europeclassic:"Europe (Classic)",falklandislands:"Falkland Islands",baikal:"Baikal",halkidiki:"Halkidiki",straitofgibraltar:"Strait of Gibraltar",italia:"Italia",japan:"Japan",yenisei:"Yenisei",pluto:"Pluto",montreal:"Montreal",newyorkcity:"New York City",achiran:"Achiran",baikalnukewars:"Baikal (Nuke Wars)",fourislands:"Four Islands",gulfofstlawrence:"Gulf of St. Lawrence",lisbon:"Lisbon",svalmel:"Svalmel",manicouagan:"Manicouagan",lemnos:"Lemnos",sierpinski:"Sierpinski",thebox:"The Box",twolakes:"Two Lakes",straitofhormuz:"Strait of Hormuz",surrounded:"Surrounded",didier:"Didier",didierfrance:"Didier (France)",amazonriver:"Amazon River"},YR={featured:"Featured",continental:"Continental",regional:"Regional",fantasy:"Other",special:"Special",arcade:"Arcade"},XR={loading:"Loading...",error:"Error"},ZR={title:"Join Private Lobby",enter_id:"Enter Lobby ID",join_lobby:"Join Lobby",not_found:"Lobby not found. Please check the ID and try again.",error:"An error occurred. Please try again or contact support.",joined_waiting:"Lobby joined! Waiting for host to start...",version_mismatch:"This game was created with a different version. Cannot join.",disabled_units:"Disabled Units"},QR={title:"Waiting for Game Start...",join:"Join next Game",teams_Duos:"{team_count} teams of 2 (Duos)",teams_Trios:"{team_count} teams of 3 (Trios)",teams_Quads:"{team_count} teams of 4 (Quads)",waiting_for_players:"Waiting for players",connecting:"Connecting to lobby...",starting_in:"Starting in {time}",starting_game:"Starting game…",teams_hvn:"Humans vs Nations",teams_hvn_detailed:"{num} Humans vs {num} Nations",teams:"{num} teams",players_per_team:"of {num}",started:"Started",status:"Status",join_timeout:"You didn't enter the game in time."},JR={title:"1v1 Ranked Matchmaking (ALPHA)",connecting:"Connecting to matchmaking server...",searching:"Searching for game...",waiting_for_game:"Waiting for game to start...",elo:"Your ELO: {elo}"},eD={enter_username:"Enter your username",not_string:"Username must be a string.",too_short:"Username must be at least {min} characters long.",too_long:"Username must not exceed {max} characters.",invalid_chars:"Username can only contain letters, numbers, spaces, and underscores.",tag:"TAG",tag_too_short:"Clan tag must be 2-5 alphanumeric characters.",tag_invalid_chars:"Clan tag can only contain letters and numbers."},tD={title:"Create Private Lobby",label:"Private",mode:"Mode",team_count:"Number of Teams",team_type:"Team Type",options_title:"Options",bots:"Bots: ",bots_disabled:"Disabled",player_immunity_duration:"PVP immunity duration (minutes)",disable_nations:"Disable Nations",max_timer:"Game length (minutes)",mins_placeholder:"Mins",instant_build:"Instant build",infinite_gold:"Infinite gold",donate_gold:"Donate gold",infinite_troops:"Infinite troops",donate_troops:"Donate troops",compact_map:"Compact Map",enables_title:"Enable Settings",player:"Player",players:"Players",nation_players:"Nations",nation_player:"Nation",waiting:"Waiting for players...",random_spawn:"Random spawn",start:"Start Game",host_badge:"Host",assigned_teams:"Assigned Teams",empty_teams:"Empty Teams",empty_team:"Empty",remove_player:"Remove {username}",teams_Duos:"Duos (teams of 2)",teams_Trios:"Trios (teams of 3)",teams_Quads:"Quads (teams of 4)","teams_Humans Vs Nations":"Humans vs Nations",starting_gold:"Starting gold",crowded:"Crowded modifier"},rD={red:"Red",blue:"Blue",teal:"Teal",purple:"Purple",yellow:"Yellow",orange:"Orange",green:"Green",bot:"Bot"},iD={title:"Game is Starting...",credits:"Credits",code_license:"Code licensed under AGPL-3.0 (no warranty)"},nD={difficulty:"Nation difficulty",easy:"Easy",medium:"Medium",hard:"Hard",impossible:"Impossible"},aD={ffa:"Free for All",teams:"Teams"},sD={random_spawn:"Random Spawn",compact_map:"Compact Map",crowded:"Crowded",starting_gold:"5M Starting Gold"},oD={title:"Select Language"},lD={city:"City",defense_post:"Defense Post",port:"Port",warship:"Warship",missile_silo:"Missile Silo",sam_launcher:"SAM Launcher",atom_bomb:"Atom Bomb",hydrogen_bomb:"Hydrogen Bomb",mirv:"MIRV",factory:"Factory"},cD={title:"Settings",tab_basic:"Basic Settings",tab_keybinds:"Keybinds",dark_mode_label:"Dark Mode",dark_mode_desc:"Toggle the site’s appearance between light and dark themes",emojis_label:"Emojis",emojis_desc:"Toggle whether emojis are shown in game",alert_frame_label:"Alert Frame",alert_frame_desc:"Toggle the alert frame. When enabled, the frame will be displayed when you are betrayed or attacked over land.",special_effects_label:"Special effects",special_effects_desc:"Toggle special effects. Deactivate to improve performances",structure_sprites_label:"Structure Sprites",structure_sprites_desc:"Toggle structure sprites",cursor_cost_label_label:"Cursor Build Cost",cursor_cost_label_desc:"Show a cost pill under the build cursor icon",anonymous_names_label:"Hidden Names",anonymous_names_desc:"Hide real player names with random ones on your screen.",lobby_id_visibility_label:"Hidden Lobby IDs",lobby_id_visibility_desc:"Hide Lobby ID in private lobby creation",toggle_visibility:"Toggle Visibility",left_click_label:"Left Click to Open Menu",left_click_desc:"When ON, left-click opens menu and sword button attacks. When OFF, left-click attacks directly.",left_click_menu:"Left Click Menu",attack_ratio_label:"⚔️ Attack Ratio",attack_ratio_desc:"What percentage of your troops to send in an attack (1–100%)",territory_patterns_label:"🏳️ Territory Skins",territory_patterns_desc:"Choose whether to display territory skin designs in game",performance_overlay_label:"Performance Overlay",performance_overlay_desc:"Toggle the performance overlay. When enabled, the performance overlay will be displayed. Press shift-D during game to toggle.",easter_writing_speed_label:"Writing Speed Multiplier",easter_writing_speed_desc:"Adjust how fast you pretend to code (x1–x100)",easter_bug_count_label:"Bug Count",easter_bug_count_desc:"How many bugs you're okay with (0–1000, emotionally)",press_a_key:"Press a key",view_options:"View Options",toggle_view:"Toggle View",toggle_view_desc:"Alternate view (terrain/countries)",build_controls:"Build Controls",build_city:"Build City",build_city_desc:"Build a City under your cursor.",build_factory:"Build Factory",build_factory_desc:"Build a Factory under your cursor.",build_defense_post:"Build Defense Post",build_defense_post_desc:"Build a Defense Post under your cursor.",build_port:"Build Port",build_port_desc:"Build a Port under your cursor.",build_warship:"Build Warship",build_warship_desc:"Build a Warship under your cursor.",build_missile_silo:"Build Missile Silo",build_missile_silo_desc:"Build a Missile Silo under your cursor.",build_sam_launcher:"Build SAM Launcher",build_sam_launcher_desc:"Build a SAM Launcher under your cursor.",build_atom_bomb:"Build Atom Bomb",build_atom_bomb_desc:"Build an Atom Bomb under your cursor.",build_hydrogen_bomb:"Build Hydrogen Bomb",build_hydrogen_bomb_desc:"Build a Hydrogen Bomb under your cursor.",build_mirv:"Build MIRV",build_mirv_desc:"Build a MIRV under your cursor.",menu_shortcuts:"Menu Shortcuts",build_menu_modifier:"Build Menu Modifier",build_menu_modifier_desc:"Hold this key while clicking to open the build menu.",emoji_menu_modifier:"Emoji Menu Modifier",emoji_menu_modifier_desc:"Hold this key while clicking to open the emoji menu.",attack_ratio_controls:"Attack Ratio Controls",attack_ratio_up:"Increase Attack Ratio",attack_ratio_up_desc:"Increase attack ratio by 10%",attack_ratio_down:"Decrease Attack Ratio",attack_ratio_down_desc:"Decrease attack ratio by 10%",attack_keybinds:"Attack Keybinds",boat_attack:"Boat Attack",boat_attack_desc:"Send a boat attack to the tile under your cursor.",ground_attack:"Ground Attack",ground_attack_desc:"Send a ground attack to the tile under your cursor.",swap_direction:"Swap Rocket Direction",swap_direction_desc:"Toggle rocket launch direction (up/down).",zoom_controls:"Zoom Controls",zoom_out:"Zoom Out",zoom_out_desc:"Zoom out the map",zoom_in:"Zoom In",zoom_in_desc:"Zoom in the map",camera_movement:"Camera Movement",center_camera:"Center Camera",center_camera_desc:"Center camera on player",move_up:"Move Camera Up",move_up_desc:"Move the camera upward",move_left:"Move Camera Left",move_left_desc:"Move the camera to the left",move_down:"Move Camera Down",move_down_desc:"Move the camera downward",move_right:"Move Camera Right",move_right_desc:"Move the camera to the right",reset:"Reset",unbind:"Unbind",on:"On",off:"Off",toggle_terrain:"Toggle Terrain",exit_game_label:"Exit Game",exit_game_info:"Return to main menu",background_music_volume:"Background Music Volume",sound_effects_volume:"Sound Effects Volume",keybind_conflict_error:"The key {key} is already bound to another action."},uD={title:"Quick Chat",to:"Sent {user}: {msg}",from:"From {user}: {msg}",category:"Category",phrase:"Phrase",player:"Player",send:"Send",search:"Search player...",build:"Build your message...",cat:{help:"Help",attack:"Attack",defend:"Defend",greet:"Greetings",misc:"Miscellaneous",warnings:"Warnings"},help:{troops:"Please give me troops!",troops_frontlines:"Send troops to the frontlines!",gold:"Please give me gold!",no_attack:"Please don't attack me!",sorry_attack:"Sorry, I didn’t mean to attack.",alliance:"Alliance?",help_defend:"Help me defend against [P1]!",trade_partners:"Let's be trade partners!"},attack:{attack:"Attack [P1]!",mirv:"Launch a MIRV at [P1]!",focus:"Focus fire on [P1]!",finish:"Let's finish off [P1]!",build_warships:"Build Warships!"},defend:{defend:"Defend [P1]!",defend_from:"Defend from [P1]!",dont_attack:"Don’t attack [P1]!",ally:"[P1] is my ally!",build_posts:"Build Defense Posts!"},greet:{hello:"Hello!",good_job:"Good job!",good_luck:"Good luck!",have_fun:"Have fun!",gg:"GG!",nice_to_meet:"Nice to meet you!",well_played:"Well played!",hi_again:"Hi again!",bye:"Bye!",thanks:"Thanks!",oops:"Oops, wrong button!",trust_me:"You can trust me. Promise!",trust_broken:"I trusted you...",ruining_games:"You're ruining both of our games.",dont_do_that:"Don't do that!",same_team:"I'm on your side!"},misc:{go:"Let’s go!",strategy:"Nice strategy!",fun:"This game is fun!",team_up:"Let’s team up against [P1]!",pr:"When will my PR finally get merged...?",build_closer:"Build closer to get trains!",coastline:"Please let me get a coastline."},warnings:{strong:"[P1] is strong.",weak:"[P1] is weak.",mirv_soon:"[P1] can launch a MIRV soon!",number1_warning:"The #1 player will win soon unless we team up!",stalemate:"Let's make peace. This is a stalemate, we will both lose.",has_allies:"[P1] has many allies.",no_allies:"[P1] has no allies.",betrayed:"[P1] betrayed their ally!",betrayed_me:"[P1] betrayed me!",getting_big:"[P1] is growing too fast!",danger_base:"[P1] is unprotected!",saving_for_mirv:"[P1] is saving up to launch a MIRV.",mirv_ready:"[P1] has enough gold to launch a MIRV!",snowballing:"[P1] is snowballing too fast!",cheating:"[P1] is cheating!",stop_trading:"Stop trading with [P1]!"}},dD={desc:{atom_bomb:"Small explosion",hydrogen_bomb:"Large explosion",mirv:"Huge explosion, only targets selected player",missile_silo:"Used to launch nukes",sam_launcher:"Defends against incoming nukes",warship:"Captures trade ships, destroys ships and boats",port:"Sends trade ships to generate gold",defense_post:"Increases defenses of nearby borders",city:"Increases max population",factory:"Creates railroads and spawns trains"},not_enough_money:"Not enough money"},hD={support_openfront:"Support OpenFront!",territory_pattern:"Purchase a territory skin to go ad-free!",died:"You died",your_team:"Your team won!",other_team:"{team} team has won!",you_won:"You Won!",other_won:"{player} has won!",nation_won:"Nation {nation} has won!",exit:"Exit Game",keep:"Keep Playing",spectate:"Spectate",requeue:"Play Again",wishlist:"Wishlist on Steam!",join_discord:"Join Our Discord Community!",discord_description:"Connect with players, discover new features, and win prizes!",join_server:"Join Server",youtube_tutorial:"Need some help?"},pD={hide:"Hide",player:"Player",team:"Team",owned:"Owned",gold:"Gold",maxtroops:"Max troops",launchers:"Launchers",sams:"SAMs",warships:"Warships",cities:"Cities",show_control:"Show Control",show_units:"Show Units"},fD={retreating:"retreating",retaliate:"Retaliate",boat:"Boat",alliance_request_status:"{name} {status} your alliance request",alliance_accepted:"accepted",alliance_rejected:"rejected",alliance_nukes_destroyed_outgoing:"{count, plural, one {# nuke launched toward {name} was destroyed due to the alliance} other {# nukes launched toward {name} were destroyed due to the alliance}}",alliance_nukes_destroyed_incoming:"{count, plural, one {# nuke launched by {name} was destroyed due to the alliance} other {# nukes launched by {name} were destroyed due to the alliance}}",duration_second:"1 second",betrayal_description:"You broke your alliance with {name}, making you a TRAITOR ({malusPercent}% defense debuff for {durationText})",duration_seconds_plural:"{seconds} seconds",betrayed_you:"{name} broke their alliance with you",about_to_expire:"Your alliance with {name} is about to expire!",alliance_expired:"Your alliance with {name} expired",attack_request:"{name} requests you attack {target}",sent_emoji:"Sent {name}: {emoji}",renew_alliance:"Request to renew",request_alliance:"{name} requests an alliance!",focus:"Focus",accept_alliance:"Accept",reject_alliance:"Reject",alliance_renewed:"Your alliance with {name} has been renewed",wants_to_renew_alliance:"{name} wants to renew your alliance",ignore:"Ignore",unit_voluntarily_deleted:"Unit voluntarily deleted",betrayal_debuff_ends:"{time} seconds left until betrayal debuff ends",attack_cancelled_retreat:"Attack cancelled, {troops} soldiers killed during retreat",received_gold_from_captured_ship:"Received {gold} gold from ship captured from {name}",received_gold_from_trade:"Received {gold} gold from trade with {name}",received_gold_from_conquest:"Conquered {name}, received {gold} gold",conquered_no_gold:"Conquered {name} (didn't play, no gold awarded)",missile_intercepted:"Missile intercepted {unit}",mirv_warheads_intercepted:"{count, plural, one {{count} MIRV warhead intercepted} other {{count} MIRV warheads intercepted}}",sent_troops_to_player:"Sent {troops} troops to {name}",received_troops_from_player:"Received {troops} troops from {name}",sent_gold_to_player:"Sent {gold} gold to {name}",received_gold_from_player:"Received {gold} gold from {name}",unit_captured_by_enemy:"Your {unit} was captured by {name}",captured_enemy_unit:"Captured {unit} from {name}",unit_destroyed:"Your {unit} was destroyed",no_boats_available:"No boats available, max {max}"},gD={player:"Player",nation:"Nation",bot:"Bot"},mD={hostile:"Hostile",distrustful:"Distrustful",neutral:"Neutral",friendly:"Friendly",default:"Default"},bD={gold:"Gold",troops:"Troops",betrayals:"Betrayals",traitor:"Traitor",trading:"Trading",active:"Active",stopped:"Stopped",alliance_time_remaining:"Alliance Expires In",start_trade:"Start Trading",stop_trade:"Stop Trading",stop_trade_all:"Stop Trading with All",start_trade_all:"Start Trading with All",alliances:"Alliances",chat:"Chat",target:"Target",break_alliance:"Break Alliance",send_alliance:"Send Alliance",send_troops:"Send Troops",send_gold:"Send Gold",emotes:"Emojis",moderation:"Moderation",kick:"Kick player",kicked:"Already kicked",kick_confirm:`Kick {name}?

They won't be able to rejoin this game.`,arc_up:"Upward arc",arc_down:"Downward arc",flip_rocket_trajectory:"Flip rocket trajectory"},vD={duplicate_session:"Kicked from game (you may have been playing on another tab)",lobby_creator:"Kicked by lobby creator"},yD={title_with_name:"Send Troops to {name}",available_tooltip:"Your current available troops",slider_tooltip:"{{percent}}% • {{amount}}",aria_slider:"Troops slider",capacity_note:"Receiver can accept only {{amount}} right now."},wD={title_with_name:"Send Gold to {name}",available_tooltip:"Your current available gold",aria_slider:"Amount slider",slider_tooltip:"{{percent}}% • {{amount}}"},xD={replay_speed:"Replay speed",game_speed:"Game speed",fastest_game_speed:"Max"},_D={crashed:"Game crashed!",connection_error:"Connection error!",paste_discord:"Please paste the following in your bug report in Discord:",copy_clipboard:"Copy to clipboard",copied:"Copied!",failed_copy:"Failed to copy",spawn_failed:{title:"Spawn failed",description:"Automatic spawn selection failed. You can't play this game."},desync_notice:"You are desynced from other players. What you see might differ from other players."},kD={reset:"Reset",copy_json_title:"Copy current performance metrics as JSON",copy_clipboard:"Copy JSON",copied:"Copied!",failed_copy:"Failed to copy",fps:"FPS:",avg_60s:"Avg (60s):",frame:"Frame:",tick_exec:"Tick Exec:",tick_delay:"Tick Delay:",layers_header:"Layers (avg / max, sorted by total time):"},SD={choose_spawn:"Choose a starting location",random_spawn:"Random spawn is enabled. Selecting starting location for you...",singleplayer_game_paused:"Game paused",multiplayer_game_paused:"Game paused by Lobby Creator"},AD={title:"Skins",colors:"Colors",purchase:"Purchase",show_only_owned:"My Skins",all_owned:"All skins owned! Check back later for new items.",not_logged_in:"Not logged in",pattern:{default:"Default"},select_skin:"Select Skin",selected:"selected"},CD={title:"Select Flag",button_title:"Pick a flag!",search_flag:"Search..."},TD={delete_unit_title:"Delete Unit",delete_unit_description:"Click to delete the nearest unit"},ED={avatar_alt:"Avatar"},MD={building_stats:"Building Statistics",ship_arrivals:"Ship Arrivals",nuke_stats:"Nuke Statistics",player_metrics:"Player Metrics",building:"Building",ship_type:"Ship Type",weapon:"Weapon",built:"Built",destroyed:"Destroyed",captured:"Captured",lost:"Lost",hits:"Hits",launched:"Launched",landed:"Landed",sent:"Sent",arrived:"Arrived",attack:"Attack",received:"Received",cancelled:"Cancelled",count:"Count",gold:"Gold",workers:"Workers",war:"War",trade:"Trade",steal:"Steal",unit:{city:"City",port:"Port",defp:"Defense Post",saml:"SAM Launcher",silo:"Missile Silo",wshp:"Warship",fact:"Factory",trade:"Trade Ship",trans:"Transport Ship",abomb:"Atom Bomb",hbomb:"Hydrogen Bomb",mirv:"MIRV",mirvw:"MIRV Warhead"}},ID={recent_games:"Recent Games",game_id:"Game ID",mode:"Mode",mode_ffa:"Free-for-All",mode_team:"Team",replay:"Replay",details:"Details",ranking:"Ranking",map:"Map",difficulty:"Difficulty",type:"Type"},PD={public:"Public",private:"Private",solo:"Solo",mode:"Mode",stats_wins:"Wins",stats_losses:"Losses",stats_wlr:"Win:Loss Ratio",stats_games_played:"Games Played",mode_ffa:"Free-for-All",mode_team:"Team",no_stats:"No stats recorded for this selection."},$D={play_ranked:"1v1 Ranked Matchmaking",description:"(ALPHA)",login_required:"Login to play ranked!",must_login:"You must be logged in to play ranked matchmaking."},RD={lang:BR,common:NR,main:UR,news:zR,troubleshooting:HR,help_modal:FR,single_modal:qR,token_login_modal:jR,account_modal:GR,leaderboard_modal:VR,game_info_modal:WR,map:KR,map_categories:YR,map_component:XR,private_lobby:ZR,public_lobby:QR,matchmaking_modal:JR,username:eD,host_modal:tD,team_colors:rD,game_starting_modal:iD,difficulty:nD,game_mode:aD,public_game_modifier:sD,select_lang:oD,unit_type:lD,user_setting:cD,chat:uD,build_menu:dD,win_modal:hD,leaderboard:pD,events_display:fD,player_type:gD,relation:mD,player_panel:bD,kick_reason:vD,send_troops_modal:yD,send_gold_modal:wD,replay_panel:xD,error_modal:_D,performance_overlay:kD,heads_up_message:SD,territory_patterns:AD,flag_input:CD,radial_menu:TD,discord_user_header:ED,player_stats_table:MD,game_list:ID,player_stats_tree:PD,matchmaking_button:$D},DD=[{code:"ar",native:"العربية",en:"Arabic",svg:"ps"},{code:"bg",native:"Български",en:"Bulgarian",svg:"bg"},{code:"bn",native:"বাংলা",en:"Bengali",svg:"bd"},{code:"cs",native:"Čeština",en:"Czech",svg:"cz"},{code:"da",native:"Dansk",en:"Danish",svg:"dk"},{code:"de",native:"Deutsch",en:"German",svg:"de"},{code:"el",native:"Ελληνικά",en:"Greek",svg:"gr"},{code:"en",native:"English",en:"English",svg:"uk_us_flag"},{code:"eo",native:"Esperanto",en:"Esperanto",svg:"eo"},{code:"es",native:"Español",en:"Spanish",svg:"es"},{code:"fa",native:"فارسی",en:"Persian",svg:"ir"},{code:"fi",native:"suomi",en:"Finnish",svg:"fi"},{code:"fr",native:"Français",en:"French",svg:"fr"},{code:"gl",native:"Galego",en:"Galician",svg:"es-ga"},{code:"he",native:"עברית",en:"Hebrew",svg:"il"},{code:"hi",native:"हिन्दी",en:"Hindi",svg:"in"},{code:"hu",native:"Magyar",en:"Hungarian",svg:"hu"},{code:"id",native:"Bahasa Indonesia",en:"Indonesian",svg:"id"},{code:"it",native:"Italiano",en:"Italian",svg:"it"},{code:"ja",native:"日本語",en:"Japanese",svg:"jp"},{code:"ko",native:"한국어",en:"Korean",svg:"kr"},{code:"mk",native:"Македонски",en:"Macedonian",svg:"mk"},{code:"nl",native:"Nederlands",en:"Dutch",svg:"nl"},{code:"pl",native:"Polski",en:"Polish",svg:"pl"},{code:"pt-BR",native:"Português brasileiro",en:"Brazilian Portuguese",svg:"br"},{code:"pt-PT",native:"Português",en:"European Portuguese",svg:"pt"},{code:"ru",native:"Русский",en:"Russian",svg:"ru"},{code:"sh",native:"Srpsko-Hrvatski",en:"Serbo-Croatian",svg:"sh_yugo"},{code:"sk",native:"Slovenčina",en:"Slovak",svg:"sk"},{code:"sl",native:"Slovenščina",en:"Slovenian",svg:"si"},{code:"sv-SE",native:"Svenska",en:"Swedish",svg:"se"},{code:"tp",native:"toki pona",en:"Toki Pona",svg:"toki_pona"},{code:"tr",native:"Türkçe",en:"Turkish",svg:"tr"},{code:"uk",native:"Українська",en:"Ukrainian",svg:"ua"},{code:"zh-CN",native:"简体中文",en:"Chinese Simplified",svg:"cn"}];var LD=Object.defineProperty,OD=Object.getOwnPropertyDescriptor,Kn=(t,e,r,i)=>{for(var n=i>1?void 0:i?OD(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&LD(e,r,n),n};let Ui=class extends V{constructor(){super(...arguments),this.currentLang="en",this.languageList=[],this.debugMode=!1,this.isVisible=!0,this.debugKeyPressed=!1,this.languageMetadata=DD,this.languageCache=new Map,this.handleLanguageSelected=t=>{t.detail&&t.detail.lang&&this.changeLanguage(t.detail.lang)}}createRenderRoot(){return this}connectedCallback(){super.connectedCallback(),this.setupDebugKey(),this.initializeLanguage(),window.addEventListener("language-selected",this.handleLanguageSelected)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("language-selected",this.handleLanguageSelected)}setupDebugKey(){window.addEventListener("keydown",t=>{t.key?.toLowerCase()==="t"&&(this.debugKeyPressed=!0)}),window.addEventListener("keyup",t=>{t.key?.toLowerCase()==="t"&&(this.debugKeyPressed=!1)})}getClosestSupportedLang(t){if(!t)return"en";if(t==="debug")return"debug";const e=new Set(this.languageMetadata.map(n=>n.code));if(e.has(t))return t;const r=t.slice(0,2),i=Array.from(e).filter(n=>n.startsWith(r));return i.length>0?(i.sort((n,a)=>a.length-n.length),i[0]):"en"}async initializeLanguage(){const t=navigator.language,e=localStorage.getItem("lang"),r=this.getClosestSupportedLang(e??t),[i,n]=await Promise.all([this.loadLanguage("en"),this.loadLanguage(r)]);this.defaultTranslations=i,this.translations=n,this.currentLang=r,await this.loadLanguageList(),this.applyTranslation()}async loadLanguage(t){if(!t)return{};const e=this.languageCache.get(t);if(e)return e;if(t==="debug"){const r={};return this.languageCache.set(t,r),r}if(t==="en"){const r=J0(RD);return this.languageCache.set(t,r),r}try{const r=await fetch(`/lang/${encodeURIComponent(t)}.json`);if(!r.ok)throw new Error(`Failed to fetch language ${t}: ${r.status}`);const i=await r.json(),n=J0(i);return this.languageCache.set(t,n),n}catch(r){return console.error(`Failed to load language ${t}:`,r),{}}}async loadLanguageList(){try{let t=[];const e=new Intl.Locale(navigator.language).language;let r=null;(this.debugKeyPressed||this.currentLang==="debug")&&(r={code:"debug",native:"Debug",en:"Debug",svg:"xx"},this.debugMode=!0);for(const o of this.languageMetadata)o.code==="debug"&&!r||t.push({code:o.code,native:o.native,en:o.en,svg:o.svg});const i=t.find(o=>o.code===this.currentLang),n=e!==this.currentLang&&e!=="en"?t.find(o=>o.code===e):void 0,a=this.currentLang!=="en"?t.find(o=>o.code==="en"):void 0;t=t.filter(o=>o.code!==this.currentLang&&o.code!==e&&o.code!=="en"&&o.code!=="debug"),t.sort((o,l)=>o.en.localeCompare(l.en));const s=[];i&&s.push(i),a&&s.push(a),n&&s.push(n),s.push(...t),r&&s.push(r),this.languageList=s}catch(t){console.error("Failed to load language list:",t)}}async changeLanguage(t){localStorage.setItem("lang",t),this.translations=await this.loadLanguage(t),this.currentLang=t,this.applyTranslation()}applyTranslation(){const t=["single-player-modal","host-lobby-modal","join-lobby-modal","emoji-table","leader-board","leaderboard-tabs","leaderboard-player-list","leaderboard-clan-table","build-menu","win-modal","game-starting-modal","top-bar","player-panel","replay-panel","help-modal","settings-modal","username-input","public-lobby","user-setting","o-modal","o-button","territory-patterns-modal","pattern-input","fluent-slider","news-modal","news-button","account-modal","leaderboard-modal","flag-input-modal","flag-input","matchmaking-button","token-login"];document.title=this.translateText("main.title")??document.title,document.querySelectorAll("[data-i18n]").forEach(r=>{const i=r.getAttribute("data-i18n");if(i===null)return;const n=this.translateText(i);if(n===null){console.warn(`Translation key not found: ${i}`);return}r.textContent=n});const e=(r,i)=>{document.querySelectorAll(`[${r}]`).forEach(n=>{const a=n.getAttribute(r);if(a===null)return;const s=this.translateText(a);if(s===null){console.warn(`Translation key not found: ${a}`);return}n.setAttribute(i,s)})};e("data-i18n-title","title"),e("data-i18n-alt","alt"),e("data-i18n-aria-label","aria-label"),e("data-i18n-placeholder","placeholder"),t.forEach(r=>{document.querySelectorAll(r).forEach(i=>{typeof i.requestUpdate=="function"&&i.requestUpdate()})})}translateText(t,e={}){if(this.currentLang==="debug")return b2(t,e);let r;if(this.translations&&t in this.translations)r=this.translations[t];else if(this.defaultTranslations&&t in this.defaultTranslations)r=this.defaultTranslations[t];else return console.warn(`Translation key not found: ${t}`),t;for(const i in e){const n=e[i];r=r.replace(`{${i}}`,String(n))}return r}async openModal(){this.debugMode=this.debugKeyPressed,await this.loadLanguageList();const t=document.getElementById("page-language");t&&(t.languageList=[...this.languageList],t.currentLang=this.currentLang,window.showPage?.("page-language"))}close(){this.isVisible=!1,this.requestUpdate()}render(){if(!this.isVisible)return v``;const t=this.languageList.find(e=>e.code===this.currentLang)??(this.currentLang==="debug"?{svg:"xx"}:{svg:"uk_us_flag"});return v`
      <button
        id="lang-selector"
        title="Change Language"
        @click=${this.openModal}
        class="border-none bg-none cursor-pointer p-0 flex items-center justify-center"
        style="width: 28px; height: 28px;"
      >
        <img
          id="lang-flag"
          class="object-contain hover:scale-110 transition-transform duration-200"
          style="width: 28px; height: 28px;"
          src="/flags/${t.svg}.svg"
          alt="flag"
        />
      </button>
    `}};Kn([M()],Ui.prototype,"translations",2);Kn([M()],Ui.prototype,"defaultTranslations",2);Kn([M()],Ui.prototype,"currentLang",2);Kn([M()],Ui.prototype,"languageList",2);Kn([M()],Ui.prototype,"debugMode",2);Kn([M()],Ui.prototype,"isVisible",2);Ui=Kn([F("lang-selector")],Ui);function J0(t,e="",r={}){for(const i in t){const n=t[i],a=e?`${e}.${i}`:i;typeof n=="string"?r[a]=n:n&&typeof n=="object"&&!Array.isArray(n)?J0(n,a,r):console.warn("Unknown type",typeof n,n)}return r}function BD(){customElements.whenDefined("play-page").then(()=>{const t=document.getElementById("hamburger-btn"),e=document.getElementById("sidebar-menu"),r=document.getElementById("mobile-menu-backdrop");if(e&&window.innerWidth<768&&(e.style.display="flex"),!t){console.error("Hamburger button not found");return}if(t.onclick=null,!e){console.error("Sidebar menu not found");return}if(!r){console.error("Mobile menu backdrop not found");return}const i=o=>{e.classList.toggle("open",o),r.classList.toggle("open",o),document.documentElement.classList.toggle("overflow-hidden",o),t.setAttribute("aria-expanded",o?"true":"false")},n=()=>i(!1),a=()=>i(!0),s=o=>{o.stopPropagation(),o.type==="touchstart"&&o.preventDefault(),!e.classList.contains("open")?a():n()};t.addEventListener("click",s),r.addEventListener("click",n),e.addEventListener("click",o=>{if(window.innerWidth>=768)return;o.target.closest&&o.target.closest('a, button, [role="menuitem"], .nav-menu-item')&&n()}),document.addEventListener("keydown",o=>{window.innerWidth>=768||o.key==="Escape"&&e.classList.contains("open")&&n()})})}var ND=Object.defineProperty,UD=Object.getOwnPropertyDescriptor,ls=(t,e,r,i)=>{for(var n=i>1?void 0:i?UD(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&ND(e,r,n),n};let Hn=class extends V{constructor(){super(...arguments),this.clanData=null,this.isLoading=!1,this.error=null,this.sortBy="rank",this.sortOrder="asc",this.hasLoaded=!1}createRenderRoot(){return this}async ensureLoaded(){this.hasLoaded||this.isLoading||await this.loadClanLeaderboard()}async loadClanLeaderboard(){this.isLoading=!0,this.error=null;try{const t=await bC();if(!t)throw new Error("Failed to load clan leaderboard");this.clanData=t,this.hasLoaded=!0,this.dispatchEvent(new CustomEvent("date-range-change",{detail:{start:t.start,end:t.end},bubbles:!0,composed:!0}))}catch(t){console.error("loadClanLeaderboard: request failed",t),this.error=f("leaderboard_modal.error")}finally{this.isLoading=!1}}handleSort(t){this.sortBy===t?this.sortOrder=this.sortOrder==="asc"?"desc":"asc":(this.sortBy=t,this.sortOrder=t==="rank"?"asc":"desc")}getSortedClans(t){if(this.sortBy==="rank"){const r=[...t];return this.sortOrder==="asc"?r:r.reverse()}const e=[...t];return e.sort((r,i)=>{let n,a;switch(this.sortBy){case"games":n=r.games,a=i.games;break;case"winScore":n=r.weightedWins,a=i.weightedWins;break;case"lossScore":n=r.weightedLosses,a=i.weightedLosses;break;case"ratio":n=r.weightedWLRatio,a=i.weightedWLRatio;break;default:return 0}return this.sortOrder==="asc"?n-a:a-n}),e}renderLoading(){return v`
      <div
        class="flex flex-col items-center justify-center p-12 text-white h-full"
      >
        <div
          class="w-12 h-12 border-4 border-blue-500/30 border-t-blue-500 rounded-full animate-spin mb-6"
        ></div>
        <p class="text-blue-200/80 text-sm font-bold tracking-widest uppercase">
          ${f("leaderboard_modal.loading")}
        </p>
      </div>
    `}renderError(){return v`
      <div
        class="flex flex-col items-center justify-center p-12 text-white h-full"
      >
        <div
          class="bg-red-500/10 p-6 rounded-full mb-6 border border-red-500/20 shadow-lg shadow-red-500/10"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-12 w-12 text-red-500"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="1.5"
              d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
            />
          </svg>
        </div>
        <p class="mb-8 text-center text-red-100/80 font-medium">
          ${this.error??f("leaderboard_modal.error")}
        </p>
        <button
          class="px-8 py-3 bg-red-500/10 hover:bg-red-500/20 border border-red-500/30 rounded-xl text-sm font-bold uppercase transition-all active:scale-95"
          @click=${()=>this.loadClanLeaderboard()}
        >
          ${f("leaderboard_modal.try_again")}
        </button>
      </div>
    `}renderNoData(){return v`
      <div
        class="flex flex-col items-center justify-center p-12 text-white/40 h-full"
      >
        <div class="bg-white/5 p-6 rounded-full mb-6 border border-white/5">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-16 w-16 text-white/20"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="1"
              d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"
            />
          </svg>
        </div>
        <h3 class="text-xl font-bold text-white/60 mb-2">
          ${f("leaderboard_modal.no_data_yet")}
        </h3>
        <p class="text-white/30 text-sm">
          ${f("leaderboard_modal.no_stats")}
        </p>
      </div>
    `}render(){if(this.isLoading)return this.renderLoading();if(this.error)return this.renderError();if(!this.clanData||this.clanData.clans.length===0)return this.renderNoData();const{clans:t}=this.clanData,e=this.getSortedClans(t),r=Math.max(...t.map(i=>i.games),1);return v`
      <div class="h-full px-6 pb-6">
        <div
          class="h-full overflow-y-auto overflow-x-auto rounded-xl border border-white/5 bg-black/20"
        >
          <table class="w-full text-sm border-collapse">
            <thead>
              <tr
                class="text-white/40 text-[10px] uppercase tracking-wider border-b border-white/5 bg-white/2"
              >
                <th class="py-4 px-4 text-center font-bold w-16">
                  ${f("leaderboard_modal.rank")}
                </th>
                <th class="py-4 px-4 text-left font-bold">
                  ${f("leaderboard_modal.clan")}
                </th>
                <th
                  class="py-4 px-4 text-right font-bold w-32 cursor-pointer hover:text-white/60 transition-colors"
                >
                  <button
                    @click=${()=>this.handleSort("games")}
                    aria-sort=${this.sortBy==="games"?this.sortOrder==="asc"?"ascending":"descending":"none"}
                  >
                    ${f("leaderboard_modal.games")}
                    ${this.sortBy==="games"?this.sortOrder==="asc"?"↑":"↓":"↕"}
                  </button>
                </th>
                <th
                  class="py-4 px-4 text-right font-bold hidden md:table-cell cursor-pointer hover:text-white/60 transition-colors"
                  title=${f("leaderboard_modal.win_score_tooltip")}
                >
                  <button
                    @click=${()=>this.handleSort("winScore")}
                    aria-sort=${this.sortBy==="winScore"?this.sortOrder==="asc"?"ascending":"descending":"none"}
                  >
                    ${f("leaderboard_modal.win_score")}
                    ${this.sortBy==="winScore"?this.sortOrder==="asc"?"↑":"↓":"↕"}
                  </button>
                </th>
                <th
                  class="py-4 px-4 text-right font-bold hidden md:table-cell cursor-pointer hover:text-white/60 transition-colors"
                  title=${f("leaderboard_modal.loss_score_tooltip")}
                >
                  <button
                    @click=${()=>this.handleSort("lossScore")}
                    aria-sort=${this.sortBy==="lossScore"?this.sortOrder==="asc"?"ascending":"descending":"none"}
                  >
                    ${f("leaderboard_modal.loss_score")}
                    ${this.sortBy==="lossScore"?this.sortOrder==="asc"?"↑":"↓":"↕"}
                  </button>
                </th>
                <th
                  class="py-4 px-4 text-right font-bold pr-6 cursor-pointer hover:text-white/60 transition-colors"
                >
                  <button
                    @click=${()=>this.handleSort("ratio")}
                    aria-sort=${this.sortBy==="ratio"?this.sortOrder==="asc"?"ascending":"descending":"none"}
                  >
                    ${f("leaderboard_modal.win_loss_ratio")}
                    ${this.sortBy==="ratio"?this.sortOrder==="asc"?"↑":"↓":"↕"}
                  </button>
                </th>
              </tr>
            </thead>
            <tbody>
              ${e.map((i,n)=>{const a=n+1,s=a===1?"text-yellow-400 bg-yellow-400/10 ring-1 ring-yellow-400/20":a===2?"text-slate-300 bg-slate-400/10 ring-1 ring-slate-400/20":a===3?"text-amber-600 bg-amber-600/10 ring-1 ring-amber-600/20":"text-white/40 bg-white/5",o=a===1?"👑":a===2?"🥈":a===3?"🥉":String(a);return v`
                  <tr
                    class="border-b border-white/5 hover:bg-white/[0.07] transition-colors group"
                  >
                    <td class="py-3 px-4 text-center">
                      <div
                        class="w-10 h-10 mx-auto flex items-center justify-center rounded-lg font-bold font-mono text-lg ${s}"
                      >
                        ${o}
                      </div>
                    </td>
                    <td class="py-3 px-4 font-bold text-blue-300">
                      <div
                        class="px-2.5 py-1 rounded bg-blue-500/10 border border-blue-500/20 inline-block"
                      >
                        ${i.clanTag}
                      </div>
                    </td>
                    <td class="py-3 px-4 text-right">
                      <div class="flex flex-col items-end gap-1">
                        <span class="text-white font-mono font-medium"
                          >${i.games.toLocaleString()}</span
                        >
                        <div
                          class="w-24 h-1 bg-white/10 rounded-full overflow-hidden"
                        >
                          <div
                            class="h-full bg-blue-500/50 rounded-full"
                            style="width: ${i.games/r*100}%"
                          ></div>
                        </div>
                      </div>
                    </td>
                    <td
                      class="py-3 px-4 text-right font-mono text-green-400/90 hidden md:table-cell"
                    >
                      ${i.weightedWins.toLocaleString("fullwide",{maximumFractionDigits:1})}
                    </td>
                    <td
                      class="py-3 px-4 text-right font-mono text-red-400/90 hidden md:table-cell"
                    >
                      ${i.weightedLosses.toLocaleString("fullwide",{maximumFractionDigits:1})}
                    </td>
                    <td class="py-3 px-4 text-right pr-6">
                      <div class="inline-flex flex-col items-end">
                        <span
                          class="font-mono font-bold ${i.weightedWLRatio>=1?"text-green-400":"text-red-400"}"
                          >${i.weightedWLRatio.toLocaleString("fullwide",{maximumFractionDigits:2})}</span
                        >
                        <span
                          class="text-[10px] uppercase text-white/30 font-bold tracking-wider"
                          >${f("leaderboard_modal.ratio")}</span
                        >
                      </div>
                    </td>
                  </tr>
                `})}
            </tbody>
          </table>
        </div>
      </div>
    `}};ls([M()],Hn.prototype,"clanData",2);ls([M()],Hn.prototype,"isLoading",2);ls([M()],Hn.prototype,"error",2);ls([M()],Hn.prototype,"sortBy",2);ls([M()],Hn.prototype,"sortOrder",2);Hn=ls([F("leaderboard-clan-table")],Hn);class Lu extends Event{constructor(e){super(Lu.eventName,{bubbles:!1}),this.first=e.first,this.last=e.last}}Lu.eventName="rangeChanged";class Ou extends Event{constructor(e){super(Ou.eventName,{bubbles:!1}),this.first=e.first,this.last=e.last}}Ou.eventName="visibilityChanged";class Bu extends Event{constructor(){super(Bu.eventName,{bubbles:!1})}}Bu.eventName="unpinned";class zD{constructor(e){this._element=null;const r=e??window;this._node=r,e&&(this._element=e)}get element(){return this._element||document.scrollingElement||document.documentElement}get scrollTop(){return this.element.scrollTop||window.scrollY}get scrollLeft(){return this.element.scrollLeft||window.scrollX}get scrollHeight(){return this.element.scrollHeight}get scrollWidth(){return this.element.scrollWidth}get viewportHeight(){return this._element?this._element.getBoundingClientRect().height:window.innerHeight}get viewportWidth(){return this._element?this._element.getBoundingClientRect().width:window.innerWidth}get maxScrollTop(){return this.scrollHeight-this.viewportHeight}get maxScrollLeft(){return this.scrollWidth-this.viewportWidth}}class HD extends zD{constructor(e,r){super(r),this._clients=new Set,this._retarget=null,this._end=null,this.__destination=null,this.correctingScrollError=!1,this._checkForArrival=this._checkForArrival.bind(this),this._updateManagedScrollTo=this._updateManagedScrollTo.bind(this),this.scrollTo=this.scrollTo.bind(this),this.scrollBy=this.scrollBy.bind(this);const i=this._node;this._originalScrollTo=i.scrollTo,this._originalScrollBy=i.scrollBy,this._originalScroll=i.scroll,this._attach(e)}get _destination(){return this.__destination}get scrolling(){return this._destination!==null}scrollTo(e,r){const i=typeof e=="number"&&typeof r=="number"?{left:e,top:r}:e;this._scrollTo(i)}scrollBy(e,r){const i=typeof e=="number"&&typeof r=="number"?{left:e,top:r}:e;i.top!==void 0&&(i.top+=this.scrollTop),i.left!==void 0&&(i.left+=this.scrollLeft),this._scrollTo(i)}_nativeScrollTo(e){this._originalScrollTo.bind(this._element||window)(e)}_scrollTo(e,r=null,i=null){this._end!==null&&this._end(),e.behavior==="smooth"?(this._setDestination(e),this._retarget=r,this._end=i):this._resetScrollState(),this._nativeScrollTo(e)}_setDestination(e){let{top:r,left:i}=e;return r=r===void 0?void 0:Math.max(0,Math.min(r,this.maxScrollTop)),i=i===void 0?void 0:Math.max(0,Math.min(i,this.maxScrollLeft)),this._destination!==null&&i===this._destination.left&&r===this._destination.top?!1:(this.__destination={top:r,left:i,behavior:"smooth"},!0)}_resetScrollState(){this.__destination=null,this._retarget=null,this._end=null}_updateManagedScrollTo(e){this._destination&&this._setDestination(e)&&this._nativeScrollTo(this._destination)}managedScrollTo(e,r,i){return this._scrollTo(e,r,i),this._updateManagedScrollTo}correctScrollError(e){this.correctingScrollError=!0,requestAnimationFrame(()=>requestAnimationFrame(()=>this.correctingScrollError=!1)),this._nativeScrollTo(e),this._retarget&&this._setDestination(this._retarget()),this._destination&&this._nativeScrollTo(this._destination)}_checkForArrival(){if(this._destination!==null){const{scrollTop:e,scrollLeft:r}=this;let{top:i,left:n}=this._destination;i=Math.min(i||0,this.maxScrollTop),n=Math.min(n||0,this.maxScrollLeft);const a=Math.abs(i-e),s=Math.abs(n-r);a<1&&s<1&&(this._end&&this._end(),this._resetScrollState())}}detach(e){return this._clients.delete(e),this._clients.size===0&&(this._node.scrollTo=this._originalScrollTo,this._node.scrollBy=this._originalScrollBy,this._node.scroll=this._originalScroll,this._node.removeEventListener("scroll",this._checkForArrival)),null}_attach(e){this._clients.add(e),this._clients.size===1&&(this._node.scrollTo=this.scrollTo,this._node.scrollBy=this.scrollBy,this._node.scroll=this.scrollTo,this._node.addEventListener("scroll",this._checkForArrival))}}let l1=typeof window<"u"?window.ResizeObserver:void 0;const FD=Symbol("virtualizerRef"),Ul="virtualizer-sizer";let c1;class qD{constructor(e){if(this._benchmarkStart=null,this._layout=null,this._clippingAncestors=[],this._scrollSize=null,this._scrollError=null,this._childrenPos=null,this._childMeasurements=null,this._toBeMeasured=new Map,this._rangeChanged=!0,this._itemsChanged=!0,this._visibilityChanged=!0,this._scrollerController=null,this._isScroller=!1,this._sizer=null,this._hostElementRO=null,this._childrenRO=null,this._mutationObserver=null,this._scrollEventListeners=[],this._scrollEventListenerOptions={passive:!0},this._loadListener=this._childLoaded.bind(this),this._scrollIntoViewTarget=null,this._updateScrollIntoViewCoordinates=null,this._items=[],this._first=-1,this._last=-1,this._firstVisible=-1,this._lastVisible=-1,this._scheduled=new WeakSet,this._measureCallback=null,this._measureChildOverride=null,this._layoutCompletePromise=null,this._layoutCompleteResolver=null,this._layoutCompleteRejecter=null,this._pendingLayoutComplete=null,this._layoutInitialized=null,this._connected=!1,!e)throw new Error("Virtualizer constructor requires a configuration object");if(e.hostElement)this._init(e);else throw new Error('Virtualizer configuration requires the "hostElement" property')}set items(e){Array.isArray(e)&&e!==this._items&&(this._itemsChanged=!0,this._items=e,this._schedule(this._updateLayout))}_init(e){this._isScroller=!!e.scroller,this._initHostElement(e);const r=e.layout||{};this._layoutInitialized=this._initLayout(r)}_initObservers(){this._mutationObserver=new MutationObserver(this._finishDOMUpdate.bind(this)),this._hostElementRO=new l1(()=>this._hostElementSizeChanged()),this._childrenRO=new l1(this._childrenSizeChanged.bind(this))}_initHostElement(e){const r=this._hostElement=e.hostElement;this._applyVirtualizerStyles(),r[FD]=this}connected(){this._initObservers();const e=this._isScroller;this._clippingAncestors=VD(this._hostElement,e),this._scrollerController=new HD(this,this._clippingAncestors[0]),this._schedule(this._updateLayout),this._observeAndListen(),this._connected=!0}_observeAndListen(){this._mutationObserver.observe(this._hostElement,{childList:!0}),this._hostElementRO.observe(this._hostElement),this._scrollEventListeners.push(window),window.addEventListener("scroll",this,this._scrollEventListenerOptions),this._clippingAncestors.forEach(e=>{e.addEventListener("scroll",this,this._scrollEventListenerOptions),this._scrollEventListeners.push(e),this._hostElementRO.observe(e)}),this._hostElementRO.observe(this._scrollerController.element),this._children.forEach(e=>this._childrenRO.observe(e)),this._scrollEventListeners.forEach(e=>e.addEventListener("scroll",this,this._scrollEventListenerOptions))}disconnected(){this._scrollEventListeners.forEach(e=>e.removeEventListener("scroll",this,this._scrollEventListenerOptions)),this._scrollEventListeners=[],this._clippingAncestors=[],this._scrollerController?.detach(this),this._scrollerController=null,this._mutationObserver?.disconnect(),this._mutationObserver=null,this._hostElementRO?.disconnect(),this._hostElementRO=null,this._childrenRO?.disconnect(),this._childrenRO=null,this._rejectLayoutCompletePromise("disconnected"),this._connected=!1}_applyVirtualizerStyles(){const r=this._hostElement.style;r.display=r.display||"block",r.position=r.position||"relative",r.contain=r.contain||"size layout",this._isScroller&&(r.overflow=r.overflow||"auto",r.minHeight=r.minHeight||"150px")}_getSizer(){const e=this._hostElement;if(!this._sizer){let r=e.querySelector(`[${Ul}]`);r||(r=document.createElement("div"),r.setAttribute(Ul,""),e.appendChild(r)),Object.assign(r.style,{position:"absolute",margin:"-2px 0 0 0",padding:0,visibility:"hidden",fontSize:"2px"}),r.textContent="&nbsp;",r.setAttribute(Ul,""),this._sizer=r}return this._sizer}async updateLayoutConfig(e){await this._layoutInitialized;const r=e.type||c1;if(typeof r=="function"&&this._layout instanceof r){const i={...e};return delete i.type,this._layout.config=i,!0}return!1}async _initLayout(e){let r,i;if(typeof e.type=="function"){i=e.type;const n={...e};delete n.type,r=n}else r=e;i===void 0&&(c1=i=(await s_(()=>import("./flow-BqIEBwW6.js"),[],import.meta.url)).FlowLayout),this._layout=new i(n=>this._handleLayoutMessage(n),r),this._layout.measureChildren&&typeof this._layout.updateItemSizes=="function"&&(typeof this._layout.measureChildren=="function"&&(this._measureChildOverride=this._layout.measureChildren),this._measureCallback=this._layout.updateItemSizes.bind(this._layout)),this._layout.listenForChildLoadEvents&&this._hostElement.addEventListener("load",this._loadListener,!0),this._schedule(this._updateLayout)}startBenchmarking(){this._benchmarkStart===null&&(this._benchmarkStart=window.performance.now())}stopBenchmarking(){if(this._benchmarkStart!==null){const e=window.performance.now(),r=e-this._benchmarkStart,n=performance.getEntriesByName("uv-virtualizing","measure").filter(a=>a.startTime>=this._benchmarkStart&&a.startTime<e).reduce((a,s)=>a+s.duration,0);return this._benchmarkStart=null,{timeElapsed:r,virtualizationTime:n}}return null}_measureChildren(){const e={},r=this._children,i=this._measureChildOverride||this._measureChild;for(let n=0;n<r.length;n++){const a=r[n],s=this._first+n;(this._itemsChanged||this._toBeMeasured.has(a))&&(e[s]=i.call(this,a,this._items[s]))}this._childMeasurements=e,this._schedule(this._updateLayout),this._toBeMeasured.clear()}_measureChild(e){const{width:r,height:i}=e.getBoundingClientRect();return Object.assign({width:r,height:i},jD(e))}async _schedule(e){this._scheduled.has(e)||(this._scheduled.add(e),await Promise.resolve(),this._scheduled.delete(e),e.call(this))}async _updateDOM(e){this._scrollSize=e.scrollSize,this._adjustRange(e.range),this._childrenPos=e.childPositions,this._scrollError=e.scrollError||null;const{_rangeChanged:r,_itemsChanged:i}=this;this._visibilityChanged&&(this._notifyVisibility(),this._visibilityChanged=!1),(r||i)&&(this._notifyRange(),this._rangeChanged=!1),this._finishDOMUpdate()}_finishDOMUpdate(){this._connected&&(this._children.forEach(e=>this._childrenRO.observe(e)),this._checkScrollIntoViewTarget(this._childrenPos),this._positionChildren(this._childrenPos),this._sizeHostElement(this._scrollSize),this._correctScrollError(),this._benchmarkStart&&"mark"in window.performance&&window.performance.mark("uv-end"))}_updateLayout(){this._layout&&this._connected&&(this._layout.items=this._items,this._updateView(),this._childMeasurements!==null&&(this._measureCallback&&this._measureCallback(this._childMeasurements),this._childMeasurements=null),this._layout.reflowIfNeeded(),this._benchmarkStart&&"mark"in window.performance&&window.performance.mark("uv-end"))}_handleScrollEvent(){if(this._benchmarkStart&&"mark"in window.performance){try{window.performance.measure("uv-virtualizing","uv-start","uv-end")}catch(e){console.warn("Error measuring performance data: ",e)}window.performance.mark("uv-start")}this._scrollerController.correctingScrollError===!1&&this._layout?.unpin(),this._schedule(this._updateLayout)}handleEvent(e){e.type==="scroll"?(e.currentTarget===window||this._clippingAncestors.includes(e.currentTarget))&&this._handleScrollEvent():console.warn("event not handled",e)}_handleLayoutMessage(e){e.type==="stateChanged"?this._updateDOM(e):e.type==="visibilityChanged"?(this._firstVisible=e.firstVisible,this._lastVisible=e.lastVisible,this._notifyVisibility()):e.type==="unpinned"&&this._hostElement.dispatchEvent(new Bu)}get _children(){const e=[];let r=this._hostElement.firstElementChild;for(;r;)r.hasAttribute(Ul)||e.push(r),r=r.nextElementSibling;return e}_updateView(){const e=this._hostElement,r=this._scrollerController?.element,i=this._layout;if(e&&r&&i){let n,a,s,o;const l=e.getBoundingClientRect();n=0,a=0,s=window.innerHeight,o=window.innerWidth;const c=this._clippingAncestors.map(m=>m.getBoundingClientRect());c.unshift(l);for(const m of c)n=Math.max(n,m.top),a=Math.max(a,m.left),s=Math.min(s,m.bottom),o=Math.min(o,m.right);const u=r.getBoundingClientRect(),p={left:l.left-u.left,top:l.top-u.top},d={width:r.scrollWidth,height:r.scrollHeight},h=n-l.top+e.scrollTop,g=a-l.left+e.scrollLeft,y=Math.max(0,s-n),x=Math.max(0,o-a);i.viewportSize={width:x,height:y},i.viewportScroll={top:h,left:g},i.totalScrollSize=d,i.offsetWithinScroller=p}}_sizeHostElement(e){const i=e&&e.width!==null?Math.min(82e5,e.width):0,n=e&&e.height!==null?Math.min(82e5,e.height):0;if(this._isScroller)this._getSizer().style.transform=`translate(${i}px, ${n}px)`;else{const a=this._hostElement.style;a.minWidth=i?`${i}px`:"100%",a.minHeight=n?`${n}px`:"100%"}}_positionChildren(e){e&&e.forEach(({top:r,left:i,width:n,height:a,xOffset:s,yOffset:o},l)=>{const c=this._children[l-this._first];c&&(c.style.position="absolute",c.style.boxSizing="border-box",c.style.transform=`translate(${i}px, ${r}px)`,n!==void 0&&(c.style.width=n+"px"),a!==void 0&&(c.style.height=a+"px"),c.style.left=s===void 0?null:s+"px",c.style.top=o===void 0?null:o+"px")})}async _adjustRange(e){const{_first:r,_last:i,_firstVisible:n,_lastVisible:a}=this;this._first=e.first,this._last=e.last,this._firstVisible=e.firstVisible,this._lastVisible=e.lastVisible,this._rangeChanged=this._rangeChanged||this._first!==r||this._last!==i,this._visibilityChanged=this._visibilityChanged||this._firstVisible!==n||this._lastVisible!==a}_correctScrollError(){if(this._scrollError){const{scrollTop:e,scrollLeft:r}=this._scrollerController,{top:i,left:n}=this._scrollError;this._scrollError=null,this._scrollerController.correctScrollError({top:e-i,left:r-n})}}element(e){return e===1/0&&(e=this._items.length-1),this._items?.[e]===void 0?void 0:{scrollIntoView:(r={})=>this._scrollElementIntoView({...r,index:e})}}_scrollElementIntoView(e){if(e.index>=this._first&&e.index<=this._last)this._children[e.index-this._first].scrollIntoView(e);else if(e.index=Math.min(e.index,this._items.length-1),e.behavior==="smooth"){const r=this._layout.getScrollIntoViewCoordinates(e),{behavior:i}=e;this._updateScrollIntoViewCoordinates=this._scrollerController.managedScrollTo(Object.assign(r,{behavior:i}),()=>this._layout.getScrollIntoViewCoordinates(e),()=>this._scrollIntoViewTarget=null),this._scrollIntoViewTarget=e}else this._layout.pin=e}_checkScrollIntoViewTarget(e){const{index:r}=this._scrollIntoViewTarget||{};r&&e?.has(r)&&this._updateScrollIntoViewCoordinates(this._layout.getScrollIntoViewCoordinates(this._scrollIntoViewTarget))}_notifyRange(){this._hostElement.dispatchEvent(new Lu({first:this._first,last:this._last}))}_notifyVisibility(){this._hostElement.dispatchEvent(new Ou({first:this._firstVisible,last:this._lastVisible}))}get layoutComplete(){return this._layoutCompletePromise||(this._layoutCompletePromise=new Promise((e,r)=>{this._layoutCompleteResolver=e,this._layoutCompleteRejecter=r})),this._layoutCompletePromise}_rejectLayoutCompletePromise(e){this._layoutCompleteRejecter!==null&&this._layoutCompleteRejecter(e),this._resetLayoutCompleteState()}_scheduleLayoutComplete(){this._layoutCompletePromise&&this._pendingLayoutComplete===null&&(this._pendingLayoutComplete=requestAnimationFrame(()=>requestAnimationFrame(()=>this._resolveLayoutCompletePromise())))}_resolveLayoutCompletePromise(){this._layoutCompleteResolver!==null&&this._layoutCompleteResolver(),this._resetLayoutCompleteState()}_resetLayoutCompleteState(){this._layoutCompletePromise=null,this._layoutCompleteResolver=null,this._layoutCompleteRejecter=null,this._pendingLayoutComplete=null}_hostElementSizeChanged(){this._schedule(this._updateLayout)}_childLoaded(){}_childrenSizeChanged(e){if(this._layout?.measureChildren){for(const r of e)this._toBeMeasured.set(r.target,r.contentRect);this._measureChildren()}this._scheduleLayoutComplete(),this._itemsChanged=!1,this._rangeChanged=!1}}function jD(t){const e=window.getComputedStyle(t);return{marginTop:zl(e.marginTop),marginRight:zl(e.marginRight),marginBottom:zl(e.marginBottom),marginLeft:zl(e.marginLeft)}}function zl(t){const e=t?parseFloat(t):NaN;return Number.isNaN(e)?0:e}function u1(t){if(t.assignedSlot!==null)return t.assignedSlot;if(t.parentElement!==null)return t.parentElement;const e=t.parentNode;return e&&e.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&e.host||null}function GD(t,e=!1){const r=[];let i=e?t:u1(t);for(;i!==null;)r.push(i),i=u1(i);return r}function VD(t,e=!1){let r=!1;return GD(t,e).filter(i=>{if(r)return!1;const n=getComputedStyle(i);return r=n.position==="fixed",n.overflow!=="visible"})}const WD=t=>t,KD=(t,e)=>v`${e}: ${JSON.stringify(t,null,2)}`;class YD extends Wx{constructor(e){if(super(e),this._virtualizer=null,this._first=0,this._last=-1,this._renderItem=(r,i)=>KD(r,i+this._first),this._keyFunction=(r,i)=>WD(r,i+this._first),this._items=[],e.type!==Wo.CHILD)throw new Error("The virtualize directive can only be used in child expressions")}render(e){e&&this._setFunctions(e);const r=[];if(this._first>=0&&this._last>=this._first)for(let i=this._first;i<=this._last;i++)r.push(this._items[i]);return fn(r,this._keyFunction,this._renderItem)}update(e,[r]){this._setFunctions(r);const i=this._items!==r.items;return this._items=r.items||[],this._virtualizer?this._updateVirtualizerConfig(e,r):this._initialize(e,r),i?Fr:this.render()}async _updateVirtualizerConfig(e,r){if(!await this._virtualizer.updateLayoutConfig(r.layout||{})){const n=e.parentNode;this._makeVirtualizer(n,r)}this._virtualizer.items=this._items}_setFunctions(e){const{renderItem:r,keyFunction:i}=e;r&&(this._renderItem=(n,a)=>r(n,a+this._first)),i&&(this._keyFunction=(n,a)=>i(n,a+this._first))}_makeVirtualizer(e,r){this._virtualizer&&this._virtualizer.disconnected();const{layout:i,scroller:n,items:a}=r;this._virtualizer=new qD({hostElement:e,layout:i,scroller:n}),this._virtualizer.items=a,this._virtualizer.connected()}_initialize(e,r){const i=e.parentNode;i&&i.nodeType===1&&(i.addEventListener("rangeChanged",n=>{this._first=n.first,this._last=n.last,this.setValue(this.render())}),this._makeVirtualizer(i,r))}disconnected(){this._virtualizer?.disconnected()}reconnected(){this._virtualizer?.connected()}}const XD=Ko(YD);var ZD=Object.defineProperty,QD=Object.getOwnPropertyDescriptor,Yr=(t,e,r,i)=>{for(var n=i>1?void 0:i?QD(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&ZD(e,r,n),n};let Tr=class extends V{constructor(){super(...arguments),this.playerData=[],this.currentUserEntry=null,this.showStickyUser=!1,this.isLoading=!1,this.error=null,this.isLoadingMore=!1,this.loadMoreError=null,this.playerHasMore=!0,this.hasLoadedPlayers=!1,this.playerPageSize=50,this.currentPage=1,this.currentUserId=null,this.currentUserIdLoaded=!1}createRenderRoot(){return this}async ensureLoaded(){this.hasLoadedPlayers||this.isLoading||await this.loadPlayerLeaderboard(!0)}async loadPlayerLeaderboard(t=!1){if(t)this.currentPage=1,this.playerHasMore=!0,this.loadMoreError=null,this.playerData=[],this.currentUserEntry=null,this.showStickyUser=!1;else if(!this.playerHasMore)return;if(!(this.isLoading||this.isLoadingMore)){t?(this.isLoading=!0,this.error=null):(this.isLoadingMore=!0,this.loadMoreError=null);try{const e=await vC(this.currentPage);if(e===!1)throw new Error("Failed to load player leaderboard");if(e==="reached_limit"){this.playerHasMore=!1,this.hasLoadedPlayers=!0;return}const r=e["1v1"].map(n=>({rank:n.rank,playerId:n.public_id,username:n.username,clanTag:n.clanTag??void 0,elo:n.elo,games:n.total,wins:n.wins,losses:n.losses,winRate:n.total>0?n.wins/n.total:0})),i=r.length;if(t)this.playerData=r;else{const n=new Set(this.playerData.map(s=>s.playerId)),a=r.filter(s=>!n.has(s.playerId));this.playerData=[...this.playerData,...a]}if(i>0&&this.currentPage++,i<this.playerPageSize&&(this.playerHasMore=!1),t&&!this.currentUserIdLoaded){this.currentUserIdLoaded=!0;const n=await jo();this.currentUserId=n?n.player.publicId:null}this.currentUserId&&!this.currentUserEntry&&(this.currentUserEntry=r.find(n=>n.playerId===this.currentUserId)??null),this.hasLoadedPlayers=!0,this.scheduleStickyVisibilityCheck(),this.schedulePlayerFillCheck()}catch(e){console.error("loadPlayerLeaderboard: request failed",e),t?this.error=f("leaderboard_modal.error"):this.loadMoreError=f("leaderboard_modal.error")}finally{t?this.isLoading=!1:this.isLoadingMore=!1}}}handleTabActivated(){this.scheduleStickyVisibilityCheck(),this.schedulePlayerFillCheck()}isVisible(){return this.isConnected&&this.getClientRects().length>0}updateStickyVisibility(){if(!this.currentUserEntry){this.showStickyUser=!1;return}if(!this.virtualizerContainer||!this.isVisible()){this.showStickyUser=!1;return}const t=this.virtualizerContainer.querySelector('[data-current-user="true"]');if(!t){this.showStickyUser=!0;return}const e=this.virtualizerContainer.getBoundingClientRect(),r=t.getBoundingClientRect(),i=r.top>=e.top&&r.bottom<=e.bottom;this.showStickyUser=!i}scheduleStickyVisibilityCheck(){this.updateComplete.then(()=>{requestAnimationFrame(()=>this.updateStickyVisibility())})}handleScroll(){this.updateStickyVisibility(),this.maybeLoadMorePlayers()}maybeLoadMorePlayers(){if(this.isLoading||this.isLoadingMore||!this.playerHasMore||this.error||this.loadMoreError||!this.virtualizerContainer||!this.isVisible())return;const t=192,e=this.virtualizerContainer.scrollTop,r=this.virtualizerContainer.clientHeight,i=this.virtualizerContainer.scrollHeight,n=e+r>=i-t;r===0||i===0||n&&this.loadPlayerLeaderboard()}schedulePlayerFillCheck(){!this.playerHasMore||this.error||this.loadMoreError||this.updateComplete.then(()=>this.maybeLoadMorePlayers())}renderPlayerRow(t){const e=this.currentUserEntry?.playerId===t.playerId,r=t.rank,i=t.games>0?t.wins/t.games:0,n={1:"text-yellow-400 bg-yellow-400/10 ring-1 ring-yellow-400/20",2:"text-slate-300 bg-slate-400/10 ring-1 ring-slate-400/20",3:"text-amber-600 bg-amber-600/10 ring-1 ring-amber-600/20"}[r]??"text-white/40 bg-white/5",a={1:"👑",2:"🥈",3:"🥉"}[r]??String(r);return v`
      <div
        data-current-user=${e?"true":"false"}
        class="flex items-center border-b border-white/5 py-3 px-6 hover:bg-white/[0.07] transition-colors w-full ${e?"bg-blue-500/15 border-l-4 border-l-blue-500 pl-5":""}"
      >
        <div class="w-16 shrink-0 text-center">
          <div
            class="w-10 h-10 mx-auto flex items-center justify-center rounded-lg font-bold font-mono text-lg ${n}"
          >
            ${a}
          </div>
        </div>
        <div class="flex-1 flex items-center gap-3 overflow-hidden ml-4">
          <span class="font-bold text-blue-300 truncate text-base"
            >${t.username}</span
          >
          ${t.clanTag?v`<div
                class="px-2.5 py-1 rounded bg-blue-500/10 border border-blue-500/20 text-[10px] font-bold text-blue-300 shrink-0"
              >
                ${t.clanTag}
              </div>`:""}
        </div>
        <div class="flex flex-col items-end gap-1 w-32">
          <div class="text-right font-mono text-white font-medium">
            ${t.elo}
            <span class="text-[10px] text-white/30 truncate"
              >${f("leaderboard_modal.elo")}</span
            >
          </div>
        </div>
        <div class="flex-col items-end gap-1 w-32 hidden md:flex">
          <div class="text-right font-mono text-white font-medium">
            ${t.games}
            <span class="text-[10px] text-white/30 uppercase"
              >${f("leaderboard_modal.games")}</span
            >
          </div>
        </div>
        <div class="inline-flex flex-col items-end pr-6 w-32">
          <span
            class="font-mono font-bold ${i>=.5?"text-green-400":"text-red-400"}"
            >${(i*100).toFixed(1)}%</span
          >
          <span
            class="text-[10px] uppercase text-white/30 font-bold tracking-wider"
            >${f("leaderboard_modal.ratio")}</span
          >
        </div>
      </div>
    `}renderPlayerFooter(){return this.isLoadingMore?v`
        <div class="flex items-center justify-center py-4 text-white/50">
          <div
            class="w-4 h-4 border-2 border-blue-500/30 border-t-blue-500 rounded-full animate-spin mr-2"
          ></div>
          <span class="text-[10px] font-bold uppercase tracking-widest">
            ${f("leaderboard_modal.loading")}
          </span>
        </div>
      `:this.loadMoreError?v`
        <div class="flex items-center justify-center py-4">
          <button
            class="px-6 py-2 bg-red-500/10 hover:bg-red-500/20 border border-red-500/30 rounded-xl text-xs font-bold uppercase transition-all active:scale-95"
            @click=${()=>this.loadPlayerLeaderboard()}
          >
            ${f("leaderboard_modal.try_again")}
          </button>
        </div>
      `:""}renderLoading(){return v`
      <div
        class="flex flex-col items-center justify-center p-12 text-white h-full"
      >
        <div
          class="w-12 h-12 border-4 border-blue-500/30 border-t-blue-500 rounded-full animate-spin mb-6"
        ></div>
        <p class="text-blue-200/80 text-sm font-bold tracking-widest uppercase">
          ${f("leaderboard_modal.loading")}
        </p>
      </div>
    `}renderError(){return v`
      <div
        class="flex flex-col items-center justify-center p-12 text-white h-full"
      >
        <div
          class="bg-red-500/10 p-6 rounded-full mb-6 border border-red-500/20 shadow-lg shadow-red-500/10"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-12 w-12 text-red-500"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="1.5"
              d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
            />
          </svg>
        </div>
        <p class="mb-8 text-center text-red-100/80 font-medium">
          ${this.error??f("leaderboard_modal.error")}
        </p>
        <button
          class="px-8 py-3 bg-red-500/10 hover:bg-red-500/20 border border-red-500/30 rounded-xl text-sm font-bold uppercase transition-all active:scale-95"
          @click=${()=>this.loadPlayerLeaderboard(!0)}
        >
          ${f("leaderboard_modal.try_again")}
        </button>
      </div>
    `}render(){return this.isLoading&&this.playerData.length===0?this.renderLoading():this.error?this.renderError():v`
      <div class="flex flex-col h-full overflow-hidden">
        <div
          class="flex items-center text-[10px] uppercase tracking-wider text-white/40 font-bold px-6 py-4 border-b border-white/5 bg-white/2"
        >
          <div class="w-16 text-center">
            ${f("leaderboard_modal.rank")}
          </div>
          <div class="flex-1 ml-4">
            ${f("leaderboard_modal.player")}
          </div>
          <div class="w-32 text-right">
            ${f("leaderboard_modal.elo")}
          </div>
          <div class="w-32 text-right hidden md:block">
            ${f("leaderboard_modal.games")}
          </div>
          <div class="w-32 text-right pr-6">
            ${f("leaderboard_modal.win_loss_ratio")}
          </div>
        </div>
        <div class="relative flex-1 min-h-0">
          <div
            class="virtualizer-container h-full overflow-y-auto scrollbar-thin scrollbar-thumb-white/20 ${this.showStickyUser?"pb-20":"pb-0"}"
            @scroll=${()=>this.handleScroll()}
          >
            ${XD({items:this.playerData,renderItem:t=>this.renderPlayerRow(t),scroller:!0})}
            ${this.renderPlayerFooter()}
          </div>
          ${this.currentUserEntry?v`
                <div class="absolute inset-x-0 bottom-0">
                  <div
                    class="bg-blue-600/90 backdrop-blur-md border-t border-blue-400/30 py-4 px-6 shadow-2xl flex items-center transition-all duration-200 ${this.showStickyUser?"opacity-100 translate-y-0":"opacity-0 translate-y-3 pointer-events-none"}"
                    aria-hidden=${this.showStickyUser?"false":"true"}
                  >
                    <div class="w-16 text-center">
                      <div
                        class="w-10 h-10 mx-auto flex items-center justify-center rounded-lg font-bold font-mono text-lg bg-white/20 text-white"
                      >
                        ${this.currentUserEntry.rank}
                      </div>
                    </div>
                    <div class="flex-1 flex flex-col ml-4">
                      <span
                        class="text-[10px] uppercase font-bold text-blue-200/60 leading-tight"
                        >${f("leaderboard_modal.your_ranking")}</span
                      >
                      <span class="font-bold text-white text-base"
                        >${this.currentUserEntry.username}</span
                      >
                    </div>
                    <div class="flex flex-col items-end w-32">
                      <div class="font-mono text-white font-bold text-lg">
                        ${this.currentUserEntry.elo}
                        <span class="text-[10px] text-white/60"
                          >${f("leaderboard_modal.elo")}</span
                        >
                      </div>
                    </div>
                  </div>
                </div>
              `:""}
        </div>
      </div>
    `}};Yr([M()],Tr.prototype,"playerData",2);Yr([M()],Tr.prototype,"currentUserEntry",2);Yr([M()],Tr.prototype,"showStickyUser",2);Yr([M()],Tr.prototype,"isLoading",2);Yr([M()],Tr.prototype,"error",2);Yr([M()],Tr.prototype,"isLoadingMore",2);Yr([M()],Tr.prototype,"loadMoreError",2);Yr([M()],Tr.prototype,"playerHasMore",2);Yr([Vt(".virtualizer-container")],Tr.prototype,"virtualizerContainer",2);Tr=Yr([F("leaderboard-player-list")],Tr);var JD=Object.defineProperty,eL=Object.getOwnPropertyDescriptor,Nu=(t,e,r,i)=>{for(var n=i>1?void 0:i?eL(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&JD(e,r,n),n};let $o=class extends V{constructor(){super(...arguments),this.activeTab="players",this.baseTabClass="px-6 py-2 rounded-full text-sm font-bold uppercase tracking-wider transition-all cursor-pointer select-none",this.activeTabClass="bg-blue-600 text-white",this.inactiveTabClass="text-white/40 hover:text-white/60 hover:bg-white/5",this.playerClass=this.getTabClass(this.activeTab==="players"),this.clanClass=this.getTabClass(this.activeTab==="clans")}createRenderRoot(){return this}getTabClass(t){return[this.baseTabClass,t?this.activeTabClass:this.inactiveTabClass].join(" ")}handleTabChange(t){this.dispatchEvent(new CustomEvent("tab-change",{detail:t,bubbles:!0,composed:!0})),this.playerClass=this.getTabClass(t==="players"),this.clanClass=this.getTabClass(t==="clans")}render(){return v`
      <div
        role="tablist"
        class="flex gap-2 p-1 bg-white/5 rounded-full border border-white/10 mb-6 w-fit mx-auto mt-4"
      >
        <button
          type="button"
          role="tab"
          class="${this.playerClass}"
          @click=${()=>this.handleTabChange("players")}
          id="player-leaderboard-tab"
          aria-selected=${this.activeTab==="players"}
        >
          ${f("leaderboard_modal.ranked_tab")}
        </button>
        <button
          type="button"
          role="tab"
          class="${this.clanClass}"
          @click=${()=>this.handleTabChange("clans")}
          id="clan-leaderboard-tab"
          aria-selected=${this.activeTab==="clans"}
        >
          ${f("leaderboard_modal.clans_tab")}
        </button>
      </div>
    `}};Nu([L({type:String})],$o.prototype,"activeTab",2);Nu([M()],$o.prototype,"playerClass",2);Nu([M()],$o.prototype,"clanClass",2);$o=Nu([F("leaderboard-tabs")],$o);var tL=Object.defineProperty,rL=Object.getOwnPropertyDescriptor,Jo=(t,e,r,i)=>{for(var n=i>1?void 0:i?rL(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&tL(e,r,n),n};let Ka=class extends gt{constructor(){super(...arguments),this.activeTab="players",this.clanDateRange=null,this.loadToken=0}onOpen(){this.loadActiveTabData()}loadActiveTabData(){const t=++this.loadToken,e=async()=>{if(t===this.loadToken){if(this.activeTab==="players"){if(await this.playerList?.ensureLoaded(),t!==this.loadToken)return;this.playerList?.handleTabActivated()}else await this.clanTable?.ensureLoaded();queueMicrotask(()=>{t===this.loadToken&&(this.activeTab==="players"?this.clanTable?.ensureLoaded():this.playerList?.ensureLoaded())})}};(async()=>((this.activeTab==="players"?this.playerList:this.clanTable)||await this.updateComplete,await e()))()}handleTabChange(t){this.activeTab=t,this.loadActiveTabData()}handleClanDateRangeChange(t){this.clanDateRange=t.detail}render(){let t=v``;if(this.clanDateRange){const r=new Date(this.clanDateRange.start).toLocaleDateString(),i=new Date(this.clanDateRange.end).toLocaleDateString();t=v`<span
        class="text-sm font-normal text-white/40 ml-2 wrap-break-words"
        >(${r} - ${i})</span
      >`}const e=v`
      <div
        class="h-full flex flex-col overflow-hidden ${this.inline?"bg-black/60 backdrop-blur-md rounded-2xl border border-white/10":""}"
      >
        ${It({titleContent:v`
            <div class="flex flex-wrap items-center gap-2">
              <span
                class="text-white text-xl sm:text-2xl font-bold uppercase tracking-widest"
              >
                ${f("leaderboard_modal.title")}
              </span>
              ${this.activeTab==="clans"?t:""}
            </div>
          `,onBack:this.close,ariaLabel:f("common.close")})}

        <div class="flex-1 flex flex-col min-h-0">
          <leaderboard-tabs
            .activeTab=${this.activeTab}
            @tab-change=${r=>this.handleTabChange(r.detail)}
          ></leaderboard-tabs>
          <div class="flex-1 min-h-0">
            <leaderboard-player-list
              class=${this.activeTab==="players"?"h-full":"hidden"}
            ></leaderboard-player-list>
            <leaderboard-clan-table
              class=${this.activeTab==="clans"?"h-full":"hidden"}
              @date-range-change=${r=>this.handleClanDateRangeChange(r)}
            ></leaderboard-clan-table>
          </div>
        </div>
      </div>
    `;return this.inline?e:v`
      <o-modal
        id="leaderboard-modal"
        ?inline=${this.inline}
        hideCloseButton
        hideHeader
      >
        ${e}
      </o-modal>
    `}};Jo([M()],Ka.prototype,"activeTab",2);Jo([M()],Ka.prototype,"clanDateRange",2);Jo([Vt("leaderboard-player-list")],Ka.prototype,"playerList",2);Jo([Vt("leaderboard-clan-table")],Ka.prototype,"clanTable",2);Ka=Jo([F("leaderboard-modal")],Ka);var iL=Object.defineProperty,nL=Object.getOwnPropertyDescriptor,Yn=(t,e,r,i)=>{for(var n=i>1?void 0:i?nL(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&iL(e,r,n),n};let Ya=class extends gt{constructor(){super(),this.gameCheckInterval=null,this.connectTimeout=null,this.connected=!1,this.socket=null,this.gameID=null,this.elo="unknown",this.id="page-matchmaking"}createRenderRoot(){return this}render(){const t=v`
      <p class="text-center mt-2 mb-4 text-white/60">
        ${f("matchmaking_modal.elo",{elo:this.elo})}
      </p>
    `,e=v`
      <div
        class="h-full flex flex-col ${this.inline?"bg-black/60 backdrop-blur-md rounded-2xl border border-white/10":""}"
      >
        ${It({title:f("matchmaking_modal.title"),onBack:this.close,ariaLabel:f("common.back")})}
        <div class="flex-1 flex flex-col items-center justify-center gap-6 p-6">
          ${t} ${this.renderInner()}
        </div>
      </div>
    `;return this.inline?e:v`
      <o-modal
        id="matchmaking-modal"
        title="${f("matchmaking_modal.title")}"
        hideCloseButton
        hideHeader
      >
        ${e}
      </o-modal>
    `}renderInner(){return this.connected?this.gameID===null?v`
        <div class="flex flex-col items-center gap-4">
          <div
            class="w-12 h-12 border-4 border-green-500/30 border-t-green-500 rounded-full animate-spin"
          ></div>
          <p class="text-center text-white/80">
            ${f("matchmaking_modal.searching")}
          </p>
        </div>
      `:v`
        <div class="flex flex-col items-center gap-4">
          <div
            class="w-12 h-12 border-4 border-yellow-500/30 border-t-yellow-500 rounded-full animate-spin"
          ></div>
          <p class="text-center text-white/80">
            ${f("matchmaking_modal.waiting_for_game")}
          </p>
        </div>
      `:v`
        <div class="flex flex-col items-center gap-4">
          <div
            class="w-12 h-12 border-4 border-blue-500/30 border-t-blue-500 rounded-full animate-spin"
          ></div>
          <p class="text-center text-white/80">
            ${f("matchmaking_modal.connecting")}
          </p>
        </div>
      `}async connect(){const t=await Ut();this.socket=new WebSocket(`${t.jwtIssuer()}/matchmaking/join?instance_id=${window.INSTANCE_ID}`),this.socket.onopen=async()=>{console.log("Connected to matchmaking server"),this.connectTimeout=setTimeout(async()=>{if(this.socket?.readyState!==WebSocket.OPEN){console.warn("[Matchmaking] socket not ready");return}this.socket.send(JSON.stringify({type:"join",jwt:await kc()})),this.connected=!0,this.requestUpdate()},2e3)},this.socket.onmessage=e=>{console.log(e.data);const r=JSON.parse(e.data);r.type==="match-assignment"&&(this.socket?.close(),console.log(`matchmaking: got game ID: ${r.gameId}`),this.gameID=r.gameId,this.gameCheckInterval=setInterval(()=>this.checkGame(),1e3))},this.socket.onerror=e=>{console.error("WebSocket error occurred:",e)},this.socket.onclose=()=>{console.log("Matchmaking server closed connection")}}async onOpen(){const t=await jo();if(!this.isModalOpen)return;if(!(t&&t.user&&(t.user.discord!==void 0||t.user.email!==void 0))){window.dispatchEvent(new CustomEvent("show-message",{detail:{message:f("matchmaking_button.must_login"),color:"red",duration:3e3}})),this.close();return}this.elo=t.player.leaderboard?.oneVone?.elo??"unknown",this.connected=!1,this.gameID=null,this.connect()}onClose(){this.connected=!1,this.socket?.close(),this.connectTimeout&&(clearTimeout(this.connectTimeout),this.connectTimeout=null),this.gameCheckInterval&&(clearInterval(this.gameCheckInterval),this.gameCheckInterval=null)}async checkGame(){if(this.gameID===null)return;const e=`/${(await Ut()).workerPath(this.gameID)}/api/game/${this.gameID}/exists`,r=await fetch(e,{method:"GET",headers:{"Content-Type":"application/json"}}),i=await r.json();if(r.status!==200){console.error(`Error checking game ${this.gameID}: ${r.status}`);return}if(!i.exists){console.info(`Game ${this.gameID} does not exist or hasn't started yet`);return}this.gameCheckInterval&&(clearInterval(this.gameCheckInterval),this.gameCheckInterval=null),this.dispatchEvent(new CustomEvent("join-lobby",{detail:{gameID:this.gameID,source:"matchmaking"},bubbles:!0,composed:!0}))}};Yn([M()],Ya.prototype,"connected",2);Yn([M()],Ya.prototype,"socket",2);Yn([M()],Ya.prototype,"gameID",2);Ya=Yn([F("matchmaking-modal")],Ya);let Qc=class extends V{constructor(){super(),this.isLoggedIn=!1}async connectedCallback(){super.connectedCallback(),document.addEventListener("userMeResponse",t=>{const e=t;if(e.detail){const r=e.detail;this.isLoggedIn=Aa(r)}})}createRenderRoot(){return this}render(){return this.isLoggedIn?v`
          <button
            @click="${this.handleLoggedInClick}"
            class="no-crazygames w-full h-20 bg-purple-600 hover:bg-purple-500 text-white font-black uppercase tracking-widest rounded-xl transition-all duration-200 flex flex-col items-center justify-center group overflow-hidden relative"
            title="${f("matchmaking_modal.title")}"
          >
            <span class="relative z-10 text-2xl">
              ${f("matchmaking_button.play_ranked")}
            </span>
            <span
              class="relative z-10 text-xs font-medium text-purple-100 opacity-90 group-hover:opacity-100 transition-opacity"
            >
              ${f("matchmaking_button.description")}
            </span>
          </button>
          <matchmaking-modal></matchmaking-modal>
        `:v`
          <button
            @click="${this.handleLoggedOutClick}"
            class="no-crazygames w-full h-20 bg-purple-600 hover:bg-purple-500 text-white font-black uppercase tracking-widest rounded-xl transition-all duration-200 flex flex-col items-center justify-center overflow-hidden relative cursor-pointer"
          >
            <span class="relative z-10 text-2xl">
              ${f("matchmaking_button.login_required")}
            </span>
          </button>
        `}handleLoggedInClick(){const t=document.querySelector("username-input"),e=document.querySelector("public-lobby");t?.isValid()?(this.open(),e?.leaveLobby()):window.dispatchEvent(new CustomEvent("show-message",{detail:{message:t?.validationError,color:"red",duration:3e3}}))}handleLoggedOutClick(){window.showPage?.("page-account")}open(){this.matchmakingModal?.open()}close(){this.matchmakingModal?.close(),this.requestUpdate()}};Yn([Vt("matchmaking-modal")],Qc.prototype,"matchmakingModal",2);Yn([M()],Qc.prototype,"isLoggedIn",2);Qc=Yn([F("matchmaking-button")],Qc);function aL(){const t=r=>{window.currentPageId=r;const i=document.querySelector(".page-content:not(.hidden)");i&&(i.classList.add("hidden"),i.classList.remove("block"));const n=document.getElementById("page-play");if(r==="page-play"?n?.classList.remove("hidden"):n?.classList.add("hidden"),r!=="page-play"){const a=document.getElementById(r);a&&(a.classList.remove("hidden"),a.classList.contains("page-content")&&a.classList.add("block"),a.hasAttribute("inline")&&typeof a.open=="function"&&a.open())}document.querySelectorAll(".nav-menu-item").forEach(a=>{a.dataset.page===r?a.classList.add("active"):a.classList.remove("active")}),window.dispatchEvent(new CustomEvent("showPage",{detail:r}))};window.showPage=t,document.addEventListener("click",r=>{const i=r.target.closest(".nav-menu-item[data-page]");if(i){const n=i.dataset.page;n&&t(n)}}),customElements.whenDefined("main-layout").then(()=>{const r=document.querySelector("main");r&&r.addEventListener("click",i=>{const n=i.target;if(document.getElementById("page-play")?.classList.contains("hidden")){const s=n===r,o=n.classList.contains("page-content");if(s||o){const l=document.querySelector(".page-content:not(.hidden)");if(l&&typeof l.close=="function"){if(typeof l.leaveLobby=="function")l.leaveLobby();else if(typeof l.closeAndLeave=="function"){l.closeAndLeave();return}l.close()}else t("page-play")}}})}),document.querySelector(".nav-menu-item.active")||t("page-play")}const a5={CHILD:2},s5=t=>(...e)=>({_$litDirective$:t,values:e});let o5=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,r,i){this._$Ct=e,this._$AM=r,this._$Ci=i}_$AS(e,r){return this.update(e,r)}update(e,r){return this.render(...r)}};var sh;const Jc=window,Xa=Jc.trustedTypes,d1=Xa?Xa.createPolicy("lit-html",{createHTML:t=>t}):void 0,ep="$lit$",Ci=`lit$${(Math.random()+"").slice(9)}$`,l5="?"+Ci,sL=`<${l5}>`,Fn=document,eu=()=>Fn.createComment(""),Ro=t=>t===null||typeof t!="object"&&typeof t!="function",c5=Array.isArray,oL=t=>c5(t)||typeof t?.[Symbol.iterator]=="function",oh=`[ 	
\f\r]`,As=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,h1=/-->/g,p1=/>/g,rn=RegExp(`>|${oh}(?:([^\\s"'>=/]+)(${oh}*=${oh}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),f1=/'/g,g1=/"/g,u5=/^(?:script|style|textarea|title)$/i,Za=Symbol.for("lit-noChange"),Qe=Symbol.for("lit-nothing"),m1=new WeakMap,Sn=Fn.createTreeWalker(Fn,129,null,!1);function d5(t,e){if(!Array.isArray(t)||!t.hasOwnProperty("raw"))throw Error("invalid template strings array");return d1!==void 0?d1.createHTML(e):e}const lL=(t,e)=>{const r=t.length-1,i=[];let n,a=e===2?"<svg>":"",s=As;for(let o=0;o<r;o++){const l=t[o];let c,u,p=-1,d=0;for(;d<l.length&&(s.lastIndex=d,u=s.exec(l),u!==null);)d=s.lastIndex,s===As?u[1]==="!--"?s=h1:u[1]!==void 0?s=p1:u[2]!==void 0?(u5.test(u[2])&&(n=RegExp("</"+u[2],"g")),s=rn):u[3]!==void 0&&(s=rn):s===rn?u[0]===">"?(s=n??As,p=-1):u[1]===void 0?p=-2:(p=s.lastIndex-u[2].length,c=u[1],s=u[3]===void 0?rn:u[3]==='"'?g1:f1):s===g1||s===f1?s=rn:s===h1||s===p1?s=As:(s=rn,n=void 0);const h=s===rn&&t[o+1].startsWith("/>")?" ":"";a+=s===As?l+sL:p>=0?(i.push(c),l.slice(0,p)+ep+l.slice(p)+Ci+h):l+Ci+(p===-2?(i.push(void 0),o):h)}return[d5(t,a+(t[r]||"<?>")+(e===2?"</svg>":"")),i]};class Do{constructor({strings:e,_$litType$:r},i){let n;this.parts=[];let a=0,s=0;const o=e.length-1,l=this.parts,[c,u]=lL(e,r);if(this.el=Do.createElement(c,i),Sn.currentNode=this.el.content,r===2){const p=this.el.content,d=p.firstChild;d.remove(),p.append(...d.childNodes)}for(;(n=Sn.nextNode())!==null&&l.length<o;){if(n.nodeType===1){if(n.hasAttributes()){const p=[];for(const d of n.getAttributeNames())if(d.endsWith(ep)||d.startsWith(Ci)){const h=u[s++];if(p.push(d),h!==void 0){const g=n.getAttribute(h.toLowerCase()+ep).split(Ci),y=/([.?@])?(.*)/.exec(h);l.push({type:1,index:a,name:y[2],strings:g,ctor:y[1]==="."?uL:y[1]==="?"?hL:y[1]==="@"?pL:zu})}else l.push({type:6,index:a})}for(const d of p)n.removeAttribute(d)}if(u5.test(n.tagName)){const p=n.textContent.split(Ci),d=p.length-1;if(d>0){n.textContent=Xa?Xa.emptyScript:"";for(let h=0;h<d;h++)n.append(p[h],eu()),Sn.nextNode(),l.push({type:2,index:++a});n.append(p[d],eu())}}}else if(n.nodeType===8)if(n.data===l5)l.push({type:2,index:a});else{let p=-1;for(;(p=n.data.indexOf(Ci,p+1))!==-1;)l.push({type:7,index:a}),p+=Ci.length-1}a++}}static createElement(e,r){const i=Fn.createElement("template");return i.innerHTML=e,i}}function Qa(t,e,r=t,i){var n,a,s,o;if(e===Za)return e;let l=i!==void 0?(n=r._$Co)===null||n===void 0?void 0:n[i]:r._$Cl;const c=Ro(e)?void 0:e._$litDirective$;return l?.constructor!==c&&((a=l?._$AO)===null||a===void 0||a.call(l,!1),c===void 0?l=void 0:(l=new c(t),l._$AT(t,r,i)),i!==void 0?((s=(o=r)._$Co)!==null&&s!==void 0?s:o._$Co=[])[i]=l:r._$Cl=l),l!==void 0&&(e=Qa(t,l._$AS(t,e.values),l,i)),e}class cL{constructor(e,r){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=r}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){var r;const{el:{content:i},parts:n}=this._$AD,a=((r=e?.creationScope)!==null&&r!==void 0?r:Fn).importNode(i,!0);Sn.currentNode=a;let s=Sn.nextNode(),o=0,l=0,c=n[0];for(;c!==void 0;){if(o===c.index){let u;c.type===2?u=new Uu(s,s.nextSibling,this,e):c.type===1?u=new c.ctor(s,c.name,c.strings,this,e):c.type===6&&(u=new fL(s,this,e)),this._$AV.push(u),c=n[++l]}o!==c?.index&&(s=Sn.nextNode(),o++)}return Sn.currentNode=Fn,a}v(e){let r=0;for(const i of this._$AV)i!==void 0&&(i.strings!==void 0?(i._$AI(e,i,r),r+=i.strings.length-2):i._$AI(e[r])),r++}}class Uu{constructor(e,r,i,n){var a;this.type=2,this._$AH=Qe,this._$AN=void 0,this._$AA=e,this._$AB=r,this._$AM=i,this.options=n,this._$Cp=(a=n?.isConnected)===null||a===void 0||a}get _$AU(){var e,r;return(r=(e=this._$AM)===null||e===void 0?void 0:e._$AU)!==null&&r!==void 0?r:this._$Cp}get parentNode(){let e=this._$AA.parentNode;const r=this._$AM;return r!==void 0&&e?.nodeType===11&&(e=r.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,r=this){e=Qa(this,e,r),Ro(e)?e===Qe||e==null||e===""?(this._$AH!==Qe&&this._$AR(),this._$AH=Qe):e!==this._$AH&&e!==Za&&this._(e):e._$litType$!==void 0?this.g(e):e.nodeType!==void 0?this.$(e):oL(e)?this.T(e):this._(e)}k(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}$(e){this._$AH!==e&&(this._$AR(),this._$AH=this.k(e))}_(e){this._$AH!==Qe&&Ro(this._$AH)?this._$AA.nextSibling.data=e:this.$(Fn.createTextNode(e)),this._$AH=e}g(e){var r;const{values:i,_$litType$:n}=e,a=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=Do.createElement(d5(n.h,n.h[0]),this.options)),n);if(((r=this._$AH)===null||r===void 0?void 0:r._$AD)===a)this._$AH.v(i);else{const s=new cL(a,this),o=s.u(this.options);s.v(i),this.$(o),this._$AH=s}}_$AC(e){let r=m1.get(e.strings);return r===void 0&&m1.set(e.strings,r=new Do(e)),r}T(e){c5(this._$AH)||(this._$AH=[],this._$AR());const r=this._$AH;let i,n=0;for(const a of e)n===r.length?r.push(i=new Uu(this.k(eu()),this.k(eu()),this,this.options)):i=r[n],i._$AI(a),n++;n<r.length&&(this._$AR(i&&i._$AB.nextSibling,n),r.length=n)}_$AR(e=this._$AA.nextSibling,r){var i;for((i=this._$AP)===null||i===void 0||i.call(this,!1,!0,r);e&&e!==this._$AB;){const n=e.nextSibling;e.remove(),e=n}}setConnected(e){var r;this._$AM===void 0&&(this._$Cp=e,(r=this._$AP)===null||r===void 0||r.call(this,e))}}class zu{constructor(e,r,i,n,a){this.type=1,this._$AH=Qe,this._$AN=void 0,this.element=e,this.name=r,this._$AM=n,this.options=a,i.length>2||i[0]!==""||i[1]!==""?(this._$AH=Array(i.length-1).fill(new String),this.strings=i):this._$AH=Qe}get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}_$AI(e,r=this,i,n){const a=this.strings;let s=!1;if(a===void 0)e=Qa(this,e,r,0),s=!Ro(e)||e!==this._$AH&&e!==Za,s&&(this._$AH=e);else{const o=e;let l,c;for(e=a[0],l=0;l<a.length-1;l++)c=Qa(this,o[i+l],r,l),c===Za&&(c=this._$AH[l]),s||(s=!Ro(c)||c!==this._$AH[l]),c===Qe?e=Qe:e!==Qe&&(e+=(c??"")+a[l+1]),this._$AH[l]=c}s&&!n&&this.j(e)}j(e){e===Qe?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}}class uL extends zu{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===Qe?void 0:e}}const dL=Xa?Xa.emptyScript:"";class hL extends zu{constructor(){super(...arguments),this.type=4}j(e){e&&e!==Qe?this.element.setAttribute(this.name,dL):this.element.removeAttribute(this.name)}}class pL extends zu{constructor(e,r,i,n,a){super(e,r,i,n,a),this.type=5}_$AI(e,r=this){var i;if((e=(i=Qa(this,e,r,0))!==null&&i!==void 0?i:Qe)===Za)return;const n=this._$AH,a=e===Qe&&n!==Qe||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,s=e!==Qe&&(n===Qe||a);a&&this.element.removeEventListener(this.name,this,n),s&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){var r,i;typeof this._$AH=="function"?this._$AH.call((i=(r=this.options)===null||r===void 0?void 0:r.host)!==null&&i!==void 0?i:this.element,e):this._$AH.handleEvent(e)}}class fL{constructor(e,r,i){this.element=e,this.type=6,this._$AN=void 0,this._$AM=r,this.options=i}get _$AU(){return this._$AM._$AU}_$AI(e){Qa(this,e)}}const b1=Jc.litHtmlPolyfillSupport;b1?.(Do,Uu),((sh=Jc.litHtmlVersions)!==null&&sh!==void 0?sh:Jc.litHtmlVersions=[]).push("2.8.0");let tp=class extends o5{constructor(e){if(super(e),this.et=Qe,e.type!==a5.CHILD)throw Error(this.constructor.directiveName+"() can only be used in child bindings")}render(e){if(e===Qe||e==null)return this.ft=void 0,this.et=e;if(e===Za)return e;if(typeof e!="string")throw Error(this.constructor.directiveName+"() called with a non-string value");if(e===this.et)return this.ft;this.et=e;const r=[e];return r.raw=r,this.ft={_$litType$:this.constructor.resultType,strings:r,values:[]}}};tp.directiveName="unsafeHTML",tp.resultType=1;const v1=s5(tp);const gL=t=>t.strings===void 0;const oo=(t,e)=>{var r,i;const n=t._$AN;if(n===void 0)return!1;for(const a of n)(i=(r=a)._$AO)===null||i===void 0||i.call(r,e,!1),oo(a,e);return!0},tu=t=>{let e,r;do{if((e=t._$AM)===void 0)break;r=e._$AN,r.delete(t),t=e}while(r?.size===0)},h5=t=>{for(let e;e=t._$AM;t=e){let r=e._$AN;if(r===void 0)e._$AN=r=new Set;else if(r.has(t))break;r.add(t),vL(e)}};function mL(t){this._$AN!==void 0?(tu(this),this._$AM=t,h5(this)):this._$AM=t}function bL(t,e=!1,r=0){const i=this._$AH,n=this._$AN;if(n!==void 0&&n.size!==0)if(e)if(Array.isArray(i))for(let a=r;a<i.length;a++)oo(i[a],!1),tu(i[a]);else i!=null&&(oo(i,!1),tu(i));else oo(this,t)}const vL=t=>{var e,r,i,n;t.type==a5.CHILD&&((e=(i=t)._$AP)!==null&&e!==void 0||(i._$AP=bL),(r=(n=t)._$AQ)!==null&&r!==void 0||(n._$AQ=mL))};class yL extends o5{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,r,i){super._$AT(e,r,i),h5(this),this.isConnected=e._$AU}_$AO(e,r=!0){var i,n;e!==this.isConnected&&(this.isConnected=e,e?(i=this.reconnected)===null||i===void 0||i.call(this):(n=this.disconnected)===null||n===void 0||n.call(this)),r&&(oo(this,e),tu(this))}setValue(e){if(gL(this._$Ct))this._$Ct._$AI(e,this);else{const r=[...this._$Ct._$AH];r[this._$Ci]=e,this._$Ct._$AI(r,this,0)}}disconnected(){}reconnected(){}}function p5(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}let Xn=p5();function wL(t){Xn=t}const f5=/[&<>"']/,xL=new RegExp(f5.source,"g"),g5=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,_L=new RegExp(g5.source,"g"),kL={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},y1=t=>kL[t];function wt(t,e){if(e){if(f5.test(t))return t.replace(xL,y1)}else if(g5.test(t))return t.replace(_L,y1);return t}const SL=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function m5(t){return t.replace(SL,(e,r)=>(r=r.toLowerCase(),r==="colon"?":":r.charAt(0)==="#"?r.charAt(1)==="x"?String.fromCharCode(parseInt(r.substring(2),16)):String.fromCharCode(+r.substring(1)):""))}const AL=/(^|[^\[])\^/g;function Le(t,e){t=typeof t=="string"?t:t.source,e=e||"";const r={replace:(i,n)=>(n=n.source||n,n=n.replace(AL,"$1"),t=t.replace(i,n),r),getRegex:()=>new RegExp(t,e)};return r}const CL=/[^\w:]/g,TL=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function w1(t,e,r){if(t){let i;try{i=decodeURIComponent(m5(r)).replace(CL,"").toLowerCase()}catch{return null}if(i.indexOf("javascript:")===0||i.indexOf("vbscript:")===0||i.indexOf("data:")===0)return null}e&&!TL.test(r)&&(r=PL(e,r));try{r=encodeURI(r).replace(/%25/g,"%")}catch{return null}return r}const Hl={},EL=/^[^:]+:\/*[^/]*$/,ML=/^([^:]+:)[\s\S]*$/,IL=/^([^:]+:\/*[^/]*)[\s\S]*$/;function PL(t,e){Hl[" "+t]||(EL.test(t)?Hl[" "+t]=t+"/":Hl[" "+t]=pc(t,"/",!0)),t=Hl[" "+t];const r=t.indexOf(":")===-1;return e.substring(0,2)==="//"?r?e:t.replace(ML,"$1")+e:e.charAt(0)==="/"?r?e:t.replace(IL,"$1")+e:t+e}const ru={exec:function(){}};function x1(t,e){const r=t.replace(/\|/g,(a,s,o)=>{let l=!1,c=s;for(;--c>=0&&o[c]==="\\";)l=!l;return l?"|":" |"}),i=r.split(/ \|/);let n=0;if(i[0].trim()||i.shift(),i.length>0&&!i[i.length-1].trim()&&i.pop(),i.length>e)i.splice(e);else for(;i.length<e;)i.push("");for(;n<i.length;n++)i[n]=i[n].trim().replace(/\\\|/g,"|");return i}function pc(t,e,r){const i=t.length;if(i===0)return"";let n=0;for(;n<i;){const a=t.charAt(i-n-1);if(a===e&&!r)n++;else if(a!==e&&r)n++;else break}return t.slice(0,i-n)}function $L(t,e){if(t.indexOf(e[1])===-1)return-1;const r=t.length;let i=0,n=0;for(;n<r;n++)if(t[n]==="\\")n++;else if(t[n]===e[0])i++;else if(t[n]===e[1]&&(i--,i<0))return n;return-1}function RL(t){t&&t.sanitize&&!t.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function _1(t,e){if(e<1)return"";let r="";for(;e>1;)e&1&&(r+=t),e>>=1,t+=t;return r+t}function k1(t,e,r,i){const n=e.href,a=e.title?wt(e.title):null,s=t[1].replace(/\\([\[\]])/g,"$1");if(t[0].charAt(0)!=="!"){i.state.inLink=!0;const o={type:"link",raw:r,href:n,title:a,text:s,tokens:i.inlineTokens(s)};return i.state.inLink=!1,o}return{type:"image",raw:r,href:n,title:a,text:wt(s)}}function DL(t,e){const r=t.match(/^(\s+)(?:```)/);if(r===null)return e;const i=r[1];return e.split(`
`).map(n=>{const a=n.match(/^\s+/);if(a===null)return n;const[s]=a;return s.length>=i.length?n.slice(i.length):n}).join(`
`)}let Lf=class{constructor(e){this.options=e||Xn}space(e){const r=this.rules.block.newline.exec(e);if(r&&r[0].length>0)return{type:"space",raw:r[0]}}code(e){const r=this.rules.block.code.exec(e);if(r){const i=r[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:r[0],codeBlockStyle:"indented",text:this.options.pedantic?i:pc(i,`
`)}}}fences(e){const r=this.rules.block.fences.exec(e);if(r){const i=r[0],n=DL(i,r[3]||"");return{type:"code",raw:i,lang:r[2]?r[2].trim().replace(this.rules.inline._escapes,"$1"):r[2],text:n}}}heading(e){const r=this.rules.block.heading.exec(e);if(r){let i=r[2].trim();if(/#$/.test(i)){const n=pc(i,"#");(this.options.pedantic||!n||/ $/.test(n))&&(i=n.trim())}return{type:"heading",raw:r[0],depth:r[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(e){const r=this.rules.block.hr.exec(e);if(r)return{type:"hr",raw:r[0]}}blockquote(e){const r=this.rules.block.blockquote.exec(e);if(r){const i=r[0].replace(/^ *>[ \t]?/gm,""),n=this.lexer.state.top;this.lexer.state.top=!0;const a=this.lexer.blockTokens(i);return this.lexer.state.top=n,{type:"blockquote",raw:r[0],tokens:a,text:i}}}list(e){let r=this.rules.block.list.exec(e);if(r){let i,n,a,s,o,l,c,u,p,d,h,g,y=r[1].trim();const x=y.length>1,m={type:"list",raw:"",ordered:x,start:x?+y.slice(0,-1):"",loose:!1,items:[]};y=x?`\\d{1,9}\\${y.slice(-1)}`:`\\${y}`,this.options.pedantic&&(y=x?y:"[*+-]");const k=new RegExp(`^( {0,3}${y})((?:[	 ][^\\n]*)?(?:\\n|$))`);for(;e&&(g=!1,!(!(r=k.exec(e))||this.rules.block.hr.test(e)));){if(i=r[0],e=e.substring(i.length),u=r[2].split(`
`,1)[0].replace(/^\t+/,_=>" ".repeat(3*_.length)),p=e.split(`
`,1)[0],this.options.pedantic?(s=2,h=u.trimLeft()):(s=r[2].search(/[^ ]/),s=s>4?1:s,h=u.slice(s),s+=r[1].length),l=!1,!u&&/^ *$/.test(p)&&(i+=p+`
`,e=e.substring(p.length+1),g=!0),!g){const _=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),w=new RegExp(`^ {0,${Math.min(3,s-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),A=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:\`\`\`|~~~)`),T=new RegExp(`^ {0,${Math.min(3,s-1)}}#`);for(;e&&(d=e.split(`
`,1)[0],p=d,this.options.pedantic&&(p=p.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(A.test(p)||T.test(p)||_.test(p)||w.test(e)));){if(p.search(/[^ ]/)>=s||!p.trim())h+=`
`+p.slice(s);else{if(l||u.search(/[^ ]/)>=4||A.test(u)||T.test(u)||w.test(u))break;h+=`
`+p}!l&&!p.trim()&&(l=!0),i+=d+`
`,e=e.substring(d.length+1),u=p.slice(s)}}m.loose||(c?m.loose=!0:/\n *\n *$/.test(i)&&(c=!0)),this.options.gfm&&(n=/^\[[ xX]\] /.exec(h),n&&(a=n[0]!=="[ ] ",h=h.replace(/^\[[ xX]\] +/,""))),m.items.push({type:"list_item",raw:i,task:!!n,checked:a,loose:!1,text:h}),m.raw+=i}m.items[m.items.length-1].raw=i.trimRight(),m.items[m.items.length-1].text=h.trimRight(),m.raw=m.raw.trimRight();const S=m.items.length;for(o=0;o<S;o++)if(this.lexer.state.top=!1,m.items[o].tokens=this.lexer.blockTokens(m.items[o].text,[]),!m.loose){const _=m.items[o].tokens.filter(A=>A.type==="space"),w=_.length>0&&_.some(A=>/\n.*\n/.test(A.raw));m.loose=w}if(m.loose)for(o=0;o<S;o++)m.items[o].loose=!0;return m}}html(e){const r=this.rules.block.html.exec(e);if(r){const i={type:"html",raw:r[0],pre:!this.options.sanitizer&&(r[1]==="pre"||r[1]==="script"||r[1]==="style"),text:r[0]};if(this.options.sanitize){const n=this.options.sanitizer?this.options.sanitizer(r[0]):wt(r[0]);i.type="paragraph",i.text=n,i.tokens=this.lexer.inline(n)}return i}}def(e){const r=this.rules.block.def.exec(e);if(r){const i=r[1].toLowerCase().replace(/\s+/g," "),n=r[2]?r[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",a=r[3]?r[3].substring(1,r[3].length-1).replace(this.rules.inline._escapes,"$1"):r[3];return{type:"def",tag:i,raw:r[0],href:n,title:a}}}table(e){const r=this.rules.block.table.exec(e);if(r){const i={type:"table",header:x1(r[1]).map(n=>({text:n})),align:r[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:r[3]&&r[3].trim()?r[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(i.header.length===i.align.length){i.raw=r[0];let n=i.align.length,a,s,o,l;for(a=0;a<n;a++)/^ *-+: *$/.test(i.align[a])?i.align[a]="right":/^ *:-+: *$/.test(i.align[a])?i.align[a]="center":/^ *:-+ *$/.test(i.align[a])?i.align[a]="left":i.align[a]=null;for(n=i.rows.length,a=0;a<n;a++)i.rows[a]=x1(i.rows[a],i.header.length).map(c=>({text:c}));for(n=i.header.length,s=0;s<n;s++)i.header[s].tokens=this.lexer.inline(i.header[s].text);for(n=i.rows.length,s=0;s<n;s++)for(l=i.rows[s],o=0;o<l.length;o++)l[o].tokens=this.lexer.inline(l[o].text);return i}}}lheading(e){const r=this.rules.block.lheading.exec(e);if(r)return{type:"heading",raw:r[0],depth:r[2].charAt(0)==="="?1:2,text:r[1],tokens:this.lexer.inline(r[1])}}paragraph(e){const r=this.rules.block.paragraph.exec(e);if(r){const i=r[1].charAt(r[1].length-1)===`
`?r[1].slice(0,-1):r[1];return{type:"paragraph",raw:r[0],text:i,tokens:this.lexer.inline(i)}}}text(e){const r=this.rules.block.text.exec(e);if(r)return{type:"text",raw:r[0],text:r[0],tokens:this.lexer.inline(r[0])}}escape(e){const r=this.rules.inline.escape.exec(e);if(r)return{type:"escape",raw:r[0],text:wt(r[1])}}tag(e){const r=this.rules.inline.tag.exec(e);if(r)return!this.lexer.state.inLink&&/^<a /i.test(r[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(r[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(r[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(r[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:r[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):wt(r[0]):r[0]}}link(e){const r=this.rules.inline.link.exec(e);if(r){const i=r[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const s=pc(i.slice(0,-1),"\\");if((i.length-s.length)%2===0)return}else{const s=$L(r[2],"()");if(s>-1){const l=(r[0].indexOf("!")===0?5:4)+r[1].length+s;r[2]=r[2].substring(0,s),r[0]=r[0].substring(0,l).trim(),r[3]=""}}let n=r[2],a="";if(this.options.pedantic){const s=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);s&&(n=s[1],a=s[3])}else a=r[3]?r[3].slice(1,-1):"";return n=n.trim(),/^</.test(n)&&(this.options.pedantic&&!/>$/.test(i)?n=n.slice(1):n=n.slice(1,-1)),k1(r,{href:n&&n.replace(this.rules.inline._escapes,"$1"),title:a&&a.replace(this.rules.inline._escapes,"$1")},r[0],this.lexer)}}reflink(e,r){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){let n=(i[2]||i[1]).replace(/\s+/g," ");if(n=r[n.toLowerCase()],!n){const a=i[0].charAt(0);return{type:"text",raw:a,text:a}}return k1(i,n,i[0],this.lexer)}}emStrong(e,r,i=""){let n=this.rules.inline.emStrong.lDelim.exec(e);if(!n||n[3]&&i.match(/[\p{L}\p{N}]/u))return;const a=n[1]||n[2]||"";if(!a||a&&(i===""||this.rules.inline.punctuation.exec(i))){const s=n[0].length-1;let o,l,c=s,u=0;const p=n[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(p.lastIndex=0,r=r.slice(-1*e.length+s);(n=p.exec(r))!=null;){if(o=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!o)continue;if(l=o.length,n[3]||n[4]){c+=l;continue}else if((n[5]||n[6])&&s%3&&!((s+l)%3)){u+=l;continue}if(c-=l,c>0)continue;l=Math.min(l,l+c+u);const d=e.slice(0,s+n.index+(n[0].length-o.length)+l);if(Math.min(s,l)%2){const g=d.slice(1,-1);return{type:"em",raw:d,text:g,tokens:this.lexer.inlineTokens(g)}}const h=d.slice(2,-2);return{type:"strong",raw:d,text:h,tokens:this.lexer.inlineTokens(h)}}}}codespan(e){const r=this.rules.inline.code.exec(e);if(r){let i=r[2].replace(/\n/g," ");const n=/[^ ]/.test(i),a=/^ /.test(i)&&/ $/.test(i);return n&&a&&(i=i.substring(1,i.length-1)),i=wt(i,!0),{type:"codespan",raw:r[0],text:i}}}br(e){const r=this.rules.inline.br.exec(e);if(r)return{type:"br",raw:r[0]}}del(e){const r=this.rules.inline.del.exec(e);if(r)return{type:"del",raw:r[0],text:r[2],tokens:this.lexer.inlineTokens(r[2])}}autolink(e,r){const i=this.rules.inline.autolink.exec(e);if(i){let n,a;return i[2]==="@"?(n=wt(this.options.mangle?r(i[1]):i[1]),a="mailto:"+n):(n=wt(i[1]),a=n),{type:"link",raw:i[0],text:n,href:a,tokens:[{type:"text",raw:n,text:n}]}}}url(e,r){let i;if(i=this.rules.inline.url.exec(e)){let n,a;if(i[2]==="@")n=wt(this.options.mangle?r(i[0]):i[0]),a="mailto:"+n;else{let s;do s=i[0],i[0]=this.rules.inline._backpedal.exec(i[0])[0];while(s!==i[0]);n=wt(i[0]),i[1]==="www."?a="http://"+i[0]:a=i[0]}return{type:"link",raw:i[0],text:n,href:a,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(e,r){const i=this.rules.inline.text.exec(e);if(i){let n;return this.lexer.state.inRawBlock?n=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):wt(i[0]):i[0]:n=wt(this.options.smartypants?r(i[0]):i[0]),{type:"text",raw:i[0],text:n}}}};const ie={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:ru,lheading:/^((?:.|\n(?!\n))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};ie._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;ie._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;ie.def=Le(ie.def).replace("label",ie._label).replace("title",ie._title).getRegex();ie.bullet=/(?:[*+-]|\d{1,9}[.)])/;ie.listItemStart=Le(/^( *)(bull) */).replace("bull",ie.bullet).getRegex();ie.list=Le(ie.list).replace(/bull/g,ie.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+ie.def.source+")").getRegex();ie._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";ie._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;ie.html=Le(ie.html,"i").replace("comment",ie._comment).replace("tag",ie._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();ie.paragraph=Le(ie._paragraph).replace("hr",ie.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ie._tag).getRegex();ie.blockquote=Le(ie.blockquote).replace("paragraph",ie.paragraph).getRegex();ie.normal={...ie};ie.gfm={...ie.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"};ie.gfm.table=Le(ie.gfm.table).replace("hr",ie.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ie._tag).getRegex();ie.gfm.paragraph=Le(ie._paragraph).replace("hr",ie.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",ie.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",ie._tag).getRegex();ie.pedantic={...ie.normal,html:Le(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ie._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:ru,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:Le(ie.normal._paragraph).replace("hr",ie.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",ie.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};const X={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:ru,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^(?:[^_*\\]|\\.)*?\_\_(?:[^_*\\]|\\.)*?\*(?:[^_*\\]|\\.)*?(?=\_\_)|(?:[^*\\]|\\.)+(?=[^*])|[punct_](\*+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|(?:[^punct*_\s\\]|\\.)(\*+)(?=[^punct*_\s])/,rDelimUnd:/^(?:[^_*\\]|\\.)*?\*\*(?:[^_*\\]|\\.)*?\_(?:[^_*\\]|\\.)*?(?=\*\*)|(?:[^_\\]|\\.)+(?=[^_])|[punct*](\_+)(?=[\s]|$)|(?:[^punct*_\s\\]|\\.)(\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:ru,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};X._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";X.punctuation=Le(X.punctuation).replace(/punctuation/g,X._punctuation).getRegex();X.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;X.escapedEmSt=/(?:^|[^\\])(?:\\\\)*\\[*_]/g;X._comment=Le(ie._comment).replace("(?:-->|$)","-->").getRegex();X.emStrong.lDelim=Le(X.emStrong.lDelim).replace(/punct/g,X._punctuation).getRegex();X.emStrong.rDelimAst=Le(X.emStrong.rDelimAst,"g").replace(/punct/g,X._punctuation).getRegex();X.emStrong.rDelimUnd=Le(X.emStrong.rDelimUnd,"g").replace(/punct/g,X._punctuation).getRegex();X._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;X._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;X._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;X.autolink=Le(X.autolink).replace("scheme",X._scheme).replace("email",X._email).getRegex();X._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;X.tag=Le(X.tag).replace("comment",X._comment).replace("attribute",X._attribute).getRegex();X._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;X._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;X._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;X.link=Le(X.link).replace("label",X._label).replace("href",X._href).replace("title",X._title).getRegex();X.reflink=Le(X.reflink).replace("label",X._label).replace("ref",ie._label).getRegex();X.nolink=Le(X.nolink).replace("ref",ie._label).getRegex();X.reflinkSearch=Le(X.reflinkSearch,"g").replace("reflink",X.reflink).replace("nolink",X.nolink).getRegex();X.normal={...X};X.pedantic={...X.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Le(/^!?\[(label)\]\((.*?)\)/).replace("label",X._label).getRegex(),reflink:Le(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",X._label).getRegex()};X.gfm={...X.normal,escape:Le(X.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/};X.gfm.url=Le(X.gfm.url,"i").replace("email",X.gfm._extended_email).getRegex();X.breaks={...X.gfm,br:Le(X.br).replace("{2,}","*").getRegex(),text:Le(X.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};function LL(t){return t.replace(/---/g,"—").replace(/--/g,"–").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1‘").replace(/'/g,"’").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1“").replace(/"/g,"”").replace(/\.{3}/g,"…")}function S1(t){let e="",r,i;const n=t.length;for(r=0;r<n;r++)i=t.charCodeAt(r),Math.random()>.5&&(i="x"+i.toString(16)),e+="&#"+i+";";return e}class zi{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||Xn,this.options.tokenizer=this.options.tokenizer||new Lf,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const r={block:ie.normal,inline:X.normal};this.options.pedantic?(r.block=ie.pedantic,r.inline=X.pedantic):this.options.gfm&&(r.block=ie.gfm,this.options.breaks?r.inline=X.breaks:r.inline=X.gfm),this.tokenizer.rules=r}static get rules(){return{block:ie,inline:X}}static lex(e,r){return new zi(r).lex(e)}static lexInline(e,r){return new zi(r).inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,`
`),this.blockTokens(e,this.tokens);let r;for(;r=this.inlineQueue.shift();)this.inlineTokens(r.src,r.tokens);return this.tokens}blockTokens(e,r=[]){this.options.pedantic?e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""):e=e.replace(/^( *)(\t+)/gm,(o,l,c)=>l+"    ".repeat(c.length));let i,n,a,s;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(o=>(i=o.call({lexer:this},e,r))?(e=e.substring(i.raw.length),r.push(i),!0):!1))){if(i=this.tokenizer.space(e)){e=e.substring(i.raw.length),i.raw.length===1&&r.length>0?r[r.length-1].raw+=`
`:r.push(i);continue}if(i=this.tokenizer.code(e)){e=e.substring(i.raw.length),n=r[r.length-1],n&&(n.type==="paragraph"||n.type==="text")?(n.raw+=`
`+i.raw,n.text+=`
`+i.text,this.inlineQueue[this.inlineQueue.length-1].src=n.text):r.push(i);continue}if(i=this.tokenizer.fences(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.heading(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.hr(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.blockquote(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.list(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.html(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.def(e)){e=e.substring(i.raw.length),n=r[r.length-1],n&&(n.type==="paragraph"||n.type==="text")?(n.raw+=`
`+i.raw,n.text+=`
`+i.raw,this.inlineQueue[this.inlineQueue.length-1].src=n.text):this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});continue}if(i=this.tokenizer.table(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.lheading(e)){e=e.substring(i.raw.length),r.push(i);continue}if(a=e,this.options.extensions&&this.options.extensions.startBlock){let o=1/0;const l=e.slice(1);let c;this.options.extensions.startBlock.forEach(function(u){c=u.call({lexer:this},l),typeof c=="number"&&c>=0&&(o=Math.min(o,c))}),o<1/0&&o>=0&&(a=e.substring(0,o+1))}if(this.state.top&&(i=this.tokenizer.paragraph(a))){n=r[r.length-1],s&&n.type==="paragraph"?(n.raw+=`
`+i.raw,n.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):r.push(i),s=a.length!==e.length,e=e.substring(i.raw.length);continue}if(i=this.tokenizer.text(e)){e=e.substring(i.raw.length),n=r[r.length-1],n&&n.type==="text"?(n.raw+=`
`+i.raw,n.text+=`
`+i.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):r.push(i);continue}if(e){const o="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,r}inline(e,r=[]){return this.inlineQueue.push({src:e,tokens:r}),r}inlineTokens(e,r=[]){let i,n,a,s=e,o,l,c;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(o=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)u.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,o.index)+"["+_1("a",o[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(o=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)s=s.slice(0,o.index)+"["+_1("a",o[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(o=this.tokenizer.rules.inline.escapedEmSt.exec(s))!=null;)s=s.slice(0,o.index+o[0].length-2)+"++"+s.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex),this.tokenizer.rules.inline.escapedEmSt.lastIndex--;for(;e;)if(l||(c=""),l=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(i=u.call({lexer:this},e,r))?(e=e.substring(i.raw.length),r.push(i),!0):!1))){if(i=this.tokenizer.escape(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.tag(e)){e=e.substring(i.raw.length),n=r[r.length-1],n&&i.type==="text"&&n.type==="text"?(n.raw+=i.raw,n.text+=i.text):r.push(i);continue}if(i=this.tokenizer.link(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(i.raw.length),n=r[r.length-1],n&&i.type==="text"&&n.type==="text"?(n.raw+=i.raw,n.text+=i.text):r.push(i);continue}if(i=this.tokenizer.emStrong(e,s,c)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.codespan(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.br(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.del(e)){e=e.substring(i.raw.length),r.push(i);continue}if(i=this.tokenizer.autolink(e,S1)){e=e.substring(i.raw.length),r.push(i);continue}if(!this.state.inLink&&(i=this.tokenizer.url(e,S1))){e=e.substring(i.raw.length),r.push(i);continue}if(a=e,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const p=e.slice(1);let d;this.options.extensions.startInline.forEach(function(h){d=h.call({lexer:this},p),typeof d=="number"&&d>=0&&(u=Math.min(u,d))}),u<1/0&&u>=0&&(a=e.substring(0,u+1))}if(i=this.tokenizer.inlineText(a,LL)){e=e.substring(i.raw.length),i.raw.slice(-1)!=="_"&&(c=i.raw.slice(-1)),l=!0,n=r[r.length-1],n&&n.type==="text"?(n.raw+=i.raw,n.text+=i.text):r.push(i);continue}if(e){const u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return r}}class Of{constructor(e){this.options=e||Xn}code(e,r,i){const n=(r||"").match(/\S*/)[0];if(this.options.highlight){const a=this.options.highlight(e,n);a!=null&&a!==e&&(i=!0,e=a)}return e=e.replace(/\n$/,"")+`
`,n?'<pre><code class="'+this.options.langPrefix+wt(n)+'">'+(i?e:wt(e,!0))+`</code></pre>
`:"<pre><code>"+(i?e:wt(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
${e}</blockquote>
`}html(e){return e}heading(e,r,i,n){if(this.options.headerIds){const a=this.options.headerPrefix+n.slug(i);return`<h${r} id="${a}">${e}</h${r}>
`}return`<h${r}>${e}</h${r}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,r,i){const n=r?"ol":"ul",a=r&&i!==1?' start="'+i+'"':"";return"<"+n+a+`>
`+e+"</"+n+`>
`}listitem(e){return`<li>${e}</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return`<p>${e}</p>
`}table(e,r){return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+r+`</table>
`}tablerow(e){return`<tr>
${e}</tr>
`}tablecell(e,r){const i=r.header?"th":"td";return(r.align?`<${i} align="${r.align}">`:`<${i}>`)+e+`</${i}>
`}strong(e){return`<strong>${e}</strong>`}em(e){return`<em>${e}</em>`}codespan(e){return`<code>${e}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return`<del>${e}</del>`}link(e,r,i){if(e=w1(this.options.sanitize,this.options.baseUrl,e),e===null)return i;let n='<a href="'+e+'"';return r&&(n+=' title="'+r+'"'),n+=">"+i+"</a>",n}image(e,r,i){if(e=w1(this.options.sanitize,this.options.baseUrl,e),e===null)return i;let n=`<img src="${e}" alt="${i}"`;return r&&(n+=` title="${r}"`),n+=this.options.xhtml?"/>":">",n}text(e){return e}}class b5{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,r,i){return""+i}image(e,r,i){return""+i}br(){return""}}class v5{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,r){let i=e,n=0;if(this.seen.hasOwnProperty(i)){n=this.seen[e];do n++,i=e+"-"+n;while(this.seen.hasOwnProperty(i))}return r||(this.seen[e]=n,this.seen[i]=0),i}slug(e,r={}){const i=this.serialize(e);return this.getNextSafeSlug(i,r.dryrun)}}let el=class rp{constructor(e){this.options=e||Xn,this.options.renderer=this.options.renderer||new Of,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new b5,this.slugger=new v5}static parse(e,r){return new rp(r).parse(e)}static parseInline(e,r){return new rp(r).parseInline(e)}parse(e,r=!0){let i="",n,a,s,o,l,c,u,p,d,h,g,y,x,m,k,S,_,w,A;const T=e.length;for(n=0;n<T;n++){if(h=e[n],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[h.type]&&(A=this.options.extensions.renderers[h.type].call({parser:this},h),A!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(h.type))){i+=A||"";continue}switch(h.type){case"space":continue;case"hr":{i+=this.renderer.hr();continue}case"heading":{i+=this.renderer.heading(this.parseInline(h.tokens),h.depth,m5(this.parseInline(h.tokens,this.textRenderer)),this.slugger);continue}case"code":{i+=this.renderer.code(h.text,h.lang,h.escaped);continue}case"table":{for(p="",u="",o=h.header.length,a=0;a<o;a++)u+=this.renderer.tablecell(this.parseInline(h.header[a].tokens),{header:!0,align:h.align[a]});for(p+=this.renderer.tablerow(u),d="",o=h.rows.length,a=0;a<o;a++){for(c=h.rows[a],u="",l=c.length,s=0;s<l;s++)u+=this.renderer.tablecell(this.parseInline(c[s].tokens),{header:!1,align:h.align[s]});d+=this.renderer.tablerow(u)}i+=this.renderer.table(p,d);continue}case"blockquote":{d=this.parse(h.tokens),i+=this.renderer.blockquote(d);continue}case"list":{for(g=h.ordered,y=h.start,x=h.loose,o=h.items.length,d="",a=0;a<o;a++)k=h.items[a],S=k.checked,_=k.task,m="",k.task&&(w=this.renderer.checkbox(S),x?k.tokens.length>0&&k.tokens[0].type==="paragraph"?(k.tokens[0].text=w+" "+k.tokens[0].text,k.tokens[0].tokens&&k.tokens[0].tokens.length>0&&k.tokens[0].tokens[0].type==="text"&&(k.tokens[0].tokens[0].text=w+" "+k.tokens[0].tokens[0].text)):k.tokens.unshift({type:"text",text:w}):m+=w),m+=this.parse(k.tokens,x),d+=this.renderer.listitem(m,_,S);i+=this.renderer.list(d,g,y);continue}case"html":{i+=this.renderer.html(h.text);continue}case"paragraph":{i+=this.renderer.paragraph(this.parseInline(h.tokens));continue}case"text":{for(d=h.tokens?this.parseInline(h.tokens):h.text;n+1<T&&e[n+1].type==="text";)h=e[++n],d+=`
`+(h.tokens?this.parseInline(h.tokens):h.text);i+=r?this.renderer.paragraph(d):d;continue}default:{const I='Token with "'+h.type+'" type was not found.';if(this.options.silent){console.error(I);return}else throw new Error(I)}}}return i}parseInline(e,r){r=r||this.renderer;let i="",n,a,s;const o=e.length;for(n=0;n<o;n++){if(a=e[n],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[a.type]&&(s=this.options.extensions.renderers[a.type].call({parser:this},a),s!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type))){i+=s||"";continue}switch(a.type){case"escape":{i+=r.text(a.text);break}case"html":{i+=r.html(a.text);break}case"link":{i+=r.link(a.href,a.title,this.parseInline(a.tokens,r));break}case"image":{i+=r.image(a.href,a.title,a.text);break}case"strong":{i+=r.strong(this.parseInline(a.tokens,r));break}case"em":{i+=r.em(this.parseInline(a.tokens,r));break}case"codespan":{i+=r.codespan(a.text);break}case"br":{i+=r.br();break}case"del":{i+=r.del(this.parseInline(a.tokens,r));break}case"text":{i+=r.text(a.text);break}default:{const l='Token with "'+a.type+'" type was not found.';if(this.options.silent){console.error(l);return}else throw new Error(l)}}}return i}};class ip{constructor(e){this.options=e||Xn}static passThroughHooks=new Set(["preprocess","postprocess"]);preprocess(e){return e}postprocess(e){return e}}function OL(t,e,r){return i=>{if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,t){const n="<p>An error occurred:</p><pre>"+wt(i.message+"",!0)+"</pre>";if(e)return Promise.resolve(n);if(r){r(null,n);return}return n}if(e)return Promise.reject(i);if(r){r(i);return}throw i}}function y5(t,e){return(r,i,n)=>{typeof i=="function"&&(n=i,i=null);const a={...i};i={...ne.defaults,...a};const s=OL(i.silent,i.async,n);if(typeof r>"u"||r===null)return s(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return s(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(RL(i),i.hooks&&(i.hooks.options=i),n){const o=i.highlight;let l;try{i.hooks&&(r=i.hooks.preprocess(r)),l=t(r,i)}catch(p){return s(p)}const c=function(p){let d;if(!p)try{i.walkTokens&&ne.walkTokens(l,i.walkTokens),d=e(l,i),i.hooks&&(d=i.hooks.postprocess(d))}catch(h){p=h}return i.highlight=o,p?s(p):n(null,d)};if(!o||o.length<3||(delete i.highlight,!l.length))return c();let u=0;ne.walkTokens(l,function(p){p.type==="code"&&(u++,setTimeout(()=>{o(p.text,p.lang,function(d,h){if(d)return c(d);h!=null&&h!==p.text&&(p.text=h,p.escaped=!0),u--,u===0&&c()})},0))}),u===0&&c();return}if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(r):r).then(o=>t(o,i)).then(o=>i.walkTokens?Promise.all(ne.walkTokens(o,i.walkTokens)).then(()=>o):o).then(o=>e(o,i)).then(o=>i.hooks?i.hooks.postprocess(o):o).catch(s);try{i.hooks&&(r=i.hooks.preprocess(r));const o=t(r,i);i.walkTokens&&ne.walkTokens(o,i.walkTokens);let l=e(o,i);return i.hooks&&(l=i.hooks.postprocess(l)),l}catch(o){return s(o)}}}function ne(t,e,r){return y5(zi.lex,el.parse)(t,e,r)}ne.options=ne.setOptions=function(t){return ne.defaults={...ne.defaults,...t},wL(ne.defaults),ne};ne.getDefaults=p5;ne.defaults=Xn;ne.use=function(...t){const e=ne.defaults.extensions||{renderers:{},childTokens:{}};t.forEach(r=>{const i={...r};if(i.async=ne.defaults.async||i.async||!1,r.extensions&&(r.extensions.forEach(n=>{if(!n.name)throw new Error("extension name required");if(n.renderer){const a=e.renderers[n.name];a?e.renderers[n.name]=function(...s){let o=n.renderer.apply(this,s);return o===!1&&(o=a.apply(this,s)),o}:e.renderers[n.name]=n.renderer}if(n.tokenizer){if(!n.level||n.level!=="block"&&n.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");e[n.level]?e[n.level].unshift(n.tokenizer):e[n.level]=[n.tokenizer],n.start&&(n.level==="block"?e.startBlock?e.startBlock.push(n.start):e.startBlock=[n.start]:n.level==="inline"&&(e.startInline?e.startInline.push(n.start):e.startInline=[n.start]))}n.childTokens&&(e.childTokens[n.name]=n.childTokens)}),i.extensions=e),r.renderer){const n=ne.defaults.renderer||new Of;for(const a in r.renderer){const s=n[a];n[a]=(...o)=>{let l=r.renderer[a].apply(n,o);return l===!1&&(l=s.apply(n,o)),l}}i.renderer=n}if(r.tokenizer){const n=ne.defaults.tokenizer||new Lf;for(const a in r.tokenizer){const s=n[a];n[a]=(...o)=>{let l=r.tokenizer[a].apply(n,o);return l===!1&&(l=s.apply(n,o)),l}}i.tokenizer=n}if(r.hooks){const n=ne.defaults.hooks||new ip;for(const a in r.hooks){const s=n[a];ip.passThroughHooks.has(a)?n[a]=o=>{if(ne.defaults.async)return Promise.resolve(r.hooks[a].call(n,o)).then(c=>s.call(n,c));const l=r.hooks[a].call(n,o);return s.call(n,l)}:n[a]=(...o)=>{let l=r.hooks[a].apply(n,o);return l===!1&&(l=s.apply(n,o)),l}}i.hooks=n}if(r.walkTokens){const n=ne.defaults.walkTokens;i.walkTokens=function(a){let s=[];return s.push(r.walkTokens.call(this,a)),n&&(s=s.concat(n.call(this,a))),s}}ne.setOptions(i)})};ne.walkTokens=function(t,e){let r=[];for(const i of t)switch(r=r.concat(e.call(ne,i)),i.type){case"table":{for(const n of i.header)r=r.concat(ne.walkTokens(n.tokens,e));for(const n of i.rows)for(const a of n)r=r.concat(ne.walkTokens(a.tokens,e));break}case"list":{r=r.concat(ne.walkTokens(i.items,e));break}default:ne.defaults.extensions&&ne.defaults.extensions.childTokens&&ne.defaults.extensions.childTokens[i.type]?ne.defaults.extensions.childTokens[i.type].forEach(function(n){r=r.concat(ne.walkTokens(i[n],e))}):i.tokens&&(r=r.concat(ne.walkTokens(i.tokens,e)))}return r};ne.parseInline=y5(zi.lexInline,el.parseInline);ne.Parser=el;ne.parser=el.parse;ne.Renderer=Of;ne.TextRenderer=b5;ne.Lexer=zi;ne.lexer=zi.lex;ne.Tokenizer=Lf;ne.Slugger=v5;ne.Hooks=ip;ne.parse=ne;ne.options;ne.setOptions;ne.use;ne.walkTokens;ne.parseInline;el.parse;zi.lex;var fr={},gr={},lh={},mr={},Fl={},A1;function BL(){return A1||(A1=1,Object.defineProperty(Fl,"__esModule",{value:!0}),Fl.default=new Uint16Array('ᵁ<Õıʊҝջאٵ۞ޢߖࠏ੊ઑඡ๭༉༦჊ረዡᐕᒝᓃᓟᔥ\0\0\0\0\0\0ᕫᛍᦍᰒᷝ὾⁠↰⊍⏀⏻⑂⠤⤒ⴈ⹈⿎〖㊺㘹㞬㣾㨨㩱㫠㬮ࠀEMabcfglmnoprstu\\bfms¦³¹ÈÏlig耻Æ䃆P耻&䀦cute耻Á䃁reve;䄂Āiyx}rc耻Â䃂;䐐r;쀀𝔄rave耻À䃀pha;䎑acr;䄀d;橓Āgp¡on;䄄f;쀀𝔸plyFunction;恡ing耻Å䃅Ācs¾Ãr;쀀𝒜ign;扔ilde耻Ã䃃ml耻Ä䃄ЀaceforsuåûþėĜĢħĪĀcrêòkslash;或Ŷöø;櫧ed;挆y;䐑ƀcrtąċĔause;戵noullis;愬a;䎒r;쀀𝔅pf;쀀𝔹eve;䋘còēmpeq;扎܀HOacdefhilorsuōőŖƀƞƢƵƷƺǜȕɳɸɾcy;䐧PY耻©䂩ƀcpyŝŢźute;䄆Ā;iŧŨ拒talDifferentialD;慅leys;愭ȀaeioƉƎƔƘron;䄌dil耻Ç䃇rc;䄈nint;戰ot;䄊ĀdnƧƭilla;䂸terDot;䂷òſi;䎧rcleȀDMPTǇǋǑǖot;抙inus;抖lus;投imes;抗oĀcsǢǸkwiseContourIntegral;戲eCurlyĀDQȃȏoubleQuote;思uote;怙ȀlnpuȞȨɇɕonĀ;eȥȦ户;橴ƀgitȯȶȺruent;扡nt;戯ourIntegral;戮ĀfrɌɎ;愂oduct;成nterClockwiseContourIntegral;戳oss;樯cr;쀀𝒞pĀ;Cʄʅ拓ap;才րDJSZacefiosʠʬʰʴʸˋ˗ˡ˦̳ҍĀ;oŹʥtrahd;椑cy;䐂cy;䐅cy;䐏ƀgrsʿ˄ˇger;怡r;憡hv;櫤Āayː˕ron;䄎;䐔lĀ;t˝˞戇a;䎔r;쀀𝔇Āaf˫̧Ācm˰̢riticalȀADGT̖̜̀̆cute;䂴oŴ̋̍;䋙bleAcute;䋝rave;䁠ilde;䋜ond;拄ferentialD;慆Ѱ̽\0\0\0͔͂\0Ѕf;쀀𝔻ƀ;DE͈͉͍䂨ot;惜qual;扐blèCDLRUVͣͲ΂ϏϢϸontourIntegraìȹoɴ͹\0\0ͻ»͉nArrow;懓Āeo·ΤftƀARTΐΖΡrrow;懐ightArrow;懔eåˊngĀLRΫτeftĀARγιrrow;柸ightArrow;柺ightArrow;柹ightĀATϘϞrrow;懒ee;抨pɁϩ\0\0ϯrrow;懑ownArrow;懕erticalBar;戥ǹABLRTaВЪаўѿͼrrowƀ;BUНОТ憓ar;椓pArrow;懵reve;䌑eft˒к\0ц\0ѐightVector;楐eeVector;楞ectorĀ;Bљњ憽ar;楖ightǔѧ\0ѱeeVector;楟ectorĀ;BѺѻ懁ar;楗eeĀ;A҆҇护rrow;憧ĀctҒҗr;쀀𝒟rok;䄐ࠀNTacdfglmopqstuxҽӀӄӋӞӢӧӮӵԡԯԶՒ՝ՠեG;䅊H耻Ð䃐cute耻É䃉ƀaiyӒӗӜron;䄚rc耻Ê䃊;䐭ot;䄖r;쀀𝔈rave耻È䃈ement;戈ĀapӺӾcr;䄒tyɓԆ\0\0ԒmallSquare;旻erySmallSquare;斫ĀgpԦԪon;䄘f;쀀𝔼silon;䎕uĀaiԼՉlĀ;TՂՃ橵ilde;扂librium;懌Āci՗՚r;愰m;橳a;䎗ml耻Ë䃋Āipժկsts;戃onentialE;慇ʀcfiosօֈ֍ֲ׌y;䐤r;쀀𝔉lledɓ֗\0\0֣mallSquare;旼erySmallSquare;斪Ͱֺ\0ֿ\0\0ׄf;쀀𝔽All;戀riertrf;愱cò׋؀JTabcdfgorstר׬ׯ׺؀ؒؖ؛؝أ٬ٲcy;䐃耻>䀾mmaĀ;d׷׸䎓;䏜reve;䄞ƀeiy؇،ؐdil;䄢rc;䄜;䐓ot;䄠r;쀀𝔊;拙pf;쀀𝔾eater̀EFGLSTصلَٖٛ٦qualĀ;Lؾؿ扥ess;招ullEqual;执reater;檢ess;扷lantEqual;橾ilde;扳cr;쀀𝒢;扫ЀAacfiosuڅڋږڛڞڪھۊRDcy;䐪Āctڐڔek;䋇;䁞irc;䄤r;愌lbertSpace;愋ǰگ\0ڲf;愍izontalLine;攀Āctۃۅòکrok;䄦mpńېۘownHumðįqual;扏܀EJOacdfgmnostuۺ۾܃܇܎ܚܞܡܨ݄ݸދޏޕcy;䐕lig;䄲cy;䐁cute耻Í䃍Āiyܓܘrc耻Î䃎;䐘ot;䄰r;愑rave耻Ì䃌ƀ;apܠܯܿĀcgܴܷr;䄪inaryI;慈lieóϝǴ݉\0ݢĀ;eݍݎ戬Āgrݓݘral;戫section;拂isibleĀCTݬݲomma;恣imes;恢ƀgptݿރވon;䄮f;쀀𝕀a;䎙cr;愐ilde;䄨ǫޚ\0ޞcy;䐆l耻Ï䃏ʀcfosuެ޷޼߂ߐĀiyޱ޵rc;䄴;䐙r;쀀𝔍pf;쀀𝕁ǣ߇\0ߌr;쀀𝒥rcy;䐈kcy;䐄΀HJacfosߤߨ߽߬߱ࠂࠈcy;䐥cy;䐌ppa;䎚Āey߶߻dil;䄶;䐚r;쀀𝔎pf;쀀𝕂cr;쀀𝒦րJTaceflmostࠥࠩࠬࡐࡣ঳সে্਷ੇcy;䐉耻<䀼ʀcmnpr࠷࠼ࡁࡄࡍute;䄹bda;䎛g;柪lacetrf;愒r;憞ƀaeyࡗ࡜ࡡron;䄽dil;䄻;䐛Āfsࡨ॰tԀACDFRTUVarࡾࢩࢱࣦ࣠ࣼयज़ΐ४Ānrࢃ࢏gleBracket;柨rowƀ;BR࢙࢚࢞憐ar;懤ightArrow;懆eiling;挈oǵࢷ\0ࣃbleBracket;柦nǔࣈ\0࣒eeVector;楡ectorĀ;Bࣛࣜ懃ar;楙loor;挊ightĀAV࣯ࣵrrow;憔ector;楎Āerँगeƀ;AVउऊऐ抣rrow;憤ector;楚iangleƀ;BEतथऩ抲ar;槏qual;抴pƀDTVषूौownVector;楑eeVector;楠ectorĀ;Bॖॗ憿ar;楘ectorĀ;B॥०憼ar;楒ightáΜs̀EFGLSTॾঋকঝঢভqualGreater;拚ullEqual;扦reater;扶ess;檡lantEqual;橽ilde;扲r;쀀𝔏Ā;eঽা拘ftarrow;懚idot;䄿ƀnpw৔ਖਛgȀLRlr৞৷ਂਐeftĀAR০৬rrow;柵ightArrow;柷ightArrow;柶eftĀarγਊightáοightáϊf;쀀𝕃erĀLRਢਬeftArrow;憙ightArrow;憘ƀchtਾੀੂòࡌ;憰rok;䅁;扪Ѐacefiosuਗ਼੝੠੷੼અઋ઎p;椅y;䐜Ādl੥੯iumSpace;恟lintrf;愳r;쀀𝔐nusPlus;戓pf;쀀𝕄cò੶;䎜ҀJacefostuણધભીଔଙඑ඗ඞcy;䐊cute;䅃ƀaey઴હાron;䅇dil;䅅;䐝ƀgswે૰଎ativeƀMTV૓૟૨ediumSpace;怋hiĀcn૦૘ë૙eryThiî૙tedĀGL૸ଆreaterGreateòٳessLesóੈLine;䀊r;쀀𝔑ȀBnptଢନଷ଺reak;恠BreakingSpace;䂠f;愕ڀ;CDEGHLNPRSTV୕ୖ୪୼஡௫ఄ౞಄ದ೘ൡඅ櫬Āou୛୤ngruent;扢pCap;扭oubleVerticalBar;戦ƀlqxஃஊ஛ement;戉ualĀ;Tஒஓ扠ilde;쀀≂̸ists;戄reater΀;EFGLSTஶஷ஽௉௓௘௥扯qual;扱ullEqual;쀀≧̸reater;쀀≫̸ess;批lantEqual;쀀⩾̸ilde;扵umpń௲௽ownHump;쀀≎̸qual;쀀≏̸eĀfsఊధtTriangleƀ;BEచఛడ拪ar;쀀⧏̸qual;括s̀;EGLSTవశ఼ౄోౘ扮qual;扰reater;扸ess;쀀≪̸lantEqual;쀀⩽̸ilde;扴estedĀGL౨౹reaterGreater;쀀⪢̸essLess;쀀⪡̸recedesƀ;ESಒಓಛ技qual;쀀⪯̸lantEqual;拠ĀeiಫಹverseElement;戌ghtTriangleƀ;BEೋೌ೒拫ar;쀀⧐̸qual;拭ĀquೝഌuareSuĀbp೨೹setĀ;E೰ೳ쀀⊏̸qual;拢ersetĀ;Eഃആ쀀⊐̸qual;拣ƀbcpഓതൎsetĀ;Eഛഞ쀀⊂⃒qual;抈ceedsȀ;ESTലള഻െ抁qual;쀀⪰̸lantEqual;拡ilde;쀀≿̸ersetĀ;E൘൛쀀⊃⃒qual;抉ildeȀ;EFT൮൯൵ൿ扁qual;扄ullEqual;扇ilde;扉erticalBar;戤cr;쀀𝒩ilde耻Ñ䃑;䎝܀Eacdfgmoprstuvලෂ෉෕ෛ෠෧෼ขภยา฿ไlig;䅒cute耻Ó䃓Āiy෎ීrc耻Ô䃔;䐞blac;䅐r;쀀𝔒rave耻Ò䃒ƀaei෮ෲ෶cr;䅌ga;䎩cron;䎟pf;쀀𝕆enCurlyĀDQฎบoubleQuote;怜uote;怘;橔Āclวฬr;쀀𝒪ash耻Ø䃘iŬื฼de耻Õ䃕es;樷ml耻Ö䃖erĀBP๋๠Āar๐๓r;怾acĀek๚๜;揞et;掴arenthesis;揜Ҁacfhilors๿ງຊຏຒດຝະ໼rtialD;戂y;䐟r;쀀𝔓i;䎦;䎠usMinus;䂱Āipຢອncareplanåڝf;愙Ȁ;eio຺ູ໠໤檻cedesȀ;EST່້໏໚扺qual;檯lantEqual;扼ilde;找me;怳Ādp໩໮uct;戏ortionĀ;aȥ໹l;戝Āci༁༆r;쀀𝒫;䎨ȀUfos༑༖༛༟OT耻"䀢r;쀀𝔔pf;愚cr;쀀𝒬؀BEacefhiorsu༾གྷཇའཱིྦྷྪྭ႖ႩႴႾarr;椐G耻®䂮ƀcnrཎནབute;䅔g;柫rĀ;tཛྷཝ憠l;椖ƀaeyཧཬཱron;䅘dil;䅖;䐠Ā;vླྀཹ愜erseĀEUྂྙĀlq྇ྎement;戋uilibrium;懋pEquilibrium;楯r»ཹo;䎡ghtЀACDFTUVa࿁࿫࿳ဢဨၛႇϘĀnr࿆࿒gleBracket;柩rowƀ;BL࿜࿝࿡憒ar;懥eftArrow;懄eiling;按oǵ࿹\0စbleBracket;柧nǔည\0နeeVector;楝ectorĀ;Bဝသ懂ar;楕loor;挋Āerိ၃eƀ;AVဵံြ抢rrow;憦ector;楛iangleƀ;BEၐၑၕ抳ar;槐qual;抵pƀDTVၣၮၸownVector;楏eeVector;楜ectorĀ;Bႂႃ憾ar;楔ectorĀ;B႑႒懀ar;楓Āpuႛ႞f;愝ndImplies;楰ightarrow;懛ĀchႹႼr;愛;憱leDelayed;槴ڀHOacfhimoqstuფჱჷჽᄙᄞᅑᅖᅡᅧᆵᆻᆿĀCcჩხHcy;䐩y;䐨FTcy;䐬cute;䅚ʀ;aeiyᄈᄉᄎᄓᄗ檼ron;䅠dil;䅞rc;䅜;䐡r;쀀𝔖ortȀDLRUᄪᄴᄾᅉownArrow»ОeftArrow»࢚ightArrow»࿝pArrow;憑gma;䎣allCircle;战pf;쀀𝕊ɲᅭ\0\0ᅰt;戚areȀ;ISUᅻᅼᆉᆯ斡ntersection;抓uĀbpᆏᆞsetĀ;Eᆗᆘ抏qual;抑ersetĀ;Eᆨᆩ抐qual;抒nion;抔cr;쀀𝒮ar;拆ȀbcmpᇈᇛሉላĀ;sᇍᇎ拐etĀ;Eᇍᇕqual;抆ĀchᇠህeedsȀ;ESTᇭᇮᇴᇿ扻qual;檰lantEqual;扽ilde;承Tháྌ;我ƀ;esሒሓሣ拑rsetĀ;Eሜም抃qual;抇et»ሓրHRSacfhiorsሾቄ቉ቕ቞ቱቶኟዂወዑORN耻Þ䃞ADE;愢ĀHc቎ቒcy;䐋y;䐦Ābuቚቜ;䀉;䎤ƀaeyብቪቯron;䅤dil;䅢;䐢r;쀀𝔗Āeiቻ኉ǲኀ\0ኇefore;戴a;䎘Ācn኎ኘkSpace;쀀  Space;怉ldeȀ;EFTካኬኲኼ戼qual;扃ullEqual;扅ilde;扈pf;쀀𝕋ipleDot;惛Āctዖዛr;쀀𝒯rok;䅦ૡዷጎጚጦ\0ጬጱ\0\0\0\0\0ጸጽ፷ᎅ\0᏿ᐄᐊᐐĀcrዻጁute耻Ú䃚rĀ;oጇገ憟cir;楉rǣጓ\0጖y;䐎ve;䅬Āiyጞጣrc耻Û䃛;䐣blac;䅰r;쀀𝔘rave耻Ù䃙acr;䅪Ādiፁ፩erĀBPፈ፝Āarፍፐr;䁟acĀekፗፙ;揟et;掵arenthesis;揝onĀ;P፰፱拃lus;抎Āgp፻፿on;䅲f;쀀𝕌ЀADETadps᎕ᎮᎸᏄϨᏒᏗᏳrrowƀ;BDᅐᎠᎤar;椒ownArrow;懅ownArrow;憕quilibrium;楮eeĀ;AᏋᏌ报rrow;憥ownáϳerĀLRᏞᏨeftArrow;憖ightArrow;憗iĀ;lᏹᏺ䏒on;䎥ing;䅮cr;쀀𝒰ilde;䅨ml耻Ü䃜ҀDbcdefosvᐧᐬᐰᐳᐾᒅᒊᒐᒖash;披ar;櫫y;䐒ashĀ;lᐻᐼ抩;櫦Āerᑃᑅ;拁ƀbtyᑌᑐᑺar;怖Ā;iᑏᑕcalȀBLSTᑡᑥᑪᑴar;戣ine;䁼eparator;杘ilde;所ThinSpace;怊r;쀀𝔙pf;쀀𝕍cr;쀀𝒱dash;抪ʀcefosᒧᒬᒱᒶᒼirc;䅴dge;拀r;쀀𝔚pf;쀀𝕎cr;쀀𝒲Ȁfiosᓋᓐᓒᓘr;쀀𝔛;䎞pf;쀀𝕏cr;쀀𝒳ҀAIUacfosuᓱᓵᓹᓽᔄᔏᔔᔚᔠcy;䐯cy;䐇cy;䐮cute耻Ý䃝Āiyᔉᔍrc;䅶;䐫r;쀀𝔜pf;쀀𝕐cr;쀀𝒴ml;䅸ЀHacdefosᔵᔹᔿᕋᕏᕝᕠᕤcy;䐖cute;䅹Āayᕄᕉron;䅽;䐗ot;䅻ǲᕔ\0ᕛoWidtè૙a;䎖r;愨pf;愤cr;쀀𝒵௡ᖃᖊᖐ\0ᖰᖶᖿ\0\0\0\0ᗆᗛᗫᙟ᙭\0ᚕ᚛ᚲᚹ\0ᚾcute耻á䃡reve;䄃̀;Ediuyᖜᖝᖡᖣᖨᖭ戾;쀀∾̳;房rc耻â䃢te肻´̆;䐰lig耻æ䃦Ā;r²ᖺ;쀀𝔞rave耻à䃠ĀepᗊᗖĀfpᗏᗔsym;愵èᗓha;䎱ĀapᗟcĀclᗤᗧr;䄁g;樿ɤᗰ\0\0ᘊʀ;adsvᗺᗻᗿᘁᘇ戧nd;橕;橜lope;橘;橚΀;elmrszᘘᘙᘛᘞᘿᙏᙙ戠;榤e»ᘙsdĀ;aᘥᘦ戡ѡᘰᘲᘴᘶᘸᘺᘼᘾ;榨;榩;榪;榫;榬;榭;榮;榯tĀ;vᙅᙆ戟bĀ;dᙌᙍ抾;榝Āptᙔᙗh;戢»¹arr;捼Āgpᙣᙧon;䄅f;쀀𝕒΀;Eaeiop዁ᙻᙽᚂᚄᚇᚊ;橰cir;橯;扊d;手s;䀧roxĀ;e዁ᚒñᚃing耻å䃥ƀctyᚡᚦᚨr;쀀𝒶;䀪mpĀ;e዁ᚯñʈilde耻ã䃣ml耻ä䃤Āciᛂᛈoninôɲnt;樑ࠀNabcdefiklnoprsu᛭ᛱᜰ᜼ᝃᝈ᝸᝽០៦ᠹᡐᜍ᤽᥈ᥰot;櫭Ācrᛶ᜞kȀcepsᜀᜅᜍᜓong;扌psilon;䏶rime;怵imĀ;e᜚᜛戽q;拍Ŷᜢᜦee;抽edĀ;gᜬᜭ挅e»ᜭrkĀ;t፜᜷brk;掶Āoyᜁᝁ;䐱quo;怞ʀcmprtᝓ᝛ᝡᝤᝨausĀ;eĊĉptyv;榰séᜌnoõēƀahwᝯ᝱ᝳ;䎲;愶een;扬r;쀀𝔟g΀costuvwឍឝឳេ៕៛៞ƀaiuបពរðݠrc;旯p»፱ƀdptឤឨឭot;樀lus;樁imes;樂ɱឹ\0\0ើcup;樆ar;昅riangleĀdu៍្own;施p;斳plus;樄eåᑄåᒭarow;植ƀako៭ᠦᠵĀcn៲ᠣkƀlst៺֫᠂ozenge;槫riangleȀ;dlr᠒᠓᠘᠝斴own;斾eft;旂ight;斸k;搣Ʊᠫ\0ᠳƲᠯ\0ᠱ;斒;斑4;斓ck;斈ĀeoᠾᡍĀ;qᡃᡆ쀀=⃥uiv;쀀≡⃥t;挐Ȁptwxᡙᡞᡧᡬf;쀀𝕓Ā;tᏋᡣom»Ꮜtie;拈؀DHUVbdhmptuvᢅᢖᢪᢻᣗᣛᣬ᣿ᤅᤊᤐᤡȀLRlrᢎᢐᢒᢔ;敗;敔;敖;敓ʀ;DUduᢡᢢᢤᢦᢨ敐;敦;敩;敤;敧ȀLRlrᢳᢵᢷᢹ;敝;敚;敜;教΀;HLRhlrᣊᣋᣍᣏᣑᣓᣕ救;敬;散;敠;敫;敢;敟ox;槉ȀLRlrᣤᣦᣨᣪ;敕;敒;攐;攌ʀ;DUduڽ᣷᣹᣻᣽;敥;敨;攬;攴inus;抟lus;択imes;抠ȀLRlrᤙᤛᤝ᤟;敛;敘;攘;攔΀;HLRhlrᤰᤱᤳᤵᤷ᤻᤹攂;敪;敡;敞;攼;攤;攜Āevģ᥂bar耻¦䂦Ȁceioᥑᥖᥚᥠr;쀀𝒷mi;恏mĀ;e᜚᜜lƀ;bhᥨᥩᥫ䁜;槅sub;柈Ŭᥴ᥾lĀ;e᥹᥺怢t»᥺pƀ;Eeįᦅᦇ;檮Ā;qۜۛೡᦧ\0᧨ᨑᨕᨲ\0ᨷᩐ\0\0᪴\0\0᫁\0\0ᬡᬮ᭍᭒\0᯽\0ᰌƀcpr᦭ᦲ᧝ute;䄇̀;abcdsᦿᧀᧄ᧊᧕᧙戩nd;橄rcup;橉Āau᧏᧒p;橋p;橇ot;橀;쀀∩︀Āeo᧢᧥t;恁îړȀaeiu᧰᧻ᨁᨅǰ᧵\0᧸s;橍on;䄍dil耻ç䃧rc;䄉psĀ;sᨌᨍ橌m;橐ot;䄋ƀdmnᨛᨠᨦil肻¸ƭptyv;榲t脀¢;eᨭᨮ䂢räƲr;쀀𝔠ƀceiᨽᩀᩍy;䑇ckĀ;mᩇᩈ朓ark»ᩈ;䏇r΀;Ecefms᩟᩠ᩢᩫ᪤᪪᪮旋;槃ƀ;elᩩᩪᩭ䋆q;扗eɡᩴ\0\0᪈rrowĀlr᩼᪁eft;憺ight;憻ʀRSacd᪒᪔᪖᪚᪟»ཇ;擈st;抛irc;抚ash;抝nint;樐id;櫯cir;槂ubsĀ;u᪻᪼晣it»᪼ˬ᫇᫔᫺\0ᬊonĀ;eᫍᫎ䀺Ā;qÇÆɭ᫙\0\0᫢aĀ;t᫞᫟䀬;䁀ƀ;fl᫨᫩᫫戁îᅠeĀmx᫱᫶ent»᫩eóɍǧ᫾\0ᬇĀ;dኻᬂot;橭nôɆƀfryᬐᬔᬗ;쀀𝕔oäɔ脀©;sŕᬝr;愗Āaoᬥᬩrr;憵ss;朗Ācuᬲᬷr;쀀𝒸Ābpᬼ᭄Ā;eᭁᭂ櫏;櫑Ā;eᭉᭊ櫐;櫒dot;拯΀delprvw᭠᭬᭷ᮂᮬᯔ᯹arrĀlr᭨᭪;椸;椵ɰ᭲\0\0᭵r;拞c;拟arrĀ;p᭿ᮀ憶;椽̀;bcdosᮏᮐᮖᮡᮥᮨ截rcap;橈Āauᮛᮞp;橆p;橊ot;抍r;橅;쀀∪︀Ȁalrv᮵ᮿᯞᯣrrĀ;mᮼᮽ憷;椼yƀevwᯇᯔᯘqɰᯎ\0\0ᯒreã᭳uã᭵ee;拎edge;拏en耻¤䂤earrowĀlrᯮ᯳eft»ᮀight»ᮽeäᯝĀciᰁᰇoninôǷnt;戱lcty;挭ঀAHabcdefhijlorstuwz᰸᰻᰿ᱝᱩᱵᲊᲞᲬᲷ᳻᳿ᴍᵻᶑᶫᶻ᷆᷍rò΁ar;楥Ȁglrs᱈ᱍ᱒᱔ger;怠eth;愸òᄳhĀ;vᱚᱛ怐»ऊūᱡᱧarow;椏aã̕Āayᱮᱳron;䄏;䐴ƀ;ao̲ᱼᲄĀgrʿᲁr;懊tseq;橷ƀglmᲑᲔᲘ耻°䂰ta;䎴ptyv;榱ĀirᲣᲨsht;楿;쀀𝔡arĀlrᲳᲵ»ࣜ»သʀaegsv᳂͸᳖᳜᳠mƀ;oș᳊᳔ndĀ;ș᳑uit;晦amma;䏝in;拲ƀ;io᳧᳨᳸䃷de脀÷;o᳧ᳰntimes;拇nø᳷cy;䑒cɯᴆ\0\0ᴊrn;挞op;挍ʀlptuwᴘᴝᴢᵉᵕlar;䀤f;쀀𝕕ʀ;emps̋ᴭᴷᴽᵂqĀ;d͒ᴳot;扑inus;戸lus;戔quare;抡blebarwedgåúnƀadhᄮᵝᵧownarrowóᲃarpoonĀlrᵲᵶefôᲴighôᲶŢᵿᶅkaro÷གɯᶊ\0\0ᶎrn;挟op;挌ƀcotᶘᶣᶦĀryᶝᶡ;쀀𝒹;䑕l;槶rok;䄑Ādrᶰᶴot;拱iĀ;fᶺ᠖斿Āah᷀᷃ròЩaòྦangle;榦Āci᷒ᷕy;䑟grarr;柿ऀDacdefglmnopqrstuxḁḉḙḸոḼṉṡṾấắẽỡἪἷὄ὎὚ĀDoḆᴴoôᲉĀcsḎḔute耻é䃩ter;橮ȀaioyḢḧḱḶron;䄛rĀ;cḭḮ扖耻ê䃪lon;払;䑍ot;䄗ĀDrṁṅot;扒;쀀𝔢ƀ;rsṐṑṗ檚ave耻è䃨Ā;dṜṝ檖ot;檘Ȁ;ilsṪṫṲṴ檙nters;揧;愓Ā;dṹṺ檕ot;檗ƀapsẅẉẗcr;䄓tyƀ;svẒẓẕ戅et»ẓpĀ1;ẝẤĳạả;怄;怅怃ĀgsẪẬ;䅋p;怂ĀgpẴẸon;䄙f;쀀𝕖ƀalsỄỎỒrĀ;sỊị拕l;槣us;橱iƀ;lvỚớở䎵on»ớ;䏵ȀcsuvỪỳἋἣĀioữḱrc»Ḯɩỹ\0\0ỻíՈantĀglἂἆtr»ṝess»Ṻƀaeiἒ἖Ἒls;䀽st;扟vĀ;DȵἠD;橸parsl;槥ĀDaἯἳot;打rr;楱ƀcdiἾὁỸr;愯oô͒ĀahὉὋ;䎷耻ð䃰Āmrὓὗl耻ë䃫o;悬ƀcipὡὤὧl;䀡sôծĀeoὬὴctatioîՙnentialåչৡᾒ\0ᾞ\0ᾡᾧ\0\0ῆῌ\0ΐ\0ῦῪ \0 ⁚llingdotseñṄy;䑄male;晀ƀilrᾭᾳ῁lig;耀ﬃɩᾹ\0\0᾽g;耀ﬀig;耀ﬄ;쀀𝔣lig;耀ﬁlig;쀀fjƀaltῙ῜ῡt;晭ig;耀ﬂns;斱of;䆒ǰ΅\0ῳf;쀀𝕗ĀakֿῷĀ;vῼ´拔;櫙artint;樍Āao‌⁕Ācs‑⁒α‚‰‸⁅⁈\0⁐β•‥‧‪‬\0‮耻½䂽;慓耻¼䂼;慕;慙;慛Ƴ‴\0‶;慔;慖ʴ‾⁁\0\0⁃耻¾䂾;慗;慜5;慘ƶ⁌\0⁎;慚;慝8;慞l;恄wn;挢cr;쀀𝒻ࢀEabcdefgijlnorstv₂₉₟₥₰₴⃰⃵⃺⃿℃ℒℸ̗ℾ⅒↞Ā;lٍ₇;檌ƀcmpₐₕ₝ute;䇵maĀ;dₜ᳚䎳;檆reve;䄟Āiy₪₮rc;䄝;䐳ot;䄡Ȁ;lqsؾق₽⃉ƀ;qsؾٌ⃄lanô٥Ȁ;cdl٥⃒⃥⃕c;檩otĀ;o⃜⃝檀Ā;l⃢⃣檂;檄Ā;e⃪⃭쀀⋛︀s;檔r;쀀𝔤Ā;gٳ؛mel;愷cy;䑓Ȁ;Eajٚℌℎℐ;檒;檥;檤ȀEaesℛℝ℩ℴ;扩pĀ;p℣ℤ檊rox»ℤĀ;q℮ℯ檈Ā;q℮ℛim;拧pf;쀀𝕘Āci⅃ⅆr;愊mƀ;el٫ⅎ⅐;檎;檐茀>;cdlqr׮ⅠⅪⅮⅳⅹĀciⅥⅧ;檧r;橺ot;拗Par;榕uest;橼ʀadelsↄⅪ←ٖ↛ǰ↉\0↎proø₞r;楸qĀlqؿ↖lesó₈ií٫Āen↣↭rtneqq;쀀≩︀Å↪ԀAabcefkosy⇄⇇⇱⇵⇺∘∝∯≨≽ròΠȀilmr⇐⇔⇗⇛rsðᒄf»․ilôکĀdr⇠⇤cy;䑊ƀ;cwࣴ⇫⇯ir;楈;憭ar;意irc;䄥ƀalr∁∎∓rtsĀ;u∉∊晥it»∊lip;怦con;抹r;쀀𝔥sĀew∣∩arow;椥arow;椦ʀamopr∺∾≃≞≣rr;懿tht;戻kĀlr≉≓eftarrow;憩ightarrow;憪f;쀀𝕙bar;怕ƀclt≯≴≸r;쀀𝒽asè⇴rok;䄧Ābp⊂⊇ull;恃hen»ᱛૡ⊣\0⊪\0⊸⋅⋎\0⋕⋳\0\0⋸⌢⍧⍢⍿\0⎆⎪⎴cute耻í䃭ƀ;iyݱ⊰⊵rc耻î䃮;䐸Ācx⊼⊿y;䐵cl耻¡䂡ĀfrΟ⋉;쀀𝔦rave耻ì䃬Ȁ;inoܾ⋝⋩⋮Āin⋢⋦nt;樌t;戭fin;槜ta;愩lig;䄳ƀaop⋾⌚⌝ƀcgt⌅⌈⌗r;䄫ƀelpܟ⌏⌓inåގarôܠh;䄱f;抷ed;䆵ʀ;cfotӴ⌬⌱⌽⍁are;愅inĀ;t⌸⌹戞ie;槝doô⌙ʀ;celpݗ⍌⍐⍛⍡al;抺Āgr⍕⍙eróᕣã⍍arhk;樗rod;樼Ȁcgpt⍯⍲⍶⍻y;䑑on;䄯f;쀀𝕚a;䎹uest耻¿䂿Āci⎊⎏r;쀀𝒾nʀ;EdsvӴ⎛⎝⎡ӳ;拹ot;拵Ā;v⎦⎧拴;拳Ā;iݷ⎮lde;䄩ǫ⎸\0⎼cy;䑖l耻ï䃯̀cfmosu⏌⏗⏜⏡⏧⏵Āiy⏑⏕rc;䄵;䐹r;쀀𝔧ath;䈷pf;쀀𝕛ǣ⏬\0⏱r;쀀𝒿rcy;䑘kcy;䑔Ѐacfghjos␋␖␢␧␭␱␵␻ppaĀ;v␓␔䎺;䏰Āey␛␠dil;䄷;䐺r;쀀𝔨reen;䄸cy;䑅cy;䑜pf;쀀𝕜cr;쀀𝓀஀ABEHabcdefghjlmnoprstuv⑰⒁⒆⒍⒑┎┽╚▀♎♞♥♹♽⚚⚲⛘❝❨➋⟀⠁⠒ƀart⑷⑺⑼rò৆òΕail;椛arr;椎Ā;gঔ⒋;檋ar;楢ॣ⒥\0⒪\0⒱\0\0\0\0\0⒵Ⓔ\0ⓆⓈⓍ\0⓹ute;䄺mptyv;榴raîࡌbda;䎻gƀ;dlࢎⓁⓃ;榑åࢎ;檅uo耻«䂫rЀ;bfhlpst࢙ⓞⓦⓩ⓫⓮⓱⓵Ā;f࢝ⓣs;椟s;椝ë≒p;憫l;椹im;楳l;憢ƀ;ae⓿─┄檫il;椙Ā;s┉┊檭;쀀⪭︀ƀabr┕┙┝rr;椌rk;杲Āak┢┬cĀek┨┪;䁻;䁛Āes┱┳;榋lĀdu┹┻;榏;榍Ȁaeuy╆╋╖╘ron;䄾Ādi═╔il;䄼ìࢰâ┩;䐻Ȁcqrs╣╦╭╽a;椶uoĀ;rนᝆĀdu╲╷har;楧shar;楋h;憲ʀ;fgqs▋▌উ◳◿扤tʀahlrt▘▤▷◂◨rrowĀ;t࢙□aé⓶arpoonĀdu▯▴own»њp»०eftarrows;懇ightƀahs◍◖◞rrowĀ;sࣴࢧarpoonó྘quigarro÷⇰hreetimes;拋ƀ;qs▋ও◺lanôবʀ;cdgsব☊☍☝☨c;檨otĀ;o☔☕橿Ā;r☚☛檁;檃Ā;e☢☥쀀⋚︀s;檓ʀadegs☳☹☽♉♋pproøⓆot;拖qĀgq♃♅ôউgtò⒌ôছiíলƀilr♕࣡♚sht;楼;쀀𝔩Ā;Eজ♣;檑š♩♶rĀdu▲♮Ā;l॥♳;楪lk;斄cy;䑙ʀ;achtੈ⚈⚋⚑⚖rò◁orneòᴈard;楫ri;旺Āio⚟⚤dot;䅀ustĀ;a⚬⚭掰che»⚭ȀEaes⚻⚽⛉⛔;扨pĀ;p⛃⛄檉rox»⛄Ā;q⛎⛏檇Ā;q⛎⚻im;拦Ѐabnoptwz⛩⛴⛷✚✯❁❇❐Ānr⛮⛱g;柬r;懽rëࣁgƀlmr⛿✍✔eftĀar০✇ightá৲apsto;柼ightá৽parrowĀlr✥✩efô⓭ight;憬ƀafl✶✹✽r;榅;쀀𝕝us;樭imes;樴š❋❏st;戗áፎƀ;ef❗❘᠀旊nge»❘arĀ;l❤❥䀨t;榓ʀachmt❳❶❼➅➇ròࢨorneòᶌarĀ;d྘➃;業;怎ri;抿̀achiqt➘➝ੀ➢➮➻quo;怹r;쀀𝓁mƀ;egল➪➬;檍;檏Ābu┪➳oĀ;rฟ➹;怚rok;䅂萀<;cdhilqrࠫ⟒☹⟜⟠⟥⟪⟰Āci⟗⟙;檦r;橹reå◲mes;拉arr;楶uest;橻ĀPi⟵⟹ar;榖ƀ;ef⠀भ᠛旃rĀdu⠇⠍shar;楊har;楦Āen⠗⠡rtneqq;쀀≨︀Å⠞܀Dacdefhilnopsu⡀⡅⢂⢎⢓⢠⢥⢨⣚⣢⣤ઃ⣳⤂Dot;戺Ȁclpr⡎⡒⡣⡽r耻¯䂯Āet⡗⡙;時Ā;e⡞⡟朠se»⡟Ā;sျ⡨toȀ;dluျ⡳⡷⡻owîҌefôएðᏑker;斮Āoy⢇⢌mma;権;䐼ash;怔asuredangle»ᘦr;쀀𝔪o;愧ƀcdn⢯⢴⣉ro耻µ䂵Ȁ;acdᑤ⢽⣀⣄sôᚧir;櫰ot肻·Ƶusƀ;bd⣒ᤃ⣓戒Ā;uᴼ⣘;横ţ⣞⣡p;櫛ò−ðઁĀdp⣩⣮els;抧f;쀀𝕞Āct⣸⣽r;쀀𝓂pos»ᖝƀ;lm⤉⤊⤍䎼timap;抸ఀGLRVabcdefghijlmoprstuvw⥂⥓⥾⦉⦘⧚⧩⨕⨚⩘⩝⪃⪕⪤⪨⬄⬇⭄⭿⮮ⰴⱧⱼ⳩Āgt⥇⥋;쀀⋙̸Ā;v⥐௏쀀≫⃒ƀelt⥚⥲⥶ftĀar⥡⥧rrow;懍ightarrow;懎;쀀⋘̸Ā;v⥻ే쀀≪⃒ightarrow;懏ĀDd⦎⦓ash;抯ash;抮ʀbcnpt⦣⦧⦬⦱⧌la»˞ute;䅄g;쀀∠⃒ʀ;Eiop඄⦼⧀⧅⧈;쀀⩰̸d;쀀≋̸s;䅉roø඄urĀ;a⧓⧔普lĀ;s⧓ସǳ⧟\0⧣p肻 ଷmpĀ;e௹ఀʀaeouy⧴⧾⨃⨐⨓ǰ⧹\0⧻;橃on;䅈dil;䅆ngĀ;dൾ⨊ot;쀀⩭̸p;橂;䐽ash;怓΀;Aadqsxஒ⨩⨭⨻⩁⩅⩐rr;懗rĀhr⨳⨶k;椤Ā;oᏲᏰot;쀀≐̸uiöୣĀei⩊⩎ar;椨í஘istĀ;s஠டr;쀀𝔫ȀEest௅⩦⩹⩼ƀ;qs஼⩭௡ƀ;qs஼௅⩴lanô௢ií௪Ā;rஶ⪁»ஷƀAap⪊⪍⪑rò⥱rr;憮ar;櫲ƀ;svྍ⪜ྌĀ;d⪡⪢拼;拺cy;䑚΀AEadest⪷⪺⪾⫂⫅⫶⫹rò⥦;쀀≦̸rr;憚r;急Ȁ;fqs఻⫎⫣⫯tĀar⫔⫙rro÷⫁ightarro÷⪐ƀ;qs఻⪺⫪lanôౕĀ;sౕ⫴»శiíౝĀ;rవ⫾iĀ;eచథiäඐĀpt⬌⬑f;쀀𝕟膀¬;in⬙⬚⬶䂬nȀ;Edvஉ⬤⬨⬮;쀀⋹̸ot;쀀⋵̸ǡஉ⬳⬵;拷;拶iĀ;vಸ⬼ǡಸ⭁⭃;拾;拽ƀaor⭋⭣⭩rȀ;ast୻⭕⭚⭟lleì୻l;쀀⫽⃥;쀀∂̸lint;樔ƀ;ceಒ⭰⭳uåಥĀ;cಘ⭸Ā;eಒ⭽ñಘȀAait⮈⮋⮝⮧rò⦈rrƀ;cw⮔⮕⮙憛;쀀⤳̸;쀀↝̸ghtarrow»⮕riĀ;eೋೖ΀chimpqu⮽⯍⯙⬄୸⯤⯯Ȁ;cerല⯆ഷ⯉uå൅;쀀𝓃ortɭ⬅\0\0⯖ará⭖mĀ;e൮⯟Ā;q൴൳suĀbp⯫⯭å೸åഋƀbcp⯶ⰑⰙȀ;Ees⯿ⰀഢⰄ抄;쀀⫅̸etĀ;eഛⰋqĀ;qണⰀcĀ;eലⰗñസȀ;EesⰢⰣൟⰧ抅;쀀⫆̸etĀ;e൘ⰮqĀ;qൠⰣȀgilrⰽⰿⱅⱇìௗlde耻ñ䃱çృiangleĀlrⱒⱜeftĀ;eచⱚñదightĀ;eೋⱥñ೗Ā;mⱬⱭ䎽ƀ;esⱴⱵⱹ䀣ro;愖p;怇ҀDHadgilrsⲏⲔⲙⲞⲣⲰⲶⳓⳣash;抭arr;椄p;쀀≍⃒ash;抬ĀetⲨⲬ;쀀≥⃒;쀀>⃒nfin;槞ƀAetⲽⳁⳅrr;椂;쀀≤⃒Ā;rⳊⳍ쀀<⃒ie;쀀⊴⃒ĀAtⳘⳜrr;椃rie;쀀⊵⃒im;쀀∼⃒ƀAan⳰⳴ⴂrr;懖rĀhr⳺⳽k;椣Ā;oᏧᏥear;椧ቓ᪕\0\0\0\0\0\0\0\0\0\0\0\0\0ⴭ\0ⴸⵈⵠⵥ⵲ⶄᬇ\0\0ⶍⶫ\0ⷈⷎ\0ⷜ⸙⸫⸾⹃Ācsⴱ᪗ute耻ó䃳ĀiyⴼⵅrĀ;c᪞ⵂ耻ô䃴;䐾ʀabios᪠ⵒⵗǈⵚlac;䅑v;樸old;榼lig;䅓Ācr⵩⵭ir;榿;쀀𝔬ͯ⵹\0\0⵼\0ⶂn;䋛ave耻ò䃲;槁Ābmⶈ෴ar;榵Ȁacitⶕ⶘ⶥⶨrò᪀Āir⶝ⶠr;榾oss;榻nå๒;槀ƀaeiⶱⶵⶹcr;䅍ga;䏉ƀcdnⷀⷅǍron;䎿;榶pf;쀀𝕠ƀaelⷔ⷗ǒr;榷rp;榹΀;adiosvⷪⷫⷮ⸈⸍⸐⸖戨rò᪆Ȁ;efmⷷⷸ⸂⸅橝rĀ;oⷾⷿ愴f»ⷿ耻ª䂪耻º䂺gof;抶r;橖lope;橗;橛ƀclo⸟⸡⸧ò⸁ash耻ø䃸l;折iŬⸯ⸴de耻õ䃵esĀ;aǛ⸺s;樶ml耻ö䃶bar;挽ૡ⹞\0⹽\0⺀⺝\0⺢⺹\0\0⻋ຜ\0⼓\0\0⼫⾼\0⿈rȀ;astЃ⹧⹲຅脀¶;l⹭⹮䂶leìЃɩ⹸\0\0⹻m;櫳;櫽y;䐿rʀcimpt⺋⺏⺓ᡥ⺗nt;䀥od;䀮il;怰enk;怱r;쀀𝔭ƀimo⺨⺰⺴Ā;v⺭⺮䏆;䏕maô੶ne;明ƀ;tv⺿⻀⻈䏀chfork»´;䏖Āau⻏⻟nĀck⻕⻝kĀ;h⇴⻛;愎ö⇴sҀ;abcdemst⻳⻴ᤈ⻹⻽⼄⼆⼊⼎䀫cir;樣ir;樢Āouᵀ⼂;樥;橲n肻±ຝim;樦wo;樧ƀipu⼙⼠⼥ntint;樕f;쀀𝕡nd耻£䂣Ԁ;Eaceinosu່⼿⽁⽄⽇⾁⾉⾒⽾⾶;檳p;檷uå໙Ā;c໎⽌̀;acens່⽙⽟⽦⽨⽾pproø⽃urlyeñ໙ñ໎ƀaes⽯⽶⽺pprox;檹qq;檵im;拨iíໟmeĀ;s⾈ຮ怲ƀEas⽸⾐⽺ð⽵ƀdfp໬⾙⾯ƀals⾠⾥⾪lar;挮ine;挒urf;挓Ā;t໻⾴ï໻rel;抰Āci⿀⿅r;쀀𝓅;䏈ncsp;怈̀fiopsu⿚⋢⿟⿥⿫⿱r;쀀𝔮pf;쀀𝕢rime;恗cr;쀀𝓆ƀaeo⿸〉〓tĀei⿾々rnionóڰnt;樖stĀ;e【】䀿ñἙô༔઀ABHabcdefhilmnoprstux぀けさすムㄎㄫㅇㅢㅲㆎ㈆㈕㈤㈩㉘㉮㉲㊐㊰㊷ƀartぇおがròႳòϝail;検aròᱥar;楤΀cdenqrtとふへみわゔヌĀeuねぱ;쀀∽̱te;䅕iãᅮmptyv;榳gȀ;del࿑らるろ;榒;榥å࿑uo耻»䂻rր;abcfhlpstw࿜ガクシスゼゾダッデナp;極Ā;f࿠ゴs;椠;椳s;椞ë≝ð✮l;楅im;楴l;憣;憝Āaiパフil;椚oĀ;nホボ戶aló༞ƀabrョリヮrò៥rk;杳ĀakンヽcĀekヹ・;䁽;䁝Āes㄂㄄;榌lĀduㄊㄌ;榎;榐Ȁaeuyㄗㄜㄧㄩron;䅙Ādiㄡㄥil;䅗ì࿲âヺ;䑀Ȁclqsㄴㄷㄽㅄa;椷dhar;楩uoĀ;rȎȍh;憳ƀacgㅎㅟངlȀ;ipsླྀㅘㅛႜnåႻarôྩt;断ƀilrㅩဣㅮsht;楽;쀀𝔯ĀaoㅷㆆrĀduㅽㅿ»ѻĀ;l႑ㆄ;楬Ā;vㆋㆌ䏁;䏱ƀgns㆕ㇹㇼht̀ahlrstㆤㆰ㇂㇘㇤㇮rrowĀ;t࿜ㆭaéトarpoonĀduㆻㆿowîㅾp»႒eftĀah㇊㇐rrowó࿪arpoonóՑightarrows;應quigarro÷ニhreetimes;拌g;䋚ingdotseñἲƀahm㈍㈐㈓rò࿪aòՑ;怏oustĀ;a㈞㈟掱che»㈟mid;櫮Ȁabpt㈲㈽㉀㉒Ānr㈷㈺g;柭r;懾rëဃƀafl㉇㉊㉎r;榆;쀀𝕣us;樮imes;樵Āap㉝㉧rĀ;g㉣㉤䀩t;榔olint;樒arò㇣Ȁachq㉻㊀Ⴜ㊅quo;怺r;쀀𝓇Ābu・㊊oĀ;rȔȓƀhir㊗㊛㊠reåㇸmes;拊iȀ;efl㊪ၙᠡ㊫方tri;槎luhar;楨;愞ൡ㋕㋛㋟㌬㌸㍱\0㍺㎤\0\0㏬㏰\0㐨㑈㑚㒭㒱㓊㓱\0㘖\0\0㘳cute;䅛quï➺Ԁ;Eaceinpsyᇭ㋳㋵㋿㌂㌋㌏㌟㌦㌩;檴ǰ㋺\0㋼;檸on;䅡uåᇾĀ;dᇳ㌇il;䅟rc;䅝ƀEas㌖㌘㌛;檶p;檺im;择olint;樓iíሄ;䑁otƀ;be㌴ᵇ㌵担;橦΀Aacmstx㍆㍊㍗㍛㍞㍣㍭rr;懘rĀhr㍐㍒ë∨Ā;oਸ਼਴t耻§䂧i;䀻war;椩mĀin㍩ðnuóñt;朶rĀ;o㍶⁕쀀𝔰Ȁacoy㎂㎆㎑㎠rp;景Āhy㎋㎏cy;䑉;䑈rtɭ㎙\0\0㎜iäᑤaraì⹯耻­䂭Āgm㎨㎴maƀ;fv㎱㎲㎲䏃;䏂Ѐ;deglnprካ㏅㏉㏎㏖㏞㏡㏦ot;橪Ā;q኱ኰĀ;E㏓㏔檞;檠Ā;E㏛㏜檝;檟e;扆lus;樤arr;楲aròᄽȀaeit㏸㐈㐏㐗Āls㏽㐄lsetmé㍪hp;樳parsl;槤Ādlᑣ㐔e;挣Ā;e㐜㐝檪Ā;s㐢㐣檬;쀀⪬︀ƀflp㐮㐳㑂tcy;䑌Ā;b㐸㐹䀯Ā;a㐾㐿槄r;挿f;쀀𝕤aĀdr㑍ЂesĀ;u㑔㑕晠it»㑕ƀcsu㑠㑹㒟Āau㑥㑯pĀ;sᆈ㑫;쀀⊓︀pĀ;sᆴ㑵;쀀⊔︀uĀbp㑿㒏ƀ;esᆗᆜ㒆etĀ;eᆗ㒍ñᆝƀ;esᆨᆭ㒖etĀ;eᆨ㒝ñᆮƀ;afᅻ㒦ְrť㒫ֱ»ᅼaròᅈȀcemt㒹㒾㓂㓅r;쀀𝓈tmîñiì㐕aræᆾĀar㓎㓕rĀ;f㓔ឿ昆Āan㓚㓭ightĀep㓣㓪psiloîỠhé⺯s»⡒ʀbcmnp㓻㕞ሉ㖋㖎Ҁ;Edemnprs㔎㔏㔑㔕㔞㔣㔬㔱㔶抂;櫅ot;檽Ā;dᇚ㔚ot;櫃ult;櫁ĀEe㔨㔪;櫋;把lus;檿arr;楹ƀeiu㔽㕒㕕tƀ;en㔎㕅㕋qĀ;qᇚ㔏eqĀ;q㔫㔨m;櫇Ābp㕚㕜;櫕;櫓c̀;acensᇭ㕬㕲㕹㕻㌦pproø㋺urlyeñᇾñᇳƀaes㖂㖈㌛pproø㌚qñ㌗g;晪ڀ123;Edehlmnps㖩㖬㖯ሜ㖲㖴㗀㗉㗕㗚㗟㗨㗭耻¹䂹耻²䂲耻³䂳;櫆Āos㖹㖼t;檾ub;櫘Ā;dሢ㗅ot;櫄sĀou㗏㗒l;柉b;櫗arr;楻ult;櫂ĀEe㗤㗦;櫌;抋lus;櫀ƀeiu㗴㘉㘌tƀ;enሜ㗼㘂qĀ;qሢ㖲eqĀ;q㗧㗤m;櫈Ābp㘑㘓;櫔;櫖ƀAan㘜㘠㘭rr;懙rĀhr㘦㘨ë∮Ā;oਫ਩war;椪lig耻ß䃟௡㙑㙝㙠ዎ㙳㙹\0㙾㛂\0\0\0\0\0㛛㜃\0㜉㝬\0\0\0㞇ɲ㙖\0\0㙛get;挖;䏄rë๟ƀaey㙦㙫㙰ron;䅥dil;䅣;䑂lrec;挕r;쀀𝔱Ȁeiko㚆㚝㚵㚼ǲ㚋\0㚑eĀ4fኄኁaƀ;sv㚘㚙㚛䎸ym;䏑Ācn㚢㚲kĀas㚨㚮pproø዁im»ኬsðኞĀas㚺㚮ð዁rn耻þ䃾Ǭ̟㛆⋧es膀×;bd㛏㛐㛘䃗Ā;aᤏ㛕r;樱;樰ƀeps㛡㛣㜀á⩍Ȁ;bcf҆㛬㛰㛴ot;挶ir;櫱Ā;o㛹㛼쀀𝕥rk;櫚á㍢rime;怴ƀaip㜏㜒㝤dåቈ΀adempst㜡㝍㝀㝑㝗㝜㝟ngleʀ;dlqr㜰㜱㜶㝀㝂斵own»ᶻeftĀ;e⠀㜾ñम;扜ightĀ;e㊪㝋ñၚot;旬inus;樺lus;樹b;槍ime;樻ezium;揢ƀcht㝲㝽㞁Āry㝷㝻;쀀𝓉;䑆cy;䑛rok;䅧Āio㞋㞎xô᝷headĀlr㞗㞠eftarro÷ࡏightarrow»ཝऀAHabcdfghlmoprstuw㟐㟓㟗㟤㟰㟼㠎㠜㠣㠴㡑㡝㡫㢩㣌㣒㣪㣶ròϭar;楣Ācr㟜㟢ute耻ú䃺òᅐrǣ㟪\0㟭y;䑞ve;䅭Āiy㟵㟺rc耻û䃻;䑃ƀabh㠃㠆㠋ròᎭlac;䅱aòᏃĀir㠓㠘sht;楾;쀀𝔲rave耻ù䃹š㠧㠱rĀlr㠬㠮»ॗ»ႃlk;斀Āct㠹㡍ɯ㠿\0\0㡊rnĀ;e㡅㡆挜r»㡆op;挏ri;旸Āal㡖㡚cr;䅫肻¨͉Āgp㡢㡦on;䅳f;쀀𝕦̀adhlsuᅋ㡸㡽፲㢑㢠ownáᎳarpoonĀlr㢈㢌efô㠭ighô㠯iƀ;hl㢙㢚㢜䏅»ᏺon»㢚parrows;懈ƀcit㢰㣄㣈ɯ㢶\0\0㣁rnĀ;e㢼㢽挝r»㢽op;挎ng;䅯ri;旹cr;쀀𝓊ƀdir㣙㣝㣢ot;拰lde;䅩iĀ;f㜰㣨»᠓Āam㣯㣲rò㢨l耻ü䃼angle;榧ހABDacdeflnoprsz㤜㤟㤩㤭㦵㦸㦽㧟㧤㧨㧳㧹㧽㨁㨠ròϷarĀ;v㤦㤧櫨;櫩asèϡĀnr㤲㤷grt;榜΀eknprst㓣㥆㥋㥒㥝㥤㦖appá␕othinçẖƀhir㓫⻈㥙opô⾵Ā;hᎷ㥢ïㆍĀiu㥩㥭gmá㎳Ābp㥲㦄setneqĀ;q㥽㦀쀀⊊︀;쀀⫋︀setneqĀ;q㦏㦒쀀⊋︀;쀀⫌︀Āhr㦛㦟etá㚜iangleĀlr㦪㦯eft»थight»ၑy;䐲ash»ံƀelr㧄㧒㧗ƀ;beⷪ㧋㧏ar;抻q;扚lip;拮Ābt㧜ᑨaòᑩr;쀀𝔳tré㦮suĀbp㧯㧱»ജ»൙pf;쀀𝕧roð໻tré㦴Ācu㨆㨋r;쀀𝓋Ābp㨐㨘nĀEe㦀㨖»㥾nĀEe㦒㨞»㦐igzag;榚΀cefoprs㨶㨻㩖㩛㩔㩡㩪irc;䅵Ādi㩀㩑Ābg㩅㩉ar;機eĀ;qᗺ㩏;扙erp;愘r;쀀𝔴pf;쀀𝕨Ā;eᑹ㩦atèᑹcr;쀀𝓌ૣណ㪇\0㪋\0㪐㪛\0\0㪝㪨㪫㪯\0\0㫃㫎\0㫘ៜ៟tré៑r;쀀𝔵ĀAa㪔㪗ròσrò৶;䎾ĀAa㪡㪤ròθrò৫að✓is;拻ƀdptឤ㪵㪾Āfl㪺ឩ;쀀𝕩imåឲĀAa㫇㫊ròώròਁĀcq㫒ីr;쀀𝓍Āpt៖㫜ré។Ѐacefiosu㫰㫽㬈㬌㬑㬕㬛㬡cĀuy㫶㫻te耻ý䃽;䑏Āiy㬂㬆rc;䅷;䑋n耻¥䂥r;쀀𝔶cy;䑗pf;쀀𝕪cr;쀀𝓎Ācm㬦㬩y;䑎l耻ÿ䃿Ԁacdefhiosw㭂㭈㭔㭘㭤㭩㭭㭴㭺㮀cute;䅺Āay㭍㭒ron;䅾;䐷ot;䅼Āet㭝㭡træᕟa;䎶r;쀀𝔷cy;䐶grarr;懝pf;쀀𝕫cr;쀀𝓏Ājn㮅㮇;怍j;怌'.split("").map(function(t){return t.charCodeAt(0)}))),Fl}var ql={},C1;function NL(){return C1||(C1=1,Object.defineProperty(ql,"__esModule",{value:!0}),ql.default=new Uint16Array("Ȁaglq	\x1Bɭ\0\0p;䀦os;䀧t;䀾t;䀼uot;䀢".split("").map(function(t){return t.charCodeAt(0)}))),ql}var ch={},T1;function E1(){return T1||(T1=1,(function(t){var e;Object.defineProperty(t,"__esModule",{value:!0}),t.replaceCodePoint=t.fromCodePoint=void 0;var r=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);t.fromCodePoint=(e=String.fromCodePoint)!==null&&e!==void 0?e:function(a){var s="";return a>65535&&(a-=65536,s+=String.fromCharCode(a>>>10&1023|55296),a=56320|a&1023),s+=String.fromCharCode(a),s};function i(a){var s;return a>=55296&&a<=57343||a>1114111?65533:(s=r.get(a))!==null&&s!==void 0?s:a}t.replaceCodePoint=i;function n(a){return(0,t.fromCodePoint)(i(a))}t.default=n})(ch)),ch}var M1;function iu(){return M1||(M1=1,(function(t){var e=mr&&mr.__createBinding||(Object.create?(function(E,$,R,N){N===void 0&&(N=R);var D=Object.getOwnPropertyDescriptor($,R);(!D||("get"in D?!$.__esModule:D.writable||D.configurable))&&(D={enumerable:!0,get:function(){return $[R]}}),Object.defineProperty(E,N,D)}):(function(E,$,R,N){N===void 0&&(N=R),E[N]=$[R]})),r=mr&&mr.__setModuleDefault||(Object.create?(function(E,$){Object.defineProperty(E,"default",{enumerable:!0,value:$})}):function(E,$){E.default=$}),i=mr&&mr.__importStar||function(E){if(E&&E.__esModule)return E;var $={};if(E!=null)for(var R in E)R!=="default"&&Object.prototype.hasOwnProperty.call(E,R)&&e($,E,R);return r($,E),$},n=mr&&mr.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(t,"__esModule",{value:!0}),t.decodeXML=t.decodeHTMLStrict=t.decodeHTMLAttribute=t.decodeHTML=t.determineBranch=t.EntityDecoder=t.DecodingMode=t.BinTrieFlags=t.fromCodePoint=t.replaceCodePoint=t.decodeCodePoint=t.xmlDecodeTree=t.htmlDecodeTree=void 0;var a=n(BL());t.htmlDecodeTree=a.default;var s=n(NL());t.xmlDecodeTree=s.default;var o=i(E1());t.decodeCodePoint=o.default;var l=E1();Object.defineProperty(t,"replaceCodePoint",{enumerable:!0,get:function(){return l.replaceCodePoint}}),Object.defineProperty(t,"fromCodePoint",{enumerable:!0,get:function(){return l.fromCodePoint}});var c;(function(E){E[E.NUM=35]="NUM",E[E.SEMI=59]="SEMI",E[E.EQUALS=61]="EQUALS",E[E.ZERO=48]="ZERO",E[E.NINE=57]="NINE",E[E.LOWER_A=97]="LOWER_A",E[E.LOWER_F=102]="LOWER_F",E[E.LOWER_X=120]="LOWER_X",E[E.LOWER_Z=122]="LOWER_Z",E[E.UPPER_A=65]="UPPER_A",E[E.UPPER_F=70]="UPPER_F",E[E.UPPER_Z=90]="UPPER_Z"})(c||(c={}));var u=32,p;(function(E){E[E.VALUE_LENGTH=49152]="VALUE_LENGTH",E[E.BRANCH_LENGTH=16256]="BRANCH_LENGTH",E[E.JUMP_TABLE=127]="JUMP_TABLE"})(p=t.BinTrieFlags||(t.BinTrieFlags={}));function d(E){return E>=c.ZERO&&E<=c.NINE}function h(E){return E>=c.UPPER_A&&E<=c.UPPER_F||E>=c.LOWER_A&&E<=c.LOWER_F}function g(E){return E>=c.UPPER_A&&E<=c.UPPER_Z||E>=c.LOWER_A&&E<=c.LOWER_Z||d(E)}function y(E){return E===c.EQUALS||g(E)}var x;(function(E){E[E.EntityStart=0]="EntityStart",E[E.NumericStart=1]="NumericStart",E[E.NumericDecimal=2]="NumericDecimal",E[E.NumericHex=3]="NumericHex",E[E.NamedEntity=4]="NamedEntity"})(x||(x={}));var m;(function(E){E[E.Legacy=0]="Legacy",E[E.Strict=1]="Strict",E[E.Attribute=2]="Attribute"})(m=t.DecodingMode||(t.DecodingMode={}));var k=(function(){function E($,R,N){this.decodeTree=$,this.emitCodePoint=R,this.errors=N,this.state=x.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=m.Strict}return E.prototype.startEntity=function($){this.decodeMode=$,this.state=x.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1},E.prototype.write=function($,R){switch(this.state){case x.EntityStart:return $.charCodeAt(R)===c.NUM?(this.state=x.NumericStart,this.consumed+=1,this.stateNumericStart($,R+1)):(this.state=x.NamedEntity,this.stateNamedEntity($,R));case x.NumericStart:return this.stateNumericStart($,R);case x.NumericDecimal:return this.stateNumericDecimal($,R);case x.NumericHex:return this.stateNumericHex($,R);case x.NamedEntity:return this.stateNamedEntity($,R)}},E.prototype.stateNumericStart=function($,R){return R>=$.length?-1:($.charCodeAt(R)|u)===c.LOWER_X?(this.state=x.NumericHex,this.consumed+=1,this.stateNumericHex($,R+1)):(this.state=x.NumericDecimal,this.stateNumericDecimal($,R))},E.prototype.addToNumericResult=function($,R,N,D){if(R!==N){var j=N-R;this.result=this.result*Math.pow(D,j)+parseInt($.substr(R,j),D),this.consumed+=j}},E.prototype.stateNumericHex=function($,R){for(var N=R;R<$.length;){var D=$.charCodeAt(R);if(d(D)||h(D))R+=1;else return this.addToNumericResult($,N,R,16),this.emitNumericEntity(D,3)}return this.addToNumericResult($,N,R,16),-1},E.prototype.stateNumericDecimal=function($,R){for(var N=R;R<$.length;){var D=$.charCodeAt(R);if(d(D))R+=1;else return this.addToNumericResult($,N,R,10),this.emitNumericEntity(D,2)}return this.addToNumericResult($,N,R,10),-1},E.prototype.emitNumericEntity=function($,R){var N;if(this.consumed<=R)return(N=this.errors)===null||N===void 0||N.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if($===c.SEMI)this.consumed+=1;else if(this.decodeMode===m.Strict)return 0;return this.emitCodePoint((0,o.replaceCodePoint)(this.result),this.consumed),this.errors&&($!==c.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed},E.prototype.stateNamedEntity=function($,R){for(var N=this.decodeTree,D=N[this.treeIndex],j=(D&p.VALUE_LENGTH)>>14;R<$.length;R++,this.excess++){var ee=$.charCodeAt(R);if(this.treeIndex=_(N,D,this.treeIndex+Math.max(1,j),ee),this.treeIndex<0)return this.result===0||this.decodeMode===m.Attribute&&(j===0||y(ee))?0:this.emitNotTerminatedNamedEntity();if(D=N[this.treeIndex],j=(D&p.VALUE_LENGTH)>>14,j!==0){if(ee===c.SEMI)return this.emitNamedEntityData(this.treeIndex,j,this.consumed+this.excess);this.decodeMode!==m.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1},E.prototype.emitNotTerminatedNamedEntity=function(){var $,R=this,N=R.result,D=R.decodeTree,j=(D[N]&p.VALUE_LENGTH)>>14;return this.emitNamedEntityData(N,j,this.consumed),($=this.errors)===null||$===void 0||$.missingSemicolonAfterCharacterReference(),this.consumed},E.prototype.emitNamedEntityData=function($,R,N){var D=this.decodeTree;return this.emitCodePoint(R===1?D[$]&~p.VALUE_LENGTH:D[$+1],N),R===3&&this.emitCodePoint(D[$+2],N),N},E.prototype.end=function(){var $;switch(this.state){case x.NamedEntity:return this.result!==0&&(this.decodeMode!==m.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case x.NumericDecimal:return this.emitNumericEntity(0,2);case x.NumericHex:return this.emitNumericEntity(0,3);case x.NumericStart:return($=this.errors)===null||$===void 0||$.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case x.EntityStart:return 0}},E})();t.EntityDecoder=k;function S(E){var $="",R=new k(E,function(N){return $+=(0,o.fromCodePoint)(N)});return function(D,j){for(var ee=0,oe=0;(oe=D.indexOf("&",oe))>=0;){$+=D.slice(ee,oe),R.startEntity(j);var we=R.write(D,oe+1);if(we<0){ee=oe+R.end();break}ee=oe+we,oe=we===0?ee+1:ee}var me=$+D.slice(ee);return $="",me}}function _(E,$,R,N){var D=($&p.BRANCH_LENGTH)>>7,j=$&p.JUMP_TABLE;if(D===0)return j!==0&&N===j?R:-1;if(j){var ee=N-j;return ee<0||ee>=D?-1:E[R+ee]-1}for(var oe=R,we=oe+D-1;oe<=we;){var me=oe+we>>>1,fe=E[me];if(fe<N)oe=me+1;else if(fe>N)we=me-1;else return E[me+D]}return-1}t.determineBranch=_;var w=S(a.default),A=S(s.default);function T(E,$){return $===void 0&&($=m.Legacy),w(E,$)}t.decodeHTML=T;function I(E){return w(E,m.Attribute)}t.decodeHTMLAttribute=I;function O(E){return w(E,m.Strict)}t.decodeHTMLStrict=O;function B(E){return A(E,m.Strict)}t.decodeXML=B})(mr)),mr}var I1;function w5(){return I1||(I1=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.QuoteType=void 0;var e=iu(),r;(function(d){d[d.Tab=9]="Tab",d[d.NewLine=10]="NewLine",d[d.FormFeed=12]="FormFeed",d[d.CarriageReturn=13]="CarriageReturn",d[d.Space=32]="Space",d[d.ExclamationMark=33]="ExclamationMark",d[d.Number=35]="Number",d[d.Amp=38]="Amp",d[d.SingleQuote=39]="SingleQuote",d[d.DoubleQuote=34]="DoubleQuote",d[d.Dash=45]="Dash",d[d.Slash=47]="Slash",d[d.Zero=48]="Zero",d[d.Nine=57]="Nine",d[d.Semi=59]="Semi",d[d.Lt=60]="Lt",d[d.Eq=61]="Eq",d[d.Gt=62]="Gt",d[d.Questionmark=63]="Questionmark",d[d.UpperA=65]="UpperA",d[d.LowerA=97]="LowerA",d[d.UpperF=70]="UpperF",d[d.LowerF=102]="LowerF",d[d.UpperZ=90]="UpperZ",d[d.LowerZ=122]="LowerZ",d[d.LowerX=120]="LowerX",d[d.OpeningSquareBracket=91]="OpeningSquareBracket"})(r||(r={}));var i;(function(d){d[d.Text=1]="Text",d[d.BeforeTagName=2]="BeforeTagName",d[d.InTagName=3]="InTagName",d[d.InSelfClosingTag=4]="InSelfClosingTag",d[d.BeforeClosingTagName=5]="BeforeClosingTagName",d[d.InClosingTagName=6]="InClosingTagName",d[d.AfterClosingTagName=7]="AfterClosingTagName",d[d.BeforeAttributeName=8]="BeforeAttributeName",d[d.InAttributeName=9]="InAttributeName",d[d.AfterAttributeName=10]="AfterAttributeName",d[d.BeforeAttributeValue=11]="BeforeAttributeValue",d[d.InAttributeValueDq=12]="InAttributeValueDq",d[d.InAttributeValueSq=13]="InAttributeValueSq",d[d.InAttributeValueNq=14]="InAttributeValueNq",d[d.BeforeDeclaration=15]="BeforeDeclaration",d[d.InDeclaration=16]="InDeclaration",d[d.InProcessingInstruction=17]="InProcessingInstruction",d[d.BeforeComment=18]="BeforeComment",d[d.CDATASequence=19]="CDATASequence",d[d.InSpecialComment=20]="InSpecialComment",d[d.InCommentLike=21]="InCommentLike",d[d.BeforeSpecialS=22]="BeforeSpecialS",d[d.SpecialStartSequence=23]="SpecialStartSequence",d[d.InSpecialTag=24]="InSpecialTag",d[d.BeforeEntity=25]="BeforeEntity",d[d.BeforeNumericEntity=26]="BeforeNumericEntity",d[d.InNamedEntity=27]="InNamedEntity",d[d.InNumericEntity=28]="InNumericEntity",d[d.InHexEntity=29]="InHexEntity"})(i||(i={}));function n(d){return d===r.Space||d===r.NewLine||d===r.Tab||d===r.FormFeed||d===r.CarriageReturn}function a(d){return d===r.Slash||d===r.Gt||n(d)}function s(d){return d>=r.Zero&&d<=r.Nine}function o(d){return d>=r.LowerA&&d<=r.LowerZ||d>=r.UpperA&&d<=r.UpperZ}function l(d){return d>=r.UpperA&&d<=r.UpperF||d>=r.LowerA&&d<=r.LowerF}var c;(function(d){d[d.NoValue=0]="NoValue",d[d.Unquoted=1]="Unquoted",d[d.Single=2]="Single",d[d.Double=3]="Double"})(c=t.QuoteType||(t.QuoteType={}));var u={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])},p=(function(){function d(h,g){var y=h.xmlMode,x=y===void 0?!1:y,m=h.decodeEntities,k=m===void 0?!0:m;this.cbs=g,this.state=i.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=i.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=x,this.decodeEntities=k,this.entityTrie=x?e.xmlDecodeTree:e.htmlDecodeTree}return d.prototype.reset=function(){this.state=i.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=i.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},d.prototype.write=function(h){this.offset+=this.buffer.length,this.buffer=h,this.parse()},d.prototype.end=function(){this.running&&this.finish()},d.prototype.pause=function(){this.running=!1},d.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},d.prototype.getIndex=function(){return this.index},d.prototype.getSectionStart=function(){return this.sectionStart},d.prototype.stateText=function(h){h===r.Lt||!this.decodeEntities&&this.fastForwardTo(r.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=i.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&h===r.Amp&&(this.state=i.BeforeEntity)},d.prototype.stateSpecialStartSequence=function(h){var g=this.sequenceIndex===this.currentSequence.length,y=g?a(h):(h|32)===this.currentSequence[this.sequenceIndex];if(!y)this.isSpecial=!1;else if(!g){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=i.InTagName,this.stateInTagName(h)},d.prototype.stateInSpecialTag=function(h){if(this.sequenceIndex===this.currentSequence.length){if(h===r.Gt||n(h)){var g=this.index-this.currentSequence.length;if(this.sectionStart<g){var y=this.index;this.index=g,this.cbs.ontext(this.sectionStart,g),this.index=y}this.isSpecial=!1,this.sectionStart=g+2,this.stateInClosingTagName(h);return}this.sequenceIndex=0}(h|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===u.TitleEnd?this.decodeEntities&&h===r.Amp&&(this.state=i.BeforeEntity):this.fastForwardTo(r.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(h===r.Lt)},d.prototype.stateCDATASequence=function(h){h===u.Cdata[this.sequenceIndex]?++this.sequenceIndex===u.Cdata.length&&(this.state=i.InCommentLike,this.currentSequence=u.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=i.InDeclaration,this.stateInDeclaration(h))},d.prototype.fastForwardTo=function(h){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===h)return!0;return this.index=this.buffer.length+this.offset-1,!1},d.prototype.stateInCommentLike=function(h){h===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===u.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=i.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):h!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},d.prototype.isTagStartChar=function(h){return this.xmlMode?!a(h):o(h)},d.prototype.startSpecial=function(h,g){this.isSpecial=!0,this.currentSequence=h,this.sequenceIndex=g,this.state=i.SpecialStartSequence},d.prototype.stateBeforeTagName=function(h){if(h===r.ExclamationMark)this.state=i.BeforeDeclaration,this.sectionStart=this.index+1;else if(h===r.Questionmark)this.state=i.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(h)){var g=h|32;this.sectionStart=this.index,!this.xmlMode&&g===u.TitleEnd[2]?this.startSpecial(u.TitleEnd,3):this.state=!this.xmlMode&&g===u.ScriptEnd[2]?i.BeforeSpecialS:i.InTagName}else h===r.Slash?this.state=i.BeforeClosingTagName:(this.state=i.Text,this.stateText(h))},d.prototype.stateInTagName=function(h){a(h)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(h))},d.prototype.stateBeforeClosingTagName=function(h){n(h)||(h===r.Gt?this.state=i.Text:(this.state=this.isTagStartChar(h)?i.InClosingTagName:i.InSpecialComment,this.sectionStart=this.index))},d.prototype.stateInClosingTagName=function(h){(h===r.Gt||n(h))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=i.AfterClosingTagName,this.stateAfterClosingTagName(h))},d.prototype.stateAfterClosingTagName=function(h){(h===r.Gt||this.fastForwardTo(r.Gt))&&(this.state=i.Text,this.baseState=i.Text,this.sectionStart=this.index+1)},d.prototype.stateBeforeAttributeName=function(h){h===r.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=i.InSpecialTag,this.sequenceIndex=0):this.state=i.Text,this.baseState=this.state,this.sectionStart=this.index+1):h===r.Slash?this.state=i.InSelfClosingTag:n(h)||(this.state=i.InAttributeName,this.sectionStart=this.index)},d.prototype.stateInSelfClosingTag=function(h){h===r.Gt?(this.cbs.onselfclosingtag(this.index),this.state=i.Text,this.baseState=i.Text,this.sectionStart=this.index+1,this.isSpecial=!1):n(h)||(this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(h))},d.prototype.stateInAttributeName=function(h){(h===r.Eq||a(h))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=i.AfterAttributeName,this.stateAfterAttributeName(h))},d.prototype.stateAfterAttributeName=function(h){h===r.Eq?this.state=i.BeforeAttributeValue:h===r.Slash||h===r.Gt?(this.cbs.onattribend(c.NoValue,this.index),this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(h)):n(h)||(this.cbs.onattribend(c.NoValue,this.index),this.state=i.InAttributeName,this.sectionStart=this.index)},d.prototype.stateBeforeAttributeValue=function(h){h===r.DoubleQuote?(this.state=i.InAttributeValueDq,this.sectionStart=this.index+1):h===r.SingleQuote?(this.state=i.InAttributeValueSq,this.sectionStart=this.index+1):n(h)||(this.sectionStart=this.index,this.state=i.InAttributeValueNq,this.stateInAttributeValueNoQuotes(h))},d.prototype.handleInAttributeValue=function(h,g){h===g||!this.decodeEntities&&this.fastForwardTo(g)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(g===r.DoubleQuote?c.Double:c.Single,this.index),this.state=i.BeforeAttributeName):this.decodeEntities&&h===r.Amp&&(this.baseState=this.state,this.state=i.BeforeEntity)},d.prototype.stateInAttributeValueDoubleQuotes=function(h){this.handleInAttributeValue(h,r.DoubleQuote)},d.prototype.stateInAttributeValueSingleQuotes=function(h){this.handleInAttributeValue(h,r.SingleQuote)},d.prototype.stateInAttributeValueNoQuotes=function(h){n(h)||h===r.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(c.Unquoted,this.index),this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(h)):this.decodeEntities&&h===r.Amp&&(this.baseState=this.state,this.state=i.BeforeEntity)},d.prototype.stateBeforeDeclaration=function(h){h===r.OpeningSquareBracket?(this.state=i.CDATASequence,this.sequenceIndex=0):this.state=h===r.Dash?i.BeforeComment:i.InDeclaration},d.prototype.stateInDeclaration=function(h){(h===r.Gt||this.fastForwardTo(r.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=i.Text,this.sectionStart=this.index+1)},d.prototype.stateInProcessingInstruction=function(h){(h===r.Gt||this.fastForwardTo(r.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=i.Text,this.sectionStart=this.index+1)},d.prototype.stateBeforeComment=function(h){h===r.Dash?(this.state=i.InCommentLike,this.currentSequence=u.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=i.InDeclaration},d.prototype.stateInSpecialComment=function(h){(h===r.Gt||this.fastForwardTo(r.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=i.Text,this.sectionStart=this.index+1)},d.prototype.stateBeforeSpecialS=function(h){var g=h|32;g===u.ScriptEnd[3]?this.startSpecial(u.ScriptEnd,4):g===u.StyleEnd[3]?this.startSpecial(u.StyleEnd,4):(this.state=i.InTagName,this.stateInTagName(h))},d.prototype.stateBeforeEntity=function(h){this.entityExcess=1,this.entityResult=0,h===r.Number?this.state=i.BeforeNumericEntity:h===r.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=i.InNamedEntity,this.stateInNamedEntity(h))},d.prototype.stateInNamedEntity=function(h){if(this.entityExcess+=1,this.trieIndex=(0,e.determineBranch)(this.entityTrie,this.trieCurrent,this.trieIndex+1,h),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];var g=this.trieCurrent&e.BinTrieFlags.VALUE_LENGTH;if(g){var y=(g>>14)-1;if(!this.allowLegacyEntity()&&h!==r.Semi)this.trieIndex+=y;else{var x=this.index-this.entityExcess+1;x>this.sectionStart&&this.emitPartial(this.sectionStart,x),this.entityResult=this.trieIndex,this.trieIndex+=y,this.entityExcess=0,this.sectionStart=this.index+1,y===0&&this.emitNamedEntity()}}},d.prototype.emitNamedEntity=function(){if(this.state=this.baseState,this.entityResult!==0){var h=(this.entityTrie[this.entityResult]&e.BinTrieFlags.VALUE_LENGTH)>>14;switch(h){case 1:{this.emitCodePoint(this.entityTrie[this.entityResult]&~e.BinTrieFlags.VALUE_LENGTH);break}case 2:{this.emitCodePoint(this.entityTrie[this.entityResult+1]);break}case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}},d.prototype.stateBeforeNumericEntity=function(h){(h|32)===r.LowerX?(this.entityExcess++,this.state=i.InHexEntity):(this.state=i.InNumericEntity,this.stateInNumericEntity(h))},d.prototype.emitNumericEntity=function(h){var g=this.index-this.entityExcess-1,y=g+2+ +(this.state===i.InHexEntity);y!==this.index&&(g>this.sectionStart&&this.emitPartial(this.sectionStart,g),this.sectionStart=this.index+Number(h),this.emitCodePoint((0,e.replaceCodePoint)(this.entityResult))),this.state=this.baseState},d.prototype.stateInNumericEntity=function(h){h===r.Semi?this.emitNumericEntity(!0):s(h)?(this.entityResult=this.entityResult*10+(h-r.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},d.prototype.stateInHexEntity=function(h){h===r.Semi?this.emitNumericEntity(!0):s(h)?(this.entityResult=this.entityResult*16+(h-r.Zero),this.entityExcess++):l(h)?(this.entityResult=this.entityResult*16+((h|32)-r.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},d.prototype.allowLegacyEntity=function(){return!this.xmlMode&&(this.baseState===i.Text||this.baseState===i.InSpecialTag)},d.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===i.Text||this.state===i.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===i.InAttributeValueDq||this.state===i.InAttributeValueSq||this.state===i.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},d.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},d.prototype.parse=function(){for(;this.shouldContinue();){var h=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case i.Text:{this.stateText(h);break}case i.SpecialStartSequence:{this.stateSpecialStartSequence(h);break}case i.InSpecialTag:{this.stateInSpecialTag(h);break}case i.CDATASequence:{this.stateCDATASequence(h);break}case i.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(h);break}case i.InAttributeName:{this.stateInAttributeName(h);break}case i.InCommentLike:{this.stateInCommentLike(h);break}case i.InSpecialComment:{this.stateInSpecialComment(h);break}case i.BeforeAttributeName:{this.stateBeforeAttributeName(h);break}case i.InTagName:{this.stateInTagName(h);break}case i.InClosingTagName:{this.stateInClosingTagName(h);break}case i.BeforeTagName:{this.stateBeforeTagName(h);break}case i.AfterAttributeName:{this.stateAfterAttributeName(h);break}case i.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(h);break}case i.BeforeAttributeValue:{this.stateBeforeAttributeValue(h);break}case i.BeforeClosingTagName:{this.stateBeforeClosingTagName(h);break}case i.AfterClosingTagName:{this.stateAfterClosingTagName(h);break}case i.BeforeSpecialS:{this.stateBeforeSpecialS(h);break}case i.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(h);break}case i.InSelfClosingTag:{this.stateInSelfClosingTag(h);break}case i.InDeclaration:{this.stateInDeclaration(h);break}case i.BeforeDeclaration:{this.stateBeforeDeclaration(h);break}case i.BeforeComment:{this.stateBeforeComment(h);break}case i.InProcessingInstruction:{this.stateInProcessingInstruction(h);break}case i.InNamedEntity:{this.stateInNamedEntity(h);break}case i.BeforeEntity:{this.stateBeforeEntity(h);break}case i.InHexEntity:{this.stateInHexEntity(h);break}case i.InNumericEntity:{this.stateInNumericEntity(h);break}default:this.stateBeforeNumericEntity(h)}this.index++}this.cleanup()},d.prototype.finish=function(){this.state===i.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()},d.prototype.handleTrailingData=function(){var h=this.buffer.length+this.offset;this.state===i.InCommentLike?this.currentSequence===u.CdataEnd?this.cbs.oncdata(this.sectionStart,h,0):this.cbs.oncomment(this.sectionStart,h,0):this.state===i.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===i.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===i.InTagName||this.state===i.BeforeAttributeName||this.state===i.BeforeAttributeValue||this.state===i.AfterAttributeName||this.state===i.InAttributeName||this.state===i.InAttributeValueSq||this.state===i.InAttributeValueDq||this.state===i.InAttributeValueNq||this.state===i.InClosingTagName||this.cbs.ontext(this.sectionStart,h)},d.prototype.emitPartial=function(h,g){this.baseState!==i.Text&&this.baseState!==i.InSpecialTag?this.cbs.onattribdata(h,g):this.cbs.ontext(h,g)},d.prototype.emitCodePoint=function(h){this.baseState!==i.Text&&this.baseState!==i.InSpecialTag?this.cbs.onattribentity(h):this.cbs.ontextentity(h)},d})();t.default=p})(lh)),lh}var P1;function $1(){if(P1)return gr;P1=1;var t=gr&&gr.__createBinding||(Object.create?(function(x,m,k,S){S===void 0&&(S=k);var _=Object.getOwnPropertyDescriptor(m,k);(!_||("get"in _?!m.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return m[k]}}),Object.defineProperty(x,S,_)}):(function(x,m,k,S){S===void 0&&(S=k),x[S]=m[k]})),e=gr&&gr.__setModuleDefault||(Object.create?(function(x,m){Object.defineProperty(x,"default",{enumerable:!0,value:m})}):function(x,m){x.default=m}),r=gr&&gr.__importStar||function(x){if(x&&x.__esModule)return x;var m={};if(x!=null)for(var k in x)k!=="default"&&Object.prototype.hasOwnProperty.call(x,k)&&t(m,x,k);return e(m,x),m};Object.defineProperty(gr,"__esModule",{value:!0}),gr.Parser=void 0;var i=r(w5()),n=iu(),a=new Set(["input","option","optgroup","select","button","datalist","textarea"]),s=new Set(["p"]),o=new Set(["thead","tbody"]),l=new Set(["dd","dt"]),c=new Set(["rt","rp"]),u=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",s],["h1",s],["h2",s],["h3",s],["h4",s],["h5",s],["h6",s],["select",a],["input",a],["output",a],["button",a],["datalist",a],["textarea",a],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",l],["dt",l],["address",s],["article",s],["aside",s],["blockquote",s],["details",s],["div",s],["dl",s],["fieldset",s],["figcaption",s],["figure",s],["footer",s],["form",s],["header",s],["hr",s],["main",s],["nav",s],["ol",s],["pre",s],["section",s],["table",s],["ul",s],["rt",c],["rp",c],["tbody",o],["tfoot",o]]),p=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),d=new Set(["math","svg"]),h=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),g=/\s|\//,y=(function(){function x(m,k){k===void 0&&(k={});var S,_,w,A,T;this.options=k,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=m??{},this.lowerCaseTagNames=(S=k.lowerCaseTags)!==null&&S!==void 0?S:!k.xmlMode,this.lowerCaseAttributeNames=(_=k.lowerCaseAttributeNames)!==null&&_!==void 0?_:!k.xmlMode,this.tokenizer=new((w=k.Tokenizer)!==null&&w!==void 0?w:i.default)(this.options,this),(T=(A=this.cbs).onparserinit)===null||T===void 0||T.call(A,this)}return x.prototype.ontext=function(m,k){var S,_,w=this.getSlice(m,k);this.endIndex=k-1,(_=(S=this.cbs).ontext)===null||_===void 0||_.call(S,w),this.startIndex=k},x.prototype.ontextentity=function(m){var k,S,_=this.tokenizer.getSectionStart();this.endIndex=_-1,(S=(k=this.cbs).ontext)===null||S===void 0||S.call(k,(0,n.fromCodePoint)(m)),this.startIndex=_},x.prototype.isVoidElement=function(m){return!this.options.xmlMode&&p.has(m)},x.prototype.onopentagname=function(m,k){this.endIndex=k;var S=this.getSlice(m,k);this.lowerCaseTagNames&&(S=S.toLowerCase()),this.emitOpenTag(S)},x.prototype.emitOpenTag=function(m){var k,S,_,w;this.openTagStart=this.startIndex,this.tagname=m;var A=!this.options.xmlMode&&u.get(m);if(A)for(;this.stack.length>0&&A.has(this.stack[this.stack.length-1]);){var T=this.stack.pop();(S=(k=this.cbs).onclosetag)===null||S===void 0||S.call(k,T,!0)}this.isVoidElement(m)||(this.stack.push(m),d.has(m)?this.foreignContext.push(!0):h.has(m)&&this.foreignContext.push(!1)),(w=(_=this.cbs).onopentagname)===null||w===void 0||w.call(_,m),this.cbs.onopentag&&(this.attribs={})},x.prototype.endOpenTag=function(m){var k,S;this.startIndex=this.openTagStart,this.attribs&&((S=(k=this.cbs).onopentag)===null||S===void 0||S.call(k,this.tagname,this.attribs,m),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},x.prototype.onopentagend=function(m){this.endIndex=m,this.endOpenTag(!1),this.startIndex=m+1},x.prototype.onclosetag=function(m,k){var S,_,w,A,T,I;this.endIndex=k;var O=this.getSlice(m,k);if(this.lowerCaseTagNames&&(O=O.toLowerCase()),(d.has(O)||h.has(O))&&this.foreignContext.pop(),this.isVoidElement(O))!this.options.xmlMode&&O==="br"&&((_=(S=this.cbs).onopentagname)===null||_===void 0||_.call(S,"br"),(A=(w=this.cbs).onopentag)===null||A===void 0||A.call(w,"br",{},!0),(I=(T=this.cbs).onclosetag)===null||I===void 0||I.call(T,"br",!1));else{var B=this.stack.lastIndexOf(O);if(B!==-1)if(this.cbs.onclosetag)for(var E=this.stack.length-B;E--;)this.cbs.onclosetag(this.stack.pop(),E!==0);else this.stack.length=B;else!this.options.xmlMode&&O==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=k+1},x.prototype.onselfclosingtag=function(m){this.endIndex=m,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=m+1):this.onopentagend(m)},x.prototype.closeCurrentTag=function(m){var k,S,_=this.tagname;this.endOpenTag(m),this.stack[this.stack.length-1]===_&&((S=(k=this.cbs).onclosetag)===null||S===void 0||S.call(k,_,!m),this.stack.pop())},x.prototype.onattribname=function(m,k){this.startIndex=m;var S=this.getSlice(m,k);this.attribname=this.lowerCaseAttributeNames?S.toLowerCase():S},x.prototype.onattribdata=function(m,k){this.attribvalue+=this.getSlice(m,k)},x.prototype.onattribentity=function(m){this.attribvalue+=(0,n.fromCodePoint)(m)},x.prototype.onattribend=function(m,k){var S,_;this.endIndex=k,(_=(S=this.cbs).onattribute)===null||_===void 0||_.call(S,this.attribname,this.attribvalue,m===i.QuoteType.Double?'"':m===i.QuoteType.Single?"'":m===i.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},x.prototype.getInstructionName=function(m){var k=m.search(g),S=k<0?m:m.substr(0,k);return this.lowerCaseTagNames&&(S=S.toLowerCase()),S},x.prototype.ondeclaration=function(m,k){this.endIndex=k;var S=this.getSlice(m,k);if(this.cbs.onprocessinginstruction){var _=this.getInstructionName(S);this.cbs.onprocessinginstruction("!".concat(_),"!".concat(S))}this.startIndex=k+1},x.prototype.onprocessinginstruction=function(m,k){this.endIndex=k;var S=this.getSlice(m,k);if(this.cbs.onprocessinginstruction){var _=this.getInstructionName(S);this.cbs.onprocessinginstruction("?".concat(_),"?".concat(S))}this.startIndex=k+1},x.prototype.oncomment=function(m,k,S){var _,w,A,T;this.endIndex=k,(w=(_=this.cbs).oncomment)===null||w===void 0||w.call(_,this.getSlice(m,k-S)),(T=(A=this.cbs).oncommentend)===null||T===void 0||T.call(A),this.startIndex=k+1},x.prototype.oncdata=function(m,k,S){var _,w,A,T,I,O,B,E,$,R;this.endIndex=k;var N=this.getSlice(m,k-S);this.options.xmlMode||this.options.recognizeCDATA?((w=(_=this.cbs).oncdatastart)===null||w===void 0||w.call(_),(T=(A=this.cbs).ontext)===null||T===void 0||T.call(A,N),(O=(I=this.cbs).oncdataend)===null||O===void 0||O.call(I)):((E=(B=this.cbs).oncomment)===null||E===void 0||E.call(B,"[CDATA[".concat(N,"]]")),(R=($=this.cbs).oncommentend)===null||R===void 0||R.call($)),this.startIndex=k+1},x.prototype.onend=function(){var m,k;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var S=this.stack.length;S>0;this.cbs.onclosetag(this.stack[--S],!0));}(k=(m=this.cbs).onend)===null||k===void 0||k.call(m)},x.prototype.reset=function(){var m,k,S,_;(k=(m=this.cbs).onreset)===null||k===void 0||k.call(m),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(_=(S=this.cbs).onparserinit)===null||_===void 0||_.call(S,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1},x.prototype.parseComplete=function(m){this.reset(),this.end(m)},x.prototype.getSlice=function(m,k){for(;m-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var S=this.buffers[0].slice(m-this.bufferOffset,k-this.bufferOffset);k-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),S+=this.buffers[0].slice(0,k-this.bufferOffset);return S},x.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},x.prototype.write=function(m){var k,S;if(this.ended){(S=(k=this.cbs).onerror)===null||S===void 0||S.call(k,new Error(".write() after done!"));return}this.buffers.push(m),this.tokenizer.running&&(this.tokenizer.write(m),this.writeIndex++)},x.prototype.end=function(m){var k,S;if(this.ended){(S=(k=this.cbs).onerror)===null||S===void 0||S.call(k,new Error(".end() after done!"));return}m&&this.write(m),this.ended=!0,this.tokenizer.end()},x.prototype.pause=function(){this.tokenizer.pause()},x.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},x.prototype.parseChunk=function(m){this.write(m)},x.prototype.done=function(m){this.end(m)},x})();return gr.Parser=y,gr}var nn={},uh={},R1;function tl(){return R1||(R1=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.Doctype=t.CDATA=t.Tag=t.Style=t.Script=t.Comment=t.Directive=t.Text=t.Root=t.isTag=t.ElementType=void 0;var e;(function(i){i.Root="root",i.Text="text",i.Directive="directive",i.Comment="comment",i.Script="script",i.Style="style",i.Tag="tag",i.CDATA="cdata",i.Doctype="doctype"})(e=t.ElementType||(t.ElementType={}));function r(i){return i.type===e.Tag||i.type===e.Script||i.type===e.Style}t.isTag=r,t.Root=e.Root,t.Text=e.Text,t.Directive=e.Directive,t.Comment=e.Comment,t.Script=e.Script,t.Style=e.Style,t.Tag=e.Tag,t.CDATA=e.CDATA,t.Doctype=e.Doctype})(uh)),uh}var ue={},D1;function L1(){if(D1)return ue;D1=1;var t=ue&&ue.__extends||(function(){var w=function(A,T){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(I,O){I.__proto__=O}||function(I,O){for(var B in O)Object.prototype.hasOwnProperty.call(O,B)&&(I[B]=O[B])},w(A,T)};return function(A,T){if(typeof T!="function"&&T!==null)throw new TypeError("Class extends value "+String(T)+" is not a constructor or null");w(A,T);function I(){this.constructor=A}A.prototype=T===null?Object.create(T):(I.prototype=T.prototype,new I)}})(),e=ue&&ue.__assign||function(){return e=Object.assign||function(w){for(var A,T=1,I=arguments.length;T<I;T++){A=arguments[T];for(var O in A)Object.prototype.hasOwnProperty.call(A,O)&&(w[O]=A[O])}return w},e.apply(this,arguments)};Object.defineProperty(ue,"__esModule",{value:!0}),ue.cloneNode=ue.hasChildren=ue.isDocument=ue.isDirective=ue.isComment=ue.isText=ue.isCDATA=ue.isTag=ue.Element=ue.Document=ue.CDATA=ue.NodeWithChildren=ue.ProcessingInstruction=ue.Comment=ue.Text=ue.DataNode=ue.Node=void 0;var r=tl(),i=(function(){function w(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(w.prototype,"parentNode",{get:function(){return this.parent},set:function(A){this.parent=A},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"previousSibling",{get:function(){return this.prev},set:function(A){this.prev=A},enumerable:!1,configurable:!0}),Object.defineProperty(w.prototype,"nextSibling",{get:function(){return this.next},set:function(A){this.next=A},enumerable:!1,configurable:!0}),w.prototype.cloneNode=function(A){return A===void 0&&(A=!1),S(this,A)},w})();ue.Node=i;var n=(function(w){t(A,w);function A(T){var I=w.call(this)||this;return I.data=T,I}return Object.defineProperty(A.prototype,"nodeValue",{get:function(){return this.data},set:function(T){this.data=T},enumerable:!1,configurable:!0}),A})(i);ue.DataNode=n;var a=(function(w){t(A,w);function A(){var T=w!==null&&w.apply(this,arguments)||this;return T.type=r.ElementType.Text,T}return Object.defineProperty(A.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),A})(n);ue.Text=a;var s=(function(w){t(A,w);function A(){var T=w!==null&&w.apply(this,arguments)||this;return T.type=r.ElementType.Comment,T}return Object.defineProperty(A.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),A})(n);ue.Comment=s;var o=(function(w){t(A,w);function A(T,I){var O=w.call(this,I)||this;return O.name=T,O.type=r.ElementType.Directive,O}return Object.defineProperty(A.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),A})(n);ue.ProcessingInstruction=o;var l=(function(w){t(A,w);function A(T){var I=w.call(this)||this;return I.children=T,I}return Object.defineProperty(A.prototype,"firstChild",{get:function(){var T;return(T=this.children[0])!==null&&T!==void 0?T:null},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"childNodes",{get:function(){return this.children},set:function(T){this.children=T},enumerable:!1,configurable:!0}),A})(i);ue.NodeWithChildren=l;var c=(function(w){t(A,w);function A(){var T=w!==null&&w.apply(this,arguments)||this;return T.type=r.ElementType.CDATA,T}return Object.defineProperty(A.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),A})(l);ue.CDATA=c;var u=(function(w){t(A,w);function A(){var T=w!==null&&w.apply(this,arguments)||this;return T.type=r.ElementType.Root,T}return Object.defineProperty(A.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),A})(l);ue.Document=u;var p=(function(w){t(A,w);function A(T,I,O,B){O===void 0&&(O=[]),B===void 0&&(B=T==="script"?r.ElementType.Script:T==="style"?r.ElementType.Style:r.ElementType.Tag);var E=w.call(this,O)||this;return E.name=T,E.attribs=I,E.type=B,E}return Object.defineProperty(A.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"tagName",{get:function(){return this.name},set:function(T){this.name=T},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"attributes",{get:function(){var T=this;return Object.keys(this.attribs).map(function(I){var O,B;return{name:I,value:T.attribs[I],namespace:(O=T["x-attribsNamespace"])===null||O===void 0?void 0:O[I],prefix:(B=T["x-attribsPrefix"])===null||B===void 0?void 0:B[I]}})},enumerable:!1,configurable:!0}),A})(l);ue.Element=p;function d(w){return(0,r.isTag)(w)}ue.isTag=d;function h(w){return w.type===r.ElementType.CDATA}ue.isCDATA=h;function g(w){return w.type===r.ElementType.Text}ue.isText=g;function y(w){return w.type===r.ElementType.Comment}ue.isComment=y;function x(w){return w.type===r.ElementType.Directive}ue.isDirective=x;function m(w){return w.type===r.ElementType.Root}ue.isDocument=m;function k(w){return Object.prototype.hasOwnProperty.call(w,"children")}ue.hasChildren=k;function S(w,A){A===void 0&&(A=!1);var T;if(g(w))T=new a(w.data);else if(y(w))T=new s(w.data);else if(d(w)){var I=A?_(w.children):[],O=new p(w.name,e({},w.attribs),I);I.forEach(function(R){return R.parent=O}),w.namespace!=null&&(O.namespace=w.namespace),w["x-attribsNamespace"]&&(O["x-attribsNamespace"]=e({},w["x-attribsNamespace"])),w["x-attribsPrefix"]&&(O["x-attribsPrefix"]=e({},w["x-attribsPrefix"])),T=O}else if(h(w)){var I=A?_(w.children):[],B=new c(I);I.forEach(function(N){return N.parent=B}),T=B}else if(m(w)){var I=A?_(w.children):[],E=new u(I);I.forEach(function(N){return N.parent=E}),w["x-mode"]&&(E["x-mode"]=w["x-mode"]),T=E}else if(x(w)){var $=new o(w.name,w.data);w["x-name"]!=null&&($["x-name"]=w["x-name"],$["x-publicId"]=w["x-publicId"],$["x-systemId"]=w["x-systemId"]),T=$}else throw new Error("Not implemented yet: ".concat(w.type));return T.startIndex=w.startIndex,T.endIndex=w.endIndex,w.sourceCodeLocation!=null&&(T.sourceCodeLocation=w.sourceCodeLocation),T}ue.cloneNode=S;function _(w){for(var A=w.map(function(I){return S(I,!0)}),T=1;T<A.length;T++)A[T].prev=A[T-1],A[T-1].next=A[T];return A}return ue}var O1;function Hi(){return O1||(O1=1,(function(t){var e=nn&&nn.__createBinding||(Object.create?(function(o,l,c,u){u===void 0&&(u=c);var p=Object.getOwnPropertyDescriptor(l,c);(!p||("get"in p?!l.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return l[c]}}),Object.defineProperty(o,u,p)}):(function(o,l,c,u){u===void 0&&(u=c),o[u]=l[c]})),r=nn&&nn.__exportStar||function(o,l){for(var c in o)c!=="default"&&!Object.prototype.hasOwnProperty.call(l,c)&&e(l,o,c)};Object.defineProperty(t,"__esModule",{value:!0}),t.DomHandler=void 0;var i=tl(),n=L1();r(L1(),t);var a={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},s=(function(){function o(l,c,u){this.dom=[],this.root=new n.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof c=="function"&&(u=c,c=a),typeof l=="object"&&(c=l,l=void 0),this.callback=l??null,this.options=c??a,this.elementCB=u??null}return o.prototype.onparserinit=function(l){this.parser=l},o.prototype.onreset=function(){this.dom=[],this.root=new n.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},o.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},o.prototype.onerror=function(l){this.handleCallback(l)},o.prototype.onclosetag=function(){this.lastNode=null;var l=this.tagStack.pop();this.options.withEndIndices&&(l.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(l)},o.prototype.onopentag=function(l,c){var u=this.options.xmlMode?i.ElementType.Tag:void 0,p=new n.Element(l,c,void 0,u);this.addNode(p),this.tagStack.push(p)},o.prototype.ontext=function(l){var c=this.lastNode;if(c&&c.type===i.ElementType.Text)c.data+=l,this.options.withEndIndices&&(c.endIndex=this.parser.endIndex);else{var u=new n.Text(l);this.addNode(u),this.lastNode=u}},o.prototype.oncomment=function(l){if(this.lastNode&&this.lastNode.type===i.ElementType.Comment){this.lastNode.data+=l;return}var c=new n.Comment(l);this.addNode(c),this.lastNode=c},o.prototype.oncommentend=function(){this.lastNode=null},o.prototype.oncdatastart=function(){var l=new n.Text(""),c=new n.CDATA([l]);this.addNode(c),l.parent=c,this.lastNode=l},o.prototype.oncdataend=function(){this.lastNode=null},o.prototype.onprocessinginstruction=function(l,c){var u=new n.ProcessingInstruction(l,c);this.addNode(u)},o.prototype.handleCallback=function(l){if(typeof this.callback=="function")this.callback(l,this.dom);else if(l)throw l},o.prototype.addNode=function(l){var c=this.tagStack[this.tagStack.length-1],u=c.children[c.children.length-1];this.options.withStartIndices&&(l.startIndex=this.parser.startIndex),this.options.withEndIndices&&(l.endIndex=this.parser.endIndex),c.children.push(l),u&&(l.prev=u,u.next=l),l.parent=c,this.lastNode=null},o})();t.DomHandler=s,t.default=s})(nn)),nn}var an={},Or={},Lt={},dh={},ti={},jl={},B1;function UL(){if(B1)return jl;B1=1,Object.defineProperty(jl,"__esModule",{value:!0});function t(e){for(var r=1;r<e.length;r++)e[r][0]+=e[r-1][0]+1;return e}return jl.default=new Map(t([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(t([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(t([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(t([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]])),jl}var hh={},N1;function np(){return N1||(N1=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.escapeText=t.escapeAttribute=t.escapeUTF8=t.escape=t.encodeXML=t.getCodePoint=t.xmlReplacer=void 0,t.xmlReplacer=/["&'<>$\x80-\uFFFF]/g;var e=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);t.getCodePoint=String.prototype.codePointAt!=null?function(n,a){return n.codePointAt(a)}:function(n,a){return(n.charCodeAt(a)&64512)===55296?(n.charCodeAt(a)-55296)*1024+n.charCodeAt(a+1)-56320+65536:n.charCodeAt(a)};function r(n){for(var a="",s=0,o;(o=t.xmlReplacer.exec(n))!==null;){var l=o.index,c=n.charCodeAt(l),u=e.get(c);u!==void 0?(a+=n.substring(s,l)+u,s=l+1):(a+="".concat(n.substring(s,l),"&#x").concat((0,t.getCodePoint)(n,l).toString(16),";"),s=t.xmlReplacer.lastIndex+=+((c&64512)===55296))}return a+n.substr(s)}t.encodeXML=r,t.escape=r;function i(n,a){return function(o){for(var l,c=0,u="";l=n.exec(o);)c!==l.index&&(u+=o.substring(c,l.index)),u+=a.get(l[0].charCodeAt(0)),c=l.index+1;return u+o.substring(c)}}t.escapeUTF8=i(/[&<>'"]/g,e),t.escapeAttribute=i(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),t.escapeText=i(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]))})(hh)),hh}var U1;function z1(){if(U1)return ti;U1=1;var t=ti&&ti.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(ti,"__esModule",{value:!0}),ti.encodeNonAsciiHTML=ti.encodeHTML=void 0;var e=t(UL()),r=np(),i=/[\t\n!-,./:-@[-`\f{-}$\x80-\uFFFF]/g;function n(o){return s(i,o)}ti.encodeHTML=n;function a(o){return s(r.xmlReplacer,o)}ti.encodeNonAsciiHTML=a;function s(o,l){for(var c="",u=0,p;(p=o.exec(l))!==null;){var d=p.index;c+=l.substring(u,d);var h=l.charCodeAt(d),g=e.default.get(h);if(typeof g=="object"){if(d+1<l.length){var y=l.charCodeAt(d+1),x=typeof g.n=="number"?g.n===y?g.o:void 0:g.n.get(y);if(x!==void 0){c+=x,u=o.lastIndex+=1;continue}}g=g.v}if(g!==void 0)c+=g,u=d+1;else{var m=(0,r.getCodePoint)(l,d);c+="&#x".concat(m.toString(16),";"),u=o.lastIndex+=+(m!==h)}}return c+l.substr(u)}return ti}var H1;function zL(){return H1||(H1=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.decodeXMLStrict=t.decodeHTML5Strict=t.decodeHTML4Strict=t.decodeHTML5=t.decodeHTML4=t.decodeHTMLAttribute=t.decodeHTMLStrict=t.decodeHTML=t.decodeXML=t.DecodingMode=t.EntityDecoder=t.encodeHTML5=t.encodeHTML4=t.encodeNonAsciiHTML=t.encodeHTML=t.escapeText=t.escapeAttribute=t.escapeUTF8=t.escape=t.encodeXML=t.encode=t.decodeStrict=t.decode=t.EncodingMode=t.EntityLevel=void 0;var e=iu(),r=z1(),i=np(),n;(function(d){d[d.XML=0]="XML",d[d.HTML=1]="HTML"})(n=t.EntityLevel||(t.EntityLevel={}));var a;(function(d){d[d.UTF8=0]="UTF8",d[d.ASCII=1]="ASCII",d[d.Extensive=2]="Extensive",d[d.Attribute=3]="Attribute",d[d.Text=4]="Text"})(a=t.EncodingMode||(t.EncodingMode={}));function s(d,h){h===void 0&&(h=n.XML);var g=typeof h=="number"?h:h.level;if(g===n.HTML){var y=typeof h=="object"?h.mode:void 0;return(0,e.decodeHTML)(d,y)}return(0,e.decodeXML)(d)}t.decode=s;function o(d,h){var g;h===void 0&&(h=n.XML);var y=typeof h=="number"?{level:h}:h;return(g=y.mode)!==null&&g!==void 0||(y.mode=e.DecodingMode.Strict),s(d,y)}t.decodeStrict=o;function l(d,h){h===void 0&&(h=n.XML);var g=typeof h=="number"?{level:h}:h;return g.mode===a.UTF8?(0,i.escapeUTF8)(d):g.mode===a.Attribute?(0,i.escapeAttribute)(d):g.mode===a.Text?(0,i.escapeText)(d):g.level===n.HTML?g.mode===a.ASCII?(0,r.encodeNonAsciiHTML)(d):(0,r.encodeHTML)(d):(0,i.encodeXML)(d)}t.encode=l;var c=np();Object.defineProperty(t,"encodeXML",{enumerable:!0,get:function(){return c.encodeXML}}),Object.defineProperty(t,"escape",{enumerable:!0,get:function(){return c.escape}}),Object.defineProperty(t,"escapeUTF8",{enumerable:!0,get:function(){return c.escapeUTF8}}),Object.defineProperty(t,"escapeAttribute",{enumerable:!0,get:function(){return c.escapeAttribute}}),Object.defineProperty(t,"escapeText",{enumerable:!0,get:function(){return c.escapeText}});var u=z1();Object.defineProperty(t,"encodeHTML",{enumerable:!0,get:function(){return u.encodeHTML}}),Object.defineProperty(t,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return u.encodeNonAsciiHTML}}),Object.defineProperty(t,"encodeHTML4",{enumerable:!0,get:function(){return u.encodeHTML}}),Object.defineProperty(t,"encodeHTML5",{enumerable:!0,get:function(){return u.encodeHTML}});var p=iu();Object.defineProperty(t,"EntityDecoder",{enumerable:!0,get:function(){return p.EntityDecoder}}),Object.defineProperty(t,"DecodingMode",{enumerable:!0,get:function(){return p.DecodingMode}}),Object.defineProperty(t,"decodeXML",{enumerable:!0,get:function(){return p.decodeXML}}),Object.defineProperty(t,"decodeHTML",{enumerable:!0,get:function(){return p.decodeHTML}}),Object.defineProperty(t,"decodeHTMLStrict",{enumerable:!0,get:function(){return p.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTMLAttribute",{enumerable:!0,get:function(){return p.decodeHTMLAttribute}}),Object.defineProperty(t,"decodeHTML4",{enumerable:!0,get:function(){return p.decodeHTML}}),Object.defineProperty(t,"decodeHTML5",{enumerable:!0,get:function(){return p.decodeHTML}}),Object.defineProperty(t,"decodeHTML4Strict",{enumerable:!0,get:function(){return p.decodeHTMLStrict}}),Object.defineProperty(t,"decodeHTML5Strict",{enumerable:!0,get:function(){return p.decodeHTMLStrict}}),Object.defineProperty(t,"decodeXMLStrict",{enumerable:!0,get:function(){return p.decodeXML}})})(dh)),dh}var sn={},F1;function HL(){return F1||(F1=1,Object.defineProperty(sn,"__esModule",{value:!0}),sn.attributeNames=sn.elementNames=void 0,sn.elementNames=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(function(t){return[t.toLowerCase(),t]})),sn.attributeNames=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(function(t){return[t.toLowerCase(),t]}))),sn}var q1;function FL(){if(q1)return Lt;q1=1;var t=Lt&&Lt.__assign||function(){return t=Object.assign||function(_){for(var w,A=1,T=arguments.length;A<T;A++){w=arguments[A];for(var I in w)Object.prototype.hasOwnProperty.call(w,I)&&(_[I]=w[I])}return _},t.apply(this,arguments)},e=Lt&&Lt.__createBinding||(Object.create?(function(_,w,A,T){T===void 0&&(T=A);var I=Object.getOwnPropertyDescriptor(w,A);(!I||("get"in I?!w.__esModule:I.writable||I.configurable))&&(I={enumerable:!0,get:function(){return w[A]}}),Object.defineProperty(_,T,I)}):(function(_,w,A,T){T===void 0&&(T=A),_[T]=w[A]})),r=Lt&&Lt.__setModuleDefault||(Object.create?(function(_,w){Object.defineProperty(_,"default",{enumerable:!0,value:w})}):function(_,w){_.default=w}),i=Lt&&Lt.__importStar||function(_){if(_&&_.__esModule)return _;var w={};if(_!=null)for(var A in _)A!=="default"&&Object.prototype.hasOwnProperty.call(_,A)&&e(w,_,A);return r(w,_),w};Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.render=void 0;var n=i(tl()),a=zL(),s=HL(),o=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function l(_){return _.replace(/"/g,"&quot;")}function c(_,w){var A;if(_){var T=((A=w.encodeEntities)!==null&&A!==void 0?A:w.decodeEntities)===!1?l:w.xmlMode||w.encodeEntities!=="utf8"?a.encodeXML:a.escapeAttribute;return Object.keys(_).map(function(I){var O,B,E=(O=_[I])!==null&&O!==void 0?O:"";return w.xmlMode==="foreign"&&(I=(B=s.attributeNames.get(I))!==null&&B!==void 0?B:I),!w.emptyAttrs&&!w.xmlMode&&E===""?I:"".concat(I,'="').concat(T(E),'"')}).join(" ")}}var u=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function p(_,w){w===void 0&&(w={});for(var A=("length"in _)?_:[_],T="",I=0;I<A.length;I++)T+=d(A[I],w);return T}Lt.render=p,Lt.default=p;function d(_,w){switch(_.type){case n.Root:return p(_.children,w);case n.Doctype:case n.Directive:return x(_);case n.Comment:return S(_);case n.CDATA:return k(_);case n.Script:case n.Style:case n.Tag:return y(_,w);case n.Text:return m(_,w)}}var h=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),g=new Set(["svg","math"]);function y(_,w){var A;w.xmlMode==="foreign"&&(_.name=(A=s.elementNames.get(_.name))!==null&&A!==void 0?A:_.name,_.parent&&h.has(_.parent.name)&&(w=t(t({},w),{xmlMode:!1}))),!w.xmlMode&&g.has(_.name)&&(w=t(t({},w),{xmlMode:"foreign"}));var T="<".concat(_.name),I=c(_.attribs,w);return I&&(T+=" ".concat(I)),_.children.length===0&&(w.xmlMode?w.selfClosingTags!==!1:w.selfClosingTags&&u.has(_.name))?(w.xmlMode||(T+=" "),T+="/>"):(T+=">",_.children.length>0&&(T+=p(_.children,w)),(w.xmlMode||!u.has(_.name))&&(T+="</".concat(_.name,">"))),T}function x(_){return"<".concat(_.data,">")}function m(_,w){var A,T=_.data||"";return((A=w.encodeEntities)!==null&&A!==void 0?A:w.decodeEntities)!==!1&&!(!w.xmlMode&&_.parent&&o.has(_.parent.name))&&(T=w.xmlMode||w.encodeEntities!=="utf8"?(0,a.encodeXML)(T):(0,a.escapeText)(T)),T}function k(_){return"<![CDATA[".concat(_.children[0].data,"]]>")}function S(_){return"<!--".concat(_.data,"-->")}return Lt}var j1;function x5(){if(j1)return Or;j1=1;var t=Or&&Or.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(Or,"__esModule",{value:!0}),Or.getOuterHTML=n,Or.getInnerHTML=a,Or.getText=s,Or.textContent=o,Or.innerText=l;var e=Hi(),r=t(FL()),i=tl();function n(c,u){return(0,r.default)(c,u)}function a(c,u){return(0,e.hasChildren)(c)?c.children.map(function(p){return n(p,u)}).join(""):""}function s(c){return Array.isArray(c)?c.map(s).join(""):(0,e.isTag)(c)?c.name==="br"?`
`:s(c.children):(0,e.isCDATA)(c)?s(c.children):(0,e.isText)(c)?c.data:""}function o(c){return Array.isArray(c)?c.map(o).join(""):(0,e.hasChildren)(c)&&!(0,e.isComment)(c)?o(c.children):(0,e.isText)(c)?c.data:""}function l(c){return Array.isArray(c)?c.map(l).join(""):(0,e.hasChildren)(c)&&(c.type===i.ElementType.Tag||(0,e.isCDATA)(c))?l(c.children):(0,e.isText)(c)?c.data:""}return Or}var br={},G1;function qL(){if(G1)return br;G1=1,Object.defineProperty(br,"__esModule",{value:!0}),br.getChildren=e,br.getParent=r,br.getSiblings=i,br.getAttributeValue=n,br.hasAttrib=a,br.getName=s,br.nextElementSibling=o,br.prevElementSibling=l;var t=Hi();function e(c){return(0,t.hasChildren)(c)?c.children:[]}function r(c){return c.parent||null}function i(c){var u,p,d=r(c);if(d!=null)return e(d);for(var h=[c],g=c.prev,y=c.next;g!=null;)h.unshift(g),u=g,g=u.prev;for(;y!=null;)h.push(y),p=y,y=p.next;return h}function n(c,u){var p;return(p=c.attribs)===null||p===void 0?void 0:p[u]}function a(c,u){return c.attribs!=null&&Object.prototype.hasOwnProperty.call(c.attribs,u)&&c.attribs[u]!=null}function s(c){return c.name}function o(c){for(var u,p=c.next;p!==null&&!(0,t.isTag)(p);)u=p,p=u.next;return p}function l(c){for(var u,p=c.prev;p!==null&&!(0,t.isTag)(p);)u=p,p=u.prev;return p}return br}var ri={},V1;function jL(){if(V1)return ri;V1=1,Object.defineProperty(ri,"__esModule",{value:!0}),ri.removeElement=t,ri.replaceElement=e,ri.appendChild=r,ri.append=i,ri.prependChild=n,ri.prepend=a;function t(s){if(s.prev&&(s.prev.next=s.next),s.next&&(s.next.prev=s.prev),s.parent){var o=s.parent.children,l=o.lastIndexOf(s);l>=0&&o.splice(l,1)}s.next=null,s.prev=null,s.parent=null}function e(s,o){var l=o.prev=s.prev;l&&(l.next=o);var c=o.next=s.next;c&&(c.prev=o);var u=o.parent=s.parent;if(u){var p=u.children;p[p.lastIndexOf(s)]=o,s.parent=null}}function r(s,o){if(t(o),o.next=null,o.parent=s,s.children.push(o)>1){var l=s.children[s.children.length-2];l.next=o,o.prev=l}else o.prev=null}function i(s,o){t(o);var l=s.parent,c=s.next;if(o.next=c,o.prev=s,s.next=o,o.parent=l,c){if(c.prev=o,l){var u=l.children;u.splice(u.lastIndexOf(c),0,o)}}else l&&l.children.push(o)}function n(s,o){if(t(o),o.parent=s,o.prev=null,s.children.unshift(o)!==1){var l=s.children[1];l.prev=o,o.next=l}else o.next=null}function a(s,o){t(o);var l=s.parent;if(l){var c=l.children;c.splice(c.indexOf(s),0,o)}s.prev&&(s.prev.next=o),o.parent=l,o.prev=s.prev,o.next=s,s.prev=o}return ri}var ii={},W1;function _5(){if(W1)return ii;W1=1,Object.defineProperty(ii,"__esModule",{value:!0}),ii.filter=e,ii.find=r,ii.findOneChild=i,ii.findOne=n,ii.existsOne=a,ii.findAll=s;var t=Hi();function e(o,l,c,u){return c===void 0&&(c=!0),u===void 0&&(u=1/0),r(o,Array.isArray(l)?l:[l],c,u)}function r(o,l,c,u){for(var p=[],d=[Array.isArray(l)?l:[l]],h=[0];;){if(h[0]>=d[0].length){if(h.length===1)return p;d.shift(),h.shift();continue}var g=d[0][h[0]++];if(o(g)&&(p.push(g),--u<=0))return p;c&&(0,t.hasChildren)(g)&&g.children.length>0&&(h.unshift(0),d.unshift(g.children))}}function i(o,l){return l.find(o)}function n(o,l,c){c===void 0&&(c=!0);for(var u=Array.isArray(l)?l:[l],p=0;p<u.length;p++){var d=u[p];if((0,t.isTag)(d)&&o(d))return d;if(c&&(0,t.hasChildren)(d)&&d.children.length>0){var h=n(o,d.children,!0);if(h)return h}}return null}function a(o,l){return(Array.isArray(l)?l:[l]).some(function(c){return(0,t.isTag)(c)&&o(c)||(0,t.hasChildren)(c)&&a(o,c.children)})}function s(o,l){for(var c=[],u=[Array.isArray(l)?l:[l]],p=[0];;){if(p[0]>=u[0].length){if(u.length===1)return c;u.shift(),p.shift();continue}var d=u[0][p[0]++];(0,t.isTag)(d)&&o(d)&&c.push(d),(0,t.hasChildren)(d)&&d.children.length>0&&(p.unshift(0),u.unshift(d.children))}}return ii}var ni={},K1;function k5(){if(K1)return ni;K1=1,Object.defineProperty(ni,"__esModule",{value:!0}),ni.testElement=s,ni.getElements=o,ni.getElementById=l,ni.getElementsByTagName=c,ni.getElementsByClassName=u,ni.getElementsByTagType=p;var t=Hi(),e=_5(),r={tag_name:function(d){return typeof d=="function"?function(h){return(0,t.isTag)(h)&&d(h.name)}:d==="*"?t.isTag:function(h){return(0,t.isTag)(h)&&h.name===d}},tag_type:function(d){return typeof d=="function"?function(h){return d(h.type)}:function(h){return h.type===d}},tag_contains:function(d){return typeof d=="function"?function(h){return(0,t.isText)(h)&&d(h.data)}:function(h){return(0,t.isText)(h)&&h.data===d}}};function i(d,h){return typeof h=="function"?function(g){return(0,t.isTag)(g)&&h(g.attribs[d])}:function(g){return(0,t.isTag)(g)&&g.attribs[d]===h}}function n(d,h){return function(g){return d(g)||h(g)}}function a(d){var h=Object.keys(d).map(function(g){var y=d[g];return Object.prototype.hasOwnProperty.call(r,g)?r[g](y):i(g,y)});return h.length===0?null:h.reduce(n)}function s(d,h){var g=a(d);return g?g(h):!0}function o(d,h,g,y){y===void 0&&(y=1/0);var x=a(d);return x?(0,e.filter)(x,h,g,y):[]}function l(d,h,g){return g===void 0&&(g=!0),Array.isArray(h)||(h=[h]),(0,e.findOne)(i("id",d),h,g)}function c(d,h,g,y){return g===void 0&&(g=!0),y===void 0&&(y=1/0),(0,e.filter)(r.tag_name(d),h,g,y)}function u(d,h,g,y){return g===void 0&&(g=!0),y===void 0&&(y=1/0),(0,e.filter)(i("class",d),h,g,y)}function p(d,h,g,y){return g===void 0&&(g=!0),y===void 0&&(y=1/0),(0,e.filter)(r.tag_type(d),h,g,y)}return ni}var ki={},Y1;function GL(){if(Y1)return ki;Y1=1,Object.defineProperty(ki,"__esModule",{value:!0}),ki.DocumentPosition=void 0,ki.removeSubsets=e,ki.compareDocumentPosition=i,ki.uniqueSort=n;var t=Hi();function e(a){for(var s=a.length;--s>=0;){var o=a[s];if(s>0&&a.lastIndexOf(o,s-1)>=0){a.splice(s,1);continue}for(var l=o.parent;l;l=l.parent)if(a.includes(l)){a.splice(s,1);break}}return a}var r;(function(a){a[a.DISCONNECTED=1]="DISCONNECTED",a[a.PRECEDING=2]="PRECEDING",a[a.FOLLOWING=4]="FOLLOWING",a[a.CONTAINS=8]="CONTAINS",a[a.CONTAINED_BY=16]="CONTAINED_BY"})(r||(ki.DocumentPosition=r={}));function i(a,s){var o=[],l=[];if(a===s)return 0;for(var c=(0,t.hasChildren)(a)?a:a.parent;c;)o.unshift(c),c=c.parent;for(c=(0,t.hasChildren)(s)?s:s.parent;c;)l.unshift(c),c=c.parent;for(var u=Math.min(o.length,l.length),p=0;p<u&&o[p]===l[p];)p++;if(p===0)return r.DISCONNECTED;var d=o[p-1],h=d.children,g=o[p],y=l[p];return h.indexOf(g)>h.indexOf(y)?d===s?r.FOLLOWING|r.CONTAINED_BY:r.FOLLOWING:d===a?r.PRECEDING|r.CONTAINS:r.PRECEDING}function n(a){return a=a.filter(function(s,o,l){return!l.includes(s,o+1)}),a.sort(function(s,o){var l=i(s,o);return l&r.PRECEDING?-1:l&r.FOLLOWING?1:0}),a}return ki}var Gl={},X1;function VL(){if(X1)return Gl;X1=1,Object.defineProperty(Gl,"__esModule",{value:!0}),Gl.getFeed=r;var t=x5(),e=k5();function r(d){var h=l(p,d);return h?h.name==="feed"?i(h):n(h):null}function i(d){var h,g=d.children,y={type:"atom",items:(0,e.getElementsByTagName)("entry",g).map(function(k){var S,_=k.children,w={media:o(_)};u(w,"id","id",_),u(w,"title","title",_);var A=(S=l("link",_))===null||S===void 0?void 0:S.attribs.href;A&&(w.link=A);var T=c("summary",_)||c("content",_);T&&(w.description=T);var I=c("updated",_);return I&&(w.pubDate=new Date(I)),w})};u(y,"id","id",g),u(y,"title","title",g);var x=(h=l("link",g))===null||h===void 0?void 0:h.attribs.href;x&&(y.link=x),u(y,"description","subtitle",g);var m=c("updated",g);return m&&(y.updated=new Date(m)),u(y,"author","email",g,!0),y}function n(d){var h,g,y=(g=(h=l("channel",d.children))===null||h===void 0?void 0:h.children)!==null&&g!==void 0?g:[],x={type:d.name.substr(0,3),id:"",items:(0,e.getElementsByTagName)("item",d.children).map(function(k){var S=k.children,_={media:o(S)};u(_,"id","guid",S),u(_,"title","title",S),u(_,"link","link",S),u(_,"description","description",S);var w=c("pubDate",S)||c("dc:date",S);return w&&(_.pubDate=new Date(w)),_})};u(x,"title","title",y),u(x,"link","link",y),u(x,"description","description",y);var m=c("lastBuildDate",y);return m&&(x.updated=new Date(m)),u(x,"author","managingEditor",y,!0),x}var a=["url","type","lang"],s=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function o(d){return(0,e.getElementsByTagName)("media:content",d).map(function(h){for(var g=h.attribs,y={medium:g.medium,isDefault:!!g.isDefault},x=0,m=a;x<m.length;x++){var k=m[x];g[k]&&(y[k]=g[k])}for(var S=0,_=s;S<_.length;S++){var k=_[S];g[k]&&(y[k]=parseInt(g[k],10))}return g.expression&&(y.expression=g.expression),y})}function l(d,h){return(0,e.getElementsByTagName)(d,h,!0,1)[0]}function c(d,h,g){return g===void 0&&(g=!1),(0,t.textContent)((0,e.getElementsByTagName)(d,h,g,1)).trim()}function u(d,h,g,y,x){x===void 0&&(x=!1);var m=c(g,y,x);m&&(d[h]=m)}function p(d){return d==="rss"||d==="feed"||d==="rdf:RDF"}return Gl}var Z1;function ph(){return Z1||(Z1=1,(function(t){var e=an&&an.__createBinding||(Object.create?(function(n,a,s,o){o===void 0&&(o=s);var l=Object.getOwnPropertyDescriptor(a,s);(!l||("get"in l?!a.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return a[s]}}),Object.defineProperty(n,o,l)}):(function(n,a,s,o){o===void 0&&(o=s),n[o]=a[s]})),r=an&&an.__exportStar||function(n,a){for(var s in n)s!=="default"&&!Object.prototype.hasOwnProperty.call(a,s)&&e(a,n,s)};Object.defineProperty(t,"__esModule",{value:!0}),t.hasChildren=t.isDocument=t.isComment=t.isText=t.isCDATA=t.isTag=void 0,r(x5(),t),r(qL(),t),r(jL(),t),r(_5(),t),r(k5(),t),r(GL(),t),r(VL(),t);var i=Hi();Object.defineProperty(t,"isTag",{enumerable:!0,get:function(){return i.isTag}}),Object.defineProperty(t,"isCDATA",{enumerable:!0,get:function(){return i.isCDATA}}),Object.defineProperty(t,"isText",{enumerable:!0,get:function(){return i.isText}}),Object.defineProperty(t,"isComment",{enumerable:!0,get:function(){return i.isComment}}),Object.defineProperty(t,"isDocument",{enumerable:!0,get:function(){return i.isDocument}}),Object.defineProperty(t,"hasChildren",{enumerable:!0,get:function(){return i.hasChildren}})})(an)),an}var Q1;function WL(){return Q1||(Q1=1,(function(t){var e=fr&&fr.__createBinding||(Object.create?(function(m,k,S,_){_===void 0&&(_=S);var w=Object.getOwnPropertyDescriptor(k,S);(!w||("get"in w?!k.__esModule:w.writable||w.configurable))&&(w={enumerable:!0,get:function(){return k[S]}}),Object.defineProperty(m,_,w)}):(function(m,k,S,_){_===void 0&&(_=S),m[_]=k[S]})),r=fr&&fr.__setModuleDefault||(Object.create?(function(m,k){Object.defineProperty(m,"default",{enumerable:!0,value:k})}):function(m,k){m.default=k}),i=fr&&fr.__importStar||function(m){if(m&&m.__esModule)return m;var k={};if(m!=null)for(var S in m)S!=="default"&&Object.prototype.hasOwnProperty.call(m,S)&&e(k,m,S);return r(k,m),k},n=fr&&fr.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(t,"__esModule",{value:!0}),t.DomUtils=t.parseFeed=t.getFeed=t.ElementType=t.Tokenizer=t.createDomStream=t.parseDOM=t.parseDocument=t.DefaultHandler=t.DomHandler=t.Parser=void 0;var a=$1(),s=$1();Object.defineProperty(t,"Parser",{enumerable:!0,get:function(){return s.Parser}});var o=Hi(),l=Hi();Object.defineProperty(t,"DomHandler",{enumerable:!0,get:function(){return l.DomHandler}}),Object.defineProperty(t,"DefaultHandler",{enumerable:!0,get:function(){return l.DomHandler}});function c(m,k){var S=new o.DomHandler(void 0,k);return new a.Parser(S,k).end(m),S.root}t.parseDocument=c;function u(m,k){return c(m,k).children}t.parseDOM=u;function p(m,k,S){var _=new o.DomHandler(m,k,S);return new a.Parser(_,k)}t.createDomStream=p;var d=w5();Object.defineProperty(t,"Tokenizer",{enumerable:!0,get:function(){return n(d).default}}),t.ElementType=i(tl());var h=ph(),g=ph();Object.defineProperty(t,"getFeed",{enumerable:!0,get:function(){return g.getFeed}});var y={xmlMode:!0};function x(m,k){return k===void 0&&(k=y),(0,h.getFeed)(u(m,k))}t.parseFeed=x,t.DomUtils=i(ph())})(fr)),fr}var fh,J1;function KL(){return J1||(J1=1,fh=t=>{if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}),fh}var Vl={},ev;function YL(){if(ev)return Vl;ev=1,Object.defineProperty(Vl,"__esModule",{value:!0});function t(r){return Object.prototype.toString.call(r)==="[object Object]"}function e(r){var i,n;return t(r)===!1?!1:(i=r.constructor,i===void 0?!0:(n=i.prototype,!(t(n)===!1||n.hasOwnProperty("isPrototypeOf")===!1)))}return Vl.isPlainObject=e,Vl}var gh,tv;function XL(){if(tv)return gh;tv=1;var t=function(k){return e(k)&&!r(k)};function e(m){return!!m&&typeof m=="object"}function r(m){var k=Object.prototype.toString.call(m);return k==="[object RegExp]"||k==="[object Date]"||a(m)}var i=typeof Symbol=="function"&&Symbol.for,n=i?Symbol.for("react.element"):60103;function a(m){return m.$$typeof===n}function s(m){return Array.isArray(m)?[]:{}}function o(m,k){return k.clone!==!1&&k.isMergeableObject(m)?y(s(m),m,k):m}function l(m,k,S){return m.concat(k).map(function(_){return o(_,S)})}function c(m,k){if(!k.customMerge)return y;var S=k.customMerge(m);return typeof S=="function"?S:y}function u(m){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(m).filter(function(k){return Object.propertyIsEnumerable.call(m,k)}):[]}function p(m){return Object.keys(m).concat(u(m))}function d(m,k){try{return k in m}catch{return!1}}function h(m,k){return d(m,k)&&!(Object.hasOwnProperty.call(m,k)&&Object.propertyIsEnumerable.call(m,k))}function g(m,k,S){var _={};return S.isMergeableObject(m)&&p(m).forEach(function(w){_[w]=o(m[w],S)}),p(k).forEach(function(w){h(m,w)||(d(m,w)&&S.isMergeableObject(k[w])?_[w]=c(w,S)(m[w],k[w],S):_[w]=o(k[w],S))}),_}function y(m,k,S){S=S||{},S.arrayMerge=S.arrayMerge||l,S.isMergeableObject=S.isMergeableObject||t,S.cloneUnlessOtherwiseSpecified=o;var _=Array.isArray(k),w=Array.isArray(m),A=_===w;return A?_?S.arrayMerge(m,k,S):g(m,k,S):o(k,S)}y.all=function(k,S){if(!Array.isArray(k))throw new Error("first argument should be an array");return k.reduce(function(_,w){return y(_,w,S)},{})};var x=y;return gh=x,gh}var fc={exports:{}},ZL=fc.exports,rv;function QL(){return rv||(rv=1,(function(t){(function(e,r){t.exports?t.exports=r():e.parseSrcset=r()})(ZL,function(){return function(e){function r(_){return _===" "||_==="	"||_===`
`||_==="\f"||_==="\r"}function i(_){var w,A=_.exec(e.substring(x));if(A)return w=A[0],x+=w.length,w}for(var n=e.length,a=/^[ \t\n\r\u000c]+/,s=/^[, \t\n\r\u000c]+/,o=/^[^ \t\n\r\u000c]+/,l=/[,]+$/,c=/^\d+$/,u=/^-?(?:[0-9]+|[0-9]*\.[0-9]+)(?:[eE][+-]?[0-9]+)?$/,p,d,h,g,y,x=0,m=[];;){if(i(s),x>=n)return m;p=i(o),d=[],p.slice(-1)===","?(p=p.replace(l,""),S()):k()}function k(){for(i(a),h="",g="in descriptor";;){if(y=e.charAt(x),g==="in descriptor")if(r(y))h&&(d.push(h),h="",g="after descriptor");else if(y===","){x+=1,h&&d.push(h),S();return}else if(y==="(")h=h+y,g="in parens";else if(y===""){h&&d.push(h),S();return}else h=h+y;else if(g==="in parens")if(y===")")h=h+y,g="in descriptor";else if(y===""){d.push(h),S();return}else h=h+y;else if(g==="after descriptor"&&!r(y))if(y===""){S();return}else g="in descriptor",x-=1;x+=1}}function S(){var _=!1,w,A,T,I,O={},B,E,$,R,N;for(I=0;I<d.length;I++)B=d[I],E=B[B.length-1],$=B.substring(0,B.length-1),R=parseInt($,10),N=parseFloat($),c.test($)&&E==="w"?((w||A)&&(_=!0),R===0?_=!0:w=R):u.test($)&&E==="x"?((w||A||T)&&(_=!0),N<0?_=!0:A=N):c.test($)&&E==="h"?((T||A)&&(_=!0),R===0?_=!0:T=R):_=!0;_?console&&console.log&&console.log("Invalid srcset descriptor found in '"+e+"' at '"+B+"'."):(O.url=p,w&&(O.w=w),A&&(O.d=A),T&&(O.h=T),m.push(O))}}})})(fc)),fc.exports}var Wl={exports:{}},iv;function JL(){if(iv)return Wl.exports;iv=1;var t=String,e=function(){return{isColorSupported:!1,reset:t,bold:t,dim:t,italic:t,underline:t,inverse:t,hidden:t,strikethrough:t,black:t,red:t,green:t,yellow:t,blue:t,magenta:t,cyan:t,white:t,gray:t,bgBlack:t,bgRed:t,bgGreen:t,bgYellow:t,bgBlue:t,bgMagenta:t,bgCyan:t,bgWhite:t,blackBright:t,redBright:t,greenBright:t,yellowBright:t,blueBright:t,magentaBright:t,cyanBright:t,whiteBright:t,bgBlackBright:t,bgRedBright:t,bgGreenBright:t,bgYellowBright:t,bgBlueBright:t,bgMagentaBright:t,bgCyanBright:t,bgWhiteBright:t}};return Wl.exports=e(),Wl.exports.createColors=e,Wl.exports}var mh,nv;function Bf(){if(nv)return mh;nv=1;let t=JL(),e=lr;class r extends Error{constructor(n,a,s,o,l,c){super(n),this.name="CssSyntaxError",this.reason=n,l&&(this.file=l),o&&(this.source=o),c&&(this.plugin=c),typeof a<"u"&&typeof s<"u"&&(typeof a=="number"?(this.line=a,this.column=s):(this.line=a.line,this.column=a.column,this.endLine=s.line,this.endColumn=s.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,r)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line<"u"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(n){if(!this.source)return"";let a=this.source;n==null&&(n=t.isColorSupported);let s=h=>h,o=h=>h,l=h=>h;if(n){let{bold:h,gray:g,red:y}=t.createColors(!0);o=x=>h(y(x)),s=x=>g(x),e&&(l=x=>e(x))}let c=a.split(/\r?\n/),u=Math.max(this.line-3,0),p=Math.min(this.line+2,c.length),d=String(p).length;return c.slice(u,p).map((h,g)=>{let y=u+1+g,x=" "+(" "+y).slice(-d)+" | ";if(y===this.line){if(h.length>160){let k=20,S=Math.max(0,this.column-k),_=Math.max(this.column+k,this.endColumn+k),w=h.slice(S,_),A=s(x.replace(/\d/g," "))+h.slice(0,Math.min(this.column-1,k-1)).replace(/[^\t]/g," ");return o(">")+s(x)+l(w)+`
 `+A+o("^")}let m=s(x.replace(/\d/g," "))+h.slice(0,this.column-1).replace(/[^\t]/g," ");return o(">")+s(x)+l(h)+`
 `+m+o("^")}return" "+s(x)+l(h)}).join(`
`)}toString(){let n=this.showSourceCode();return n&&(n=`

`+n+`
`),this.name+": "+this.message+n}}return mh=r,r.default=r,mh}var bh,av;function S5(){if(av)return bh;av=1;const t={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function e(i){return i[0].toUpperCase()+i.slice(1)}class r{constructor(n){this.builder=n}atrule(n,a){let s="@"+n.name,o=n.params?this.rawValue(n,"params"):"";if(typeof n.raws.afterName<"u"?s+=n.raws.afterName:o&&(s+=" "),n.nodes)this.block(n,s+o);else{let l=(n.raws.between||"")+(a?";":"");this.builder(s+o+l,n)}}beforeAfter(n,a){let s;n.type==="decl"?s=this.raw(n,null,"beforeDecl"):n.type==="comment"?s=this.raw(n,null,"beforeComment"):a==="before"?s=this.raw(n,null,"beforeRule"):s=this.raw(n,null,"beforeClose");let o=n.parent,l=0;for(;o&&o.type!=="root";)l+=1,o=o.parent;if(s.includes(`
`)){let c=this.raw(n,null,"indent");if(c.length)for(let u=0;u<l;u++)s+=c}return s}block(n,a){let s=this.raw(n,"between","beforeOpen");this.builder(a+s+"{",n,"start");let o;n.nodes&&n.nodes.length?(this.body(n),o=this.raw(n,"after")):o=this.raw(n,"after","emptyBody"),o&&this.builder(o),this.builder("}",n,"end")}body(n){let a=n.nodes.length-1;for(;a>0&&n.nodes[a].type==="comment";)a-=1;let s=this.raw(n,"semicolon");for(let o=0;o<n.nodes.length;o++){let l=n.nodes[o],c=this.raw(l,"before");c&&this.builder(c),this.stringify(l,a!==o||s)}}comment(n){let a=this.raw(n,"left","commentLeft"),s=this.raw(n,"right","commentRight");this.builder("/*"+a+n.text+s+"*/",n)}decl(n,a){let s=this.raw(n,"between","colon"),o=n.prop+s+this.rawValue(n,"value");n.important&&(o+=n.raws.important||" !important"),a&&(o+=";"),this.builder(o,n)}document(n){this.body(n)}raw(n,a,s){let o;if(s||(s=a),a&&(o=n.raws[a],typeof o<"u"))return o;let l=n.parent;if(s==="before"&&(!l||l.type==="root"&&l.first===n||l&&l.type==="document"))return"";if(!l)return t[s];let c=n.root();if(c.rawCache||(c.rawCache={}),typeof c.rawCache[s]<"u")return c.rawCache[s];if(s==="before"||s==="after")return this.beforeAfter(n,s);{let u="raw"+e(s);this[u]?o=this[u](c,n):c.walk(p=>{if(o=p.raws[a],typeof o<"u")return!1})}return typeof o>"u"&&(o=t[s]),c.rawCache[s]=o,o}rawBeforeClose(n){let a;return n.walk(s=>{if(s.nodes&&s.nodes.length>0&&typeof s.raws.after<"u")return a=s.raws.after,a.includes(`
`)&&(a=a.replace(/[^\n]+$/,"")),!1}),a&&(a=a.replace(/\S/g,"")),a}rawBeforeComment(n,a){let s;return n.walkComments(o=>{if(typeof o.raws.before<"u")return s=o.raws.before,s.includes(`
`)&&(s=s.replace(/[^\n]+$/,"")),!1}),typeof s>"u"?s=this.raw(a,null,"beforeDecl"):s&&(s=s.replace(/\S/g,"")),s}rawBeforeDecl(n,a){let s;return n.walkDecls(o=>{if(typeof o.raws.before<"u")return s=o.raws.before,s.includes(`
`)&&(s=s.replace(/[^\n]+$/,"")),!1}),typeof s>"u"?s=this.raw(a,null,"beforeRule"):s&&(s=s.replace(/\S/g,"")),s}rawBeforeOpen(n){let a;return n.walk(s=>{if(s.type!=="decl"&&(a=s.raws.between,typeof a<"u"))return!1}),a}rawBeforeRule(n){let a;return n.walk(s=>{if(s.nodes&&(s.parent!==n||n.first!==s)&&typeof s.raws.before<"u")return a=s.raws.before,a.includes(`
`)&&(a=a.replace(/[^\n]+$/,"")),!1}),a&&(a=a.replace(/\S/g,"")),a}rawColon(n){let a;return n.walkDecls(s=>{if(typeof s.raws.between<"u")return a=s.raws.between.replace(/[^\s:]/g,""),!1}),a}rawEmptyBody(n){let a;return n.walk(s=>{if(s.nodes&&s.nodes.length===0&&(a=s.raws.after,typeof a<"u"))return!1}),a}rawIndent(n){if(n.raws.indent)return n.raws.indent;let a;return n.walk(s=>{let o=s.parent;if(o&&o!==n&&o.parent&&o.parent===n&&typeof s.raws.before<"u"){let l=s.raws.before.split(`
`);return a=l[l.length-1],a=a.replace(/\S/g,""),!1}}),a}rawSemicolon(n){let a;return n.walk(s=>{if(s.nodes&&s.nodes.length&&s.last.type==="decl"&&(a=s.raws.semicolon,typeof a<"u"))return!1}),a}rawValue(n,a){let s=n[a],o=n.raws[a];return o&&o.value===s?o.raw:s}root(n){this.body(n),n.raws.after&&this.builder(n.raws.after)}rule(n){this.block(n,this.rawValue(n,"selector")),n.raws.ownSemicolon&&this.builder(n.raws.ownSemicolon,n,"end")}stringify(n,a){if(!this[n.type])throw new Error("Unknown AST node type "+n.type+". Maybe you need to change PostCSS stringifier.");this[n.type](n,a)}}return bh=r,r.default=r,bh}var vh,sv;function Hu(){if(sv)return vh;sv=1;let t=S5();function e(r,i){new t(i).stringify(r)}return vh=e,e.default=e,vh}var Kl={},ov;function Nf(){return ov||(ov=1,Kl.isClean=Symbol("isClean"),Kl.my=Symbol("my")),Kl}var yh,lv;function Fu(){if(lv)return yh;lv=1;let t=Bf(),e=S5(),r=Hu(),{isClean:i,my:n}=Nf();function a(l,c){let u=new l.constructor;for(let p in l){if(!Object.prototype.hasOwnProperty.call(l,p)||p==="proxyCache")continue;let d=l[p],h=typeof d;p==="parent"&&h==="object"?c&&(u[p]=c):p==="source"?u[p]=d:Array.isArray(d)?u[p]=d.map(g=>a(g,u)):(h==="object"&&d!==null&&(d=a(d)),u[p]=d)}return u}function s(l,c){if(c&&typeof c.offset<"u")return c.offset;let u=1,p=1,d=0;for(let h=0;h<l.length;h++){if(p===c.line&&u===c.column){d=h;break}l[h]===`
`?(u=1,p+=1):u+=1}return d}class o{get proxyOf(){return this}constructor(c={}){this.raws={},this[i]=!1,this[n]=!0;for(let u in c)if(u==="nodes"){this.nodes=[];for(let p of c[u])typeof p.clone=="function"?this.append(p.clone()):this.append(p)}else this[u]=c[u]}addToError(c){if(c.postcssNode=this,c.stack&&this.source&&/\n\s{4}at /.test(c.stack)){let u=this.source;c.stack=c.stack.replace(/\n\s{4}at /,`$&${u.input.from}:${u.start.line}:${u.start.column}$&`)}return c}after(c){return this.parent.insertAfter(this,c),this}assign(c={}){for(let u in c)this[u]=c[u];return this}before(c){return this.parent.insertBefore(this,c),this}cleanRaws(c){delete this.raws.before,delete this.raws.after,c||delete this.raws.between}clone(c={}){let u=a(this);for(let p in c)u[p]=c[p];return u}cloneAfter(c={}){let u=this.clone(c);return this.parent.insertAfter(this,u),u}cloneBefore(c={}){let u=this.clone(c);return this.parent.insertBefore(this,u),u}error(c,u={}){if(this.source){let{end:p,start:d}=this.rangeBy(u);return this.source.input.error(c,{column:d.column,line:d.line},{column:p.column,line:p.line},u)}return new t(c)}getProxyProcessor(){return{get(c,u){return u==="proxyOf"?c:u==="root"?()=>c.root().toProxy():c[u]},set(c,u,p){return c[u]===p||(c[u]=p,(u==="prop"||u==="value"||u==="name"||u==="params"||u==="important"||u==="text")&&c.markDirty()),!0}}}markClean(){this[i]=!0}markDirty(){if(this[i]){this[i]=!1;let c=this;for(;c=c.parent;)c[i]=!1}}next(){if(!this.parent)return;let c=this.parent.index(this);return this.parent.nodes[c+1]}positionBy(c={}){let u=this.source.start;if(c.index)u=this.positionInside(c.index);else if(c.word){let p="document"in this.source.input?this.source.input.document:this.source.input.css,h=p.slice(s(p,this.source.start),s(p,this.source.end)).indexOf(c.word);h!==-1&&(u=this.positionInside(h))}return u}positionInside(c){let u=this.source.start.column,p=this.source.start.line,d="document"in this.source.input?this.source.input.document:this.source.input.css,h=s(d,this.source.start),g=h+c;for(let y=h;y<g;y++)d[y]===`
`?(u=1,p+=1):u+=1;return{column:u,line:p,offset:g}}prev(){if(!this.parent)return;let c=this.parent.index(this);return this.parent.nodes[c-1]}rangeBy(c={}){let u="document"in this.source.input?this.source.input.document:this.source.input.css,p={column:this.source.start.column,line:this.source.start.line,offset:s(u,this.source.start)},d=this.source.end?{column:this.source.end.column+1,line:this.source.end.line,offset:typeof this.source.end.offset=="number"?this.source.end.offset:s(u,this.source.end)+1}:{column:p.column+1,line:p.line,offset:p.offset+1};if(c.word){let g=u.slice(s(u,this.source.start),s(u,this.source.end)).indexOf(c.word);g!==-1&&(p=this.positionInside(g),d=this.positionInside(g+c.word.length))}else c.start?p={column:c.start.column,line:c.start.line,offset:s(u,c.start)}:c.index&&(p=this.positionInside(c.index)),c.end?d={column:c.end.column,line:c.end.line,offset:s(u,c.end)}:typeof c.endIndex=="number"?d=this.positionInside(c.endIndex):c.index&&(d=this.positionInside(c.index+1));return(d.line<p.line||d.line===p.line&&d.column<=p.column)&&(d={column:p.column+1,line:p.line,offset:p.offset+1}),{end:d,start:p}}raw(c,u){return new e().raw(this,c,u)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...c){if(this.parent){let u=this,p=!1;for(let d of c)d===this?p=!0:p?(this.parent.insertAfter(u,d),u=d):this.parent.insertBefore(u,d);p||this.remove()}return this}root(){let c=this;for(;c.parent&&c.parent.type!=="document";)c=c.parent;return c}toJSON(c,u){let p={},d=u==null;u=u||new Map;let h=0;for(let g in this){if(!Object.prototype.hasOwnProperty.call(this,g)||g==="parent"||g==="proxyCache")continue;let y=this[g];if(Array.isArray(y))p[g]=y.map(x=>typeof x=="object"&&x.toJSON?x.toJSON(null,u):x);else if(typeof y=="object"&&y.toJSON)p[g]=y.toJSON(null,u);else if(g==="source"){if(y==null)continue;let x=u.get(y.input);x==null&&(x=h,u.set(y.input,h),h++),p[g]={end:y.end,inputId:x,start:y.start}}else p[g]=y}return d&&(p.inputs=[...u.keys()].map(g=>g.toJSON())),p}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(c=r){c.stringify&&(c=c.stringify);let u="";return c(this,p=>{u+=p}),u}warn(c,u,p={}){let d={node:this};for(let h in p)d[h]=p[h];return c.warn(u,d)}}return yh=o,o.default=o,yh}var wh,cv;function qu(){if(cv)return wh;cv=1;let t=Fu();class e extends t{constructor(i){super(i),this.type="comment"}}return wh=e,e.default=e,wh}var xh,uv;function ju(){if(uv)return xh;uv=1;let t=Fu();class e extends t{get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}constructor(i){i&&typeof i.value<"u"&&typeof i.value!="string"&&(i={...i,value:String(i.value)}),super(i),this.type="decl"}}return xh=e,e.default=e,xh}var _h,dv;function Zn(){if(dv)return _h;dv=1;let t=qu(),e=ju(),r=Fu(),{isClean:i,my:n}=Nf(),a,s,o,l;function c(d){return d.map(h=>(h.nodes&&(h.nodes=c(h.nodes)),delete h.source,h))}function u(d){if(d[i]=!1,d.proxyOf.nodes)for(let h of d.proxyOf.nodes)u(h)}class p extends r{get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}append(...h){for(let g of h){let y=this.normalize(g,this.last);for(let x of y)this.proxyOf.nodes.push(x)}return this.markDirty(),this}cleanRaws(h){if(super.cleanRaws(h),this.nodes)for(let g of this.nodes)g.cleanRaws(h)}each(h){if(!this.proxyOf.nodes)return;let g=this.getIterator(),y,x;for(;this.indexes[g]<this.proxyOf.nodes.length&&(y=this.indexes[g],x=h(this.proxyOf.nodes[y],y),x!==!1);)this.indexes[g]+=1;return delete this.indexes[g],x}every(h){return this.nodes.every(h)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let h=this.lastEach;return this.indexes[h]=0,h}getProxyProcessor(){return{get(h,g){return g==="proxyOf"?h:h[g]?g==="each"||typeof g=="string"&&g.startsWith("walk")?(...y)=>h[g](...y.map(x=>typeof x=="function"?(m,k)=>x(m.toProxy(),k):x)):g==="every"||g==="some"?y=>h[g]((x,...m)=>y(x.toProxy(),...m)):g==="root"?()=>h.root().toProxy():g==="nodes"?h.nodes.map(y=>y.toProxy()):g==="first"||g==="last"?h[g].toProxy():h[g]:h[g]},set(h,g,y){return h[g]===y||(h[g]=y,(g==="name"||g==="params"||g==="selector")&&h.markDirty()),!0}}}index(h){return typeof h=="number"?h:(h.proxyOf&&(h=h.proxyOf),this.proxyOf.nodes.indexOf(h))}insertAfter(h,g){let y=this.index(h),x=this.normalize(g,this.proxyOf.nodes[y]).reverse();y=this.index(h);for(let k of x)this.proxyOf.nodes.splice(y+1,0,k);let m;for(let k in this.indexes)m=this.indexes[k],y<m&&(this.indexes[k]=m+x.length);return this.markDirty(),this}insertBefore(h,g){let y=this.index(h),x=y===0?"prepend":!1,m=this.normalize(g,this.proxyOf.nodes[y],x).reverse();y=this.index(h);for(let S of m)this.proxyOf.nodes.splice(y,0,S);let k;for(let S in this.indexes)k=this.indexes[S],y<=k&&(this.indexes[S]=k+m.length);return this.markDirty(),this}normalize(h,g){if(typeof h=="string")h=c(s(h).nodes);else if(typeof h>"u")h=[];else if(Array.isArray(h)){h=h.slice(0);for(let x of h)x.parent&&x.parent.removeChild(x,"ignore")}else if(h.type==="root"&&this.type!=="document"){h=h.nodes.slice(0);for(let x of h)x.parent&&x.parent.removeChild(x,"ignore")}else if(h.type)h=[h];else if(h.prop){if(typeof h.value>"u")throw new Error("Value field is missed in node creation");typeof h.value!="string"&&(h.value=String(h.value)),h=[new e(h)]}else if(h.selector||h.selectors)h=[new l(h)];else if(h.name)h=[new a(h)];else if(h.text)h=[new t(h)];else throw new Error("Unknown node type in node creation");return h.map(x=>(x[n]||p.rebuild(x),x=x.proxyOf,x.parent&&x.parent.removeChild(x),x[i]&&u(x),x.raws||(x.raws={}),typeof x.raws.before>"u"&&g&&typeof g.raws.before<"u"&&(x.raws.before=g.raws.before.replace(/\S/g,"")),x.parent=this.proxyOf,x))}prepend(...h){h=h.reverse();for(let g of h){let y=this.normalize(g,this.first,"prepend").reverse();for(let x of y)this.proxyOf.nodes.unshift(x);for(let x in this.indexes)this.indexes[x]=this.indexes[x]+y.length}return this.markDirty(),this}push(h){return h.parent=this,this.proxyOf.nodes.push(h),this}removeAll(){for(let h of this.proxyOf.nodes)h.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(h){h=this.index(h),this.proxyOf.nodes[h].parent=void 0,this.proxyOf.nodes.splice(h,1);let g;for(let y in this.indexes)g=this.indexes[y],g>=h&&(this.indexes[y]=g-1);return this.markDirty(),this}replaceValues(h,g,y){return y||(y=g,g={}),this.walkDecls(x=>{g.props&&!g.props.includes(x.prop)||g.fast&&!x.value.includes(g.fast)||(x.value=x.value.replace(h,y))}),this.markDirty(),this}some(h){return this.nodes.some(h)}walk(h){return this.each((g,y)=>{let x;try{x=h(g,y)}catch(m){throw g.addToError(m)}return x!==!1&&g.walk&&(x=g.walk(h)),x})}walkAtRules(h,g){return g?h instanceof RegExp?this.walk((y,x)=>{if(y.type==="atrule"&&h.test(y.name))return g(y,x)}):this.walk((y,x)=>{if(y.type==="atrule"&&y.name===h)return g(y,x)}):(g=h,this.walk((y,x)=>{if(y.type==="atrule")return g(y,x)}))}walkComments(h){return this.walk((g,y)=>{if(g.type==="comment")return h(g,y)})}walkDecls(h,g){return g?h instanceof RegExp?this.walk((y,x)=>{if(y.type==="decl"&&h.test(y.prop))return g(y,x)}):this.walk((y,x)=>{if(y.type==="decl"&&y.prop===h)return g(y,x)}):(g=h,this.walk((y,x)=>{if(y.type==="decl")return g(y,x)}))}walkRules(h,g){return g?h instanceof RegExp?this.walk((y,x)=>{if(y.type==="rule"&&h.test(y.selector))return g(y,x)}):this.walk((y,x)=>{if(y.type==="rule"&&y.selector===h)return g(y,x)}):(g=h,this.walk((y,x)=>{if(y.type==="rule")return g(y,x)}))}}return p.registerParse=d=>{s=d},p.registerRule=d=>{l=d},p.registerAtRule=d=>{a=d},p.registerRoot=d=>{o=d},_h=p,p.default=p,p.rebuild=d=>{d.type==="atrule"?Object.setPrototypeOf(d,a.prototype):d.type==="rule"?Object.setPrototypeOf(d,l.prototype):d.type==="decl"?Object.setPrototypeOf(d,e.prototype):d.type==="comment"?Object.setPrototypeOf(d,t.prototype):d.type==="root"&&Object.setPrototypeOf(d,o.prototype),d[n]=!0,d.nodes&&d.nodes.forEach(h=>{p.rebuild(h)})},_h}var kh,hv;function Uf(){if(hv)return kh;hv=1;let t=Zn();class e extends t{constructor(i){super(i),this.type="atrule"}append(...i){return this.proxyOf.nodes||(this.nodes=[]),super.append(...i)}prepend(...i){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...i)}}return kh=e,e.default=e,t.registerAtRule(e),kh}var Sh,pv;function zf(){if(pv)return Sh;pv=1;let t=Zn(),e,r;class i extends t{constructor(a){super({type:"document",...a}),this.nodes||(this.nodes=[])}toResult(a={}){return new e(new r,this,a).stringify()}}return i.registerLazyResult=n=>{e=n},i.registerProcessor=n=>{r=n},Sh=i,i.default=i,Sh}var Ah,fv;function eO(){if(fv)return Ah;fv=1;let t="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";return Ah={nanoid:(i=21)=>{let n="",a=i|0;for(;a--;)n+=t[Math.random()*64|0];return n},customAlphabet:(i,n=21)=>(a=n)=>{let s="",o=a|0;for(;o--;)s+=i[Math.random()*i.length|0];return s}},Ah}var Ch,gv;function A5(){if(gv)return Ch;gv=1;let{existsSync:t,readFileSync:e}=lr,{dirname:r,join:i}=lr,{SourceMapConsumer:n,SourceMapGenerator:a}=lr;function s(l){return Buffer?Buffer.from(l,"base64").toString():window.atob(l)}class o{constructor(c,u){if(u.map===!1)return;this.loadAnnotation(c),this.inline=this.startWith(this.annotation,"data:");let p=u.map?u.map.prev:void 0,d=this.loadMap(u.from,p);!this.mapFile&&u.from&&(this.mapFile=u.from),this.mapFile&&(this.root=r(this.mapFile)),d&&(this.text=d)}consumer(){return this.consumerCache||(this.consumerCache=new n(this.text)),this.consumerCache}decodeInline(c){let u=/^data:application\/json;charset=utf-?8;base64,/,p=/^data:application\/json;base64,/,d=/^data:application\/json;charset=utf-?8,/,h=/^data:application\/json,/,g=c.match(d)||c.match(h);if(g)return decodeURIComponent(c.substr(g[0].length));let y=c.match(u)||c.match(p);if(y)return s(c.substr(y[0].length));let x=c.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+x)}getAnnotationURL(c){return c.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(c){return typeof c!="object"?!1:typeof c.mappings=="string"||typeof c._mappings=="string"||Array.isArray(c.sections)}loadAnnotation(c){let u=c.match(/\/\*\s*# sourceMappingURL=/g);if(!u)return;let p=c.lastIndexOf(u.pop()),d=c.indexOf("*/",p);p>-1&&d>-1&&(this.annotation=this.getAnnotationURL(c.substring(p,d)))}loadFile(c){if(this.root=r(c),t(c))return this.mapFile=c,e(c,"utf-8").toString().trim()}loadMap(c,u){if(u===!1)return!1;if(u){if(typeof u=="string")return u;if(typeof u=="function"){let p=u(c);if(p){let d=this.loadFile(p);if(!d)throw new Error("Unable to load previous source map: "+p.toString());return d}}else{if(u instanceof n)return a.fromSourceMap(u).toString();if(u instanceof a)return u.toString();if(this.isMap(u))return JSON.stringify(u);throw new Error("Unsupported previous source map format: "+u.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let p=this.annotation;return c&&(p=i(r(c),p)),this.loadFile(p)}}}startWith(c,u){return c?c.substr(0,u.length)===u:!1}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}}return Ch=o,o.default=o,Ch}var Th,mv;function Gu(){if(mv)return Th;mv=1;let{nanoid:t}=eO(),{isAbsolute:e,resolve:r}=lr,{SourceMapConsumer:i,SourceMapGenerator:n}=lr,{fileURLToPath:a,pathToFileURL:s}=lr,o=Bf(),l=A5(),c=lr,u=Symbol("lineToIndexCache"),p=!!(i&&n),d=!!(r&&e);function h(y){if(y[u])return y[u];let x=y.css.split(`
`),m=new Array(x.length),k=0;for(let S=0,_=x.length;S<_;S++)m[S]=k,k+=x[S].length+1;return y[u]=m,m}class g{get from(){return this.file||this.id}constructor(x,m={}){if(x===null||typeof x>"u"||typeof x=="object"&&!x.toString)throw new Error(`PostCSS received ${x} instead of CSS string`);if(this.css=x.toString(),this.css[0]==="\uFEFF"||this.css[0]==="￾"?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,this.document=this.css,m.document&&(this.document=m.document.toString()),m.from&&(!d||/^\w+:\/\//.test(m.from)||e(m.from)?this.file=m.from:this.file=r(m.from)),d&&p){let k=new l(this.css,m);if(k.text){this.map=k;let S=k.consumer().file;!this.file&&S&&(this.file=this.mapResolve(S))}}this.file||(this.id="<input css "+t(6)+">"),this.map&&(this.map.file=this.from)}error(x,m,k,S={}){let _,w,A,T,I;if(m&&typeof m=="object"){let B=m,E=k;if(typeof B.offset=="number"){T=B.offset;let $=this.fromOffset(T);m=$.line,k=$.col}else m=B.line,k=B.column,T=this.fromLineAndColumn(m,k);if(typeof E.offset=="number"){A=E.offset;let $=this.fromOffset(A);w=$.line,_=$.col}else w=E.line,_=E.column,A=this.fromLineAndColumn(E.line,E.column)}else if(k)T=this.fromLineAndColumn(m,k);else{T=m;let B=this.fromOffset(T);m=B.line,k=B.col}let O=this.origin(m,k,w,_);return O?I=new o(x,O.endLine===void 0?O.line:{column:O.column,line:O.line},O.endLine===void 0?O.column:{column:O.endColumn,line:O.endLine},O.source,O.file,S.plugin):I=new o(x,w===void 0?m:{column:k,line:m},w===void 0?k:{column:_,line:w},this.css,this.file,S.plugin),I.input={column:k,endColumn:_,endLine:w,endOffset:A,line:m,offset:T,source:this.css},this.file&&(s&&(I.input.url=s(this.file).toString()),I.input.file=this.file),I}fromLineAndColumn(x,m){return h(this)[x-1]+m-1}fromOffset(x){let m=h(this),k=m[m.length-1],S=0;if(x>=k)S=m.length-1;else{let _=m.length-2,w;for(;S<_;)if(w=S+(_-S>>1),x<m[w])_=w-1;else if(x>=m[w+1])S=w+1;else{S=w;break}}return{col:x-m[S]+1,line:S+1}}mapResolve(x){return/^\w+:\/\//.test(x)?x:r(this.map.consumer().sourceRoot||this.map.root||".",x)}origin(x,m,k,S){if(!this.map)return!1;let _=this.map.consumer(),w=_.originalPositionFor({column:m,line:x});if(!w.source)return!1;let A;typeof k=="number"&&(A=_.originalPositionFor({column:S,line:k}));let T;e(w.source)?T=s(w.source):T=new URL(w.source,this.map.consumer().sourceRoot||s(this.map.mapFile));let I={column:w.column,endColumn:A&&A.column,endLine:A&&A.line,line:w.line,url:T.toString()};if(T.protocol==="file:")if(a)I.file=a(T);else throw new Error("file: protocol is not available in this PostCSS build");let O=_.sourceContentFor(w.source);return O&&(I.source=O),I}toJSON(){let x={};for(let m of["hasBOM","css","file","id"])this[m]!=null&&(x[m]=this[m]);return this.map&&(x.map={...this.map},x.map.consumerCache&&(x.map.consumerCache=void 0)),x}}return Th=g,g.default=g,c&&c.registerInput&&c.registerInput(g),Th}var Eh,bv;function rl(){if(bv)return Eh;bv=1;let t=Zn(),e,r;class i extends t{constructor(a){super(a),this.type="root",this.nodes||(this.nodes=[])}normalize(a,s,o){let l=super.normalize(a);if(s){if(o==="prepend")this.nodes.length>1?s.raws.before=this.nodes[1].raws.before:delete s.raws.before;else if(this.first!==s)for(let c of l)c.raws.before=s.raws.before}return l}removeChild(a,s){let o=this.index(a);return!s&&o===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[o].raws.before),super.removeChild(a)}toResult(a={}){return new e(new r,this,a).stringify()}}return i.registerLazyResult=n=>{e=n},i.registerProcessor=n=>{r=n},Eh=i,i.default=i,t.registerRoot(i),Eh}var Mh,vv;function C5(){if(vv)return Mh;vv=1;let t={comma(e){return t.split(e,[","],!0)},space(e){let r=[" ",`
`,"	"];return t.split(e,r)},split(e,r,i){let n=[],a="",s=!1,o=0,l=!1,c="",u=!1;for(let p of e)u?u=!1:p==="\\"?u=!0:l?p===c&&(l=!1):p==='"'||p==="'"?(l=!0,c=p):p==="("?o+=1:p===")"?o>0&&(o-=1):o===0&&r.includes(p)&&(s=!0),s?(a!==""&&n.push(a.trim()),a="",s=!1):a+=p;return(i||a!=="")&&n.push(a.trim()),n}};return Mh=t,t.default=t,Mh}var Ih,yv;function Hf(){if(yv)return Ih;yv=1;let t=Zn(),e=C5();class r extends t{get selectors(){return e.comma(this.selector)}set selectors(n){let a=this.selector?this.selector.match(/,\s*/):null,s=a?a[0]:","+this.raw("between","beforeOpen");this.selector=n.join(s)}constructor(n){super(n),this.type="rule",this.nodes||(this.nodes=[])}}return Ih=r,r.default=r,t.registerRule(r),Ih}var Ph,wv;function tO(){if(wv)return Ph;wv=1;let t=Uf(),e=qu(),r=ju(),i=Gu(),n=A5(),a=rl(),s=Hf();function o(l,c){if(Array.isArray(l))return l.map(d=>o(d));let{inputs:u,...p}=l;if(u){c=[];for(let d of u){let h={...d,__proto__:i.prototype};h.map&&(h.map={...h.map,__proto__:n.prototype}),c.push(h)}}if(p.nodes&&(p.nodes=l.nodes.map(d=>o(d,c))),p.source){let{inputId:d,...h}=p.source;p.source=h,d!=null&&(p.source.input=c[d])}if(p.type==="root")return new a(p);if(p.type==="decl")return new r(p);if(p.type==="rule")return new s(p);if(p.type==="comment")return new e(p);if(p.type==="atrule")return new t(p);throw new Error("Unknown node type: "+l.type)}return Ph=o,o.default=o,Ph}var $h,xv;function T5(){if(xv)return $h;xv=1;let{dirname:t,relative:e,resolve:r,sep:i}=lr,{SourceMapConsumer:n,SourceMapGenerator:a}=lr,{pathToFileURL:s}=lr,o=Gu(),l=!!(n&&a),c=!!(t&&r&&e&&i);class u{constructor(d,h,g,y){this.stringify=d,this.mapOpts=g.map||{},this.root=h,this.opts=g,this.css=y,this.originalCSS=y,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let d;this.isInline()?d="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?d=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?d=this.mapOpts.annotation(this.opts.to,this.root):d=this.outputFile()+".map";let h=`
`;this.css.includes(`\r
`)&&(h=`\r
`),this.css+=h+"/*# sourceMappingURL="+d+" */"}applyPrevMaps(){for(let d of this.previous()){let h=this.toUrl(this.path(d.file)),g=d.root||t(d.file),y;this.mapOpts.sourcesContent===!1?(y=new n(d.text),y.sourcesContent&&(y.sourcesContent=null)):y=d.consumer(),this.map.applySourceMap(y,h,this.toUrl(this.path(g)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let d;for(let h=this.root.nodes.length-1;h>=0;h--)d=this.root.nodes[h],d.type==="comment"&&d.text.startsWith("# sourceMappingURL=")&&this.root.removeChild(h)}else this.css&&(this.css=this.css.replace(/\n*\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),c&&l&&this.isMap())return this.generateMap();{let d="";return this.stringify(this.root,h=>{d+=h}),[d]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let d=this.previous()[0].consumer();d.file=this.outputFile(),this.map=a.fromSourceMap(d,{ignoreInvalidMapping:!0})}else this.map=new a({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new a({file:this.outputFile(),ignoreInvalidMapping:!0});let d=1,h=1,g="<no source>",y={generated:{column:0,line:0},original:{column:0,line:0},source:""},x,m;this.stringify(this.root,(k,S,_)=>{if(this.css+=k,S&&_!=="end"&&(y.generated.line=d,y.generated.column=h-1,S.source&&S.source.start?(y.source=this.sourcePath(S),y.original.line=S.source.start.line,y.original.column=S.source.start.column-1,this.map.addMapping(y)):(y.source=g,y.original.line=1,y.original.column=0,this.map.addMapping(y))),m=k.match(/\n/g),m?(d+=m.length,x=k.lastIndexOf(`
`),h=k.length-x):h+=k.length,S&&_!=="start"){let w=S.parent||{raws:{}};(!(S.type==="decl"||S.type==="atrule"&&!S.nodes)||S!==w.last||w.raws.semicolon)&&(S.source&&S.source.end?(y.source=this.sourcePath(S),y.original.line=S.source.end.line,y.original.column=S.source.end.column-1,y.generated.line=d,y.generated.column=h-2,this.map.addMapping(y)):(y.source=g,y.original.line=1,y.original.column=0,y.generated.line=d,y.generated.column=h-1,this.map.addMapping(y)))}})}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation<"u"?this.mapOpts.annotation:this.previous().length?this.previous().some(d=>d.annotation):!0}isInline(){if(typeof this.mapOpts.inline<"u")return this.mapOpts.inline;let d=this.mapOpts.annotation;return typeof d<"u"&&d!==!0?!1:this.previous().length?this.previous().some(h=>h.inline):!0}isMap(){return typeof this.opts.map<"u"?!!this.opts.map:this.previous().length>0}isSourcesContent(){return typeof this.mapOpts.sourcesContent<"u"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(d=>d.withContent()):!0}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(d){if(this.mapOpts.absolute||d.charCodeAt(0)===60||/^\w+:\/\//.test(d))return d;let h=this.memoizedPaths.get(d);if(h)return h;let g=this.opts.to?t(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(g=t(r(g,this.mapOpts.annotation)));let y=e(g,d);return this.memoizedPaths.set(d,y),y}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(d=>{if(d.source&&d.source.input.map){let h=d.source.input.map;this.previousMaps.includes(h)||this.previousMaps.push(h)}});else{let d=new o(this.originalCSS,this.opts);d.map&&this.previousMaps.push(d.map)}return this.previousMaps}setSourcesContent(){let d={};if(this.root)this.root.walk(h=>{if(h.source){let g=h.source.input.from;if(g&&!d[g]){d[g]=!0;let y=this.usesFileUrls?this.toFileUrl(g):this.toUrl(this.path(g));this.map.setSourceContent(y,h.source.input.css)}}});else if(this.css){let h=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(h,this.css)}}sourcePath(d){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(d.source.input.from):this.toUrl(this.path(d.source.input.from))}toBase64(d){return Buffer?Buffer.from(d).toString("base64"):window.btoa(unescape(encodeURIComponent(d)))}toFileUrl(d){let h=this.memoizedFileURLs.get(d);if(h)return h;if(s){let g=s(d).toString();return this.memoizedFileURLs.set(d,g),g}else throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(d){let h=this.memoizedURLs.get(d);if(h)return h;i==="\\"&&(d=d.replace(/\\/g,"/"));let g=encodeURI(d).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(d,g),g}}return $h=u,$h}var Rh,_v;function rO(){if(_v)return Rh;_v=1;const t=39,e=34,r=92,i=47,n=10,a=32,s=12,o=9,l=13,c=91,u=93,p=40,d=41,h=123,g=125,y=59,x=42,m=58,k=64,S=/[\t\n\f\r "#'()/;[\\\]{}]/g,_=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,w=/.[\r\n"'(/\\]/,A=/[\da-f]/i;return Rh=function(I,O={}){let B=I.css.valueOf(),E=O.ignoreErrors,$,R,N,D,j,ee,oe,we,me,fe,ut=B.length,W=0,Ye=[],le=[];function Rt(){return W}function Kt(U){throw I.error("Unclosed "+U,W)}function Pr(){return le.length===0&&W>=ut}function pr(U){if(le.length)return le.pop();if(W>=ut)return;let G=U?U.ignoreUnclosed:!1;switch($=B.charCodeAt(W),$){case n:case a:case o:case l:case s:{D=W;do D+=1,$=B.charCodeAt(D);while($===a||$===n||$===o||$===l||$===s);ee=["space",B.slice(W,D)],W=D-1;break}case c:case u:case h:case g:case m:case y:case d:{let z=String.fromCharCode($);ee=[z,z,W];break}case p:{if(fe=Ye.length?Ye.pop()[1]:"",me=B.charCodeAt(W+1),fe==="url"&&me!==t&&me!==e&&me!==a&&me!==n&&me!==o&&me!==s&&me!==l){D=W;do{if(oe=!1,D=B.indexOf(")",D+1),D===-1)if(E||G){D=W;break}else Kt("bracket");for(we=D;B.charCodeAt(we-1)===r;)we-=1,oe=!oe}while(oe);ee=["brackets",B.slice(W,D+1),W,D],W=D}else D=B.indexOf(")",W+1),R=B.slice(W,D+1),D===-1||w.test(R)?ee=["(","(",W]:(ee=["brackets",R,W,D],W=D);break}case t:case e:{j=$===t?"'":'"',D=W;do{if(oe=!1,D=B.indexOf(j,D+1),D===-1)if(E||G){D=W+1;break}else Kt("string");for(we=D;B.charCodeAt(we-1)===r;)we-=1,oe=!oe}while(oe);ee=["string",B.slice(W,D+1),W,D],W=D;break}case k:{S.lastIndex=W+1,S.test(B),S.lastIndex===0?D=B.length-1:D=S.lastIndex-2,ee=["at-word",B.slice(W,D+1),W,D],W=D;break}case r:{for(D=W,N=!0;B.charCodeAt(D+1)===r;)D+=1,N=!N;if($=B.charCodeAt(D+1),N&&$!==i&&$!==a&&$!==n&&$!==o&&$!==l&&$!==s&&(D+=1,A.test(B.charAt(D)))){for(;A.test(B.charAt(D+1));)D+=1;B.charCodeAt(D+1)===a&&(D+=1)}ee=["word",B.slice(W,D+1),W,D],W=D;break}default:{$===i&&B.charCodeAt(W+1)===x?(D=B.indexOf("*/",W+2)+1,D===0&&(E||G?D=B.length:Kt("comment")),ee=["comment",B.slice(W,D+1),W,D],W=D):(_.lastIndex=W+1,_.test(B),_.lastIndex===0?D=B.length-1:D=_.lastIndex-2,ee=["word",B.slice(W,D+1),W,D],Ye.push(ee),W=D);break}}return W++,ee}function $r(U){le.push(U)}return{back:$r,endOfFile:Pr,nextToken:pr,position:Rt}},Rh}var Dh,kv;function iO(){if(kv)return Dh;kv=1;let t=Uf(),e=qu(),r=ju(),i=rl(),n=Hf(),a=rO();const s={empty:!0,space:!0};function o(c){for(let u=c.length-1;u>=0;u--){let p=c[u],d=p[3]||p[2];if(d)return d}}class l{constructor(u){this.input=u,this.root=new i,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:u,start:{column:1,line:1,offset:0}}}atrule(u){let p=new t;p.name=u[1].slice(1),p.name===""&&this.unnamedAtrule(p,u),this.init(p,u[2]);let d,h,g,y=!1,x=!1,m=[],k=[];for(;!this.tokenizer.endOfFile();){if(u=this.tokenizer.nextToken(),d=u[0],d==="("||d==="["?k.push(d==="("?")":"]"):d==="{"&&k.length>0?k.push("}"):d===k[k.length-1]&&k.pop(),k.length===0)if(d===";"){p.source.end=this.getPosition(u[2]),p.source.end.offset++,this.semicolon=!0;break}else if(d==="{"){x=!0;break}else if(d==="}"){if(m.length>0){for(g=m.length-1,h=m[g];h&&h[0]==="space";)h=m[--g];h&&(p.source.end=this.getPosition(h[3]||h[2]),p.source.end.offset++)}this.end(u);break}else m.push(u);else m.push(u);if(this.tokenizer.endOfFile()){y=!0;break}}p.raws.between=this.spacesAndCommentsFromEnd(m),m.length?(p.raws.afterName=this.spacesAndCommentsFromStart(m),this.raw(p,"params",m),y&&(u=m[m.length-1],p.source.end=this.getPosition(u[3]||u[2]),p.source.end.offset++,this.spaces=p.raws.between,p.raws.between="")):(p.raws.afterName="",p.params=""),x&&(p.nodes=[],this.current=p)}checkMissedSemicolon(u){let p=this.colon(u);if(p===!1)return;let d=0,h;for(let g=p-1;g>=0&&(h=u[g],!(h[0]!=="space"&&(d+=1,d===2)));g--);throw this.input.error("Missed semicolon",h[0]==="word"?h[3]+1:h[2])}colon(u){let p=0,d,h,g;for(let[y,x]of u.entries()){if(h=x,g=h[0],g==="("&&(p+=1),g===")"&&(p-=1),p===0&&g===":")if(!d)this.doubleColon(h);else{if(d[0]==="word"&&d[1]==="progid")continue;return y}d=h}return!1}comment(u){let p=new e;this.init(p,u[2]),p.source.end=this.getPosition(u[3]||u[2]),p.source.end.offset++;let d=u[1].slice(2,-2);if(/^\s*$/.test(d))p.text="",p.raws.left=d,p.raws.right="";else{let h=d.match(/^(\s*)([^]*\S)(\s*)$/);p.text=h[2],p.raws.left=h[1],p.raws.right=h[3]}}createTokenizer(){this.tokenizer=a(this.input)}decl(u,p){let d=new r;this.init(d,u[0][2]);let h=u[u.length-1];for(h[0]===";"&&(this.semicolon=!0,u.pop()),d.source.end=this.getPosition(h[3]||h[2]||o(u)),d.source.end.offset++;u[0][0]!=="word";)u.length===1&&this.unknownWord(u),d.raws.before+=u.shift()[1];for(d.source.start=this.getPosition(u[0][2]),d.prop="";u.length;){let k=u[0][0];if(k===":"||k==="space"||k==="comment")break;d.prop+=u.shift()[1]}d.raws.between="";let g;for(;u.length;)if(g=u.shift(),g[0]===":"){d.raws.between+=g[1];break}else g[0]==="word"&&/\w/.test(g[1])&&this.unknownWord([g]),d.raws.between+=g[1];(d.prop[0]==="_"||d.prop[0]==="*")&&(d.raws.before+=d.prop[0],d.prop=d.prop.slice(1));let y=[],x;for(;u.length&&(x=u[0][0],!(x!=="space"&&x!=="comment"));)y.push(u.shift());this.precheckMissedSemicolon(u);for(let k=u.length-1;k>=0;k--){if(g=u[k],g[1].toLowerCase()==="!important"){d.important=!0;let S=this.stringFrom(u,k);S=this.spacesFromEnd(u)+S,S!==" !important"&&(d.raws.important=S);break}else if(g[1].toLowerCase()==="important"){let S=u.slice(0),_="";for(let w=k;w>0;w--){let A=S[w][0];if(_.trim().startsWith("!")&&A!=="space")break;_=S.pop()[1]+_}_.trim().startsWith("!")&&(d.important=!0,d.raws.important=_,u=S)}if(g[0]!=="space"&&g[0]!=="comment")break}u.some(k=>k[0]!=="space"&&k[0]!=="comment")&&(d.raws.between+=y.map(k=>k[1]).join(""),y=[]),this.raw(d,"value",y.concat(u),p),d.value.includes(":")&&!p&&this.checkMissedSemicolon(u)}doubleColon(u){throw this.input.error("Double colon",{offset:u[2]},{offset:u[2]+u[1].length})}emptyRule(u){let p=new n;this.init(p,u[2]),p.selector="",p.raws.between="",this.current=p}end(u){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(u[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(u)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(u){if(this.spaces+=u[1],this.current.nodes){let p=this.current.nodes[this.current.nodes.length-1];p&&p.type==="rule"&&!p.raws.ownSemicolon&&(p.raws.ownSemicolon=this.spaces,this.spaces="",p.source.end=this.getPosition(u[2]),p.source.end.offset+=p.raws.ownSemicolon.length)}}getPosition(u){let p=this.input.fromOffset(u);return{column:p.col,line:p.line,offset:u}}init(u,p){this.current.push(u),u.source={input:this.input,start:this.getPosition(p)},u.raws.before=this.spaces,this.spaces="",u.type!=="comment"&&(this.semicolon=!1)}other(u){let p=!1,d=null,h=!1,g=null,y=[],x=u[1].startsWith("--"),m=[],k=u;for(;k;){if(d=k[0],m.push(k),d==="("||d==="[")g||(g=k),y.push(d==="("?")":"]");else if(x&&h&&d==="{")g||(g=k),y.push("}");else if(y.length===0)if(d===";")if(h){this.decl(m,x);return}else break;else if(d==="{"){this.rule(m);return}else if(d==="}"){this.tokenizer.back(m.pop()),p=!0;break}else d===":"&&(h=!0);else d===y[y.length-1]&&(y.pop(),y.length===0&&(g=null));k=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(p=!0),y.length>0&&this.unclosedBracket(g),p&&h){if(!x)for(;m.length&&(k=m[m.length-1][0],!(k!=="space"&&k!=="comment"));)this.tokenizer.back(m.pop());this.decl(m,x)}else this.unknownWord(m)}parse(){let u;for(;!this.tokenizer.endOfFile();)switch(u=this.tokenizer.nextToken(),u[0]){case"space":this.spaces+=u[1];break;case";":this.freeSemicolon(u);break;case"}":this.end(u);break;case"comment":this.comment(u);break;case"at-word":this.atrule(u);break;case"{":this.emptyRule(u);break;default:this.other(u);break}this.endFile()}precheckMissedSemicolon(){}raw(u,p,d,h){let g,y,x=d.length,m="",k=!0,S,_;for(let w=0;w<x;w+=1)g=d[w],y=g[0],y==="space"&&w===x-1&&!h?k=!1:y==="comment"?(_=d[w-1]?d[w-1][0]:"empty",S=d[w+1]?d[w+1][0]:"empty",!s[_]&&!s[S]?m.slice(-1)===","?k=!1:m+=g[1]:k=!1):m+=g[1];if(!k){let w=d.reduce((A,T)=>A+T[1],"");u.raws[p]={raw:w,value:m}}u[p]=m}rule(u){u.pop();let p=new n;this.init(p,u[0][2]),p.raws.between=this.spacesAndCommentsFromEnd(u),this.raw(p,"selector",u),this.current=p}spacesAndCommentsFromEnd(u){let p,d="";for(;u.length&&(p=u[u.length-1][0],!(p!=="space"&&p!=="comment"));)d=u.pop()[1]+d;return d}spacesAndCommentsFromStart(u){let p,d="";for(;u.length&&(p=u[0][0],!(p!=="space"&&p!=="comment"));)d+=u.shift()[1];return d}spacesFromEnd(u){let p,d="";for(;u.length&&(p=u[u.length-1][0],p==="space");)d=u.pop()[1]+d;return d}stringFrom(u,p){let d="";for(let h=p;h<u.length;h++)d+=u[h][1];return u.splice(p,u.length-p),d}unclosedBlock(){let u=this.current.source.start;throw this.input.error("Unclosed block",u.line,u.column)}unclosedBracket(u){throw this.input.error("Unclosed bracket",{offset:u[2]},{offset:u[2]+1})}unexpectedClose(u){throw this.input.error("Unexpected }",{offset:u[2]},{offset:u[2]+1})}unknownWord(u){throw this.input.error("Unknown word "+u[0][1],{offset:u[0][2]},{offset:u[0][2]+u[0][1].length})}unnamedAtrule(u,p){throw this.input.error("At-rule without name",{offset:p[2]},{offset:p[2]+p[1].length})}}return Dh=l,Dh}var Lh,Sv;function Ff(){if(Sv)return Lh;Sv=1;let t=Zn(),e=Gu(),r=iO();function i(n,a){let s=new e(n,a),o=new r(s);try{o.parse()}catch(l){throw l}return o.root}return Lh=i,i.default=i,t.registerParse(i),Lh}var Oh,Av;function E5(){if(Av)return Oh;Av=1;class t{constructor(r,i={}){if(this.type="warning",this.text=r,i.node&&i.node.source){let n=i.node.rangeBy(i);this.line=n.start.line,this.column=n.start.column,this.endLine=n.end.line,this.endColumn=n.end.column}for(let n in i)this[n]=i[n]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}}return Oh=t,t.default=t,Oh}var Bh,Cv;function qf(){if(Cv)return Bh;Cv=1;let t=E5();class e{get content(){return this.css}constructor(i,n,a){this.processor=i,this.messages=[],this.root=n,this.opts=a,this.css="",this.map=void 0}toString(){return this.css}warn(i,n={}){n.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(n.plugin=this.lastPlugin.postcssPlugin);let a=new t(i,n);return this.messages.push(a),a}warnings(){return this.messages.filter(i=>i.type==="warning")}}return Bh=e,e.default=e,Bh}var Nh,Tv;function M5(){if(Tv)return Nh;Tv=1;let t=Zn(),e=zf(),r=T5(),i=Ff(),n=qf(),a=rl(),s=Hu(),{isClean:o,my:l}=Nf();const c={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},u={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},p={Once:!0,postcssPlugin:!0,prepare:!0},d=0;function h(S){return typeof S=="object"&&typeof S.then=="function"}function g(S){let _=!1,w=c[S.type];return S.type==="decl"?_=S.prop.toLowerCase():S.type==="atrule"&&(_=S.name.toLowerCase()),_&&S.append?[w,w+"-"+_,d,w+"Exit",w+"Exit-"+_]:_?[w,w+"-"+_,w+"Exit",w+"Exit-"+_]:S.append?[w,d,w+"Exit"]:[w,w+"Exit"]}function y(S){let _;return S.type==="document"?_=["Document",d,"DocumentExit"]:S.type==="root"?_=["Root",d,"RootExit"]:_=g(S),{eventIndex:0,events:_,iterator:0,node:S,visitorIndex:0,visitors:[]}}function x(S){return S[o]=!1,S.nodes&&S.nodes.forEach(_=>x(_)),S}let m={};class k{get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}constructor(_,w,A){this.stringified=!1,this.processed=!1;let T;if(typeof w=="object"&&w!==null&&(w.type==="root"||w.type==="document"))T=x(w);else if(w instanceof k||w instanceof n)T=x(w.root),w.map&&(typeof A.map>"u"&&(A.map={}),A.map.inline||(A.map.inline=!1),A.map.prev=w.map);else{let I=i;A.syntax&&(I=A.syntax.parse),A.parser&&(I=A.parser),I.parse&&(I=I.parse);try{T=I(w,A)}catch(O){this.processed=!0,this.error=O}T&&!T[l]&&t.rebuild(T)}this.result=new n(_,T,A),this.helpers={...m,postcss:m,result:this.result},this.plugins=this.processor.plugins.map(I=>typeof I=="object"&&I.prepare?{...I,...I.prepare(this.result)}:I)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(_){return this.async().catch(_)}finally(_){return this.async().then(_,_)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(_,w){let A=this.result.lastPlugin;try{w&&w.addToError(_),this.error=_,_.name==="CssSyntaxError"&&!_.plugin?(_.plugin=A.postcssPlugin,_.setMessage()):A.postcssVersion}catch(T){console&&console.error&&console.error(T)}return _}prepareVisitors(){this.listeners={};let _=(w,A,T)=>{this.listeners[A]||(this.listeners[A]=[]),this.listeners[A].push([w,T])};for(let w of this.plugins)if(typeof w=="object")for(let A in w){if(!u[A]&&/^[A-Z]/.test(A))throw new Error(`Unknown event ${A} in ${w.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!p[A])if(typeof w[A]=="object")for(let T in w[A])T==="*"?_(w,A,w[A][T]):_(w,A+"-"+T.toLowerCase(),w[A][T]);else typeof w[A]=="function"&&_(w,A,w[A])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let _=0;_<this.plugins.length;_++){let w=this.plugins[_],A=this.runOnRoot(w);if(h(A))try{await A}catch(T){throw this.handleError(T)}}if(this.prepareVisitors(),this.hasListener){let _=this.result.root;for(;!_[o];){_[o]=!0;let w=[y(_)];for(;w.length>0;){let A=this.visitTick(w);if(h(A))try{await A}catch(T){let I=w[w.length-1].node;throw this.handleError(T,I)}}}if(this.listeners.OnceExit)for(let[w,A]of this.listeners.OnceExit){this.result.lastPlugin=w;try{if(_.type==="document"){let T=_.nodes.map(I=>A(I,this.helpers));await Promise.all(T)}else await A(_,this.helpers)}catch(T){throw this.handleError(T)}}}return this.processed=!0,this.stringify()}runOnRoot(_){this.result.lastPlugin=_;try{if(typeof _=="object"&&_.Once){if(this.result.root.type==="document"){let w=this.result.root.nodes.map(A=>_.Once(A,this.helpers));return h(w[0])?Promise.all(w):w}return _.Once(this.result.root,this.helpers)}else if(typeof _=="function")return _(this.result.root,this.result)}catch(w){throw this.handleError(w)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let _=this.result.opts,w=s;_.syntax&&(w=_.syntax.stringify),_.stringifier&&(w=_.stringifier),w.stringify&&(w=w.stringify);let T=new r(w,this.result.root,this.result.opts).generate();return this.result.css=T[0],this.result.map=T[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let _ of this.plugins){let w=this.runOnRoot(_);if(h(w))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let _=this.result.root;for(;!_[o];)_[o]=!0,this.walkSync(_);if(this.listeners.OnceExit)if(_.type==="document")for(let w of _.nodes)this.visitSync(this.listeners.OnceExit,w);else this.visitSync(this.listeners.OnceExit,_)}return this.result}then(_,w){return this.async().then(_,w)}toString(){return this.css}visitSync(_,w){for(let[A,T]of _){this.result.lastPlugin=A;let I;try{I=T(w,this.helpers)}catch(O){throw this.handleError(O,w.proxyOf)}if(w.type!=="root"&&w.type!=="document"&&!w.parent)return!0;if(h(I))throw this.getAsyncError()}}visitTick(_){let w=_[_.length-1],{node:A,visitors:T}=w;if(A.type!=="root"&&A.type!=="document"&&!A.parent){_.pop();return}if(T.length>0&&w.visitorIndex<T.length){let[O,B]=T[w.visitorIndex];w.visitorIndex+=1,w.visitorIndex===T.length&&(w.visitors=[],w.visitorIndex=0),this.result.lastPlugin=O;try{return B(A.toProxy(),this.helpers)}catch(E){throw this.handleError(E,A)}}if(w.iterator!==0){let O=w.iterator,B;for(;B=A.nodes[A.indexes[O]];)if(A.indexes[O]+=1,!B[o]){B[o]=!0,_.push(y(B));return}w.iterator=0,delete A.indexes[O]}let I=w.events;for(;w.eventIndex<I.length;){let O=I[w.eventIndex];if(w.eventIndex+=1,O===d){A.nodes&&A.nodes.length&&(A[o]=!0,w.iterator=A.getIterator());return}else if(this.listeners[O]){w.visitors=this.listeners[O];return}}_.pop()}walkSync(_){_[o]=!0;let w=g(_);for(let A of w)if(A===d)_.nodes&&_.each(T=>{T[o]||this.walkSync(T)});else{let T=this.listeners[A];if(T&&this.visitSync(T,_.toProxy()))return}}warnings(){return this.sync().warnings()}}return k.registerPostcss=S=>{m=S},Nh=k,k.default=k,a.registerLazyResult(k),e.registerLazyResult(k),Nh}var Uh,Ev;function nO(){if(Ev)return Uh;Ev=1;let t=T5(),e=Ff();const r=qf();let i=Hu();class n{get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let s,o=e;try{s=o(this._css,this._opts)}catch(l){this.error=l}if(this.error)throw this.error;return this._root=s,s}get[Symbol.toStringTag](){return"NoWorkResult"}constructor(s,o,l){o=o.toString(),this.stringified=!1,this._processor=s,this._css=o,this._opts=l,this._map=void 0;let c,u=i;this.result=new r(this._processor,c,this._opts),this.result.css=o;let p=this;Object.defineProperty(this.result,"root",{get(){return p.root}});let d=new t(u,c,this._opts,o);if(d.isMap()){let[h,g]=d.generate();h&&(this.result.css=h),g&&(this.result.map=g)}else d.clearAnnotation(),this.result.css=d.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(s){return this.async().catch(s)}finally(s){return this.async().then(s,s)}sync(){if(this.error)throw this.error;return this.result}then(s,o){return this.async().then(s,o)}toString(){return this._css}warnings(){return[]}}return Uh=n,n.default=n,Uh}var zh,Mv;function aO(){if(Mv)return zh;Mv=1;let t=zf(),e=M5(),r=nO(),i=rl();class n{constructor(s=[]){this.version="8.5.6",this.plugins=this.normalize(s)}normalize(s){let o=[];for(let l of s)if(l.postcss===!0?l=l():l.postcss&&(l=l.postcss),typeof l=="object"&&Array.isArray(l.plugins))o=o.concat(l.plugins);else if(typeof l=="object"&&l.postcssPlugin)o.push(l);else if(typeof l=="function")o.push(l);else if(!(typeof l=="object"&&(l.parse||l.stringify)))throw new Error(l+" is not a PostCSS plugin");return o}process(s,o={}){return!this.plugins.length&&!o.parser&&!o.stringifier&&!o.syntax?new r(this,s,o):new e(this,s,o)}use(s){return this.plugins=this.plugins.concat(this.normalize([s])),this}}return zh=n,n.default=n,i.registerProcessor(n),t.registerProcessor(n),zh}var Hh,Iv;function sO(){if(Iv)return Hh;Iv=1;var t={};let e=Uf(),r=qu(),i=Zn(),n=Bf(),a=ju(),s=zf(),o=tO(),l=Gu(),c=M5(),u=C5(),p=Fu(),d=Ff(),h=aO(),g=qf(),y=rl(),x=Hf(),m=Hu(),k=E5();function S(..._){return _.length===1&&Array.isArray(_[0])&&(_=_[0]),new h(_)}return S.plugin=function(w,A){let T=!1;function I(...B){console&&console.warn&&!T&&(T=!0,console.warn(w+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),t.LANG&&t.LANG.startsWith("cn")&&console.warn(w+`: 里面 postcss.plugin 被弃用. 迁移指南:
https://www.w3ctech.com/topic/2226`));let E=A(...B);return E.postcssPlugin=w,E.postcssVersion=new h().version,E}let O;return Object.defineProperty(I,"postcss",{get(){return O||(O=I()),O}}),I.process=function(B,E,$){return S([I($)]).process(B,E)},I},S.stringify=m,S.parse=d,S.fromJSON=o,S.list=u,S.comment=_=>new r(_),S.atRule=_=>new e(_),S.decl=_=>new a(_),S.rule=_=>new x(_),S.root=_=>new y(_),S.document=_=>new s(_),S.CssSyntaxError=n,S.Declaration=a,S.Container=i,S.Processor=h,S.Document=s,S.Comment=r,S.Warning=k,S.AtRule=e,S.Result=g,S.Input=l,S.Rule=x,S.Root=y,S.Node=p,c.registerPostcss(S),Hh=S,S.default=S,Hh}var Fh,Pv;function oO(){if(Pv)return Fh;Pv=1;const t=WL(),e=KL(),{isPlainObject:r}=YL(),i=XL(),n=QL(),{parse:a}=sO(),s=["img","audio","video","picture","svg","object","map","iframe","embed"],o=["script","style"];function l(x,m){x&&Object.keys(x).forEach(function(k){m(x[k],k)})}function c(x,m){return{}.hasOwnProperty.call(x,m)}function u(x,m){const k=[];return l(x,function(S){m(S)&&k.push(S)}),k}function p(x){for(const m in x)if(c(x,m))return!1;return!0}function d(x){return x.map(function(m){if(!m.url)throw new Error("URL missing");return m.url+(m.w?` ${m.w}w`:"")+(m.h?` ${m.h}h`:"")+(m.d?` ${m.d}x`:"")}).join(", ")}Fh=g;const h=/^[^\0\t\n\f\r /<=>]+$/;function g(x,m,k){if(x==null)return"";typeof x=="number"&&(x=x.toString());let S="",_="";function w(U,G){const z=this;this.tag=U,this.attribs=G||{},this.tagPosition=S.length,this.text="",this.openingTagLength=0,this.mediaChildren=[],this.updateParentNodeText=function(){if(j.length){const ae=j[j.length-1];ae.text+=z.text}},this.updateParentNodeMediaChildren=function(){j.length&&s.includes(this.tag)&&j[j.length-1].mediaChildren.push(this.tag)}}m=Object.assign({},g.defaults,m),m.parser=Object.assign({},y,m.parser);const A=function(U){return m.allowedTags===!1||(m.allowedTags||[]).indexOf(U)>-1};o.forEach(function(U){A(U)&&!m.allowVulnerableTags&&console.warn(`

⚠️ Your \`allowedTags\` option includes, \`${U}\`, which is inherently
vulnerable to XSS attacks. Please remove it from \`allowedTags\`.
Or, to disable this warning, add the \`allowVulnerableTags\` option
and ensure you are accounting for this risk.

`)});const T=m.nonTextTags||["script","style","textarea","option"];let I,O;m.allowedAttributes&&(I={},O={},l(m.allowedAttributes,function(U,G){I[G]=[];const z=[];U.forEach(function(ae){typeof ae=="string"&&ae.indexOf("*")>=0?z.push(e(ae).replace(/\\\*/g,".*")):I[G].push(ae)}),z.length&&(O[G]=new RegExp("^("+z.join("|")+")$"))}));const B={},E={},$={};l(m.allowedClasses,function(U,G){if(I&&(c(I,G)||(I[G]=[]),I[G].push("class")),B[G]=U,Array.isArray(U)){const z=[];B[G]=[],$[G]=[],U.forEach(function(ae){typeof ae=="string"&&ae.indexOf("*")>=0?z.push(e(ae).replace(/\\\*/g,".*")):ae instanceof RegExp?$[G].push(ae):B[G].push(ae)}),z.length&&(E[G]=new RegExp("^("+z.join("|")+")$"))}});const R={};let N;l(m.transformTags,function(U,G){let z;typeof U=="function"?z=U:typeof U=="string"&&(z=g.simpleTransform(U)),G==="*"?N=z:R[G]=z});let D,j,ee,oe,we,me,fe=!1;W();const ut=new t.Parser({onopentag:function(U,G){if(m.onOpenTag&&m.onOpenTag(U,G),m.enforceHtmlBoundary&&U==="html"&&W(),we){me++;return}const z=new w(U,G);j.push(z);let ae=!1;const Ke=!!z.text;let et;if(c(R,U)&&(et=R[U](U,G),z.attribs=G=et.attribs,et.text!==void 0&&(z.innerText=et.text),U!==et.tagName&&(z.name=U=et.tagName,oe[D]=et.tagName)),N&&(et=N(U,G),z.attribs=G=et.attribs,U!==et.tagName&&(z.name=U=et.tagName,oe[D]=et.tagName)),(!A(U)||m.disallowedTagsMode==="recursiveEscape"&&!p(ee)||m.nestingLimit!=null&&D>=m.nestingLimit)&&(ae=!0,ee[D]=!0,(m.disallowedTagsMode==="discard"||m.disallowedTagsMode==="completelyDiscard")&&T.indexOf(U)!==-1&&(we=!0,me=1)),D++,ae){if(m.disallowedTagsMode==="discard"||m.disallowedTagsMode==="completelyDiscard"){if(z.innerText&&!Ke){const ke=Ye(z.innerText);m.textFilter?S+=m.textFilter(ke,U):S+=ke,fe=!0}return}_=S,S=""}S+="<"+U,U==="script"&&(m.allowedScriptHostnames||m.allowedScriptDomains)&&(z.innerText=""),ae&&(m.disallowedTagsMode==="escape"||m.disallowedTagsMode==="recursiveEscape")&&m.preserveEscapedAttributes?l(G,function(ke,Se){S+=" "+Se+'="'+Ye(ke||"",!0)+'"'}):(!I||c(I,U)||I["*"])&&l(G,function(ke,Se){if(!h.test(Se)){delete z.attribs[Se];return}if(ke===""&&!m.allowedEmptyAttributes.includes(Se)&&(m.nonBooleanAttributes.includes(Se)||m.nonBooleanAttributes.includes("*"))){delete z.attribs[Se];return}let ea=!1;if(!I||c(I,U)&&I[U].indexOf(Se)!==-1||I["*"]&&I["*"].indexOf(Se)!==-1||c(O,U)&&O[U].test(Se)||O["*"]&&O["*"].test(Se))ea=!0;else if(I&&I[U]){for(const Me of I[U])if(r(Me)&&Me.name&&Me.name===Se){ea=!0;let Ae="";if(Me.multiple===!0){const Yt=ke.split(" ");for(const mt of Yt)Me.values.indexOf(mt)!==-1&&(Ae===""?Ae=mt:Ae+=" "+mt)}else Me.values.indexOf(ke)>=0&&(Ae=ke);ke=Ae}}if(ea){if(m.allowedSchemesAppliedToAttributes.indexOf(Se)!==-1&&le(U,ke)){delete z.attribs[Se];return}if(U==="script"&&Se==="src"){let Me=!0;try{const Ae=Rt(ke);if(m.allowedScriptHostnames||m.allowedScriptDomains){const Yt=(m.allowedScriptHostnames||[]).find(function(nt){return nt===Ae.url.hostname}),mt=(m.allowedScriptDomains||[]).find(function(nt){return Ae.url.hostname===nt||Ae.url.hostname.endsWith(`.${nt}`)});Me=Yt||mt}}catch{Me=!1}if(!Me){delete z.attribs[Se];return}}if(U==="iframe"&&Se==="src"){let Me=!0;try{const Ae=Rt(ke);if(Ae.isRelativeUrl)Me=c(m,"allowIframeRelativeUrls")?m.allowIframeRelativeUrls:!m.allowedIframeHostnames&&!m.allowedIframeDomains;else if(m.allowedIframeHostnames||m.allowedIframeDomains){const Yt=(m.allowedIframeHostnames||[]).find(function(nt){return nt===Ae.url.hostname}),mt=(m.allowedIframeDomains||[]).find(function(nt){return Ae.url.hostname===nt||Ae.url.hostname.endsWith(`.${nt}`)});Me=Yt||mt}}catch{Me=!1}if(!Me){delete z.attribs[Se];return}}if(Se==="srcset")try{let Me=n(ke);if(Me.forEach(function(Ae){le("srcset",Ae.url)&&(Ae.evil=!0)}),Me=u(Me,function(Ae){return!Ae.evil}),Me.length)ke=d(u(Me,function(Ae){return!Ae.evil})),z.attribs[Se]=ke;else{delete z.attribs[Se];return}}catch{delete z.attribs[Se];return}if(Se==="class"){const Me=B[U],Ae=B["*"],Yt=E[U],mt=$[U],nt=$["*"],sl=E["*"],ds=[Yt,sl].concat(mt,nt).filter(function(ol){return ol});if(Me&&Ae?ke=$r(ke,i(Me,Ae),ds):ke=$r(ke,Me||Ae,ds),!ke.length){delete z.attribs[Se];return}}if(Se==="style"){if(m.parseStyleAttributes)try{const Me=a(U+" {"+ke+"}",{map:!1}),Ae=Kt(Me,m.allowedStyles);if(ke=Pr(Ae),ke.length===0){delete z.attribs[Se];return}}catch{typeof window<"u"&&console.warn('Failed to parse "'+U+" {"+ke+`}", If you're running this in a browser, we recommend to disable style parsing: options.parseStyleAttributes: false, since this only works in a node environment due to a postcss dependency, More info: https://github.com/apostrophecms/sanitize-html/issues/547`),delete z.attribs[Se];return}else if(m.allowedStyles)throw new Error("allowedStyles option cannot be used together with parseStyleAttributes: false.")}S+=" "+Se,ke&&ke.length?S+='="'+Ye(ke,!0)+'"':m.allowedEmptyAttributes.includes(Se)&&(S+='=""')}else delete z.attribs[Se]}),m.selfClosing.indexOf(U)!==-1?S+=" />":(S+=">",z.innerText&&!Ke&&!m.textFilter&&(S+=Ye(z.innerText),fe=!0)),ae&&(S=_+Ye(S),_=""),z.openingTagLength=S.length-z.tagPosition},ontext:function(U){if(we)return;const G=j[j.length-1];let z;if(G&&(z=G.tag,U=G.innerText!==void 0?G.innerText:U),m.disallowedTagsMode==="completelyDiscard"&&!A(z))U="";else if((m.disallowedTagsMode==="discard"||m.disallowedTagsMode==="completelyDiscard")&&(z==="script"||z==="style"))S+=U;else if(!fe){const ae=Ye(U,!1);m.textFilter?S+=m.textFilter(ae,z):S+=ae}if(j.length){const ae=j[j.length-1];ae.text+=U}},onclosetag:function(U,G){if(m.onCloseTag&&m.onCloseTag(U,G),we)if(me--,!me)we=!1;else return;const z=j.pop();if(!z)return;if(z.tag!==U){j.push(z);return}we=m.enforceHtmlBoundary?U==="html":!1,D--;const ae=ee[D];if(ae){if(delete ee[D],m.disallowedTagsMode==="discard"||m.disallowedTagsMode==="completelyDiscard"){z.updateParentNodeText();return}_=S,S=""}if(oe[D]&&(U=oe[D],delete oe[D]),m.exclusiveFilter){const Ke=m.exclusiveFilter(z);if(Ke==="excludeTag"){ae&&(S=_,_=""),S=S.substring(0,z.tagPosition)+S.substring(z.tagPosition+z.openingTagLength);return}else if(Ke){S=S.substring(0,z.tagPosition);return}}if(z.updateParentNodeMediaChildren(),z.updateParentNodeText(),m.selfClosing.indexOf(U)!==-1||G&&!A(U)&&["escape","recursiveEscape"].indexOf(m.disallowedTagsMode)>=0){ae&&(S=_,_="");return}S+="</"+U+">",ae&&(S=_+Ye(S),_=""),fe=!1}},m.parser);return ut.write(x),ut.end(),S;function W(){S="",D=0,j=[],ee={},oe={},we=!1,me=0}function Ye(U,G){return typeof U!="string"&&(U=U+""),m.parser.decodeEntities&&(U=U.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),G&&(U=U.replace(/"/g,"&quot;"))),U=U.replace(/&(?![a-zA-Z0-9#]{1,20};)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),G&&(U=U.replace(/"/g,"&quot;")),U}function le(U,G){for(G=G.replace(/[\x00-\x20]+/g,"");;){const Ke=G.indexOf("<!--");if(Ke===-1)break;const et=G.indexOf("-->",Ke+4);if(et===-1)break;G=G.substring(0,Ke)+G.substring(et+3)}const z=G.match(/^([a-zA-Z][a-zA-Z0-9.\-+]*):/);if(!z)return G.match(/^[/\\]{2}/)?!m.allowProtocolRelative:!1;const ae=z[1].toLowerCase();return c(m.allowedSchemesByTag,U)?m.allowedSchemesByTag[U].indexOf(ae)===-1:!m.allowedSchemes||m.allowedSchemes.indexOf(ae)===-1}function Rt(U){if(U=U.replace(/^(\w+:)?\s*[\\/]\s*[\\/]/,"$1//"),U.startsWith("relative:"))throw new Error("relative: exploit attempt");let G="relative://relative-site";for(let Ke=0;Ke<100;Ke++)G+=`/${Ke}`;const z=new URL(U,G);return{isRelativeUrl:z&&z.hostname==="relative-site"&&z.protocol==="relative:",url:z}}function Kt(U,G){if(!G)return U;const z=U.nodes[0];let ae;return G[z.selector]&&G["*"]?ae=i(G[z.selector],G["*"]):ae=G[z.selector]||G["*"],ae&&(U.nodes[0].nodes=z.nodes.reduce(pr(ae),[])),U}function Pr(U){return U.nodes[0].nodes.reduce(function(G,z){return G.push(`${z.prop}:${z.value}${z.important?" !important":""}`),G},[]).join(";")}function pr(U){return function(G,z){return c(U,z.prop)&&U[z.prop].some(function(Ke){return Ke.test(z.value)})&&G.push(z),G}}function $r(U,G,z){return G?(U=U.split(/\s+/),U.filter(function(ae){return G.indexOf(ae)!==-1||z.some(function(Ke){return Ke.test(ae)})}).join(" ")):U}}const y={decodeEntities:!0};return g.defaults={allowedTags:["address","article","aside","footer","header","h1","h2","h3","h4","h5","h6","hgroup","main","nav","section","blockquote","dd","div","dl","dt","figcaption","figure","hr","li","menu","ol","p","pre","ul","a","abbr","b","bdi","bdo","br","cite","code","data","dfn","em","i","kbd","mark","q","rb","rp","rt","rtc","ruby","s","samp","small","span","strong","sub","sup","time","u","var","wbr","caption","col","colgroup","table","tbody","td","tfoot","th","thead","tr"],nonBooleanAttributes:["abbr","accept","accept-charset","accesskey","action","allow","alt","as","autocapitalize","autocomplete","blocking","charset","cite","class","color","cols","colspan","content","contenteditable","coords","crossorigin","data","datetime","decoding","dir","dirname","download","draggable","enctype","enterkeyhint","fetchpriority","for","form","formaction","formenctype","formmethod","formtarget","headers","height","hidden","high","href","hreflang","http-equiv","id","imagesizes","imagesrcset","inputmode","integrity","is","itemid","itemprop","itemref","itemtype","kind","label","lang","list","loading","low","max","maxlength","media","method","min","minlength","name","nonce","optimum","pattern","ping","placeholder","popover","popovertarget","popovertargetaction","poster","preload","referrerpolicy","rel","rows","rowspan","sandbox","scope","shape","size","sizes","slot","span","spellcheck","src","srcdoc","srclang","srcset","start","step","style","tabindex","target","title","translate","type","usemap","value","width","wrap","onauxclick","onafterprint","onbeforematch","onbeforeprint","onbeforeunload","onbeforetoggle","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontextlost","oncontextmenu","oncontextrestored","oncopy","oncuechange","oncut","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onformdata","onhashchange","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onlanguagechange","onload","onloadeddata","onloadedmetadata","onloadstart","onmessage","onmessageerror","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onoffline","ononline","onpagehide","onpageshow","onpaste","onpause","onplay","onplaying","onpopstate","onprogress","onratechange","onreset","onresize","onrejectionhandled","onscroll","onscrollend","onsecuritypolicyviolation","onseeked","onseeking","onselect","onslotchange","onstalled","onstorage","onsubmit","onsuspend","ontimeupdate","ontoggle","onunhandledrejection","onunload","onvolumechange","onwaiting","onwheel"],disallowedTagsMode:"discard",allowedAttributes:{a:["href","name","target"],img:["src","srcset","alt","title","width","height","loading"]},allowedEmptyAttributes:["alt"],selfClosing:["img","br","hr","area","base","basefont","input","link","meta"],allowedSchemes:["http","https","ftp","mailto","tel"],allowedSchemesByTag:{},allowedSchemesAppliedToAttributes:["href","src","cite"],allowProtocolRelative:!0,enforceHtmlBoundary:!1,parseStyleAttributes:!0,preserveEscapedAttributes:!1},g.simpleTransform=function(x,m,k){return k=k===void 0?!0:k,m=m||{},function(S,_){let w;if(k)for(w in m)_[w]=m[w];else _=m;return{tagName:x,attribs:_}}},Fh}var lO=oO();const qh=dp(lO);class Vu extends yL{sanitizeHTMLWithOptions(e,r){const i=r.includeImages?[...qh.defaults.allowedTags,"img"]:qh.defaults.allowedTags,n=r.includeCodeBlockClassNames?{code:["*"]}:{};return qh(e,{allowedTags:i,allowedClasses:n})}render(e,r){const i=Object.assign(Vu.defaultOptions,r??{});new Promise((a,s)=>{ne.parse(e,(o,l)=>{if(o)return s(o);a(l)})}).then(a=>i.skipSanitization?Promise.resolve(a):Promise.resolve(this.sanitizeHTMLWithOptions(a,i))).then(a=>{const s=v1(a);this.setValue(s)});const n=i.skipSanitization?i.loadingHTML:this.sanitizeHTMLWithOptions(i.loadingHTML,i);return v1(n)}}Vu.defaultOptions={includeImages:!1,includeCodeBlockClassNames:!1,loadingHTML:"<p>Loading...</p>",skipSanitization:!1};const cO=s5(Vu),uO=""+new URL("../changelog.md",import.meta.url).href,dO=""+new URL("../images/Megaphone.svg",import.meta.url).href;var hO=Object.defineProperty,pO=Object.getOwnPropertyDescriptor,Wu=(t,e,r,i)=>{for(var n=i>1?void 0:i?pO(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&hO(e,r,n),n};let ap=class extends gt{constructor(){super(...arguments),this.markdown="Loading...",this.initialized=!1}render(){const t=v`
      <div
        class="h-full flex flex-col ${this.inline?"bg-black/60 backdrop-blur-md rounded-2xl border border-white/10":""}"
      >
        ${It({title:f("news.title"),onBack:this.close,ariaLabel:f("common.back")})}
        <div
          class="prose prose-invert prose-sm max-w-none overflow-y-auto px-6 py-3 mr-1
            [&_a]:text-blue-400 [&_a:hover]:text-blue-300 transition-colors
            [&_h1]:text-2xl [&_h1]:font-bold [&_h1]:mb-4 [&_h1]:text-white [&_h1]:border-b [&_h1]:border-white/10 [&_h1]:pb-2
            [&_h2]:text-xl [&_h2]:font-bold [&_h2]:mt-6 [&_h2]:mb-3 [&_h2]:text-blue-200
            [&_h3]:text-lg [&_h3]:font-semibold [&_h3]:mt-4 [&_h3]:mb-2 [&_h3]:text-blue-100
            [&_ul]:pl-5 [&_ul]:my-3 [&_ul]:list-disc [&_ul]:space-y-1
            [&_li]:text-gray-300 [&_li]:leading-relaxed
            [&_p]:text-gray-300 [&_p]:mb-3 [&_strong]:text-white [&_strong]:font-bold
            scrollbar-thin scrollbar-thumb-white/20 scrollbar-track-transparent"
        >
          ${cO(this.markdown,{includeImages:!0,includeCodeBlockClassNames:!0})}
        </div>
      </div>
    `;return this.inline?t:v`
      <o-modal
        title=${f("news.title")}
        ?inline=${this.inline}
        hideCloseButton
        hideHeader
      >
        ${t}
      </o-modal>
    `}onOpen(){this.initialized||(this.initialized=!0,fetch(`${uO}?v=${encodeURIComponent(mc.trim())}`).then(t=>t.ok?t.text():"Failed to load").then(t=>t.replace(/^([^\-*\s].*?) \*\*(.+?)\*\*$/gm,"## $1 $2").replace(new RegExp("(?<!\\()\\bhttps:\\/\\/github\\.com\\/openfrontio\\/OpenFrontIO\\/pull\\/(\\d+)\\b","g"),(e,r)=>`[#${r}](https://github.com/openfrontio/OpenFrontIO/pull/${r})`).replace(new RegExp("(?<!\\()\\bhttps:\\/\\/github\\.com\\/openfrontio\\/OpenFrontIO\\/compare\\/([\\w.-]+)\\b","g"),(e,r)=>`[${r}](https://github.com/openfrontio/OpenFrontIO/compare/${r})`)).then(t=>this.markdown=t))}};Wu([L({type:String})],ap.prototype,"markdown",2);ap=Wu([F("news-modal")],ap);let sp=class extends V{connectedCallback(){super.connectedCallback(),this.checkForNewVersion()}checkForNewVersion(){const t=localStorage.getItem("last-seen-version");t!==null&&t!==mc&&setTimeout(()=>{this.open()},500)}open(){localStorage.setItem("last-seen-version",mc),this.newsModal.open()}render(){return v`
      <button
        class="border p-[4px] rounded-lg flex cursor-pointer border-black/30 dark:border-gray-300/60 bg-white/70 dark:bg-[rgba(55,65,81,0.7)] hidden"
        @click=${this.open}
      >
        <img
          class="size-[48px] dark:invert"
          src="${dO}"
          alt=${f("news.title")}
        />
      </button>
      <news-modal></news-modal>
    `}};Wu([Vt("news-modal")],sp.prototype,"newsModal",2);sp=Wu([F("news-button")],sp);var fO=Object.defineProperty,gO=Object.getOwnPropertyDescriptor,il=(t,e,r,i)=>{for(var n=i>1?void 0:i?gO(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&fO(e,r,n),n};let Ja=class extends V{constructor(){super(...arguments),this.pattern=null,this.selectedColor=null,this.isLoading=!0,this.showSelectLabel=!1,this.userSettings=new Gt,this.cosmetics=null,this._abortController=null,this._onPatternSelected=()=>{this.updateFromSettings()}}updateFromSettings(){this.selectedColor=this.userSettings.getSelectedColor()??null,this.cosmetics?this.pattern=this.userSettings.getSelectedPatternName(this.cosmetics):this.pattern=null}onInputClick(t){t.preventDefault(),t.stopPropagation(),this.dispatchEvent(new CustomEvent("pattern-input-click",{bubbles:!0,composed:!0}))}async connectedCallback(){super.connectedCallback(),this._abortController=new AbortController,this.isLoading=!0;const t=await as();this.isConnected&&(this.cosmetics=t,this.updateFromSettings(),this.isConnected&&(this.isLoading=!1,window.addEventListener("pattern-selected",this._onPatternSelected,{signal:this._abortController.signal})))}disconnectedCallback(){super.disconnectedCallback(),this._abortController&&(this._abortController.abort(),this._abortController=null)}createRenderRoot(){return this}render(){if(ve.isOnCrazyGames())return v``;const t=this.pattern===null&&this.selectedColor===null,e=this.showSelectLabel&&t,r=f("territory_patterns.title");if(this.isLoading)return v`
        <button
          id="pattern-input"
          class="pattern-btn m-0 border-0 !p-0 w-full h-full flex cursor-pointer justify-center items-center focus:outline-none focus:ring-0 bg-slate-900/80 rounded-lg overflow-hidden"
          disabled
        >
          <span
            class="w-6 h-6 border-4 border-blue-500/30 border-t-blue-500 rounded-full animate-spin"
          ></span>
        </button>
      `;let i;return this.pattern?i=_0(this.pattern,128,128):i=_0(null,128,128),v`
      <button
        id="pattern-input"
        class="pattern-btn m-0 border-0 !p-0 w-full h-full flex cursor-pointer justify-center items-center focus:outline-none focus:ring-0 transition-all duration-200 hover:scale-105 bg-slate-900/80 hover:bg-slate-800/80 active:bg-slate-800/90 rounded-lg overflow-hidden"
        title=${r}
        @click=${this.onInputClick}
      >
        <span
          class=${e?"hidden":"w-full h-full overflow-hidden flex items-center justify-center [&>img]:object-cover [&>img]:w-full [&>img]:h-full"}
        >
          ${e?null:i}
        </span>
        ${e?v`<span
              class="text-[10px] font-black text-white/40 uppercase leading-none break-words w-full text-center px-1"
            >
              ${f("territory_patterns.select_skin")}
            </span>`:null}
      </button>
    `}};il([M()],Ja.prototype,"pattern",2);il([M()],Ja.prototype,"selectedColor",2);il([M()],Ja.prototype,"isLoading",2);il([L({type:Boolean,attribute:"show-select-label"})],Ja.prototype,"showSelectLabel",2);Ja=il([F("pattern-input")],Ja);function mO(t){return`/w${Math.floor(Math.random()*t)}`}class bO{constructor(e,r){this.onLobbiesUpdate=e,this.ws=null,this.wsReconnectTimeout=null,this.wsConnectionAttempts=0,this.wsAttemptCounted=!1,this.workerPath="",this.reconnectDelay=r?.reconnectDelay??3e3,this.maxWsAttempts=r?.maxWsAttempts??3}async start(){this.wsConnectionAttempts=0;const e=await Ut();this.workerPath=mO(e.numWorkers()),this.connectWebSocket()}stop(){this.disconnectWebSocket()}connectWebSocket(){try{this.ws&&(this.ws.close(),this.ws=null);const r=`${window.location.protocol==="https:"?"wss:":"ws:"}//${window.location.host}${this.workerPath}/lobbies`;this.ws=new WebSocket(r),this.wsAttemptCounted=!1,this.ws.addEventListener("open",()=>this.handleOpen()),this.ws.addEventListener("message",i=>this.handleMessage(i)),this.ws.addEventListener("close",()=>this.handleClose()),this.ws.addEventListener("error",i=>this.handleError(i))}catch(e){this.handleConnectError(e)}}handleOpen(){console.log("WebSocket connected: lobby updating"),this.wsConnectionAttempts=0,this.wsReconnectTimeout!==null&&(clearTimeout(this.wsReconnectTimeout),this.wsReconnectTimeout=null)}handleMessage(e){try{const r=v3.parse(JSON.parse(e.data));this.onLobbiesUpdate(r)}catch(r){if(console.error("Error parsing WebSocket message:",r),this.ws&&this.ws.readyState===WebSocket.OPEN)try{this.ws.close()}catch(i){console.error("Error closing WebSocket after parse failure:",i)}}}handleClose(){console.log("WebSocket disconnected, attempting to reconnect..."),this.wsAttemptCounted||(this.wsAttemptCounted=!0,this.wsConnectionAttempts++),this.wsConnectionAttempts>=this.maxWsAttempts?console.error("Max WebSocket attempts reached"):this.scheduleReconnect()}handleError(e){console.error("WebSocket error:",e)}handleConnectError(e){console.error("Error connecting WebSocket:",e),this.wsAttemptCounted||(this.wsAttemptCounted=!0,this.wsConnectionAttempts++),this.wsConnectionAttempts>=this.maxWsAttempts?alert("error connecting to game service"):this.scheduleReconnect()}scheduleReconnect(){this.wsReconnectTimeout===null&&(this.wsReconnectTimeout=window.setTimeout(()=>{this.wsReconnectTimeout=null,this.connectWebSocket()},this.reconnectDelay))}disconnectWebSocket(){this.ws&&(this.ws.close(),this.ws=null),this.wsReconnectTimeout!==null&&(clearTimeout(this.wsReconnectTimeout),this.wsReconnectTimeout=null)}}var vO=Object.defineProperty,yO=Object.getOwnPropertyDescriptor,Ku=(t,e,r,i)=>{for(var n=i>1?void 0:i?yO(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&vO(e,r,n),n};let Lo=class extends V{constructor(){super(...arguments),this.publicGames=null,this.isLobbyHighlighted=!1,this.mapImages=new Map,this.lobbyIDToStart=new Map,this.serverTimeOffset=0,this.lobbySocket=new bO(t=>this.handleLobbiesUpdate(t))}createRenderRoot(){return this}connectedCallback(){super.connectedCallback(),this.lobbySocket.start()}disconnectedCallback(){super.disconnectedCallback(),this.lobbySocket.stop()}handleLobbiesUpdate(t){this.publicGames=t,this.publicGames&&(this.serverTimeOffset=this.publicGames.serverTime-Date.now()),this.publicGames.games.forEach(e=>{if(!this.lobbyIDToStart.has(e.gameID)){const r=e.startsAt??Date.now();this.lobbyIDToStart.set(e.gameID,r-this.serverTimeOffset)}e.gameConfig&&!this.mapImages.has(e.gameID)&&this.loadMapImage(e.gameID,e.gameConfig.gameMap)}),this.requestUpdate()}async loadMapImage(t,e){try{const r=e,i=Ln.getMapData(r);this.mapImages.set(t,await i.webpPath()),this.requestUpdate()}catch(r){console.error("Failed to load map image:",r)}}render(){if(!this.publicGames)return v``;const t=this.publicGames.games[0];if(!t?.gameConfig)return v``;const e=this.lobbyIDToStart.get(t.gameID)??0,r=Math.max(0,Math.floor((e-Date.now())/1e3)),i=r<=2,n=Oa(r),a=p2(t.gameConfig),s=aC(t.gameConfig.publicGameModifiers),o=this.mapImages.get(t.gameID);return v`
      <button
        @click=${()=>this.lobbyClicked(t)}
        class="group relative isolate flex flex-col w-full h-80 lg:h-96 overflow-hidden rounded-2xl transition-all duration-200 bg-[#3d7bab] hover:scale-[1.01] active:scale-[0.98] focus:outline-none focus-visible:ring-2 focus-visible:ring-white/50"
      >
        <div class="font-sans w-full h-full flex flex-col">
          <!-- Main card gradient - stops before text -->
          <div class="absolute inset-0 pointer-events-none z-10"></div>

          <!-- Map Image Area with gradient overlay -->
          <div class="flex-1 w-full relative overflow-hidden">
            ${o?v`<img
                  src="${o}"
                  alt="${t.gameConfig.gameMap}"
                  class="absolute inset-0 w-full h-full object-cover object-center z-10"
                />`:""}
            <!-- Vignette overlay for dark edges -->
            <div class="pointer-events-none absolute inset-0 z-20"></div>
          </div>

          <!-- Mode Badge in top left -->
          ${a?v`<span
                class="absolute top-4 left-4 px-4 py-1 rounded font-bold text-sm lg:text-base uppercase tracking-widest z-30 bg-slate-800 text-white ring-1 ring-white/10 shadow-sm"
              >
                ${a}
              </span>`:""}

          <!-- Timer in top right -->
          ${r>0?v`
                <span
                  class="absolute top-4 right-4 px-4 py-1 rounded font-bold text-sm lg:text-base tracking-widest z-30 bg-blue-600 text-white"
                >
                  ${n}
                </span>
              `:v`<span
                class="absolute top-4 right-4 px-4 py-1 rounded font-bold text-sm lg:text-base uppercase tracking-widest z-30 bg-green-600 text-white"
              >
                ${f("public_lobby.started")}
              </span>`}

          <!-- Content Banner -->
          <div class="absolute bottom-0 left-0 right-0 z-20">
            <!-- Modifier badges placed just above the gradient overlay -->
            ${s.length>0?v`<div
                  class="absolute -top-8 left-4 z-30 flex gap-2 flex-wrap"
                >
                  ${s.map(l=>v`
                      <span
                        class="px-2 py-0.5 rounded text-xs font-medium uppercase tracking-wide bg-purple-600 text-white"
                      >
                        ${l}
                      </span>
                    `)}
                </div>`:v``}

            <!-- Gradient overlay for text area - adds extra darkening -->
            <div
              class="absolute inset-0 bg-gradient-to-b from-black/60 to-black/90 pointer-events-none"
            ></div>

            <div class="relative p-6 flex flex-col gap-2 text-left">
              <!-- Header row: Status/Join on left, Player Count on right -->
              <div class="flex items-center justify-between w-full">
                <div class="text-base uppercase tracking-widest text-white">
                  ${i?v`<span class="text-green-400 animate-pulse"
                        >${f("public_lobby.starting_game")}</span
                      >`:v`${f("public_lobby.join")}`}
                </div>

                <div class="flex items-center gap-2 text-white z-30">
                  <span class="text-base font-bold uppercase tracking-widest"
                    >${t.numClients}/${t.gameConfig.maxPlayers}</span
                  >
                  <svg
                    class="w-5 h-5 text-white"
                    fill="currentColor"
                    viewBox="0 0 20 20"
                  >
                    <path
                      d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z"
                    ></path>
                  </svg>
                </div>
              </div>

              <!-- Map Name - Full Width -->
              <div
                class="text-2xl lg:text-3xl font-bold text-white leading-none uppercase tracking-widest w-full"
              >
                ${f(`map.${h2(t.gameConfig.gameMap)}`)}
              </div>

              <!-- modifiers moved above gradient overlay -->
            </div>
          </div>
        </div>
      </button>
    `}stop(){this.lobbySocket.stop()}lobbyClicked(t){const e=document.querySelector("username-input");if(e&&typeof e.isValid=="function"&&!e.isValid()){window.dispatchEvent(new CustomEvent("show-message",{detail:{message:e.validationError,color:"red",duration:3e3}}));return}this.dispatchEvent(new CustomEvent("show-public-lobby-modal",{detail:{lobby:t},bubbles:!0,composed:!0}))}};Ku([M()],Lo.prototype,"publicGames",2);Ku([M()],Lo.prototype,"isLobbyHighlighted",2);Ku([M()],Lo.prototype,"mapImages",2);Lo=Ku([F("public-lobby")],Lo);const wO=Ko(class extends _u{constructor(t){if(super(t),t.type!==Wo.ATTRIBUTE||t.name!=="class"||t.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(t){return" "+Object.keys(t).filter((e=>t[e])).join(" ")+" "}update(t,[e]){if(this.st===void 0){this.st=new Set,t.strings!==void 0&&(this.nt=new Set(t.strings.join(" ").split(/\s/).filter((i=>i!==""))));for(const i in e)e[i]&&!this.nt?.has(i)&&this.st.add(i);return this.render(e)}const r=t.element.classList;for(const i of this.st)i in e||(r.remove(i),this.st.delete(i));for(const i in e){const n=!!e[i];n===this.st.has(i)||this.nt?.has(i)||(n?(r.add(i),this.st.add(i)):(r.remove(i),this.st.delete(i)))}return Fr}});var xO=Object.defineProperty,_O=Object.getOwnPropertyDescriptor,Ki=(t,e,r,i)=>{for(var n=i>1?void 0:i?_O(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&xO(e,r,n),n};let Er=class extends V{constructor(){super(...arguments),this.title="",this.translationKey="",this.secondary=!1,this.block=!1,this.blockDesktop=!1,this.disable=!1,this.fill=!1}createRenderRoot(){return this}getButtonClasses(){return{[Er.BASE_CLASS]:!0,"w-full block":this.block,"h-full w-full flex items-center justify-center":this.fill,"lg:w-auto lg:inline-block":!this.block&&!this.blockDesktop&&!this.fill,"lg:w-1/2 lg:mx-auto lg:block":this.blockDesktop,"bg-gray-700 text-gray-100 hover:bg-gray-600":this.secondary,"disabled:opacity-70 disabled:cursor-not-allowed disabled:transform-none disabled:bg-gray-600":this.disable}}render(){return v`
      <button
        class=${wO(this.getButtonClasses())}
        ?disabled=${this.disable}
      >
        <span class="block min-w-0">
          ${this.translationKey===""?this.title:f(this.translationKey)}
        </span>
      </button>
    `}};Er.BASE_CLASS="bg-blue-600 hover:bg-blue-700 text-white font-bold uppercase tracking-wider px-4 py-3 rounded-xl transition-all duration-300 transform hover:-translate-y-px outline-none border border-transparent text-center text-base lg:text-lg whitespace-normal break-words leading-tight overflow-hidden relative";Ki([L({type:String})],Er.prototype,"title",2);Ki([L({type:String})],Er.prototype,"translationKey",2);Ki([L({type:Boolean})],Er.prototype,"secondary",2);Ki([L({type:Boolean})],Er.prototype,"block",2);Ki([L({type:Boolean})],Er.prototype,"blockDesktop",2);Ki([L({type:Boolean})],Er.prototype,"disable",2);Ki([L({type:Boolean})],Er.prototype,"fill",2);Er=Ki([F("o-button")],Er);var kO=Object.defineProperty,SO=Object.getOwnPropertyDescriptor,Ve=(t,e,r,i)=>{for(var n=i>1?void 0:i?SO(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&kO(e,r,n),n};const se={selectedMap:Ne.World,selectedDifficulty:Ce.Easy,disableNations:!1,bots:400,infiniteGold:!1,infiniteTroops:!1,compactMap:!1,maxTimer:!1,maxTimerValue:void 0,instantBuild:!1,randomSpawn:!1,useRandomMap:!1,gameMode:pe.FFA,teamCount:2,goldMultiplier:!1,goldMultiplierValue:void 0,startingGold:!1,startingGoldValue:void 0,disabledUnits:[]};let Ue=class extends gt{constructor(){super(...arguments),this.selectedMap=se.selectedMap,this.selectedDifficulty=se.selectedDifficulty,this.disableNations=se.disableNations,this.bots=se.bots,this.infiniteGold=se.infiniteGold,this.infiniteTroops=se.infiniteTroops,this.compactMap=se.compactMap,this.maxTimer=se.maxTimer,this.maxTimerValue=se.maxTimerValue,this.instantBuild=se.instantBuild,this.randomSpawn=se.randomSpawn,this.useRandomMap=se.useRandomMap,this.gameMode=se.gameMode,this.teamCount=se.teamCount,this.showAchievements=!1,this.mapWins=new Map,this.userMeResponse=!1,this.goldMultiplier=se.goldMultiplier,this.goldMultiplierValue=se.goldMultiplierValue,this.startingGold=se.startingGold,this.startingGoldValue=se.startingGoldValue,this.disabledUnits=[...se.disabledUnits],this.userSettings=new Gt,this.toggleAchievements=()=>{this.showAchievements=!this.showAchievements},this.handleUserMeResponse=t=>{this.userMeResponse=t.detail,this.applyAchievements(t.detail)}}connectedCallback(){super.connectedCallback(),document.addEventListener("userMeResponse",this.handleUserMeResponse)}disconnectedCallback(){document.removeEventListener("userMeResponse",this.handleUserMeResponse),super.disconnectedCallback()}renderNotLoggedInBanner(){return ve.isOnCrazyGames()?v``:v`<div
      class="px-3 py-2 text-xs font-bold uppercase tracking-wider transition-colors duration-200 rounded-lg bg-yellow-500/20 text-yellow-400 border border-yellow-500/30 whitespace-nowrap shrink-0"
    >
      ${f("single_modal.sign_in_for_achievements")}
    </div>`}applyAchievements(t){if(!t){this.mapWins=new Map;return}const r=(Array.isArray(t.player.achievements)?t.player.achievements:[]).find(n=>n?.type==="singleplayer-map")?.data??[],i=new Map;for(const n of r){const{mapName:a,difficulty:s}=n??{},o=typeof a=="string"&&Object.values(Ne).includes(a),l=typeof s=="string"&&Object.values(Ce).includes(s);if(!o||!l)continue;const c=a,u=i.get(c)??new Set;u.add(s),i.set(c,u)}this.mapWins=i}render(){const t=v`
      <div
        class="h-full flex flex-col bg-black/60 backdrop-blur-md rounded-2xl border border-white/10 overflow-hidden"
      >
        <!-- Header -->
        ${It({title:f("main.solo")||"Solo",onBack:this.close,ariaLabel:f("common.back"),rightContent:Aa(this.userMeResponse)?v`<button
                @click=${this.toggleAchievements}
                class="flex items-center gap-2 px-3 py-2 rounded-xl border border-white/10 bg-white/5 hover:bg-white/10 transition-all shrink-0 ${this.showAchievements?"bg-yellow-500/10 border-yellow-500/30 text-yellow-400":"text-white/60"}"
              >
                <img
                  src="/images/MedalIconWhite.svg"
                  class="w-4 h-4 opacity-80 shrink-0"
                  style="${this.showAchievements?"":"filter: grayscale(1);"}"
                />
                <span
                  class="text-xs font-bold uppercase tracking-wider whitespace-nowrap"
                  >${f("single_modal.toggle_achievements")}</span
                >
              </button>`:this.renderNotLoggedInBanner()})}

        <!-- Scrollable Content -->
        <div class="flex-1 overflow-y-auto custom-scrollbar px-6 pb-6 mr-1">
          <div class="max-w-5xl mx-auto space-y-6 pt-4">
            <!-- Map Selection -->
            <div class="space-y-6">
              <div
                class="flex items-center gap-4 pb-2 border-b border-white/10"
              >
                <div
                  class="w-8 h-8 rounded-lg bg-blue-500/20 flex items-center justify-center text-blue-400"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                    class="w-5 h-5"
                  >
                    <path
                      d="M21.731 2.269a2.625 2.625 0 00-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 000-3.712zM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 00-1.32 2.214l-.8 2.685a.75.75 0 00.933.933l2.685-.8a5.25 5.25 0 002.214-1.32L19.513 8.2z"
                    />
                  </svg>
                </div>
                <h3
                  class="text-lg font-bold text-white uppercase tracking-wider"
                >
                  ${f("map.map")}
                </h3>
              </div>

              <map-picker
                .selectedMap=${this.selectedMap}
                .useRandomMap=${this.useRandomMap}
                .showMedals=${this.showAchievements}
                .mapWins=${this.mapWins}
                .onSelectMap=${e=>this.handleMapSelection(e)}
                .onSelectRandom=${()=>this.handleSelectRandomMap()}
              ></map-picker>
            </div>

            <!-- Difficulty Selection -->
            <div class="space-y-6">
              <div
                class="flex items-center gap-4 pb-2 border-b border-white/10"
              >
                <div
                  class="w-8 h-8 rounded-lg bg-green-500/20 flex items-center justify-center text-green-400"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                    class="w-5 h-5"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M12.97 3.97a.75.75 0 011.06 0l7.5 7.5a.75.75 0 010 1.06l-7.5 7.5a.75.75 0 11-1.06-1.06l6.22-6.22H3a.75.75 0 010-1.5h16.19l-6.22-6.22a.75.75 0 010-1.06z"
                      clip-rule="evenodd"
                    />
                  </svg>
                </div>
                <h3
                  class="text-lg font-bold text-white uppercase tracking-wider"
                >
                  ${f("difficulty.difficulty")}
                </h3>
              </div>

              <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                ${Object.entries(Ce).filter(([e])=>isNaN(Number(e))).map(([e,r])=>v`
                      <button
                        class="relative group rounded-xl border transition-all duration-200 w-full overflow-hidden flex flex-col items-center p-4 gap-3 ${this.selectedDifficulty===r?"bg-blue-500/20 border-blue-500/50 shadow-[0_0_15px_rgba(59,130,246,0.2)]":"bg-white/5 border-white/10 hover:bg-white/10 hover:border-white/20"} ${this.disableNations?"opacity-30 cursor-not-allowed grayscale":""}"
                        @click=${()=>!this.disableNations&&this.handleDifficultySelection(r)}
                      >
                        <difficulty-display
                          class="${this.disableNations?"pointer-events-none":""} transform scale-125"
                          .difficultyKey=${e}
                        ></difficulty-display>
                        <div
                          class="text-xs font-bold text-white uppercase tracking-wider text-center w-full mt-1 break-words hyphens-auto"
                        >
                          ${f(`difficulty.${e.toLowerCase()}`)}
                        </div>
                      </button>
                    `)}
              </div>
            </div>

            <!-- Game Mode Selection -->
            <div class="space-y-6">
              <div
                class="flex items-center gap-4 pb-2 border-b border-white/10"
              >
                <div
                  class="w-8 h-8 rounded-lg bg-purple-500/20 flex items-center justify-center text-purple-400"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                    class="w-5 h-5"
                  >
                    <path
                      d="M11.25 4.533A9.707 9.707 0 006 3a9.735 9.735 0 00-3.25.555.75.75 0 00-.5.707v14.25a.75.75 0 001 .707A8.237 8.237 0 016 18.75c1.995 0 3.823.707 5.25 1.886V4.533zM12.75 20.636A8.214 8.214 0 0118 18.75c.966 0 1.89.166 2.75.47a.75.75 0 001-.708V4.262a.75.75 0 00-.5-.707A9.735 9.735 0 0018 3a9.707 9.707 0 00-5.25 1.533v16.103z"
                    />
                  </svg>
                </div>
                <h3
                  class="text-lg font-bold text-white uppercase tracking-wider"
                >
                  ${f("host_modal.mode")}
                </h3>
              </div>

              <div class="grid grid-cols-2 gap-4">
                ${[pe.FFA,pe.Team].map(e=>{const r=this.gameMode===e,i=e===pe.FFA?f("game_mode.ffa"):f("game_mode.teams");return v`
                    <button
                      class="w-full py-6 rounded-xl border transition-all duration-200 flex flex-col items-center justify-center gap-3 ${r?"bg-blue-500/20 border-blue-500/50 shadow-[0_0_15px_rgba(59,130,246,0.2)]":"bg-white/5 border-white/10 hover:bg-white/10 hover:border-white/20"}"
                      @click=${()=>this.handleGameModeSelection(e)}
                    >
                      <div
                        class="text-sm font-bold text-white uppercase tracking-widest break-words hyphens-auto"
                      >
                        ${i}
                      </div>
                    </button>
                  `})}
              </div>
            </div>

            ${this.gameMode===pe.FFA?"":v`
                  <!-- Team Count Selection -->
                  <div class="space-y-6">
                    <div
                      class="text-xs font-bold text-white/40 uppercase tracking-widest mb-4 pl-2"
                    >
                      ${f("host_modal.team_count")}
                    </div>
                    <div class="grid grid-cols-2 md:grid-cols-5 gap-3">
                      ${[2,3,4,5,6,7,In,Mn,En,Ct].map(e=>v`
                          <button
                            class="w-full px-4 py-3 rounded-xl border transition-all duration-200 flex items-center justify-center ${this.teamCount===e?"bg-blue-500/20 border-blue-500/50 shadow-[0_0_15px_rgba(59,130,246,0.2)]":"bg-white/5 border-white/10 hover:bg-white/10 hover:border-white/20"}"
                            @click=${()=>this.handleTeamCountSelection(e)}
                          >
                            <div
                              class="text-xs font-bold text-white uppercase tracking-wider text-center break-words hyphens-auto"
                            >
                              ${typeof e=="string"?f(e===Ct?"public_lobby.teams_hvn":`host_modal.teams_${e}`):f("public_lobby.teams",{num:e})}
                            </div>
                          </button>
                        `)}
                    </div>
                  </div>
                `}

            <!-- Game Options -->
            <div class="space-y-6">
              <div
                class="flex items-center gap-4 pb-2 border-b border-white/10"
              >
                <div
                  class="w-8 h-8 rounded-lg bg-orange-500/20 flex items-center justify-center text-orange-400"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                    class="w-5 h-5"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M11.078 2.25c-.917 0-1.699.663-1.85 1.567L9.05 4.889c-.02.12-.115.26-.297.348a7.493 7.493 0 00-.986.57c-.166.115-.334.126-.45.083L6.3 5.508a1.875 1.875 0 00-2.282.819l-.922 1.597a1.875 1.875 0 00.432 2.385l.84.692c.095.078.17.229.154.43a7.598 7.598 0 000 1.139c.015.2-.059.352-.153.43l-.841.692a1.875 1.875 0 00-.432 2.385l.922 1.597a1.875 1.875 0 002.282.818l1.019-.382c.115-.043.283-.031.45.082.312.214.641.405.985.57.182.088.277.228.297.35l.178 1.071c.151.904.933 1.567 1.85 1.567h1.844c.916 0 1.699-.663 1.85-1.567l.178-1.072c.02-.12.114-.26.297-.349.344-.165.673-.356.985-.57.167-.114.335-.125.45-.082l1.02.382a1.875 1.875 0 002.28-.819l.922-1.597a1.875 1.875 0 00-.432-2.385l-.84-.692c-.095-.078-.17-.229-.154-.43a7.614 7.614 0 000-1.139c-.016-.2.059-.352.153-.43l.84-.692c.708-.582.891-1.59.433-2.385l-.922-1.597a1.875 1.875 0 00-2.282-.818l-1.02.382c-.114.043-.282.031-.449-.083a7.49 7.49 0 00-.985-.57c-.183-.087-.277-.227-.297-.348l-.179-1.072a1.875 1.875 0 00-1.85-1.567h-1.843zM12 15.75a3.75 3.75 0 100-7.5 3.75 3.75 0 000 7.5z"
                      clip-rule="evenodd"
                    />
                  </svg>
                </div>
                <h3
                  class="text-lg font-bold text-white uppercase tracking-wider"
                >
                  ${f("single_modal.options_title")}
                </h3>
              </div>

              <div class="grid grid-cols-2 lg:grid-cols-4 gap-4">
                <!-- Bot Slider Card -->
                <div
                  class="col-span-2 rounded-xl p-4 flex flex-col justify-center min-h-[100px] border transition-all duration-200 ${this.bots>0?"bg-blue-500/20 border-blue-500/50 shadow-[0_0_15px_rgba(59,130,246,0.2)]":"bg-white/5 border-white/10 hover:bg-white/10 hover:border-white/20 opacity-80"}"
                >
                  <fluent-slider
                    min="0"
                    max="400"
                    step="1"
                    .value=${this.bots}
                    labelKey="single_modal.bots"
                    disabledKey="single_modal.bots_disabled"
                    @value-changed=${this.handleBotsChange}
                  ></fluent-slider>
                </div>

                ${this.renderOptionToggle("single_modal.disable_nations",this.disableNations,e=>this.disableNations=e,this.gameMode===pe.Team&&this.teamCount===Ct)}
                ${this.renderOptionToggle("single_modal.instant_build",this.instantBuild,e=>this.instantBuild=e)}
                ${this.renderOptionToggle("single_modal.random_spawn",this.randomSpawn,e=>this.randomSpawn=e)}
                ${this.renderOptionToggle("single_modal.infinite_gold",this.infiniteGold,e=>this.infiniteGold=e)}
                ${this.renderOptionToggle("single_modal.infinite_troops",this.infiniteTroops,e=>this.infiniteTroops=e)}
                ${this.renderOptionToggle("single_modal.compact_map",this.compactMap,e=>{this.compactMap=e,e&&this.bots===400?this.bots=100:!e&&this.bots===100&&(this.bots=400)})}
                ${kn({labelKey:"single_modal.max_timer",checked:this.maxTimer,onClick:()=>{this.maxTimer=!this.maxTimer,this.maxTimer?((!this.maxTimerValue||this.maxTimerValue<=0)&&(this.maxTimerValue=30),setTimeout(()=>{const e=this.getEndTimerInput();e&&(e.focus(),e.select())},0)):this.maxTimerValue=void 0},input:_n({id:"end-timer-value",min:1,max:120,value:this.maxTimerValue??"",ariaLabel:f("single_modal.max_timer"),placeholder:f("single_modal.max_timer_placeholder"),onInput:this.handleMaxTimerValueChanges,onKeyDown:this.handleMaxTimerValueKeyDown})})}

                <!-- Gold Multiplier -->
                ${kn({labelKey:"single_modal.gold_multiplier",checked:this.goldMultiplier,onClick:()=>{this.goldMultiplier=!this.goldMultiplier,this.goldMultiplier?((!this.goldMultiplierValue||this.goldMultiplierValue<=0)&&(this.goldMultiplierValue=2),setTimeout(()=>{const e=this.renderRoot.querySelector("#gold-multiplier-value");e&&(e.focus(),e.select())},0)):this.goldMultiplierValue=void 0},input:_n({id:"gold-multiplier-value",min:.1,max:1e3,step:"any",value:this.goldMultiplierValue??"",ariaLabel:f("single_modal.gold_multiplier"),placeholder:f("single_modal.gold_multiplier_placeholder"),onChange:this.handleGoldMultiplierValueChanges,onKeyDown:this.handleGoldMultiplierValueKeyDown})})}

                <!-- Starting Gold -->
                ${kn({labelKey:"single_modal.starting_gold",checked:this.startingGold,onClick:()=>{this.startingGold=!this.startingGold,this.startingGold?((!this.startingGoldValue||this.startingGoldValue<0)&&(this.startingGoldValue=5e6),setTimeout(()=>{const e=this.renderRoot.querySelector("#starting-gold-value");e&&(e.focus(),e.select())},0)):this.startingGoldValue=void 0},input:_n({id:"starting-gold-value",min:0,max:1e9,step:1e5,value:this.startingGoldValue??"",ariaLabel:f("single_modal.starting_gold"),placeholder:f("single_modal.starting_gold_placeholder"),onInput:this.handleStartingGoldValueChanges,onKeyDown:this.handleStartingGoldValueKeyDown})})}
              </div>
            </div>

            <!-- Enable Settings -->
            <div class="space-y-6">
              <div
                class="flex items-center gap-4 pb-2 border-b border-white/10"
              >
                <div
                  class="w-8 h-8 rounded-lg bg-teal-500/20 flex items-center justify-center text-teal-400"
                >
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    viewBox="0 0 24 24"
                    fill="currentColor"
                    class="w-5 h-5"
                  >
                    <path
                      fill-rule="evenodd"
                      d="M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25zm0 8.625a1.125 1.125 0 100 2.25 1.125 1.125 0 000-2.25zM15.375 12a1.125 1.125 0 112.25 0 1.125 1.125 0 01-2.25 0zM7.5 10.875a1.125 1.125 0 100 2.25 1.125 1.125 0 000-2.25z"
                      clip-rule="evenodd"
                    />
                  </svg>
                </div>
                <h3
                  class="text-lg font-bold text-white uppercase tracking-wider"
                >
                  ${f("single_modal.enables_title")}
                </h3>
              </div>
              <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4">
                ${n5({disabledUnits:this.disabledUnits,toggleUnit:this.toggleUnit.bind(this)})}
              </div>
            </div>
          </div>
        </div>

        <!-- Footer Action -->
        <div class="p-6 border-t border-white/10 bg-black/20">
          ${Aa(this.userMeResponse)&&this.hasOptionsChanged()?v`<div
                class="mb-4 px-4 py-3 rounded-xl bg-yellow-500/20 border border-yellow-500/30 text-yellow-400 text-xs font-bold uppercase tracking-wider text-center"
              >
                ${f("single_modal.options_changed_no_achievements")}
              </div>`:null}
          <button
            @click=${this.startGame}
            class="w-full py-4 text-sm font-bold text-white uppercase tracking-widest bg-blue-600 hover:bg-blue-500 rounded-xl transition-all shadow-lg shadow-blue-900/20 hover:shadow-blue-900/40 hover:-translate-y-0.5 active:translate-y-0"
          >
            ${f("single_modal.start")}
          </button>
        </div>
      </div>
    `;return this.inline?t:v`
      <o-modal
        id="singlePlayerModal"
        title="${f("main.solo")||"Solo"}"
        ?inline=${this.inline}
        hideHeader
        hideCloseButton
      >
        ${t}
      </o-modal>
    `}hasOptionsChanged(){return this.disableNations!==se.disableNations||this.bots!==se.bots||this.infiniteGold!==se.infiniteGold||this.infiniteTroops!==se.infiniteTroops||this.compactMap!==se.compactMap||this.maxTimer!==se.maxTimer||this.instantBuild!==se.instantBuild||this.randomSpawn!==se.randomSpawn||this.gameMode!==se.gameMode||this.goldMultiplier!==se.goldMultiplier||this.startingGold!==se.startingGold||this.disabledUnits.length>0}renderOptionToggle(t,e,r,i=!1){return i?v``:v`
      <button
        class="relative p-4 rounded-xl border transition-all duration-200 flex flex-col items-center justify-center gap-2 h-full min-h-[100px] w-full cursor-pointer ${e?"bg-blue-500/20 border-blue-500/50 shadow-[0_0_15px_rgba(59,130,246,0.2)]":"bg-white/5 border-white/10 hover:bg-white/10 hover:border-white/20 opacity-80"}"
        @click=${()=>r(!e)}
      >
        <div
          class="text-xs uppercase font-bold tracking-wider text-center w-full leading-tight break-words hyphens-auto ${e?"text-white":"text-white/60"}"
        >
          ${f(t)}
        </div>
      </button>
    `}onClose(){this.selectedMap=se.selectedMap,this.selectedDifficulty=se.selectedDifficulty,this.gameMode=se.gameMode,this.useRandomMap=se.useRandomMap,this.disableNations=se.disableNations,this.bots=se.bots,this.infiniteGold=se.infiniteGold,this.infiniteTroops=se.infiniteTroops,this.compactMap=se.compactMap,this.maxTimer=se.maxTimer,this.maxTimerValue=se.maxTimerValue,this.instantBuild=se.instantBuild,this.randomSpawn=se.randomSpawn,this.teamCount=se.teamCount,this.disabledUnits=[...se.disabledUnits],this.goldMultiplier=se.goldMultiplier,this.goldMultiplierValue=se.goldMultiplierValue,this.startingGold=se.startingGold,this.startingGoldValue=se.startingGoldValue}handleSelectRandomMap(){this.useRandomMap=!0}handleMapSelection(t){this.selectedMap=t,this.useRandomMap=!1}handleDifficultySelection(t){this.selectedDifficulty=t}handleBotsChange(t){const r=t.detail.value;isNaN(r)||r<0||r>400||(this.bots=r)}handleMaxTimerValueKeyDown(t){["-","+","e"].includes(t.key)&&t.preventDefault()}getEndTimerInput(){return this.renderRoot.querySelector("#end-timer-value")??this.querySelector("#end-timer-value")}handleMaxTimerValueChanges(t){const e=t.target;e.value=e.value.replace(/[e+-]/gi,"");const r=parseInt(e.value);isNaN(r)||r<1||r>120?this.maxTimerValue=void 0:this.maxTimerValue=r}handleGoldMultiplierValueKeyDown(t){["+","-","e","E"].includes(t.key)&&t.preventDefault()}handleGoldMultiplierValueChanges(t){const e=t.target,r=parseFloat(e.value);isNaN(r)||r<.1||r>1e3?(this.goldMultiplierValue=void 0,e.value=""):this.goldMultiplierValue=r}handleStartingGoldValueKeyDown(t){["-","+","e","E"].includes(t.key)&&t.preventDefault()}handleStartingGoldValueChanges(t){const e=t.target;e.value=e.value.replace(/[eE+-]/g,"");const r=parseInt(e.value);isNaN(r)||r<0||r>1e9?this.startingGoldValue=void 0:this.startingGoldValue=r}handleGameModeSelection(t){this.gameMode=t}handleTeamCountSelection(t){this.teamCount=t}getRandomMap(){const t=Object.values(Ne),e=Math.floor(Math.random()*t.length);return t[e]}toggleUnit(t,e){this.disabledUnits=e?[...this.disabledUnits,t]:this.disabledUnits.filter(r=>r!==t)}async startGame(){let t;if(this.maxTimer){if(!this.maxTimerValue||this.maxTimerValue<=0){console.error("Max timer is enabled but no valid value is set"),alert(f("single_modal.max_timer_invalid")||"Please enter a valid max timer value (1-120 minutes)");const l=this.getEndTimerInput();l&&(l.focus(),l.select());return}t=Math.max(1,Math.min(120,this.maxTimerValue))}this.useRandomMap&&(this.selectedMap=this.getRandomMap()),console.log(`Starting single player game with map: ${Ne[this.selectedMap]}${this.useRandomMap?" (Randomly selected)":""}`);const e=oi(),r=oi(),i=document.querySelector("username-input");i||console.warn("Username input element not found");const n=document.querySelector("flag-input");n||console.warn("Flag input element not found");const a=await as();let s=this.userSettings.getSelectedPatternName(a);s??=a?this.userSettings.getDevOnlyPattern()??null:null;const o=this.userSettings.getSelectedColor();await ve.requestMidgameAd(),this.dispatchEvent(new CustomEvent("join-lobby",{detail:{gameID:r,gameStartInfo:{gameID:r,players:[{clientID:e,username:i?.getCurrentUsername()??"Player",cosmetics:{flag:(n?.getCurrentFlag()??"xx")==="xx"?"":n?.getCurrentFlag()??"",pattern:s??void 0,color:o?{color:o}:void 0}}],config:{gameMap:this.selectedMap,gameMapSize:this.compactMap?sr.Compact:sr.Normal,gameType:lt.Singleplayer,gameMode:this.gameMode,playerTeams:this.teamCount,difficulty:this.selectedDifficulty,maxTimerValue:t,bots:this.bots,infiniteGold:this.infiniteGold,donateGold:this.gameMode===pe.Team,donateTroops:this.gameMode===pe.Team,infiniteTroops:this.infiniteTroops,instantBuild:this.instantBuild,randomSpawn:this.randomSpawn,disabledUnits:this.disabledUnits.map(l=>Object.values(C).find(c=>c===l)).filter(l=>l!==void 0),...this.gameMode===pe.Team&&this.teamCount===Ct?{disableNations:!1}:{disableNations:this.disableNations},...this.goldMultiplier&&this.goldMultiplierValue?{goldMultiplier:this.goldMultiplierValue}:{},...this.startingGold&&this.startingGoldValue!==void 0?{startingGold:this.startingGoldValue}:{}},lobbyCreatedAt:Date.now()},source:"singleplayer"},bubbles:!0,composed:!0})),this.close()}};Ve([M()],Ue.prototype,"selectedMap",2);Ve([M()],Ue.prototype,"selectedDifficulty",2);Ve([M()],Ue.prototype,"disableNations",2);Ve([M()],Ue.prototype,"bots",2);Ve([M()],Ue.prototype,"infiniteGold",2);Ve([M()],Ue.prototype,"infiniteTroops",2);Ve([M()],Ue.prototype,"compactMap",2);Ve([M()],Ue.prototype,"maxTimer",2);Ve([M()],Ue.prototype,"maxTimerValue",2);Ve([M()],Ue.prototype,"instantBuild",2);Ve([M()],Ue.prototype,"randomSpawn",2);Ve([M()],Ue.prototype,"useRandomMap",2);Ve([M()],Ue.prototype,"gameMode",2);Ve([M()],Ue.prototype,"teamCount",2);Ve([M()],Ue.prototype,"showAchievements",2);Ve([M()],Ue.prototype,"mapWins",2);Ve([M()],Ue.prototype,"userMeResponse",2);Ve([M()],Ue.prototype,"goldMultiplier",2);Ve([M()],Ue.prototype,"goldMultiplierValue",2);Ve([M()],Ue.prototype,"startingGold",2);Ve([M()],Ue.prototype,"startingGoldValue",2);Ve([M()],Ue.prototype,"disabledUnits",2);Ue=Ve([F("single-player-modal")],Ue);var AO=Object.defineProperty,CO=Object.getOwnPropertyDescriptor,nl=(t,e,r,i)=>{for(var n=i>1?void 0:i?CO(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&AO(e,r,n),n};let Fi=class extends gt{constructor(){super(),this.previewButton=null,this.selectedColor=null,this.activeTab="patterns",this.showOnlyOwned=!1,this.cosmetics=null,this.userSettings=new Gt,this.isActive=!1,this.affiliateCode=null,this.userMeResponse=!1,this._onPatternSelected=()=>{this.updateFromSettings(),this.refresh()}}connectedCallback(){super.connectedCallback(),document.addEventListener("userMeResponse",t=>{this.onUserMe(t.detail)}),window.addEventListener("pattern-selected",this._onPatternSelected)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("pattern-selected",this._onPatternSelected)}updateFromSettings(){this.selectedPattern=this.cosmetics!==null?this.userSettings.getSelectedPatternName(this.cosmetics):null,this.selectedColor=this.userSettings.getSelectedColor()??null}async onUserMe(t){Aa(t)||(this.userSettings.setSelectedPatternName(void 0),this.userSettings.setSelectedColor(void 0),this.selectedPattern=null,this.selectedColor=null),this.userMeResponse=t,this.cosmetics=await as(),this.updateFromSettings(),this.refresh()}renderTabNavigation(){return v`
      ${It({title:f("territory_patterns.title"),onBack:this.close,ariaLabel:f("common.back"),rightContent:Aa(this.userMeResponse)?void 0:v`<div class="flex items-center">
              ${this.renderNotLoggedInWarning()}
            </div>`})}
      <!-- TEMP DISABlE TAB SWITCHING
        <div class="flex items-center gap-2 justify-center">
          <button
            class="px-6 py-2 text-xs font-bold transition-all duration-200 rounded-lg uppercase tracking-widest ${this.activeTab==="patterns"?"bg-blue-500/20 text-blue-400 border border-blue-500/30 shadow-[0_0_15px_rgba(59,130,246,0.2)]":"text-white/40 hover:text-white hover:bg-white/5 border border-transparent"}"
            @click=${()=>this.activeTab="patterns"}
          >
            ${f("territory_patterns.title")}
          </button>
          <button
            class="px-6 py-2 text-xs font-bold transition-all duration-200 rounded-lg uppercase tracking-widest ${this.activeTab==="colors"?"bg-blue-500/20 text-blue-400 border border-blue-500/30 shadow-[0_0_15px_rgba(59,130,246,0.2)]":"text-white/40 hover:text-white hover:bg-white/5 border border-transparent"}"
            @click=${()=>this.activeTab="colors"}
          >
            ${f("territory_patterns.colors")}
          </button>
          TEMP DISABlE TAB SWITCHING -->
    `}renderPatternGrid(){const t=[],e=[null,...Object.values(this.cosmetics?.patterns??{})];for(const r of e){const i=r?[...r.colorPalettes??[],null]:[null];for(const n of i){let a="owned";if(r&&(a=Jx(r,n,this.userMeResponse,this.affiliateCode)),a==="blocked")continue;if(this.showOnlyOwned){if(a!=="owned")continue}else if(a==="owned")continue;const s=r===null,o=s&&this.selectedPattern===null||!s&&this.selectedPattern&&this.selectedPattern.name===r?.name&&(this.selectedPattern.colorPalette?.name??null)===(n?.name??null);t.push(v`
          <pattern-button
            .pattern=${r}
            .colorPalette=${this.cosmetics?.colorPalettes?.[n?.name??""]??null}
            .requiresPurchase=${a==="purchasable"}
            .selected=${o}
            .onSelect=${l=>this.selectPattern(l)}
            .onPurchase=${(l,c)=>Zx(l,c)}
          ></pattern-button>
        `)}}return v`
      <div class="flex flex-col">
        <div class="pt-4 flex justify-center">
          ${Aa(this.userMeResponse)?this.renderMySkinsButton():v``}
        </div>
        ${!this.showOnlyOwned&&t.length===0?v`<div
              class="text-white/40 text-sm font-bold uppercase tracking-wider text-center py-8"
            >
              ${f("territory_patterns.all_owned")}
            </div>`:v`
              <div
                class="flex flex-wrap gap-4 p-2 justify-center items-stretch content-start"
              >
                ${t}
              </div>
            `}
      </div>
    `}renderMySkinsButton(){return v`<button
      class="px-4 py-2 text-xs font-bold transition-all duration-200 rounded-lg uppercase tracking-wider border mb-4 ${this.showOnlyOwned?"bg-blue-500/20 text-blue-400 border-blue-500/50 shadow-[0_0_10px_rgba(59,130,246,0.3)]":"bg-white/5 text-white/60 border-white/10 hover:bg-white/10 hover:text-white"}"
      @click=${()=>{this.showOnlyOwned=!this.showOnlyOwned}}
    >
      ${f("territory_patterns.show_only_owned")}
    </button>`}renderNotLoggedInWarning(){return v`<div
      class="px-4 py-2 text-xs font-bold uppercase tracking-wider transition-colors duration-200 rounded-lg bg-red-500/20 text-red-400 border border-red-500/30"
    >
      ${f("territory_patterns.not_logged_in")}
    </div>`}renderColorSwatchGrid(){const t=(this.userMeResponse===!1?[]:this.userMeResponse.player.flares??[]).filter(e=>e.startsWith("color:")).map(e=>e.split(":")[1]);return v`
      <div class="flex flex-wrap gap-3 p-2 justify-center items-center">
        ${t.map(e=>v`
            <div
              class="w-12 h-12 rounded-xl border-2 border-white/10 cursor-pointer transition-all duration-200 hover:scale-110 hover:shadow-[0_0_15px_rgba(255,255,255,0.3)] hover:border-white relative group"
              style="background-color: ${e};"
              title="${e}"
              @click=${()=>this.selectColor(e)}
            >
              <div
                class="absolute inset-0 rounded-xl ring-2 ring-inset ring-black/20"
              ></div>
            </div>
          `)}
      </div>
    `}render(){if(!this.isActive&&!this.inline)return v``;const t=v`
      <div
        class="h-full flex flex-col ${this.inline?"bg-black/60 backdrop-blur-md rounded-2xl border border-white/10":""}"
      >
        ${this.renderTabNavigation()}
        <div class="overflow-y-auto pr-2 custom-scrollbar mr-1">
          ${this.activeTab==="patterns"?this.renderPatternGrid():this.renderColorSwatchGrid()}
        </div>
      </div>
    `;return this.inline?t:v`
      <o-modal
        id="territoryPatternsModal"
        title="${this.activeTab==="patterns"?f("territory_patterns.title"):f("territory_patterns.colors")}"
        ?inline=${this.inline}
        ?hideHeader=${!0}
        ?hideCloseButton=${!0}
      >
        ${t}
      </o-modal>
    `}async open(t){this.isActive=!0,typeof t=="string"?(this.affiliateCode=t,this.showOnlyOwned=!1):t!==null&&typeof t=="object"&&!Array.isArray(t)?(this.affiliateCode=t.affiliateCode??null,this.showOnlyOwned=t.showOnlyOwned??!1):(this.affiliateCode=null,this.showOnlyOwned=!1),await this.refresh(),super.open()}close(){this.isActive=!1,this.affiliateCode=null,super.close()}selectPattern(t){if(this.selectedColor=null,this.userSettings.setSelectedColor(void 0),t===null)this.userSettings.setSelectedPatternName(void 0);else{const e=t.colorPalette?.name===void 0?t.name:`${t.name}:${t.colorPalette.name}`;this.userSettings.setSelectedPatternName(`pattern:${e}`)}this.selectedPattern=t,this.refresh(),this.dispatchEvent(new CustomEvent("pattern-selected",{bubbles:!0})),this.showSkinSelectedPopup(),this.close()}showSkinSelectedPopup(){let t=f("territory_patterns.pattern.default");this.selectedPattern&&this.selectedPattern.name&&(t=this.selectedPattern.name.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),this.selectedPattern.colorPalette&&this.selectedPattern.colorPalette.name&&(t+=` (${this.selectedPattern.colorPalette.name})`)),window.dispatchEvent(new CustomEvent("show-message",{detail:{message:`${t} ${f("territory_patterns.selected")}`,duration:2e3}}))}selectColor(t){this.selectedPattern=null,this.userSettings.setSelectedPatternName(void 0),this.selectedColor=t,this.userSettings.setSelectedColor(t),this.refresh(),this.dispatchEvent(new CustomEvent("pattern-selected",{bubbles:!0})),this.close()}renderColorPreview(t,e,r){return v`
      <div
        class="w-full h-full rounded"
        style="background-color: ${t};"
      ></div>
    `}async refresh(){this.requestUpdate()}};nl([M()],Fi.prototype,"selectedPattern",2);nl([M()],Fi.prototype,"selectedColor",2);nl([M()],Fi.prototype,"activeTab",2);nl([M()],Fi.prototype,"showOnlyOwned",2);Fi=nl([F("territory-patterns-modal")],Fi);var TO=Object.getOwnPropertyDescriptor,EO=(t,e,r,i)=>{for(var n=i>1?void 0:i?TO(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=s(n)||n);return n};let op=class extends gt{constructor(){super(),this.isAttemptingLogin=!1,this.retryInterval=void 0,this.token=null,this.email=null,this.attemptCount=0}render(){const t=f("token_login_modal.title"),e=v`
      <div
        class="h-full flex flex-col ${this.inline?"bg-black/60 backdrop-blur-md rounded-2xl border border-white/10 overflow-hidden":""}"
      >
        ${It({title:t,onBack:()=>this.close(),ariaLabel:f("common.back")})}
        <div class="flex-1 flex flex-col gap-4 p-6">
          ${this.email?this.loginSuccess(this.email):this.loggingIn()}
        </div>
      </div>
    `;return this.inline?e:v`
      <o-modal
        id="token-login-modal"
        title="${t}"
        hideHeader
        hideCloseButton
        maxWidth="620px"
      >
        ${e}
      </o-modal>
    `}loggingIn(){const t=f("token_login_modal.logging_in");return v`
      <div class="flex items-center gap-4">
        <div
          class="w-12 h-12 rounded-full border border-blue-400/40 bg-blue-500/10 flex items-center justify-center"
        >
          <div
            class="w-6 h-6 border-2 border-blue-400/30 border-t-blue-400 rounded-full animate-spin"
          ></div>
        </div>
        <div class="flex flex-col gap-2">
          <p class="text-lg font-semibold text-white">${t}</p>
          <div class="h-1 w-full bg-white/10 rounded-full overflow-hidden">
            <div class="h-full w-1/2 bg-blue-400/80 animate-pulse"></div>
          </div>
        </div>
      </div>
    `}loginSuccess(t){const e=f("token_login_modal.success",{email:t});return v`
      <div class="flex items-center gap-4">
        <div
          class="w-12 h-12 rounded-full border border-emerald-400/40 bg-emerald-500/10 flex items-center justify-center"
        >
          <div class="w-2 h-2 bg-emerald-400 rounded-full animate-pulse"></div>
        </div>
        <p class="text-base text-white/90">${e}</p>
      </div>
    `}open(){this.token&&(super.open(),clearInterval(this.retryInterval),this.retryInterval=setInterval(()=>this.tryLogin(),3e3))}openWithToken(t){this.token=t,this.email=null,this.attemptCount=0,this.isAttemptingLogin=!1,this.open()}close(){this.token=null,clearInterval(this.retryInterval),this.attemptCount=0,super.close(),this.isAttemptingLogin=!1}async tryLogin(){if(!this.isAttemptingLogin){if(this.attemptCount>3){this.close(),alert("Login failed. Please try again later.");return}if(this.attemptCount++,this.isAttemptingLogin=!0,this.token===null){this.close();return}try{if(this.email=await dC(this.token),!this.email)return;clearInterval(this.retryInterval),setTimeout(()=>{this.close(),window.location.reload()},1e3),this.requestUpdate()}catch(t){console.error(t)}finally{this.isAttemptingLogin=!1}}}};op=EO([F("token-login")],op);var MO=Object.defineProperty,IO=Object.getOwnPropertyDescriptor,Yi=(t,e,r,i)=>{for(var n=i>1?void 0:i?IO(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&MO(e,r,n),n};let mi=class extends V{constructor(){super(...arguments),this.label="Setting",this.description="",this.action="",this.defaultKey="",this.value="",this.display="",this.easter=!1,this.listening=!1}createRenderRoot(){return this}render(){const t=this.value===""?"":this.value||this.defaultKey,e=this.value!==void 0&&this.value!==this.defaultKey,r=this.display||t,i=this.easter?"bg-[linear-gradient(270deg,#990033,#996600,#336600,#008080,#1c3f99,#5e0099,#990033)] bg-[length:1400%_1400%] animate-rainbow-bg text-white hover:bg-[linear-gradient(270deg,#990033,#996600,#336600,#008080,#1c3f99,#5e0099,#990033)]":"";return v`
      <div
        class="flex flex-row items-center justify-between w-full p-4 bg-white/5 border border-white/10 rounded-xl hover:bg-white/10 transition-all gap-4 ${i}"
      >
        <div class="flex flex-col flex-1 min-w-0 mr-4">
          <label class="text-white font-bold text-base block mb-1"
            >${this.label}</label
          >
          <div class="text-white/50 text-sm leading-snug">
            ${this.description}
          </div>
        </div>

        <div class="flex items-center gap-3 shrink-0">
          <div
            class="relative h-12 min-w-[80px] px-4 flex items-center justify-center bg-black/60 border border-white/20 rounded-lg text-xl font-bold font-mono shadow-inner hover:border-blue-500 focus:border-blue-500 focus:ring-2 focus:ring-blue-500/50 transition-all cursor-pointer select-none text-white
            ${this.listening?"border-blue-500 text-blue-400 ring-2 ring-blue-500/50":""}"
            role="button"
            aria-label="${f("user_setting.press_a_key")}"
            tabindex="0"
            @keydown=${this.handleKeydown}
            @click=${this.startListening}
            @blur=${this.handleBlur}
          >
            ${this.listening?"...":this.displayKey(r)}
          </div>

          <div class="flex flex-col gap-1">
            <button
              class="text-[10px] font-bold uppercase tracking-wider bg-white/5 hover:bg-white/20 border border-white/10 px-3 py-1 rounded text-white/60 hover:text-white transition-colors ${e?"":"opacity-50 cursor-not-allowed pointer-events-none"}"
              @click=${this.resetToDefault}
              ?disabled=${!e}
            >
              ${f("user_setting.reset")}
            </button>
            <button
              class="text-[10px] font-bold uppercase tracking-wider bg-white/5 hover:bg-red-500/20 border border-white/10 hover:border-red-500/50 px-3 py-1 rounded text-white/60 hover:text-red-200 transition-colors"
              @click=${this.unbindKey}
            >
              ${f("user_setting.unbind")}
            </button>
          </div>
        </div>
      </div>
    `}displayKey(t){return!t||t==="Null"?f("common.none"):g2(t)}startListening(){this.listening=!0,this.requestUpdate()}handleKeydown(t){if(!this.listening)return;if(t.key==="Tab"||t.key==="Escape"){t.key==="Escape"&&(this.listening=!1,this.requestUpdate());return}t.preventDefault();const e=t.code,r=this.value;this.value=e;const i=new CustomEvent("change",{detail:{action:this.action,value:e,key:t.key,prevValue:r},bubbles:!0,composed:!0});this.dispatchEvent(i),this.listening=!1,this.requestUpdate()}handleBlur(){this.listening=!1,this.requestUpdate()}resetToDefault(){this.value=this.defaultKey,this.dispatchEvent(new CustomEvent("change",{detail:{action:this.action,value:this.defaultKey},bubbles:!0,composed:!0}))}unbindKey(){this.value="Null",this.dispatchEvent(new CustomEvent("change",{detail:{action:this.action,value:"Null",key:""},bubbles:!0,composed:!0})),this.requestUpdate()}};Yi([L()],mi.prototype,"label",2);Yi([L()],mi.prototype,"description",2);Yi([L({type:String,reflect:!0})],mi.prototype,"action",2);Yi([L({type:String})],mi.prototype,"defaultKey",2);Yi([L({type:String})],mi.prototype,"value",2);Yi([L({type:String})],mi.prototype,"display",2);Yi([L({type:Boolean})],mi.prototype,"easter",2);mi=Yi([F("setting-keybind")],mi);var PO=Object.defineProperty,$O=Object.getOwnPropertyDescriptor,Qn=(t,e,r,i)=>{for(var n=i>1?void 0:i?$O(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&PO(e,r,n),n};let qi=class extends V{constructor(){super(...arguments),this.label="Setting",this.description="",this.value=0,this.min=0,this.max=100,this.easter=!1}createRenderRoot(){return this}handleInput(t){const e=t.target,r=Number(e.value);this.value=r,this.dispatchEvent(new CustomEvent("change",{detail:{value:r},bubbles:!0,composed:!0}))}render(){const t=this.easter?"bg-[linear-gradient(270deg,#990033,#996600,#336600,#008080,#1c3f99,#5e0099,#990033)] bg-[length:1400%_1400%] animate-rainbow-bg text-white hover:bg-[linear-gradient(270deg,#990033,#996600,#336600,#008080,#1c3f99,#5e0099,#990033)]":"";return v`
      <div
        class="flex flex-row items-center justify-between w-full p-4 bg-white/5 border border-white/10 rounded-xl hover:bg-white/10 transition-all gap-4 ${t}"
      >
        <div class="flex flex-col flex-1 min-w-0 mr-4">
          <label
            class="text-white font-bold text-base block mb-1"
            for="setting-number-input"
            >${this.label}</label
          >
          <div class="text-white/50 text-sm leading-snug">
            ${this.description}
          </div>
        </div>
        <input
          type="number"
          id="setting-number-input"
          class="shrink-0 w-[100px] py-2 px-3 border border-white/20 rounded-lg bg-black/60 text-white font-mono text-center focus:outline-none focus:border-blue-500 focus:ring-1 focus:ring-blue-500 transition-all"
          .value=${String(this.value??0)}
          min=${this.min}
          max=${this.max}
          @input=${this.handleInput}
        />
      </div>
    `}};Qn([L()],qi.prototype,"label",2);Qn([L()],qi.prototype,"description",2);Qn([L({type:Number})],qi.prototype,"value",2);Qn([L({type:Number})],qi.prototype,"min",2);Qn([L({type:Number})],qi.prototype,"max",2);Qn([L({type:Boolean})],qi.prototype,"easter",2);qi=Qn([F("setting-number")],qi);var RO=Object.defineProperty,DO=Object.getOwnPropertyDescriptor,Jn=(t,e,r,i)=>{for(var n=i>1?void 0:i?DO(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&RO(e,r,n),n};let ji=class extends V{constructor(){super(...arguments),this.label="Setting",this.description="",this.value=0,this.min=0,this.max=100,this.easter=!1}createRenderRoot(){return this}handleInput(t){const e=t.target;this.value=Number(e.value),this.updateSliderStyle(e),this.dispatchEvent(new CustomEvent("change",{detail:{value:this.value},bubbles:!0,composed:!0}))}updateSliderStyle(t){const e=(this.value-this.min)/(this.max-this.min)*100,r=Math.max(0,Math.min(100,e));t.style.setProperty("--fill",`${r}%`)}firstUpdated(){const t=this.renderRoot.querySelector("input[type=range]");t&&this.updateSliderStyle(t)}render(){const t=this.easter?"bg-[linear-gradient(270deg,#990033,#996600,#336600,#008080,#1c3f99,#5e0099,#990033)] bg-[length:1400%_1400%] animate-rainbow-bg text-white hover:bg-[linear-gradient(270deg,#990033,#996600,#336600,#008080,#1c3f99,#5e0099,#990033)]":"";return v`
      <div
        class="flex flex-row items-center justify-between w-full p-4 bg-white/5 border border-white/10 rounded-xl hover:bg-white/10 transition-all gap-4 ${t}"
      >
        <div class="flex flex-col flex-1 min-w-0 mr-4">
          <label class="text-white font-bold text-base block mb-1"
            >${this.label}</label
          >
          <div class="text-white/50 text-sm leading-snug">
            ${this.description}
          </div>
        </div>

        <div class="flex flex-col items-end gap-2 shrink-0 w-[200px]">
          <span class="text-white font-bold text-sm">${this.value}%</span>
          <input
            type="range"
            class="w-full appearance-none h-2 bg-transparent rounded outline-none 
              [&::-webkit-slider-runnable-track]:h-2 [&::-webkit-slider-runnable-track]:rounded [&::-webkit-slider-runnable-track]:bg-[image:linear-gradient(to_right,#3b82f6_0%,#3b82f6_var(--fill),rgba(255,255,255,0.1)_var(--fill),rgba(255,255,255,0.1)_100%)]
              [&::-webkit-slider-thumb]:appearance-none [&::-webkit-slider-thumb]:h-[18px] [&::-webkit-slider-thumb]:w-[18px] [&::-webkit-slider-thumb]:rounded-full [&::-webkit-slider-thumb]:bg-blue-500 [&::-webkit-slider-thumb]:cursor-pointer [&::-webkit-slider-thumb]:-mt-[6px] [&::-webkit-slider-thumb]:shadow-[0_0_0_4px_rgba(59,130,246,0.2)] [&::-webkit-slider-thumb]:transition-all active:[&::-webkit-slider-thumb]:scale-110 active:[&::-webkit-slider-thumb]:shadow-[0_0_0_6px_rgba(59,130,246,0.3)]
              [&::-moz-range-track]:h-2 [&::-moz-range-track]:rounded [&::-moz-range-track]:bg-white/10
              [&::-moz-range-progress]:h-2 [&::-moz-range-progress]:rounded [&::-moz-range-progress]:bg-blue-500
              [&::-moz-range-thumb]:h-[18px] [&::-moz-range-thumb]:w-[18px] [&::-moz-range-thumb]:border-none [&::-moz-range-thumb]:rounded-full [&::-moz-range-thumb]:bg-blue-500 [&::-moz-range-thumb]:cursor-pointer [&::-moz-range-thumb]:shadow-[0_0_0_4px_rgba(59,130,246,0.2)] [&::-moz-range-thumb]:transition-all active:[&::-moz-range-thumb]:scale-110 active:[&::-moz-range-thumb]:shadow-[0_0_0_6px_rgba(59,130,246,0.3)]"
            min=${this.min}
            max=${this.max}
            .value=${String(this.value)}
            @input=${this.handleInput}
          />
        </div>
      </div>
    `}};Jn([L()],ji.prototype,"label",2);Jn([L()],ji.prototype,"description",2);Jn([L({type:Number})],ji.prototype,"value",2);Jn([L({type:Number})],ji.prototype,"min",2);Jn([L({type:Number})],ji.prototype,"max",2);Jn([L({type:Boolean})],ji.prototype,"easter",2);ji=Jn([F("setting-slider")],ji);var LO=Object.defineProperty,OO=Object.getOwnPropertyDescriptor,cs=(t,e,r,i)=>{for(var n=i>1?void 0:i?OO(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&LO(e,r,n),n};let qn=class extends V{constructor(){super(...arguments),this.label="Setting",this.description="",this.id="",this.checked=!1,this.easter=!1}createRenderRoot(){return this}handleChange(t){const e=t.target;this.checked=e.checked,this.dispatchEvent(new CustomEvent("change",{detail:{checked:this.checked},bubbles:!0,composed:!0}))}render(){const t=this.easter?"bg-[linear-gradient(270deg,#990033,#996600,#336600,#008080,#1c3f99,#5e0099,#990033)] bg-[length:1400%_1400%] animate-rainbow-bg text-white hover:bg-[linear-gradient(270deg,#990033,#996600,#336600,#008080,#1c3f99,#5e0099,#990033)]":"";return v`
      <label
        class="flex flex-row items-center justify-between w-full p-4 bg-white/5 border border-white/10 rounded-xl hover:bg-white/10 transition-all gap-4 cursor-pointer ${t}"
      >
        <div class="flex flex-col flex-1 min-w-0 mr-4">
          <div class="text-white font-bold text-base block mb-1">
            ${this.label}
          </div>
          <div class="text-white/50 text-sm leading-snug">
            ${this.description}
          </div>
        </div>

        <div class="relative inline-block w-[52px] h-[28px] shrink-0">
          <input
            type="checkbox"
            class="opacity-0 w-0 h-0 peer"
            id=${this.id}
            ?checked=${this.checked}
            @change=${this.handleChange}
          />
          <span
            class="absolute inset-0 bg-black/60 border border-white/10 transition-all duration-300 rounded-full
            before:absolute before:content-[''] before:h-5 before:w-5 before:left-[3px] before:top-[3px]
            before:bg-white/40 before:transition-all before:duration-300 before:rounded-full before:shadow-sm hover:before:bg-white/60
            peer-checked:bg-blue-600 peer-checked:border-blue-500 peer-checked:before:translate-x-[24px] peer-checked:before:bg-white"
          ></span>
        </div>
      </label>
    `}};cs([L()],qn.prototype,"label",2);cs([L()],qn.prototype,"description",2);cs([L()],qn.prototype,"id",2);cs([L({type:Boolean,reflect:!0})],qn.prototype,"checked",2);cs([L({type:Boolean})],qn.prototype,"easter",2);qn=cs([F("setting-toggle")],qn);var BO=Object.defineProperty,NO=Object.getOwnPropertyDescriptor,al=(t,e,r,i)=>{for(var n=i>1?void 0:i?NO(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&BO(e,r,n),n};const UO=typeof navigator<"u"&&/Mac/.test(navigator.userAgent),Cs={toggleView:"Space",buildCity:"Digit1",buildFactory:"Digit2",buildPort:"Digit3",buildDefensePost:"Digit4",buildMissileSilo:"Digit5",buildSamLauncher:"Digit6",buildWarship:"Digit7",buildAtomBomb:"Digit8",buildHydrogenBomb:"Digit9",buildMIRV:"Digit0",attackRatioDown:"KeyT",attackRatioUp:"KeyY",boatAttack:"KeyB",groundAttack:"KeyG",swapDirection:"KeyU",zoomOut:"KeyQ",zoomIn:"KeyE",centerCamera:"KeyC",moveUp:"KeyW",moveLeft:"KeyA",moveDown:"KeyS",moveRight:"KeyD",modifierKey:UO?"MetaLeft":"ControlLeft",altKey:"AltLeft"};let Gi=class extends gt{constructor(){super(...arguments),this.userSettings=new Gt,this.activeTab="basic",this.keySequence=[],this.showEasterEggSettings=!1,this.keybinds={},this.handleEasterEggKey=t=>{if(!this.isModalOpen||this.showEasterEggSettings)return;const e=t.target;if(!this.contains(e))return;const r=t.key.toLowerCase(),i=[...this.keySequence,r].slice(-4);this.keySequence=i,i.join("")==="evan"&&(this.triggerEasterEgg(),this.keySequence=[])},this.openFlagSelector=()=>{const t=document.querySelector("#flag-input-modal");t?.open&&(this.close(),t.returnTo="#"+(this.id||"page-settings"),t.open())}}connectedCallback(){super.connectedCallback(),this.loadKeybindsFromStorage()}disconnectedCallback(){window.removeEventListener("keydown",this.handleEasterEggKey),super.disconnectedCallback()}loadKeybindsFromStorage(){const t=localStorage.getItem("settings.keybinds");if(t)try{const e=JSON.parse(t);typeof e=="object"&&e!==null&&!Array.isArray(e)?Object.values(e).every(i=>{if(typeof i!="object"||i===null||Array.isArray(i)||!("key"in i)||typeof i.key!="string"||!("value"in i))return!1;const n=i.value;return typeof n=="string"?!0:Array.isArray(n)?n.every(a=>typeof a=="string"):!1})?this.keybinds=e:console.warn("Invalid keybinds structure: entries must be objects with 'key' (string) and 'value' (string or string[]) properties. Ignoring saved data."):console.warn("Invalid keybinds data: expected non-array object. Ignoring saved data.")}catch(e){console.warn("Invalid keybinds JSON:",e)}}handleKeybindChange(t){const{action:e,value:r,key:i,prevValue:n}=t.detail,a={...Cs};for(const[o,l]of Object.entries(this.keybinds)){const c=Array.isArray(l.value)?l.value[0]||"":l.value;c==="Null"?delete a[o]:a[o]=c}if(Object.entries(a).filter(([o])=>o!==e).map(([,o])=>o).includes(r)&&r!=="Null"){const o=g2(i||r);window.dispatchEvent(new CustomEvent("show-message",{detail:{message:v`
              <svg
                xmlns="http://www.w3.org/2000/svg"
                class="h-6 w-6 text-red-500 inline-block align-middle mr-2"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"
                />
              </svg>
              <span class="font-medium">
                ${(()=>{const u=f("user_setting.keybind_conflict_error",{key:o}).split(o);return v`${u[0]}<span
                      class="font-mono font-bold bg-white/10 px-1.5 py-0.5 rounded text-red-200 mx-1 border border-white/10"
                      >${o}</span
                    >${u[1]||""}`})()}
              </span>
            `,color:"red",duration:3e3}}));const l=this.renderRoot.querySelector(`setting-keybind[action="${e}"]`);l&&(l.value=n??Cs[e]??"",l.requestUpdate());return}this.keybinds={...this.keybinds,[e]:{value:r,key:i}},localStorage.setItem("settings.keybinds",JSON.stringify(this.keybinds))}getKeyValue(t){const e=this.keybinds[t];if(!e)return;const r=Array.isArray(e.value)?e.value[0]||"":e.value;return r==="Null"?"":r||void 0}getKeyChar(t){const e=this.keybinds[t];return e&&e.key||""}triggerEasterEgg(){console.log("🪺 Setting~ unlocked by EVAN combo!"),this.showEasterEggSettings=!0;const t=document.createElement("div");t.className="fixed top-10 left-1/2 p-4 px-6 bg-black/80 text-white text-xl rounded-xl animate-fadePop z-[9999]",t.textContent="🎉 You found a secret setting!",document.body.appendChild(t),setTimeout(()=>{t.remove()},5e3)}toggleDarkMode(t){const e=t.detail?.checked;if(typeof e!="boolean"){console.warn("Unexpected toggle event payload",t);return}this.userSettings.set("settings.darkMode",e),e?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),this.dispatchEvent(new CustomEvent("dark-mode-changed",{detail:{darkMode:e},bubbles:!0,composed:!0})),console.log("🌙 Dark Mode:",e?"ON":"OFF")}toggleEmojis(t){const e=t.detail?.checked;typeof e=="boolean"&&(this.userSettings.set("settings.emojis",e),console.log("🤡 Emojis:",e?"ON":"OFF"))}toggleAlertFrame(t){const e=t.detail?.checked;typeof e=="boolean"&&(this.userSettings.set("settings.alertFrame",e),console.log("🚨 Alert frame:",e?"ON":"OFF"))}toggleFxLayer(t){const e=t.detail?.checked;typeof e=="boolean"&&(this.userSettings.set("settings.specialEffects",e),console.log("💥 Special effects:",e?"ON":"OFF"))}toggleStructureSprites(t){const e=t.detail?.checked;typeof e=="boolean"&&(this.userSettings.set("settings.structureSprites",e),console.log("🏠 Structure sprites:",e?"ON":"OFF"))}toggleCursorCostLabel(t){const e=t.detail?.checked;typeof e=="boolean"&&(this.userSettings.set("settings.cursorCostLabel",e),console.log("💰 Cursor build cost:",e?"ON":"OFF"))}toggleAnonymousNames(t){const e=t.detail?.checked;typeof e=="boolean"&&(this.userSettings.set("settings.anonymousNames",e),console.log("🙈 Anonymous Names:",e?"ON":"OFF"))}toggleLobbyIdVisibility(t){const e=t.detail?.checked;typeof e=="boolean"&&(this.userSettings.set("settings.lobbyIdVisibility",!e),console.log("👁️ Hidden Lobby IDs:",e?"ON":"OFF"))}toggleLeftClickOpensMenu(t){const e=t.detail?.checked;typeof e=="boolean"&&(this.userSettings.set("settings.leftClickOpensMenu",e),console.log("🖱️ Left Click Opens Menu:",e?"ON":"OFF"),this.requestUpdate())}sliderAttackRatio(t){const e=t.detail?.value;if(typeof e=="number"){const r=e/100;localStorage.setItem("settings.attackRatio",r.toString())}else console.warn("Slider event missing detail.value",t)}toggleTerritoryPatterns(t){const e=t.detail?.checked;typeof e=="boolean"&&(this.userSettings.set("settings.territoryPatterns",e),console.log("🏳️ Territory Patterns:",e?"ON":"OFF"))}togglePerformanceOverlay(t){const e=t.detail?.checked;typeof e=="boolean"&&this.userSettings.set("settings.performanceOverlay",e)}render(){const t=this.activeTab==="basic"?this.renderBasicSettings():this.renderKeybindSettings(),e=v`
      <div
        class="h-full flex flex-col bg-black/60 backdrop-blur-md rounded-2xl border border-white/10 overflow-hidden"
      >
        <div
          class="relative flex flex-col border-b border-white/10 pb-4 shrink-0"
        >
          ${It({title:f("user_setting.title"),onBack:this.close,ariaLabel:f("common.back"),showDivider:!0})}

          <div class="hidden md:flex items-center gap-2 justify-center mt-4">
            <button
              class="px-6 py-2 text-xs font-bold transition-all duration-200 rounded-lg uppercase tracking-widest ${this.activeTab==="basic"?"bg-blue-500/20 text-blue-400 border border-blue-500/30 shadow-[0_0_15px_rgba(59,130,246,0.2)]":"text-white/40 hover:text-white hover:bg-white/5 border border-transparent"}"
              @click=${()=>this.activeTab="basic"}
            >
              ${f("user_setting.tab_basic")}
            </button>
            <button
              class="px-6 py-2 text-xs font-bold transition-all duration-200 rounded-lg uppercase tracking-widest ${this.activeTab==="keybinds"?"bg-blue-500/20 text-blue-400 border border-blue-500/30 shadow-[0_0_15px_rgba(59,130,246,0.2)]":"text-white/40 hover:text-white hover:bg-white/5 border border-transparent"}"
              @click=${()=>this.activeTab="keybinds"}
            >
              ${f("user_setting.tab_keybinds")}
            </button>
          </div>
        </div>

        <div
          class="pt-6 flex-1 overflow-y-auto scrollbar-thin scrollbar-thumb-white/20 scrollbar-track-transparent px-6 pb-6 mr-1"
        >
          <div class="flex flex-col gap-2">${t}</div>
        </div>
      </div>
    `;return this.inline?e:v`
      <o-modal
        title="${f("user_setting.title")}"
        ?inline=${this.inline}
        hideCloseButton
        hideHeader
      >
        ${e}
      </o-modal>
    `}onClose(){window.removeEventListener("keydown",this.handleEasterEggKey)}renderKeybindSettings(){return v`
      <h2
        class="text-blue-200 text-xl font-bold mt-4 mb-3 border-b border-white/10 pb-2"
      >
        ${f("user_setting.view_options")}
      </h2>

      <setting-keybind
        action="toggleView"
        label=${f("user_setting.toggle_view")}
        description=${f("user_setting.toggle_view_desc")}
        defaultKey="Space"
        .value=${this.getKeyValue("toggleView")}
        .display=${this.getKeyChar("toggleView")}
        @change=${this.handleKeybindChange}
      ></setting-keybind>

      <h2
        class="text-blue-200 text-xl font-bold mt-8 mb-3 border-b border-white/10 pb-2"
      >
        ${f("user_setting.build_controls")}
      </h2>

      <setting-keybind
        action="buildCity"
        label=${f("user_setting.build_city")}
        description=${f("user_setting.build_city_desc")}
        defaultKey="Digit1"
        .value=${this.getKeyValue("buildCity")}
        .display=${this.getKeyChar("buildCity")}
        @change=${this.handleKeybindChange}
      ></setting-keybind>

      <setting-keybind
        action="buildFactory"
        label=${f("user_setting.build_factory")}
        description=${f("user_setting.build_factory_desc")}
        defaultKey="Digit2"
        .value=${this.getKeyValue("buildFactory")}
        .display=${this.getKeyChar("buildFactory")}
        @change=${this.handleKeybindChange}
      ></setting-keybind>

      <setting-keybind
        action="buildPort"
        label=${f("user_setting.build_port")}
        description=${f("user_setting.build_port_desc")}
        defaultKey="Digit3"
        .value=${this.getKeyValue("buildPort")}
        .display=${this.getKeyChar("buildPort")}
        @change=${this.handleKeybindChange}
      ></setting-keybind>

      <setting-keybind
        action="buildDefensePost"
        label=${f("user_setting.build_defense_post")}
        description=${f("user_setting.build_defense_post_desc")}
        defaultKey="Digit4"
        .value=${this.getKeyValue("buildDefensePost")}
        .display=${this.getKeyChar("buildDefensePost")}
        @change=${this.handleKeybindChange}
      ></setting-keybind>

      <setting-keybind
        action="buildMissileSilo"
        label=${f("user_setting.build_missile_silo")}
        description=${f("user_setting.build_missile_silo_desc")}
        defaultKey="Digit5"
        .value=${this.getKeyValue("buildMissileSilo")}
        .display=${this.getKeyChar("buildMissileSilo")}
        @change=${this.handleKeybindChange}
      ></setting-keybind>

      <setting-keybind
        action="buildSamLauncher"
        label=${f("user_setting.build_sam_launcher")}
        description=${f("user_setting.build_sam_launcher_desc")}
        defaultKey="Digit6"
        .value=${this.getKeyValue("buildSamLauncher")}
        .display=${this.getKeyChar("buildSamLauncher")}
        @change=${this.handleKeybindChange}
      ></setting-keybind>

      <setting-keybind
        action="buildWarship"
        label=${f("user_setting.build_warship")}
        description=${f("user_setting.build_warship_desc")}
        defaultKey="Digit7"
        .value=${this.getKeyValue("buildWarship")}
        .display=${this.getKeyChar("buildWarship")}
        @change=${this.handleKeybindChange}
      ></setting-keybind>

      <setting-keybind
        action="buildAtomBomb"
        label=${f("user_setting.build_atom_bomb")}
        description=${f("user_setting.build_atom_bomb_desc")}
        defaultKey="Digit8"
        .value=${this.getKeyValue("buildAtomBomb")}
        .display=${this.getKeyChar("buildAtomBomb")}
        @change=${this.handleKeybindChange}
      ></setting-keybind>

      <setting-keybind
        action="buildHydrogenBomb"
        label=${f("user_setting.build_hydrogen_bomb")}
        description=${f("user_setting.build_hydrogen_bomb_desc")}
        defaultKey="Digit9"
        .value=${this.getKeyValue("buildHydrogenBomb")}
        .display=${this.getKeyChar("buildHydrogenBomb")}
        @change=${this.handleKeybindChange}
      ></setting-keybind>

      <setting-keybind
        action="buildMIRV"
        label=${f("user_setting.build_mirv")}
        description=${f("user_setting.build_mirv_desc")}
        defaultKey="Digit0"
        .value=${this.getKeyValue("buildMIRV")}
        .display=${this.getKeyChar("buildMIRV")}
        @change=${this.handleKeybindChange}
      ></setting-keybind>

      <h2
        class="text-blue-200 text-xl font-bold mt-8 mb-3 border-b border-white/10 pb-2"
      >
        ${f("user_setting.menu_shortcuts")}
      </h2>

      <setting-keybind
        action="modifierKey"
        label=${f("user_setting.build_menu_modifier")}
        description=${f("user_setting.build_menu_modifier_desc")}
        .defaultKey=${Cs.modifierKey}
        .value=${this.getKeyValue("modifierKey")}
        .display=${this.getKeyChar("modifierKey")}
        @change=${this.handleKeybindChange}
      ></setting-keybind>

      <setting-keybind
        action="altKey"
        label=${f("user_setting.emoji_menu_modifier")}
        description=${f("user_setting.emoji_menu_modifier_desc")}
        .defaultKey=${Cs.altKey}
        .value=${this.getKeyValue("altKey")}
        .display=${this.getKeyChar("altKey")}
        @change=${this.handleKeybindChange}
      ></setting-keybind>

      <h2
        class="text-blue-200 text-xl font-bold mt-8 mb-3 border-b border-white/10 pb-2"
      >
        ${f("user_setting.attack_ratio_controls")}
      </h2>

      <setting-keybind
        action="attackRatioDown"
        label=${f("user_setting.attack_ratio_down")}
        description=${f("user_setting.attack_ratio_down_desc")}
        defaultKey="KeyT"
        .value=${this.getKeyValue("attackRatioDown")}
        .display=${this.getKeyChar("attackRatioDown")}
        @change=${this.handleKeybindChange}
      ></setting-keybind>

      <setting-keybind
        action="attackRatioUp"
        label=${f("user_setting.attack_ratio_up")}
        description=${f("user_setting.attack_ratio_up_desc")}
        defaultKey="KeyY"
        .value=${this.getKeyValue("attackRatioUp")}
        .display=${this.getKeyChar("attackRatioUp")}
        @change=${this.handleKeybindChange}
      ></setting-keybind>

      <h2
        class="text-blue-200 text-xl font-bold mt-8 mb-3 border-b border-white/10 pb-2"
      >
        ${f("user_setting.attack_keybinds")}
      </h2>

      <setting-keybind
        action="boatAttack"
        label=${f("user_setting.boat_attack")}
        description=${f("user_setting.boat_attack_desc")}
        defaultKey="KeyB"
        .value=${this.getKeyValue("boatAttack")}
        .display=${this.getKeyChar("boatAttack")}
        @change=${this.handleKeybindChange}
      ></setting-keybind>

      <setting-keybind
        action="groundAttack"
        label=${f("user_setting.ground_attack")}
        description=${f("user_setting.ground_attack_desc")}
        defaultKey="KeyG"
        .value=${this.getKeyValue("groundAttack")}
        .display=${this.getKeyChar("groundAttack")}
        @change=${this.handleKeybindChange}
      ></setting-keybind>

      <setting-keybind
        action="swapDirection"
        label=${f("user_setting.swap_direction")}
        description=${f("user_setting.swap_direction_desc")}
        .defaultKey=${Cs.swapDirection}
        .value=${this.getKeyValue("swapDirection")}
        .display=${this.getKeyChar("swapDirection")}
        @change=${this.handleKeybindChange}
      ></setting-keybind>

      <h2
        class="text-blue-200 text-xl font-bold mt-8 mb-3 border-b border-white/10 pb-2"
      >
        ${f("user_setting.zoom_controls")}
      </h2>

      <setting-keybind
        action="zoomOut"
        label=${f("user_setting.zoom_out")}
        description=${f("user_setting.zoom_out_desc")}
        defaultKey="KeyQ"
        .value=${this.getKeyValue("zoomOut")}
        .display=${this.getKeyChar("zoomOut")}
        @change=${this.handleKeybindChange}
      ></setting-keybind>

      <setting-keybind
        action="zoomIn"
        label=${f("user_setting.zoom_in")}
        description=${f("user_setting.zoom_in_desc")}
        defaultKey="KeyE"
        .value=${this.getKeyValue("zoomIn")}
        .display=${this.getKeyChar("zoomIn")}
        @change=${this.handleKeybindChange}
      ></setting-keybind>

      <h2
        class="text-blue-200 text-xl font-bold mt-8 mb-3 border-b border-white/10 pb-2"
      >
        ${f("user_setting.camera_movement")}
      </h2>

      <setting-keybind
        action="centerCamera"
        label=${f("user_setting.center_camera")}
        description=${f("user_setting.center_camera_desc")}
        defaultKey="KeyC"
        .value=${this.getKeyValue("centerCamera")}
        .display=${this.getKeyChar("centerCamera")}
        @change=${this.handleKeybindChange}
      ></setting-keybind>

      <setting-keybind
        action="moveUp"
        label=${f("user_setting.move_up")}
        description=${f("user_setting.move_up_desc")}
        defaultKey="KeyW"
        .value=${this.getKeyValue("moveUp")}
        .display=${this.getKeyChar("moveUp")}
        @change=${this.handleKeybindChange}
      ></setting-keybind>

      <setting-keybind
        action="moveLeft"
        label=${f("user_setting.move_left")}
        description=${f("user_setting.move_left_desc")}
        defaultKey="KeyA"
        .value=${this.getKeyValue("moveLeft")}
        .display=${this.getKeyChar("moveLeft")}
        @change=${this.handleKeybindChange}
      ></setting-keybind>

      <setting-keybind
        action="moveDown"
        label=${f("user_setting.move_down")}
        description=${f("user_setting.move_down_desc")}
        defaultKey="KeyS"
        .value=${this.getKeyValue("moveDown")}
        .display=${this.getKeyChar("moveDown")}
        @change=${this.handleKeybindChange}
      ></setting-keybind>

      <setting-keybind
        action="moveRight"
        label=${f("user_setting.move_right")}
        description=${f("user_setting.move_right_desc")}
        defaultKey="KeyD"
        .value=${this.getKeyValue("moveRight")}
        .display=${this.getKeyChar("moveRight")}
        @change=${this.handleKeybindChange}
      ></setting-keybind>
    `}renderBasicSettings(){return v`
      <!-- 🚩 Flag Selector -->
      <div
        class="flex flex-row items-center justify-between w-full p-4 bg-white/5 border border-white/10 rounded-xl hover:bg-white/10 transition-all gap-4 cursor-pointer"
        role="button"
        tabindex="0"
        @click=${this.openFlagSelector}
        @keydown=${t=>{(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),this.openFlagSelector())}}
      >
        <div class="flex flex-col flex-1 min-w-0 mr-4">
          <div class="text-white font-bold text-base block mb-1">
            ${f("flag_input.title")}
          </div>
          <div class="text-white/50 text-sm leading-snug">
            ${f("flag_input.button_title")}
          </div>
        </div>

        <div
          class="relative inline-block w-12 h-8 shrink-0 rounded overflow-hidden border border-white/20"
        >
          <flag-input class="w-full h-full pointer-events-none"></flag-input>
        </div>
      </div>

      <!-- 🌙 Dark Mode -->
      <setting-toggle
        label="${f("user_setting.dark_mode_label")}"
        description="${f("user_setting.dark_mode_desc")}"
        id="dark-mode-toggle"
        .checked=${this.userSettings.darkMode()}
        @change=${t=>this.toggleDarkMode(t)}
      ></setting-toggle>

      <!-- 😊 Emojis -->
      <setting-toggle
        label="${f("user_setting.emojis_label")}"
        description="${f("user_setting.emojis_desc")}"
        id="emoji-toggle"
        .checked=${this.userSettings.emojis()}
        @change=${this.toggleEmojis}
      ></setting-toggle>

      <!-- 🚨 Alert frame -->
      <setting-toggle
        label="${f("user_setting.alert_frame_label")}"
        description="${f("user_setting.alert_frame_desc")}"
        id="alert-frame-toggle"
        .checked=${this.userSettings.alertFrame()}
        @change=${this.toggleAlertFrame}
      ></setting-toggle>

      <!-- 💥 Special effects -->
      <setting-toggle
        label="${f("user_setting.special_effects_label")}"
        description="${f("user_setting.special_effects_desc")}"
        id="special-effect-toggle"
        .checked=${this.userSettings.fxLayer()}
        @change=${this.toggleFxLayer}
      ></setting-toggle>

      <!-- 🏠 Structure Sprites -->
      <setting-toggle
        label="${f("user_setting.structure_sprites_label")}"
        description="${f("user_setting.structure_sprites_desc")}"
        id="structure_sprites-toggle"
        .checked=${this.userSettings.structureSprites()}
        @change=${this.toggleStructureSprites}
      ></setting-toggle>

      <!-- 💰 Cursor Price Pill -->
      <setting-toggle
        label="${f("user_setting.cursor_cost_label_label")}"
        description="${f("user_setting.cursor_cost_label_desc")}"
        id="cursor_cost_label-toggle"
        .checked=${this.userSettings.cursorCostLabel()}
        @change=${this.toggleCursorCostLabel}
      ></setting-toggle>

      <!-- 🖱️ Left Click Menu -->
      <setting-toggle
        label="${f("user_setting.left_click_label")}"
        description="${f("user_setting.left_click_desc")}"
        id="left-click-toggle"
        .checked=${this.userSettings.leftClickOpensMenu()}
        @change=${this.toggleLeftClickOpensMenu}
      ></setting-toggle>

      <!-- 🙈 Anonymous Names -->
      <setting-toggle
        label="${f("user_setting.anonymous_names_label")}"
        description="${f("user_setting.anonymous_names_desc")}"
        id="anonymous-names-toggle"
        .checked=${this.userSettings.anonymousNames()}
        @change=${this.toggleAnonymousNames}
      ></setting-toggle>

      <!-- 👁️ Hidden Lobby IDs -->
      <setting-toggle
        label="${f("user_setting.lobby_id_visibility_label")}"
        description="${f("user_setting.lobby_id_visibility_desc")}"
        id="lobby-id-visibility-toggle"
        .checked=${!this.userSettings.get("settings.lobbyIdVisibility",!0)}
        @change=${this.toggleLobbyIdVisibility}
      ></setting-toggle>

      <!-- 🏳️ Territory Patterns -->
      <setting-toggle
        label="${f("user_setting.territory_patterns_label")}"
        description="${f("user_setting.territory_patterns_desc")}"
        id="territory-patterns-toggle"
        .checked=${this.userSettings.territoryPatterns()}
        @change=${this.toggleTerritoryPatterns}
      ></setting-toggle>

      <!-- 📱 Performance Overlay -->
      <setting-toggle
        label="${f("user_setting.performance_overlay_label")}"
        description="${f("user_setting.performance_overlay_desc")}"
        id="performance-overlay-toggle"
        .checked=${this.userSettings.performanceOverlay()}
        @change=${this.togglePerformanceOverlay}
      ></setting-toggle>

      <!-- ⚔️ Attack Ratio -->
      <setting-slider
        label="${f("user_setting.attack_ratio_label")}"
        description="${f("user_setting.attack_ratio_desc")}"
        min="1"
        max="100"
        .value=${Number(localStorage.getItem("settings.attackRatio")??"0.2")*100}
        @change=${this.sliderAttackRatio}
      ></setting-slider>

      ${this.showEasterEggSettings?v`
            <setting-slider
              label="${f("user_setting.easter_writing_speed_label")}"
              description="${f("user_setting.easter_writing_speed_desc")}"
              min="0"
              max="100"
              value="40"
              easter="true"
              @change=${t=>{const e=t.detail?.value;e!==void 0?console.log("Changed:",e):console.warn("Slider event missing detail.value",t)}}
            ></setting-slider>

            <setting-number
              label="${f("user_setting.easter_bug_count_label")}"
              description="${f("user_setting.easter_bug_count_desc")}"
              value="100"
              min="0"
              max="1000"
              easter="true"
              @change=${t=>{const e=t.detail?.value;e!==void 0?console.log("Changed:",e):console.warn("Slider event missing detail.value",t)}}
            ></setting-number>
          `:null}
    `}onOpen(){window.addEventListener("keydown",this.handleEasterEggKey),this.loadKeybindsFromStorage()}open(){super.open()}};al([M()],Gi.prototype,"activeTab",2);al([M()],Gi.prototype,"keySequence",2);al([M()],Gi.prototype,"showEasterEggSettings",2);al([M()],Gi.prototype,"keybinds",2);Gi=al([F("user-setting")],Gi);const ht=[];for(let t=0;t<256;++t)ht.push((t+256).toString(16).slice(1));function zO(t,e=0){return(ht[t[e+0]]+ht[t[e+1]]+ht[t[e+2]]+ht[t[e+3]]+"-"+ht[t[e+4]]+ht[t[e+5]]+"-"+ht[t[e+6]]+ht[t[e+7]]+"-"+ht[t[e+8]]+ht[t[e+9]]+"-"+ht[t[e+10]]+ht[t[e+11]]+ht[t[e+12]]+ht[t[e+13]]+ht[t[e+14]]+ht[t[e+15]]).toLowerCase()}let jh;const HO=new Uint8Array(16);function FO(){if(!jh){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");jh=crypto.getRandomValues.bind(crypto)}return jh(HO)}const qO=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),$v={randomUUID:qO};function jO(t,e,r){if($v.randomUUID&&!t)return $v.randomUUID();t=t||{};const i=t.random??t.rng?.()??FO();if(i.length<16)throw new Error("Random bytes length must be >= 16");return i[6]=i[6]&15|64,i[8]=i[8]&63|128,zO(i)}var on={},dt={},je={},Rv;function Xi(){if(Rv)return je;Rv=1,Object.defineProperty(je,"__esModule",{value:!0}),je.getAndAssertSingleCodePoint=je.invertCaseOfAlphabeticChar=je.isUpperCase=je.isLowerCase=je.isAlphabetic=je.isDigit=je.isWordChar=je.convertSurrogatePairToCodePoint=je.isLowSurrogate=je.isHighSurrogate=void 0;function t(u){return 55296<=u&&u<=56319}je.isHighSurrogate=t;function e(u){return 56320<=u&&u<=57343}je.isLowSurrogate=e;function r(u,p){return(u-55296)*1024+p-56320+65536}je.convertSurrogatePairToCodePoint=r;function i(u){return n(u)||a(u)}je.isWordChar=i;function n(u){return 48<=u&&u<=57}je.isDigit=n;function a(u){return s(u)||o(u)}je.isAlphabetic=a;function s(u){return 97<=u&&u<=122}je.isLowerCase=s;function o(u){return 65<=u&&u<=90}je.isUpperCase=o;function l(u){return u^32}je.invertCaseOfAlphabeticChar=l;function c(u){if([...u].length!==1)throw new RangeError("Expected the input string to be one code point in length.");return u.codePointAt(0)}return je.getAndAssertSingleCodePoint=c,je}var Dv;function I5(){if(Dv)return dt;Dv=1,Object.defineProperty(dt,"__esModule",{value:!0}),dt.randomCharFromSetCensorStrategy=dt.fixedCharCensorStrategy=dt.fixedPhraseCensorStrategy=dt.grawlixCensorStrategy=dt.asteriskCensorStrategy=dt.keepEndCensorStrategy=dt.keepStartCensorStrategy=void 0;const t=Xi();function e(l){return c=>c.overlapsAtStart?l(c):String.fromCodePoint(c.input.codePointAt(c.startIndex))+l({...c,matchLength:c.matchLength-1})}dt.keepStartCensorStrategy=e;function r(l){return c=>{if(c.overlapsAtEnd)return l(c);const u=String.fromCodePoint(c.input.codePointAt(c.endIndex));return l({...c,matchLength:c.matchLength-1})+u}}dt.keepEndCensorStrategy=r;function i(){return s("*")}dt.asteriskCensorStrategy=i;function n(){return o("%@$&*")}dt.grawlixCensorStrategy=n;function a(l){return()=>l}dt.fixedPhraseCensorStrategy=a;function s(l){return(0,t.getAndAssertSingleCodePoint)(l),c=>l.repeat(c.matchLength)}dt.fixedCharCensorStrategy=s;function o(l){const c=[...l];if(c.length<2)throw new Error("The character set passed must have at least 2 characters.");return u=>{if(u.matchLength===0)return"";let p=Math.floor(Math.random()*c.length),d=c[p];for(let h=1;h<u.matchLength;h++){let g=Math.floor(Math.random()*(c.length-1));g>=p&&g++,p=g,d+=c[g]}return d}}return dt.randomCharFromSetCensorStrategy=o,dt}var Ts={},Es={},Ms={},Lv;function GO(){if(Lv)return Ms;Lv=1,Object.defineProperty(Ms,"__esModule",{value:!0}),Ms.compareIntervals=void 0;function t(e,r,i,n){return e<i?-1:i<e?1:r<n?-1:n<r?1:0}return Ms.compareIntervals=t,Ms}var Ov;function jf(){if(Ov)return Es;Ov=1,Object.defineProperty(Es,"__esModule",{value:!0}),Es.compareMatchByPositionAndId=void 0;const t=GO();function e(r,i){const n=(0,t.compareIntervals)(r.startIndex,r.endIndex,i.startIndex,i.endIndex);return n!==0?n:r.termId===i.termId?0:r.termId<i.termId?-1:1}return Es.compareMatchByPositionAndId=e,Es}var Bv;function VO(){if(Bv)return Ts;Bv=1,Object.defineProperty(Ts,"__esModule",{value:!0}),Ts.TextCensor=void 0;const t=jf(),e=I5();let r=class{constructor(){this.strategy=(0,e.grawlixCensorStrategy)()}setStrategy(n){return this.strategy=n,this}applyTo(n,a){if(a.length===0)return n;const s=[...a].sort(t.compareMatchByPositionAndId);let o="",l=0;for(let c=0;c<s.length;c++){const u=s[c];if(l>u.endIndex)continue;const p=u.startIndex<l;p||(o+=n.slice(l,u.startIndex));const d=Math.max(l,u.startIndex),h=c<s.length-1&&u.endIndex>=s[c+1].startIndex&&u.endIndex<s[c+1].endIndex;o+=this.strategy({...u,startIndex:d,input:n,overlapsAtStart:p,overlapsAtEnd:h}),l=u.endIndex+1}return o+=n.slice(l),o}};return Ts.TextCensor=r,Ts}var ln={},Is={},Nv;function P5(){if(Nv)return Is;Nv=1,Object.defineProperty(Is,"__esModule",{value:!0}),Is.assignIncrementingIds=void 0;function t(e){let r=0;return e.map(i=>({id:r++,pattern:i}))}return Is.assignIncrementingIds=t,Is}var Uv;function $5(){if(Uv)return ln;Uv=1,Object.defineProperty(ln,"__esModule",{value:!0}),ln.PhraseBuilder=ln.DataSet=void 0;const t=P5();let e=class{constructor(){this.containers=[],this.patternCount=0,this.patternIdToPhraseContainer=new Map}addAll(n){for(const a of n.containers)this.registerContainer(a);return this}removePhrasesIf(n){this.patternCount=0,this.patternIdToPhraseContainer.clear();const a=this.containers.splice(0);for(const s of a)n(s)||this.registerContainer(s);return this}addPhrase(n){const a=n(new r).build();return this.registerContainer(a),this}getPayloadWithPhraseMetadata(n){const a=this.patternIdToPhraseContainer.get(n.termId);if(a===void 0)throw new Error(`The pattern with ID ${n.termId} does not exist in this dataset.`);return{...n,phraseMetadata:this.containers[a].metadata}}build(){return{blacklistedTerms:(0,t.assignIncrementingIds)(this.containers.flatMap(n=>n.patterns)),whitelistedTerms:this.containers.flatMap(n=>n.whitelistedTerms)}}registerContainer(n){const a=this.containers.push(n)-1;for(let s=0,o=this.patternCount;s<n.patterns.length;s++,o++)this.patternIdToPhraseContainer.set(o,a),this.patternCount++}};ln.DataSet=e;class r{constructor(){this.patterns=[],this.whitelistedTerms=[]}addPattern(n){return this.patterns.push(n),this}addWhitelistedTerm(n){return this.whitelistedTerms.push(n),this}setMetadata(n){return this.metadata=n,this}build(){return{patterns:this.patterns,whitelistedTerms:this.whitelistedTerms,metadata:this.metadata}}}return ln.PhraseBuilder=r,ln}var Ps={},ai={},$s={},zv;function Gf(){if(zv)return $s;zv=1,Object.defineProperty($s,"__esModule",{value:!0}),$s.SyntaxKind=void 0;var t;return(function(e){e[e.Optional=0]="Optional",e[e.Wildcard=1]="Wildcard",e[e.Literal=2]="Literal",e[e.BoundaryAssertion=3]="BoundaryAssertion"})(t||($s.SyntaxKind=t={})),$s}var Hv;function WO(){if(Hv)return ai;Hv=1,Object.defineProperty(ai,"__esModule",{value:!0}),ai.getRegExpStringForNode=ai.compilePatternToRegExp=ai.potentiallyMatchesEmptyString=void 0;const t=Gf();function e(a){return a.nodes.every(s=>s.kind===t.SyntaxKind.Optional)}ai.potentiallyMatchesEmptyString=e;function r(a){let s="";a.requireWordBoundaryAtStart&&(s+="\\b");for(const o of a.nodes)s+=n(o);return a.requireWordBoundaryAtEnd&&(s+="\\b"),new RegExp(s,"gs")}ai.compilePatternToRegExp=r;const i=["[",".","*","+","?","^","$","{","}","(",")","|","[","\\","]"].map(a=>a.charCodeAt(0));function n(a){switch(a.kind){case t.SyntaxKind.Literal:{let s="";for(const o of a.chars)i.includes(o)&&(s+="\\"),s+=String.fromCodePoint(o);return s}case t.SyntaxKind.Optional:return`(?:${n(a.childNode)})?`;case t.SyntaxKind.Wildcard:return"."}}return ai.getRegExpStringForNode=n,ai}var Rs={},Fv;function KO(){if(Fv)return Rs;Fv=1,Object.defineProperty(Rs,"__esModule",{value:!0}),Rs.TransformerSet=void 0;let t=class{constructor(r){this.transformers=r,this.statefulTransformers=Array.from({length:this.transformers.length});for(let i=0;i<this.transformers.length;i++){const n=this.transformers[i];n.type===1&&(this.statefulTransformers[i]=n.factory())}}applyTo(r){let i=r;for(let n=0;n<this.transformers.length&&i!==void 0;n++){const a=this.transformers[n];a.type===0?i=a.transform(i):i=this.statefulTransformers[n].transform(i)}return i}resetAll(){for(let r=0;r<this.transformers.length;r++)this.transformers[r].type===1&&this.statefulTransformers[r].reset()}};return Rs.TransformerSet=t,Rs}var Ds={},qv;function Vf(){if(qv)return Ds;qv=1,Object.defineProperty(Ds,"__esModule",{value:!0}),Ds.CharacterIterator=void 0;const t=Xi();let e=class{constructor(i){this.lastPosition=-1,this.currentPosition=0,this._lastWidth=0,this._input=i??""}get input(){return this._input}setInput(i){return this._input=i,this.reset(),this}reset(){this.lastPosition=-1,this.currentPosition=0,this._lastWidth=0}next(){if(this.done)return{done:!0,value:void 0};this.lastPosition=this.currentPosition;const i=this._input.charCodeAt(this.currentPosition++);if(this._lastWidth=1,this.done||!(0,t.isHighSurrogate)(i))return{done:!1,value:i};const n=this._input.charCodeAt(this.currentPosition);return(0,t.isLowSurrogate)(n)?(this._lastWidth++,this.currentPosition++,{done:!1,value:(0,t.convertSurrogatePairToCodePoint)(i,n)}):{done:!1,value:i}}get position(){return this.lastPosition}get lastWidth(){return this._lastWidth}get done(){return this.currentPosition>=this._input.length}[Symbol.iterator](){return this}};return Ds.CharacterIterator=e,Ds}var Ls={},jv;function YO(){if(jv)return Ls;jv=1,Object.defineProperty(Ls,"__esModule",{value:!0}),Ls.IntervalCollection=void 0;let t=class{constructor(){this.dirty=!1,this.intervals=[]}insert(r,i){this.intervals.push([r,i]),this.dirty=!0}query(r,i){if(this.intervals.length===0)return!1;this.dirty&&(this.dirty=!1,this.intervals.sort((n,a)=>n[0]<a[0]?-1:a[0]<n[0]?1:0));for(const n of this.intervals){if(n[0]>r)break;if(n[0]<=r&&i<=n[1])return!0}return!1}values(){return this.intervals.values()}[Symbol.iterator](){return this.values()}};return Ls.IntervalCollection=t,Ls}var Gv;function XO(){if(Gv)return Ps;Gv=1,Object.defineProperty(Ps,"__esModule",{value:!0}),Ps.RegExpMatcher=void 0;const t=Xi(),e=WO(),r=KO(),i=Vf(),n=YO(),a=jf();class s{constructor({blacklistedTerms:l,whitelistedTerms:c=[],blacklistMatcherTransformers:u=[],whitelistMatcherTransformers:p=[]}){this.blacklistedTerms=this.compileTerms(l),this.validateWhitelistedTerms(c),this.whitelistedTerms=c,this.blacklistMatcherTransformers=new r.TransformerSet(u),this.whitelistMatcherTransformers=new r.TransformerSet(p)}getAllMatches(l,c=!1){const u=this.getWhitelistedIntervals(l),[p,d]=this.applyTransformers(l,this.blacklistMatcherTransformers),h=[];for(const g of this.blacklistedTerms)for(const y of d.matchAll(g.regExp)){const x=p[y.index];let m=p[y.index+y[0].length-1];m<l.length-1&&(0,t.isHighSurrogate)(l.charCodeAt(m))&&(0,t.isLowSurrogate)(l.charCodeAt(m+1))&&m++,u.query(x,m)||h.push({termId:g.id,startIndex:x,endIndex:m,matchLength:[...y[0]].length})}return c&&h.sort(a.compareMatchByPositionAndId),h}hasMatch(l){const c=this.getWhitelistedIntervals(l),[u,p]=this.applyTransformers(l,this.blacklistMatcherTransformers);for(const d of this.blacklistedTerms)for(const h of p.matchAll(d.regExp)){const g=u[h.index];let y=u[h.index+h[0].length-1];if(y<l.length-1&&(0,t.isHighSurrogate)(l.charCodeAt(y))&&(0,t.isLowSurrogate)(l.charCodeAt(y+1))&&y++,!c.query(g,y))return!0}return!1}getWhitelistedIntervals(l){const c=new n.IntervalCollection,[u,p]=this.applyTransformers(l,this.whitelistMatcherTransformers);for(const d of this.whitelistedTerms){let h=0;for(let g=p.indexOf(d,h);g!==-1;g=p.indexOf(d,h)){let y=u[g+d.length-1];y<l.length-1&&(0,t.isHighSurrogate)(l.charCodeAt(y))&&(0,t.isLowSurrogate)(l.charCodeAt(y+1))&&y++,c.insert(u[g],y),h=g+d.length}}return c}applyTransformers(l,c){const u=[];let p="";const d=new i.CharacterIterator(l);for(const h of d){const g=c.applyTo(h);if(g!==void 0)for(p+=String.fromCodePoint(g);u.length<p.length;)u.push(d.position)}return c.resetAll(),[u,p]}compileTerms(l){const c=[],u=new Set;for(const p of l){if(u.has(p.id))throw new Error(`Duplicate blacklisted term ID ${p.id}.`);if((0,e.potentiallyMatchesEmptyString)(p.pattern))throw new Error(`Pattern with ID ${p.id} potentially matches empty string; this is unsupported.`);c.push({id:p.id,regExp:(0,e.compilePatternToRegExp)(p.pattern)}),u.add(p.id)}return c}validateWhitelistedTerms(l){if(l.some(c=>c.length===0))throw new Error("Whitelisted term set contains empty string; this is unsupported.")}}return Ps.RegExpMatcher=s,Ps}var Gh={},Vv;function ZO(){return Vv||(Vv=1,Object.defineProperty(Gh,"__esModule",{value:!0})),Gh}var Os={},Wv;function R5(){if(Wv)return Os;Wv=1,Object.defineProperty(Os,"__esModule",{value:!0}),Os.ParserError=void 0;let t=class extends Error{constructor(r,i,n){super(`${i}:${n}: ${r}`),this.name="ParserError",this.line=i,this.column=n}};return Os.ParserError=t,Os}var cn={},Bs={},Kv;function QO(){if(Kv)return Bs;Kv=1,Object.defineProperty(Bs,"__esModule",{value:!0}),Bs.Parser=void 0;const t=Xi(),e=Vf(),r=Gf(),i=R5(),n=[92,91,93,63,124],a=n.map(l=>`'${String.fromCodePoint(l)}'`).join(", "),s=-1;let o=class{constructor(){this.input="",this.line=1,this.column=1,this.position=0,this.lastColumn=1,this.lastWidth=0}parse(c){this.setInput(c);const u=[],p=this.nextNode(),d=p?.kind===r.SyntaxKind.BoundaryAssertion;p&&!d&&u.push(p);let h=!1;for(;!this.done;){const g=this.mark(),y=this.nextNode();if(y.kind!==r.SyntaxKind.BoundaryAssertion){u.push(y);continue}this.done||this.reportError("Boundary assertions are not supported in this position; they are only allowed at the start / end of the pattern.",g),h=!0}return{requireWordBoundaryAtStart:d,requireWordBoundaryAtEnd:h,nodes:u}}setInput(c){return this.input=c,this.line=1,this.column=1,this.position=0,this.lastColumn=1,this.lastWidth=0,this}nextNode(){switch(this.peek()){case s:return;case 91:return this.parseOptional();case 93:this.reportError("Unexpected ']' with no corresponding '['.");case 63:return this.parseWildcard();case 124:return this.parseBoundaryAssertion();default:return this.parseLiteral()}}get done(){return this.position>=this.input.length}parseOptional(){const c=this.mark();this.next();const u=this.mark();this.done&&this.reportError("Unexpected unclosed '['.",c),this.accept("[")&&this.reportError("Unexpected nested optional node.",u);const p=this.nextNode();return p.kind===r.SyntaxKind.BoundaryAssertion&&this.reportError("Boundary assertions are not supported in this position; they are only allowed at the start / end of the pattern.",u),this.accept("]")||this.reportError("Unexpected unclosed '['."),{kind:r.SyntaxKind.Optional,childNode:p}}parseWildcard(){return this.next(),{kind:r.SyntaxKind.Wildcard}}parseBoundaryAssertion(){return this.next(),{kind:r.SyntaxKind.BoundaryAssertion}}parseLiteral(){const c=[];for(;!this.done;){if(this.accept("[]?|")){this.backup();break}const u=this.next();if(u===92){this.done&&(this.backup(),this.reportError("Unexpected trailing backslash."));const p=this.next();if(!n.includes(p)){const d=String.fromCodePoint(p);this.backup(),this.reportError(`Cannot escape character '${d}'; the only characters that can be escaped are the following: ${a}.`)}c.push(p)}else c.push(u)}return{kind:r.SyntaxKind.Literal,chars:c}}reportError(c,{line:u=this.line,column:p=this.column}={}){throw new i.ParserError(c,u,p)}mark(){return{line:this.line,column:this.column}}accept(c){const u=this.next(),p=new e.CharacterIterator(c);for(const d of p)if(d===u)return!0;return this.backup(),!1}peek(){const c=this.next();return this.backup(),c}next(){if(this.done)return s;const c=this.input.charCodeAt(this.position++);if(this.lastWidth=1,c===10)return this.lastColumn=this.column,this.column=1,this.line++,c;if(this.lastColumn=this.column++,!(0,t.isHighSurrogate)(c)||this.done)return c;const u=this.input.charCodeAt(this.position);return(0,t.isLowSurrogate)(u)?(this.position++,this.lastWidth++,(0,t.convertSurrogatePairToCodePoint)(c,u)):c}backup(){this.position-=this.lastWidth,this.column=this.lastColumn,this.lastWidth===1&&this.input.charCodeAt(this.position)===10&&this.line--}};return Bs.Parser=o,Bs}var Yv;function D5(){if(Yv)return cn;Yv=1,Object.defineProperty(cn,"__esModule",{value:!0}),cn.parseRawPattern=cn.pattern=void 0;const t=QO(),e=new t.Parser;function r(n,...a){let s=n.raw[0];for(const[o,l]of a.entries())s+=l,s+=n.raw[o+1];return e.parse(s)}cn.pattern=r;function i(n){return e.parse(n)}return cn.parseRawPattern=i,cn}var Vh={},Ns={},un={},Xv;function Yu(){if(Xv)return un;Xv=1,Object.defineProperty(un,"__esModule",{value:!0}),un.createStatefulTransformer=un.createSimpleTransformer=void 0;function t(r){return{type:0,transform:r}}un.createSimpleTransformer=t;function e(r){return{type:1,factory:r}}return un.createStatefulTransformer=e,un}var Us={},Zv;function JO(){if(Zv)return Us;Zv=1,Object.defineProperty(Us,"__esModule",{value:!0}),Us.CollapseDuplicatesTransformer=void 0;class t{constructor({defaultThreshold:r,customThresholds:i}){this.remaining=-1,this.lastChar=-1,this.defaultThreshold=r,this.customThresholds=i}transform(r){if(r===this.lastChar)return this.remaining-- >0?r:void 0;const i=this.customThresholds.get(r)??this.defaultThreshold;return this.remaining=i-1,this.lastChar=r,i>0?r:void 0}reset(){this.remaining=-1,this.lastChar=-1}}return Us.CollapseDuplicatesTransformer=t,Us}var Qv;function L5(){if(Qv)return Ns;Qv=1,Object.defineProperty(Ns,"__esModule",{value:!0}),Ns.collapseDuplicatesTransformer=void 0;const t=Xi(),e=Yu(),r=JO();function i({defaultThreshold:a=1,customThresholds:s=new Map}={}){const o=n(s);return(0,e.createStatefulTransformer)(()=>new r.CollapseDuplicatesTransformer({defaultThreshold:a,customThresholds:o}))}Ns.collapseDuplicatesTransformer=i;function n(a){const s=new Map;for(const[o,l]of a){if(l<0)throw new RangeError("Expected all thresholds to be non-negative.");const c=(0,t.getAndAssertSingleCodePoint)(o);s.set(c,l)}return s}return Ns}var zs={},Hs={},Jv;function Wf(){if(Jv)return Hs;Jv=1,Object.defineProperty(Hs,"__esModule",{value:!0}),Hs.remapCharactersTransformer=void 0;const t=Xi(),e=Vf(),r=Yu();function i(a){const s=n(a);return(0,r.createSimpleTransformer)(o=>s.get(o)??o)}Hs.remapCharactersTransformer=i;function n(a){const s=new Map,o=a instanceof Map?a.entries():Object.entries(a);for(const[l,c]of o){const u=(0,t.getAndAssertSingleCodePoint)(l),p=new e.CharacterIterator(c);for(const d of p)s.set(d,u)}return s}return Hs}var Fs={},ey;function eB(){return ey||(ey=1,Object.defineProperty(Fs,"__esModule",{value:!0}),Fs.confusables=void 0,Fs.confusables=new Map([[" "," "],["0","⓿"],["1","⓵➊⑴¹𝟏𝟙１𝟷𝟣⒈𝟭1➀₁①❶⥠"],["2","⓶⒉⑵➋ƻ²ᒿ𝟚２𝟮𝟤ᒾ𝟸Ƨ𝟐②ᴤ₂➁❷ᘝƨ"],["3","³ⳌꞫ𝟑ℨ𝟛𝟯𝟥Ꝫ➌ЗȜ⓷ӠƷ３𝟹⑶⒊ʒʓǯǮƺ𝕴ᶾзᦡ➂③₃ᶚᴣᴟ❸ҘҙӬӡӭӟӞ"],["4","➍ҶᏎ𝟜ҷ⓸ҸҹӴӵᶣ４чㄩ⁴➃₄④❹Ӌ⑷⒋"],["5","𝟱⓹➎Ƽ𝟓𝟻𝟝𝟧５➄₅⑤⁵❺ƽ⑸⒌"],["6","ⳒᏮ𝟞𝟨𝟔➏⓺Ϭϭ⁶б６ᧈ⑥➅₆❻⑹⒍"],["7","⓻𐓒➐７⁷⑦₇❼➆⑺⒎"],["8","𐌚➑⓼８𝟠𝟪৪⁸₈𝟴➇⑧❽𝟾𝟖⑻⒏"],["9","ꝮⳊ⓽➒੧৭୨９𝟫𝟿𝟗⁹₉Գ➈⑨❾⑼⒐"],["A","🄰Ꭿ𐊠𝕬𝜜𝐴ꓮᎪ𝚨ꭺ𝝖🅐Å∀🇦₳🅰𝒜𝘈𝐀𝔸дǺᗅⒶＡΑᾋᗩĂÃÅǍȀȂĀȺĄʌΛλƛᴀᴬДАልÄₐᕱªǞӒΆẠẢẦẨẬẮẰẲẴẶᾸᾹᾺΆᾼᾈᾉᾊᾌᾍᾎᾏἈἉἊἋἌἍἎἏḀȦǠӐÀÁÂẤẪ𝛢𝓐𝙰𝘼"],["a","∂⍺ⓐձǟᵃᶏ⒜аɒａαȃȁคǎმäɑāɐąᾄẚạảǡầẵḁȧӑӓãåάὰάăẩằẳặᾀᾁᾂᾃᾅᾆᾰᾱᾲᾳᾴᶐᾶᾷἀἁἂἃἄἅἆἇᾇậắàáâấẫǻⱥ𝐚𝑎𝒂𝒶𝓪𝔞𝕒𝖆𝖺𝗮𝘢𝙖𝚊𝛂𝛼𝜶𝝰𝞪⍶"],["B","𐌁𝑩𝕭🄱𐊡𝖡𝘽ꓐ𝗕𝘉𝜝𐊂𝚩𝐁𝛣𝝗𝐵𝙱𝔹Ᏼᏼ𝞑Ꞵ𝔅🅑฿𝓑ᗿᗾᗽ🅱ⒷＢвϐᗷƁ乃ßცჩ๖βɮБՅ๒ᙖʙᴮᵇጌḄℬΒВẞḂḆɃദᗹᗸᵝᙞᙟᙝᛒᙗᙘᴃ🇧"],["b","Ꮟ𝐛𝘣𝒷𝔟𝓫𝖇𝖻𝑏𝙗𝕓𝒃𝗯𝚋♭ᑳᒈｂᖚᕹᕺⓑḃḅҍъḇƃɓƅᖯƄЬᑲþƂ⒝ЪᶀᑿᒀᒂᒁᑾьƀҌѢѣᔎ"],["C","ᏟⲤ🄲ꓚ𐊢𐌂🅲𐐕🅒☾ČÇⒸＣↃƇᑕㄈ¢८↻ĈϾՇȻᙅᶜ⒞ĆҀĊ©टƆℂℭϹС匚ḈҪʗᑖᑡᑢᑣᑤᑥⅭ𝐂𝐶𝑪𝒞𝓒𝕮𝖢𝗖𝘊𝘾ᔍ"],["c","ⲥ𐐽ꮯĉｃⓒćčċçҁƈḉȼↄсርᴄϲҫ꒝ςɽϛ𝙲ᑦ᧚𝐜𝑐𝒄𝒸𝓬𝔠𝕔𝖈𝖼𝗰𝘤𝙘𝚌₵🇨ᥴᒼⅽ"],["D","Ꭰ🄳𝔡𝖉𝔻𝗗𝘋𝙳𝐷𝓓𝐃𝑫𝕯𝖣𝔇𝘿ꭰⅅ𝒟ꓓ🅳🅓ⒹＤƉᗪƊÐԺᴅᴰↁḊĐÞⅮᗞᑯĎḌḐḒḎᗫᗬᗟᗠᶛᴆ🇩"],["d","Ꮷꓒ𝓭ᵭ₫ԃⓓｄḋďḍḑḓḏđƌɖɗᵈ⒟ԁⅾᶁԀᑺᑻᑼᑽᒄᑰᑱᶑ𝕕𝖽𝑑𝘥𝒅𝙙𝐝𝗱𝚍ⅆ𝒹ʠժ"],["E","ꭼ🄴𝙀𝔼𐊆𝚬ꓰ𝝚𝞔𝓔𝑬𝗘🅴🅔ⒺΈＥƎἝᕮƐモЄᴇᴱᵉÉ乇ЁɆꂅ€ÈℰΕЕⴹᎬĒĔĖĘĚÊËԐỀẾỄỂẼḔḖẺȄȆẸỆȨḜḘḚἘἙἚἛἜῈΈӖὲέЀϵ🇪"],["e","𝑒𝓮𝕖𝖊𝘦𝗲𝚎𝙚𝒆𝔢𝖾𝐞Ҿҿⓔｅ⒠èᧉéᶒêɘἔềếễ૯ǝєεēҽɛểẽḕḗĕėëẻěȅȇẹệȩɇₑęḝḙḛ℮еԑѐӗᥱёἐἑἒἓἕℯ"],["F","🄵𐊇𝔉𝘍𐊥ꓝꞘ🅵🅕𝓕ⒻＦғҒᖴƑԲϝቻḞℱϜ₣🇫Ⅎ"],["f","𝐟𝖋ⓕｆƒḟʃբᶠ⒡ſꊰʄ∱ᶂ𝘧"],["G","ꓖᏳ🄶Ꮐᏻ𝔾𝓖𝑮𝕲ꮐ𝒢𝙂𝖦𝙶𝔊𝐺𝐆🅶🅖ⒼＧɢƓʛĢᘜᴳǴĠԌĜḠĞǦǤԍ₲🇬⅁"],["g","ⓖｇǵĝḡğġǧģց૭ǥɠﻭﻮᵍ⒢ℊɡᧁ𝐠𝑔𝒈𝓰𝔤𝕘𝖌𝗀𝗴𝘨𝙜𝚐"],["H","🄷𝜢ꓧ𝘏𝐻𝝜𝖧𐋏𝗛ꮋℍᎻℌⲎ𝑯𝞖🅷🅗ዞǶԋⒽＨĤᚺḢḦȞḤḨḪĦⱧҢңҤῊΉῌἨἩἪἫἭἮἯᾘᾙᾚᾛᾜᾝᾞᾟӉӈҥΉн卄♓𝓗ℋН𝐇𝙃𝙷ʜ𝛨Η𝚮ᕼӇᴴᵸ🇭"],["h","Һ⒣ђⓗｈĥḣḧȟḥḩḫẖħⱨհһከኩኪካɦℎ𝐡𝒉𝒽𝓱𝔥𝕙𝖍𝗁𝗵𝘩𝙝𝚑իʰᑋᗁɧんɥ"],["I","🄸ЇꀤᏆ🅸🅘إﺇٳأﺃٲٵⒾＩ៸ÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗェエῘῙῚΊἸἹἺἻἼἽἾⅠΪΊɪᶦᑊᥣ𝛪𝐈𝙄𝙸𝓵𝙡𝐼ᴵ𝚰𝑰🇮"],["i","ⓘｉìíîĩīĭïḯỉǐȉȋịḭῐῑῒΐῖῗἰἱἲⅰⅼ∣ⵏ￨׀ا١۱ߊᛁἳἴἵɨіὶίᶖ𝔦𝚒𝝸𝗂𝐢𝕚𝖎𝗶𝘪𝙞ίⁱᵢ𝓲⒤"],["J","🄹🅹🅙ⒿＪЈʝᒍנﾌĴʆวلյʖᴊᴶﻝጋɈⱼՂๅႱįᎫȷ丿ℐℑᒘᒙᒚᒛᒴᒵᒎᒏ🇯"],["j","ⓙｊϳʲ⒥ɉĵǰјڶᶨ𝒿𝘫𝗷𝑗𝙟𝔧𝒋𝗃𝓳𝕛𝚓𝖏𝐣"],["K","𝗞🄺𝜥𝘒ꓗ𝙆𝕂Ⲕ𝔎𝛫Ꮶ𝞙𝒦🅺🅚₭ⓀＫĸḰќƘкҠκқҟӄʞҚКҡᴋᴷᵏ⒦ᛕЌጕḲΚKҜҝҞĶḴǨⱩϗӃ🇰"],["k","ⓚｋḱǩḳķḵƙⱪᶄ𝐤𝘬𝗄𝕜𝜅𝜘𝜿𝝒𝝹𝞌𝞳𝙠𝚔𝑘𝒌ϰ𝛋𝛞𝟆𝗸𝓴𝓀"],["L","🄻𐐛Ⳑ𝑳𝙻𐑃𝓛ⳑꮮᏞꓡ🅻🅛ﺈ└ⓁւＬĿᒪ乚ՆʟꓶιԼᴸˡĹረḶₗΓլĻᄂⅬℒⱢᥧᥨᒻᒶᒷᶫﺎᒺᒹᒸᒫ⎳ㄥŁⱠﺄȽ🇱"],["l","ⓛｌŀĺľḷḹļӀℓḽḻłﾚɭƚɫⱡ|Ɩ⒧ʅǀוןΙІ｜ᶩӏ𝓘𝕀𝖨𝗜𝘐𝐥𝑙𝒍𝓁𝔩𝕝𝖑𝗅𝗹𝘭𝚕𝜤𝝞ı𝚤ɩι𝛊𝜄𝜾𝞲"],["M","🄼𐌑𐊰ꓟⲘᎷ🅼🅜ⓂＭмṂ൱ᗰ州ᘻო๓♏ʍᙏᴍᴹᵐ⒨ḾМṀ௱ⅯℳΜϺᛖӍӎ𝐌𝑀𝑴𝓜𝔐𝕄𝕸𝖬𝗠𝘔𝙈𝙼𝚳𝛭𝜧𝝡𝞛🇲"],["m","₥ᵯ𝖒𝐦𝗆𝔪𝕞𝓂ⓜｍനᙢ൩ḿṁⅿϻṃጠɱ៳ᶆ𝙢𝓶𝚖𝑚𝗺᧕᧗"],["N","🄽ℕꓠ𝛮𝝢𝙽𝚴𝑵𝑁Ⲛ𝐍𝒩𝞜𝗡𝘕𝜨𝓝𝖭🅽₦🅝ЙЍⓃҋ៷ＮᴎɴƝᑎ几иՈռИהЛπᴺᶰŃ刀ክṄⁿÑПΝᴨոϖǸŇṆŅṊṈทŊӢӣӤӥћѝйᥢҊᴻ🇳"],["n","ח𝒏𝓷𝙣𝑛𝖓𝔫𝗇𝚗𝗻ᥒⓝήｎǹᴒńñᾗηṅňṇɲņṋṉղຖՌƞŋ⒩ภกɳпŉлԉȠἠἡῃդᾐᾑᾒᾓᾔᾕᾖῄῆῇῂἢἣἤἥἦἧὴήበቡቢባቤብቦȵ𝛈𝜂𝜼𝝶𝞰𝕟𝘯𝐧𝓃ᶇᵰᥥ∩"],["O","ꄲ🄾𐊒𝟬ꓳⲞ𐐄𐊫𐓂𝞞🅞⍥◯ⵁ⊖０⊝𝝤Ѳϴ𝚶𝜪ѺӦӨӪΌʘ𝐎ǑÒŎÓÔÕȌȎㇿ❍ⓄＯὋロ❤૦⊕ØФԾΘƠᴼᵒ⒪ŐÖₒ¤◊Φ〇ΟОՕଠഠ௦סỒỐỖỔṌȬṎŌṐṒȮȰȪỎỜỚỠỞỢỌỘǪǬǾƟⵔ߀៰⍜⎔⎕⦰⦱⦲⦳⦴⦵⦶⦷⦸⦹⦺⦻⦼⦽⦾⦿⧀⧁⧂⧃ὈὉὊὌὍ"],["o","𝚘𝛐𝗈𝞼ဝⲟ𝙤၀𐐬𝔬𐓪𝓸🇴⍤○ϙ🅾𝒪𝖮𝟢𝟶𝙾𝘰𝗼𝕠𝜊𝐨𝝾𝞸ᐤⓞѳ᧐ᥲðｏఠᦞՓòөӧóºōôǒȏŏồốȍỗổõσṍȭṏὄṑṓȯȫ๏ᴏőöѻоዐǭȱ০୦٥౦೦൦๐໐οօᴑ०੦ỏơờớỡởợọộǫøǿɵծὀὁόὸόὂὃὅ"],["P","🄿ꓑ𝚸𝙿𝞠𝙋ꮲⲢ𝒫𝝦𝑃𝑷𝗣𝐏𐊕𝜬𝘗𝓟𝖯𝛲Ꮲ🅟Ҏ🅿ⓅＰƤᑭ尸Ṗրφքᴘᴾᵖ⒫ṔｱקРየᴩⱣℙΡῬᑸᑶᑷᑹᑬᑮ🇵₱"],["p","ҏ℗ⓟｐṕṗƥᵽῥρрƿǷῤ⍴𝓹𝓅𝐩𝑝𝒑𝔭𝕡𝖕𝗉𝗽𝘱𝙥𝚙𝛒𝝆𝞺𝜌𝞀"],["Q","🅀🆀🅠ⓆＱℚⵕԚ𝐐𝑄𝑸𝒬𝓠𝚀𝘘𝙌𝖰𝕼𝔔𝗤🇶"],["q","ⓠｑգ⒬۹զᑫɋɊԛ𝗊𝑞𝘲𝕢𝚚𝒒𝖖𝐪𝔮𝓺𝙦"],["R","℞℟ꭱᏒ𐒴ꮢᎡꓣ🆁🅡ⓇＲᴙȒʀᖇя尺ŔЯરƦᴿዪṚɌʁℛℜℝṘŘȐṜŖṞⱤ𝐑𝑅𝑹𝓡𝕽𝖱𝗥𝘙𝙍𝚁ᚱ🇷ᴚ"],["r","ⓡｒŕṙřȑȓṛṝŗгՐɾᥬṟɍʳ⒭ɼѓᴦᶉ𝐫𝑟𝒓𝓇𝓻𝔯𝕣𝖗𝗋𝗿𝘳𝙧ᵲґᵣ"],["S","🅂ꇙ𝓢𝗦Ꮪ𝒮Ꮥ𝚂𝐒ꓢ𝖲𝔖𝙎𐊖𝕾𐐠𝘚𝕊𝑆𝑺🆂🅢ⓈＳṨŞֆՏȘˢ⒮ЅṠŠŚṤŜṦṢടᔕᔖᔢᔡᔣᔤ"],["s","ⓢꜱ𐑈ꮪｓśṥŝṡšṧʂṣṩѕşșȿᶊక𝐬𝑠𝒔𝓈𝓼𝔰𝕤𝖘𝗌𝘀𝘴𝙨𝚜ގ🇸"],["T","🅃🆃𐌕𝚻𝛵𝕋𝕿𝑻𐊱𐊗𝖳𝙏🝨𝝩𝞣𝚃𝘛𝑇ꓔ⟙𝐓Ⲧ𝗧⊤𝔗Ꭲꭲ𝒯🅣⏇⏉ⓉＴтҬҭƬイŦԵτᴛᵀｲፕϮŤ⊥ƮΤТ下ṪṬȚŢṰṮ丅丁ᐪ𝛕𝜏𝝉𝞃𝞽𝓣ㄒ🇹ጥ"],["t","ⓣｔṫẗťṭțȶ੮էʇ†ţṱṯƭŧᵗ⒯ʈեƫ𝐭𝑡𝒕𝓉𝓽𝔱𝕥𝖙𝗍𝘁𝘵𝙩𝚝ナ"],["U","🅄ꓴ𐓎꒤🆄🅤ŨŬŮᑗᑘǓǕǗǙⓊＵȖᑌ凵ƱմԱꓵЦŪՄƲᙀᵁᵘ⒰ŰપÜՍÙÚÛṸṺǛỦȔƯỪỨỮỬỰỤṲŲṶṴɄᥩᑧ∪ᘮ⋃𝐔𝑈𝑼𝒰𝓤𝔘𝕌𝖀𝖴𝗨𝘜𝙐𝚄🇺"],["u","ὺύⓤｕùũūừṷṹŭǖữᥙǚǜὗυΰนսʊǘǔúůᴜűųยûṻцሁüᵾᵤµʋủȕȗưứửựụṳṵʉῠῡῢΰῦῧὐὑϋύὒὓὔὕὖᥔ𝐮𝑢𝒖𝓊𝓾𝔲𝕦𝖚𝗎ᶙ"],["V","🅅ꓦ𝑽𝖵𝘝Ꮩ𝚅𝙑𝐕🆅🅥ⓋＶᐯѴᵛ⒱۷ṾⅴⅤṼ٧ⴸѶᐺᐻ🇻𝓥"],["v","ሀⓥｖ𝜐𝝊ṽṿ౮งѵעᴠνטᵥѷ៴ᘁ𝙫𝚟𝛎𝜈𝝂𝝼𝞶𝘷𝘃𝓿"],["W","🅆ᏔᎳ𝑾ꓪ𝒲𝘞🆆Ⓦ🅦ｗＷẂᾧᗯᥕ山ѠຟచաЩШώщฬшᙎᵂʷ⒲ฝሠẄԜẀŴẆẈധᘺѿᙡƜ₩🇼"],["w","ẁꮃẃⓦ⍵ŵẇẅẘẉⱳὼὠὡὢὣωὤὥὦὧῲῳῴῶῷⱲѡԝᴡώᾠᾡᾢᾣᾤᾥᾦɯ𝝕𝟉𝞏"],["X","🞨🞩🞪🅇🞫🞬𐌗Ⲭꓫ𝖃𝞦𝘟𐊐𝚾𝝬𝜲Ꭓ𐌢𝖷𝑋𝕏𝔛𐊴𝗫🆇🅧❌Ⓧ𝓧ＸẊ᙭χㄨ𝒳ӾჯӼҳЖΧҲᵡˣ⒳אሸẌꊼⅩХ╳᙮ᕁᕽⅹᚷⵝ𝙓𝚇乂𝐗🇽"],["x","ⓧｘхẋ×ₓ⤫⤬⨯ẍᶍ𝙭ӽ𝘹𝐱𝚡⨰ﾒ𝔁"],["Y","Ⲩ𝚈𝑌𝗬𝐘ꓬ𝒀𝜰𐊲🆈🅨ⓎＹὛƳㄚʏ⅄ϔ￥¥ՎϓγץӲЧЎሃŸɎϤΥϒҮỲÝŶỸȲẎỶỴῨῩῪΎὙὝὟΫΎӮӰҰұ𝕐🇾"],["y","🅈ᎽᎩⓨｙỳýŷỹȳẏÿỷуყẙỵƴɏᵞɣʸᶌү⒴ӳӱӯўУʎ"],["Z","🅉ꓜ𝗭𝐙☡Ꮓ𝘡🆉🅩ⓏＺẔƵ乙ẐȤᶻ⒵ŹℤΖŻŽẒⱫ🇿"],["z","ꮓⓩｚźẑżžẓẕƶȥɀᴢጊʐⱬᶎʑᙆ"]])),Fs}var ty;function O5(){if(ty)return zs;ty=1,Object.defineProperty(zs,"__esModule",{value:!0}),zs.resolveConfusablesTransformer=void 0;const t=Wf(),e=eB();function r(){return(0,t.remapCharactersTransformer)(e.confusables)}return zs.resolveConfusablesTransformer=r,zs}var qs={},js={},ry;function tB(){return ry||(ry=1,Object.defineProperty(js,"__esModule",{value:!0}),js.dictionary=void 0,js.dictionary=new Map([["a","@4"],["c","("],["e","3"],["i","1|!"],["g","6"],["o","0"],["s","$5"],["t","7"],["z","2"]])),js}var iy;function B5(){if(iy)return qs;iy=1,Object.defineProperty(qs,"__esModule",{value:!0}),qs.resolveLeetSpeakTransformer=void 0;const t=Wf(),e=tB();function r(){return(0,t.remapCharactersTransformer)(e.dictionary)}return qs.resolveLeetSpeakTransformer=r,qs}var Gs={},ny;function N5(){if(ny)return Gs;ny=1,Object.defineProperty(Gs,"__esModule",{value:!0}),Gs.toAsciiLowerCaseTransformer=void 0;const t=Xi(),e=Yu();function r(){return(0,e.createSimpleTransformer)(i=>(0,t.isUpperCase)(i)?(0,t.invertCaseOfAlphabeticChar)(i):i)}return Gs.toAsciiLowerCaseTransformer=r,Gs}var ay;function rB(){return ay||(ay=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.englishDataset=t.englishRecommendedTransformers=t.englishRecommendedWhitelistMatcherTransformers=t.englishRecommendedBlacklistMatcherTransformers=void 0;const e=$5(),r=D5(),i=L5(),n=O5(),a=B5(),s=N5();t.englishRecommendedBlacklistMatcherTransformers=[(0,n.resolveConfusablesTransformer)(),(0,a.resolveLeetSpeakTransformer)(),(0,s.toAsciiLowerCaseTransformer)(),(0,i.collapseDuplicatesTransformer)({defaultThreshold:1,customThresholds:new Map([["b",2],["e",2],["o",2],["l",2],["s",2],["g",2]])})],t.englishRecommendedWhitelistMatcherTransformers=[(0,s.toAsciiLowerCaseTransformer)(),(0,i.collapseDuplicatesTransformer)({defaultThreshold:Number.POSITIVE_INFINITY,customThresholds:new Map([[" ",1]])})],t.englishRecommendedTransformers={blacklistMatcherTransformers:t.englishRecommendedBlacklistMatcherTransformers,whitelistMatcherTransformers:t.englishRecommendedWhitelistMatcherTransformers},t.englishDataset=new e.DataSet().addPhrase(o=>o.setMetadata({originalWord:"abo"}).addPattern((0,r.pattern)`|ab[b]o[s]|`)).addPhrase(o=>o.setMetadata({originalWord:"abeed"}).addPattern((0,r.pattern)`ab[b]eed`)).addPhrase(o=>o.setMetadata({originalWord:"africoon"}).addPattern((0,r.pattern)`africoon`)).addPhrase(o=>o.setMetadata({originalWord:"anal"}).addPattern((0,r.pattern)`|anal`).addWhitelistedTerm("analabos").addWhitelistedTerm("analagous").addWhitelistedTerm("analav").addWhitelistedTerm("analy").addWhitelistedTerm("analog").addWhitelistedTerm("an al").addPattern((0,r.pattern)`danal`).addPattern((0,r.pattern)`eanal`).addPattern((0,r.pattern)`fanal`).addWhitelistedTerm("fan al").addPattern((0,r.pattern)`ganal`).addWhitelistedTerm("gan al").addPattern((0,r.pattern)`ianal`).addWhitelistedTerm("ian al").addPattern((0,r.pattern)`janal`).addWhitelistedTerm("trojan al").addPattern((0,r.pattern)`kanal`).addPattern((0,r.pattern)`lanal`).addWhitelistedTerm("lan al").addPattern((0,r.pattern)`lanal`).addWhitelistedTerm("lan al").addPattern((0,r.pattern)`oanal|`).addPattern((0,r.pattern)`panal`).addWhitelistedTerm("pan al").addPattern((0,r.pattern)`qanal`).addPattern((0,r.pattern)`ranal`).addPattern((0,r.pattern)`sanal`).addPattern((0,r.pattern)`tanal`).addWhitelistedTerm("tan al").addPattern((0,r.pattern)`uanal`).addWhitelistedTerm("uan al").addPattern((0,r.pattern)`vanal`).addWhitelistedTerm("van al").addPattern((0,r.pattern)`wanal`).addPattern((0,r.pattern)`xanal`).addWhitelistedTerm("texan al").addPattern((0,r.pattern)`yanal`).addPattern((0,r.pattern)`zanal`)).addPhrase(o=>o.setMetadata({originalWord:"anus"}).addPattern((0,r.pattern)`anus`).addWhitelistedTerm("an us").addWhitelistedTerm("tetanus").addWhitelistedTerm("uranus").addWhitelistedTerm("janus").addWhitelistedTerm("manus")).addPhrase(o=>o.setMetadata({originalWord:"arabush"}).addPattern((0,r.pattern)`arab[b]ush`)).addPhrase(o=>o.setMetadata({originalWord:"arse"}).addPattern((0,r.pattern)`|ars[s]e`).addWhitelistedTerm("arsen")).addPhrase(o=>o.setMetadata({originalWord:"ass"}).addPattern((0,r.pattern)`|ass`).addWhitelistedTerm("assa").addWhitelistedTerm("assem").addWhitelistedTerm("assen").addWhitelistedTerm("asser").addWhitelistedTerm("asset").addWhitelistedTerm("assev").addWhitelistedTerm("assi").addWhitelistedTerm("assoc").addWhitelistedTerm("assoi").addWhitelistedTerm("assu")).addPhrase(o=>o.setMetadata({originalWord:"bastard"}).addPattern((0,r.pattern)`bas[s]tard`)).addPhrase(o=>o.setMetadata({originalWord:"bestiality"}).addPattern((0,r.pattern)`be[e][a]s[s]tial`)).addPhrase(o=>o.setMetadata({originalWord:"bitch"}).addPattern((0,r.pattern)`bitch`).addPattern((0,r.pattern)`bich|`)).addPhrase(o=>o.setMetadata({originalWord:"blowjob"}).addPattern((0,r.pattern)`b[b]l[l][o]wj[o]b`)).addPhrase(o=>o.setMetadata({originalWord:"bollocks"}).addPattern((0,r.pattern)`bol[l]ock`)).addPhrase(o=>o.setMetadata({originalWord:"boob"}).addPattern((0,r.pattern)`boob`)).addPhrase(o=>o.setMetadata({originalWord:"boonga"}).addPattern((0,r.pattern)`boonga`).addWhitelistedTerm("baboon ga")).addPhrase(o=>o.setMetadata({originalWord:"buttplug"}).addPattern((0,r.pattern)`buttplug`)).addPhrase(o=>o.setMetadata({originalWord:"chingchong"}).addPattern((0,r.pattern)`chingchong`)).addPhrase(o=>o.setMetadata({originalWord:"chink"}).addPattern((0,r.pattern)`chink`).addWhitelistedTerm("chin k")).addPhrase(o=>o.setMetadata({originalWord:"cock"}).addPattern((0,r.pattern)`|cock|`).addPattern((0,r.pattern)`|cocks`).addPattern((0,r.pattern)`|cockp`).addPattern((0,r.pattern)`|cocke[e]|`).addWhitelistedTerm("cockney")).addPhrase(o=>o.setMetadata({originalWord:"cuck"}).addPattern((0,r.pattern)`cuck`).addWhitelistedTerm("cuckoo")).addPhrase(o=>o.setMetadata({originalWord:"cum"}).addPattern((0,r.pattern)`|cum`).addWhitelistedTerm("cumu").addWhitelistedTerm("cumb")).addPhrase(o=>o.setMetadata({originalWord:"cunt"}).addPattern((0,r.pattern)`|cunt`).addPattern((0,r.pattern)`cunt|`)).addPhrase(o=>o.setMetadata({originalWord:"deepthroat"}).addPattern((0,r.pattern)`deepthro[o]at`).addPattern((0,r.pattern)`deepthro[o]t`)).addPhrase(o=>o.setMetadata({originalWord:"dick"}).addPattern((0,r.pattern)`|dck|`).addPattern((0,r.pattern)`dick`).addWhitelistedTerm("benedick").addWhitelistedTerm("dickens")).addPhrase(o=>o.setMetadata({originalWord:"dildo"}).addPattern((0,r.pattern)`dildo`)).addPhrase(o=>o.setMetadata({originalWord:"doggystyle"}).addPattern((0,r.pattern)`d[o]g[g]ys[s]t[y]l[l]`)).addPhrase(o=>o.setMetadata({originalWord:"double penetration"}).addPattern((0,r.pattern)`double penetra`)).addPhrase(o=>o.setMetadata({originalWord:"dyke"}).addPattern((0,r.pattern)`dyke`).addWhitelistedTerm("van dyke")).addPhrase(o=>o.setMetadata({originalWord:"ejaculate"}).addPattern((0,r.pattern)`e[e]jacul`).addPattern((0,r.pattern)`e[e]jakul`).addPattern((0,r.pattern)`e[e]acul[l]ate`)).addPhrase(o=>o.setMetadata({originalWord:"fag"}).addPattern((0,r.pattern)`|fag`).addPattern((0,r.pattern)`fggot`)).addPhrase(o=>o.setMetadata({originalWord:"felch"}).addPattern((0,r.pattern)`fe[e]l[l]ch`)).addPhrase(o=>o.setMetadata({originalWord:"fellatio"}).addPattern((0,r.pattern)`f[e][e]llat`)).addPhrase(o=>o.setMetadata({originalWord:"finger bang"}).addPattern((0,r.pattern)`fingerbang`)).addPhrase(o=>o.setMetadata({originalWord:"fisting"}).addPattern((0,r.pattern)`fistin`)).addPhrase(o=>o.setMetadata({originalWord:"fuck"}).addPattern((0,r.pattern)`f[?]ck`).addPattern((0,r.pattern)`|fk`).addPattern((0,r.pattern)`|fu|`).addPattern((0,r.pattern)`|fuk`).addWhitelistedTerm("fick").addWhitelistedTerm("kung-fu").addWhitelistedTerm("kung fu")).addPhrase(o=>o.setMetadata({originalWord:"gangbang"}).addPattern((0,r.pattern)`g[?]ngbang`)).addPhrase(o=>o.setMetadata({originalWord:"handjob"}).addPattern((0,r.pattern)`h[?]ndjob`)).addPhrase(o=>o.setMetadata({originalWord:"hentai"}).addPattern((0,r.pattern)`h[e][e]ntai`)).addPhrase(o=>o.setMetadata({originalWord:"hooker"}).addPattern((0,r.pattern)`hooker`)).addPhrase(o=>o.setMetadata({originalWord:"incest"}).addPattern((0,r.pattern)`incest`)).addPhrase(o=>o.setMetadata({originalWord:"jerk off"}).addPattern((0,r.pattern)`jerkoff`)).addPhrase(o=>o.setMetadata({originalWord:"jizz"}).addPattern((0,r.pattern)`jizz`)).addPhrase(o=>o.setMetadata({originalWord:"kike"}).addPattern((0,r.pattern)`kike`)).addPhrase(o=>o.setMetadata({originalWord:"lubejob"}).addPattern((0,r.pattern)`lubejob`)).addPhrase(o=>o.setMetadata({originalWord:"masturbate"}).addPattern((0,r.pattern)`m[?]sturbate`).addPattern((0,r.pattern)`masterbate`)).addPhrase(o=>o.setMetadata({originalWord:"negro"}).addPattern((0,r.pattern)`negro`).addWhitelistedTerm("montenegro").addWhitelistedTerm("negron").addWhitelistedTerm("stoneground").addWhitelistedTerm("winegrow")).addPhrase(o=>o.setMetadata({originalWord:"nigger"}).addPattern((0,r.pattern)`n[i]gger`).addPattern((0,r.pattern)`n[i]gga`).addPattern((0,r.pattern)`|nig|`).addPattern((0,r.pattern)`|nigs|`).addWhitelistedTerm("snigger")).addPhrase(o=>o.setMetadata({originalWord:"orgasm"}).addPattern((0,r.pattern)`[or]gasm`).addWhitelistedTerm("gasma")).addPhrase(o=>o.setMetadata({originalWord:"orgy"}).addPattern((0,r.pattern)`orgy`).addPattern((0,r.pattern)`orgies`).addWhitelistedTerm("porgy")).addPhrase(o=>o.setMetadata({originalWord:"penis"}).addPattern((0,r.pattern)`pe[e]nis`).addPattern((0,r.pattern)`|pnis`).addWhitelistedTerm("pen is")).addPhrase(o=>o.setMetadata({originalWord:"piss"}).addPattern((0,r.pattern)`|piss`)).addPhrase(o=>o.setMetadata({originalWord:"porn"}).addPattern((0,r.pattern)`|prn|`).addPattern((0,r.pattern)`porn`).addWhitelistedTerm("p orna")).addPhrase(o=>o.setMetadata({originalWord:"prick"}).addPattern((0,r.pattern)`|prick[s]|`)).addPhrase(o=>o.setMetadata({originalWord:"pussy"}).addPattern((0,r.pattern)`p[u]ssy`)).addPhrase(o=>o.setMetadata({originalWord:"rape"}).addPattern((0,r.pattern)`|rape`).addPattern((0,r.pattern)`|rapis[s]t`)).addPhrase(o=>o.setMetadata({originalWord:"retard"}).addPattern((0,r.pattern)`retard`)).addPhrase(o=>o.setMetadata({originalWord:"scat"}).addPattern((0,r.pattern)`|s[s]cat|`)).addPhrase(o=>o.setMetadata({originalWord:"semen"}).addPattern((0,r.pattern)`|s[s]e[e]me[e]n`)).addPhrase(o=>o.setMetadata({originalWord:"sex"}).addPattern((0,r.pattern)`|s[s]e[e]x|`).addPattern((0,r.pattern)`|s[s]e[e]xy|`)).addPhrase(o=>o.setMetadata({originalWord:"shit"}).addPattern((0,r.pattern)`|shit`).addPattern((0,r.pattern)`shit|`).addWhitelistedTerm("s hit").addWhitelistedTerm("sh it").addWhitelistedTerm("shi t").addWhitelistedTerm("shitake")).addPhrase(o=>o.setMetadata({originalWord:"slut"}).addPattern((0,r.pattern)`s[s]lut`)).addPhrase(o=>o.setMetadata({originalWord:"spastic"}).addPattern((0,r.pattern)`|spastic`)).addPhrase(o=>o.setMetadata({originalWord:"tit"}).addPattern((0,r.pattern)`|tit|`).addPattern((0,r.pattern)`|tits|`).addPattern((0,r.pattern)`|titt`).addPattern((0,r.pattern)`|tiddies`).addPattern((0,r.pattern)`|tities`)).addPhrase(o=>o.setMetadata({originalWord:"tranny"}).addPattern((0,r.pattern)`tranny`)).addPhrase(o=>o.setMetadata({originalWord:"turd"}).addPattern((0,r.pattern)`|turd`).addWhitelistedTerm("turducken")).addPhrase(o=>o.setMetadata({originalWord:"twat"}).addPattern((0,r.pattern)`|twat`).addWhitelistedTerm("twattle")).addPhrase(o=>o.setMetadata({originalWord:"vagina"}).addPattern((0,r.pattern)`vagina`).addPattern((0,r.pattern)`|v[?]gina`)).addPhrase(o=>o.setMetadata({originalWord:"wank"}).addPattern((0,r.pattern)`|wank`)).addPhrase(o=>o.setMetadata({originalWord:"whore"}).addPattern((0,r.pattern)`|wh[o]re|`).addPattern((0,r.pattern)`|who[o]res[s]|`).addWhitelistedTerm("who're"))})(Vh)),Vh}var Vs={},sy;function iB(){if(sy)return Vs;sy=1,Object.defineProperty(Vs,"__esModule",{value:!0}),Vs.skipNonAlphabeticTransformer=void 0;const t=Xi(),e=Yu();function r(){return(0,e.createSimpleTransformer)(i=>(0,t.isAlphabetic)(i)?i:void 0)}return Vs.skipNonAlphabeticTransformer=r,Vs}var oy;function nB(){return oy||(oy=1,(function(t){var e=on&&on.__createBinding||(Object.create?(function(i,n,a,s){s===void 0&&(s=a);var o=Object.getOwnPropertyDescriptor(n,a);(!o||("get"in o?!n.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return n[a]}}),Object.defineProperty(i,s,o)}):(function(i,n,a,s){s===void 0&&(s=a),i[s]=n[a]})),r=on&&on.__exportStar||function(i,n){for(var a in i)a!=="default"&&!Object.prototype.hasOwnProperty.call(n,a)&&e(n,i,a)};Object.defineProperty(t,"__esModule",{value:!0}),r(I5(),t),r(VO(),t),r($5(),t),r(XO(),t),r(P5(),t),r(jf(),t),r(ZO(),t),r(Gf(),t),r(R5(),t),r(D5(),t),r(rB(),t),r(L5(),t),r(Wf(),t),r(O5(),t),r(B5(),t),r(iB(),t),r(N5(),t)})(on)),on}var aB=nB();const Oe=dp(aB);Oe.DataSet;Oe.ParserError;Oe.PhraseBuilder;const sB=Oe.RegExpMatcher;Oe.SyntaxKind;Oe.TextCensor;Oe.assignIncrementingIds;Oe.asteriskCensorStrategy;const oB=Oe.collapseDuplicatesTransformer;Oe.compareMatchByPositionAndId;const lB=Oe.englishDataset;Oe.englishRecommendedBlacklistMatcherTransformers;const cB=Oe.englishRecommendedTransformers;Oe.englishRecommendedWhitelistMatcherTransformers;Oe.fixedCharCensorStrategy;Oe.fixedPhraseCensorStrategy;Oe.grawlixCensorStrategy;Oe.keepEndCensorStrategy;Oe.keepStartCensorStrategy;Oe.parseRawPattern;Oe.pattern;Oe.randomCharFromSetCensorStrategy;Oe.remapCharactersTransformer;const uB=Oe.resolveConfusablesTransformer,dB=Oe.resolveLeetSpeakTransformer,hB=Oe.skipNonAlphabeticTransformer;Oe.toAsciiLowerCaseTransformer;new sB({...lB.build(),...cB,...uB(),...hB(),...oB(),...dB()});const lp=3,U5=27;function pB(t){const e=bp.safeParse(t);if(!e.success){const r=e.error.issues[0].code;return r==="invalid_type"?{isValid:!1,error:f("username.not_string")}:r==="too_small"?{isValid:!1,error:f("username.too_short",{min:lp})}:r==="too_big"?{isValid:!1,error:f("username.too_long",{max:U5})}:{isValid:!1,error:f("username.invalid_chars")}}return{isValid:!0}}var fB=Object.defineProperty,gB=Object.getOwnPropertyDescriptor,Xu=(t,e,r,i)=>{for(var n=i>1?void 0:i?gB(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&fB(e,r,n),n};const ly="username";let Oo=class extends V{constructor(){super(...arguments),this.baseUsername="",this.clanTag="",this.validationError="",this._isValid=!0}createRenderRoot(){return this}getCurrentUsername(){return this.constructFullUsername()}constructFullUsername(){return this.clanTag.length>=2?`[${this.clanTag}] ${this.baseUsername}`:this.baseUsername}connectedCallback(){super.connectedCallback();const t=this.getUsername();this.parseAndSetUsername(t),ve.getUsername().then(e=>{e&&(this.parseAndSetUsername(e??cp()),this.requestUpdate())}),ve.addAuthListener(e=>{e&&this.parseAndSetUsername(e?.username),this.requestUpdate()})}parseAndSetUsername(t){const e=K_(t);e?(this.clanTag=e.toUpperCase(),this.baseUsername=t.replace(`[${e}]`,"").trim()):(this.clanTag="",this.baseUsername=t),this.validateAndStore()}render(){return v`
      <div class="flex items-center w-full h-full gap-2">
        <input
          type="text"
          .value=${this.clanTag}
          @input=${this.handleClanTagChange}
          placeholder="${f("username.tag")}"
          maxlength="5"
          class="w-[6rem] bg-transparent border-b border-white/20 text-white placeholder-white/30 text-xl font-bold text-center focus:outline-none focus:border-white/50 transition-colors uppercase shrink-0"
        />
        <input
          type="text"
          .value=${this.baseUsername}
          @input=${this.handleUsernameChange}
          placeholder="${f("username.enter_username")}"
          maxlength="${U5}"
          class="flex-1 min-w-0 bg-transparent border-0 text-white placeholder-white/30 text-2xl font-bold text-left focus:outline-none focus:ring-0 transition-colors overflow-x-auto whitespace-nowrap text-ellipsis pr-2"
        />
      </div>
      ${this.validationError?v`<div
            id="username-validation-error"
            class="absolute top-full left-0 z-50 w-full mt-1 px-3 py-2 text-sm font-medium border border-red-500/50 rounded-lg bg-red-900/90 text-red-200 backdrop-blur-md shadow-lg"
          >
            ${this.validationError}
          </div>`:null}
    `}handleClanTagChange(t){const e=t.target,r=e.value,i=Z_(r);r.toUpperCase()!==i?(e.value=i,window.dispatchEvent(new CustomEvent("show-message",{detail:{message:f("username.tag_invalid_chars"),color:"red",duration:2e3}}))):r!==i&&(e.value=i),this.clanTag=i,this.validateAndStore()}handleUsernameChange(t){const e=t.target,r=e.value,i=r.replace(/[[\]]/g,"");r!==i&&(e.value=i,window.dispatchEvent(new CustomEvent("show-message",{detail:{message:f("username.invalid_chars"),color:"red",duration:2e3}}))),this.baseUsername=i,this.validateAndStore()}validateAndStore(){if(this.baseUsername.trim().length<lp){this._isValid=!1,this.validationError=f("username.too_short",{min:lp});return}if(this.clanTag.length>0&&this.clanTag.length<2){this._isValid=!1,this.validationError=f("username.tag_too_short");return}const e=this.constructFullUsername().trim(),r=pB(e);this._isValid=r.isValid,r.isValid?(this.storeUsername(e),this.validationError=""):this.validationError=r.error??""}getUsername(){const t=localStorage.getItem(ly);return t||this.generateNewUsername()}storeUsername(t){t&&localStorage.setItem(ly,t)}generateNewUsername(){const t=cp();return this.storeUsername(t),t}isValid(){return this._isValid}};Xu([M()],Oo.prototype,"baseUsername",2);Xu([M()],Oo.prototype,"clanTag",2);Xu([L({type:String})],Oo.prototype,"validationError",2);Oo=Xu([F("username-input")],Oo);function cp(){const e=jO().replace(/-/g,"").toLowerCase();return"Anon"+(BigInt(`0x${e}`)%1000n).toString().padStart(3,"0")}var mB=Object.defineProperty,bB=Object.getOwnPropertyDescriptor,Kf=(t,e,r,i)=>{for(var n=i>1?void 0:i?bB(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=(i?s(e,r,n):s(n))||n);return i&&n&&mB(e,r,n),n};const cy="helpSeen",uy="storeSeenHash";let nu=class extends V{constructor(){super(...arguments),this._helpSeen=localStorage.getItem(cy)==="true",this._hasNewCosmetics=!1,this._onShowPage=t=>{const e=t.detail;this._updateActiveState(e)},this.onHelpClick=()=>{localStorage.setItem(cy,"true"),this._helpSeen=!0},this.onStoreClick=()=>{this._hasNewCosmetics=!1,n1().then(t=>{t!==null&&localStorage.setItem(uy,t)})}}createRenderRoot(){return this}connectedCallback(){super.connectedCallback(),window.addEventListener("showPage",this._onShowPage);const t=window.currentPageId;t&&this.updateComplete.then(()=>{this._updateActiveState(t)}),n1().then(e=>{const r=localStorage.getItem(uy);this._hasNewCosmetics=e!==null&&e!==r})}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("showPage",this._onShowPage)}_updateActiveState(t){this.querySelectorAll(".nav-menu-item").forEach(e=>{e.dataset.page===t?e.classList.add("active"):e.classList.remove("active")})}showHelpDot(){return yu()<10&&!this._helpSeen}showStoreDot(){return this._hasNewCosmetics&&!this.showHelpDot()}render(){return v`
      <nav
        class="hidden lg:flex w-full bg-slate-950/70 backdrop-blur-md border-b border-white/10 items-center justify-center gap-8 py-4 shrink-0 transition-opacity z-50 relative"
      >
        <div class="flex flex-col items-center justify-center">
          <div class="h-8 text-[#2563eb]">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 1364 259"
              fill="currentColor"
              class="h-full w-auto drop-shadow-[0_0_10px_rgba(37,99,235,0.4)]"
            >
              <path
                d="M0,174V51h15.24v-17.14h16.81v-16.98h16.96V0h1266v17.23h17.13v16.81h16.98v16.96h14.88v123h-15.13v17.08h-17.08v17.08h-16.9v17.04H324.9v16.86h-16.9v16.95h-102v-17.12h-17.07v-17.05H48.73v-17.05h-16.89v-16.89H14.94v-16.89H0ZM1297.95,17.35H65.9v16.7h-17.08v17.08h-14.5v123.08h14.85v16.9h17.08v17.08h139.9v17.08h17.08v16.36h67.9v-16.72h17.08v-17.07h989.88v-17.07h17.08v-16.9h14.44V50.8h-14.75v-17.08h-16.9v-16.37Z"
              />
              <path
                d="M189.1,154.78v17.07h-16.9v16.75h-51.07v-16.42h-16.9v-17.07h-16.97v-84.88h16.63v-17.07h16.9v-16.84h51.07v16.5h17.07v17.07h16.7v84.89h-16.54ZM137.87,53.1v17.15h-16.6v84.86h16.97v16.61h16.89v-16.97h16.6v-84.86h-16.97v-16.79h-16.89Z"
              />
              <path
                d="M273.91,104.06v-16.73h50.92v16.45h16.85v68.05h-16.44v17.06h-50.96v16.88h16.4v16.96h-67.28v-16.61h16.33v-101.86h-16.38v-16.98h33.4v16.63c6.12,0,11.72,0,17.31,0,0,22.56,0,45.13,0,67.75h33.59v-67.61h-33.73Z"
              />
              <path
                d="M631.12,188.64v-16.36h16.53V53.2h-16.25v-16.86h118.33v33.29h-16.65v-16.36h-50.72v50.44h33.36v-16.35h16.99v50.25h-16.6v-16.33h-33.73v50.65h16.37v16.72h-67.63Z"
              />
              <path
                d="M596.78,103.8v84.94h-33.54v-84.39h-34.03v84.25h-33.85v-101.29h84.5v16.49h16.93Z"
              />
              <path
                d="M1107.12,188.71v-84.34h-34.03v84.37h-33.7v-101.41h84.42v16.41h16.86v84.96h-33.54Z"
              />
              <path
                d="M988.1,171.78v16.87h-67.88v-16.38h-16.87v-68.06h16.38v-16.87h68.06v16.38h16.87v68.06h-16.55ZM970.78,104.35h-33.39v67.38h33.39v-67.38Z"
              />
              <path
                d="M460.77,155.38v16.49h-16.58v16.83h-68.05v-16.5h-16.83v-68.05h16.49v-16.83h68.05v16.49h16.83v34.06h-67.31v33.82h33.47v-16.31h33.92ZM393.39,104.18v16.56h33.3v-16.56h-33.3Z"
              />
              <path
                d="M1209.13,172h-16.9v-67.9h-16.96v-16.9h16.68v-17.08h16.9v-16.82h16.9v33.58h50.98v16.91h-50.4v67.96h16.48v-16.43h50.95v16.54h-16.55v16.76h-68.08v-16.6Z"
              />
              <path
                d="M834.91,120.94v16.96h-16.65v33.88h16.41v16.96h-67.29v-16.63h16.34v-67.87h-16.4v-16.97h50.42v33.81h17.3l-.14-.14Z"
              />
              <path
                d="M835.05,121.08v-33.75h33.76v16.43h16.85v33.96h-33.43v-16.79c-6.13,0-11.73,0-17.32,0,0,0,.14.14.14.14Z"
              />
            </svg>
          </div>
          <div
            id="game-version"
            class="l-header__highlightText text-center"
          ></div>
        </div>
        <!-- Desktop Navigation Menu Items -->
        <button
          class="nav-menu-item text-white/70 hover:text-blue-500 font-bold tracking-widest uppercase cursor-pointer transition-colors [&.active]:text-blue-500"
          data-page="page-play"
          data-i18n="main.play"
        ></button>
        <button
          class="nav-menu-item text-white/70 hover:text-blue-500 font-bold tracking-widest uppercase cursor-pointer transition-colors [&.active]:text-blue-500"
          data-page="page-news"
          data-i18n="main.news"
        ></button>
        <div class="relative no-crazygames">
          <button
            class="nav-menu-item text-white/70 hover:text-blue-500 font-bold tracking-widest uppercase cursor-pointer transition-colors [&.active]:text-blue-500"
            data-page="page-item-store"
            data-i18n="main.store"
            @click=${this.onStoreClick}
          ></button>
          ${this.showStoreDot()?v`
                <span
                  class="absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full animate-ping"
                ></span>
                <span
                  class="absolute -top-1 -right-1 w-2 h-2 bg-red-500 rounded-full"
                ></span>
              `:""}
        </div>
        <button
          class="nav-menu-item text-white/70 hover:text-blue-500 font-bold tracking-widest uppercase cursor-pointer transition-colors [&.active]:text-blue-500"
          data-page="page-settings"
          data-i18n="main.settings"
        ></button>
        <button
          class="nav-menu-item text-white/70 hover:text-blue-500 font-bold tracking-widest uppercase cursor-pointer transition-colors [&.active]:text-blue-500"
          data-page="page-leaderboard"
          data-i18n="main.leaderboard"
        ></button>
        <div class="relative">
          <button
            class="nav-menu-item text-white/70 hover:text-blue-500 font-bold tracking-widest uppercase cursor-pointer transition-colors [&.active]:text-blue-500"
            data-page="page-help"
            data-i18n="main.help"
            @click=${this.onHelpClick}
          ></button>
          ${this.showHelpDot()?v`
                <span
                  class="absolute -top-1 -right-1 w-2 h-2 bg-yellow-400 rounded-full animate-ping"
                ></span>
                <span
                  class="absolute -top-1 -right-1 w-2 h-2 bg-yellow-400 rounded-full"
                ></span>
              `:""}
        </div>
        <lang-selector></lang-selector>
        <button
          id="nav-account-button"
          class="no-crazygames nav-menu-item relative h-10 rounded-full overflow-hidden flex items-center justify-center gap-2 px-3 bg-transparent border border-white/20 text-white/80 hover:text-white cursor-pointer transition-colors [&.active]:text-white"
          data-page="page-account"
          data-i18n-aria-label="main.account"
          data-i18n-title="main.account"
        >
          <img
            id="nav-account-avatar"
            class="no-crazygames hidden w-8 h-8 rounded-full object-cover"
            alt=""
            data-i18n-alt="main.discord_avatar_alt"
            referrerpolicy="no-referrer"
          />
          <svg
            id="nav-account-person-icon"
            class="w-5 h-5"
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round"
            aria-hidden="true"
          >
            <path d="M20 21a8 8 0 0 0-16 0" />
            <path d="M12 13a4 4 0 1 0-4-4 4 4 0 0 0 4 4Z" />
          </svg>
          <span
            id="nav-account-email-badge"
            class="hidden absolute bottom-1 right-1 w-4 h-4 rounded-full bg-slate-900/80 border border-white/20 flex items-center justify-center"
            aria-hidden="true"
          >
            <svg
              class="w-2.5 h-2.5 text-white/80"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M4 4h16v16H4z" opacity="0" />
              <path d="M4 6h16v12H4z" />
              <path d="m4 7 8 6 8-6" />
            </svg>
          </span>
          <span
            id="nav-account-signin-text"
            class="text-xs font-bold tracking-widest"
            data-i18n="main.sign_in"
          >
          </span>
        </button>
      </nav>
    `}};Kf([M()],nu.prototype,"_helpSeen",2);Kf([M()],nu.prototype,"_hasNewCosmetics",2);nu=Kf([F("desktop-nav-bar")],nu);var vB=Object.getOwnPropertyDescriptor,yB=(t,e,r,i)=>{for(var n=i>1?void 0:i?vB(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=s(n)||n);return n};let dy=class extends V{createRenderRoot(){return this}render(){return v`
      <footer
        class="[.in-game_&]:hidden bg-black/60 backdrop-blur-md flex flex-col items-center justify-center gap-2 pt-[2px] pb-2 text-white/50 w-full border-t border-white/10 shrink-0 mt-auto"
      >
        <div class="flex items-center justify-center gap-6 pt-2">
          <a
            href="https://github.com/openfrontio/OpenFrontIO"
            target="_blank"
            rel="noopener noreferrer"
            class="opacity-60 hover:opacity-100 hover:scale-110 transition-all"
          >
            <img
              src="/icons/github-mark-white.svg"
              data-i18n-alt="news.github_link"
              class="h-7 w-7 object-contain"
            />
          </a>
          <a
            href="https://www.reddit.com/r/OpenFront/"
            target="_blank"
            rel="noopener noreferrer"
            class="opacity-60 hover:opacity-100 hover:scale-110 transition-all"
          >
            <svg
              class="h-7 w-7 object-contain"
              viewBox="0 0 24 24"
              fill="white"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M12 0A12 12 0 0 0 0 12a12 12 0 0 0 12 12 12 12 0 0 0 12-12A12 12 0 0 0 12 0zm5.01 4.744c.688 0 1.25.561 1.25 1.249a1.25 1.25 0 0 1-2.498.056l-2.597-.547-.8 3.747c1.824.07 3.48.632 4.674 1.488.308-.309.73-.491 1.207-.491.968 0 1.754.786 1.754 1.754 0 .716-.435 1.333-1.01 1.614a3.111 3.111 0 0 1 .042.52c0 2.694-3.13 4.87-7.004 4.87-3.874 0-7.004-2.176-7.004-4.87 0-.183.015-.366.043-.534A1.748 1.748 0 0 1 4.028 12c0-.968.786-1.754 1.754-1.754.463 0 .898.196 1.207.49 1.207-.883 2.878-1.43 4.744-1.487l.885-4.182a.342.342 0 0 1 .14-.197.35.35 0 0 1 .238-.042l2.906.617a1.214 1.214 0 0 1 1.108-.701zM9.25 12C8.561 12 8 12.562 8 13.25c0 .687.561 1.248 1.25 1.248.687 0 1.248-.561 1.249-1.249 0-.688-.561-1.249-1.249-1.249zm5.5 0c-.687 0-1.248.561-1.248 1.25 0 .687.561 1.248 1.249 1.248.688 0 1.249-.561 1.249-1.249 0-.687-.562-1.249-1.25-1.249zm-5.466 3.99a.327.327 0 0 0-.231.094.33.33 0 0 0 0 .463c.842.842 2.484.913 2.961.913.477 0 2.105-.056 2.961-.913a.361.361 0 0 0 .029-.463.33.33 0 0 0-.464 0c-.547.533-1.684.73-2.512.73-.828 0-1.979-.196-2.512-.73a.326.326 0 0 0-.232-.095z"
              />
            </svg>
          </a>
          <a
            href="https://discord.gg/jRpxXvG42t"
            target="_blank"
            rel="noopener noreferrer"
            class="opacity-60 hover:opacity-100 hover:scale-110 transition-all"
          >
            <svg
              class="h-7 w-7 object-contain"
              viewBox="0 0 24 24"
              fill="white"
            >
              <path
                d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028 14.09 14.09 0 0 0 1.226-1.994.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-14.36a.074.074 0 0 0-.032-.027zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.956-2.418 2.157-2.418 1.21 0 2.176 1.085 2.157 2.418 0 1.334-.956 2.419-2.157 2.419zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419 0-1.333.955-2.418 2.157-2.418 1.21 0 2.176 1.085 2.157 2.418 0 1.334-.946 2.419-2.157 2.419z"
              />
            </svg>
          </a>
          <a
            href="https://openfront.wiki/Main_Page"
            target="_blank"
            rel="noopener noreferrer"
            class="opacity-60 hover:opacity-100 hover:scale-110 transition-all"
          >
            <img
              src="/icons/wiki-logo.svg"
              data-i18n-alt="main.wiki"
              class="h-7 w-7 object-contain"
            />
          </a>
        </div>
        <div class="text-xs mt-2 flex items-center justify-center gap-4">
          <a
            href="/terms-of-service.html"
            data-i18n="main.terms_of_service"
            target="_blank"
            class="hover:text-white transition-colors"
          ></a>
          <span data-i18n="main.copyright"></span>
          <a
            href="/privacy-policy.html"
            data-i18n="main.privacy_policy"
            target="_blank"
            class="hover:text-white transition-colors"
          ></a>
        </div>
      </footer>
    `}};dy=yB([F("page-footer")],dy);var wB=Object.getOwnPropertyDescriptor,xB=(t,e,r,i)=>{for(var n=i>1?void 0:i?wB(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=s(n)||n);return n};let hy=class extends V{constructor(){super(...arguments),this._initialChildren=[]}createRenderRoot(){return this}connectedCallback(){this._initialChildren.length===0&&this.childNodes.length>0&&(this._initialChildren=Array.from(this.childNodes)),super.connectedCallback()}render(){return v`
      <main
        class="relative [.in-game_&]:hidden flex flex-col flex-1 overflow-hidden w-full px-[clamp(1.5rem,3vw,3rem)] pt-[clamp(0.75rem,1.5vw,1.5rem)] pb-[clamp(0.75rem,1.5vw,1.5rem)]"
      >
        <div
          class="w-full max-w-[20cm] mx-auto flex flex-col flex-1 gap-[clamp(1.5rem,3vw,3rem)] overflow-y-auto overflow-x-hidden [scrollbar-width:none] [-ms-overflow-style:none] [&::-webkit-scrollbar]:hidden lg:[scrollbar-width:auto] lg:[-ms-overflow-style:auto] lg:[&::-webkit-scrollbar]:block"
        >
          ${this._initialChildren}
        </div>
      </main>
    `}};hy=xB([F("main-layout")],hy);var _B=Object.getOwnPropertyDescriptor,kB=(t,e,r,i)=>{for(var n=i>1?void 0:i?_B(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=s(n)||n);return n};let py=class extends V{constructor(){super(...arguments),this._onShowPage=t=>{const e=t.detail;this._updateActiveState(e)}}createRenderRoot(){return this}connectedCallback(){super.connectedCallback(),window.addEventListener("showPage",this._onShowPage);const t=window.currentPageId;t&&this.updateComplete.then(()=>{this._updateActiveState(t)})}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("showPage",this._onShowPage)}_updateActiveState(t){this.querySelectorAll(".nav-menu-item").forEach(e=>{e.dataset.page===t?e.classList.add("active"):e.classList.remove("active")})}render(){return v`
      <!-- Border Segments (Custom right border with gap for button) -->
      <div
        class="absolute right-0 top-0 w-px bg-transparent"
        style="height: calc(50% - 64px)"
      ></div>
      <div
        class="absolute right-0 bottom-0 w-px bg-transparent"
        style="height: calc(50% - 64px)"
      ></div>

      <div
        class="flex-1 w-full flex flex-col justify-start overflow-y-auto md:pt-[clamp(1rem,3vh,4rem)] md:pb-[clamp(0.5rem,2vh,2rem)] md:px-[clamp(1rem,1.5vw,2rem)] p-5 gap-[clamp(1rem,3vh,3rem)]"
      >
        <!-- Logo + Menu -->
        <div
          class="flex flex-col text-[#2563eb] mb-[clamp(1rem,2vh,2rem)] ml-[clamp(0.2rem,0.4vw,0.4vh)]"
        >
          <div class="flex flex-col items-center gap-2">
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 1364 259"
              width="100%"
              height="100%"
              fill="currentColor"
              class="w-[clamp(120px,15vw,192px)] h-[clamp(40px,6vh,64px)] drop-shadow-[0_0_10px_rgba(37,99,235,0.3)]"
            >
              <!-- (Logo paths preserved) -->
              <path
                d="M0,174V51h15.24v-17.14h16.81v-16.98h16.96V0h1266v17.23h17.13v16.81h16.98v16.96h14.88v123h-15.13v17.08h-17.08v17.08h-16.9v17.04H324.9v16.86h-16.9v16.95h-102v-17.12h-17.07v-17.05H48.73v-17.05h-16.89v-16.89H14.94v-16.89H0ZM1297.95,17.35H65.9v16.7h-17.08v17.08h-14.5v123.08h14.85v16.9h17.08v17.08h139.9v17.08h17.08v16.36h67.9v-16.72h17.08v-17.07h989.88v-17.07h17.08v-16.9h14.44V50.8h-14.75v-17.08h-16.9v-16.37Z"
              />
              <path
                d="M189.1,154.78v17.07h-16.9v16.75h-51.07v-16.42h-16.9v-17.07h-16.97v-84.88h16.63v-17.07h16.9v-16.84h51.07v16.5h17.07v17.07h16.7v84.89h-16.54ZM137.87,53.1v17.15h-16.6v84.86h16.97v16.61h16.89v-16.97h16.6v-84.86h-16.97v-16.79h-16.89Z"
              />
              <path
                d="M273.91,104.06v-16.73h50.92v16.45h16.85v68.05h-16.44v17.06h-50.96v16.88h16.4v16.96h-67.28v-16.61h16.33v-101.86h-16.38v-16.98h33.4v16.63c6.12,0,11.72,0,17.31,0,0,22.56,0,45.13,0,67.75h33.59v-67.61h-33.73Z"
              />
              <path
                d="M631.12,188.64v-16.36h16.53V53.2h-16.25v-16.86h118.33v33.29h-16.65v-16.36h-50.72v50.44h33.36v-16.35h16.99v50.25h-16.6v-16.33h-33.73v50.65h16.37v16.72h-67.63Z"
              />
              <path
                d="M596.78,103.8v84.94h-33.54v-84.39h-34.03v84.25h-33.85v-101.29h84.5v16.49h16.93Z"
              />
              <path
                d="M1107.12,188.71v-84.34h-34.03v84.37h-33.7v-101.41h84.42v16.41h16.86v84.96h-33.54Z"
              />
              <path
                d="M988.1,171.78v16.87h-67.88v-16.38h-16.87v-68.06h16.38v-16.87h68.06v16.38h16.87v68.06h-16.55ZM970.78,104.35h-33.39v67.38h33.39v-67.38Z"
              />
              <path
                d="M460.77,155.38v16.49h-16.58v16.83h-68.05v-16.5h-16.83v-68.05h16.49v-16.83h68.05v16.49h16.83v34.06h-67.31v33.82h33.47v-16.31h33.92ZM393.39,104.18v16.56h33.3v-16.56h-33.3Z"
              />
              <path
                d="M1209.13,172h-16.9v-67.9h-16.96v-16.9h16.68v-17.08h16.9v-16.82h16.9v33.58h50.98v16.91h-50.4v67.96h16.48v-16.43h50.95v16.54h-16.55v16.76h-68.08v-16.6Z"
              />
              <path
                d="M834.91,120.94v16.96h-16.65v33.88h16.41v16.96h-67.29v-16.63h16.34v-67.87h-16.4v-16.97h50.42v33.81h17.3l-.14-.14Z"
              />
              <path
                d="M835.05,121.08v-33.75h33.76v16.43h16.85v33.96h-33.43v-16.79c-6.13,0-11.73,0-17.32,0,0,0,.14.14.14.14Z"
              />
            </svg>
            <div
              id="game-version"
              class="l-header__highlightText text-center"
            ></div>
          </div>
        </div>
        <!-- Mobile Navigation Menu Items -->
        <button
          class="nav-menu-item block w-full text-left font-bold uppercase tracking-[0.05em] text-white/70 transition-all duration-200 cursor-pointer hover:text-blue-600 hover:translate-x-2.5 hover:drop-shadow-[0_0_20px_rgba(37,99,235,0.5)] [&.active]:text-blue-600 [&.active]:translate-x-2.5 [&.active]:drop-shadow-[0_0_20px_rgba(37,99,235,0.5)] text-[clamp(18px,2.8vh,32px)] py-[clamp(0.2rem,0.8vh,0.75rem)]"
          data-page="page-play"
          data-i18n="main.play"
        ></button>
        <button
          class="nav-menu-item block w-full text-left font-bold uppercase tracking-[0.05em] text-white/70 transition-all duration-200 cursor-pointer hover:text-blue-600 hover:translate-x-2.5 hover:drop-shadow-[0_0_20px_rgba(37,99,235,0.5)] [&.active]:text-blue-600 [&.active]:translate-x-2.5 [&.active]:drop-shadow-[0_0_20px_rgba(37,99,235,0.5)] text-[clamp(18px,2.8vh,32px)] py-[clamp(0.2rem,0.8vh,0.75rem)]"
          data-page="page-news"
          data-i18n="main.news"
        ></button>
        <button
          class="nav-menu-item block w-full text-left font-bold uppercase tracking-[0.05em] text-white/70 transition-all duration-200 cursor-pointer hover:text-blue-600 hover:translate-x-2.5 hover:drop-shadow-[0_0_20px_rgba(37,99,235,0.5)] [&.active]:text-blue-600 [&.active]:translate-x-2.5 [&.active]:drop-shadow-[0_0_20px_rgba(37,99,235,0.5)] text-[clamp(18px,2.8vh,32px)] py-[clamp(0.2rem,0.8vh,0.75rem)]"
          data-page="page-leaderboard"
          data-i18n="main.leaderboard"
        ></button>
        <div class="relative no-crazygames">
          <button
            class="nav-menu-item block w-full text-left font-bold uppercase tracking-[0.05em] text-white/70 transition-all duration-200 cursor-pointer hover:text-blue-600 hover:translate-x-2.5 hover:drop-shadow-[0_0_20px_rgba(37,99,235,0.5)] [&.active]:text-blue-600 [&.active]:translate-x-2.5 [&.active]:drop-shadow-[0_0_20px_rgba(37,99,235,0.5)] text-[clamp(18px,2.8vh,32px)] py-[clamp(0.2rem,0.8vh,0.75rem)]"
            data-page="page-item-store"
            data-i18n="main.store"
          ></button>
          <span
            class="absolute top-[45%] -translate-y-1/2 right-4 bg-gradient-to-br from-red-600 to-red-700 text-white text-[10px] font-black tracking-wider px-2.5 py-1 rounded rotate-12 shadow-lg shadow-red-600/50 animate-pulse pointer-events-none"
            data-i18n="main.store_new_badge"
          ></span>
        </div>
        <button
          class="nav-menu-item block w-full text-left font-bold uppercase tracking-[0.05em] text-white/70 transition-all duration-200 cursor-pointer hover:text-blue-600 hover:translate-x-2.5 hover:drop-shadow-[0_0_20px_rgba(37,99,235,0.5)] [&.active]:text-blue-600 [&.active]:translate-x-2.5 [&.active]:drop-shadow-[0_0_20px_rgba(37,99,235,0.5)] text-[clamp(18px,2.8vh,32px)] py-[clamp(0.2rem,0.8vh,0.75rem)]"
          data-page="page-settings"
          data-i18n="main.settings"
        ></button>
        <button
          class="no-crazygames nav-menu-item block w-full text-left font-bold uppercase tracking-[0.05em] text-white/70 transition-all duration-200 cursor-pointer hover:text-blue-600 hover:translate-x-2.5 hover:drop-shadow-[0_0_20px_rgba(37,99,235,0.5)] [&.active]:text-blue-600 [&.active]:translate-x-2.5 [&.active]:drop-shadow-[0_0_20px_rgba(37,99,235,0.5)] text-[clamp(18px,2.8vh,32px)] py-[clamp(0.2rem,0.8vh,0.75rem)]"
          data-page="page-account"
          data-i18n="main.account"
        ></button>
        <button
          class="nav-menu-item block w-full text-left font-bold uppercase tracking-[0.05em] text-white/70 transition-all duration-200 cursor-pointer hover:text-blue-600 hover:translate-x-2.5 hover:drop-shadow-[0_0_20px_rgba(37,99,235,0.5)] [&.active]:text-blue-600 [&.active]:translate-x-2.5 [&.active]:drop-shadow-[0_0_20px_rgba(37,99,235,0.5)] text-[clamp(18px,2.8vh,32px)] py-[clamp(0.2rem,0.8vh,0.75rem)]"
          data-page="page-help"
          data-i18n="main.help"
        ></button>
        <div
          class="flex flex-col w-full mt-auto [.in-game_&]:hidden items-end justify-end pt-4 border-t border-white/10"
        >
          <lang-selector></lang-selector>
        </div>
      </div>
    `}};py=kB([F("mobile-nav-bar")],py);var SB=Object.getOwnPropertyDescriptor,AB=(t,e,r,i)=>{for(var n=i>1?void 0:i?SB(e,r):e,a=t.length-1,s;a>=0;a--)(s=t[a])&&(n=s(n)||n);return n};let fy=class extends V{createRenderRoot(){return this}render(){return v`
      <div
        id="page-play"
        class="flex flex-col gap-2 w-full max-w-6xl mx-auto px-0 sm:px-4 transition-all duration-300 my-auto min-h-0"
      >
        <token-login class="absolute"></token-login>

        <!-- Header / Identity Section -->
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-2 lg:gap-6 w-full">
          <div
            class="lg:col-span-9 flex flex-row flex-nowrap gap-x-2 h-[60px] items-center bg-slate-900/80 backdrop-blur-md p-3 rounded-xl relative z-20 text-sm sm:text-base shrink-0"
          >
            <!-- Flag -->
            <div
              class="h-[40px] sm:h-[50px] shrink-0 aspect-[4/3] flex items-center justify-center lg:hidden"
            >
              <!-- Hamburger (Mobile) -->
              <button
                id="hamburger-btn"
                class="lg:hidden flex w-full h-full bg-slate-800/40 text-white/90 hover:bg-slate-700/40 p-0 rounded-md items-center justify-center cursor-pointer transition-all duration-200"
                data-i18n-aria-label="main.menu"
                aria-expanded="false"
                aria-controls="sidebar-menu"
                aria-haspopup="dialog"
                data-i18n-title="main.menu"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke-width="1.5"
                  stroke="currentColor"
                  class="w-8 h-8"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"
                  />
                </svg>
              </button>
            </div>

            <!-- Username -->
            <div class="flex-1 min-w-0 h-[40px] sm:h-[50px] flex items-center">
              <username-input
                class="relative w-full h-full block text-ellipsis overflow-hidden whitespace-nowrap"
              ></username-input>
            </div>

            <!-- Pattern button (Mobile - inside bar, Desktop - hidden here) -->
            <pattern-input
              id="pattern-input-mobile"
              show-select-label
              class="aspect-square h-[50px] sm:h-[50px] lg:hidden shrink-0"
            ></pattern-input>
          </div>

          <!-- Pattern & Flag buttons (Desktop only - separate column) -->
          <div class="hidden lg:flex lg:col-span-3">
            <div class="w-full h-[60px] flex gap-2">
              <pattern-input
                id="pattern-input-desktop"
                show-select-label
                class="flex-1 h-full"
              ></pattern-input>
              <flag-input
                id="flag-input-desktop"
                show-select-label
                class="flex-1 h-full"
              ></flag-input>
            </div>
          </div>
        </div>

        <!-- Primary Game Actions Area -->
        <div class="grid grid-cols-1 lg:grid-cols-12 gap-6 w-full">
          <!-- Left Column: Featured Lobbies / Quick Play -->
          <div class="lg:col-span-9 flex flex-col gap-6 min-w-0">
            <!-- Public Lobby Card -->
            <public-lobby
              class="block w-full transition-all duration-[50ms]"
            ></public-lobby>
          </div>

          <!-- Right Column: Custom Games & Modes -->
          <div class="lg:col-span-3">
            <div
              class="group relative isolate flex flex-col w-full h-40 lg:h-96 overflow-hidden rounded-2xl transition-all duration-300"
            >
              <div
                class="h-full flex flex-col bg-slate-900/40 backdrop-blur-sm rounded-2xl overflow-hidden"
              >
                <div
                  class="py-2 bg-blue-900/20 text-center text-sm font-bold text-gray-300 uppercase tracking-widest"
                  data-i18n="host_modal.label"
                ></div>
                <div class="flex-1 p-2 flex flex-row lg:flex-col gap-2">
                  <o-button
                    id="single-player"
                    data-i18n-title="main.solo"
                    translationKey="main.solo"
                    fill
                    class="flex-1 transition-transform"
                  ></o-button>

                  <o-button
                    id="host-lobby-button"
                    data-i18n-title="main.create"
                    translationKey="main.create"
                    fill
                    secondary
                    class="flex-1 opacity-90 hover:opacity-100"
                  ></o-button>

                  <o-button
                    id="join-private-lobby-button"
                    data-i18n-title="main.join"
                    translationKey="main.join"
                    fill
                    secondary
                    class="flex-1 opacity-90 hover:opacity-100"
                  ></o-button>
                </div>
              </div>
            </div>
          </div>

          <!-- Matchmaking Buttons (Full Width across entire grid) -->
          <div class="lg:col-span-12 flex flex-col gap-6">
            <matchmaking-button></matchmaking-button>
          </div>
        </div>
      </div>
    `}};fy=AB([F("play-page")],fy);function CB(t){const e=document.getElementById("nav-account-button");if(!e)return;const r=document.getElementById("nav-account-avatar"),i=document.getElementById("nav-account-person-icon"),n=document.getElementById("nav-account-email-badge"),a=document.getElementById("nav-account-signin-text"),s=Symbol();r&&(r._navToken=s);const o=(d,h)=>{r&&(r.alt=h??f("main.discord_avatar_alt"),r.onerror=()=>{if(r._navToken!==s)return;r.src="",(t!==!1?t.user.email:void 0)?c():l()},r.onload=()=>{r._navToken===s&&(r.onerror=null)},r.src=d,r.classList.remove("hidden")),i?.classList.add("hidden"),n?.classList.add("hidden"),a?.classList.add("hidden"),e?.classList.remove("border","border-white/20")},l=()=>{r?.classList.add("hidden"),i?.classList.remove("hidden"),n?.classList.add("hidden"),a?.classList.remove("hidden"),e?.classList.add("border","border-white/20")},c=()=>{r?.classList.add("hidden"),i?.classList.remove("hidden"),n?.classList.remove("hidden"),a?.classList.add("hidden"),e?.classList.add("border","border-white/20")},u=t!==!1?t.user.discord:void 0;if(u&&r){const d=f("main.user_avatar_alt",{username:u.username}),h=w2(u);if(h){o(h,d);return}}if(t!==!1?t.user.email:void 0){c();return}l()}class TB{constructor(){this.gameStop=null,this.eventBus=new o_,this.currentUrl=null,this.usernameInput=null,this.flagInput=null,this.userSettings=new Gt,this.turnstileTokenPromise=null}async initialize(){ve.maybeInit(),this.turnstileTokenPromise=Kh(),await customElements.whenDefined("mobile-nav-bar"),await customElements.whenDefined("desktop-nav-bar");const e=document.querySelectorAll("#game-version, .game-version-display");if(e.length===0)console.warn("Game version element not found");else{const k=mc.trim(),S=k.startsWith("v")?k:`v${k}`;e.forEach(_=>{_.textContent=S})}document.querySelector("lang-selector")||console.warn("Lang selector element not found"),this.flagInput=document.querySelector("flag-input"),this.flagInput||console.warn("Flag input element not found"),this.usernameInput=document.querySelector("username-input"),this.usernameInput||console.warn("Username input element not found"),this.publicLobby=document.querySelector("public-lobby"),window.addEventListener("beforeunload",async()=>{console.log("Browser is closing"),this.gameStop!==null&&(this.gameStop(!0),await ve.gameplayStop())});const i=document.querySelector("gutter-ads");if(!(i instanceof Ga))throw new Error("Missing gutter-ads");this.gutterAds=i,document.addEventListener("join-lobby",this.handleJoinLobby.bind(this)),document.addEventListener("show-public-lobby-modal",this.handleShowPublicLobbyModal.bind(this)),document.addEventListener("leave-lobby",this.handleLeaveLobby.bind(this)),document.addEventListener("kick-player",this.handleKickPlayer.bind(this)),document.addEventListener("update-game-config",this.handleUpdateGameConfig.bind(this));const n=document.querySelector("single-player-modal");(!n||!(n instanceof Ue))&&console.warn("Singleplayer modal element not found");const a=document.getElementById("single-player");if(a===null)throw new Error("Missing single-player");a.addEventListener("click",()=>{this.usernameInput?.isValid()?window.showPage?.("page-single-player"):window.dispatchEvent(new CustomEvent("show-message",{detail:{message:this.usernameInput?.validationError,color:"red",duration:3e3}}))});const s=document.querySelector("help-modal");(!s||!(s instanceof Wa))&&console.warn("Help modal element not found");const o=document.querySelector("game-info-modal");(!o||!(o instanceof Ar))&&console.warn("Game info modal element not found");const l=document.getElementById("help-button");l&&l.addEventListener("click",()=>{s&&s instanceof Wa&&s.open()});const c=document.querySelector("flag-input-modal");if((!c||!(c instanceof ja))&&console.warn("Flag input modal element not found"),document.querySelectorAll("flag-input").forEach(k=>{k.addEventListener("flag-input-click",()=>{c&&c instanceof ja&&c.open()})}),this.patternsModal=document.getElementById("territory-patterns-modal"),(!this.patternsModal||!(this.patternsModal instanceof Fi))&&console.warn("Territory patterns modal element not found"),document.querySelectorAll("pattern-input").forEach(k=>{k.addEventListener("pattern-input-click",()=>{window.showPage?.("page-item-store");const S=document.getElementById("page-item-store");S&&(S.classList.remove("hidden"),typeof S.open=="function"&&S.open({showOnlyOwned:!0}))})}),v2()){const k=document.getElementById("pattern-input-mobile");k&&(k.style.display="none")}(!this.patternsModal||!(this.patternsModal instanceof Fi))&&console.warn("Territory patterns modal element not found"),this.patternsModal.refresh(),this.patternsModal.addEventListener("pattern-selected",()=>{}),window.addEventListener("showPage",k=>{typeof k?.detail=="string"&&k.detail==="page-play"&&setTimeout(()=>{this.patternsModal.refresh()},50)}),this.tokenLoginModal=document.querySelector("token-login"),(!this.tokenLoginModal||!(this.tokenLoginModal instanceof op))&&console.warn("Token login modal element not found"),this.matchmakingModal=document.querySelector("matchmaking-modal"),(!this.matchmakingModal||!(this.matchmakingModal instanceof Ya))&&console.warn("Matchmaking modal element not found");const u=async k=>{CB(k);const S=!ve.isOnCrazyGames()&&((k||null)?.player?.flares?.length??0)>0;console.log("ads enabled: ",S),window.adsEnabled=!S&&!ve.isOnCrazyGames(),document.dispatchEvent(new CustomEvent("userMeResponse",{detail:k,bubbles:!0,cancelable:!0})),k!==!1&&console.log(`Your player ID is ${k.player.publicId}
Sharing this ID will allow others to view your game history and stats.`)};await Rn()===!1?u(!1):jo().then(u);const p=document.querySelector("user-setting");(!p||!(p instanceof Gi))&&console.warn("User settings modal element not found"),document.getElementById("settings-button")?.addEventListener("click",()=>{p&&p instanceof Gi&&p.open()}),this.hostModal=document.querySelector("host-lobby-modal"),!this.hostModal||!(this.hostModal instanceof Ee)?console.warn("Host private lobby modal element not found"):this.hostModal.eventBus=this.eventBus;const d=document.getElementById("host-lobby-button");if(d===null)throw new Error("Missing host-lobby-button");d.addEventListener("click",()=>{this.usernameInput?.isValid()?window.showPage?.("page-host-lobby"):window.dispatchEvent(new CustomEvent("show-message",{detail:{message:this.usernameInput?.validationError,color:"red",duration:3e3}}))}),this.joinModal=document.querySelector("join-lobby-modal"),!this.joinModal||!(this.joinModal instanceof qt)?console.warn("Join lobby modal element not found"):this.joinModal.eventBus=this.eventBus;const h=document.getElementById("join-private-lobby-button");if(h===null)throw new Error("Missing join-private-lobby-button");h.addEventListener("click",()=>{this.usernameInput?.isValid()?window.showPage?.("page-join-lobby"):window.dispatchEvent(new CustomEvent("show-message",{detail:{message:this.usernameInput?.validationError,color:"red",duration:3e3}}))}),this.userSettings.darkMode()?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark"),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>this.handleUrl()):this.handleUrl();const g=()=>{this.joinModal?.close(),x()},y=()=>{if(this.currentUrl!==null&&this.gameStop!==null){if(console.info("Game is active"),!this.gameStop()&&(console.info("Player is active, ask before leaving game"),!confirm(f("help_modal.exit_confirmation")))){history.pushState(null,"",this.currentUrl);return}console.info("Player is not active, leave the game immediately"),ve.gameplayStop().then(()=>{window.location.href="/"})}else console.info("Game not active, handle hash update"),g()},x=()=>{this.gameStop!==null&&this.handleLeaveLobby(),this.handleUrl()};window.addEventListener("popstate",y),window.addEventListener("hashchange",g),window.addEventListener("join-changed",x);function m(k){const S=(Number(k.value)-Number(k.min))/(Number(k.max)-Number(k.min))*100;k.style.setProperty("--progress",`${S}%`)}document.querySelectorAll("#bots-count, #private-lobby-bots-count").forEach(k=>{m(k),k.addEventListener("input",()=>m(k))})}async handleUrl(){if(await Promise.all([customElements.whenDefined("join-lobby-modal"),customElements.whenDefined("host-lobby-modal")]),ve.isOnCrazyGames()){const c=await ve.getInviteGameId();if(console.log("got game id",c),c&&Ea.test(c)){console.log("game parsed successfully"),await new Promise(u=>setTimeout(u,2e3)),window.showPage?.("page-join-lobby"),this.joinModal?.open(c),console.log(`CrazyGames: joining lobby ${c} from invite param`);return}}ve.isInstantMultiplayer().then(c=>{c&&(console.log("CrazyGames: joining instant multiplayer lobby from CrazyGames"),this.hostModal.open())});const e=()=>history.replaceState(null,"",window.location.pathname+window.location.search),r=c=>{alert(c),e()},i=window.location.hash,n=decodeURIComponent(i),a=new URLSearchParams(n.split("?")[1]||"");if(n.startsWith("#purchase-completed")){if(a.get("status")!=="true"){r("purchase failed");return}const u=a.get("pattern");if(!u){alert("Something went wrong. Please contact support."),console.error("purchase-completed but no pattern name");return}this.userSettings.setSelectedPatternName(u);const p=a.get("login-token");p?(e(),window.addEventListener("beforeunload",()=>{this.userSettings.setSelectedPatternName(u)}),this.tokenLoginModal.openWithToken(p)):(r(`purchase succeeded: ${u}`),this.patternsModal.refresh());return}if(n.startsWith("#token-login")){const c=a.get("token-login");if(!c){r("login failed! Please try again later or contact support.");return}e(),this.tokenLoginModal.openWithToken(c);return}const s=window.location.pathname.match(/^\/(?:w\d+\/)?game\/([^/]+)/),o=s&&Ea.test(s[1])?s[1]:null;if(o){window.showPage?.("page-join-lobby"),this.joinModal.open(o),console.log(`joining lobby ${o}`);return}if(n.startsWith("#affiliate=")){const c=n.replace("#affiliate=","");e(),c&&this.patternsModal?.open(c)}n.startsWith("#refresh")&&(window.location.href="/");const l=new URLSearchParams(window.location.search);if(l.has("requeue")){l.delete("requeue");const c=window.location.pathname+(l.toString()?"?"+l.toString():"")+window.location.hash;history.replaceState(null,"",c),customElements.whenDefined("matchmaking-button").then(()=>{const u=document.querySelector("matchmaking-button button");u?u.click():console.warn("Requeue requested, but matchmaking button not found in DOM.")})}}async handleJoinLobby(e){const r=e.detail;console.log(`joining lobby ${r.gameID}`),this.gameStop!==null&&(console.log("joining lobby, stopping existing game"),this.gameStop(!0),document.body.classList.remove("in-game"));const i=await Ut();r.source!=="public"&&this.updateJoinUrlForShare(r.gameID,i);const n=this.userSettings.getSelectedPatternName(await as());this.gameStop=T7(this.eventBus,{gameID:r.gameID,serverConfig:i,cosmetics:{color:this.userSettings.getSelectedColor()??void 0,patternName:n?.name??void 0,patternColorPaletteName:n?.colorPalette?.name??void 0,flag:this.flagInput===null||this.flagInput.getCurrentFlag()==="xx"?"":this.flagInput.getCurrentFlag()},turnstileToken:await this.getTurnstileToken(r),playerName:this.usernameInput?.getCurrentUsername()??cp(),gameStartInfo:r.gameStartInfo??r.gameRecord?.info,gameRecord:r.gameRecord},()=>{console.log("Closing modals"),document.getElementById("settings-button")?.classList.add("hidden"),this.usernameInput&&(this.usernameInput.validationError=""),document.getElementById("username-validation-error")?.classList.add("hidden"),this.joinModal?.closeWithoutLeaving(),["single-player-modal","host-lobby-modal","game-starting-modal","game-top-bar","help-modal","user-setting","troubleshooting-modal","territory-patterns-modal","language-modal","news-modal","flag-input-modal","account-button","leaderboard-button","token-login","matchmaking-modal","lang-selector","gutter-ads"].forEach(s=>{const o=document.querySelector(s);o?.close?o.close():o&&"isModalOpen"in o&&(o.isModalOpen=!1)}),this.publicLobby.stop(),document.querySelectorAll(".ad").forEach(s=>{s.style.display="none"}),ve.loadingStart();const a=document.querySelector("game-starting-modal");a&&a instanceof Yc&&a.show()},()=>{this.joinModal.close(),this.publicLobby.stop(),cC(),document.querySelectorAll(".ad").forEach(a=>{a.style.display="none"}),window.PageOS?.session?.newPageView&&window.PageOS.session.newPageView(),ve.loadingStop(),ve.gameplayStart(),document.body.classList.add("in-game"),(window.location.hash===""||window.location.hash==="#")&&history.replaceState(null,"",window.location.origin+"#refresh"),history.pushState(null,"",`/${i.workerPath(r.gameID)}/game/${r.gameID}?live`),this.currentUrl=window.location.href})}updateJoinUrlForShare(e,r){const i=`/${r.workerPath(e)}/game/${e}`;window.location.pathname!==i&&history.replaceState(null,"",i)}handleShowPublicLobbyModal(e){const{lobby:r}=e.detail;console.log(`Opening JoinLobbyModal for public lobby ${r.gameID}`),window.showPage?.("page-join-lobby"),this.joinModal?.open(r.gameID,!0)}async handleLeaveLobby(){if(this.gameStop!==null){console.log("leaving lobby, cancelling game"),this.gameStop(!0),this.gameStop=null,this.currentUrl=null;try{history.replaceState(null,"","/")}catch(e){console.warn("Failed to restore URL on leave:",e)}document.body.classList.remove("in-game"),ve.gameplayStop()}}handleKickPlayer(e){const{target:r}=e.detail;this.eventBus&&this.eventBus.emit(new sf(r))}handleUpdateGameConfig(e){const{config:r}=e.detail;this.eventBus&&this.eventBus.emit(new W2(r))}async getTurnstileToken(e){if((await Ut()).env()===zr.Dev||e.gameStartInfo?.config.gameType===lt.Singleplayer)return null;if(this.turnstileTokenPromise===null||ve.isOnCrazyGames())return console.log("No prefetched turnstile token, getting new token"),(await Kh())?.token??null;const i=await this.turnstileTokenPromise;if(this.turnstileTokenPromise=null,!i)return console.log("No turnstile token"),null;const n=180*1e3;return Date.now()<i.createdAt+n?(console.log("Prefetched turnstile token is valid"),i.token):(console.log("Turnstile token expired, getting new token"),(await Kh())?.token??null)}}const Wh=()=>{ve.isOnCrazyGames()&&document.querySelectorAll(".no-crazygames").forEach(t=>{t.style.display="none"})},gy=()=>{BD(),new TB().initialize(),aL(),Wh(),setTimeout(Wh,100),setTimeout(Wh,500)};document.readyState==="loading"?document.addEventListener("DOMContentLoaded",gy):gy();async function Kh(){let t=0;for(;typeof window.turnstile>"u"&&t<100;)await new Promise(i=>setTimeout(i,100)),t++;if(typeof window.turnstile>"u")throw new Error("Failed to load Turnstile script");const e=await Ut(),r=window.turnstile.render("#turnstile-container",{sitekey:e.turnstileSiteKey(),size:"normal",appearance:"interaction-only",theme:"light"});return new Promise((i,n)=>{window.turnstile.execute(r,{callback:a=>{window.turnstile.remove(r),console.log(`Turnstile token received: ${a}`),i({token:a,createdAt:Date.now()})},"error-callback":a=>{window.turnstile.remove(r),console.error(`Turnstile error: ${a}`),alert(`Turnstile error: ${a}. Please refresh and try again.`),n(new Error(`Turnstile failed: ${a}`))}})})}
